!function(n){"use strict";var e,t={},$estr=function(){return js_Boot.__string_rec(this,"")},i=i||{};function $extend(n,e){var t=Object.create(n);for(var i in e)t[i]=e[i];return e.toString!==Object.prototype.toString&&(t.toString=e.toString),t}var EReg=function(n,e){this.r=new RegExp(n,e.split("u").join(""))};t.EReg=EReg,EReg.__name__="EReg",EReg.prototype={match:function(n){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(n),this.r.s=n,null!=this.r.m},matched:function(n){if(null!=this.r.m&&n>=0&&n<this.r.m.length)return this.r.m[n];throw haxe_Exception.thrown("EReg::matched")},__class__:EReg};var HxOverrides=function(){};t.HxOverrides=HxOverrides,HxOverrides.__name__="HxOverrides",HxOverrides.strDate=function(n){switch(n.length){case 8:var e=n.split(":"),t=new Date;return t.setTime(0),t.setUTCHours(e[0]),t.setUTCMinutes(e[1]),t.setUTCSeconds(e[2]),t;case 10:e=n.split("-");return new Date(e[0],e[1]-1,e[2],0,0,0);case 19:var i=(e=n.split(" "))[0].split("-"),r=e[1].split(":");return new Date(i[0],i[1]-1,i[2],r[0],r[1],r[2]);default:throw haxe_Exception.thrown("Invalid date format : "+n)}},HxOverrides.cca=function(n,e){var t=n.charCodeAt(e);if(t==t)return t},HxOverrides.substr=function(n,e,t){if(null==t)t=n.length;else if(t<0){if(0!=e)return"";t=n.length+t}return n.substr(e,t)},HxOverrides.remove=function(n,e){var t=n.indexOf(e);return-1!=t&&(n.splice(t,1),!0)},HxOverrides.now=function(){return Date.now()};var IntIterator=function(n,e){this.min=n,this.max=e};t.IntIterator=IntIterator,IntIterator.__name__="IntIterator",IntIterator.prototype={hasNext:function(){return this.min<this.max},next:function(){return this.min++},__class__:IntIterator};var Lambda=function(){};t.Lambda=Lambda,Lambda.__name__="Lambda",Lambda.count=function(n,e){var t=0;if(null==e)for(var i=$getIterator(n);i.hasNext();){i.next();++t}else for(var r=$getIterator(n);r.hasNext();){e(r.next())&&++t}return t};var Main=function(){};t.Main=Main,Main.__name__="Main",Main.main=function(){Main.events=new backend_ClayEvents(Main.ready),new clay_Clay(Main.configure,Main.events)},Main.configure=function(e){if(e.window.backgroundSleep=.016666666666666666,n.navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)try{var t=require("electron").remote.require("./app.js");t.isCeramicRunner&&(backend_ElectronRunner.electronRunner=t)}catch(n){}if(null!=backend_ElectronRunner.electronRunner){document.getElementsByTagName("html")[0].className+=" in-electron-runner",ceramic_Logger._hasElectronRunner=!0;var i=console.log;console.log=function(n){backend_ElectronRunner.electronRunner.consoleLog(n),i(n)},window.addEventListener("error",(function(n){var e=n.error;if(e instanceof haxe_ValueException)e.get_stack();for(var t=(""+e.stack).split("\n"),i=t.length-1,r=-1!=navigator.platform.indexOf("Win");i>=0;){var l=t[i];l=StringTools.ltrim(l),l=StringTools.replace(l,"http://localhost:"+Std.string(backend_ElectronRunner.electronRunner.serverPort)+"/file:"+(r?"/":""),""),l=StringTools.replace(l,"http://localhost:"+Std.string(backend_ElectronRunner.electronRunner.serverPort)+"/",Std.string(backend_ElectronRunner.electronRunner.appFiles)+"/"),backend_ElectronRunner.electronRunner.consoleLog("[error] "+l),--i}}))}Main.project=new Project(ceramic_App.init()),Main.app=ceramic_App.app,null==backend_ElectronRunner.electronRunner&&Main.app.settings.get_fullscreen()&&Main.app.settings.set_fullscreen(!1),e.render.antialiasing=Main.app.settings.antialiasing,Main.app.settings.get_windowWidth()>0?e.window.width=Main.app.settings.get_windowWidth():Main.app.settings.get_targetWidth()>0&&(e.window.width=Main.app.settings.get_targetWidth()),Main.app.settings.get_windowHeight()>0?e.window.height=Main.app.settings.get_windowHeight():Main.app.settings.get_targetHeight()>0&&(e.window.height=Main.app.settings.get_targetHeight()),e.window.fullscreen=Main.app.settings.get_fullscreen(),e.window.resizable=Main.app.settings.resizable,e.window.title=Main.app.settings.get_title(),e.render.stencil=2,e.render.depth=16,Main.configureOrientation(),null!=Main.app.settings.backend.webParent?e.runtime.windowParent=Main.app.settings.backend.webParent:e.runtime.windowParent=window.document.getElementById("ceramic-app"),e.runtime.mouseUseBrowserWindowEvents=!0,Main.app.settings.backend.allowDefaultKeys&&(e.runtime.preventDefaultKeys=[]),Main.containerElId=null!=Main.app.settings.backend.webParent?Main.app.settings.backend.webParent.id:"ceramic-app",Main.containerWidth=0,Main.containerHeight=0,Main.containerPixelRatio=0,window.document.body.classList.add("ceramic-invisible"),window.requestAnimationFrame(Main._updateContainerSizeIfNeeded),null!=backend_ElectronRunner.electronRunner&&(null!=backend_ElectronRunner.electronRunner.ceramicSettings&&backend_ElectronRunner.electronRunner.ceramicSettings({trace:function(n){},title:Main.app.settings.get_title(),fullscreen:Main.app.settings.get_fullscreen(),resizable:Main.app.settings.resizable,targetWidth:Main.app.settings.get_windowWidth()>0?Main.app.settings.get_windowWidth():Main.app.settings.get_targetWidth(),targetHeight:Main.app.settings.get_windowHeight()>0?Main.app.settings.get_windowHeight():Main.app.settings.get_targetHeight()}),null!=backend_ElectronRunner.electronRunner.listenFullscreen&&backend_ElectronRunner.electronRunner.listenFullscreen((function(n){ceramic_App.app.settings.set_fullscreen(!0)}),(function(n){ceramic_App.app.settings.set_fullscreen(!1)})))},Main._updateContainerSizeIfNeeded=function(n){null==n&&(n=.016);var e=window.document.getElementById(Main.containerElId),t=window.document.getElementById("app");if(null!=e&&null!=t){var i=e.offsetWidth,r=e.offsetHeight,l=window.performance.now()/1e3;if(-1!=Main.lastResizeTime&&(i!=Main.lastNewWidth||r!=Main.lastNewHeight))return-1==Main.lastNewWidth&&-1==Main.lastNewHeight||window.document.body.classList.add("ceramic-invisible"),Main.lastResizeTime=l,Main.lastNewWidth=i,Main.lastNewHeight=r,void window.requestAnimationFrame(Main._updateContainerSizeIfNeeded);if(-1!=Main.lastResizeTime&&l-Main.lastResizeTime<.1)return void window.requestAnimationFrame(Main._updateContainerSizeIfNeeded);if(i!=Main.containerWidth||r!=Main.containerHeight||window.devicePixelRatio!=Main.containerPixelRatio){Main.containerWidth=i,Main.containerHeight=r,Main.containerPixelRatio=window.devicePixelRatio,t.style.width=Main.containerWidth+"px",t.style.height=Main.containerHeight+"px",t.width=Math.round(Main.containerWidth*window.devicePixelRatio),t.height=Math.round(Main.containerHeight*window.devicePixelRatio),Main.resizing++,-1!=Main.lastResizeTime&&window.document.body.classList.add("ceramic-invisible");var s;s=function(){0==Main.resizing&&Main.readyToDisplay&&window.document.body.classList.remove("ceramic-invisible")},window.setTimeout((function(){Main.resizing--,s()}),100),Main.lastResizeTime=l}}window.requestAnimationFrame(Main._updateContainerSizeIfNeeded)},Main._appLoaderCheckDisplayReady=function(n){Main._displayReady?n():Main._pendingDisplayReadyDone=n},Main.ready=function(){Main.app.backend.io.initKeyValueIfNeeded(),Main._displayReady=!1,Main.app.loaders.push(Main._appLoaderCheckDisplayReady);clay_opengl_web_GL.gl.getExtension("OES_standard_derivatives");null!=backend_ElectronRunner.electronRunner&&backend_ElectronRunner.electronRunner.ceramicReady();var n=null;n=window.setInterval((function(){var e=null!=Main.app.settings.backend.webParent?Main.app.settings.backend.webParent.id:"ceramic-app",t=window.document.getElementById(e);if(window.document.getElementById("app").offsetWidth==t.offsetWidth&&(Main.readyToDisplay=!0,window.clearInterval(n)),Main.readyToDisplay&&(0==Main.resizing&&window.document.body.classList.remove("ceramic-invisible"),Main._displayReady=!0,null!=Main._pendingDisplayReadyDone)){var i=Main._pendingDisplayReadyDone;Main._pendingDisplayReadyDone=null,i(),i=null}}),500)},Main.configureOrientation=function(){},Math.__name__="Math";var ceramic_Lazy=function(){};t["ceramic.Lazy"]=ceramic_Lazy,ceramic_Lazy.__name__="ceramic.Lazy",ceramic_Lazy.__isInterface__=!0;var tracker_Events=function(){};t["tracker.Events"]=tracker_Events,tracker_Events.__name__="tracker.Events",tracker_Events.__isInterface__=!0;var ceramic_Entity=function(){this._components=null,this.autoruns=null,this._lifecycleState=0,this.id=null,this._data=null};t["ceramic.Entity"]=ceramic_Entity,ceramic_Entity.__name__="ceramic.Entity",ceramic_Entity.__interfaces__=[ceramic_Lazy,tracker_Events],ceramic_Entity.prototype={get_hasData:function(){return null!=this._data},get_data:function(){return null==this._data&&(this._data={}),this._data},set_data:function(n){return this._data=n},get_destroyed:function(){return this._lifecycleState<0},get_disposed:function(){return 1==this._lifecycleState},emitDispose:function(n){var e=0;if(null!=this.__cbOnDispose&&(e+=this.__cbOnDispose.length),null!=this.__cbOnceDispose&&(e+=this.__cbOnceDispose.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnDispose)for(var l=0,s=this.__cbOnDispose.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnDispose[a],++r):--e}if(null!=this.__cbOnceDispose){var o=null,p=null;for(l=0,s=this.__cbOnceDispose.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceDispose[a],this.__cbOnceDispose[a]=null;var h=this.__cbOnceOwnerUnbindDispose[a];this.__cbOnceOwnerUnbindDispose[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindDispose[a]),p.push(this.__cbOnceDispose[a])}this.__cbOnceOwnerUnbindDispose=o,this.__cbOnceDispose=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onDispose:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event dispose because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDispose(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindDispose&&(this.__cbOnOwnerUnbindDispose=[]),this.__cbOnOwnerUnbindDispose.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindDispose&&(this.__cbOnOwnerUnbindDispose=[]),this.__cbOnOwnerUnbindDispose.push(null);null==this.__cbOnDispose&&(this.__cbOnDispose=[]),this.__cbOnDispose.push(e)},onceDispose:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event dispose because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDispose(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindDispose&&(this.__cbOnceOwnerUnbindDispose=[]),this.__cbOnceOwnerUnbindDispose.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindDispose&&(this.__cbOnceOwnerUnbindDispose=[]),this.__cbOnceOwnerUnbindDispose.push(null);null==this.__cbOnceDispose&&(this.__cbOnceDispose=[]),this.__cbOnceDispose.push(e)},offDispose:function(n){if(null!=n){var e;null!=this.__cbOnDispose&&-1!=(e=this.__cbOnDispose.indexOf(n))&&(this.__cbOnDispose.splice(e,1),null!=(l=this.__cbOnOwnerUnbindDispose[e])&&l(),this.__cbOnOwnerUnbindDispose.splice(e,1)),null!=this.__cbOnceDispose&&-1!=(e=this.__cbOnceDispose.indexOf(n))&&(this.__cbOnceDispose.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindDispose[e])&&l(),this.__cbOnceOwnerUnbindDispose.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindDispose){for(var t=0,i=this.__cbOnOwnerUnbindDispose.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindDispose[r])&&l()}this.__cbOnOwnerUnbindDispose=null}if(null!=this.__cbOnceOwnerUnbindDispose){for(t=0,i=this.__cbOnceOwnerUnbindDispose.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindDispose[r])&&l()}this.__cbOnceOwnerUnbindDispose=null}this.__cbOnDispose=null,this.__cbOnceDispose=null}},listensDispose:function(){return null!=this.__cbOnDispose&&this.__cbOnDispose.length>0||null!=this.__cbOnceDispose&&this.__cbOnceDispose.length>0},emitDestroy:function(n){var e=0;if(null!=this.__cbOnDestroy&&(e+=this.__cbOnDestroy.length),null!=this.__cbOnceDestroy&&(e+=this.__cbOnceDestroy.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnDestroy)for(var l=0,s=this.__cbOnDestroy.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnDestroy[a],++r):--e}if(null!=this.__cbOnceDestroy){var o=null,p=null;for(l=0,s=this.__cbOnceDestroy.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceDestroy[a],this.__cbOnceDestroy[a]=null;var h=this.__cbOnceOwnerUnbindDestroy[a];this.__cbOnceOwnerUnbindDestroy[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindDestroy[a]),p.push(this.__cbOnceDestroy[a])}this.__cbOnceOwnerUnbindDestroy=o,this.__cbOnceDestroy=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onDestroy:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event destroy because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDestroy(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindDestroy&&(this.__cbOnOwnerUnbindDestroy=[]),this.__cbOnOwnerUnbindDestroy.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindDestroy&&(this.__cbOnOwnerUnbindDestroy=[]),this.__cbOnOwnerUnbindDestroy.push(null);null==this.__cbOnDestroy&&(this.__cbOnDestroy=[]),this.__cbOnDestroy.push(e)},onceDestroy:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event destroy because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDestroy(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindDestroy&&(this.__cbOnceOwnerUnbindDestroy=[]),this.__cbOnceOwnerUnbindDestroy.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindDestroy&&(this.__cbOnceOwnerUnbindDestroy=[]),this.__cbOnceOwnerUnbindDestroy.push(null);null==this.__cbOnceDestroy&&(this.__cbOnceDestroy=[]),this.__cbOnceDestroy.push(e)},offDestroy:function(n){if(null!=n){var e;null!=this.__cbOnDestroy&&-1!=(e=this.__cbOnDestroy.indexOf(n))&&(this.__cbOnDestroy.splice(e,1),null!=(l=this.__cbOnOwnerUnbindDestroy[e])&&l(),this.__cbOnOwnerUnbindDestroy.splice(e,1)),null!=this.__cbOnceDestroy&&-1!=(e=this.__cbOnceDestroy.indexOf(n))&&(this.__cbOnceDestroy.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindDestroy[e])&&l(),this.__cbOnceOwnerUnbindDestroy.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindDestroy){for(var t=0,i=this.__cbOnOwnerUnbindDestroy.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindDestroy[r])&&l()}this.__cbOnOwnerUnbindDestroy=null}if(null!=this.__cbOnceOwnerUnbindDestroy){for(t=0,i=this.__cbOnceOwnerUnbindDestroy.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindDestroy[r])&&l()}this.__cbOnceOwnerUnbindDestroy=null}this.__cbOnDestroy=null,this.__cbOnceDestroy=null}},listensDestroy:function(){return null!=this.__cbOnDestroy&&this.__cbOnDestroy.length>0||null!=this.__cbOnceDestroy&&this.__cbOnceDestroy.length>0},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-3,null!=this.autoruns)for(var n=0,e=this.autoruns.length;n<e;){var t=n++,i=this.autoruns[t];null!=i&&(this.autoruns[t]=null,i.destroy())}if(this.emitDestroy(this),null!=this._components){for(var r=null,l=this._components.h,s=Object.keys(l),a=s.length,o=0;o<a;){var p=s[o++];null==r?r=[p]:r.push(p)}if(null!=r)for(n=0;n<r.length;){p=r[n];++n,this.removeComponent(p)}}this.unbindEvents()}},dispose:function(){0==this._lifecycleState&&(this._lifecycleState=1,ceramic_App.app.disposedEntities.push(this)),this.emitDispose(this)},unbindEvents:function(){this.offDispose(),this.offDestroy()},autorun:function(n,e){if(this._lifecycleState<0)return null;var t=new tracker_Autorun(n,e);if(n=null,e=null,null==this.autoruns)this.autoruns=[t];else{for(var i=!1,r=0,l=this.autoruns.length;r<l;){var s=r++;if(null==this.autoruns[s]){this.autoruns[s]=t,i=!0;break}}i||this.autoruns.push(t)}return t.onDestroy(this,$bind(this,this.checkAutoruns)),t},checkAutoruns:function(n){for(var e=0,t=this.autoruns.length;e<t;){var i=e++,r=this.autoruns[i];null!=r&&r._lifecycleState<0&&(this.autoruns[i]=null)}},tween:function(n,e,t,i,r){return ceramic_Tween.start(this,n,e,t,i,r)},className:function(){var n=js_Boot.getClass(this).__name__,e=n.lastIndexOf(".");return-1!=e&&(n=HxOverrides.substr(n,e+1,null)),n},toString:function(){var n=this.className();return null!=this.id?n+"("+this.id+")":""+n},clearComponents:function(){if(null!=this._components){for(var n=null,e=this._components.h,t=Object.keys(e),i=t.length,r=0;r<i;){var l=t[r++];null==n?n=[l]:n.push(l)}if(null!=n)for(var s=0;s<n.length;){l=n[s];++s,this.removeComponent(l)}}},get_components:function(){return this._components},set_components:function(n){if(this._components==n)return n;if(null!=this._components){r=this._components.h;for(var e=(l=Object.keys(r)).length,t=0;t<e;){var i=l[t++];null!=n&&Object.prototype.hasOwnProperty.call(n.h,i)||this.removeComponent(i)}}if(null!=n){var r,l;for(r=n.h,e=(l=Object.keys(r)).length,t=0;t<e;){i=l[t++];var s=n.h[i];if(null!=this._components){var a=this._components.h[i];null!=a?a!=s&&(this.removeComponent(i),this.component(i,s)):this.component(i,s)}else this.component(i,s)}}return this._components=n,n},component:function(n,e){var t=this;if(null==n&&null==e)throw haxe_Exception.thrown("Invalid component() call: either `name` or `component` should be provided at least.");if(null==n){var i=js_Boot.getClass(e);if(n=i.__name__,null!=this._components&&Object.prototype.hasOwnProperty.call(this._components.h,n)){var r=n,l=1;for(n=r+"#"+l;Object.prototype.hasOwnProperty.call(this._components.h,n);)++l,n=r+"#"+l}}if(null!=e){if(null==this._components)this._components=new haxe_ds_StringMap;else{var s=this._components.h[n];if(null!=s)s.destroy()}return this._components.h[n]=e,e.setEntity(this),e.onceDestroy(this,(function(i){if((e.getEntity()==t&&e.setEntity(null),t._lifecycleState>=0)&&t._components.h[n]==e){var r=t._components;Object.prototype.hasOwnProperty.call(r.h,n)&&delete r.h[n]}})),e.bindAsComponent(),e}return null==this._components?null:this._components.h[n]},hasComponent:function(n){return null!=this.component(n)},removeComponent:function(n){var e=this._components.h[n];if(null!=e){var t=this._components;Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],e.destroy()}},__class__:ceramic_Entity,__properties__:{set_components:"set_components",get_components:"get_components",get_disposed:"get_disposed",get_destroyed:"get_destroyed",set_data:"set_data",get_data:"get_data",get_hasData:"get_hasData"}};var Project=function(n){ceramic_Entity.call(this),n.settings.antialiasing=2,n.settings.set_background(0),n.settings.set_targetWidth(1024),n.settings.set_targetHeight(768),n.settings.set_scaling(b.FIT),n.settings.resizable=!0,ceramic_App.app.onceReady(this,$bind(this,this.ready))};t.Project=Project,Project.__name__="Project",Project.__super__=ceramic_Entity,Project.prototype=$extend(ceramic_Entity.prototype,{ready:function(){ceramic_App.app.get_scenes().set_main(new ld49_MainScene)},__class__:Project});var Reflect=function(){};t.Reflect=Reflect,Reflect.__name__="Reflect",Reflect.field=function(n,e){try{return n[e]}catch(n){return null}},Reflect.getProperty=function(n,e){var t;return null==n?null:!!n.__properties__&&(t=n.__properties__["get_"+e])?n[t]():n[e]},Reflect.setProperty=function(n,e,t){var i;!!n.__properties__&&(i=n.__properties__["set_"+e])?n[i](t):n[e]=t},Reflect.fields=function(n){var e=[];if(null!=n){var t=Object.prototype.hasOwnProperty;for(var i in n)"__id__"!=i&&"hx__closures__"!=i&&t.call(n,i)&&e.push(i)}return e},Reflect.isFunction=function(n){return"function"==typeof n&&!(n.__name__||n.__ename__)},Reflect.deleteField=function(n,e){return!!Object.prototype.hasOwnProperty.call(n,e)&&(delete n[e],!0)},Reflect.copy=function(n){if(null==n)return null;for(var e={},t=0,i=Reflect.fields(n);t<i.length;){var r=i[t];++t,e[r]=Reflect.field(n,r)}return e};var Std=function(){};t.Std=Std,Std.__name__="Std",Std.string=function(n){return js_Boot.__string_rec(n,"")},Std.parseInt=function(n){if(null!=n)for(var e=0,t=n.length;e<t;){var i=e++,r=n.charCodeAt(i);if(r<=8||r>=14&&32!=r&&45!=r){var l=n.charCodeAt(i+1),s=parseInt(n,120==l||88==l?16:10);return isNaN(s)?null:s}}return null};var StringBuf=function(){this.b=""};t.StringBuf=StringBuf,StringBuf.__name__="StringBuf",StringBuf.prototype={__class__:StringBuf};var StringTools=function(){};t.StringTools=StringTools,StringTools.__name__="StringTools",StringTools.htmlEscape=function(n,e){for(var t="",i=0,r=n;i<r.length;){var l=i++,s=(n=r).charCodeAt(l);s>=55296&&s<=56319&&(s=s-55232<<10|1023&n.charCodeAt(l+1));s>=65536&&++i;var a=s;switch(a){case 34:t+=e?"&quot;":String.fromCodePoint(a);break;case 38:t+="&amp;";break;case 39:t+=e?"&#039;":String.fromCodePoint(a);break;case 60:t+="&lt;";break;case 62:t+="&gt;";break;default:t+=String.fromCodePoint(a)}}return t},StringTools.startsWith=function(n,e){return n.length>=e.length&&0==n.lastIndexOf(e,0)},StringTools.endsWith=function(n,e){var t=e.length,i=n.length;return i>=t&&n.indexOf(e,i-t)==i-t},StringTools.isSpace=function(n,e){var t=HxOverrides.cca(n,e);return t>8&&t<14||32==t},StringTools.ltrim=function(n){for(var e=n.length,t=0;t<e&&StringTools.isSpace(n,t);)++t;return t>0?HxOverrides.substr(n,t,e-t):n},StringTools.rtrim=function(n){for(var e=n.length,t=0;t<e&&StringTools.isSpace(n,e-t-1);)++t;return t>0?HxOverrides.substr(n,0,e-t):n},StringTools.trim=function(n){return StringTools.ltrim(StringTools.rtrim(n))},StringTools.replace=function(n,e,t){return n.split(e).join(t)},StringTools.hex=function(n,e){for(var t="";t="0123456789ABCDEF".charAt(15&n)+t,(n>>>=4)>0;);if(null!=e)for(;t.length<e;)t="0"+t;return t};var r=i.ValueType={__ename__:"ValueType",__constructs__:null,TNull:{_hx_name:"TNull",_hx_index:0,__enum__:"ValueType",toString:$estr},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"ValueType",toString:$estr},TFloat:{_hx_name:"TFloat",_hx_index:2,__enum__:"ValueType",toString:$estr},TBool:{_hx_name:"TBool",_hx_index:3,__enum__:"ValueType",toString:$estr},TObject:{_hx_name:"TObject",_hx_index:4,__enum__:"ValueType",toString:$estr},TFunction:{_hx_name:"TFunction",_hx_index:5,__enum__:"ValueType",toString:$estr},TClass:(e=function(n){return{_hx_index:6,c:n,__enum__:"ValueType",toString:$estr}},e._hx_name="TClass",e.__params__=["c"],e),TEnum:(e=function(n){return{_hx_index:7,e:n,__enum__:"ValueType",toString:$estr}},e._hx_name="TEnum",e.__params__=["e"],e),TUnknown:{_hx_name:"TUnknown",_hx_index:8,__enum__:"ValueType",toString:$estr}};r.__constructs__=[r.TNull,r.TInt,r.TFloat,r.TBool,r.TObject,r.TFunction,r.TClass,r.TEnum,r.TUnknown];var Type=function(){};t.Type=Type,Type.__name__="Type",Type.createInstance=function(n,e){return new(Function.prototype.bind.apply(n,[null].concat(e)))},Type.createEnum=function(n,e,t){var i=Reflect.field(n,e);if(null==i)throw haxe_Exception.thrown("No such constructor "+e);if(Reflect.isFunction(i)){if(null==t)throw haxe_Exception.thrown("Constructor "+e+" need parameters");return i.apply(n,t)}if(null!=t&&0!=t.length)throw haxe_Exception.thrown("Constructor "+e+" does not need parameters");return i},Type.typeof=function(n){switch(typeof n){case"boolean":return r.TBool;case"function":return n.__name__||n.__ename__?r.TObject:r.TFunction;case"number":return Math.ceil(n)==n%2147483648?r.TInt:r.TFloat;case"object":if(null==n)return r.TNull;var e=n.__enum__;if(null!=e)return r.TEnum(i[e]);var t=js_Boot.getClass(n);return null!=t?r.TClass(t):r.TObject;case"string":return r.TClass(String);case"undefined":return r.TNull;default:return r.TUnknown}},Type.enumParameters=function(n){var e=i[n.__enum__].__constructs__[n._hx_index].__params__;if(null!=e){for(var t=[],r=0;r<e.length;){var l=e[r];++r,t.push(n[l])}return t}return[]};var l={toString:function(n){switch(n){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}}},Xml=function(n){this.nodeType=n,this.children=[],this.attributeMap=new haxe_ds_StringMap};t.Xml=Xml,Xml.__name__="Xml",Xml.parse=function(n){return haxe_xml_Parser.parse(n)},Xml.createElement=function(n){var e=new Xml(Xml.Element);if(e.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":l.toString(e.nodeType)));return e.nodeName=n,e},Xml.createPCData=function(n){var e=new Xml(Xml.PCData);if(e.nodeType==Xml.Document||e.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":l.toString(e.nodeType)));return e.nodeValue=n,e},Xml.createCData=function(n){var e=new Xml(Xml.CData);if(e.nodeType==Xml.Document||e.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":l.toString(e.nodeType)));return e.nodeValue=n,e},Xml.createComment=function(n){var e=new Xml(Xml.Comment);if(e.nodeType==Xml.Document||e.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":l.toString(e.nodeType)));return e.nodeValue=n,e},Xml.createDocType=function(n){var e=new Xml(Xml.DocType);if(e.nodeType==Xml.Document||e.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":l.toString(e.nodeType)));return e.nodeValue=n,e},Xml.createProcessingInstruction=function(n){var e=new Xml(Xml.ProcessingInstruction);if(e.nodeType==Xml.Document||e.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":l.toString(e.nodeType)));return e.nodeValue=n,e},Xml.createDocument=function(){return new Xml(Xml.Document)},Xml.prototype={get:function(n){if(this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));return this.attributeMap.h[n]},set:function(n,e){if(this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));this.attributeMap.h[n]=e},exists:function(n){if(this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,n)},attributes:function(){if(this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));return new haxe_ds__$StringMap_StringMapKeyIterator(this.attributeMap.h)},elements:function(){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));for(var n=[],e=0,t=this.children;e<t.length;){var i=t[e];++e,i.nodeType==Xml.Element&&n.push(i)}return new haxe_iterators_ArrayIterator(n)},elementsNamed:function(n){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));for(var e=[],t=0,i=this.children;t<i.length;){var r,s=i[t];if(++t,s.nodeType==Xml.Element){if(s.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":l.toString(s.nodeType)));r=s.nodeName==n}else r=!1;r&&e.push(s)}return new haxe_iterators_ArrayIterator(e)},firstElement:function(){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));for(var n=0,e=this.children;n<e.length;){var t=e[n];if(++n,t.nodeType==Xml.Element)return t}return null},addChild:function(n){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));null!=n.parent&&n.parent.removeChild(n),this.children.push(n),n.parent=this},removeChild:function(n){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":l.toString(this.nodeType)));return!!HxOverrides.remove(this.children,n)&&(n.parent=null,!0)},toString:function(){return haxe_xml_Printer.print(this)},__class__:Xml};var ceramic_Assets=function(){this.hotReload=!1,this.parent=null,this.delayBetweenXAssets=-1,this.scheduleMethod=1,this.loadMethod=2,this.defaultImageOptions=null,this.runtimeAssets=null,this.immediate=new ceramic_Immediate,this.assetsByKindAndName=new haxe_ds_StringMap,this.addedAssets=[],ceramic_Entity.call(this),ceramic_Assets.instances.push(this)};t["ceramic.Assets"]=ceramic_Assets,ceramic_Assets.__name__="ceramic.Assets",ceramic_Assets.flushAllInstancesImmediate=function(){for(var n=ceramic_Assets.instances.length,e=0,t=n;e<t;){var i=e++;ceramic_Assets._instances[i]=ceramic_Assets.instances[i]}for(e=0,t=n;e<t;){i=e++;var r=ceramic_Assets._instances[i];ceramic_Assets._instances[i]=null,r._lifecycleState>=0&&r.immediate.flush()}},ceramic_Assets.decodePath=function(n){return new ceramic_AssetPathInfo(n)},ceramic_Assets.addAssetKind=function(n,e,t,i,r){var l=ceramic_Assets.customAssetKinds,s=new ceramic_CustomAssetKind(n,e,t,i,r);l.h[n]=s},ceramic_Assets.getAssetsPath=function(){return ceramic_PlatformSpecific.getAssetsPath()},ceramic_Assets.assetNameFromPath=function(n){for(var e=ceramic_Assets.allByName.h,t=Object.keys(e),i=t.length,r=0;r<i;)for(var l=t[r++],s=ceramic_Assets.allByName.h[l],a=0,o=s.length;a<o;){if(s[a++]==n)return l}return null},ceramic_Assets.realAssetPath=function(n,e){if(null!=e)return null!=e.path?ceramic_Path.join([e.path,n]):n;return n},ceramic_Assets.incrementReloadCount=function(n){null==ceramic_Assets.reloadCountByRealAssetPath&&(ceramic_Assets.reloadCountByRealAssetPath=new haxe_ds_StringMap),Object.prototype.hasOwnProperty.call(ceramic_Assets.reloadCountByRealAssetPath.h,n)?ceramic_Assets.reloadCountByRealAssetPath.h[n]+=1:ceramic_Assets.reloadCountByRealAssetPath.h[n]=1},ceramic_Assets.getReloadCount=function(n){return null!=ceramic_Assets.reloadCountByRealAssetPath&&Object.prototype.hasOwnProperty.call(ceramic_Assets.reloadCountByRealAssetPath.h,n)?ceramic_Assets.reloadCountByRealAssetPath.h[n]:0},ceramic_Assets.__super__=ceramic_Entity,ceramic_Assets.prototype=$extend(ceramic_Entity.prototype,{emitComplete:function(n){var e=0;if(null!=this.__cbOnComplete&&(e+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(e+=this.__cbOnceComplete.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnComplete)for(var l=0,s=this.__cbOnComplete.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnComplete[a],++r):--e}if(null!=this.__cbOnceComplete){var o=null,p=null;for(l=0,s=this.__cbOnceComplete.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceComplete[a],this.__cbOnceComplete[a]=null;var h=this.__cbOnceOwnerUnbindComplete[a];this.__cbOnceOwnerUnbindComplete[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindComplete[a]),p.push(this.__cbOnceComplete[a])}this.__cbOnceOwnerUnbindComplete=o,this.__cbOnceComplete=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onComplete:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event complete because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offComplete(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(e)},onceComplete:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event complete because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offComplete(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(e)},offComplete:function(n){if(null!=n){var e;null!=this.__cbOnComplete&&-1!=(e=this.__cbOnComplete.indexOf(n))&&(this.__cbOnComplete.splice(e,1),null!=(l=this.__cbOnOwnerUnbindComplete[e])&&l(),this.__cbOnOwnerUnbindComplete.splice(e,1)),null!=this.__cbOnceComplete&&-1!=(e=this.__cbOnceComplete.indexOf(n))&&(this.__cbOnceComplete.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindComplete[e])&&l(),this.__cbOnceOwnerUnbindComplete.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindComplete[r])&&l()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindComplete[r])&&l()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&this.__cbOnComplete.length>0||null!=this.__cbOnceComplete&&this.__cbOnceComplete.length>0},emitUpdate:function(n){var e=0;if(null!=this.__cbOnUpdate&&(e+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(e+=this.__cbOnceUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnUpdate)for(var l=0,s=this.__cbOnUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnUpdate[a],++r):--e}if(null!=this.__cbOnceUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null;var h=this.__cbOnceOwnerUnbindUpdate[a];this.__cbOnceOwnerUnbindUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindUpdate[a]),p.push(this.__cbOnceUpdate[a])}this.__cbOnceOwnerUnbindUpdate=o,this.__cbOnceUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(e)},onceUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(e)},offUpdate:function(n){if(null!=n){var e;null!=this.__cbOnUpdate&&-1!=(e=this.__cbOnUpdate.indexOf(n))&&(this.__cbOnUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindUpdate[e])&&l(),this.__cbOnOwnerUnbindUpdate.splice(e,1)),null!=this.__cbOnceUpdate&&-1!=(e=this.__cbOnceUpdate.indexOf(n))&&(this.__cbOnceUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindUpdate[e])&&l(),this.__cbOnceOwnerUnbindUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindUpdate[r])&&l()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindUpdate[r])&&l()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&this.__cbOnUpdate.length>0||null!=this.__cbOnceUpdate&&this.__cbOnceUpdate.length>0},emitProgress:function(n,e,t){var i=0;if(null!=this.__cbOnProgress&&(i+=this.__cbOnProgress.length),null!=this.__cbOnceProgress&&(i+=this.__cbOnceProgress.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnProgress)for(var a=0,o=this.__cbOnProgress.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnProgress[p],++s):--i}if(null!=this.__cbOnceProgress){var h=null,u=null;for(a=0,o=this.__cbOnceProgress.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceProgress[p],this.__cbOnceProgress[p]=null;var _=this.__cbOnceOwnerUnbindProgress[p];this.__cbOnceOwnerUnbindProgress[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindProgress[p]),u.push(this.__cbOnceProgress[p])}this.__cbOnceOwnerUnbindProgress=h,this.__cbOnceProgress=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onProgress:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event progress because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offProgress(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindProgress&&(this.__cbOnOwnerUnbindProgress=[]),this.__cbOnOwnerUnbindProgress.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindProgress&&(this.__cbOnOwnerUnbindProgress=[]),this.__cbOnOwnerUnbindProgress.push(null);null==this.__cbOnProgress&&(this.__cbOnProgress=[]),this.__cbOnProgress.push(e)},onceProgress:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event progress because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offProgress(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindProgress&&(this.__cbOnceOwnerUnbindProgress=[]),this.__cbOnceOwnerUnbindProgress.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindProgress&&(this.__cbOnceOwnerUnbindProgress=[]),this.__cbOnceOwnerUnbindProgress.push(null);null==this.__cbOnceProgress&&(this.__cbOnceProgress=[]),this.__cbOnceProgress.push(e)},offProgress:function(n){if(null!=n){var e;null!=this.__cbOnProgress&&-1!=(e=this.__cbOnProgress.indexOf(n))&&(this.__cbOnProgress.splice(e,1),null!=(l=this.__cbOnOwnerUnbindProgress[e])&&l(),this.__cbOnOwnerUnbindProgress.splice(e,1)),null!=this.__cbOnceProgress&&-1!=(e=this.__cbOnceProgress.indexOf(n))&&(this.__cbOnceProgress.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindProgress[e])&&l(),this.__cbOnceOwnerUnbindProgress.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindProgress){for(var t=0,i=this.__cbOnOwnerUnbindProgress.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindProgress[r])&&l()}this.__cbOnOwnerUnbindProgress=null}if(null!=this.__cbOnceOwnerUnbindProgress){for(t=0,i=this.__cbOnceOwnerUnbindProgress.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindProgress[r])&&l()}this.__cbOnceOwnerUnbindProgress=null}this.__cbOnProgress=null,this.__cbOnceProgress=null}},listensProgress:function(){return null!=this.__cbOnProgress&&this.__cbOnProgress.length>0||null!=this.__cbOnceProgress&&this.__cbOnceProgress.length>0},emitAssetFilesChange:function(n,e){var t=0;if(null!=this.__cbOnAssetFilesChange&&(t+=this.__cbOnAssetFilesChange.length),null!=this.__cbOnceAssetFilesChange&&(t+=this.__cbOnceAssetFilesChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnAssetFilesChange)for(var s=0,a=this.__cbOnAssetFilesChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnAssetFilesChange[o],++l):--t}if(null!=this.__cbOnceAssetFilesChange){var p=null,h=null;for(s=0,a=this.__cbOnceAssetFilesChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceAssetFilesChange[o],this.__cbOnceAssetFilesChange[o]=null;var u=this.__cbOnceOwnerUnbindAssetFilesChange[o];this.__cbOnceOwnerUnbindAssetFilesChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindAssetFilesChange[o]),h.push(this.__cbOnceAssetFilesChange[o])}this.__cbOnceOwnerUnbindAssetFilesChange=p,this.__cbOnceAssetFilesChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onAssetFilesChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event assetFilesChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offAssetFilesChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindAssetFilesChange&&(this.__cbOnOwnerUnbindAssetFilesChange=[]),this.__cbOnOwnerUnbindAssetFilesChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindAssetFilesChange&&(this.__cbOnOwnerUnbindAssetFilesChange=[]),this.__cbOnOwnerUnbindAssetFilesChange.push(null);null==this.__cbOnAssetFilesChange&&(this.__cbOnAssetFilesChange=[]),this.__cbOnAssetFilesChange.push(e)},onceAssetFilesChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event assetFilesChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offAssetFilesChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindAssetFilesChange&&(this.__cbOnceOwnerUnbindAssetFilesChange=[]),this.__cbOnceOwnerUnbindAssetFilesChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindAssetFilesChange&&(this.__cbOnceOwnerUnbindAssetFilesChange=[]),this.__cbOnceOwnerUnbindAssetFilesChange.push(null);null==this.__cbOnceAssetFilesChange&&(this.__cbOnceAssetFilesChange=[]),this.__cbOnceAssetFilesChange.push(e)},offAssetFilesChange:function(n){if(null!=n){var e;null!=this.__cbOnAssetFilesChange&&-1!=(e=this.__cbOnAssetFilesChange.indexOf(n))&&(this.__cbOnAssetFilesChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindAssetFilesChange[e])&&l(),this.__cbOnOwnerUnbindAssetFilesChange.splice(e,1)),null!=this.__cbOnceAssetFilesChange&&-1!=(e=this.__cbOnceAssetFilesChange.indexOf(n))&&(this.__cbOnceAssetFilesChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindAssetFilesChange[e])&&l(),this.__cbOnceOwnerUnbindAssetFilesChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindAssetFilesChange){for(var t=0,i=this.__cbOnOwnerUnbindAssetFilesChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindAssetFilesChange[r])&&l()}this.__cbOnOwnerUnbindAssetFilesChange=null}if(null!=this.__cbOnceOwnerUnbindAssetFilesChange){for(t=0,i=this.__cbOnceOwnerUnbindAssetFilesChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindAssetFilesChange[r])&&l()}this.__cbOnceOwnerUnbindAssetFilesChange=null}this.__cbOnAssetFilesChange=null,this.__cbOnceAssetFilesChange=null}},listensAssetFilesChange:function(){return null!=this.__cbOnAssetFilesChange&&this.__cbOnAssetFilesChange.length>0||null!=this.__cbOnceAssetFilesChange&&this.__cbOnceAssetFilesChange.length>0},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),HxOverrides.remove(ceramic_Assets.instances,this);for(var n=0,e=[].concat(this.addedAssets);n<e.length;){var t=e[n];++n,t.offDestroy($bind(this,this.assetDestroyed)),t.destroy()}this.addedAssets=null,this.assetsByKindAndName=null}},flush:function(){for(var n=0,e=[].concat(this.addedAssets);n<e.length;){var t=e[n];++n,0==t.refCount&&t.destroy()}},add:function(n,e){var t="string"==typeof n?n:Reflect.field(n,"_id"),i=t.indexOf(":");if(-1==i)throw haxe_Exception.thrown("Assets: invalid asset id: "+n);var r=HxOverrides.substr(t,0,i),l=HxOverrides.substr(t,i+1,null);switch(r){case"atlas":this.addAtlas(l,e);break;case"binary":this.addBinary(l,e);break;case"database":this.addDatabase(l,e);break;case"font":this.addFont(l,e);break;case"fragments":this.addFragments(l,e);break;case"image":this.addImage(l,e);break;case"shader":this.addShader(l,e);break;case"sound":this.addSound(l,e);break;case"text":this.addText(l,e);break;default:if(!Object.prototype.hasOwnProperty.call(ceramic_Assets.customAssetKinds.h,r))throw haxe_Exception.thrown("Assets: invalid asset kind ("+r+") for id: "+n);ceramic_Assets.customAssetKinds.h[r].add(this,l,e)}},addAll:function(e){ceramic_App.app.backend.info;var t,i=["png","jpg","jpeg"],r=["txt","json","fnt","atlas"];if(null!=backend_Info._soundExtensions)t=[].concat(backend_Info._soundExtensions);else{backend_Info._soundExtensions=[];var l=new Audio,s=null!=n.navigator?n.navigator.userAgent:"",a=backend_Info.RE_OPERA.match(s)&&parseInt(backend_Info.RE_OPERA.matched(0).split("/")[1],10)<33,o=-1!=s.indexOf("Safari")&&-1==s.indexOf("Chrome"),p=backend_Info.RE_SAFARI_VERSION.match(s),h=(o&&p&&parseInt(backend_Info.RE_SAFARI_VERSION.matched(1),10),l.canPlayType('audio/ogg; codecs="vorbis"'));null!=h&&"no"!=h&&""!=h&&backend_Info._soundExtensions.push("ogg");var u=l.canPlayType("audio/mpeg;"),_=l.canPlayType("audio/mp3;");!a&&(null!=u&&"no"!=u&&""!=u||null!=_&&"no"!=_&&""!=_)&&backend_Info._soundExtensions.push("mp3");var c=l.canPlayType("audio/x-flac;"),d=l.canPlayType("audio/flac;");(null!=c&&"no"!=c&&""!=c||null!=d&&"no"!=d&&""!=d)&&backend_Info._soundExtensions.push("flac");var f=l.canPlayType('audio/wav; codecs="1"'),x=l.canPlayType("audio/wav;");(null!=f&&"no"!=f&&""!=f||null!=x&&"no"!=x&&""!=x)&&backend_Info._soundExtensions.push("wav"),t=[].concat(backend_Info._soundExtensions)}for(var b=["frag","vert"],y=["fnt"],v=["atlas"],m=["csv"],g=["fragments"],z=[],w=[],O=k=ceramic_Assets.customAssetKinds.h,C=Object.keys(k),E=C.length,U=0;U<E;){var M=O[C[U++]];z.push(M.extensions),w.push(M.add)}var T=ceramic_Assets.allByName;null!=this.runtimeAssets&&(T=this.runtimeAssets.getLists().allByName);for(var k,D=k=T.h,S=Object.keys(k),A=S.length,P=0;P<A;){var V=S[P++],I=V,N=D[V];if(null!=e){for(var F=!1,R=0,L=N.length;R<L;){var B=R++;if(e.match(N[B])){F=!0;break}}if(!F)continue}for(var G=ceramic_Path.extension(N[0]),j=!1,K=0,W=i.length;K<W;){if(i[K++]==G){this.addImage(I),j=!0;break}}if(!j)for(var Y=0,X=t.length;Y<X;){if(t[Y++]==G){this.addSound(I),j=!0;break}}if(!j)for(var H=0,Z=b.length;H<Z;){if(b[H++]==G){this.addShader(I),j=!0;break}}if(!j)for(var q=0,$=y.length;q<$;){if(y[q++]==G){this.addFont(I),j=!0;break}}if(!j)for(var Q=0,J=v.length;Q<J;){if(v[Q++]==G){this.addAtlas(I),j=!0;break}}if(!j)for(var nn=0,en=m.length;nn<en;){if(m[nn++]==G){this.addDatabase(I),j=!0;break}}if(!j)for(var tn=0,rn=g.length;tn<rn;){if(g[tn++]==G){this.addFragments(I),j=!0;break}}if(!j)for(var ln=0,sn=z.length;ln<sn;){for(var an=ln++,on=z[an],pn=0,hn=on.length;pn<hn;){if(on[pn++]==G){(0,w[an])(this,I),j=!0;break}}if(j)break}if(!j)for(var un=0,_n=r.length;un<_n;){if(r[un++]==G){this.addText(I),j=!0;break}}}},addImage:function(n,e){StringTools.startsWith(n,"image:")&&(n=HxOverrides.substr(n,6,null)),this.addAsset(new ceramic_ImageAsset(n,e))},addFont:function(n,e){StringTools.startsWith(n,"font:")&&(n=HxOverrides.substr(n,5,null)),this.addAsset(new ceramic_FontAsset(n,e))},addAtlas:function(n,e){StringTools.startsWith(n,"atlas:")&&(n=HxOverrides.substr(n,6,null)),this.addAsset(new ceramic_AtlasAsset(n,e))},addText:function(n,e){StringTools.startsWith(n,"text:")&&(n=HxOverrides.substr(n,5,null)),this.addAsset(new ceramic_TextAsset(n,e))},addBinary:function(n,e){StringTools.startsWith(n,"binary:")&&(n=HxOverrides.substr(n,7,null)),this.addAsset(new ceramic_BinaryAsset(n,e))},addSound:function(n,e){StringTools.startsWith(n,"sound:")&&(n=HxOverrides.substr(n,6,null)),this.addAsset(new ceramic_SoundAsset(n,e))},addDatabase:function(n,e){StringTools.startsWith(n,"database:")&&(n=HxOverrides.substr(n,9,null)),this.addAsset(new ceramic_DatabaseAsset(n,e))},addFragments:function(n,e){StringTools.startsWith(n,"fragments:")&&(n=HxOverrides.substr(n,10,null)),this.addAsset(new ceramic_FragmentsAsset(n,e))},addShader:function(n,e){StringTools.startsWith(n,"shader:")&&(n=HxOverrides.substr(n,7,null)),this.addAsset(new ceramic_ShaderAsset(n,e))},addAsset:function(n){if(!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,n.kind)){var e=this.assetsByKindAndName,t=n.kind,i=new haxe_ds_StringMap;e.h[t]=i}var r=this.assetsByKindAndName.h[n.kind];n instanceof ceramic_ImageAsset&&(n.defaultImageOptions=this.defaultImageOptions);var l=r.h[n.name];if(null!=l){if(l==n)return ceramic_App.app.logger.warning("Cannot add asset "+Std.string(n)+" because it is already added for name: "+n.name+".",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Assets.hx",lineNumber:382,className:"ceramic.Assets",methodName:"addAsset"}),l;ceramic_App.app.logger.info("Replace "+Std.string(l)+" with "+Std.string(n),{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Assets.hx",lineNumber:379,className:"ceramic.Assets",methodName:"addAsset"}),this.removeAsset(l)}return n.onDestroy(this,$bind(this,this.assetDestroyed)),r.h[n.name]=n,null!=n.owner&&n.owner!=this&&n.owner.removeAsset(n),this.addedAssets.push(n),n.owner=this,n.set_runtimeAssets(this.runtimeAssets),n.set_hotReload(this.hotReload),l},assetDestroyed:function(n){for(var e=null,t=0,i=this.addedAssets;t<i.length;){var r=i[t];++t,r._lifecycleState<0&&(null==e&&(e=[]),e.push(r))}if(null!=e)for(t=0;t<e.length;){r=e[t];++t,this.removeAsset(r)}},imageAsset:function(n){return this.asset(n,"image")},fontAsset:function(n){return this.asset(n,"font")},atlasAsset:function(n){return this.asset(n,"atlas")},textAsset:function(n){return this.asset(n,"text")},soundAsset:function(n){return this.asset(n,"sound")},databaseAsset:function(n){return this.asset(n,"database")},fragmentsAsset:function(n){return this.asset(n,"fragments")},shaderAsset:function(n){return this.asset(n,"shader")},asset:function(n,e){var t="string"==typeof n?n:Reflect.field(n,"_id"),i=t.indexOf(":"),r=t;if(-1!=i&&(r=t.substring(i+1),e=t.substring(0,i)),null==e)return null!=this.parent?this.parent.asset(n,e):null;var l=this.assetsByKindAndName.h[e];return null==l?null!=this.parent?this.parent.asset(n,e):null:l.h[r]},removeAsset:function(n){n.offDestroy($bind(this,this.assetDestroyed));var e=this.assetsByKindAndName.h[n.kind];if(n!=e.h[n.name])throw haxe_Exception.thrown("Cannot remove asset "+Std.string(n)+" if it was not added at the first place.");HxOverrides.remove(this.addedAssets,n);var t=n.name;Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],n.owner=null},hasAnythingToLoad:function(){for(var n=0,e=this.addedAssets.length;n<e;){var t=n++;if(this.addedAssets[t].get_status()==a.NONE)return!0}return!1},countAssetsWithStatus:function(n){for(var e=0,t=(this.addedAssets,0),i=this.addedAssets.length;t<i;){var r=t++;this.addedAssets[r].get_status()==n&&++e}return e},load:function(n,e){null==n&&(n=!0);for(var t=this,i=0,r=0,l=!0,s=[].concat(this.addedAssets),o=0;o<s.length;){var p=[s[o]];++o,p[0].get_status()==a.NONE&&(p[0].onceComplete(this,function(n){return function(s){s||(l=!1,ceramic_App.app.logger.error("Failed to load asset "+n[0].name+" ("+Std.string(n[0])+")",e)),r-=1,t.emitProgress(i-r,i,l),0==r&&t.emitComplete(l)}}(p)),r+=1,i+=1)}if(r>0)if(2==this.scheduleMethod){var h=[];for(o=0;o<s.length;){var u=s[o];++o,u.get_status()==a.NONE&&h.push(u)}this._loadNextSerial(h,0),this.immediate.flush()}else{if(this.delayBetweenXAssets>0){for(h=[],o=0;o<s.length;){u=s[o];++o,u.get_status()==a.NONE&&h.push(u)}this._loadNextParallel(h,0)}else for(o=0;o<s.length;){u=s[o];++o,u.get_status()==a.NONE&&u.load()}this.immediate.flush()}else n&&ceramic_App.app.logger.warning("There was no asset to load.",e),this.emitComplete(!0)},_loadNextSerial:function(n,e){var t=this,i=n.shift();i.get_status()==a.NONE?(i.load(),i.onceComplete(this,(function(i){t._assetCompleteSerial(i,n,e)}))):n.length>0&&this._loadNextSerial(n,e)},_assetCompleteSerial:function(n,e,t){var i=this;t+=1,e.length>0&&(this.delayBetweenXAssets>0&&t>0&&t%this.delayBetweenXAssets==0?ceramic_App.app.onceXUpdates(this,2,(function(){i._loadNextSerial(e,t)})):this._loadNextSerial(e,t))},_loadNextParallel:function(n,e){var t=this;n.length>0&&((e+=1)>1&&e%this.delayBetweenXAssets==0?ceramic_App.app.onceXUpdates(this,2,(function(){n.shift().load(),t._loadNextParallel(n,e)})):(n.shift().load(),this._loadNextParallel(n,e)))},ensure:function(n,e,t){var i=this.asset(n),r=null;null==i?(this.add(n,e),r=this.asset(n)):r=i,null!=r?r.get_status()==a.READY?t(r):r.get_status()==a.LOADING||r.get_status()==a.NONE?(r.onceComplete(null,(function(n){t(n?r:null)})),r.get_status()==a.NONE&&this.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Assets.hx",lineNumber:712,className:"ceramic.Assets",methodName:"ensure"})):t(null):t(null)},ensureImage:function(n,e,t){var i=n;StringTools.startsWith(i,"image:")||(i="image:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_ImageAsset?n:null)}))},ensureFont:function(n,e,t){var i=n;StringTools.startsWith(i,"font:")||(i="font:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_FontAsset?n:null)}))},ensureAtlas:function(n,e,t){var i=n;StringTools.startsWith(i,"atlas:")||(i="atlas:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_AtlasAsset?n:null)}))},ensureText:function(n,e,t){var i=n;StringTools.startsWith(i,"text:")||(i="text:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_TextAsset?n:null)}))},ensureSound:function(n,e,t){var i=n;StringTools.startsWith(i,"sound:")||(i="sound:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_SoundAsset?n:null)}))},ensureDatabase:function(n,e,t){var i=n;StringTools.startsWith(i,"database:")||(i="database:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_DatabaseAsset?n:null)}))},ensureShader:function(n,e,t){var i=n;StringTools.startsWith(i,"shader:")||(i="shader:"+i),this.ensure(i,e,(function(n){t(n instanceof ceramic_ShaderAsset?n:null)}))},texture:function(n){var e=n;if(StringTools.startsWith(e,"image:")&&(e=HxOverrides.substr(e,6,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"image"))return null!=this.parent?this.parent.texture(n):null;var t=this.assetsByKindAndName.h.image.h[e];return null==t?null!=this.parent?this.parent.texture(n):null:t.get_texture()},font:function(n){var e=n;if(StringTools.startsWith(e,"font:")&&(e=HxOverrides.substr(e,5,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"font"))return null!=this.parent?this.parent.font(n):null;var t=this.assetsByKindAndName.h.font.h[e];return null==t?null!=this.parent?this.parent.font(n):null:t.get_font()},atlas:function(n){var e=n;if(StringTools.startsWith(e,"atlas:")&&(e=HxOverrides.substr(e,6,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"atlas"))return null!=this.parent?this.parent.atlas(n):null;var t=this.assetsByKindAndName.h.atlas.h[e];return null==t?null!=this.parent?this.parent.atlas(n):null:t.get_atlas()},sound:function(n){var e=n;if(StringTools.startsWith(e,"sound:")&&(e=HxOverrides.substr(e,6,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"sound"))return null!=this.parent?this.parent.sound(n):null;var t=this.assetsByKindAndName.h.sound.h[e];return null==t?null!=this.parent?this.parent.sound(n):null:t.get_sound()},text:function(n){var e=n;if(StringTools.startsWith(e,"text:")&&(e=HxOverrides.substr(e,5,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"text"))return null!=this.parent?this.parent.text(n):null;var t=this.assetsByKindAndName.h.text.h[e];return null==t?null!=this.parent?this.parent.text(n):null:t.get_text()},bytes:function(n){var e=n;if(StringTools.startsWith(e,"binary:")&&(e=HxOverrides.substr(e,7,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"binary"))return null!=this.parent?this.parent.bytes(n):null;var t=this.assetsByKindAndName.h.binary.h[e];return null==t?null!=this.parent?this.parent.bytes(n):null:t.get_bytes()},shader:function(n){var e=n;if(StringTools.startsWith(e,"shader:")&&(e=HxOverrides.substr(e,7,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"shader"))return null!=this.parent?this.parent.shader(n):null;var t=this.assetsByKindAndName.h.shader.h[e];return null==t?null!=this.parent?this.parent.shader(n):null:t.shader},database:function(n){var e=n;if(StringTools.startsWith(e,"database:")&&(e=HxOverrides.substr(e,9,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"database"))return null!=this.parent?this.parent.database(n):null;var t=this.assetsByKindAndName.h.database.h[e];return null==t?null!=this.parent?this.parent.database(n):null:t.get_database()},fragments:function(n){var e=n;if(StringTools.startsWith(e,"fragments:")&&(e=HxOverrides.substr(e,10,null)),!Object.prototype.hasOwnProperty.call(this.assetsByKindAndName.h,"fragments"))return null!=this.parent?this.parent.fragments(n):null;var t=this.assetsByKindAndName.h.fragments.h[e];return null==t?null!=this.parent?this.parent.fragments(n):null:t.get_fragments()},iterator:function(){for(var n=[],e=l=this.assetsByKindAndName.h,t=Object.keys(l),i=t.length,r=0;r<i;)for(var l,s=l=e[t[r++]].h,a=Object.keys(l),o=a.length,p=0;p<o;){var h=s[a[p++]];n.push(h)}return new haxe_iterators_ArrayIterator(n)},set_hotReload:function(n){if(this.hotReload==n)return n;this.hotReload=n;for(var e=0,t=this.addedAssets;e<t.length;){var i=t[e];++e,i.set_hotReload(n)}return n},watchDirectory:function(n,e){null==e&&(e=!0);var t=this;if(null!=this.runtimeAssets)throw haxe_Exception.thrown("There is already an instance of RuntimeAssets assigned. Cannot watch a directory, which also need its own instance");if(null==n)throw haxe_Exception.thrown("Cannot watch directory when using web target! (unless using electron runner and `ceramic_use_electron` define)");e&&this.set_hotReload(e),this.runtimeAssets=ceramic_RuntimeAssets.fromPath(n);var i=new ceramic_WatchDirectory;return i.watchDirectory(n),i.onDirectoryChange(this,(function(e,i,r){if(null==t.runtimeAssets?ceramic_App.app.logger.warning("Missing instance of RuntimeAssets when watched directory changed (path: "+n+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Assets.hx",lineNumber:989,className:"ceramic.Assets",methodName:"watchDirectory"}):t.runtimeAssets.reset(ceramic_Files.getFlatDirectory(n),n),null==ceramic_Assets.lastModifiedByRealAssetPath){ceramic_Assets.lastModifiedByRealAssetPath=new haxe_ds_StringMap;for(var l=u=r.h,s=(_=Object.keys(u)).length,a=0;a<s;){var o=d=_[a++],p=l[d],h=ceramic_Assets.realAssetPath(o,t.runtimeAssets);ceramic_Assets.lastModifiedByRealAssetPath.h[h]=p}}var u,_,c=new haxe_ds_StringMap;for(l=u=i.h,s=(_=Object.keys(u)).length,a=0;a<s;){var d;o=d=_[a++],p=l[d],h=ceramic_Assets.realAssetPath(o,t.runtimeAssets);c.h[h]=p,Object.prototype.hasOwnProperty.call(ceramic_Assets.lastModifiedByRealAssetPath.h,h)&&p>ceramic_Assets.lastModifiedByRealAssetPath.h[h]&&ceramic_Assets.incrementReloadCount(h)}ceramic_Assets.lastModifiedByRealAssetPath=c,t.emitAssetFilesChange(i,r)})),this.onDestroy(i,(function(n){i.destroy()})),i},inheritRuntimeAssetsFromAssets:function(n){this.runtimeAssets=n.runtimeAssets,this.defaultImageOptions=n.defaultImageOptions},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offComplete(),this.offUpdate(),this.offProgress(),this.offAssetFilesChange()},__class__:ceramic_Assets,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_hotReload:"set_hotReload"})});var assets_AllAssets=function(){};t["assets.AllAssets"]=assets_AllAssets,assets_AllAssets.__name__="assets.AllAssets",assets_AllAssets.bind=function(){ceramic_Assets.all=assets_AllAssets.all,ceramic_Assets.allDirs=assets_AllAssets.allDirs,ceramic_Assets.allDirsByName=assets_AllAssets.allDirsByName,ceramic_Assets.allByName=assets_AllAssets.allByName};var assets_Fonts=function(){};t["assets.Fonts"]=assets_Fonts,assets_Fonts.__name__="assets.Fonts";var assets_Sounds=function(){};t["assets.Sounds"]=assets_Sounds,assets_Sounds.__name__="assets.Sounds";var spec_Audio=function(){};t["spec.Audio"]=spec_Audio,spec_Audio.__name__="spec.Audio",spec_Audio.__isInterface__=!0,spec_Audio.prototype={__class__:spec_Audio};var backend_Audio=function(){this.loadedAudioRetainCount=new haxe_ds_StringMap,this.loadedAudioResources=new haxe_ds_StringMap,this.loadingAudioCallbacks=new haxe_ds_StringMap};t["backend.Audio"]=backend_Audio,backend_Audio.__name__="backend.Audio",backend_Audio.__interfaces__=[spec_Audio],backend_Audio.prototype={load:function(n,e,t){var i=this,r=null!=e&&2==e.loadMethod,l=null!=e?e.immediate:null,done=function(n){var fn=function(){t(n),t=null};null!=l?l.push(fn):ceramic_App.app._onceImmediate(fn)},s=null!=e&&1==e.stream;if(ceramic_Path.isAbsolute(n)||StringTools.startsWith(n,"http://")||StringTools.startsWith(n,"https://")||(n=ceramic_Path.join([ceramic_App.app.settings.assetsPath,n])),Object.prototype.hasOwnProperty.call(this.loadedAudioResources.h,n)){this.loadedAudioRetainCount.h[n]+=1;var a=this.loadedAudioResources.h[n];done(a)}else if(Object.prototype.hasOwnProperty.call(this.loadingAudioCallbacks.h,n))this.loadingAudioCallbacks.h[n].push((function(e){if(null!=e){var t=Object.prototype.hasOwnProperty.call(i.loadedAudioRetainCount.h,n)?i.loadedAudioRetainCount.h[n]:0;i.loadedAudioRetainCount.h[n]=t+1}done(e)}));else{var o=n,p=o.indexOf("?");-1!=p&&(o=HxOverrides.substr(o,0,p)),this.loadingAudioCallbacks.h[n]=[function(e){if(null!=e){var t=Object.prototype.hasOwnProperty.call(i.loadedAudioRetainCount.h,n)?i.loadedAudioRetainCount.h[n]:0;i.loadedAudioRetainCount.h[n]=t+1}done(e)}];var h=clay_Clay.app.assets.fullPath(o);clay_Clay.app.audio.loadData(h,s,null,!r,(function(e){if(null!=e){var t=new clay_audio_AudioSource(clay_Clay.app,e);i.loadedAudioResources.h[n]=t;var r=i.loadingAudioCallbacks.h[n],l=i.loadingAudioCallbacks;Object.prototype.hasOwnProperty.call(l.h,n)&&delete l.h[n];for(var s=0;s<r.length;){var a=r[s];++s,a(t)}}else!function(){var e=i.loadingAudioCallbacks.h[n],t=i.loadingAudioCallbacks;Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n];for(var r=0;r<e.length;){var l=e[r];++r;try{l(null)}catch(n){var s=[haxe_Exception.caught(n).unwrap()];ceramic_App.app._onceImmediate(function(n){return function(){throw haxe_Exception.thrown(n[0])}}(s))}}}()})),null!=l?l.push(clay_Immediate.flush):ceramic_App.app._onceImmediate(clay_Immediate.flush)}},getDuration:function(n){return n.getDuration()},resumeAudioContext:function(n){var e=clay_Clay.app.audio;if(null!=e)try{e.context.resume().then((function(){n(!0)}),(function(){n(!1)}))}catch(n){var t=haxe_Exception.caught(n).unwrap();ceramic_App.app.logger.error("Failed to resume audio context: "+Std.string(t),{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:146,className:"backend.Audio",methodName:"resumeAudioContext"})}},supportsHotReloadPath:function(){return!0},destroy:function(n){for(var e=null,t=this.loadedAudioResources.h,i=t,r=Object.keys(t),l=r.length,s=0;s<l;){var a=r[s++],o=a;i[a]==n&&(e=o)}if(null==e)ceramic_App.app.logger.error("Failed to destroy audio resource: "+Std.string(n)+" because id could not be resolved",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:172,className:"backend.Audio",methodName:"destroy"});else if(this.loadedAudioRetainCount.h[e]>1)this.loadedAudioRetainCount.h[e]-=1;else{var p=this.loadedAudioResources;Object.prototype.hasOwnProperty.call(p.h,e)&&delete p.h[e];p=this.loadedAudioRetainCount;Object.prototype.hasOwnProperty.call(p.h,e)&&delete p.h[e],n.destroy()}},mute:function(n){return-1},play:function(n,e,t,i,r,l){if(null==l&&(l=!1),null==r&&(r=0),null==i&&(i=1),null==t&&(t=0),null==e&&(e=.5),!clay_Clay.app.audio.active)return-1;var s=n;s.data.isStream&&(r=0,i=1,t=0);var a=null;return a=l?clay_Clay.app.audio.loop(s,e,!1):clay_Clay.app.audio.play(s,e,!1),0!=t&&clay_Clay.app.audio.pan(a,t),1!=i&&clay_Clay.app.audio.pitch(a,i),0!=r&&clay_Clay.app.audio.position(a,r),a},pause:function(n){clay_Clay.app.audio.active&&null!=n&&-1!=n&&clay_Clay.app.audio.pause(n)},resume:function(n){clay_Clay.app.audio.active&&null!=n&&-1!=n&&clay_Clay.app.audio.unPause(n)},stop:function(n){clay_Clay.app.audio.active&&null!=n&&-1!=n&&null!=n&&-1!=n&&clay_Clay.app.audio.stop(n)},getVolume:function(n){return clay_Clay.app.audio.active?null==n||-1==n?0:clay_Clay.app.audio.volumeOf(n):0},setVolume:function(n,e){clay_Clay.app.audio.active&&null!=n&&-1!=n&&clay_Clay.app.audio.volume(n,e)},getPan:function(n){return clay_Clay.app.audio.active?null==n||-1==n?0:clay_Clay.app.audio.panOf(n):0},setPan:function(n,e){if(clay_Clay.app.audio.active&&null!=n&&-1!=n){var t=clay_Clay.app.audio.instanceOf(n);null!=t&&t.source.data.isStream||clay_Clay.app.audio.pan(n,e)}},getPitch:function(n){return clay_Clay.app.audio.active?null==n||-1==n?1:clay_Clay.app.audio.pitchOf(n):1},setPitch:function(n,e){if(clay_Clay.app.audio.active&&null!=n&&-1!=n){var t=clay_Clay.app.audio.instanceOf(n);null!=t&&t.source.data.isStream||clay_Clay.app.audio.pitch(n,e)}},getPosition:function(n){return clay_Clay.app.audio.active?null==n||-1==n?0:clay_Clay.app.audio.positionOf(n):0},setPosition:function(n,e){if(clay_Clay.app.audio.active&&null!=n&&-1!=n){var t=clay_Clay.app.audio.instanceOf(n);null!=t&&t.source.data.isStream||clay_Clay.app.audio.position(n,e)}},__class__:backend_Audio};var spec_Backend=function(){};t["spec.Backend"]=spec_Backend,spec_Backend.__name__="spec.Backend",spec_Backend.__isInterface__=!0,spec_Backend.prototype={__class__:spec_Backend};var backend_Backend=function(){this.mobileInBackground=!1,this.clipboard=new backend_Clipboard,this.textInput=new backend_TextInput,this.input=new backend_Input,this.screen=new backend_Screen,this.shaders=new backend_Shaders,this.textures=new backend_Textures,this.binaries=new backend_Binaries,this.texts=new backend_Texts,this.draw=new backend_Draw,this.audio=new backend_Audio,this.info=new backend_Info,this.io=new backend_IO};t["backend.Backend"]=backend_Backend,backend_Backend.__name__="backend.Backend",backend_Backend.__interfaces__=[spec_Backend,tracker_Events],backend_Backend.prototype={init:function(n){},setTargetFps:function(n){clay_Clay.app.config.updateRate=n>0?1/n:0},emitReady:function(){var n=0;if(null!=this.__cbOnReady&&(n+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(n+=this.__cbOnceReady.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnReady)for(var r=0,l=this.__cbOnReady.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnReady[s],++i):--n}if(null!=this.__cbOnceReady){var a=null,o=null;for(r=0,l=this.__cbOnceReady.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceReady[s],this.__cbOnceReady[s]=null;var p=this.__cbOnceOwnerUnbindReady[s];this.__cbOnceOwnerUnbindReady[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindReady[s]),o.push(this.__cbOnceReady[s])}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onReady:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event ready because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReady(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(e)},onceReady:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event ready because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReady(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(e)},offReady:function(n){if(null!=n){var e;null!=this.__cbOnReady&&-1!=(e=this.__cbOnReady.indexOf(n))&&(this.__cbOnReady.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReady[e])&&l(),this.__cbOnOwnerUnbindReady.splice(e,1)),null!=this.__cbOnceReady&&-1!=(e=this.__cbOnceReady.indexOf(n))&&(this.__cbOnceReady.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReady[e])&&l(),this.__cbOnceOwnerUnbindReady.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReady[r])&&l()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReady[r])&&l()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&this.__cbOnReady.length>0||null!=this.__cbOnceReady&&this.__cbOnceReady.length>0},emitUpdate:function(n){var e=0;if(null!=this.__cbOnUpdate&&(e+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(e+=this.__cbOnceUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnUpdate)for(var l=0,s=this.__cbOnUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnUpdate[a],++r):--e}if(null!=this.__cbOnceUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null;var h=this.__cbOnceOwnerUnbindUpdate[a];this.__cbOnceOwnerUnbindUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindUpdate[a]),p.push(this.__cbOnceUpdate[a])}this.__cbOnceOwnerUnbindUpdate=o,this.__cbOnceUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(e)},onceUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(e)},offUpdate:function(n){if(null!=n){var e;null!=this.__cbOnUpdate&&-1!=(e=this.__cbOnUpdate.indexOf(n))&&(this.__cbOnUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindUpdate[e])&&l(),this.__cbOnOwnerUnbindUpdate.splice(e,1)),null!=this.__cbOnceUpdate&&-1!=(e=this.__cbOnceUpdate.indexOf(n))&&(this.__cbOnceUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindUpdate[e])&&l(),this.__cbOnceOwnerUnbindUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindUpdate[r])&&l()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindUpdate[r])&&l()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&this.__cbOnUpdate.length>0||null!=this.__cbOnceUpdate&&this.__cbOnceUpdate.length>0},willEmitUpdate:function(n){},didEmitUpdate:function(n){},unbindEvents:function(){this.offReady(),this.offUpdate()},__class__:backend_Backend};var spec_Binaries=function(){};t["spec.Binaries"]=spec_Binaries,spec_Binaries.__name__="spec.Binaries",spec_Binaries.__isInterface__=!0,spec_Binaries.prototype={__class__:spec_Binaries};var backend_Binaries=function(){this.loadingBinaryCallbacks=new haxe_ds_StringMap};t["backend.Binaries"]=backend_Binaries,backend_Binaries.__name__="backend.Binaries",backend_Binaries.__interfaces__=[spec_Binaries],backend_Binaries.prototype={load:function(n,e,t){var i=this,r=null!=e?e.immediate:null,done=function(n){var fn=function(){t(n),t=null};null!=r?r.push(fn):ceramic_App.app._onceImmediate(fn)};if(ceramic_Path.isAbsolute(n)||StringTools.startsWith(n,"http://")||StringTools.startsWith(n,"https://")||(n=ceramic_Path.join([ceramic_App.app.settings.assetsPath,n])),Object.prototype.hasOwnProperty.call(this.loadingBinaryCallbacks.h,n))this.loadingBinaryCallbacks.h[n].push((function(n){done(n)}));else{this.loadingBinaryCallbacks.h[n]=[];var l=n,s=l.indexOf("?");-1!=s&&(l=HxOverrides.substr(l,0,s));var a=clay_Clay.app.assets.fullPath(l);clay_Clay.app.io.loadData(a,!0,null,(function(e){if(null!=e){var t=new haxe_io_Bytes(new Uint8Array(e.buffer));if(null!=(r=i.loadingBinaryCallbacks.h[n])){l=i.loadingBinaryCallbacks;Object.prototype.hasOwnProperty.call(l.h,n)&&delete l.h[n],done(t);for(s=0;s<r.length;){a=r[s];++s,a(t)}}else done(t)}else{var r;if(null!=(r=i.loadingBinaryCallbacks.h[n])){var l=i.loadingBinaryCallbacks;Object.prototype.hasOwnProperty.call(l.h,n)&&delete l.h[n],done(null);for(var s=0;s<r.length;){var a=r[s];++s,a(null)}}else done(null)}})),null!=r?r.push(clay_Immediate.flush):ceramic_App.app._onceImmediate(clay_Immediate.flush)}},supportsHotReloadPath:function(){return!0},__class__:backend_Binaries};var clay_Events=function(){};t["clay.Events"]=clay_Events,clay_Events.__name__="clay.Events",clay_Events.prototype={ready:function(){},tick:function(n){},freeze:function(){},unfreeze:function(){},keyDown:function(n,e,t,i,r,l){},keyUp:function(n,e,t,i,r,l){},text:function(n,e,t,i,r,l){},mouseMove:function(n,e,t,i,r,l){},mouseDown:function(n,e,t,i,r){},mouseUp:function(n,e,t,i,r){},mouseWheel:function(n,e,t,i){},touchDown:function(n,e,t,i,r,l){},touchUp:function(n,e,t,i,r,l){},touchMove:function(n,e,t,i,r,l){},gamepadAxis:function(n,e,t,i){},gamepadDown:function(n,e,t,i){},gamepadUp:function(n,e,t,i){},gamepadGyro:function(n,e,t,i,r){},gamepadDevice:function(n,e,t,i){},windowEvent:function(n,e,t,i,r){},appEvent:function(n){},audioEvent:function(n,e){},__class__:clay_Events};var backend_ClayEvents=function(n){this.gamepadGyroValues=new ceramic_IntMap;var e=new haxe_ds_IntMap;this.gamepadAxisValues=e;e=new haxe_ds_IntMap;this.gamepadPressedValues=e;e=new haxe_ds_IntMap;this.gamepadButtonMapping=e;e=new haxe_ds_IntMap;this.gamepadAxisToButton=e;e=new haxe_ds_IntMap;this.swapXyGamepads=e;e=new haxe_ds_IntMap;this.swapAbGamepads=e;e=new haxe_ds_IntMap;this.removedGamepads=e;e=new haxe_ds_IntMap;this.activeGamepads=e,this.mouseY=0,this.mouseX=0;e=new haxe_ds_IntMap;this.mouseDownButtons=e;e=new haxe_ds_IntMap;this.touchIndexes=e;e=new haxe_ds_IntMap;this.touches=e,this.lastHeight=-1,this.lastWidth=-1,this.lastDensity=-1,this.handleReady=n,this.configureGamepadMapping()};t["backend.ClayEvents"]=backend_ClayEvents,backend_ClayEvents.__name__="backend.ClayEvents",backend_ClayEvents.__super__=clay_Events,backend_ClayEvents.prototype=$extend(clay_Events.prototype,{configureGamepadMapping:function(){},ready:function(){this.backend=ceramic_App.app.backend,this.lastDensity=clay_Clay.app.screenDensity,this.lastWidth=clay_Clay.app.screenWidth,this.lastHeight=clay_Clay.app.screenHeight,this.handleReady(),this.backend.emitReady()},tick:function(n){this.triggerResizeIfNeeded(),this.backend.emitUpdate(n)},triggerResizeIfNeeded:function(){var n=clay_Clay.app.screenDensity,e=clay_Clay.app.screenWidth,t=clay_Clay.app.screenHeight;this.lastDensity==n&&this.lastWidth==e&&this.lastHeight==t||(this.lastDensity=n,this.lastWidth=e,this.lastHeight=t,this.backend.screen.emitResize())},appEvent:function(n){switch(n){case 0:break;case 11:ceramic_App.app.emitTerminate();break;case 12:ceramic_App.app.emitLowMemory();break;case 13:ceramic_App.app.emitBeginEnterBackground();break;case 14:ceramic_App.app.emitFinishEnterBackground();break;case 15:ceramic_App.app.emitBeginEnterForeground();break;case 16:ceramic_App.app.emitFinishEnterForeground()}},mouseDown:function(n,e,t,i,r){this.mouseDownButtons.h.hasOwnProperty(0|t)&&this.mouseUp(n,e,t,i,r),this.mouseX=n/clay_Clay.app.screenDensity,this.mouseY=e/clay_Clay.app.screenDensity,this.mouseDownButtons.h[0|t]=!0,this.backend.screen.emitMouseDown(t,this.mouseX,this.mouseY)},mouseUp:function(n,e,t,i,r){this.mouseDownButtons.h.hasOwnProperty(0|t)&&(this.mouseX=n/clay_Clay.app.screenDensity,this.mouseY=e/clay_Clay.app.screenDensity,this.mouseDownButtons.remove(0|t),this.backend.screen.emitMouseUp(t,this.mouseX,this.mouseY))},mouseMove:function(n,e,t,i,r,l){this.mouseX=n/clay_Clay.app.screenDensity,this.mouseY=e/clay_Clay.app.screenDensity,this.backend.screen.emitMouseMove(this.mouseX,this.mouseY)},mouseWheel:function(n,e,t,i){this.backend.screen.emitMouseWheel(n,e)},touchDown:function(n,e,t,i,r,l){for(var s=0;this.touchIndexes.h.hasOwnProperty(0|s);)++s;this.touches.h[0|r]=s,this.touchIndexes.h[0|s]=r,this.backend.screen.emitTouchDown(s,n*this.lastWidth,e*this.lastHeight)},touchUp:function(n,e,t,i,r,l){this.touches.h.hasOwnProperty(0|r)||this.touchDown(n,e,t,i,r,l);var s=this.touches.h[0|r],a=null!=s?s:0;this.backend.screen.emitTouchUp(a,n*this.lastWidth,e*this.lastHeight);this.touches.remove(0|r),this.touchIndexes.remove(0|a)},touchMove:function(n,e,t,i,r,l){this.touches.h.hasOwnProperty(0|r)||this.touchDown(n,e,t,i,r,l);var s=this.touches.h[0|r],a=null!=s?s:0;this.backend.screen.emitTouchMove(a,n*this.lastWidth,e*this.lastHeight)},keyDown:function(n,e,t,i,r,l){this.backend.input.emitKeyDown(new ceramic_Key(n,e)),this.backend.textInput.handleKeyDown(n,e)},keyUp:function(n,e,t,i,r,l){this.backend.input.emitKeyUp(new ceramic_Key(n,e)),this.backend.textInput.handleKeyUp(n,e)},_configureGamepad:function(n,e){if(null!=e){var t=e.toLowerCase();-1!=t.indexOf(" vendor: 057e ")||StringTools.startsWith(t,"057e-")?(this.swapAbGamepads.h[0|n]=!0,this.swapXyGamepads.h[0|n]=!0):(this.swapAbGamepads.h[0|n]=!1,this.swapXyGamepads.h[0|n]=!1)}else this.swapAbGamepads.h[0|n]=!1,this.swapXyGamepads.h[0|n]=!1},gamepadAxis:function(n,e,t,i){if(!this.activeGamepads.h.hasOwnProperty(0|n)&&!this.removedGamepads.h.hasOwnProperty(0|n)){this.activeGamepads.h[0|n]=!0;var r=clay_Clay.app.runtime.getGamepadName(n);this._configureGamepad(n,r),this.backend.input.emitGamepadEnable(n,r)}if(this.gamepadAxisToButton.h.hasOwnProperty(0|e)){var l=null!=(s=this.gamepadAxisToButton.h[0|e])?s:0;if(t>=.5)1!=(null!=(s=this.gamepadPressedValues.h[32*n+l|0])?s:0)&&(this.gamepadPressedValues.h[32*n+l|0]=1,this.backend.input.emitGamepadDown(n,l));else 1==(null!=(s=this.gamepadPressedValues.h[32*n+l|0])?s:0)&&(this.gamepadPressedValues.h[32*n+l|0]=0,this.backend.input.emitGamepadUp(n,l))}var s,a=null!=(s=this.gamepadAxisValues.h[32*n+e|0])?s:0,o=Math.round(100*t)/100;Math.abs(a-o)>.01&&(this.gamepadAxisValues.h[32*n+e|0]=o,this.backend.input.emitGamepadAxis(n,e,o))},gamepadDown:function(n,e,t,i){if(!this.activeGamepads.h.hasOwnProperty(0|n)&&!this.removedGamepads.h.hasOwnProperty(0|n)){this.activeGamepads.h[0|n]=!0;for(var r=0;r<32;){var l=r++;this.gamepadPressedValues.h[32*n+l|0]=0}var s=clay_Clay.app.runtime.getGamepadName(n);this._configureGamepad(n,s),this.backend.input.emitGamepadEnable(n,s)}this.gamepadButtonMapping.h.hasOwnProperty(0|e)&&(e=null!=(t=this.gamepadButtonMapping.h[0|e])?t:0);0!=e&&1!=e||this.swapAbGamepads.h[0|n]&&(e=1==e?0:1),2!=e&&3!=e||this.swapXyGamepads.h[0|n]&&(e=2==e?3:2),1!=(null!=(t=this.gamepadPressedValues.h[32*n+e|0])?t:0)&&(this.gamepadPressedValues.h[32*n+e|0]=1,this.backend.input.emitGamepadDown(n,e))},gamepadUp:function(n,e,t,i){if(!this.activeGamepads.h.hasOwnProperty(0|n)&&!this.removedGamepads.h.hasOwnProperty(0|n)){this.activeGamepads.h[0|n]=!0;for(var r=0;r<32;){var l=r++;this.gamepadPressedValues.h[32*n+l|0]=0}var s=clay_Clay.app.runtime.getGamepadName(n);this._configureGamepad(n,s),this.backend.input.emitGamepadEnable(n,s)}this.gamepadButtonMapping.h.hasOwnProperty(0|e)&&(e=null!=(t=this.gamepadButtonMapping.h[0|e])?t:0);0!=e&&1!=e||this.swapAbGamepads.h[0|n]&&(e=1==e?0:1),2!=e&&3!=e||this.swapXyGamepads.h[0|n]&&(e=2==e?3:2),1==(null!=(t=this.gamepadPressedValues.h[32*n+e|0])?t:0)&&(this.gamepadPressedValues.h[32*n+e|0]=0,this.backend.input.emitGamepadUp(n,e))},gamepadGyro:function(n,e,t,i,r){if(!this.activeGamepads.h.hasOwnProperty(0|n)&&!this.removedGamepads.h.hasOwnProperty(0|n)){this.activeGamepads.h[0|n]=!0;for(var l=0;l<32;){var s=l++;this.gamepadPressedValues.h[32*n+s|0]=0}var a=clay_Clay.app.runtime.getGamepadName(n);this._configureGamepad(n,a),this.backend.input.emitGamepadEnable(n,a)}var o=.23225806451612904;this.backend.input.emitGamepadGyro(n,e*o,t*o,i*o)},gamepadDevice:function(n,e,t,i){var r=this;if(2==t){if(this.activeGamepads.h.hasOwnProperty(0|n)){for(var l=0;l<32;){var s=l++,a=this.gamepadPressedValues.h[32*n+s|0];1==(null!=a?a:0)&&(this.backend.input.emitGamepadUp(n,s),this.gamepadPressedValues.h[32*n+s|0]=0)}this.backend.input.emitGamepadDisable(n),this.activeGamepads.remove(0|n),this.removedGamepads.h[0|n]=!0,ceramic_App.app.onceUpdate(null,(function(e){r.removedGamepads.remove(0|n)}))}}else if(1==t&&!this.activeGamepads.h.hasOwnProperty(0|n)){this.activeGamepads.h[0|n]=!0;for(l=0;l<32;){s=l++;this.gamepadPressedValues.h[32*n+s|0]=0}this.removedGamepads.remove(0|n);e=clay_Clay.app.runtime.getGamepadName(n);this._configureGamepad(n,e),this.backend.input.emitGamepadEnable(n,e)}},text:function(n,e,t,i,r,l){this.backend.textInput.inputActive&&this.backend.textInput.handleTextInput(n)},windowEvent:function(n,e,t,i,r){switch(n){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:break;case 15:ceramic_App.app.settings.set_fullscreen(!0);break;case 16:ceramic_App.app.settings.set_fullscreen(!1)}},__class__:backend_ClayEvents});var spec_Clipboard=function(){};t["spec.Clipboard"]=spec_Clipboard,spec_Clipboard.__name__="spec.Clipboard",spec_Clipboard.__isInterface__=!0,spec_Clipboard.prototype={__class__:spec_Clipboard};var backend_Clipboard=function(){this.didBindBrowserClipboard=!1,this.didLogBrowserClipboardWriteWarning=!1,this.didLogBrowserClipboardReadWarning=!1,this.clipboardText=null};t["backend.Clipboard"]=backend_Clipboard,backend_Clipboard.__name__="backend.Clipboard",backend_Clipboard.__interfaces__=[spec_Clipboard],backend_Clipboard.prototype={bindBrowserClipboard:function(){var n=this;this.didBindBrowserClipboard=!0,this.readBrowserClipboard(),window.addEventListener("focus",(function(){n.readBrowserClipboard()}))},readBrowserClipboard:function(){var e=this,t=n.navigator;try{t.clipboard.readText().then((function(n){e.clipboardText!=n&&(e.clipboardText=n)}))}catch(n){var i=haxe_Exception.caught(n).unwrap();this.didLogBrowserClipboardReadWarning||(this.didLogBrowserClipboardReadWarning=!0,ceramic_App.app.logger.warning("Failed to read browser clipboard: "+Std.string(i),{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Clipboard.hx",lineNumber:68,className:"backend.Clipboard",methodName:"readBrowserClipboard"}))}},writeBrowserClipboard:function(e){var t=n.navigator;try{t.clipboard.writeText(e).then((function(){}))}catch(n){var i=haxe_Exception.caught(n).unwrap();this.didLogBrowserClipboardWriteWarning||(this.didLogBrowserClipboardWriteWarning=!0,ceramic_App.app.logger.warning("Failed to write browser clipboard: "+Std.string(i),{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Clipboard.hx",lineNumber:87,className:"backend.Clipboard",methodName:"writeBrowserClipboard"}))}},getText:function(){return this.clipboardText},setText:function(n){this.clipboardText=n,this.didBindBrowserClipboard&&this.writeBrowserClipboard(n)},__class__:backend_Clipboard};var spec_Draw=function(){};t["spec.Draw"]=spec_Draw,spec_Draw.__name__="spec.Draw",spec_Draw.__isInterface__=!0,spec_Draw.prototype={__class__:spec_Draw};var ceramic_DecomposedTransform=function(){this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.rotation=0,this.y=0,this.x=0,this.pivotY=0,this.pivotX=0};t["ceramic.DecomposedTransform"]=ceramic_DecomposedTransform,ceramic_DecomposedTransform.__name__="ceramic.DecomposedTransform",ceramic_DecomposedTransform.prototype={toString:function(){return"(pos="+this.x+","+this.y+" pivot="+this.pivotX+","+this.pivotY+" rotation="+this.rotation+" scale="+(this.scaleX==this.scaleY?""+this.scaleX:this.scaleX+","+this.scaleY)+" skew="+this.skewX+","+this.skewY+")"},__class__:ceramic_DecomposedTransform};var ceramic_Transform=function(n,e,t,i,r,l){null==l&&(l=0),null==r&&(r=0),null==i&&(i=1),null==t&&(t=0),null==e&&(e=0),null==n&&(n=1),this.a=n,this.b=e,this.c=t,this.d=i,this.tx=r,this.ty=l,this._aPrev=n,this._bPrev=e,this._cPrev=t,this._dPrev=i,this._txPrev=r,this._tyPrev=l,this.changed=!1,this.changedDirty=!1};t["ceramic.Transform"]=ceramic_Transform,ceramic_Transform.__name__="ceramic.Transform",ceramic_Transform.__interfaces__=[tracker_Events],ceramic_Transform.prototype={emitChange:function(){var n=0;if(null!=this.__cbOnChange&&(n+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(n+=this.__cbOnceChange.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnChange)for(var r=0,l=this.__cbOnChange.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnChange[s],++i):--n}if(null!=this.__cbOnceChange){var a=null,o=null;for(r=0,l=this.__cbOnceChange.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceChange[s],this.__cbOnceChange[s]=null;var p=this.__cbOnceOwnerUnbindChange[s];this.__cbOnceOwnerUnbindChange[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindChange[s]),o.push(this.__cbOnceChange[s])}this.__cbOnceOwnerUnbindChange=a,this.__cbOnceChange=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},onChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(e)},onceChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(e)},offChange:function(n){if(null!=n){var e;null!=this.__cbOnChange&&-1!=(e=this.__cbOnChange.indexOf(n))&&(this.__cbOnChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindChange[e])&&l(),this.__cbOnOwnerUnbindChange.splice(e,1)),null!=this.__cbOnceChange&&-1!=(e=this.__cbOnceChange.indexOf(n))&&(this.__cbOnceChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindChange[e])&&l(),this.__cbOnceOwnerUnbindChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindChange[r])&&l()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindChange[r])&&l()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&this.__cbOnChange.length>0||null!=this.__cbOnceChange&&this.__cbOnceChange.length>0},computeChanged:function(){this.changedDirty&&(this.changed=this.tx!=this._txPrev||this.ty!=this._tyPrev||this.a!=this._aPrev||this.b!=this._bPrev||this.c!=this._cPrev||this.d!=this._dPrev,this.changedDirty=!1)},didEmitChange:function(){this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},cleanChangedState:function(){this._aPrev=this.a,this._bPrev=this.b,this._cPrev=this.c,this._dPrev=this.d,this._txPrev=this.tx,this._tyPrev=this.ty,this.changed=!1},clone:function(){return new ceramic_Transform(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(n){var e=this.a*n.a+this.b*n.c;this.b=this.a*n.b+this.b*n.d,this.a=e;var t=this.c*n.a+this.d*n.c;this.d=this.c*n.b+this.d*n.d,this.c=t;var i=this.tx*n.a+this.ty*n.c+n.tx;this.ty=this.tx*n.b+this.ty*n.d+n.ty,this.tx=i,this.changedDirty=!0},decompose:function(n){return null==n&&(n=new ceramic_DecomposedTransform),n.pivotX=0,n.pivotY=0,n.skewX=-Math.atan2(-this.c,this.d),n.skewY=Math.atan2(this.b,this.a),Math.abs(n.skewX+n.skewY)<1e-5&&(n.rotation=n.skewY,this.a<0&&this.d>=0&&(n.rotation+=n.rotation<=0?Math.PI:-Math.PI),n.skewX=0,n.skewY=0),n.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),n.scaleY=Math.sqrt(this.c*this.c+this.d*this.d),n.x=this.tx,n.y=this.ty,n},setFromDecomposed:function(n){var e=n.x,t=n.y,i=n.scaleX,r=n.scaleY,l=n.rotation,s=n.skewX,a=n.skewY,o=n.pivotX,p=n.pivotY;if(null==p&&(p=0),null==o&&(o=0),null==a&&(a=0),null==s&&(s=0),null==l&&(l=0),null==r&&(r=1),null==i&&(i=1),null==t&&(t=0),null==e&&(e=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-o,this.ty+=-p,this.changedDirty=!0,0!=s&&(this.c=s*Math.PI/180),0!=a&&(this.b=a*Math.PI/180),0!=l){var h=l*Math.PI/180,u=Math.cos(h),_=Math.sin(h),c=this.a*u-this.b*_;this.b=this.a*_+this.b*u,this.a=c;var d=this.c*u-this.d*_;this.d=this.c*_+this.d*u,this.c=d;var f=this.tx*u-this.ty*_;this.ty=this.tx*_+this.ty*u,this.tx=f,this.changedDirty=!0}this.tx+=o,this.ty+=p,this.changedDirty=!0,1==i&&1==r||(this.a*=i,this.b*=r,this.c*=i,this.d*=r,this.tx*=i,this.ty*=r,this.changedDirty=!0),this.tx+=e-o*i,this.ty+=t-p*r,this.changedDirty=!0},setFromValues:function(n,e,t,i,r,l,s,a,o){if(null==o&&(o=0),null==a&&(a=0),null==s&&(s=0),null==l&&(l=0),null==r&&(r=0),null==i&&(i=1),null==t&&(t=1),null==e&&(e=0),null==n&&(n=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-a,this.ty+=-o,this.changedDirty=!0,0!=l&&(this.c=l*Math.PI/180),0!=s&&(this.b=s*Math.PI/180),0!=r){var p=r*Math.PI/180,h=Math.cos(p),u=Math.sin(p),_=this.a*h-this.b*u;this.b=this.a*u+this.b*h,this.a=_;var c=this.c*h-this.d*u;this.d=this.c*u+this.d*h,this.c=c;var d=this.tx*h-this.ty*u;this.ty=this.tx*u+this.ty*h,this.tx=d,this.changedDirty=!0}this.tx+=a,this.ty+=o,this.changedDirty=!0,1==t&&1==i||(this.a*=t,this.b*=i,this.c*=t,this.d*=i,this.tx*=t,this.ty*=i,this.changedDirty=!0),this.tx+=n-a*t,this.ty+=e-o*i,this.changedDirty=!0},setFromInterpolated:function(n,e,t){if(0==t)this.a=n.a,this.b=n.b,this.c=n.c,this.d=n.d,this.tx=n.tx,this.ty=n.ty,this.changedDirty=!0;else if(1==t)this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this.changedDirty=!0;else{var i;null==(i=ceramic_Transform._decomposed1)&&(i=new ceramic_DecomposedTransform),i.pivotX=0,i.pivotY=0,i.skewX=-Math.atan2(-n.c,n.d),i.skewY=Math.atan2(n.b,n.a),Math.abs(i.skewX+i.skewY)<1e-5&&(i.rotation=i.skewY,n.a<0&&n.d>=0&&(i.rotation+=i.rotation<=0?Math.PI:-Math.PI),i.skewX=0,i.skewY=0),i.scaleX=Math.sqrt(n.a*n.a+n.b*n.b),i.scaleY=Math.sqrt(n.c*n.c+n.d*n.d),i.x=n.tx,i.y=n.ty,null==(i=ceramic_Transform._decomposed2)&&(i=new ceramic_DecomposedTransform),i.pivotX=0,i.pivotY=0,i.skewX=-Math.atan2(-e.c,e.d),i.skewY=Math.atan2(e.b,e.a),Math.abs(i.skewX+i.skewY)<1e-5&&(i.rotation=i.skewY,e.a<0&&e.d>=0&&(i.rotation+=i.rotation<=0?Math.PI:-Math.PI),i.skewX=0,i.skewY=0),i.scaleX=Math.sqrt(e.a*e.a+e.b*e.b),i.scaleY=Math.sqrt(e.c*e.c+e.d*e.d),i.x=e.tx,i.y=e.ty,ceramic_Transform._decomposed1.pivotX+=(ceramic_Transform._decomposed2.pivotX-ceramic_Transform._decomposed1.pivotX)*t,ceramic_Transform._decomposed1.pivotY+=(ceramic_Transform._decomposed2.pivotY-ceramic_Transform._decomposed1.pivotY)*t,ceramic_Transform._decomposed1.rotation+=(ceramic_Transform._decomposed2.rotation-ceramic_Transform._decomposed1.rotation)*t,ceramic_Transform._decomposed1.scaleX+=(ceramic_Transform._decomposed2.scaleX-ceramic_Transform._decomposed1.scaleX)*t,ceramic_Transform._decomposed1.scaleY+=(ceramic_Transform._decomposed2.scaleY-ceramic_Transform._decomposed1.scaleY)*t,ceramic_Transform._decomposed1.skewX+=(ceramic_Transform._decomposed2.skewX-ceramic_Transform._decomposed1.skewX)*t,ceramic_Transform._decomposed1.skewY+=(ceramic_Transform._decomposed2.skewY-ceramic_Transform._decomposed1.skewY)*t,ceramic_Transform._decomposed1.x+=(ceramic_Transform._decomposed2.x-ceramic_Transform._decomposed1.x)*t,ceramic_Transform._decomposed1.y+=(ceramic_Transform._decomposed2.y-ceramic_Transform._decomposed1.y)*t;var r=ceramic_Transform._decomposed1,l=r.x,s=r.y,a=r.scaleX,o=r.scaleY,p=r.rotation,h=r.skewX,u=r.skewY,_=r.pivotX,c=r.pivotY;if(null==c&&(c=0),null==_&&(_=0),null==u&&(u=0),null==h&&(h=0),null==p&&(p=0),null==o&&(o=1),null==a&&(a=1),null==s&&(s=0),null==l&&(l=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0,this.tx+=-_,this.ty+=-c,this.changedDirty=!0,0!=h&&(this.c=h*Math.PI/180),0!=u&&(this.b=u*Math.PI/180),0!=p){var d=p*Math.PI/180,f=Math.cos(d),x=Math.sin(d),b=this.a*f-this.b*x;this.b=this.a*x+this.b*f,this.a=b;var y=this.c*f-this.d*x;this.d=this.c*x+this.d*f,this.c=y;var v=this.tx*f-this.ty*x;this.ty=this.tx*x+this.ty*f,this.tx=v,this.changedDirty=!0}this.tx+=_,this.ty+=c,this.changedDirty=!0,1==a&&1==o||(this.a*=a,this.b*=o,this.c*=a,this.d*=o,this.tx*=a,this.ty*=o,this.changedDirty=!0),this.tx+=l-_*a,this.ty+=s-c*o,this.changedDirty=!0}},deltaTransformX:function(n,e){return n*this.a+e*this.c},deltaTransformY:function(n,e){return n*this.b+e*this.d},equals:function(n){return null!=n&&this.tx==n.tx&&this.ty==n.ty&&this.a==n.a&&this.b==n.b&&this.c==n.c&&this.d==n.d},identity:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.changedDirty=!0},invert:function(){var n=this.a*this.d-this.b*this.c;if(0==n)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{n=1/n;var e=this.d*n;this.d=this.a*n,this.a=e,this.b*=-n,this.c*=-n;var t=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty,this.tx=t}this.changedDirty=!0},rotate:function(n){var e=Math.cos(n),t=Math.sin(n),i=this.a*e-this.b*t;this.b=this.a*t+this.b*e,this.a=i;var r=this.c*e-this.d*t;this.d=this.c*t+this.d*e,this.c=r;var l=this.tx*e-this.ty*t;this.ty=this.tx*t+this.ty*e,this.tx=l,this.changedDirty=!0},scale:function(n,e){this.a*=n,this.b*=e,this.c*=n,this.d*=e,this.tx*=n,this.ty*=e,this.changedDirty=!0},translate:function(n,e){this.tx+=n,this.ty+=e,this.changedDirty=!0},skew:function(n,e){var t=ceramic_Transform._tmp;t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.changedDirty=!0;var i=Math.cos(e),r=Math.sin(e),l=-Math.sin(n),s=Math.cos(n);ceramic_Transform._tmp.a=1*i+-0*r,ceramic_Transform._tmp.b=0*i+1*r,ceramic_Transform._tmp.c=1*l+-0*s,ceramic_Transform._tmp.d=0*l+1*s;var a=ceramic_Transform._tmp,o=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d,this.a=o;var p=this.c*a.a+this.d*a.c;this.d=this.c*a.b+this.d*a.d,this.c=p;var h=this.tx*a.a+this.ty*a.c+a.tx;this.ty=this.tx*a.b+this.ty*a.d+a.ty,this.tx=h,this.changedDirty=!0},setRotation:function(n,e){null==e&&(e=1),this.a=Math.cos(n)*e,this.c=Math.sin(n)*e,this.b=-this.c,this.d=this.a,this.changedDirty=!0},setTo:function(n,e,t,i,r,l){this.a=n,this.b=e,this.c=t,this.d=i,this.tx=r,this.ty=l,this.changedDirty=!0},setToTransform:function(n){this.a=n.a,this.b=n.b,this.c=n.c,this.d=n.d,this.tx=n.tx,this.ty=n.ty,this.changedDirty=!0},toString:function(){var n=ceramic_Transform._decomposed1;return null==n&&(n=new ceramic_DecomposedTransform),n.pivotX=0,n.pivotY=0,n.skewX=-Math.atan2(-this.c,this.d),n.skewY=Math.atan2(this.b,this.a),Math.abs(n.skewX+n.skewY)<1e-5&&(n.rotation=n.skewY,this.a<0&&this.d>=0&&(n.rotation+=n.rotation<=0?Math.PI:-Math.PI),n.skewX=0,n.skewY=0),n.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),n.scaleY=Math.sqrt(this.c*this.c+this.d*this.d),n.x=this.tx,n.y=this.ty,"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+" "+Std.string(ceramic_Transform._decomposed1)+")"},transformX:function(n,e){return n*this.a+e*this.c+this.tx},transformY:function(n,e){return n*this.b+e*this.d+this.ty},unbindEvents:function(){this.offChange()},__class__:ceramic_Transform};var backend_Draw=function(){this.renderer=new ceramic_Renderer,this.renderer=new ceramic_Renderer};t["backend.Draw"]=backend_Draw,backend_Draw.__name__="backend.Draw",backend_Draw.__interfaces__=[spec_Draw],backend_Draw.prototype={begin:function(){},end:function(){},draw:function(n){this.renderer.render(!0,n)},swap:function(){},initBuffers:function(){backend_Draw._activeTextureSlot=0,backend_Draw._buffersIndex=-1,this.prepareNextBuffers()},prepareNextBuffers:function(){if(backend_Draw._buffersIndex++,backend_Draw._buffersIndex>64&&(backend_Draw._buffersIndex=0),backend_Draw._posListArray.length<=backend_Draw._buffersIndex){var n=new Float32Array(65536);backend_Draw._posListArray[backend_Draw._buffersIndex]=n;n=new Float32Array(43691);backend_Draw._uvListArray[backend_Draw._buffersIndex]=n;n=new Float32Array(65536);backend_Draw._colorListArray[backend_Draw._buffersIndex]=n;n=new Uint16Array(32768);backend_Draw._indiceListArray[backend_Draw._buffersIndex]=n}backend_Draw._posList=backend_Draw._posListArray[backend_Draw._buffersIndex],backend_Draw._uvList=backend_Draw._uvListArray[backend_Draw._buffersIndex],backend_Draw._colorList=backend_Draw._colorListArray[backend_Draw._buffersIndex],backend_Draw._indiceList=backend_Draw._indiceListArray[backend_Draw._buffersIndex]},beginRender:function(){clay_opengl_web_GL.gl.enableVertexAttribArray(0),clay_opengl_web_GL.gl.enableVertexAttribArray(1),clay_opengl_web_GL.gl.enableVertexAttribArray(2)},clear:function(){clay_opengl_web_GL.gl.clearColor((backend_Draw._whiteTransparentColor>>16&255)/255,(backend_Draw._whiteTransparentColor>>8&255)/255,(255&backend_Draw._whiteTransparentColor)/255,backend_Draw._whiteTransparentColor>>24&255),clay_Clay.app.config.render.depth>0?(clay_opengl_web_GL.gl.clear(16640),clay_opengl_web_GL.gl.clearDepth(1)):clay_opengl_web_GL.gl.clear(16384)},clearAndApplyBackground:function(){var n=ceramic_App.app.settings.get_background();clay_opengl_web_GL.gl.clearColor((n>>16&255)/255,(n>>8&255)/255,(255&n)/255,1),clay_Clay.app.config.render.depth>0?(clay_opengl_web_GL.gl.clear(16640),clay_opengl_web_GL.gl.clearDepth(1)):clay_opengl_web_GL.gl.clear(16384)},enableBlending:function(){clay_opengl_web_GL.gl.enable(3042)},disableBlending:function(){clay_opengl_web_GL.gl.disable(3042)},setActiveTexture:function(n){if(backend_Draw._activeTextureSlot=n,clay_opengl_GLGraphics._activeTextureSlot!=n){for(clay_opengl_GLGraphics._activeTextureSlot=n;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+n)}},setRenderWireframe:function(n){},getActiveTexture:function(){return backend_Draw._activeTextureSlot},setRenderTarget:function(n,e){if(null==e&&(e=!1),backend_Draw._currentRenderTarget!=n||e)if(backend_Draw._currentRenderTarget=n,null!=n){var t=n.backendItem.renderTarget;null!=t?(clay_opengl_GLGraphics.bindFramebuffer(t.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(t.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));var i=0,r=0,l=((v=n.width)+i)/(w=v-i),s=(r+(m=n.height))/(O=r-m),a=((z=-1e3)+(g=1e3))/(C=z-g);(b=backend_Draw._projectionMatrix)[0]=2/w,b[4]=0,b[8]=0,b[12]=-l,b[1]=0,b[5]=2/O,b[9]=0,b[13]=-s,b[2]=0,b[6]=0,b[10]=-2/C,b[14]=-a,b[3]=0,b[7]=0,b[11]=0,b[15]=1,(o=backend_Draw._renderTargetTransform).a=1,o.b=0,o.c=0,o.d=1,o.tx=0,o.ty=0,o.changedDirty=!0;var o=backend_Draw._renderTargetTransform,p=n.density,h=n.density;o.a*=p,o.b*=h,o.c*=p,o.d*=h,o.tx*=p,o.ty*=h,o.changedDirty=!0;var u=n.density,_=n.width,c=n.height,d=-1;if(null==d&&(d=1),null!=(y=backend_Draw._renderTargetTransform)){if((o=backend_Draw._modelViewTransform).a=y.a,o.b=y.b,o.c=y.c,o.d=y.d,o.tx=y.tx,o.ty=y.ty,o.changedDirty=!0,0==(E=(o=backend_Draw._modelViewTransform).a*o.d-o.b*o.c))o.a=o.b=o.c=o.d=0,o.tx=-o.tx,o.ty=-o.ty;else{E=1/E;var f=o.d*E;o.d=o.a*E,o.a=f,o.b*=-E,o.c*=-E;var x=-o.a*o.tx-o.c*o.ty;o.ty=-o.b*o.tx-o.d*o.ty,o.tx=x}o.changedDirty=!0}else{(o=backend_Draw._modelViewTransform).a=1,o.b=0,o.c=0,o.d=1,o.tx=0,o.ty=0,o.changedDirty=!0}l=backend_Draw._modelViewTransform.tx,s=backend_Draw._modelViewTransform.ty;if((o=backend_Draw._modelViewTransform).tx+=-l,o.ty+=-s,o.changedDirty=!0,(o=backend_Draw._modelViewTransform).a*=u,o.b*=u,o.c*=u,o.d*=u,o.tx*=u,o.ty*=u,o.changedDirty=!0,(o=backend_Draw._modelViewTransform).tx+=l,o.ty+=s,o.changedDirty=!0,-1==d)(o=backend_Draw._modelViewTransform).tx+=.5*-_,o.ty+=.5*-c,o.changedDirty=!0,(o=backend_Draw._modelViewTransform).a*=1,o.b*=-1,o.c*=1,o.d*=-1,o.tx*=1,o.ty*=-1,o.changedDirty=!0,(o=backend_Draw._modelViewTransform).tx+=.5*_,o.ty+=.5*c,o.changedDirty=!0;if(0==(E=(o=backend_Draw._modelViewTransform).a*o.d-o.b*o.c))o.a=o.b=o.c=o.d=0,o.tx=-o.tx,o.ty=-o.ty;else{E=1/E;f=o.d*E;o.d=o.a*E,o.a=f,o.b*=-E,o.c*=-E;x=-o.a*o.tx-o.c*o.ty;o.ty=-o.b*o.tx-o.d*o.ty,o.tx=x}o.changedDirty=!0;var b=backend_Draw._modelViewMatrix,y=backend_Draw._modelViewTransform;b[0]=y.a,b[4]=y.c,b[8]=0,b[12]=y.tx,b[1]=y.b,b[5]=y.d,b[9]=0,b[13]=y.ty,b[2]=0,b[6]=0,b[10]=1,b[14]=0,b[3]=0,b[7]=0,b[11]=0,b[15]=1,clay_opengl_web_GL.gl.viewport(0,0,n.width*n.density|0,n.height*n.density|0),n.clearOnRender&&clay_opengl_GLGraphics.clear((backend_Draw._blackTransparentColor>>16&255)/255,(backend_Draw._blackTransparentColor>>8&255)/255,(255&backend_Draw._blackTransparentColor)/255,(backend_Draw._blackTransparentColor>>24&255)/255)}else{null!=(n=null)?(clay_opengl_GLGraphics.bindFramebuffer(n.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(n.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));var v,m,g,z,w,O,C;i=0,r=0,l=((v=clay_Clay.app.screenWidth)+i)/(w=v-i),s=(r+(m=clay_Clay.app.screenHeight))/(O=r-m),a=((z=-1e3)+(g=1e3))/(C=z-g);(b=backend_Draw._projectionMatrix)[0]=2/w,b[4]=0,b[8]=0,b[12]=-l,b[1]=0,b[5]=2/O,b[9]=0,b[13]=-s,b[2]=0,b[6]=0,b[10]=-2/C,b[14]=-a,b[3]=0,b[7]=0,b[11]=0,b[15]=1;u=clay_Clay.app.screenDensity,_=clay_Clay.app.screenWidth,c=clay_Clay.app.screenHeight;if(null!=(y=ceramic_App.app.screen.matrix)){if((o=backend_Draw._modelViewTransform).a=y.a,o.b=y.b,o.c=y.c,o.d=y.d,o.tx=y.tx,o.ty=y.ty,o.changedDirty=!0,0==(E=(o=backend_Draw._modelViewTransform).a*o.d-o.b*o.c))o.a=o.b=o.c=o.d=0,o.tx=-o.tx,o.ty=-o.ty;else{E=1/E;f=o.d*E;o.d=o.a*E,o.a=f,o.b*=-E,o.c*=-E;x=-o.a*o.tx-o.c*o.ty;o.ty=-o.b*o.tx-o.d*o.ty,o.tx=x}o.changedDirty=!0}else{(o=backend_Draw._modelViewTransform).a=1,o.b=0,o.c=0,o.d=1,o.tx=0,o.ty=0,o.changedDirty=!0}var E;l=backend_Draw._modelViewTransform.tx,s=backend_Draw._modelViewTransform.ty;if((o=backend_Draw._modelViewTransform).tx+=-l,o.ty+=-s,o.changedDirty=!0,(o=backend_Draw._modelViewTransform).a*=u,o.b*=u,o.c*=u,o.d*=u,o.tx*=u,o.ty*=u,o.changedDirty=!0,(o=backend_Draw._modelViewTransform).tx+=l,o.ty+=s,o.changedDirty=!0,0==(E=(o=backend_Draw._modelViewTransform).a*o.d-o.b*o.c))o.a=o.b=o.c=o.d=0,o.tx=-o.tx,o.ty=-o.ty;else{E=1/E;f=o.d*E;o.d=o.a*E,o.a=f,o.b*=-E,o.c*=-E;x=-o.a*o.tx-o.c*o.ty;o.ty=-o.b*o.tx-o.d*o.ty,o.tx=x}o.changedDirty=!0;b=backend_Draw._modelViewMatrix,y=backend_Draw._modelViewTransform;b[0]=y.a,b[4]=y.c,b[8]=0,b[12]=y.tx,b[1]=y.b,b[5]=y.d,b[9]=0,b[13]=y.ty,b[2]=0,b[6]=0,b[10]=1,b[14]=0,b[3]=0,b[7]=0,b[11]=0,b[15]=1,clay_opengl_web_GL.gl.viewport(0,0,clay_Clay.app.screenWidth*clay_Clay.app.screenDensity|0,clay_Clay.app.screenHeight*clay_Clay.app.screenDensity|0)}},useShader:function(n){backend_Draw._activeShader=n,n.uniforms.setMatrix4("projectionMatrix",backend_Draw._projectionMatrix),n.uniforms.setMatrix4("modelViewMatrix",backend_Draw._modelViewMatrix);var e=ceramic_App.app.backend.shaders,t=0,i=backend_Draw._activeShader.customAttributes;if(null!=i)for(var r=0,l=i.length;r<l;){t+=i[r++].size}backend_Draw._floatAttributesSize=t,backend_Draw._batchMultiTexture=e.canBatchWithMultipleTextures(backend_Draw._activeShader),backend_Draw._vertexSize=3+backend_Draw._floatAttributesSize+(backend_Draw._batchMultiTexture?1:0),backend_Draw._posSize=backend_Draw._vertexSize,backend_Draw._vertexSize<4&&(backend_Draw._vertexSize=4),backend_Draw._maxVerts=0|Math.floor(65536/backend_Draw._vertexSize),n.activate(),0==backend_Draw._numPos&&(backend_Draw._numIndices=0,backend_Draw._numPos=0,backend_Draw._numUVs=0,backend_Draw._numColors=0,backend_Draw._posIndex=0,backend_Draw._uvIndex=0,backend_Draw._colorIndex=0)},resetIndexes:function(){backend_Draw._numIndices=0,backend_Draw._numPos=0,backend_Draw._numUVs=0,backend_Draw._numColors=0,backend_Draw._posIndex=0,backend_Draw._uvIndex=0,backend_Draw._colorIndex=0},setBlendFuncSeparate:function(n,e,t,i){clay_opengl_web_GL.gl.blendFuncSeparate(n,e,t,i)},beginDrawQuad:function(n){},endDrawQuad:function(){},beginDrawMesh:function(n){},endDrawMesh:function(){},drawWithStencilTest:function(){clay_opengl_web_GL.gl.stencilFunc(514,1,255),clay_opengl_web_GL.gl.stencilMask(0),clay_opengl_web_GL.gl.colorMask(!0,!0,!0,!0),clay_opengl_web_GL.gl.enable(2960)},drawWithoutStencilTest:function(){clay_opengl_web_GL.gl.stencilFunc(519,1,255),clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.colorMask(!0,!0,!0,!0),clay_opengl_web_GL.gl.disable(2960)},beginDrawingInStencilBuffer:function(){backend_Draw._drawingInStencilBuffer=!0,clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.clearStencil(255),clay_opengl_web_GL.gl.clear(1024),clay_opengl_web_GL.gl.enable(2960),clay_opengl_web_GL.gl.stencilOp(7680,7680,7681),clay_opengl_web_GL.gl.stencilFunc(519,1,255),clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.colorMask(!1,!1,!1,!1)},endDrawingInStencilBuffer:function(){backend_Draw._drawingInStencilBuffer=!1},bindTexture:function(n){var e=n.textureId;clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=e&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=e,clay_opengl_web_GL.gl.bindTexture(3553,e))},bindNoTexture:function(){var n=ceramic_App.app.defaultWhiteTexture.backendItem.textureId;clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=n&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=n,clay_opengl_web_GL.gl.bindTexture(3553,n))},textureBackendItemMatchesId:function(n,e){return n.textureId==e},getTextureId:function(n){return n.textureId},getTextureWidth:function(n){return n.width},getTextureHeight:function(n){return n.height},getTextureWidthActual:function(n){return n.widthActual},getTextureHeightActual:function(n){return n.heightActual},updateProjectionMatrix:function(n,e){var t=n-0,i=0-e,r=(n+0)/t,l=(0+e)/i,s=backend_Draw._projectionMatrix;s[0]=2/t,s[4]=0,s[8]=0,s[12]=-r,s[1]=0,s[5]=2/i,s[9]=0,s[13]=-l,s[2]=0,s[6]=0,s[10]=.001,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1},updateViewMatrix:function(n,e,t,i,r){if(null==r&&(r=1),null!=i){if((a=backend_Draw._modelViewTransform).a=i.a,a.b=i.b,a.c=i.c,a.d=i.d,a.tx=i.tx,a.ty=i.ty,a.changedDirty=!0,0==(o=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{o=1/o;var l=a.d*o;a.d=a.a*o,a.a=l,a.b*=-o,a.c*=-o;var s=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=s}a.changedDirty=!0}else{(a=backend_Draw._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0}var a,o,p=backend_Draw._modelViewTransform.tx,h=backend_Draw._modelViewTransform.ty;((a=backend_Draw._modelViewTransform).tx+=-p,a.ty+=-h,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=n,a.b*=n,a.c*=n,a.d*=n,a.tx*=n,a.ty*=n,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=p,a.ty+=h,a.changedDirty=!0,-1==r)&&((a=backend_Draw._modelViewTransform).tx+=.5*-e,a.ty+=.5*-t,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=1,a.b*=-1,a.c*=1,a.d*=-1,a.tx*=1,a.ty*=-1,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=.5*e,a.ty+=.5*t,a.changedDirty=!0);if(0==(o=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{o=1/o;l=a.d*o;a.d=a.a*o,a.a=l,a.b*=-o,a.c*=-o;s=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=s}a.changedDirty=!0;var u=backend_Draw._modelViewMatrix;i=backend_Draw._modelViewTransform;u[0]=i.a,u[4]=i.c,u[8]=0,u[12]=i.tx,u[1]=i.b,u[5]=i.d,u[9]=0,u[13]=i.ty,u[2]=0,u[6]=0,u[10]=1,u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1},matrixIdentity:function(n){n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1},setMatrixToTransform:function(n,e){n[0]=e.a,n[4]=e.c,n[8]=0,n[12]=e.tx,n[1]=e.b,n[5]=e.d,n[9]=0,n[13]=e.ty,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1},getNumPos:function(){return backend_Draw._numPos},putPos:function(n,e,t){backend_Draw._posList[backend_Draw._posIndex]=n,backend_Draw._posList[backend_Draw._posIndex+1]=e,backend_Draw._posList[backend_Draw._posIndex+2]=t,backend_Draw._posIndex+=3,backend_Draw._numPos++},putPosAndTextureSlot:function(n,e,t,i){backend_Draw._posList[backend_Draw._posIndex]=n,backend_Draw._posList[backend_Draw._posIndex+1]=e,backend_Draw._posList[backend_Draw._posIndex+2]=t,backend_Draw._posList[backend_Draw._posIndex+3]=i,backend_Draw._posIndex+=4,backend_Draw._numPos++},beginFloatAttributes:function(){},putFloatAttribute:function(n,e){backend_Draw._posList[backend_Draw._posIndex+n]=e},endFloatAttributes:function(){backend_Draw._posIndex+=backend_Draw._floatAttributesSize},putIndice:function(n){backend_Draw._indiceList[backend_Draw._numIndices]=n,backend_Draw._numIndices++},putUVs:function(n,e){backend_Draw._uvList[backend_Draw._uvIndex]=n,backend_Draw._uvList[backend_Draw._uvIndex+1]=e,backend_Draw._uvIndex+=2,backend_Draw._numUVs++},putColor:function(n,e,t,i){backend_Draw._colorList[backend_Draw._colorIndex]=n,backend_Draw._colorList[backend_Draw._colorIndex+1]=e,backend_Draw._colorList[backend_Draw._colorIndex+2]=t,backend_Draw._colorList[backend_Draw._colorIndex+3]=i,backend_Draw._colorIndex+=4,backend_Draw._numColors++},hasAnythingToFlush:function(){return backend_Draw._numPos>0},shouldFlush:function(n,e,t){return!(backend_Draw._numPos+n<=backend_Draw._maxVerts)||backend_Draw._numIndices+e>16384},remainingVertices:function(){return backend_Draw._maxVerts-backend_Draw._numPos},remainingIndices:function(){return 16384-backend_Draw._numIndices},flush:function(){var n=backend_Draw._batchMultiTexture,e=new Float32Array(backend_Draw._posList.buffer,0,4*backend_Draw._posIndex/4|0),t=new Float32Array(backend_Draw._uvList.buffer,0,4*backend_Draw._uvIndex/4|0),i=new Float32Array(backend_Draw._colorList.buffer,0,4*backend_Draw._colorIndex/4|0),r=new Uint16Array(backend_Draw._indiceList.buffer,0,2*backend_Draw._numIndices/2|0),l=clay_opengl_web_GL.gl.createBuffer(),s=clay_opengl_web_GL.gl.createBuffer(),a=clay_opengl_web_GL.gl.createBuffer(),o=clay_opengl_web_GL.gl.createBuffer();clay_opengl_web_GL.gl.enableVertexAttribArray(0),clay_opengl_web_GL.gl.enableVertexAttribArray(1),clay_opengl_web_GL.gl.enableVertexAttribArray(2),clay_opengl_web_GL.gl.bindBuffer(34962,l),clay_opengl_web_GL.gl.vertexAttribPointer(0,3,5126,!1,4*backend_Draw._posSize,0),clay_opengl_web_GL.gl.bufferData(34962,e,35040),clay_opengl_web_GL.gl.bindBuffer(34962,a),clay_opengl_web_GL.gl.vertexAttribPointer(1,2,5126,!1,0,0),clay_opengl_web_GL.gl.bufferData(34962,t,35040),clay_opengl_web_GL.gl.bindBuffer(34962,s),clay_opengl_web_GL.gl.vertexAttribPointer(2,4,5126,!1,0,0),clay_opengl_web_GL.gl.bufferData(34962,i,35040);var p=3,h=3,u=0;if(n){var _=clay_opengl_web_GL.gl.createBuffer();backend_Draw._customGLBuffers[u++]=_,clay_opengl_web_GL.gl.enableVertexAttribArray(h),clay_opengl_web_GL.gl.bindBuffer(34962,_),clay_opengl_web_GL.gl.vertexAttribPointer(h,1,5126,!1,4*backend_Draw._posSize,4*p),clay_opengl_web_GL.gl.bufferData(34962,e,35040),++h,++p}if(null!=backend_Draw._activeShader&&null!=backend_Draw._activeShader.customAttributes){var c=backend_Draw._activeShader.customAttributes,d=u,f=d+c.length;u+=c.length;for(var x=d,b=f;x<b;){var y=c[(v=x++)-d];_=clay_opengl_web_GL.gl.createBuffer();backend_Draw._customGLBuffers[v]=_,clay_opengl_web_GL.gl.enableVertexAttribArray(h),clay_opengl_web_GL.gl.bindBuffer(34962,_),clay_opengl_web_GL.gl.vertexAttribPointer(h,y.size,5126,!1,4*backend_Draw._posSize,4*p),clay_opengl_web_GL.gl.bufferData(34962,e,35040),++h,p+=y.size}}if(clay_opengl_web_GL.gl.bindBuffer(34963,o),clay_opengl_web_GL.gl.bufferData(34963,r,35040),clay_opengl_web_GL.gl.drawElements(4,backend_Draw._numIndices,5123,0),clay_opengl_web_GL.gl.deleteBuffer(l),clay_opengl_web_GL.gl.deleteBuffer(s),clay_opengl_web_GL.gl.deleteBuffer(a),u>0)for(h=3,x=0,b=u;x<b;){var v=x++;_=backend_Draw._customGLBuffers[v];clay_opengl_web_GL.gl.deleteBuffer(_),clay_opengl_web_GL.gl.disableVertexAttribArray(h),++h}clay_opengl_web_GL.gl.bindBuffer(34963,null),clay_opengl_web_GL.gl.deleteBuffer(o),e=null,t=null,i=null,r=null,backend_Draw._numIndices=0,backend_Draw._numPos=0,backend_Draw._numUVs=0,backend_Draw._numColors=0,backend_Draw._posIndex=0,backend_Draw._uvIndex=0,backend_Draw._colorIndex=0,this.prepareNextBuffers()},__class__:backend_Draw};var backend_ElectronRunner=function(){};t["backend.ElectronRunner"]=backend_ElectronRunner,backend_ElectronRunner.__name__="backend.ElectronRunner";var spec_IO=function(){};t["spec.IO"]=spec_IO,spec_IO.__name__="spec.IO",spec_IO.__isInterface__=!0,spec_IO.prototype={__class__:spec_IO};var backend_IO=function(){};t["backend.IO"]=backend_IO,backend_IO.__name__="backend.IO",backend_IO.__interfaces__=[spec_IO],backend_IO.prototype={initKeyValueIfNeeded:function(){},saveString:function(n,e){try{var t=window.localStorage;if(null==t)return ceramic_App.app.logger.error("Cannot save string: localStorage not supported on this browser",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:200,className:"backend.IO",methodName:"saveString"}),!1;t.setItem(n,ceramic_HashedString.encode(e))}catch(e){var i=haxe_Exception.caught(e).unwrap();return ceramic_App.app.logger.error("Failed to save string (key="+n+"): "+Std.string(i),{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:207,className:"backend.IO",methodName:"saveString"}),!1}return!0},appendString:function(n,e){try{var t=window.localStorage;if(null==t)return ceramic_App.app.logger.error("Cannot append string: localStorage not supported on this browser",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:220,className:"backend.IO",methodName:"appendString"}),!1;var i=t.getItem(n);null==i?t.setItem(n,ceramic_HashedString.encode(e)):t.setItem(n,i+ceramic_HashedString.encode(e))}catch(e){var r=haxe_Exception.caught(e).unwrap();return ceramic_App.app.logger.error("Failed to append string (key="+n+"): "+Std.string(r),{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:233,className:"backend.IO",methodName:"appendString"}),!1}return!0},readString:function(n){try{var e=window.localStorage;if(null==e)return ceramic_App.app.logger.error("Cannot read string: localStorage not supported on this browser",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:246,className:"backend.IO",methodName:"readString"}),null;var t=e.getItem(n);return null!=t?ceramic_HashedString.decode(t):null}catch(e){var i=haxe_Exception.caught(e).unwrap();return ceramic_App.app.logger.error("Failed to read string (key="+n+"): "+Std.string(i),{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/IO.hx",lineNumber:254,className:"backend.IO",methodName:"readString"}),null}},__class__:backend_IO};var spec_Info=function(){};t["spec.Info"]=spec_Info,spec_Info.__name__="spec.Info",spec_Info.__isInterface__=!0,spec_Info.prototype={__class__:spec_Info};var backend_Info=function(){};t["backend.Info"]=backend_Info,backend_Info.__name__="backend.Info",backend_Info.__interfaces__=[spec_Info],backend_Info.prototype={storageDirectory:function(){return null},imageExtensions:function(){return["png","jpg","jpeg"]},textExtensions:function(){return["txt","json","fnt","atlas"]},soundExtensions:function(){if(null!=backend_Info._soundExtensions)return[].concat(backend_Info._soundExtensions);backend_Info._soundExtensions=[];var e=new Audio,t=null!=n.navigator?n.navigator.userAgent:"",i=backend_Info.RE_OPERA.match(t)&&parseInt(backend_Info.RE_OPERA.matched(0).split("/")[1],10)<33,r=-1!=t.indexOf("Safari")&&-1==t.indexOf("Chrome"),l=backend_Info.RE_SAFARI_VERSION.match(t),s=(r&&l&&parseInt(backend_Info.RE_SAFARI_VERSION.matched(1),10),e.canPlayType('audio/ogg; codecs="vorbis"'));null!=s&&"no"!=s&&""!=s&&backend_Info._soundExtensions.push("ogg");var a=e.canPlayType("audio/mpeg;"),o=e.canPlayType("audio/mp3;");!i&&(null!=a&&"no"!=a&&""!=a||null!=o&&"no"!=o&&""!=o)&&backend_Info._soundExtensions.push("mp3");var p=e.canPlayType("audio/x-flac;"),h=e.canPlayType("audio/flac;");(null!=p&&"no"!=p&&""!=p||null!=h&&"no"!=h&&""!=h)&&backend_Info._soundExtensions.push("flac");var u=e.canPlayType('audio/wav; codecs="1"'),_=e.canPlayType("audio/wav;");return(null!=u&&"no"!=u&&""!=u||null!=_&&"no"!=_&&""!=_)&&backend_Info._soundExtensions.push("wav"),[].concat(backend_Info._soundExtensions)},shaderExtensions:function(){return["frag","vert"]},__class__:backend_Info};var spec_Input=function(){};t["spec.Input"]=spec_Input,spec_Input.__name__="spec.Input",spec_Input.__isInterface__=!0;var backend_Input=function(){};t["backend.Input"]=backend_Input,backend_Input.__name__="backend.Input",backend_Input.__interfaces__=[spec_Input,tracker_Events],backend_Input.prototype={emitKeyDown:function(n){var e=0;if(null!=this.__cbOnKeyDown&&(e+=this.__cbOnKeyDown.length),null!=this.__cbOnceKeyDown&&(e+=this.__cbOnceKeyDown.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnKeyDown)for(var l=0,s=this.__cbOnKeyDown.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnKeyDown[a],++r):--e}if(null!=this.__cbOnceKeyDown){var o=null,p=null;for(l=0,s=this.__cbOnceKeyDown.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceKeyDown[a],this.__cbOnceKeyDown[a]=null;var h=this.__cbOnceOwnerUnbindKeyDown[a];this.__cbOnceOwnerUnbindKeyDown[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindKeyDown[a]),p.push(this.__cbOnceKeyDown[a])}this.__cbOnceOwnerUnbindKeyDown=o,this.__cbOnceKeyDown=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onKeyDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(null);null==this.__cbOnKeyDown&&(this.__cbOnKeyDown=[]),this.__cbOnKeyDown.push(e)},onceKeyDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(null);null==this.__cbOnceKeyDown&&(this.__cbOnceKeyDown=[]),this.__cbOnceKeyDown.push(e)},offKeyDown:function(n){if(null!=n){var e;null!=this.__cbOnKeyDown&&-1!=(e=this.__cbOnKeyDown.indexOf(n))&&(this.__cbOnKeyDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindKeyDown[e])&&l(),this.__cbOnOwnerUnbindKeyDown.splice(e,1)),null!=this.__cbOnceKeyDown&&-1!=(e=this.__cbOnceKeyDown.indexOf(n))&&(this.__cbOnceKeyDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindKeyDown[e])&&l(),this.__cbOnceOwnerUnbindKeyDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindKeyDown){for(var t=0,i=this.__cbOnOwnerUnbindKeyDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindKeyDown[r])&&l()}this.__cbOnOwnerUnbindKeyDown=null}if(null!=this.__cbOnceOwnerUnbindKeyDown){for(t=0,i=this.__cbOnceOwnerUnbindKeyDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindKeyDown[r])&&l()}this.__cbOnceOwnerUnbindKeyDown=null}this.__cbOnKeyDown=null,this.__cbOnceKeyDown=null}},listensKeyDown:function(){return null!=this.__cbOnKeyDown&&this.__cbOnKeyDown.length>0||null!=this.__cbOnceKeyDown&&this.__cbOnceKeyDown.length>0},emitKeyUp:function(n){var e=0;if(null!=this.__cbOnKeyUp&&(e+=this.__cbOnKeyUp.length),null!=this.__cbOnceKeyUp&&(e+=this.__cbOnceKeyUp.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnKeyUp)for(var l=0,s=this.__cbOnKeyUp.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnKeyUp[a],++r):--e}if(null!=this.__cbOnceKeyUp){var o=null,p=null;for(l=0,s=this.__cbOnceKeyUp.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceKeyUp[a],this.__cbOnceKeyUp[a]=null;var h=this.__cbOnceOwnerUnbindKeyUp[a];this.__cbOnceOwnerUnbindKeyUp[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindKeyUp[a]),p.push(this.__cbOnceKeyUp[a])}this.__cbOnceOwnerUnbindKeyUp=o,this.__cbOnceKeyUp=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onKeyUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(null);null==this.__cbOnKeyUp&&(this.__cbOnKeyUp=[]),this.__cbOnKeyUp.push(e)},onceKeyUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(null);null==this.__cbOnceKeyUp&&(this.__cbOnceKeyUp=[]),this.__cbOnceKeyUp.push(e)},offKeyUp:function(n){if(null!=n){var e;null!=this.__cbOnKeyUp&&-1!=(e=this.__cbOnKeyUp.indexOf(n))&&(this.__cbOnKeyUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindKeyUp[e])&&l(),this.__cbOnOwnerUnbindKeyUp.splice(e,1)),null!=this.__cbOnceKeyUp&&-1!=(e=this.__cbOnceKeyUp.indexOf(n))&&(this.__cbOnceKeyUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindKeyUp[e])&&l(),this.__cbOnceOwnerUnbindKeyUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindKeyUp){for(var t=0,i=this.__cbOnOwnerUnbindKeyUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindKeyUp[r])&&l()}this.__cbOnOwnerUnbindKeyUp=null}if(null!=this.__cbOnceOwnerUnbindKeyUp){for(t=0,i=this.__cbOnceOwnerUnbindKeyUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindKeyUp[r])&&l()}this.__cbOnceOwnerUnbindKeyUp=null}this.__cbOnKeyUp=null,this.__cbOnceKeyUp=null}},listensKeyUp:function(){return null!=this.__cbOnKeyUp&&this.__cbOnKeyUp.length>0||null!=this.__cbOnceKeyUp&&this.__cbOnceKeyUp.length>0},emitGamepadAxis:function(n,e,t){var i=0;if(null!=this.__cbOnGamepadAxis&&(i+=this.__cbOnGamepadAxis.length),null!=this.__cbOnceGamepadAxis&&(i+=this.__cbOnceGamepadAxis.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnGamepadAxis)for(var a=0,o=this.__cbOnGamepadAxis.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnGamepadAxis[p],++s):--i}if(null!=this.__cbOnceGamepadAxis){var h=null,u=null;for(a=0,o=this.__cbOnceGamepadAxis.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceGamepadAxis[p],this.__cbOnceGamepadAxis[p]=null;var _=this.__cbOnceOwnerUnbindGamepadAxis[p];this.__cbOnceOwnerUnbindGamepadAxis[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindGamepadAxis[p]),u.push(this.__cbOnceGamepadAxis[p])}this.__cbOnceOwnerUnbindGamepadAxis=h,this.__cbOnceGamepadAxis=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onGamepadAxis:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadAxis(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(null);null==this.__cbOnGamepadAxis&&(this.__cbOnGamepadAxis=[]),this.__cbOnGamepadAxis.push(e)},onceGamepadAxis:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadAxis(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(null);null==this.__cbOnceGamepadAxis&&(this.__cbOnceGamepadAxis=[]),this.__cbOnceGamepadAxis.push(e)},offGamepadAxis:function(n){if(null!=n){var e;null!=this.__cbOnGamepadAxis&&-1!=(e=this.__cbOnGamepadAxis.indexOf(n))&&(this.__cbOnGamepadAxis.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadAxis[e])&&l(),this.__cbOnOwnerUnbindGamepadAxis.splice(e,1)),null!=this.__cbOnceGamepadAxis&&-1!=(e=this.__cbOnceGamepadAxis.indexOf(n))&&(this.__cbOnceGamepadAxis.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadAxis[e])&&l(),this.__cbOnceOwnerUnbindGamepadAxis.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadAxis){for(var t=0,i=this.__cbOnOwnerUnbindGamepadAxis.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadAxis[r])&&l()}this.__cbOnOwnerUnbindGamepadAxis=null}if(null!=this.__cbOnceOwnerUnbindGamepadAxis){for(t=0,i=this.__cbOnceOwnerUnbindGamepadAxis.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadAxis[r])&&l()}this.__cbOnceOwnerUnbindGamepadAxis=null}this.__cbOnGamepadAxis=null,this.__cbOnceGamepadAxis=null}},listensGamepadAxis:function(){return null!=this.__cbOnGamepadAxis&&this.__cbOnGamepadAxis.length>0||null!=this.__cbOnceGamepadAxis&&this.__cbOnceGamepadAxis.length>0},emitGamepadDown:function(n,e){var t=0;if(null!=this.__cbOnGamepadDown&&(t+=this.__cbOnGamepadDown.length),null!=this.__cbOnceGamepadDown&&(t+=this.__cbOnceGamepadDown.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnGamepadDown)for(var s=0,a=this.__cbOnGamepadDown.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnGamepadDown[o],++l):--t}if(null!=this.__cbOnceGamepadDown){var p=null,h=null;for(s=0,a=this.__cbOnceGamepadDown.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceGamepadDown[o],this.__cbOnceGamepadDown[o]=null;var u=this.__cbOnceOwnerUnbindGamepadDown[o];this.__cbOnceOwnerUnbindGamepadDown[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindGamepadDown[o]),h.push(this.__cbOnceGamepadDown[o])}this.__cbOnceOwnerUnbindGamepadDown=p,this.__cbOnceGamepadDown=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onGamepadDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(null);null==this.__cbOnGamepadDown&&(this.__cbOnGamepadDown=[]),this.__cbOnGamepadDown.push(e)},onceGamepadDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(null);null==this.__cbOnceGamepadDown&&(this.__cbOnceGamepadDown=[]),this.__cbOnceGamepadDown.push(e)},offGamepadDown:function(n){if(null!=n){var e;null!=this.__cbOnGamepadDown&&-1!=(e=this.__cbOnGamepadDown.indexOf(n))&&(this.__cbOnGamepadDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadDown[e])&&l(),this.__cbOnOwnerUnbindGamepadDown.splice(e,1)),null!=this.__cbOnceGamepadDown&&-1!=(e=this.__cbOnceGamepadDown.indexOf(n))&&(this.__cbOnceGamepadDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadDown[e])&&l(),this.__cbOnceOwnerUnbindGamepadDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDown){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadDown[r])&&l()}this.__cbOnOwnerUnbindGamepadDown=null}if(null!=this.__cbOnceOwnerUnbindGamepadDown){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadDown[r])&&l()}this.__cbOnceOwnerUnbindGamepadDown=null}this.__cbOnGamepadDown=null,this.__cbOnceGamepadDown=null}},listensGamepadDown:function(){return null!=this.__cbOnGamepadDown&&this.__cbOnGamepadDown.length>0||null!=this.__cbOnceGamepadDown&&this.__cbOnceGamepadDown.length>0},emitGamepadUp:function(n,e){var t=0;if(null!=this.__cbOnGamepadUp&&(t+=this.__cbOnGamepadUp.length),null!=this.__cbOnceGamepadUp&&(t+=this.__cbOnceGamepadUp.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnGamepadUp)for(var s=0,a=this.__cbOnGamepadUp.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnGamepadUp[o],++l):--t}if(null!=this.__cbOnceGamepadUp){var p=null,h=null;for(s=0,a=this.__cbOnceGamepadUp.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceGamepadUp[o],this.__cbOnceGamepadUp[o]=null;var u=this.__cbOnceOwnerUnbindGamepadUp[o];this.__cbOnceOwnerUnbindGamepadUp[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindGamepadUp[o]),h.push(this.__cbOnceGamepadUp[o])}this.__cbOnceOwnerUnbindGamepadUp=p,this.__cbOnceGamepadUp=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onGamepadUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(null);null==this.__cbOnGamepadUp&&(this.__cbOnGamepadUp=[]),this.__cbOnGamepadUp.push(e)},onceGamepadUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(null);null==this.__cbOnceGamepadUp&&(this.__cbOnceGamepadUp=[]),this.__cbOnceGamepadUp.push(e)},offGamepadUp:function(n){if(null!=n){var e;null!=this.__cbOnGamepadUp&&-1!=(e=this.__cbOnGamepadUp.indexOf(n))&&(this.__cbOnGamepadUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadUp[e])&&l(),this.__cbOnOwnerUnbindGamepadUp.splice(e,1)),null!=this.__cbOnceGamepadUp&&-1!=(e=this.__cbOnceGamepadUp.indexOf(n))&&(this.__cbOnceGamepadUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadUp[e])&&l(),this.__cbOnceOwnerUnbindGamepadUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadUp){for(var t=0,i=this.__cbOnOwnerUnbindGamepadUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadUp[r])&&l()}this.__cbOnOwnerUnbindGamepadUp=null}if(null!=this.__cbOnceOwnerUnbindGamepadUp){for(t=0,i=this.__cbOnceOwnerUnbindGamepadUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadUp[r])&&l()}this.__cbOnceOwnerUnbindGamepadUp=null}this.__cbOnGamepadUp=null,this.__cbOnceGamepadUp=null}},listensGamepadUp:function(){return null!=this.__cbOnGamepadUp&&this.__cbOnGamepadUp.length>0||null!=this.__cbOnceGamepadUp&&this.__cbOnceGamepadUp.length>0},emitGamepadGyro:function(n,e,t,i){var r=0;if(null!=this.__cbOnGamepadGyro&&(r+=this.__cbOnGamepadGyro.length),null!=this.__cbOnceGamepadGyro&&(r+=this.__cbOnceGamepadGyro.length),r>0){var l=ceramic_ArrayPool.pool(r),s=l.get(),a=0;if(null!=this.__cbOnGamepadGyro)for(var o=0,p=this.__cbOnGamepadGyro.length;o<p;){var h=o++;!0?(s.vector[a]=this.__cbOnGamepadGyro[h],++a):--r}if(null!=this.__cbOnceGamepadGyro){var u=null,_=null;for(o=0,p=this.__cbOnceGamepadGyro.length;o<p;){h=o++;if(!0){s.vector[a]=this.__cbOnceGamepadGyro[h],this.__cbOnceGamepadGyro[h]=null;var c=this.__cbOnceOwnerUnbindGamepadGyro[h];this.__cbOnceOwnerUnbindGamepadGyro[h]=null,null!=c&&c(),++a}else--r,null==u&&(u=[],_=[],[]),u.push(this.__cbOnceOwnerUnbindGamepadGyro[h]),_.push(this.__cbOnceGamepadGyro[h])}this.__cbOnceOwnerUnbindGamepadGyro=u,this.__cbOnceGamepadGyro=_}for(o=0,p=r;o<p;){a=o++;(0,s.vector[a])(n,e,t,i)}l.release(s),s=null}},onGamepadGyro:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadGyro(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(null);null==this.__cbOnGamepadGyro&&(this.__cbOnGamepadGyro=[]),this.__cbOnGamepadGyro.push(e)},onceGamepadGyro:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadGyro(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(null);null==this.__cbOnceGamepadGyro&&(this.__cbOnceGamepadGyro=[]),this.__cbOnceGamepadGyro.push(e)},offGamepadGyro:function(n){if(null!=n){var e;null!=this.__cbOnGamepadGyro&&-1!=(e=this.__cbOnGamepadGyro.indexOf(n))&&(this.__cbOnGamepadGyro.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadGyro[e])&&l(),this.__cbOnOwnerUnbindGamepadGyro.splice(e,1)),null!=this.__cbOnceGamepadGyro&&-1!=(e=this.__cbOnceGamepadGyro.indexOf(n))&&(this.__cbOnceGamepadGyro.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadGyro[e])&&l(),this.__cbOnceOwnerUnbindGamepadGyro.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadGyro){for(var t=0,i=this.__cbOnOwnerUnbindGamepadGyro.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadGyro[r])&&l()}this.__cbOnOwnerUnbindGamepadGyro=null}if(null!=this.__cbOnceOwnerUnbindGamepadGyro){for(t=0,i=this.__cbOnceOwnerUnbindGamepadGyro.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadGyro[r])&&l()}this.__cbOnceOwnerUnbindGamepadGyro=null}this.__cbOnGamepadGyro=null,this.__cbOnceGamepadGyro=null}},listensGamepadGyro:function(){return null!=this.__cbOnGamepadGyro&&this.__cbOnGamepadGyro.length>0||null!=this.__cbOnceGamepadGyro&&this.__cbOnceGamepadGyro.length>0},emitGamepadEnable:function(n,e){var t=0;if(null!=this.__cbOnGamepadEnable&&(t+=this.__cbOnGamepadEnable.length),null!=this.__cbOnceGamepadEnable&&(t+=this.__cbOnceGamepadEnable.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnGamepadEnable)for(var s=0,a=this.__cbOnGamepadEnable.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnGamepadEnable[o],++l):--t}if(null!=this.__cbOnceGamepadEnable){var p=null,h=null;for(s=0,a=this.__cbOnceGamepadEnable.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceGamepadEnable[o],this.__cbOnceGamepadEnable[o]=null;var u=this.__cbOnceOwnerUnbindGamepadEnable[o];this.__cbOnceOwnerUnbindGamepadEnable[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindGamepadEnable[o]),h.push(this.__cbOnceGamepadEnable[o])}this.__cbOnceOwnerUnbindGamepadEnable=p,this.__cbOnceGamepadEnable=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onGamepadEnable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadEnable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(null);null==this.__cbOnGamepadEnable&&(this.__cbOnGamepadEnable=[]),this.__cbOnGamepadEnable.push(e)},onceGamepadEnable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadEnable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(null);null==this.__cbOnceGamepadEnable&&(this.__cbOnceGamepadEnable=[]),this.__cbOnceGamepadEnable.push(e)},offGamepadEnable:function(n){if(null!=n){var e;null!=this.__cbOnGamepadEnable&&-1!=(e=this.__cbOnGamepadEnable.indexOf(n))&&(this.__cbOnGamepadEnable.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadEnable[e])&&l(),this.__cbOnOwnerUnbindGamepadEnable.splice(e,1)),null!=this.__cbOnceGamepadEnable&&-1!=(e=this.__cbOnceGamepadEnable.indexOf(n))&&(this.__cbOnceGamepadEnable.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadEnable[e])&&l(),this.__cbOnceOwnerUnbindGamepadEnable.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadEnable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadEnable.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadEnable[r])&&l()}this.__cbOnOwnerUnbindGamepadEnable=null}if(null!=this.__cbOnceOwnerUnbindGamepadEnable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadEnable.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadEnable[r])&&l()}this.__cbOnceOwnerUnbindGamepadEnable=null}this.__cbOnGamepadEnable=null,this.__cbOnceGamepadEnable=null}},listensGamepadEnable:function(){return null!=this.__cbOnGamepadEnable&&this.__cbOnGamepadEnable.length>0||null!=this.__cbOnceGamepadEnable&&this.__cbOnceGamepadEnable.length>0},emitGamepadDisable:function(n){var e=0;if(null!=this.__cbOnGamepadDisable&&(e+=this.__cbOnGamepadDisable.length),null!=this.__cbOnceGamepadDisable&&(e+=this.__cbOnceGamepadDisable.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnGamepadDisable)for(var l=0,s=this.__cbOnGamepadDisable.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnGamepadDisable[a],++r):--e}if(null!=this.__cbOnceGamepadDisable){var o=null,p=null;for(l=0,s=this.__cbOnceGamepadDisable.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceGamepadDisable[a],this.__cbOnceGamepadDisable[a]=null;var h=this.__cbOnceOwnerUnbindGamepadDisable[a];this.__cbOnceOwnerUnbindGamepadDisable[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindGamepadDisable[a]),p.push(this.__cbOnceGamepadDisable[a])}this.__cbOnceOwnerUnbindGamepadDisable=o,this.__cbOnceGamepadDisable=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onGamepadDisable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDisable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(null);null==this.__cbOnGamepadDisable&&(this.__cbOnGamepadDisable=[]),this.__cbOnGamepadDisable.push(e)},onceGamepadDisable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDisable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(null);null==this.__cbOnceGamepadDisable&&(this.__cbOnceGamepadDisable=[]),this.__cbOnceGamepadDisable.push(e)},offGamepadDisable:function(n){if(null!=n){var e;null!=this.__cbOnGamepadDisable&&-1!=(e=this.__cbOnGamepadDisable.indexOf(n))&&(this.__cbOnGamepadDisable.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadDisable[e])&&l(),this.__cbOnOwnerUnbindGamepadDisable.splice(e,1)),null!=this.__cbOnceGamepadDisable&&-1!=(e=this.__cbOnceGamepadDisable.indexOf(n))&&(this.__cbOnceGamepadDisable.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadDisable[e])&&l(),this.__cbOnceOwnerUnbindGamepadDisable.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDisable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDisable.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadDisable[r])&&l()}this.__cbOnOwnerUnbindGamepadDisable=null}if(null!=this.__cbOnceOwnerUnbindGamepadDisable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDisable.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadDisable[r])&&l()}this.__cbOnceOwnerUnbindGamepadDisable=null}this.__cbOnGamepadDisable=null,this.__cbOnceGamepadDisable=null}},listensGamepadDisable:function(){return null!=this.__cbOnGamepadDisable&&this.__cbOnGamepadDisable.length>0||null!=this.__cbOnceGamepadDisable&&this.__cbOnceGamepadDisable.length>0},startGamepadRumble:function(n,e,t,i){clay_Clay.app.runtime.startGamepadRumble(n,e,t,i)},stopGamepadRumble:function(n){clay_Clay.app.runtime.stopGamepadRumble(n)},unbindEvents:function(){this.offKeyDown(),this.offKeyUp(),this.offGamepadAxis(),this.offGamepadDown(),this.offGamepadUp(),this.offGamepadGyro(),this.offGamepadEnable(),this.offGamepadDisable()},__class__:backend_Input};var spec_Screen=function(){};t["spec.Screen"]=spec_Screen,spec_Screen.__name__="spec.Screen",spec_Screen.__isInterface__=!0,spec_Screen.prototype={__class__:spec_Screen};var backend_Screen=function(){this.nextScreenshotIndex=0,this.didTryResumeAudioContext=!1};t["backend.Screen"]=backend_Screen,backend_Screen.__name__="backend.Screen",backend_Screen.__interfaces__=[spec_Screen,tracker_Events],backend_Screen.prototype={emitResize:function(){var n=0;if(null!=this.__cbOnResize&&(n+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(n+=this.__cbOnceResize.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnResize)for(var r=0,l=this.__cbOnResize.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnResize[s],++i):--n}if(null!=this.__cbOnceResize){var a=null,o=null;for(r=0,l=this.__cbOnceResize.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceResize[s],this.__cbOnceResize[s]=null;var p=this.__cbOnceOwnerUnbindResize[s];this.__cbOnceOwnerUnbindResize[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindResize[s]),o.push(this.__cbOnceResize[s])}this.__cbOnceOwnerUnbindResize=a,this.__cbOnceResize=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onResize:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event resize because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offResize(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(e)},onceResize:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event resize because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offResize(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(e)},offResize:function(n){if(null!=n){var e;null!=this.__cbOnResize&&-1!=(e=this.__cbOnResize.indexOf(n))&&(this.__cbOnResize.splice(e,1),null!=(l=this.__cbOnOwnerUnbindResize[e])&&l(),this.__cbOnOwnerUnbindResize.splice(e,1)),null!=this.__cbOnceResize&&-1!=(e=this.__cbOnceResize.indexOf(n))&&(this.__cbOnceResize.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindResize[e])&&l(),this.__cbOnceOwnerUnbindResize.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindResize[r])&&l()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindResize[r])&&l()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&this.__cbOnResize.length>0||null!=this.__cbOnceResize&&this.__cbOnceResize.length>0},emitMouseDown:function(n,e,t){this.tryResumeAudioContextIfNeeded();var i=0;if(null!=this.__cbOnMouseDown&&(i+=this.__cbOnMouseDown.length),null!=this.__cbOnceMouseDown&&(i+=this.__cbOnceMouseDown.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnMouseDown)for(var a=0,o=this.__cbOnMouseDown.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnMouseDown[p],++s):--i}if(null!=this.__cbOnceMouseDown){var h=null,u=null;for(a=0,o=this.__cbOnceMouseDown.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceMouseDown[p],this.__cbOnceMouseDown[p]=null;var _=this.__cbOnceOwnerUnbindMouseDown[p];this.__cbOnceOwnerUnbindMouseDown[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindMouseDown[p]),u.push(this.__cbOnceMouseDown[p])}this.__cbOnceOwnerUnbindMouseDown=h,this.__cbOnceMouseDown=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onMouseDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(null);null==this.__cbOnMouseDown&&(this.__cbOnMouseDown=[]),this.__cbOnMouseDown.push(e)},onceMouseDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(null);null==this.__cbOnceMouseDown&&(this.__cbOnceMouseDown=[]),this.__cbOnceMouseDown.push(e)},offMouseDown:function(n){if(null!=n){var e;null!=this.__cbOnMouseDown&&-1!=(e=this.__cbOnMouseDown.indexOf(n))&&(this.__cbOnMouseDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseDown[e])&&l(),this.__cbOnOwnerUnbindMouseDown.splice(e,1)),null!=this.__cbOnceMouseDown&&-1!=(e=this.__cbOnceMouseDown.indexOf(n))&&(this.__cbOnceMouseDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseDown[e])&&l(),this.__cbOnceOwnerUnbindMouseDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseDown){for(var t=0,i=this.__cbOnOwnerUnbindMouseDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseDown[r])&&l()}this.__cbOnOwnerUnbindMouseDown=null}if(null!=this.__cbOnceOwnerUnbindMouseDown){for(t=0,i=this.__cbOnceOwnerUnbindMouseDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseDown[r])&&l()}this.__cbOnceOwnerUnbindMouseDown=null}this.__cbOnMouseDown=null,this.__cbOnceMouseDown=null}},listensMouseDown:function(){return null!=this.__cbOnMouseDown&&this.__cbOnMouseDown.length>0||null!=this.__cbOnceMouseDown&&this.__cbOnceMouseDown.length>0},emitMouseUp:function(n,e,t){var i=0;if(null!=this.__cbOnMouseUp&&(i+=this.__cbOnMouseUp.length),null!=this.__cbOnceMouseUp&&(i+=this.__cbOnceMouseUp.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnMouseUp)for(var a=0,o=this.__cbOnMouseUp.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnMouseUp[p],++s):--i}if(null!=this.__cbOnceMouseUp){var h=null,u=null;for(a=0,o=this.__cbOnceMouseUp.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceMouseUp[p],this.__cbOnceMouseUp[p]=null;var _=this.__cbOnceOwnerUnbindMouseUp[p];this.__cbOnceOwnerUnbindMouseUp[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindMouseUp[p]),u.push(this.__cbOnceMouseUp[p])}this.__cbOnceOwnerUnbindMouseUp=h,this.__cbOnceMouseUp=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onMouseUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(null);null==this.__cbOnMouseUp&&(this.__cbOnMouseUp=[]),this.__cbOnMouseUp.push(e)},onceMouseUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(null);null==this.__cbOnceMouseUp&&(this.__cbOnceMouseUp=[]),this.__cbOnceMouseUp.push(e)},offMouseUp:function(n){if(null!=n){var e;null!=this.__cbOnMouseUp&&-1!=(e=this.__cbOnMouseUp.indexOf(n))&&(this.__cbOnMouseUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseUp[e])&&l(),this.__cbOnOwnerUnbindMouseUp.splice(e,1)),null!=this.__cbOnceMouseUp&&-1!=(e=this.__cbOnceMouseUp.indexOf(n))&&(this.__cbOnceMouseUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseUp[e])&&l(),this.__cbOnceOwnerUnbindMouseUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseUp){for(var t=0,i=this.__cbOnOwnerUnbindMouseUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseUp[r])&&l()}this.__cbOnOwnerUnbindMouseUp=null}if(null!=this.__cbOnceOwnerUnbindMouseUp){for(t=0,i=this.__cbOnceOwnerUnbindMouseUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseUp[r])&&l()}this.__cbOnceOwnerUnbindMouseUp=null}this.__cbOnMouseUp=null,this.__cbOnceMouseUp=null}},listensMouseUp:function(){return null!=this.__cbOnMouseUp&&this.__cbOnMouseUp.length>0||null!=this.__cbOnceMouseUp&&this.__cbOnceMouseUp.length>0},emitMouseWheel:function(n,e){var t=0;if(null!=this.__cbOnMouseWheel&&(t+=this.__cbOnMouseWheel.length),null!=this.__cbOnceMouseWheel&&(t+=this.__cbOnceMouseWheel.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnMouseWheel)for(var s=0,a=this.__cbOnMouseWheel.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnMouseWheel[o],++l):--t}if(null!=this.__cbOnceMouseWheel){var p=null,h=null;for(s=0,a=this.__cbOnceMouseWheel.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceMouseWheel[o],this.__cbOnceMouseWheel[o]=null;var u=this.__cbOnceOwnerUnbindMouseWheel[o];this.__cbOnceOwnerUnbindMouseWheel[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindMouseWheel[o]),h.push(this.__cbOnceMouseWheel[o])}this.__cbOnceOwnerUnbindMouseWheel=p,this.__cbOnceMouseWheel=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onMouseWheel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseWheel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseWheel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(null);null==this.__cbOnMouseWheel&&(this.__cbOnMouseWheel=[]),this.__cbOnMouseWheel.push(e)},onceMouseWheel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseWheel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseWheel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(null);null==this.__cbOnceMouseWheel&&(this.__cbOnceMouseWheel=[]),this.__cbOnceMouseWheel.push(e)},offMouseWheel:function(n){if(null!=n){var e;null!=this.__cbOnMouseWheel&&-1!=(e=this.__cbOnMouseWheel.indexOf(n))&&(this.__cbOnMouseWheel.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseWheel[e])&&l(),this.__cbOnOwnerUnbindMouseWheel.splice(e,1)),null!=this.__cbOnceMouseWheel&&-1!=(e=this.__cbOnceMouseWheel.indexOf(n))&&(this.__cbOnceMouseWheel.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseWheel[e])&&l(),this.__cbOnceOwnerUnbindMouseWheel.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseWheel){for(var t=0,i=this.__cbOnOwnerUnbindMouseWheel.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseWheel[r])&&l()}this.__cbOnOwnerUnbindMouseWheel=null}if(null!=this.__cbOnceOwnerUnbindMouseWheel){for(t=0,i=this.__cbOnceOwnerUnbindMouseWheel.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseWheel[r])&&l()}this.__cbOnceOwnerUnbindMouseWheel=null}this.__cbOnMouseWheel=null,this.__cbOnceMouseWheel=null}},listensMouseWheel:function(){return null!=this.__cbOnMouseWheel&&this.__cbOnMouseWheel.length>0||null!=this.__cbOnceMouseWheel&&this.__cbOnceMouseWheel.length>0},emitMouseMove:function(n,e){var t=0;if(null!=this.__cbOnMouseMove&&(t+=this.__cbOnMouseMove.length),null!=this.__cbOnceMouseMove&&(t+=this.__cbOnceMouseMove.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnMouseMove)for(var s=0,a=this.__cbOnMouseMove.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnMouseMove[o],++l):--t}if(null!=this.__cbOnceMouseMove){var p=null,h=null;for(s=0,a=this.__cbOnceMouseMove.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceMouseMove[o],this.__cbOnceMouseMove[o]=null;var u=this.__cbOnceOwnerUnbindMouseMove[o];this.__cbOnceOwnerUnbindMouseMove[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindMouseMove[o]),h.push(this.__cbOnceMouseMove[o])}this.__cbOnceOwnerUnbindMouseMove=p,this.__cbOnceMouseMove=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onMouseMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(null);null==this.__cbOnMouseMove&&(this.__cbOnMouseMove=[]),this.__cbOnMouseMove.push(e)},onceMouseMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(null);null==this.__cbOnceMouseMove&&(this.__cbOnceMouseMove=[]),this.__cbOnceMouseMove.push(e)},offMouseMove:function(n){if(null!=n){var e;null!=this.__cbOnMouseMove&&-1!=(e=this.__cbOnMouseMove.indexOf(n))&&(this.__cbOnMouseMove.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseMove[e])&&l(),this.__cbOnOwnerUnbindMouseMove.splice(e,1)),null!=this.__cbOnceMouseMove&&-1!=(e=this.__cbOnceMouseMove.indexOf(n))&&(this.__cbOnceMouseMove.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseMove[e])&&l(),this.__cbOnceOwnerUnbindMouseMove.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseMove){for(var t=0,i=this.__cbOnOwnerUnbindMouseMove.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseMove[r])&&l()}this.__cbOnOwnerUnbindMouseMove=null}if(null!=this.__cbOnceOwnerUnbindMouseMove){for(t=0,i=this.__cbOnceOwnerUnbindMouseMove.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseMove[r])&&l()}this.__cbOnceOwnerUnbindMouseMove=null}this.__cbOnMouseMove=null,this.__cbOnceMouseMove=null}},listensMouseMove:function(){return null!=this.__cbOnMouseMove&&this.__cbOnMouseMove.length>0||null!=this.__cbOnceMouseMove&&this.__cbOnceMouseMove.length>0},emitTouchDown:function(n,e,t){this.tryResumeAudioContextIfNeeded();var i=0;if(null!=this.__cbOnTouchDown&&(i+=this.__cbOnTouchDown.length),null!=this.__cbOnceTouchDown&&(i+=this.__cbOnceTouchDown.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnTouchDown)for(var a=0,o=this.__cbOnTouchDown.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnTouchDown[p],++s):--i}if(null!=this.__cbOnceTouchDown){var h=null,u=null;for(a=0,o=this.__cbOnceTouchDown.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceTouchDown[p],this.__cbOnceTouchDown[p]=null;var _=this.__cbOnceOwnerUnbindTouchDown[p];this.__cbOnceOwnerUnbindTouchDown[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindTouchDown[p]),u.push(this.__cbOnceTouchDown[p])}this.__cbOnceOwnerUnbindTouchDown=h,this.__cbOnceTouchDown=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onTouchDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(null);null==this.__cbOnTouchDown&&(this.__cbOnTouchDown=[]),this.__cbOnTouchDown.push(e)},onceTouchDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(null);null==this.__cbOnceTouchDown&&(this.__cbOnceTouchDown=[]),this.__cbOnceTouchDown.push(e)},offTouchDown:function(n){if(null!=n){var e;null!=this.__cbOnTouchDown&&-1!=(e=this.__cbOnTouchDown.indexOf(n))&&(this.__cbOnTouchDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTouchDown[e])&&l(),this.__cbOnOwnerUnbindTouchDown.splice(e,1)),null!=this.__cbOnceTouchDown&&-1!=(e=this.__cbOnceTouchDown.indexOf(n))&&(this.__cbOnceTouchDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTouchDown[e])&&l(),this.__cbOnceOwnerUnbindTouchDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTouchDown){for(var t=0,i=this.__cbOnOwnerUnbindTouchDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTouchDown[r])&&l()}this.__cbOnOwnerUnbindTouchDown=null}if(null!=this.__cbOnceOwnerUnbindTouchDown){for(t=0,i=this.__cbOnceOwnerUnbindTouchDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTouchDown[r])&&l()}this.__cbOnceOwnerUnbindTouchDown=null}this.__cbOnTouchDown=null,this.__cbOnceTouchDown=null}},listensTouchDown:function(){return null!=this.__cbOnTouchDown&&this.__cbOnTouchDown.length>0||null!=this.__cbOnceTouchDown&&this.__cbOnceTouchDown.length>0},emitTouchUp:function(n,e,t){var i=0;if(null!=this.__cbOnTouchUp&&(i+=this.__cbOnTouchUp.length),null!=this.__cbOnceTouchUp&&(i+=this.__cbOnceTouchUp.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnTouchUp)for(var a=0,o=this.__cbOnTouchUp.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnTouchUp[p],++s):--i}if(null!=this.__cbOnceTouchUp){var h=null,u=null;for(a=0,o=this.__cbOnceTouchUp.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceTouchUp[p],this.__cbOnceTouchUp[p]=null;var _=this.__cbOnceOwnerUnbindTouchUp[p];this.__cbOnceOwnerUnbindTouchUp[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindTouchUp[p]),u.push(this.__cbOnceTouchUp[p])}this.__cbOnceOwnerUnbindTouchUp=h,this.__cbOnceTouchUp=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onTouchUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(null);null==this.__cbOnTouchUp&&(this.__cbOnTouchUp=[]),this.__cbOnTouchUp.push(e)},onceTouchUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(null);null==this.__cbOnceTouchUp&&(this.__cbOnceTouchUp=[]),this.__cbOnceTouchUp.push(e)},offTouchUp:function(n){if(null!=n){var e;null!=this.__cbOnTouchUp&&-1!=(e=this.__cbOnTouchUp.indexOf(n))&&(this.__cbOnTouchUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTouchUp[e])&&l(),this.__cbOnOwnerUnbindTouchUp.splice(e,1)),null!=this.__cbOnceTouchUp&&-1!=(e=this.__cbOnceTouchUp.indexOf(n))&&(this.__cbOnceTouchUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTouchUp[e])&&l(),this.__cbOnceOwnerUnbindTouchUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTouchUp){for(var t=0,i=this.__cbOnOwnerUnbindTouchUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTouchUp[r])&&l()}this.__cbOnOwnerUnbindTouchUp=null}if(null!=this.__cbOnceOwnerUnbindTouchUp){for(t=0,i=this.__cbOnceOwnerUnbindTouchUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTouchUp[r])&&l()}this.__cbOnceOwnerUnbindTouchUp=null}this.__cbOnTouchUp=null,this.__cbOnceTouchUp=null}},listensTouchUp:function(){return null!=this.__cbOnTouchUp&&this.__cbOnTouchUp.length>0||null!=this.__cbOnceTouchUp&&this.__cbOnceTouchUp.length>0},emitTouchMove:function(n,e,t){var i=0;if(null!=this.__cbOnTouchMove&&(i+=this.__cbOnTouchMove.length),null!=this.__cbOnceTouchMove&&(i+=this.__cbOnceTouchMove.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnTouchMove)for(var a=0,o=this.__cbOnTouchMove.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnTouchMove[p],++s):--i}if(null!=this.__cbOnceTouchMove){var h=null,u=null;for(a=0,o=this.__cbOnceTouchMove.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceTouchMove[p],this.__cbOnceTouchMove[p]=null;var _=this.__cbOnceOwnerUnbindTouchMove[p];this.__cbOnceOwnerUnbindTouchMove[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindTouchMove[p]),u.push(this.__cbOnceTouchMove[p])}this.__cbOnceOwnerUnbindTouchMove=h,this.__cbOnceTouchMove=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onTouchMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(null);null==this.__cbOnTouchMove&&(this.__cbOnTouchMove=[]),this.__cbOnTouchMove.push(e)},onceTouchMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(null);null==this.__cbOnceTouchMove&&(this.__cbOnceTouchMove=[]),this.__cbOnceTouchMove.push(e)},offTouchMove:function(n){if(null!=n){var e;null!=this.__cbOnTouchMove&&-1!=(e=this.__cbOnTouchMove.indexOf(n))&&(this.__cbOnTouchMove.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTouchMove[e])&&l(),this.__cbOnOwnerUnbindTouchMove.splice(e,1)),null!=this.__cbOnceTouchMove&&-1!=(e=this.__cbOnceTouchMove.indexOf(n))&&(this.__cbOnceTouchMove.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTouchMove[e])&&l(),this.__cbOnceOwnerUnbindTouchMove.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTouchMove){for(var t=0,i=this.__cbOnOwnerUnbindTouchMove.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTouchMove[r])&&l()}this.__cbOnOwnerUnbindTouchMove=null}if(null!=this.__cbOnceOwnerUnbindTouchMove){for(t=0,i=this.__cbOnceOwnerUnbindTouchMove.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTouchMove[r])&&l()}this.__cbOnceOwnerUnbindTouchMove=null}this.__cbOnTouchMove=null,this.__cbOnceTouchMove=null}},listensTouchMove:function(){return null!=this.__cbOnTouchMove&&this.__cbOnTouchMove.length>0||null!=this.__cbOnceTouchMove&&this.__cbOnceTouchMove.length>0},willEmitMouseDown:function(n,e,t){this.tryResumeAudioContextIfNeeded()},willEmitTouchDown:function(n,e,t){this.tryResumeAudioContextIfNeeded()},tryResumeAudioContextIfNeeded:function(){this.didTryResumeAudioContext||(this.didTryResumeAudioContext=!0,ceramic_App.app.backend.audio.resumeAudioContext((function(n){n?ceramic_App.app.logger.success("Did resume audio context",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Screen.hx",lineNumber:51,className:"backend.Screen",methodName:"tryResumeAudioContextIfNeeded"}):ceramic_App.app.logger.error("Failed to resume audio context",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Screen.hx",lineNumber:54,className:"backend.Screen",methodName:"tryResumeAudioContextIfNeeded"})})))},getWidth:function(){return clay_Clay.app.screenWidth},getHeight:function(){return clay_Clay.app.screenHeight},getDensity:function(){return clay_Clay.app.screenDensity},setBackground:function(n){},setWindowTitle:function(n){clay_Clay.app.runtime.setWindowTitle(n)},setWindowFullscreen:function(n){null==backend_ElectronRunner.electronRunner||null==backend_ElectronRunner.electronRunner.setFullscreen?clay_Clay.app.runtime.setWindowFullscreen(n)||ceramic_App.app.settings.set_fullscreen(!n):backend_ElectronRunner.electronRunner.setFullscreen(n)},screenshotToTexture:function(n){var e=this;clay_Clay.app.runtime.window.toBlob((function(t){t.arrayBuffer().then((function(t){var i=new Uint8Array(t,0,t.byteLength);clay_Clay.app.assets.imageFromBytes(i,"png",4,!0,(function(t){if(null!=t){var i="screenshot:"+e.nextScreenshotIndex++,r=clay_graphics_Texture.fromImage(t);r.id=i,r.init(),n(r)}else n(null)}))}))}),"image/png")},screenshotToPng:function(n,e){clay_Clay.app.runtime.window.toBlob((function(t){t.arrayBuffer().then((function(t){var i=new haxe_io_Bytes(new Uint8Array(new Uint8Array(t,0,t.byteLength).buffer));null!=n?(ceramic_Files.saveBytes(n,i),e()):e(i)}))}),"image/png")},screenshotToPixels:function(n){clay_Clay.app.runtime.window.toBlob((function(e){e.arrayBuffer().then((function(e){var t=new Uint8Array(e,0,e.byteLength);clay_Clay.app.assets.imageFromBytes(t,"png",4,!1,(function(e){null!=e?n(e.pixels,e.width,e.height):n(null,0,0)}))}))}),"image/png")},unbindEvents:function(){this.offResize(),this.offMouseDown(),this.offMouseUp(),this.offMouseWheel(),this.offMouseMove(),this.offTouchDown(),this.offTouchUp(),this.offTouchMove()},__class__:backend_Screen};var clay_Resource=function(){this.id=null};t["clay.Resource"]=clay_Resource,clay_Resource.__name__="clay.Resource",clay_Resource.prototype={__class__:clay_Resource};var clay_graphics_Shader=function(){this.gpuShader=null,this.uniforms=null,this.textures=null,this.attributes=null,this.fragSource=null,this.vertSource=null,clay_Resource.call(this)};t["clay.graphics.Shader"]=clay_graphics_Shader,clay_graphics_Shader.__name__="clay.graphics.Shader",clay_graphics_Shader.__super__=clay_Resource,clay_graphics_Shader.prototype=$extend(clay_Resource.prototype,{init:function(){if(this.gpuShader=clay_opengl_GLGraphics.createShader(this.vertSource,this.fragSource,this.attributes,this.textures),null==this.gpuShader)throw haxe_Exception.thrown("Failed to create shader (id="+this.id+")");this.uniforms=new clay_graphics_Uniforms(this.gpuShader)},activate:function(){var n=this.gpuShader;clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),null!=this.uniforms&&this.uniforms.apply()},destroy:function(){clay_opengl_GLGraphics.deleteShader(this.gpuShader)},__class__:clay_graphics_Shader});var backend_ShaderImpl=function(){this.isBatchingMultiTexture=!1,this.customAttributes=null,clay_graphics_Shader.call(this)};t["backend.ShaderImpl"]=backend_ShaderImpl,backend_ShaderImpl.__name__="backend.ShaderImpl",backend_ShaderImpl.__super__=clay_graphics_Shader,backend_ShaderImpl.prototype=$extend(clay_graphics_Shader.prototype,{clone:function(){var n=new backend_ShaderImpl;return n.vertSource=this.vertSource,n.fragSource=this.fragSource,n.customAttributes=this.customAttributes,n.isBatchingMultiTexture=this.isBatchingMultiTexture,n.attributes=this.attributes,n.textures=this.textures,n.init(),n},__class__:backend_ShaderImpl});var spec_Shaders=function(){};t["spec.Shaders"]=spec_Shaders,spec_Shaders.__name__="spec.Shaders",spec_Shaders.__isInterface__=!0,spec_Shaders.prototype={__class__:spec_Shaders};var backend_Shaders=function(){};t["backend.Shaders"]=backend_Shaders,backend_Shaders.__name__="backend.Shaders",backend_Shaders.__interfaces__=[spec_Shaders],backend_Shaders.processMultiTextureVertTemplate=function(n,e,t){for(var i=n.split("\n"),r=[],l=0,s=i.length;l<s;){var a=i[l++],o=StringTools.replace(StringTools.trim(a)," ","").toLowerCase();"//ceramic:multitexture/vertextextureid"==o?r.push("attribute float vertexTextureId;"):"//ceramic:multitexture/textureid"==o?r.push("varying float textureId;"):"//ceramic:multitexture/assigntextureid"==o?r.push("textureId = vertexTextureId;"):r.push(a)}return r.join("\n")},backend_Shaders.processMultiTextureFragTemplate=function(n,e,t){for(var i=0|Math.min(e,t),r=n.split("\n"),l=[],s=!1,a=!1,o=[],p=0,h=r.length;p<h;){var u=r[p++],_=StringTools.replace(StringTools.trim(u)," ","").toLowerCase();if(s){s=!1;for(var c=0,d=i;c<d;){var f=c++;0==f?l.push(u):l.push(StringTools.replace(u,"tex0","tex"+f))}}else if(a)if("//ceramic:multitexture/endif"==_){if(a=!1,o.length>0)for(var x=0,b=i;x<b;){var y=x++;0==y?l.push("if (textureId == 0.0) {"):l.push("else if (textureId == "+y+".0) {");for(var v=0,m=o.length;v<m;){var g=v++;0==y?l.push(o[g]):l.push(StringTools.replace(o[g],"tex0","tex"+y))}l.push("}")}}else o.push(u);else StringTools.startsWith(_,"//ceramic:multitexture")?"//ceramic:multitexture/texture"==_?s=!0:"//ceramic:multitexture/textureid"==_?l.push("varying float textureId;"):"//ceramic:multitexture/if"==_&&(a=!0):l.push(u)}return l.join("\n")},backend_Shaders.computeMaxIfStatementsByFragmentShaderIfNeeded=function(n){if(null==n&&(n=32),-1==backend_Shaders._maxIfStatementsByFragmentShader){for(var e=StringTools.trim("\n#ifdef GL_ES\nprecision mediump float;\n#else\n#define mediump\n#endif\nvarying float test;\nvoid main() {\n    {{CONDITIONS}}\n    gl_FragColor = vec4(0.0);\n}\n"),t=clay_opengl_web_GL.gl.createShader(35632);n>0;){var i=StringTools.replace(e,"{{CONDITIONS}}",backend_Shaders.generateIfStatements(n));if(clay_opengl_web_GL.gl.shaderSource(t,i),clay_opengl_web_GL.gl.compileShader(t),0!=clay_opengl_web_GL.gl.getShaderParameter(t,35713)){backend_Shaders._maxIfStatementsByFragmentShader=n;break}n=n/2|0}clay_opengl_web_GL.gl.deleteShader(t)}},backend_Shaders.generateIfStatements=function(n){for(var e="",t=0,i=n;t<i;){var r=t++;r>0&&(e+="\nelse "),r<n-1&&(e+=Std.string("if (test == "+r+".0) {}"))}return e},backend_Shaders.prototype={fromSource:function(n,e,t){for(var i=!1,r=0,l=e.split("\n");r<l.length;){var s=l[r];if(++r,"//ceramic:multitexture"==StringTools.replace(StringTools.trim(s)," ","").toLowerCase()){i=!0;break}}var a=["tex0"];if(i){var o=ceramic_App.app.backend.textures.maxTexturesByBatch(),p=this.maxIfStatementsByFragmentShader(),h=0|Math.min(o,p);if(h>1)for(var u=1;u<=h;)a.push("tex"+u),++u;e=backend_Shaders.processMultiTextureFragTemplate(e,o,p),n=backend_Shaders.processMultiTextureVertTemplate(n,o,p)}var _=new backend_ShaderImpl;return _.attributes=i?backend_Shaders.SHADER_ATTRIBUTES_MULTITEXTURE:backend_Shaders.SHADER_ATTRIBUTES,_.textures=a,_.vertSource=n,_.fragSource=e,_.isBatchingMultiTexture=i,_.customAttributes=t,_.init(),_},destroy:function(n){n.destroy()},clone:function(n){return n.clone()},setInt:function(n,e,t){n.uniforms.setInt(e,t)},setFloat:function(n,e,t){n.uniforms.setFloat(e,t)},setColor:function(n,e,t,i,r,l){n.uniforms.setColor(e,t,i,r,l)},setVec2:function(n,e,t,i){n.uniforms.setVector2(e,t,i)},setVec3:function(n,e,t,i,r){n.uniforms.setVector3(e,t,i,r)},setVec4:function(n,e,t,i,r,l){n.uniforms.setVector4(e,t,i,r,l)},setFloatArray:function(n,e,t){n.uniforms.setFloatArray(e,new Float32Array(t))},setTexture:function(n,e,t,i){n.uniforms.setTexture(e,t,i)},setMat4FromTransform:function(n,e,t){n.uniforms.setMatrix4(e,new Float32Array([t.a,t.b,0,0,t.c,t.d,0,0,0,0,1,0,t.tx,t.ty,0,1]))},customFloatAttributesSize:function(n){var e=0,t=n.customAttributes;if(null!=t)for(var i=0,r=t.length;i<r;){e+=t[i++].size}return e},maxIfStatementsByFragmentShader:function(){var n=32;if(-1==backend_Shaders._maxIfStatementsByFragmentShader){for(var e=StringTools.trim("\n#ifdef GL_ES\nprecision mediump float;\n#else\n#define mediump\n#endif\nvarying float test;\nvoid main() {\n    {{CONDITIONS}}\n    gl_FragColor = vec4(0.0);\n}\n"),t=clay_opengl_web_GL.gl.createShader(35632);n>0;){var i=StringTools.replace(e,"{{CONDITIONS}}",backend_Shaders.generateIfStatements(n));if(clay_opengl_web_GL.gl.shaderSource(t,i),clay_opengl_web_GL.gl.compileShader(t),0!=clay_opengl_web_GL.gl.getShaderParameter(t,35713)){backend_Shaders._maxIfStatementsByFragmentShader=n;break}n=n/2|0}clay_opengl_web_GL.gl.deleteShader(t)}return backend_Shaders._maxIfStatementsByFragmentShader},canBatchWithMultipleTextures:function(n){return n.isBatchingMultiTexture},__class__:backend_Shaders};var spec_TextInput=function(){};t["spec.TextInput"]=spec_TextInput,spec_TextInput.__name__="spec.TextInput",spec_TextInput.__isInterface__=!0,spec_TextInput.prototype={__class__:spec_TextInput};var backend_TextInput=function(){this.inputRectH=0,this.inputRectW=0,this.inputRectY=0,this.inputRectX=0,this.inputActive=!1};t["backend.TextInput"]=backend_TextInput,backend_TextInput.__name__="backend.TextInput",backend_TextInput.__interfaces__=[spec_TextInput],backend_TextInput.prototype={start:function(n,e,t,i,r){this.inputActive||(this.inputRectX=0|e,this.inputRectY=0|t,this.inputRectW=0|Math.max(1,i),this.inputRectH=0|Math.max(1,r),this.inputActive=!0)},stop:function(){this.inputActive&&(this.inputRectX=0,this.inputRectY=0,this.inputRectW=0,this.inputRectH=0,this.inputActive=!1)},handleTextInput:function(n){" "!=n&&ceramic_App.app.textInput.appendText(n)},handleKeyDown:function(n,e){this.inputActive&&(42==e?ceramic_App.app.textInput.backspace():44==e?ceramic_App.app.textInput.space():40==e?ceramic_App.app.textInput.enter():41==e?ceramic_App.app.textInput.escape():80==e?ceramic_App.app.textInput.moveLeft():79==e?ceramic_App.app.textInput.moveRight():82==e?ceramic_App.app.textInput.moveUp():81==e&&ceramic_App.app.textInput.moveDown()),225==e?ceramic_App.app.textInput.lshiftDown():229==e?ceramic_App.app.textInput.rshiftDown():224==e?ceramic_App.app.textInput.lctrlDown():228==e?ceramic_App.app.textInput.rctrlDown():227==e?ceramic_App.app.textInput.lmetaDown():231==e&&ceramic_App.app.textInput.rmetaDown()},handleKeyUp:function(n,e){225==e?ceramic_App.app.textInput.lshiftUp():229==e?ceramic_App.app.textInput.rshiftUp():224==e?ceramic_App.app.textInput.lctrlUp():228==e?ceramic_App.app.textInput.rctrlUp():227==e?ceramic_App.app.textInput.lmetaUp():231==e&&ceramic_App.app.textInput.rmetaUp()},__class__:backend_TextInput};var spec_Texts=function(){};t["spec.Texts"]=spec_Texts,spec_Texts.__name__="spec.Texts",spec_Texts.__isInterface__=!0,spec_Texts.prototype={__class__:spec_Texts};var backend_Texts=function(){this.loadingTextCallbacks=new haxe_ds_StringMap};t["backend.Texts"]=backend_Texts,backend_Texts.__name__="backend.Texts",backend_Texts.__interfaces__=[spec_Texts],backend_Texts.prototype={load:function(n,e,t){var i=this,r=null!=e&&2==e.loadMethod,l=null!=e?e.immediate:null,done=function(n){var fn=function(){t(n),t=null};null!=l?l.push(fn):ceramic_App.app._onceImmediate(fn)};if(ceramic_Path.isAbsolute(n)||StringTools.startsWith(n,"http://")||StringTools.startsWith(n,"https://")||(n=ceramic_Path.join([ceramic_App.app.settings.assetsPath,n])),Object.prototype.hasOwnProperty.call(this.loadingTextCallbacks.h,n))this.loadingTextCallbacks.h[n].push((function(n){done(n)}));else{this.loadingTextCallbacks.h[n]=[];var s=n,a=s.indexOf("?");-1!=a&&(s=HxOverrides.substr(s,0,a));var o=clay_Clay.app.assets.fullPath(s);clay_Clay.app.io.loadData(o,!0,!r,(function(e){if(null!=e){var t=new haxe_io_Bytes(new Uint8Array(e.buffer)).toString();if(null!=(r=i.loadingTextCallbacks.h[n])){l=i.loadingTextCallbacks;Object.prototype.hasOwnProperty.call(l.h,n)&&delete l.h[n],done(t);for(s=0;s<r.length;){a=r[s];++s,a(t)}}else done(t)}else{var r;if(null!=(r=i.loadingTextCallbacks.h[n])){var l=i.loadingTextCallbacks;Object.prototype.hasOwnProperty.call(l.h,n)&&delete l.h[n],done(null);for(var s=0;s<r.length;){var a=r[s];++s,a(null)}}else done(null)}})),null!=l?l.push(clay_Immediate.flush):ceramic_App.app._onceImmediate(clay_Immediate.flush)}},supportsHotReloadPath:function(){return!0},__class__:backend_Texts};var spec_Textures=function(){};t["spec.Textures"]=spec_Textures,spec_Textures.__name__="spec.Textures",spec_Textures.__isInterface__=!0,spec_Textures.prototype={__class__:spec_Textures};var backend_Textures=function(){this.loadedTexturesRetainCount=new haxe_ds_StringMap,this.loadedTextures=new haxe_ds_StringMap,this.loadingTextureCallbacks=new haxe_ds_StringMap,this.nextPixelsIndex=0,this.nextRenderIndex=0};t["backend.Textures"]=backend_Textures,backend_Textures.__name__="backend.Textures",backend_Textures.__interfaces__=[spec_Textures],backend_Textures.computeMaxTexturesByBatchIfNeeded=function(){-1==backend_Textures._maxTexturesByBatch&&(backend_Textures._maxTexturesByBatch=0|Math.min(32,clay_opengl_web_GL.gl.getParameter(34930)))},backend_Textures.prototype={load:function(n,e,t){var i=this,r=null!=e&&2==e.loadMethod,l=null!=e?e.immediate:null,done=function(n){var fn=function(){t(n),t=null};null!=l?l.push(fn):ceramic_App.app._onceImmediate(fn)};if(ceramic_Path.isAbsolute(n)||StringTools.startsWith(n,"http://")||StringTools.startsWith(n,"https://")||(n=ceramic_Path.join([ceramic_App.app.settings.assetsPath,n])),Object.prototype.hasOwnProperty.call(this.loadedTextures.h,n)){this.loadedTexturesRetainCount.h[n]+=1;var s=this.loadedTextures.h[n];done(s)}else if(Object.prototype.hasOwnProperty.call(this.loadingTextureCallbacks.h,n))this.loadingTextureCallbacks.h[n].push((function(e){if(null!=e){var t=Object.prototype.hasOwnProperty.call(i.loadedTexturesRetainCount.h,n)?i.loadedTexturesRetainCount.h[n]:0;i.loadedTexturesRetainCount.h[n]=t+1}done(e)}));else{var a=n,o=a.indexOf("?");-1!=o&&(a=HxOverrides.substr(a,0,o)),this.loadingTextureCallbacks.h[n]=[function(e){if(null!=e){var t=Object.prototype.hasOwnProperty.call(i.loadedTexturesRetainCount.h,n)?i.loadedTexturesRetainCount.h[n]:0;i.loadedTexturesRetainCount.h[n]=t+1}done(e)}];var p=clay_Clay.app.assets.fullPath(a),h=!0;null!=e&&null!=e.premultiplyAlpha&&(h=e.premultiplyAlpha);var doFail=function(){var e=i.loadingTextureCallbacks.h[n],t=i.loadingTextureCallbacks;Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n];for(var r=0;r<e.length;){var l=e[r];++r;try{l(null)}catch(n){var s=[haxe_Exception.caught(n).unwrap()];ceramic_App.app._onceImmediate(function(n){return function(){throw haxe_Exception.thrown(n[0])}}(s))}}};clay_Clay.app.assets.loadImage(p,null,!r,(function(e){if(null!=e){var t=null;if(null!=(t=clay_graphics_Texture.fromImage(e,h))){t.id=n,t.init(),i.loadedTextures.h[n]=t;var r=i.loadingTextureCallbacks.h[n],l=i.loadingTextureCallbacks;Object.prototype.hasOwnProperty.call(l.h,n)&&delete l.h[n];for(var s=0;s<r.length;){var a=r[s];++s;try{a(t)}catch(n){var o=[haxe_Exception.caught(n).unwrap()];ceramic_App.app._onceImmediate(function(n){return function(){throw haxe_Exception.thrown(n[0])}}(o))}}}else doFail()}else doFail()})),null!=l?l.push(clay_Immediate.flush):ceramic_App.app._onceImmediate(clay_Immediate.flush)}},supportsHotReloadPath:function(){return!0},createTexture:function(n,e,t){var i="pixels:"+this.nextPixelsIndex++,r=new clay_graphics_Texture;return r.id=i,r.width=n,r.height=e,r.pixels=t,r.init(),this.loadedTexturesRetainCount.h[i]=1,r},createRenderTarget:function(n,e){var t="render:"+this.nextRenderIndex++,i=new clay_graphics_RenderTexture;return i.id=t,i.width=n,i.height=e,i.stencil=!0,i.init(),this.loadedTexturesRetainCount.h[t]=1,i},fetchTexturePixels:function(n,e){var t=n.width,i=n.height;null==e&&(e=new Uint8Array(t*i*4));return n.fetch(e),e},submitTexturePixels:function(n,e){n.submit(e)},destroyTexture:function(n){var e=n.id;if(this.loadedTexturesRetainCount.h[e]>1)this.loadedTexturesRetainCount.h[e]-=1;else{var t=this.loadedTextures;Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e];t=this.loadedTexturesRetainCount;Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e],n.destroy()}},getTextureId:function(n){return n.textureId},getTextureWidth:function(n){return n.width},getTextureHeight:function(n){return n.height},getTextureWidthActual:function(n){return n.widthActual},getTextureHeightActual:function(n){return n.heightActual},getTextureIndex:function(n){return n.index},setTextureFilter:function(n,e){switch(e._hx_index){case 0:n.set_filterMin(9729),n.set_filterMag(9729);break;case 1:n.set_filterMin(9728),n.set_filterMag(9728)}},maxTextureWidth:function(){return 2048},maxTextureHeight:function(){return 2048},maxTexturesByBatch:function(){return-1==backend_Textures._maxTexturesByBatch&&(backend_Textures._maxTexturesByBatch=0|Math.min(32,clay_opengl_web_GL.gl.getParameter(34930))),backend_Textures._maxTexturesByBatch},textureToPng:function(n,e,t,i){null==e&&(e=!0);var r=this.fetchTexturePixels(n);n.id;e&&ceramic_PremultiplyAlpha.reversePremultiplyAlpha(r),clay_Clay.app.assets.pixelsToPngData(n.width,n.height,r,(function(n){null!=n?null!=t?(ceramic_Files.saveBytes(t,new haxe_io_Bytes(new Uint8Array(n.buffer))),i()):i(new haxe_io_Bytes(new Uint8Array(n.buffer))):(ceramic_App.app.logger.warning("Failed to get PNG data from texture",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:431,className:"backend.Textures",methodName:"textureToPng"}),i(null))}))},pixelsToPng:function(n,e,t,i,r){clay_Clay.app.assets.pixelsToPngData(n,e,t,(function(n){null!=n?null!=i?(ceramic_Files.saveBytes(i,new haxe_io_Bytes(new Uint8Array(n.buffer))),r()):r(new haxe_io_Bytes(new Uint8Array(n.buffer))):(ceramic_App.app.logger.warning("Failed to get PNG data from pixels",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Textures.hx",lineNumber:451,className:"backend.Textures",methodName:"pixelsToPng"}),r(null))}))},__class__:backend_Textures};var s=i["backend.VisualItem"]={__ename__:"backend.VisualItem",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"backend.VisualItem",toString:$estr},QUAD:{_hx_name:"QUAD",_hx_index:1,__enum__:"backend.VisualItem",toString:$estr},MESH:{_hx_name:"MESH",_hx_index:2,__enum__:"backend.VisualItem",toString:$estr}};s.__constructs__=[s.NONE,s.QUAD,s.MESH];var ceramic_App=function(){this.info={editable:{item11:"ceramic.Particles",item3:"ceramic.Fragment",item10:"ceramic.Line",item5:"ceramic.Text",item7:"ceramic.Shape",item2:"ceramic.Layer",item6:"ceramic.Mesh",item9:"ceramic.Arc",item1:"ceramic.Visual",item4:"ceramic.Quad",item8:"ceramic.Ngon",item0:"ceramic.Entity"},name:"ld49",collections:{},version:"1.0",author:"Jeremy Faivre",displayName:"It Will Fall"},this.disposedEntities=[],this.beginUpdateCallbacks=[],this.visualsContentDirty=!1,this.hierarchyDirty=!1,this.lazyScenes=!0,this.nape=null,this.timelines=new ceramic_Timelines,this.converters=new haxe_ds_StringMap,this.textInput=null,this.persistent=null,this.projectDir=null,this.defaultFont=null,this.defaultWhiteTexture=null,this.defaultTexturedShader=null,this.renderTextures=[],this.groups=[],this.destroyedVisuals=[],this.pendingVisuals=[],this.visuals=[],this.logger=new ceramic_Logger,this.frame=0,this._computeFps=new ceramic_ComputeFps,this.shouldUpdateAndDrawAgain=!1,this.inUpdate=!1,this._xUpdatesToCallNow=[],this._xUpdatesHandlers=[],this._xUpdatesHandlersPool=new ceramic_Pool,this.loaders=[],this.postFlushImmediateCallbacksLen=0,this.postFlushImmediateCallbacksCapacity=0,this.postFlushImmediateCallbacks=[],this.immediateCallbacksLen=0,this.immediateCallbacksCapacity=0,this.immediateCallbacks=[],ceramic_Entity.call(this),ceramic_App.app=this,ceramic_Runner.init(),tracker_Tracker.backend=new ceramic_TrackerBackend,this.settings=new ceramic_Settings,this.screen=new ceramic_Screen,this.audio=new ceramic_Audio,this.input=new ceramic_Input,this.systems=new ceramic_Systems,this.assets=new ceramic_Assets,this.backend=new backend_Backend,this.backend.onceReady(this,$bind(this,this.backendReady)),this.backend.init(this)};t["ceramic.App"]=ceramic_App,ceramic_App.__name__="ceramic.App",ceramic_App.__properties__={get_app:"get_app"},ceramic_App.get_app=function(){return ceramic_App.app},ceramic_App.oncePreInit=function(n){null==ceramic_App.preInitCallbacks&&(ceramic_App.preInitCallbacks=[]),ceramic_App.preInitCallbacks.push(n)},ceramic_App.init=function(){return assets_AllAssets.bind(),new ceramic_App,new ceramic_InitSettings(ceramic_App.app.settings)},ceramic_App.__super__=ceramic_Entity,ceramic_App.prototype=$extend(ceramic_Entity.prototype,{emitReady:function(){var n=0;if(null!=this.__cbOnReady&&(n+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(n+=this.__cbOnceReady.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnReady)for(var r=0,l=this.__cbOnReady.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnReady[s],++i):--n}if(null!=this.__cbOnceReady){var a=null,o=null;for(r=0,l=this.__cbOnceReady.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceReady[s],this.__cbOnceReady[s]=null;var p=this.__cbOnceOwnerUnbindReady[s];this.__cbOnceOwnerUnbindReady[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindReady[s]),o.push(this.__cbOnceReady[s])}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onReady:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event ready because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReady(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(e)},onceReady:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event ready because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReady(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(e)},offReady:function(n){if(null!=n){var e;null!=this.__cbOnReady&&-1!=(e=this.__cbOnReady.indexOf(n))&&(this.__cbOnReady.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReady[e])&&l(),this.__cbOnOwnerUnbindReady.splice(e,1)),null!=this.__cbOnceReady&&-1!=(e=this.__cbOnceReady.indexOf(n))&&(this.__cbOnceReady.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReady[e])&&l(),this.__cbOnceOwnerUnbindReady.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReady[r])&&l()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReady[r])&&l()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&this.__cbOnReady.length>0||null!=this.__cbOnceReady&&this.__cbOnceReady.length>0},emitUpdate:function(n){var e=0;if(null!=this.__cbOnUpdate&&(e+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(e+=this.__cbOnceUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnUpdate)for(var l=0,s=this.__cbOnUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnUpdate[a],++r):--e}if(null!=this.__cbOnceUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null;var h=this.__cbOnceOwnerUnbindUpdate[a];this.__cbOnceOwnerUnbindUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindUpdate[a]),p.push(this.__cbOnceUpdate[a])}this.__cbOnceOwnerUnbindUpdate=o,this.__cbOnceUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(e)},onceUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(e)},offUpdate:function(n){if(null!=n){var e;null!=this.__cbOnUpdate&&-1!=(e=this.__cbOnUpdate.indexOf(n))&&(this.__cbOnUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindUpdate[e])&&l(),this.__cbOnOwnerUnbindUpdate.splice(e,1)),null!=this.__cbOnceUpdate&&-1!=(e=this.__cbOnceUpdate.indexOf(n))&&(this.__cbOnceUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindUpdate[e])&&l(),this.__cbOnceOwnerUnbindUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindUpdate[r])&&l()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindUpdate[r])&&l()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&this.__cbOnUpdate.length>0||null!=this.__cbOnceUpdate&&this.__cbOnceUpdate.length>0},emitPreUpdate:function(n){var e=0;if(null!=this.__cbOnPreUpdate&&(e+=this.__cbOnPreUpdate.length),null!=this.__cbOncePreUpdate&&(e+=this.__cbOncePreUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPreUpdate)for(var l=0,s=this.__cbOnPreUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPreUpdate[a],++r):--e}if(null!=this.__cbOncePreUpdate){var o=null,p=null;for(l=0,s=this.__cbOncePreUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePreUpdate[a],this.__cbOncePreUpdate[a]=null;var h=this.__cbOnceOwnerUnbindPreUpdate[a];this.__cbOnceOwnerUnbindPreUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPreUpdate[a]),p.push(this.__cbOncePreUpdate[a])}this.__cbOnceOwnerUnbindPreUpdate=o,this.__cbOncePreUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPreUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event preUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPreUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPreUpdate&&(this.__cbOnOwnerUnbindPreUpdate=[]),this.__cbOnOwnerUnbindPreUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPreUpdate&&(this.__cbOnOwnerUnbindPreUpdate=[]),this.__cbOnOwnerUnbindPreUpdate.push(null);null==this.__cbOnPreUpdate&&(this.__cbOnPreUpdate=[]),this.__cbOnPreUpdate.push(e)},oncePreUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event preUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPreUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPreUpdate&&(this.__cbOnceOwnerUnbindPreUpdate=[]),this.__cbOnceOwnerUnbindPreUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPreUpdate&&(this.__cbOnceOwnerUnbindPreUpdate=[]),this.__cbOnceOwnerUnbindPreUpdate.push(null);null==this.__cbOncePreUpdate&&(this.__cbOncePreUpdate=[]),this.__cbOncePreUpdate.push(e)},offPreUpdate:function(n){if(null!=n){var e;null!=this.__cbOnPreUpdate&&-1!=(e=this.__cbOnPreUpdate.indexOf(n))&&(this.__cbOnPreUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPreUpdate[e])&&l(),this.__cbOnOwnerUnbindPreUpdate.splice(e,1)),null!=this.__cbOncePreUpdate&&-1!=(e=this.__cbOncePreUpdate.indexOf(n))&&(this.__cbOncePreUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPreUpdate[e])&&l(),this.__cbOnceOwnerUnbindPreUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPreUpdate){for(var t=0,i=this.__cbOnOwnerUnbindPreUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPreUpdate[r])&&l()}this.__cbOnOwnerUnbindPreUpdate=null}if(null!=this.__cbOnceOwnerUnbindPreUpdate){for(t=0,i=this.__cbOnceOwnerUnbindPreUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPreUpdate[r])&&l()}this.__cbOnceOwnerUnbindPreUpdate=null}this.__cbOnPreUpdate=null,this.__cbOncePreUpdate=null}},listensPreUpdate:function(){return null!=this.__cbOnPreUpdate&&this.__cbOnPreUpdate.length>0||null!=this.__cbOncePreUpdate&&this.__cbOncePreUpdate.length>0},emitPostUpdate:function(n){var e=0;if(null!=this.__cbOnPostUpdate&&(e+=this.__cbOnPostUpdate.length),null!=this.__cbOncePostUpdate&&(e+=this.__cbOncePostUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPostUpdate)for(var l=0,s=this.__cbOnPostUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPostUpdate[a],++r):--e}if(null!=this.__cbOncePostUpdate){var o=null,p=null;for(l=0,s=this.__cbOncePostUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePostUpdate[a],this.__cbOncePostUpdate[a]=null;var h=this.__cbOnceOwnerUnbindPostUpdate[a];this.__cbOnceOwnerUnbindPostUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPostUpdate[a]),p.push(this.__cbOncePostUpdate[a])}this.__cbOnceOwnerUnbindPostUpdate=o,this.__cbOncePostUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPostUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event postUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPostUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPostUpdate&&(this.__cbOnOwnerUnbindPostUpdate=[]),this.__cbOnOwnerUnbindPostUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPostUpdate&&(this.__cbOnOwnerUnbindPostUpdate=[]),this.__cbOnOwnerUnbindPostUpdate.push(null);null==this.__cbOnPostUpdate&&(this.__cbOnPostUpdate=[]),this.__cbOnPostUpdate.push(e)},oncePostUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event postUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPostUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPostUpdate&&(this.__cbOnceOwnerUnbindPostUpdate=[]),this.__cbOnceOwnerUnbindPostUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPostUpdate&&(this.__cbOnceOwnerUnbindPostUpdate=[]),this.__cbOnceOwnerUnbindPostUpdate.push(null);null==this.__cbOncePostUpdate&&(this.__cbOncePostUpdate=[]),this.__cbOncePostUpdate.push(e)},offPostUpdate:function(n){if(null!=n){var e;null!=this.__cbOnPostUpdate&&-1!=(e=this.__cbOnPostUpdate.indexOf(n))&&(this.__cbOnPostUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPostUpdate[e])&&l(),this.__cbOnOwnerUnbindPostUpdate.splice(e,1)),null!=this.__cbOncePostUpdate&&-1!=(e=this.__cbOncePostUpdate.indexOf(n))&&(this.__cbOncePostUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPostUpdate[e])&&l(),this.__cbOnceOwnerUnbindPostUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPostUpdate){for(var t=0,i=this.__cbOnOwnerUnbindPostUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPostUpdate[r])&&l()}this.__cbOnOwnerUnbindPostUpdate=null}if(null!=this.__cbOnceOwnerUnbindPostUpdate){for(t=0,i=this.__cbOnceOwnerUnbindPostUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPostUpdate[r])&&l()}this.__cbOnceOwnerUnbindPostUpdate=null}this.__cbOnPostUpdate=null,this.__cbOncePostUpdate=null}},listensPostUpdate:function(){return null!=this.__cbOnPostUpdate&&this.__cbOnPostUpdate.length>0||null!=this.__cbOncePostUpdate&&this.__cbOncePostUpdate.length>0},emitDefaultAssetsLoad:function(n){var e=0;if(null!=this.__cbOnDefaultAssetsLoad&&(e+=this.__cbOnDefaultAssetsLoad.length),null!=this.__cbOnceDefaultAssetsLoad&&(e+=this.__cbOnceDefaultAssetsLoad.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnDefaultAssetsLoad)for(var l=0,s=this.__cbOnDefaultAssetsLoad.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnDefaultAssetsLoad[a],++r):--e}if(null!=this.__cbOnceDefaultAssetsLoad){var o=null,p=null;for(l=0,s=this.__cbOnceDefaultAssetsLoad.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceDefaultAssetsLoad[a],this.__cbOnceDefaultAssetsLoad[a]=null;var h=this.__cbOnceOwnerUnbindDefaultAssetsLoad[a];this.__cbOnceOwnerUnbindDefaultAssetsLoad[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindDefaultAssetsLoad[a]),p.push(this.__cbOnceDefaultAssetsLoad[a])}this.__cbOnceOwnerUnbindDefaultAssetsLoad=o,this.__cbOnceDefaultAssetsLoad=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onDefaultAssetsLoad:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event defaultAssetsLoad because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDefaultAssetsLoad(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindDefaultAssetsLoad&&(this.__cbOnOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnOwnerUnbindDefaultAssetsLoad.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindDefaultAssetsLoad&&(this.__cbOnOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnOwnerUnbindDefaultAssetsLoad.push(null);null==this.__cbOnDefaultAssetsLoad&&(this.__cbOnDefaultAssetsLoad=[]),this.__cbOnDefaultAssetsLoad.push(e)},onceDefaultAssetsLoad:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event defaultAssetsLoad because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDefaultAssetsLoad(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindDefaultAssetsLoad&&(this.__cbOnceOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnceOwnerUnbindDefaultAssetsLoad.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindDefaultAssetsLoad&&(this.__cbOnceOwnerUnbindDefaultAssetsLoad=[]),this.__cbOnceOwnerUnbindDefaultAssetsLoad.push(null);null==this.__cbOnceDefaultAssetsLoad&&(this.__cbOnceDefaultAssetsLoad=[]),this.__cbOnceDefaultAssetsLoad.push(e)},offDefaultAssetsLoad:function(n){if(null!=n){var e;null!=this.__cbOnDefaultAssetsLoad&&-1!=(e=this.__cbOnDefaultAssetsLoad.indexOf(n))&&(this.__cbOnDefaultAssetsLoad.splice(e,1),null!=(l=this.__cbOnOwnerUnbindDefaultAssetsLoad[e])&&l(),this.__cbOnOwnerUnbindDefaultAssetsLoad.splice(e,1)),null!=this.__cbOnceDefaultAssetsLoad&&-1!=(e=this.__cbOnceDefaultAssetsLoad.indexOf(n))&&(this.__cbOnceDefaultAssetsLoad.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindDefaultAssetsLoad[e])&&l(),this.__cbOnceOwnerUnbindDefaultAssetsLoad.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindDefaultAssetsLoad){for(var t=0,i=this.__cbOnOwnerUnbindDefaultAssetsLoad.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindDefaultAssetsLoad[r])&&l()}this.__cbOnOwnerUnbindDefaultAssetsLoad=null}if(null!=this.__cbOnceOwnerUnbindDefaultAssetsLoad){for(t=0,i=this.__cbOnceOwnerUnbindDefaultAssetsLoad.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindDefaultAssetsLoad[r])&&l()}this.__cbOnceOwnerUnbindDefaultAssetsLoad=null}this.__cbOnDefaultAssetsLoad=null,this.__cbOnceDefaultAssetsLoad=null}},listensDefaultAssetsLoad:function(){return null!=this.__cbOnDefaultAssetsLoad&&this.__cbOnDefaultAssetsLoad.length>0||null!=this.__cbOnceDefaultAssetsLoad&&this.__cbOnceDefaultAssetsLoad.length>0},emitCriticalError:function(n,e){var t=0;if(null!=this.__cbOnCriticalError&&(t+=this.__cbOnCriticalError.length),null!=this.__cbOnceCriticalError&&(t+=this.__cbOnceCriticalError.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnCriticalError)for(var s=0,a=this.__cbOnCriticalError.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnCriticalError[o],++l):--t}if(null!=this.__cbOnceCriticalError){var p=null,h=null;for(s=0,a=this.__cbOnceCriticalError.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceCriticalError[o],this.__cbOnceCriticalError[o]=null;var u=this.__cbOnceOwnerUnbindCriticalError[o];this.__cbOnceOwnerUnbindCriticalError[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindCriticalError[o]),h.push(this.__cbOnceCriticalError[o])}this.__cbOnceOwnerUnbindCriticalError=p,this.__cbOnceCriticalError=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onCriticalError:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event criticalError because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offCriticalError(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindCriticalError&&(this.__cbOnOwnerUnbindCriticalError=[]),this.__cbOnOwnerUnbindCriticalError.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindCriticalError&&(this.__cbOnOwnerUnbindCriticalError=[]),this.__cbOnOwnerUnbindCriticalError.push(null);null==this.__cbOnCriticalError&&(this.__cbOnCriticalError=[]),this.__cbOnCriticalError.push(e)},onceCriticalError:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event criticalError because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offCriticalError(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindCriticalError&&(this.__cbOnceOwnerUnbindCriticalError=[]),this.__cbOnceOwnerUnbindCriticalError.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindCriticalError&&(this.__cbOnceOwnerUnbindCriticalError=[]),this.__cbOnceOwnerUnbindCriticalError.push(null);null==this.__cbOnceCriticalError&&(this.__cbOnceCriticalError=[]),this.__cbOnceCriticalError.push(e)},offCriticalError:function(n){if(null!=n){var e;null!=this.__cbOnCriticalError&&-1!=(e=this.__cbOnCriticalError.indexOf(n))&&(this.__cbOnCriticalError.splice(e,1),null!=(l=this.__cbOnOwnerUnbindCriticalError[e])&&l(),this.__cbOnOwnerUnbindCriticalError.splice(e,1)),null!=this.__cbOnceCriticalError&&-1!=(e=this.__cbOnceCriticalError.indexOf(n))&&(this.__cbOnceCriticalError.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindCriticalError[e])&&l(),this.__cbOnceOwnerUnbindCriticalError.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindCriticalError){for(var t=0,i=this.__cbOnOwnerUnbindCriticalError.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindCriticalError[r])&&l()}this.__cbOnOwnerUnbindCriticalError=null}if(null!=this.__cbOnceOwnerUnbindCriticalError){for(t=0,i=this.__cbOnceOwnerUnbindCriticalError.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindCriticalError[r])&&l()}this.__cbOnceOwnerUnbindCriticalError=null}this.__cbOnCriticalError=null,this.__cbOnceCriticalError=null}},listensCriticalError:function(){return null!=this.__cbOnCriticalError&&this.__cbOnCriticalError.length>0||null!=this.__cbOnceCriticalError&&this.__cbOnceCriticalError.length>0},emitBeginEnterBackground:function(){var n=0;if(null!=this.__cbOnBeginEnterBackground&&(n+=this.__cbOnBeginEnterBackground.length),null!=this.__cbOnceBeginEnterBackground&&(n+=this.__cbOnceBeginEnterBackground.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnBeginEnterBackground)for(var r=0,l=this.__cbOnBeginEnterBackground.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnBeginEnterBackground[s],++i):--n}if(null!=this.__cbOnceBeginEnterBackground){var a=null,o=null;for(r=0,l=this.__cbOnceBeginEnterBackground.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceBeginEnterBackground[s],this.__cbOnceBeginEnterBackground[s]=null;var p=this.__cbOnceOwnerUnbindBeginEnterBackground[s];this.__cbOnceOwnerUnbindBeginEnterBackground[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindBeginEnterBackground[s]),o.push(this.__cbOnceBeginEnterBackground[s])}this.__cbOnceOwnerUnbindBeginEnterBackground=a,this.__cbOnceBeginEnterBackground=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onBeginEnterBackground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginEnterBackground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginEnterBackground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginEnterBackground&&(this.__cbOnOwnerUnbindBeginEnterBackground=[]),this.__cbOnOwnerUnbindBeginEnterBackground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginEnterBackground&&(this.__cbOnOwnerUnbindBeginEnterBackground=[]),this.__cbOnOwnerUnbindBeginEnterBackground.push(null);null==this.__cbOnBeginEnterBackground&&(this.__cbOnBeginEnterBackground=[]),this.__cbOnBeginEnterBackground.push(e)},onceBeginEnterBackground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginEnterBackground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginEnterBackground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginEnterBackground&&(this.__cbOnceOwnerUnbindBeginEnterBackground=[]),this.__cbOnceOwnerUnbindBeginEnterBackground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginEnterBackground&&(this.__cbOnceOwnerUnbindBeginEnterBackground=[]),this.__cbOnceOwnerUnbindBeginEnterBackground.push(null);null==this.__cbOnceBeginEnterBackground&&(this.__cbOnceBeginEnterBackground=[]),this.__cbOnceBeginEnterBackground.push(e)},offBeginEnterBackground:function(n){if(null!=n){var e;null!=this.__cbOnBeginEnterBackground&&-1!=(e=this.__cbOnBeginEnterBackground.indexOf(n))&&(this.__cbOnBeginEnterBackground.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginEnterBackground[e])&&l(),this.__cbOnOwnerUnbindBeginEnterBackground.splice(e,1)),null!=this.__cbOnceBeginEnterBackground&&-1!=(e=this.__cbOnceBeginEnterBackground.indexOf(n))&&(this.__cbOnceBeginEnterBackground.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginEnterBackground[e])&&l(),this.__cbOnceOwnerUnbindBeginEnterBackground.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEnterBackground){for(var t=0,i=this.__cbOnOwnerUnbindBeginEnterBackground.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginEnterBackground[r])&&l()}this.__cbOnOwnerUnbindBeginEnterBackground=null}if(null!=this.__cbOnceOwnerUnbindBeginEnterBackground){for(t=0,i=this.__cbOnceOwnerUnbindBeginEnterBackground.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginEnterBackground[r])&&l()}this.__cbOnceOwnerUnbindBeginEnterBackground=null}this.__cbOnBeginEnterBackground=null,this.__cbOnceBeginEnterBackground=null}},listensBeginEnterBackground:function(){return null!=this.__cbOnBeginEnterBackground&&this.__cbOnBeginEnterBackground.length>0||null!=this.__cbOnceBeginEnterBackground&&this.__cbOnceBeginEnterBackground.length>0},emitFinishEnterBackground:function(){var n=0;if(null!=this.__cbOnFinishEnterBackground&&(n+=this.__cbOnFinishEnterBackground.length),null!=this.__cbOnceFinishEnterBackground&&(n+=this.__cbOnceFinishEnterBackground.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnFinishEnterBackground)for(var r=0,l=this.__cbOnFinishEnterBackground.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnFinishEnterBackground[s],++i):--n}if(null!=this.__cbOnceFinishEnterBackground){var a=null,o=null;for(r=0,l=this.__cbOnceFinishEnterBackground.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceFinishEnterBackground[s],this.__cbOnceFinishEnterBackground[s]=null;var p=this.__cbOnceOwnerUnbindFinishEnterBackground[s];this.__cbOnceOwnerUnbindFinishEnterBackground[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindFinishEnterBackground[s]),o.push(this.__cbOnceFinishEnterBackground[s])}this.__cbOnceOwnerUnbindFinishEnterBackground=a,this.__cbOnceFinishEnterBackground=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onFinishEnterBackground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishEnterBackground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishEnterBackground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFinishEnterBackground&&(this.__cbOnOwnerUnbindFinishEnterBackground=[]),this.__cbOnOwnerUnbindFinishEnterBackground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFinishEnterBackground&&(this.__cbOnOwnerUnbindFinishEnterBackground=[]),this.__cbOnOwnerUnbindFinishEnterBackground.push(null);null==this.__cbOnFinishEnterBackground&&(this.__cbOnFinishEnterBackground=[]),this.__cbOnFinishEnterBackground.push(e)},onceFinishEnterBackground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishEnterBackground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishEnterBackground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFinishEnterBackground&&(this.__cbOnceOwnerUnbindFinishEnterBackground=[]),this.__cbOnceOwnerUnbindFinishEnterBackground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFinishEnterBackground&&(this.__cbOnceOwnerUnbindFinishEnterBackground=[]),this.__cbOnceOwnerUnbindFinishEnterBackground.push(null);null==this.__cbOnceFinishEnterBackground&&(this.__cbOnceFinishEnterBackground=[]),this.__cbOnceFinishEnterBackground.push(e)},offFinishEnterBackground:function(n){if(null!=n){var e;null!=this.__cbOnFinishEnterBackground&&-1!=(e=this.__cbOnFinishEnterBackground.indexOf(n))&&(this.__cbOnFinishEnterBackground.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFinishEnterBackground[e])&&l(),this.__cbOnOwnerUnbindFinishEnterBackground.splice(e,1)),null!=this.__cbOnceFinishEnterBackground&&-1!=(e=this.__cbOnceFinishEnterBackground.indexOf(n))&&(this.__cbOnceFinishEnterBackground.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFinishEnterBackground[e])&&l(),this.__cbOnceOwnerUnbindFinishEnterBackground.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFinishEnterBackground){for(var t=0,i=this.__cbOnOwnerUnbindFinishEnterBackground.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFinishEnterBackground[r])&&l()}this.__cbOnOwnerUnbindFinishEnterBackground=null}if(null!=this.__cbOnceOwnerUnbindFinishEnterBackground){for(t=0,i=this.__cbOnceOwnerUnbindFinishEnterBackground.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFinishEnterBackground[r])&&l()}this.__cbOnceOwnerUnbindFinishEnterBackground=null}this.__cbOnFinishEnterBackground=null,this.__cbOnceFinishEnterBackground=null}},listensFinishEnterBackground:function(){return null!=this.__cbOnFinishEnterBackground&&this.__cbOnFinishEnterBackground.length>0||null!=this.__cbOnceFinishEnterBackground&&this.__cbOnceFinishEnterBackground.length>0},emitBeginEnterForeground:function(){var n=0;if(null!=this.__cbOnBeginEnterForeground&&(n+=this.__cbOnBeginEnterForeground.length),null!=this.__cbOnceBeginEnterForeground&&(n+=this.__cbOnceBeginEnterForeground.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnBeginEnterForeground)for(var r=0,l=this.__cbOnBeginEnterForeground.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnBeginEnterForeground[s],++i):--n}if(null!=this.__cbOnceBeginEnterForeground){var a=null,o=null;for(r=0,l=this.__cbOnceBeginEnterForeground.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceBeginEnterForeground[s],this.__cbOnceBeginEnterForeground[s]=null;var p=this.__cbOnceOwnerUnbindBeginEnterForeground[s];this.__cbOnceOwnerUnbindBeginEnterForeground[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindBeginEnterForeground[s]),o.push(this.__cbOnceBeginEnterForeground[s])}this.__cbOnceOwnerUnbindBeginEnterForeground=a,this.__cbOnceBeginEnterForeground=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onBeginEnterForeground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginEnterForeground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginEnterForeground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginEnterForeground&&(this.__cbOnOwnerUnbindBeginEnterForeground=[]),this.__cbOnOwnerUnbindBeginEnterForeground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginEnterForeground&&(this.__cbOnOwnerUnbindBeginEnterForeground=[]),this.__cbOnOwnerUnbindBeginEnterForeground.push(null);null==this.__cbOnBeginEnterForeground&&(this.__cbOnBeginEnterForeground=[]),this.__cbOnBeginEnterForeground.push(e)},onceBeginEnterForeground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginEnterForeground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginEnterForeground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginEnterForeground&&(this.__cbOnceOwnerUnbindBeginEnterForeground=[]),this.__cbOnceOwnerUnbindBeginEnterForeground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginEnterForeground&&(this.__cbOnceOwnerUnbindBeginEnterForeground=[]),this.__cbOnceOwnerUnbindBeginEnterForeground.push(null);null==this.__cbOnceBeginEnterForeground&&(this.__cbOnceBeginEnterForeground=[]),this.__cbOnceBeginEnterForeground.push(e)},offBeginEnterForeground:function(n){if(null!=n){var e;null!=this.__cbOnBeginEnterForeground&&-1!=(e=this.__cbOnBeginEnterForeground.indexOf(n))&&(this.__cbOnBeginEnterForeground.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginEnterForeground[e])&&l(),this.__cbOnOwnerUnbindBeginEnterForeground.splice(e,1)),null!=this.__cbOnceBeginEnterForeground&&-1!=(e=this.__cbOnceBeginEnterForeground.indexOf(n))&&(this.__cbOnceBeginEnterForeground.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginEnterForeground[e])&&l(),this.__cbOnceOwnerUnbindBeginEnterForeground.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEnterForeground){for(var t=0,i=this.__cbOnOwnerUnbindBeginEnterForeground.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginEnterForeground[r])&&l()}this.__cbOnOwnerUnbindBeginEnterForeground=null}if(null!=this.__cbOnceOwnerUnbindBeginEnterForeground){for(t=0,i=this.__cbOnceOwnerUnbindBeginEnterForeground.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginEnterForeground[r])&&l()}this.__cbOnceOwnerUnbindBeginEnterForeground=null}this.__cbOnBeginEnterForeground=null,this.__cbOnceBeginEnterForeground=null}},listensBeginEnterForeground:function(){return null!=this.__cbOnBeginEnterForeground&&this.__cbOnBeginEnterForeground.length>0||null!=this.__cbOnceBeginEnterForeground&&this.__cbOnceBeginEnterForeground.length>0},emitFinishEnterForeground:function(){var n=0;if(null!=this.__cbOnFinishEnterForeground&&(n+=this.__cbOnFinishEnterForeground.length),null!=this.__cbOnceFinishEnterForeground&&(n+=this.__cbOnceFinishEnterForeground.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnFinishEnterForeground)for(var r=0,l=this.__cbOnFinishEnterForeground.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnFinishEnterForeground[s],++i):--n}if(null!=this.__cbOnceFinishEnterForeground){var a=null,o=null;for(r=0,l=this.__cbOnceFinishEnterForeground.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceFinishEnterForeground[s],this.__cbOnceFinishEnterForeground[s]=null;var p=this.__cbOnceOwnerUnbindFinishEnterForeground[s];this.__cbOnceOwnerUnbindFinishEnterForeground[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindFinishEnterForeground[s]),o.push(this.__cbOnceFinishEnterForeground[s])}this.__cbOnceOwnerUnbindFinishEnterForeground=a,this.__cbOnceFinishEnterForeground=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onFinishEnterForeground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishEnterForeground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishEnterForeground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFinishEnterForeground&&(this.__cbOnOwnerUnbindFinishEnterForeground=[]),this.__cbOnOwnerUnbindFinishEnterForeground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFinishEnterForeground&&(this.__cbOnOwnerUnbindFinishEnterForeground=[]),this.__cbOnOwnerUnbindFinishEnterForeground.push(null);null==this.__cbOnFinishEnterForeground&&(this.__cbOnFinishEnterForeground=[]),this.__cbOnFinishEnterForeground.push(e)},onceFinishEnterForeground:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishEnterForeground because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishEnterForeground(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFinishEnterForeground&&(this.__cbOnceOwnerUnbindFinishEnterForeground=[]),this.__cbOnceOwnerUnbindFinishEnterForeground.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFinishEnterForeground&&(this.__cbOnceOwnerUnbindFinishEnterForeground=[]),this.__cbOnceOwnerUnbindFinishEnterForeground.push(null);null==this.__cbOnceFinishEnterForeground&&(this.__cbOnceFinishEnterForeground=[]),this.__cbOnceFinishEnterForeground.push(e)},offFinishEnterForeground:function(n){if(null!=n){var e;null!=this.__cbOnFinishEnterForeground&&-1!=(e=this.__cbOnFinishEnterForeground.indexOf(n))&&(this.__cbOnFinishEnterForeground.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFinishEnterForeground[e])&&l(),this.__cbOnOwnerUnbindFinishEnterForeground.splice(e,1)),null!=this.__cbOnceFinishEnterForeground&&-1!=(e=this.__cbOnceFinishEnterForeground.indexOf(n))&&(this.__cbOnceFinishEnterForeground.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFinishEnterForeground[e])&&l(),this.__cbOnceOwnerUnbindFinishEnterForeground.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFinishEnterForeground){for(var t=0,i=this.__cbOnOwnerUnbindFinishEnterForeground.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFinishEnterForeground[r])&&l()}this.__cbOnOwnerUnbindFinishEnterForeground=null}if(null!=this.__cbOnceOwnerUnbindFinishEnterForeground){for(t=0,i=this.__cbOnceOwnerUnbindFinishEnterForeground.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFinishEnterForeground[r])&&l()}this.__cbOnceOwnerUnbindFinishEnterForeground=null}this.__cbOnFinishEnterForeground=null,this.__cbOnceFinishEnterForeground=null}},listensFinishEnterForeground:function(){return null!=this.__cbOnFinishEnterForeground&&this.__cbOnFinishEnterForeground.length>0||null!=this.__cbOnceFinishEnterForeground&&this.__cbOnceFinishEnterForeground.length>0},emitBeginSortVisuals:function(){var n=0;if(null!=this.__cbOnBeginSortVisuals&&(n+=this.__cbOnBeginSortVisuals.length),null!=this.__cbOnceBeginSortVisuals&&(n+=this.__cbOnceBeginSortVisuals.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnBeginSortVisuals)for(var r=0,l=this.__cbOnBeginSortVisuals.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnBeginSortVisuals[s],++i):--n}if(null!=this.__cbOnceBeginSortVisuals){var a=null,o=null;for(r=0,l=this.__cbOnceBeginSortVisuals.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceBeginSortVisuals[s],this.__cbOnceBeginSortVisuals[s]=null;var p=this.__cbOnceOwnerUnbindBeginSortVisuals[s];this.__cbOnceOwnerUnbindBeginSortVisuals[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindBeginSortVisuals[s]),o.push(this.__cbOnceBeginSortVisuals[s])}this.__cbOnceOwnerUnbindBeginSortVisuals=a,this.__cbOnceBeginSortVisuals=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onBeginSortVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginSortVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginSortVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginSortVisuals&&(this.__cbOnOwnerUnbindBeginSortVisuals=[]),this.__cbOnOwnerUnbindBeginSortVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginSortVisuals&&(this.__cbOnOwnerUnbindBeginSortVisuals=[]),this.__cbOnOwnerUnbindBeginSortVisuals.push(null);null==this.__cbOnBeginSortVisuals&&(this.__cbOnBeginSortVisuals=[]),this.__cbOnBeginSortVisuals.push(e)},onceBeginSortVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginSortVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginSortVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginSortVisuals&&(this.__cbOnceOwnerUnbindBeginSortVisuals=[]),this.__cbOnceOwnerUnbindBeginSortVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginSortVisuals&&(this.__cbOnceOwnerUnbindBeginSortVisuals=[]),this.__cbOnceOwnerUnbindBeginSortVisuals.push(null);null==this.__cbOnceBeginSortVisuals&&(this.__cbOnceBeginSortVisuals=[]),this.__cbOnceBeginSortVisuals.push(e)},offBeginSortVisuals:function(n){if(null!=n){var e;null!=this.__cbOnBeginSortVisuals&&-1!=(e=this.__cbOnBeginSortVisuals.indexOf(n))&&(this.__cbOnBeginSortVisuals.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginSortVisuals[e])&&l(),this.__cbOnOwnerUnbindBeginSortVisuals.splice(e,1)),null!=this.__cbOnceBeginSortVisuals&&-1!=(e=this.__cbOnceBeginSortVisuals.indexOf(n))&&(this.__cbOnceBeginSortVisuals.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginSortVisuals[e])&&l(),this.__cbOnceOwnerUnbindBeginSortVisuals.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginSortVisuals){for(var t=0,i=this.__cbOnOwnerUnbindBeginSortVisuals.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginSortVisuals[r])&&l()}this.__cbOnOwnerUnbindBeginSortVisuals=null}if(null!=this.__cbOnceOwnerUnbindBeginSortVisuals){for(t=0,i=this.__cbOnceOwnerUnbindBeginSortVisuals.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginSortVisuals[r])&&l()}this.__cbOnceOwnerUnbindBeginSortVisuals=null}this.__cbOnBeginSortVisuals=null,this.__cbOnceBeginSortVisuals=null}},listensBeginSortVisuals:function(){return null!=this.__cbOnBeginSortVisuals&&this.__cbOnBeginSortVisuals.length>0||null!=this.__cbOnceBeginSortVisuals&&this.__cbOnceBeginSortVisuals.length>0},emitFinishSortVisuals:function(){var n=0;if(null!=this.__cbOnFinishSortVisuals&&(n+=this.__cbOnFinishSortVisuals.length),null!=this.__cbOnceFinishSortVisuals&&(n+=this.__cbOnceFinishSortVisuals.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnFinishSortVisuals)for(var r=0,l=this.__cbOnFinishSortVisuals.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnFinishSortVisuals[s],++i):--n}if(null!=this.__cbOnceFinishSortVisuals){var a=null,o=null;for(r=0,l=this.__cbOnceFinishSortVisuals.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceFinishSortVisuals[s],this.__cbOnceFinishSortVisuals[s]=null;var p=this.__cbOnceOwnerUnbindFinishSortVisuals[s];this.__cbOnceOwnerUnbindFinishSortVisuals[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindFinishSortVisuals[s]),o.push(this.__cbOnceFinishSortVisuals[s])}this.__cbOnceOwnerUnbindFinishSortVisuals=a,this.__cbOnceFinishSortVisuals=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onFinishSortVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishSortVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishSortVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFinishSortVisuals&&(this.__cbOnOwnerUnbindFinishSortVisuals=[]),this.__cbOnOwnerUnbindFinishSortVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFinishSortVisuals&&(this.__cbOnOwnerUnbindFinishSortVisuals=[]),this.__cbOnOwnerUnbindFinishSortVisuals.push(null);null==this.__cbOnFinishSortVisuals&&(this.__cbOnFinishSortVisuals=[]),this.__cbOnFinishSortVisuals.push(e)},onceFinishSortVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishSortVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishSortVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFinishSortVisuals&&(this.__cbOnceOwnerUnbindFinishSortVisuals=[]),this.__cbOnceOwnerUnbindFinishSortVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFinishSortVisuals&&(this.__cbOnceOwnerUnbindFinishSortVisuals=[]),this.__cbOnceOwnerUnbindFinishSortVisuals.push(null);null==this.__cbOnceFinishSortVisuals&&(this.__cbOnceFinishSortVisuals=[]),this.__cbOnceFinishSortVisuals.push(e)},offFinishSortVisuals:function(n){if(null!=n){var e;null!=this.__cbOnFinishSortVisuals&&-1!=(e=this.__cbOnFinishSortVisuals.indexOf(n))&&(this.__cbOnFinishSortVisuals.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFinishSortVisuals[e])&&l(),this.__cbOnOwnerUnbindFinishSortVisuals.splice(e,1)),null!=this.__cbOnceFinishSortVisuals&&-1!=(e=this.__cbOnceFinishSortVisuals.indexOf(n))&&(this.__cbOnceFinishSortVisuals.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFinishSortVisuals[e])&&l(),this.__cbOnceOwnerUnbindFinishSortVisuals.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFinishSortVisuals){for(var t=0,i=this.__cbOnOwnerUnbindFinishSortVisuals.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFinishSortVisuals[r])&&l()}this.__cbOnOwnerUnbindFinishSortVisuals=null}if(null!=this.__cbOnceOwnerUnbindFinishSortVisuals){for(t=0,i=this.__cbOnceOwnerUnbindFinishSortVisuals.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFinishSortVisuals[r])&&l()}this.__cbOnceOwnerUnbindFinishSortVisuals=null}this.__cbOnFinishSortVisuals=null,this.__cbOnceFinishSortVisuals=null}},listensFinishSortVisuals:function(){return null!=this.__cbOnFinishSortVisuals&&this.__cbOnFinishSortVisuals.length>0||null!=this.__cbOnceFinishSortVisuals&&this.__cbOnceFinishSortVisuals.length>0},emitBeginDraw:function(){var n=0;if(null!=this.__cbOnBeginDraw&&(n+=this.__cbOnBeginDraw.length),null!=this.__cbOnceBeginDraw&&(n+=this.__cbOnceBeginDraw.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnBeginDraw)for(var r=0,l=this.__cbOnBeginDraw.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnBeginDraw[s],++i):--n}if(null!=this.__cbOnceBeginDraw){var a=null,o=null;for(r=0,l=this.__cbOnceBeginDraw.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceBeginDraw[s],this.__cbOnceBeginDraw[s]=null;var p=this.__cbOnceOwnerUnbindBeginDraw[s];this.__cbOnceOwnerUnbindBeginDraw[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindBeginDraw[s]),o.push(this.__cbOnceBeginDraw[s])}this.__cbOnceOwnerUnbindBeginDraw=a,this.__cbOnceBeginDraw=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onBeginDraw:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginDraw because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginDraw(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginDraw&&(this.__cbOnOwnerUnbindBeginDraw=[]),this.__cbOnOwnerUnbindBeginDraw.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginDraw&&(this.__cbOnOwnerUnbindBeginDraw=[]),this.__cbOnOwnerUnbindBeginDraw.push(null);null==this.__cbOnBeginDraw&&(this.__cbOnBeginDraw=[]),this.__cbOnBeginDraw.push(e)},onceBeginDraw:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginDraw because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginDraw(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginDraw&&(this.__cbOnceOwnerUnbindBeginDraw=[]),this.__cbOnceOwnerUnbindBeginDraw.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginDraw&&(this.__cbOnceOwnerUnbindBeginDraw=[]),this.__cbOnceOwnerUnbindBeginDraw.push(null);null==this.__cbOnceBeginDraw&&(this.__cbOnceBeginDraw=[]),this.__cbOnceBeginDraw.push(e)},offBeginDraw:function(n){if(null!=n){var e;null!=this.__cbOnBeginDraw&&-1!=(e=this.__cbOnBeginDraw.indexOf(n))&&(this.__cbOnBeginDraw.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginDraw[e])&&l(),this.__cbOnOwnerUnbindBeginDraw.splice(e,1)),null!=this.__cbOnceBeginDraw&&-1!=(e=this.__cbOnceBeginDraw.indexOf(n))&&(this.__cbOnceBeginDraw.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginDraw[e])&&l(),this.__cbOnceOwnerUnbindBeginDraw.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginDraw){for(var t=0,i=this.__cbOnOwnerUnbindBeginDraw.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginDraw[r])&&l()}this.__cbOnOwnerUnbindBeginDraw=null}if(null!=this.__cbOnceOwnerUnbindBeginDraw){for(t=0,i=this.__cbOnceOwnerUnbindBeginDraw.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginDraw[r])&&l()}this.__cbOnceOwnerUnbindBeginDraw=null}this.__cbOnBeginDraw=null,this.__cbOnceBeginDraw=null}},listensBeginDraw:function(){return null!=this.__cbOnBeginDraw&&this.__cbOnBeginDraw.length>0||null!=this.__cbOnceBeginDraw&&this.__cbOnceBeginDraw.length>0},emitFinishDraw:function(){var n=0;if(null!=this.__cbOnFinishDraw&&(n+=this.__cbOnFinishDraw.length),null!=this.__cbOnceFinishDraw&&(n+=this.__cbOnceFinishDraw.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnFinishDraw)for(var r=0,l=this.__cbOnFinishDraw.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnFinishDraw[s],++i):--n}if(null!=this.__cbOnceFinishDraw){var a=null,o=null;for(r=0,l=this.__cbOnceFinishDraw.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceFinishDraw[s],this.__cbOnceFinishDraw[s]=null;var p=this.__cbOnceOwnerUnbindFinishDraw[s];this.__cbOnceOwnerUnbindFinishDraw[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindFinishDraw[s]),o.push(this.__cbOnceFinishDraw[s])}this.__cbOnceOwnerUnbindFinishDraw=a,this.__cbOnceFinishDraw=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onFinishDraw:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishDraw because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishDraw(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFinishDraw&&(this.__cbOnOwnerUnbindFinishDraw=[]),this.__cbOnOwnerUnbindFinishDraw.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFinishDraw&&(this.__cbOnOwnerUnbindFinishDraw=[]),this.__cbOnOwnerUnbindFinishDraw.push(null);null==this.__cbOnFinishDraw&&(this.__cbOnFinishDraw=[]),this.__cbOnFinishDraw.push(e)},onceFinishDraw:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event finishDraw because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFinishDraw(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFinishDraw&&(this.__cbOnceOwnerUnbindFinishDraw=[]),this.__cbOnceOwnerUnbindFinishDraw.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFinishDraw&&(this.__cbOnceOwnerUnbindFinishDraw=[]),this.__cbOnceOwnerUnbindFinishDraw.push(null);null==this.__cbOnceFinishDraw&&(this.__cbOnceFinishDraw=[]),this.__cbOnceFinishDraw.push(e)},offFinishDraw:function(n){if(null!=n){var e;null!=this.__cbOnFinishDraw&&-1!=(e=this.__cbOnFinishDraw.indexOf(n))&&(this.__cbOnFinishDraw.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFinishDraw[e])&&l(),this.__cbOnOwnerUnbindFinishDraw.splice(e,1)),null!=this.__cbOnceFinishDraw&&-1!=(e=this.__cbOnceFinishDraw.indexOf(n))&&(this.__cbOnceFinishDraw.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFinishDraw[e])&&l(),this.__cbOnceOwnerUnbindFinishDraw.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFinishDraw){for(var t=0,i=this.__cbOnOwnerUnbindFinishDraw.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFinishDraw[r])&&l()}this.__cbOnOwnerUnbindFinishDraw=null}if(null!=this.__cbOnceOwnerUnbindFinishDraw){for(t=0,i=this.__cbOnceOwnerUnbindFinishDraw.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFinishDraw[r])&&l()}this.__cbOnceOwnerUnbindFinishDraw=null}this.__cbOnFinishDraw=null,this.__cbOnceFinishDraw=null}},listensFinishDraw:function(){return null!=this.__cbOnFinishDraw&&this.__cbOnFinishDraw.length>0||null!=this.__cbOnceFinishDraw&&this.__cbOnceFinishDraw.length>0},emitLowMemory:function(){var n=0;if(null!=this.__cbOnLowMemory&&(n+=this.__cbOnLowMemory.length),null!=this.__cbOnceLowMemory&&(n+=this.__cbOnceLowMemory.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnLowMemory)for(var r=0,l=this.__cbOnLowMemory.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnLowMemory[s],++i):--n}if(null!=this.__cbOnceLowMemory){var a=null,o=null;for(r=0,l=this.__cbOnceLowMemory.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceLowMemory[s],this.__cbOnceLowMemory[s]=null;var p=this.__cbOnceOwnerUnbindLowMemory[s];this.__cbOnceOwnerUnbindLowMemory[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindLowMemory[s]),o.push(this.__cbOnceLowMemory[s])}this.__cbOnceOwnerUnbindLowMemory=a,this.__cbOnceLowMemory=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onLowMemory:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event lowMemory because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offLowMemory(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindLowMemory&&(this.__cbOnOwnerUnbindLowMemory=[]),this.__cbOnOwnerUnbindLowMemory.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindLowMemory&&(this.__cbOnOwnerUnbindLowMemory=[]),this.__cbOnOwnerUnbindLowMemory.push(null);null==this.__cbOnLowMemory&&(this.__cbOnLowMemory=[]),this.__cbOnLowMemory.push(e)},onceLowMemory:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event lowMemory because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offLowMemory(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindLowMemory&&(this.__cbOnceOwnerUnbindLowMemory=[]),this.__cbOnceOwnerUnbindLowMemory.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindLowMemory&&(this.__cbOnceOwnerUnbindLowMemory=[]),this.__cbOnceOwnerUnbindLowMemory.push(null);null==this.__cbOnceLowMemory&&(this.__cbOnceLowMemory=[]),this.__cbOnceLowMemory.push(e)},offLowMemory:function(n){if(null!=n){var e;null!=this.__cbOnLowMemory&&-1!=(e=this.__cbOnLowMemory.indexOf(n))&&(this.__cbOnLowMemory.splice(e,1),null!=(l=this.__cbOnOwnerUnbindLowMemory[e])&&l(),this.__cbOnOwnerUnbindLowMemory.splice(e,1)),null!=this.__cbOnceLowMemory&&-1!=(e=this.__cbOnceLowMemory.indexOf(n))&&(this.__cbOnceLowMemory.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindLowMemory[e])&&l(),this.__cbOnceOwnerUnbindLowMemory.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindLowMemory){for(var t=0,i=this.__cbOnOwnerUnbindLowMemory.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindLowMemory[r])&&l()}this.__cbOnOwnerUnbindLowMemory=null}if(null!=this.__cbOnceOwnerUnbindLowMemory){for(t=0,i=this.__cbOnceOwnerUnbindLowMemory.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindLowMemory[r])&&l()}this.__cbOnceOwnerUnbindLowMemory=null}this.__cbOnLowMemory=null,this.__cbOnceLowMemory=null}},listensLowMemory:function(){return null!=this.__cbOnLowMemory&&this.__cbOnLowMemory.length>0||null!=this.__cbOnceLowMemory&&this.__cbOnceLowMemory.length>0},emitTerminate:function(){var n=0;if(null!=this.__cbOnTerminate&&(n+=this.__cbOnTerminate.length),null!=this.__cbOnceTerminate&&(n+=this.__cbOnceTerminate.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnTerminate)for(var r=0,l=this.__cbOnTerminate.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnTerminate[s],++i):--n}if(null!=this.__cbOnceTerminate){var a=null,o=null;for(r=0,l=this.__cbOnceTerminate.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceTerminate[s],this.__cbOnceTerminate[s]=null;var p=this.__cbOnceOwnerUnbindTerminate[s];this.__cbOnceOwnerUnbindTerminate[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindTerminate[s]),o.push(this.__cbOnceTerminate[s])}this.__cbOnceOwnerUnbindTerminate=a,this.__cbOnceTerminate=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onTerminate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event terminate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTerminate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTerminate&&(this.__cbOnOwnerUnbindTerminate=[]),this.__cbOnOwnerUnbindTerminate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTerminate&&(this.__cbOnOwnerUnbindTerminate=[]),this.__cbOnOwnerUnbindTerminate.push(null);null==this.__cbOnTerminate&&(this.__cbOnTerminate=[]),this.__cbOnTerminate.push(e)},onceTerminate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event terminate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTerminate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTerminate&&(this.__cbOnceOwnerUnbindTerminate=[]),this.__cbOnceOwnerUnbindTerminate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTerminate&&(this.__cbOnceOwnerUnbindTerminate=[]),this.__cbOnceOwnerUnbindTerminate.push(null);null==this.__cbOnceTerminate&&(this.__cbOnceTerminate=[]),this.__cbOnceTerminate.push(e)},offTerminate:function(n){if(null!=n){var e;null!=this.__cbOnTerminate&&-1!=(e=this.__cbOnTerminate.indexOf(n))&&(this.__cbOnTerminate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTerminate[e])&&l(),this.__cbOnOwnerUnbindTerminate.splice(e,1)),null!=this.__cbOnceTerminate&&-1!=(e=this.__cbOnceTerminate.indexOf(n))&&(this.__cbOnceTerminate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTerminate[e])&&l(),this.__cbOnceOwnerUnbindTerminate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTerminate){for(var t=0,i=this.__cbOnOwnerUnbindTerminate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTerminate[r])&&l()}this.__cbOnOwnerUnbindTerminate=null}if(null!=this.__cbOnceOwnerUnbindTerminate){for(t=0,i=this.__cbOnceOwnerUnbindTerminate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTerminate[r])&&l()}this.__cbOnceOwnerUnbindTerminate=null}this.__cbOnTerminate=null,this.__cbOnceTerminate=null}},listensTerminate:function(){return null!=this.__cbOnTerminate&&this.__cbOnTerminate.length>0||null!=this.__cbOnceTerminate&&this.__cbOnceTerminate.length>0},_onceImmediateWithOwner:function(n,e){this._onceImmediate((function(){(null==n||n._lifecycleState>=0)&&e()}))},_onceImmediate:function(n){if(null==n)throw haxe_Exception.thrown("Immediate callback should not be null!");this.immediateCallbacksLen<this.immediateCallbacksCapacity?(this.immediateCallbacks[this.immediateCallbacksLen]=n,this.immediateCallbacksLen++):(this.immediateCallbacks[this.immediateCallbacksLen++]=n,this.immediateCallbacksCapacity++)},_oncePostFlushImmediateWithOwner:function(n,e,t){this._oncePostFlushImmediate((function(){(null==n||n._lifecycleState>=0)&&e()}),t)},_oncePostFlushImmediate:function(n,e){var t=this;e?ceramic_App.app._onceImmediate((function(){var e=!1;null==e&&(e=!0),t._oncePostFlushImmediate(n,e)})):0==this.immediateCallbacksLen?n():this.postFlushImmediateCallbacksLen<this.postFlushImmediateCallbacksCapacity?(this.postFlushImmediateCallbacks[this.postFlushImmediateCallbacksLen]=n,this.postFlushImmediateCallbacksLen++):(this.postFlushImmediateCallbacks[this.postFlushImmediateCallbacksLen++]=n,this.postFlushImmediateCallbacksCapacity++)},flushImmediate:function(){for(var n=!1;this.immediateCallbacksLen>0;){n=!0;var e=(p=ceramic_ArrayPool.pool(this.immediateCallbacksLen)).get(),t=this.immediateCallbacksLen;this.immediateCallbacksLen=0;for(var i=0,r=t;i<r;){var l=i++;e.vector[l]=this.immediateCallbacks[l],this.immediateCallbacks[l]=null}for(var s=0,a=t;s<a;){var o=s++;(0,e.vector[o])()}p.release(e)}if(this.postFlushImmediateCallbacksLen>0){var p;e=(p=ceramic_ArrayPool.pool(this.postFlushImmediateCallbacksLen)).get(),t=this.postFlushImmediateCallbacksLen;this.postFlushImmediateCallbacksLen=0;for(i=0,r=t;i<r;){l=i++;e.vector[l]=this.postFlushImmediateCallbacks[l],this.postFlushImmediateCallbacks[l]=null}for(i=0,r=t;i<r;){l=i++;(0,e.vector[l])()}p.release(e)}return n},onceXUpdates:function(n,e,t){var i=this._xUpdatesHandlersPool,r=i.availableItems.length>0?i.availableItems.pop():null;null==r&&(r=new ceramic_AppXUpdatesHandler),r.owner=n,r.numUpdates=e,r.callback=t;for(var l=!1,s=0,a=this._xUpdatesHandlers.length;s<a;){var o=s++;if(null==this._xUpdatesHandlers[o]){this._xUpdatesHandlers[o]=r,l=!0;break}}l||this._xUpdatesHandlers.push(r)},offXUpdates:function(n){for(var e=!1,t=0,i=this._xUpdatesHandlers.length;t<i;){var r=t++,l=this._xUpdatesHandlers[r];l.callback==n&&(l.reset(),this._xUpdatesHandlersPool.recycle(l),this._xUpdatesHandlers[r]=null,e=!0)}e&&this.cleanXUpdatesNullValues()},tickOnceXUpdates:function(){for(var n=0,e=!1,t=0,i=this._xUpdatesHandlers.length;t<i;){var r=t++,l=this._xUpdatesHandlers[r];if(null!=l&&(l.numUpdates--,l.numUpdates<=0)){var s=l.owner;(null==s||s._lifecycleState>=0)&&(this._xUpdatesToCallNow[n]=l.callback,++n),this._xUpdatesHandlers[r]=null,e=!0}}if(n>0)for(t=0,i=n;t<i;){r=t++;var a=this._xUpdatesToCallNow[r];this._xUpdatesToCallNow[r]=null,a()}e&&this.cleanXUpdatesNullValues()},cleanXUpdatesNullValues:function(){for(var n=0,e=0,t=this._xUpdatesHandlers.length;n<t;){for(;;){if(null!=this._xUpdatesHandlers[n])break;if(++e,!(++n<t))break}if(0!=e&&n<t){var i=n-e;this._xUpdatesHandlers[i]=this._xUpdatesHandlers[n]}++n}var r=this._xUpdatesHandlers,l=t-e;r.length!=l&&(r.length>l?r.splice(l,r.length-l):r[l-1]=null)},requestFullUpdateAndDrawInFrame:function(){this.inUpdate&&(this.shouldUpdateAndDrawAgain=!0)},get_computedFps:function(){return this._computeFps.fps},get_scenes:function(){return this.lazyScenes&&(this.lazyScenes=!1,this.scenes=ceramic_SceneSystem.get_shared()),this.scenes},set_scenes:function(n){return this.scenes=n},quit:function(){ceramic_PlatformSpecific.quit()},backendReady:function(){var n=this;if(this.backend.onUpdate(this,$bind(this,this.updatePreReady)),this.persistent=new ceramic_PersistentData("app"),this.textInput=new ceramic_TextInput,this.bindSettings(),this.screen.backendReady(),null!=ceramic_App.preInitCallbacks){for(var e=0,t=[].concat(ceramic_App.preInitCallbacks);e<t.length;){var i=t[e];++e,i()}ceramic_App.preInitCallbacks=null}this.initFieldConverters(),null!=this.settings.collections&&this.initCollections(this.settings.collections(),this.settings.appInfo),this.nape=new ceramic_NapeSystem,this.assets.add(this.settings.defaultShader),this.assets.add("shader:msdf"),this.assets.add("shader:pixelArt"),this.assets.onceComplete(this,(function(e){n.assets.add(n.settings.defaultFont),n.assets.add("image:white"),n.assets.onceComplete(n,(function(e){e?(n.defaultFont=n.assets.font(n.settings.defaultFont),n.defaultWhiteTexture=n.assets.texture("image:white"),n.defaultTexturedShader=n.assets.shader(n.settings.defaultShader),n.logger.success("Default assets loaded.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/App.hx",lineNumber:848,className:"ceramic.App",methodName:"backendReady"}),n.assetsLoaded()):ceramic_App.app.logger.error("Failed to load default assets.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/App.hx",lineNumber:851,className:"ceramic.App",methodName:"backendReady"})})),n.emitDefaultAssetsLoad(n.assets),n.assets.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/App.hx",lineNumber:859,className:"ceramic.App",methodName:"backendReady"}),n.assets.immediate.flush(),n.flushImmediate()})),this.assets.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/App.hx",lineNumber:865,className:"ceramic.App",methodName:"backendReady"}),this.assets.immediate.flush(),this.flushImmediate()},bindSettings:function(){this.settings.onTargetFpsChange(this,(function(n,e){ceramic_App.app.backend.setTargetFps(n)})),ceramic_App.app.backend.setTargetFps(this.settings.get_targetFps())},initFieldConverters:function(){var n=this.converters,e=new ceramic_ConvertTexture;n.h["ceramic.Texture"]=e;n=this.converters,e=new ceramic_ConvertFont;n.h["ceramic.BitmapFont"]=e;n=this.converters,e=new ceramic_ConvertFragmentData;n.h["ceramic.FragmentData"]=e;n=this.converters,e=new ceramic_ConvertMap;n.h["Map<String,String>"]=e;n=this.converters,e=new ceramic_ConvertMap;n.h["Map<String,Bool>"]=e;n=this.converters,e=new ceramic_ConvertMap;n.h["ceramic.ReadOnlyMap<String,String>"]=e;n=this.converters,e=new ceramic_ConvertMap;n.h["ceramic.ReadOnlyMap<String,Bool>"]=e;n=this.converters,e=new ceramic_ConvertArray;n.h["Array<Float>"]=e;n=this.converters,e=new ceramic_ConvertArray;n.h["Array<Int>"]=e;n=this.converters,e=new ceramic_ConvertArray;n.h["Array<String>"]=e;n=this.converters,e=new ceramic_ConvertArray;n.h["ceramic.ReadOnlyArray<Float>"]=e;n=this.converters,e=new ceramic_ConvertArray;n.h["ceramic.ReadOnlyArray<Int>"]=e;n=this.converters,e=new ceramic_ConvertArray;n.h["ceramic.ReadOnlyArray<String>"]=e;n=this.converters,e=new ceramic_ConvertComponentMap;n.h["Map<String,ceramic.Component>"]=e;n=this.converters,e=new ceramic_ConvertComponentMap;n.h["ceramic.ReadOnlyMap<String,ceramic.Component>"]=e;n=this.converters,e=new ceramic_ConvertIntBoolMap;n.h["ceramic.IntBoolMap"]=e},initCollections:function(n,e){var i=this;null==e&&(e=this.info);for(var r=Object.create(null),l=0,s=0,a=Reflect.fields(e.collections);s<a.length;){var o=a[s];++s;for(var p=0,h=Reflect.fields(Reflect.field(e.collections,o));p<h.length;){var u=h[p];++p;var _=Reflect.field(Reflect.field(e.collections,o),u);if("string"!=typeof _){var c=_.data;null!=c&&(Object.prototype.hasOwnProperty.call(r,c)||(r[c]=!0,this.assets.addDatabase(c),++l))}}}l>0&&this.assets.onceComplete(this,(function(r){for(var l=0,s=Reflect.fields(e.collections);l<s.length;){var a=s[l];++l;for(var o=0,p=Reflect.fields(Reflect.field(e.collections,a));o<p.length;){var h=p[o];++o;var u=Reflect.field(Reflect.field(e.collections,a),h);if("string"!=typeof u){var _=u.data;if(null!=_){for(var c=i.assets.database(_),d=Reflect.field(n,h),f=u.type,x=t[f],b=0;b<c.length;){var y=c[b];++b;var v=Type.createInstance(x,[null,null]);v.setRawData(y),d.push(v)}d.synchronize()}}}}}))},assetsLoaded:function(){this.runNextLoader()},runNextLoader:function(){this.loaders.length>0?this.loaders.shift()($bind(this,this.runNextLoader)):(this.loaders=null,this.runReady())},runReady:function(){var n=this;ceramic_PlatformSpecific.postAppInit(),this.emitReady(),this.screen.resize(),this.backend.offUpdate($bind(this,this.updatePreReady)),this.backend.onUpdate(this,$bind(this,this.update)),this.backend.input.onKeyDown(this,(function(e){n.beginUpdateCallbacks.push((function(){n.input.emitKeyDown(e)}))})),this.backend.input.onKeyUp(this,(function(e){n.beginUpdateCallbacks.push((function(){n.input.emitKeyUp(e)}))})),this.backend.input.onGamepadEnable(this,(function(e,t){n.beginUpdateCallbacks.push((function(){n.input.emitGamepadEnable(e,t)}))})),this.backend.input.onGamepadDisable(this,(function(e){n.beginUpdateCallbacks.push((function(){n.input.emitGamepadDisable(e)}))})),this.backend.input.onGamepadDown(this,(function(e,t){n.beginUpdateCallbacks.push((function(){n.input.emitGamepadDown(e,t)}))})),this.backend.input.onGamepadUp(this,(function(e,t){n.beginUpdateCallbacks.push((function(){n.input.emitGamepadUp(e,t)}))})),this.backend.input.onGamepadGyro(this,(function(e,t,i,r){n.beginUpdateCallbacks.push((function(){n.input.emitGamepadGyro(e,t,i,r)}))})),this.backend.input.onGamepadAxis(this,(function(e,t,i){n.beginUpdateCallbacks.push((function(){n.input.emitGamepadAxis(e,t,i)}))}))},updatePreReady:function(n){ceramic_Assets.flushAllInstancesImmediate(),this.flushImmediate()},update:function(n){++this.frame>999999999&&(this.frame-=999999999);var e=n;e>this.settings.get_maxDelta()&&(e=this.settings.get_maxDelta()),this.settings.get_overrideDelta()>=0&&(e=this.settings.get_overrideDelta()),this._computeFps.addFrame(e),this.delta=e,this.realDelta=n,ceramic_Timer.update(e,n),ceramic_Runner.tick(),this.screen.updatePointerOverState(e),this.inUpdate=!0,this.shouldUpdateAndDrawAgain=!0;for(var t=!0;this.shouldUpdateAndDrawAgain;){this.shouldUpdateAndDrawAgain=!1;var i=t?e:0;if(this.screen.resetDeltas(),this.input.resetDeltas(),this.beginUpdateCallbacks.length>0){var r=this.beginUpdateCallbacks;this.beginUpdateCallbacks=[];for(var l=0;l<r.length;){var s=r[l];++l,s()}}for(this.emitPreUpdate(i),this.systems.earlyUpdate(e),ceramic_Assets.flushAllInstancesImmediate(),this.flushImmediate(),i>0&&(ceramic_Tween.tick(e),this.flushImmediate()),this.emitUpdate(i),this.tickOnceXUpdates(),this.flushImmediate(),this.systems.lateUpdate(e),this.emitPostUpdate(i),this.flushImmediate();this.disposedEntities.length>0;){this.disposedEntities.shift().destroy()}this.syncPendingVisuals();for(var a=this.visuals,o=0,p=!1,h=!1;;){this.visualsContentDirty=!1;var u=this.screen.matrix;u.changedDirty&&(u.changed=u.tx!=u._txPrev||u.ty!=u._tyPrev||u.a!=u._aPrev||u.b!=u._bPrev||u.c!=u._cPrev||u.d!=u._dPrev,u.changedDirty=!1),this.screen.matrix.changed&&this.screen.matrix.emitChange();for(var _=0,c=a.length;_<c;){var d=a[_++];d._lifecycleState>=0&&(d.touchableDirty&&d.computeTouchable(),d.contentDirty&&(d.visibilityDirty&&d.computeVisibility(),d.computedVisible&&d.computeContent()))}for(var f=0,x=a.length;f<x;){var b=a[f++];if(b._lifecycleState>=0&&null!=b.transform){var y=b.transform;y.changedDirty&&(y.changed=y.tx!=y._txPrev||y.ty!=y._tyPrev||y.a!=y._aPrev||y.b!=y._bPrev||y.c!=y._cPrev||y.d!=y._dPrev,y.changedDirty=!1),b.transform.changed&&b.transform.emitChange()}}if(o++>9999){if(p&&this.visualsContentDirty)throw haxe_Exception.thrown("Failed to update visuals because flushImmediate() is being called continuously and visuals content stays dirty.");if(p)throw haxe_Exception.thrown("Failed to update visuals because flushImmediate() is being called continuously.");for(var v=0,m=a.length;v<m;){var g=a[v++];if(g._lifecycleState>=0&&g.contentDirty)throw haxe_Exception.thrown("Failed to update visuals because visuals content stays dirty. ("+Std.string(g)+")")}}if(p=this.flushImmediate(),h=this.syncPendingVisuals(),!(p||this.visualsContentDirty||h))break}for(var z=0,w=this.renderTextures.length;z<w;){var O=z++,C=this.renderTextures[O];null!=C.dependingTextures&&(C.dependingTextures.h={})}for(var E=0,U=a.length;E<U;){var M=a[E++];if(M._lifecycleState>=0&&(M.renderTargetDirty&&M.computeRenderTarget(),M.matrixDirty&&M.computeMatrix(),M.visibilityDirty&&M.computeVisibility(),M.computedVisible&&(M.clipDirty&&M.computeClip(),null!=M.computedRenderTarget)))if(null!=M.asQuad){if(null!=M.asQuad._texture){var T=M.computedRenderTarget,k=M.asQuad._texture;if(null==T.dependingTextures){var D=new haxe_ds_IntMap;T.dependingTextures=D}var S=T.dependingTextures.h[0|k.index],A=(null!=S?S:0)+1;T.dependingTextures.h[0|k.index]=A}}else if(null!=M.asMesh&&null!=M.asMesh.texture){var P=M.computedRenderTarget,V=M.asMesh.texture;if(null==P.dependingTextures){var I=new haxe_ds_IntMap;P.dependingTextures=I}var N=P.dependingTextures.h[0|V.index],F=(null!=N?N:0)+1;P.dependingTextures.h[0|V.index]=F}}this.computeHierarchy();var R=this.renderTextures;if(0!=R.length){for(var L=R.length,B=0,G=L;B<G;){R[B++].priority=0}for(var j=0,K=L;j<K;)for(var W=R[j++],Y=0,X=L;Y<X;){var H,Z=R[Y++];if(null!=W.dependingTextures){var q=W.dependingTextures.h[0|Z.index];H=(null!=q?q:0)>0}else H=!1;H&&Z.priority<=W.priority&&(Z.priority=W.priority+1)}for(var $=0,Q=L;$<Q;)for(var J=R[$++],nn=0,en=L;nn<en;){var tn,rn=R[nn++];if(null!=J.dependingTextures){var ln=J.dependingTextures.h[0|rn.index];tn=(null!=ln?ln:0)>0}else tn=!1;tn&&rn.priority<=J.priority&&(rn.priority=J.priority+1)}}this.syncDestroyedVisuals();var sn=this.visuals;this.emitBeginSortVisuals(),ceramic_SortVisuals.rec(sn,0,sn.length),this.emitFinishSortVisuals(),t=!1,this.emitBeginDraw(),this.backend.draw.draw(this.visuals),this.emitFinishDraw()}this.inUpdate=!1},addVisual:function(n){this.pendingVisuals.push(n)},removeVisual:function(n){this.destroyedVisuals.push(n)},syncPendingVisuals:function(){if(this.pendingVisuals.length>0){for(;this.pendingVisuals.length>0;)this.visuals.push(this.pendingVisuals.pop());return this.hierarchyDirty=!0,!0}return!1},syncDestroyedVisuals:function(){if(this.destroyedVisuals.length>0){for(var n=0,e=0,t=this.visuals.length;n<t;){for(;;){if(!(this.visuals[n]._lifecycleState<0))break;if(++e,!(++n<t))break}if(0!=e&&n<t){var i=n-e;this.visuals[i]=this.visuals[n]}++n}if(0!=(r=this.destroyedVisuals).length)if(r.length>0)r.splice(0,r.length);else r[-1]=null;var r,l=t-e;if((r=this.visuals).length!=l)if(r.length>l)r.splice(l,r.length-l);else r[l-1]=null;this.hierarchyDirty=!0}},updateVisuals:function(n){for(var e=0,t=!1,i=!1;;){this.visualsContentDirty=!1,(f=this.screen.matrix).changedDirty&&(f.changed=f.tx!=f._txPrev||f.ty!=f._tyPrev||f.a!=f._aPrev||f.b!=f._bPrev||f.c!=f._cPrev||f.d!=f._dPrev,f.changedDirty=!1),this.screen.matrix.changed&&this.screen.matrix.emitChange();for(var r=0,l=n.length;r<l;){(d=n[_=r++])._lifecycleState>=0&&(d.touchableDirty&&d.computeTouchable(),d.contentDirty&&(d.visibilityDirty&&d.computeVisibility(),d.computedVisible&&d.computeContent()))}for(var s=0,a=n.length;s<a;){var o=n[s++];if(o._lifecycleState>=0&&null!=o.transform)(m=o.transform).changedDirty&&(m.changed=m.tx!=m._txPrev||m.ty!=m._tyPrev||m.a!=m._aPrev||m.b!=m._bPrev||m.c!=m._cPrev||m.d!=m._dPrev,m.changedDirty=!1),o.transform.changed&&o.transform.emitChange()}if(e++>9999){if(t&&this.visualsContentDirty)throw haxe_Exception.thrown("Failed to update visuals because flushImmediate() is being called continuously and visuals content stays dirty.");if(t)throw haxe_Exception.thrown("Failed to update visuals because flushImmediate() is being called continuously.");for(var p=0,h=n.length;p<h;){var u=n[p++];if(u._lifecycleState>=0&&u.contentDirty)throw haxe_Exception.thrown("Failed to update visuals because visuals content stays dirty. ("+Std.string(u)+")")}}if(t=this.flushImmediate(),i=this.syncPendingVisuals(),!(t||this.visualsContentDirty||i))break}for(r=0,l=this.renderTextures.length;r<l;){var _=r++,c=this.renderTextures[_];null!=c.dependingTextures&&(c.dependingTextures.h={})}for(r=0,l=n.length;r<l;){var d;if((d=n[_=r++])._lifecycleState>=0&&(d.renderTargetDirty&&d.computeRenderTarget(),d.matrixDirty&&d.computeMatrix(),d.visibilityDirty&&d.computeVisibility(),d.computedVisible&&(d.clipDirty&&d.computeClip(),null!=d.computedRenderTarget)))if(null!=d.asQuad){if(null!=d.asQuad._texture){var f=d.computedRenderTarget,x=d.asQuad._texture;if(null==f.dependingTextures){var b=new haxe_ds_IntMap;f.dependingTextures=b}var y=f.dependingTextures.h[0|x.index],v=(null!=y?y:0)+1;f.dependingTextures.h[0|x.index]=v}}else if(null!=d.asMesh&&null!=d.asMesh.texture){var m=d.computedRenderTarget,g=d.asMesh.texture;if(null==m.dependingTextures){var z=new haxe_ds_IntMap;m.dependingTextures=z}var w=m.dependingTextures.h[0|g.index],O=(null!=w?w:0)+1;m.dependingTextures.h[0|g.index]=O}}},computeHierarchy:function(){if(this.hierarchyDirty){for(var n=0,e=this.visuals.length;n<e;){var t=n++,i=this.visuals[t];i._lifecycleState>=0&&null==i.parent&&(i.computedDepth=1e3*i.depth,null!=i.children&&ceramic_Visual._computeChildrenDepth0(i))}this.hierarchyDirty=!1}},computeRenderTexturesPriority:function(n){if(0!=n.length){for(var e=n.length,t=0,i=e;t<i;){n[t++].priority=0}for(t=0,i=e;t<i;)for(var r=n[t++],l=0,s=e;l<s;){var a=n[l++];if(null!=r.dependingTextures)o=(null!=(p=r.dependingTextures.h[0|a.index])?p:0)>0;else o=!1;o&&a.priority<=r.priority&&(a.priority=r.priority+1)}for(t=0,i=e;t<i;)for(r=n[t++],l=0,s=e;l<s;){var o,p;a=n[l++];if(null!=r.dependingTextures)o=(null!=(p=r.dependingTextures.h[0|a.index])?p:0)>0;else o=!1;o&&a.priority<=r.priority&&(a.priority=r.priority+1)}}},sortVisuals:function(n){this.emitBeginSortVisuals(),ceramic_SortVisuals.rec(n,0,n.length),this.emitFinishSortVisuals()},group:function(n,e){null==e&&(e=!0);for(var t=0,i=this.groups.length;t<i;){var r=t++,l=this.groups[r];if(l.id==n)return l}return e?new ceramic_Group(n):null},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offReady(),this.offUpdate(),this.offPreUpdate(),this.offPostUpdate(),this.offDefaultAssetsLoad(),this.offCriticalError(),this.offBeginEnterBackground(),this.offFinishEnterBackground(),this.offBeginEnterForeground(),this.offFinishEnterForeground(),this.offBeginSortVisuals(),this.offFinishSortVisuals(),this.offBeginDraw(),this.offFinishDraw(),this.offLowMemory(),this.offTerminate()},__class__:ceramic_App,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_scenes:"set_scenes",get_scenes:"get_scenes",get_computedFps:"get_computedFps"})});var ceramic_AppXUpdatesHandler=function(){this.callback=null,this.numUpdates=-1,this.owner=null};t["ceramic.AppXUpdatesHandler"]=ceramic_AppXUpdatesHandler,ceramic_AppXUpdatesHandler.__name__="ceramic.AppXUpdatesHandler",ceramic_AppXUpdatesHandler.prototype={reset:function(){this.owner=null,this.numUpdates=-1,this.callback=null},__class__:ceramic_AppXUpdatesHandler};var ceramic_ArrayPool=function(n){this.nextFree=0,this.arrays=null,this.arrayLengths=n};t["ceramic.ArrayPool"]=ceramic_ArrayPool,ceramic_ArrayPool.__name__="ceramic.ArrayPool",ceramic_ArrayPool.pool=function(n){return n<=10?ceramic_ArrayPool.dynPool10:n<=100?ceramic_ArrayPool.dynPool100:n<=1e3?ceramic_ArrayPool.dynPool1000:n<=1e4?ceramic_ArrayPool.dynPool10000:n<=1e5?ceramic_ArrayPool.dynPool100000:(ceramic_ArrayPool.didNotifyLargePool||(ceramic_ArrayPool.didNotifyLargePool=!0,ceramic_Timer.schedule(null,.5,(function(){ceramic_ArrayPool.didNotifyLargePool=!1}),-1),ceramic_App.app.logger.warning("You should avoid asking a pool for arrays with more than 100000 elements (asked: "+n+") because it needs allocating a temporary one-time pool each time for that.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ArrayPool.hx",lineNumber:45,className:"ceramic.ArrayPool",methodName:"pool"})),new ceramic_ArrayPool(n))},ceramic_ArrayPool.prototype={get:function(){if(null==this.arrays)this.arrays=new ceramic_ReusableArray(ceramic_ArrayPool.ALLOC_STEP);else if(this.nextFree>=this.arrays.length){var n=this.arrays;n.set_length(n.length+ceramic_ArrayPool.ALLOC_STEP)}var e=this.arrays.vector[this.nextFree];for(null==e&&(e=new ceramic_ReusableArray(this.arrayLengths),this.arrays.vector[this.nextFree]=e),e._poolIndex=this.nextFree;this.nextFree++,this.nextFree!=this.arrays.length;){var t=this.arrays.vector[this.nextFree];if(null==t)break;if(-1==t._poolIndex)break}return e},release:function(n){var e=n._poolIndex;n._poolIndex=-1,this.nextFree>e&&(this.nextFree=e);for(var t=0,i=n.length;t<i;){var r=t++;n.vector[r]=null}},__class__:ceramic_ArrayPool};var ceramic_Assert=function(){};t["ceramic.Assert"]=ceramic_Assert,ceramic_Assert.__name__="ceramic.Assert";var tracker_Observable=function(){};t["tracker.Observable"]=tracker_Observable,tracker_Observable.__name__="tracker.Observable",tracker_Observable.__isInterface__=!0;var ceramic_Asset=function(n,e,t){this.hotReload=!1,this.handleTexturesDensityChange=!1,this.unobservedStatus=a.NONE,this.statusAutoruns=null,this.refCount=0,this.assets=null,this.density=1,this.observedDirty=!1,ceramic_Entity.call(this),this.kind=n,this.options=null!=t?t:{},this.set_name(e),this.computePath()};t["ceramic.Asset"]=ceramic_Asset,ceramic_Asset.__name__="ceramic.Asset",ceramic_Asset.__interfaces__=[tracker_Observable],ceramic_Asset.__super__=ceramic_Entity,ceramic_Asset.prototype=$extend(ceramic_Entity.prototype,{emitObservedDirty:function(n,e){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnObservedDirty)for(var s=0,a=this.__cbOnObservedDirty.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnObservedDirty[o],++l):--t}if(null!=this.__cbOnceObservedDirty){var p=null,h=null;for(s=0,a=this.__cbOnceObservedDirty.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceObservedDirty[o],this.__cbOnceObservedDirty[o]=null;var u=this.__cbOnceOwnerUnbindObservedDirty[o];this.__cbOnceOwnerUnbindObservedDirty[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindObservedDirty[o]),h.push(this.__cbOnceObservedDirty[o])}this.__cbOnceOwnerUnbindObservedDirty=p,this.__cbOnceObservedDirty=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(e)},onceObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(e)},offObservedDirty:function(n){if(null!=n){var e;null!=this.__cbOnObservedDirty&&-1!=(e=this.__cbOnObservedDirty.indexOf(n))&&(this.__cbOnObservedDirty.splice(e,1),null!=(l=this.__cbOnOwnerUnbindObservedDirty[e])&&l(),this.__cbOnOwnerUnbindObservedDirty.splice(e,1)),null!=this.__cbOnceObservedDirty&&-1!=(e=this.__cbOnceObservedDirty.indexOf(n))&&(this.__cbOnceObservedDirty.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindObservedDirty[e])&&l(),this.__cbOnceOwnerUnbindObservedDirty.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindObservedDirty[r])&&l()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindObservedDirty[r])&&l()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&this.__cbOnObservedDirty.length>0||null!=this.__cbOnceObservedDirty&&this.__cbOnceObservedDirty.length>0},emitComplete:function(n){n&&null!=this.owner&&this.owner.emitUpdate(this);var e=0;if(null!=this.__cbOnComplete&&(e+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(e+=this.__cbOnceComplete.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnComplete)for(var l=0,s=this.__cbOnComplete.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnComplete[a],++r):--e}if(null!=this.__cbOnceComplete){var o=null,p=null;for(l=0,s=this.__cbOnceComplete.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceComplete[a],this.__cbOnceComplete[a]=null;var h=this.__cbOnceOwnerUnbindComplete[a];this.__cbOnceOwnerUnbindComplete[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindComplete[a]),p.push(this.__cbOnceComplete[a])}this.__cbOnceOwnerUnbindComplete=o,this.__cbOnceComplete=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onComplete:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event complete because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offComplete(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(e)},onceComplete:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event complete because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offComplete(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(e)},offComplete:function(n){if(null!=n){var e;null!=this.__cbOnComplete&&-1!=(e=this.__cbOnComplete.indexOf(n))&&(this.__cbOnComplete.splice(e,1),null!=(l=this.__cbOnOwnerUnbindComplete[e])&&l(),this.__cbOnOwnerUnbindComplete.splice(e,1)),null!=this.__cbOnceComplete&&-1!=(e=this.__cbOnceComplete.indexOf(n))&&(this.__cbOnceComplete.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindComplete[e])&&l(),this.__cbOnceOwnerUnbindComplete.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindComplete[r])&&l()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindComplete[r])&&l()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&this.__cbOnComplete.length>0||null!=this.__cbOnceComplete&&this.__cbOnceComplete.length>0},get_status:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.statusAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.statusAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedStatus},set_status:function(n){var e=this.unobservedStatus;if(this.unobservedStatus=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStatusChange(n,e);var t=this.statusAutoruns;if(null!=t){this.statusAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateStatus:function(){var n=this.unobservedStatus;this.emitStatusChange(n,n);var e=this.statusAutoruns;if(null!=e){this.statusAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitStatusChange:function(n,e){var t=0;if(null!=this.__cbOnStatusChange&&(t+=this.__cbOnStatusChange.length),null!=this.__cbOnceStatusChange&&(t+=this.__cbOnceStatusChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnStatusChange)for(var s=0,a=this.__cbOnStatusChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnStatusChange[o],++l):--t}if(null!=this.__cbOnceStatusChange){var p=null,h=null;for(s=0,a=this.__cbOnceStatusChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceStatusChange[o],this.__cbOnceStatusChange[o]=null;var u=this.__cbOnceOwnerUnbindStatusChange[o];this.__cbOnceOwnerUnbindStatusChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindStatusChange[o]),h.push(this.__cbOnceStatusChange[o])}this.__cbOnceOwnerUnbindStatusChange=p,this.__cbOnceStatusChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onStatusChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event statusChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStatusChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(null);null==this.__cbOnStatusChange&&(this.__cbOnStatusChange=[]),this.__cbOnStatusChange.push(e)},onceStatusChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event statusChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStatusChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(null);null==this.__cbOnceStatusChange&&(this.__cbOnceStatusChange=[]),this.__cbOnceStatusChange.push(e)},offStatusChange:function(n){if(null!=n){var e;null!=this.__cbOnStatusChange&&-1!=(e=this.__cbOnStatusChange.indexOf(n))&&(this.__cbOnStatusChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindStatusChange[e])&&l(),this.__cbOnOwnerUnbindStatusChange.splice(e,1)),null!=this.__cbOnceStatusChange&&-1!=(e=this.__cbOnceStatusChange.indexOf(n))&&(this.__cbOnceStatusChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindStatusChange[e])&&l(),this.__cbOnceOwnerUnbindStatusChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindStatusChange){for(var t=0,i=this.__cbOnOwnerUnbindStatusChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindStatusChange[r])&&l()}this.__cbOnOwnerUnbindStatusChange=null}if(null!=this.__cbOnceOwnerUnbindStatusChange){for(t=0,i=this.__cbOnceOwnerUnbindStatusChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindStatusChange[r])&&l()}this.__cbOnceOwnerUnbindStatusChange=null}this.__cbOnStatusChange=null,this.__cbOnceStatusChange=null}},listensStatusChange:function(){return null!=this.__cbOnStatusChange&&this.__cbOnStatusChange.length>0||null!=this.__cbOnceStatusChange&&this.__cbOnceStatusChange.length>0},load:function(){this.set_status(a.BROKEN),ceramic_App.app.logger.error("This asset as no load implementation.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Asset.hx",lineNumber:95,className:"ceramic.Asset",methodName:"load"}),this.emitComplete(!1)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),null!=this.owner&&(this.owner.removeAsset(this),this.owner=null),null!=this.assets&&(this.assets.destroy(),this.assets=null))},computePath:function(e,t,i){if(null==i&&null!=this.runtimeAssets&&(i=this.runtimeAssets),null==e)switch(this.kind){case"atlas":e=["atlas"];break;case"database":e=["csv"];break;case"font":e=["fnt"];break;case"fragments":e=["fragments"];break;case"image":e=["png","jpg","jpeg"];break;case"shader":e=["frag","vert"];break;case"sound":ceramic_App.app.backend.info;if(null!=backend_Info._soundExtensions)e=[].concat(backend_Info._soundExtensions);else{backend_Info._soundExtensions=[];var r=new Audio,l=null!=n.navigator?n.navigator.userAgent:"",s=backend_Info.RE_OPERA.match(l)&&parseInt(backend_Info.RE_OPERA.matched(0).split("/")[1],10)<33,a=-1!=l.indexOf("Safari")&&-1==l.indexOf("Chrome"),o=backend_Info.RE_SAFARI_VERSION.match(l),p=(a&&o&&parseInt(backend_Info.RE_SAFARI_VERSION.matched(1),10),r.canPlayType('audio/ogg; codecs="vorbis"'));null!=p&&"no"!=p&&""!=p&&backend_Info._soundExtensions.push("ogg");var h=r.canPlayType("audio/mpeg;"),u=r.canPlayType("audio/mp3;");!s&&(null!=h&&"no"!=h&&""!=h||null!=u&&"no"!=u&&""!=u)&&backend_Info._soundExtensions.push("mp3");var _=r.canPlayType("audio/x-flac;"),c=r.canPlayType("audio/flac;");(null!=_&&"no"!=_&&""!=_||null!=c&&"no"!=c&&""!=c)&&backend_Info._soundExtensions.push("flac");var d=r.canPlayType('audio/wav; codecs="1"'),f=r.canPlayType("audio/wav;");(null!=d&&"no"!=d&&""!=d||null!=f&&"no"!=f&&""!=f)&&backend_Info._soundExtensions.push("wav"),e=[].concat(backend_Info._soundExtensions)}break;case"text":e=["txt","json","fnt","atlas"];break;default:e=null}if((null==e||null==t)&&Object.prototype.hasOwnProperty.call(ceramic_Assets.customAssetKinds.h,this.kind)){var x=ceramic_Assets.customAssetKinds.h[this.kind];null==e&&(e=x.extensions),null==t&&(t=x.dir)}null==e&&(e=[]),null==t&&(t=!1);var b=ceramic_App.app.screen.get_texturesDensity(),y=null,v=[],m=null,g=t?null!=i?i.getLists().allDirsByName:ceramic_Assets.allDirsByName:null!=i?i.getLists().allByName:ceramic_Assets.allByName,z=this.name;if(null==y&&null!=z&&ceramic_Path.isAbsolute(z)&&(y=z),e.length>0){for(var w=0;w<e.length;){var O=e[w];if(++w,StringTools.endsWith(z,"."+O)){z=HxOverrides.substr(z,0,z.length-O.length-1);break}}var C=!1;if(Object.prototype.hasOwnProperty.call(g.h,z)){var E=g.h[z];for(w=0;w<e.length;){O=e[w];++w;for(var U=99999999999,M=0;M<E.length;){var T=E[M];++M;var k=ceramic_Assets.decodePath(T);if(k.extension==O){if(!C){var D=Math.abs(b-k.density);D<U&&(U=D,k.density,y=k.path,m=k)}v.push(k.path)}}null!=y&&(C=!0)}}}if(null==y&&(y=z),this.allPaths=v,this.set_path(y),null!=m&&null!=m.flags)for(var S=m.flags.h,A=Object.keys(S),P=A.length,V=0;V<P;){var I=A[V++];Object.prototype.hasOwnProperty.call(this.options,I)||(this.options[I]=m.flags.h[I])}},set_path:function(n){return this.path==n||(this.get_status()==a.READY&&this.set_status(a.NONE),this.path=n,this.density=null==n?1:ceramic_Assets.decodePath(n).density),n},set_name:function(n){return this.name==n||(this.name=n,this.id="asset:"+this.kind+":"+n),n},set_runtimeAssets:function(n){return this.runtimeAssets==n||(this.runtimeAssets=n,this.computePath()),n},set_handleTexturesDensityChange:function(n){return this.handleTexturesDensityChange==n||(this.handleTexturesDensityChange=n,n?ceramic_App.app.screen.onTexturesDensityChange(this,$bind(this,this.texturesDensityDidChange)):ceramic_App.app.screen.offTexturesDensityChange($bind(this,this.texturesDensityDidChange))),n},texturesDensityDidChange:function(n,e){},set_hotReload:function(n){return this.hotReload==n||(this.hotReload=n,n?this.owner.onAssetFilesChange(this,$bind(this,this.assetFilesDidChange)):this.owner.offAssetFilesChange($bind(this,this.assetFilesDidChange))),n},assetFilesDidChange:function(n,e){},toString:function(){var n=this.className();return null!=this.path&&""!=StringTools.trim(this.path)?n+"("+this.name+" "+this.path+")":n+"("+this.name+")"},willEmitComplete:function(n){n&&null!=this.owner&&this.owner.emitUpdate(this)},retain:function(){this.refCount++},release:function(){0==this.refCount?ceramic_App.app.logger.warning("Called release() on asset "+Std.string(this)+" when its refCount is already 0 (destroyed="+Std.string(this._lifecycleState<0)+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Asset.hx",lineNumber:365,className:"ceramic.Asset",methodName:"release"}):this.refCount--},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offStatusChange(),this.offComplete()},__class__:ceramic_Asset,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_hotReload:"set_hotReload",set_handleTexturesDensityChange:"set_handleTexturesDensityChange",set_status:"set_status",get_status:"get_status",set_runtimeAssets:"set_runtimeAssets",set_path:"set_path",set_name:"set_name"})});var ceramic_AssetPathInfo=function(n){this.path=n;var e=n.lastIndexOf(".");this.extension=HxOverrides.substr(n,e+1,null).toLowerCase();var t=HxOverrides.substr(n,0,e),i=t.lastIndexOf("@");if(this.density=1,-1==i)i=e;else for(var r=0,l=HxOverrides.substr(t,i+1,null).split("+");r<l.length;){var s=l[r];++r;var a=!0;if(StringTools.endsWith(s,"x")){var o=parseFloat(HxOverrides.substr(s,0,s.length-1));isNaN(o)||(this.density=o,a=!1)}if(a){null==this.flags&&(this.flags=new haxe_ds_StringMap);var p=s.indexOf("=");if(-1==p)this.flags.h[s]=!0;else{var h=HxOverrides.substr(s,0,p),u=HxOverrides.substr(s,p+1,null);this.flags.h[h]=u}}}this.name=HxOverrides.substr(n,0,Math.min(i,e))};t["ceramic.AssetPathInfo"]=ceramic_AssetPathInfo,ceramic_AssetPathInfo.__name__="ceramic.AssetPathInfo",ceramic_AssetPathInfo.prototype={toString:function(){return""+Std.string({extension:this.extension,name:this.name,path:this.path,density:this.density})},__class__:ceramic_AssetPathInfo};var a=i["ceramic.AssetStatus"]={__ename__:"ceramic.AssetStatus",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"ceramic.AssetStatus",toString:$estr},LOADING:{_hx_name:"LOADING",_hx_index:1,__enum__:"ceramic.AssetStatus",toString:$estr},READY:{_hx_name:"READY",_hx_index:2,__enum__:"ceramic.AssetStatus",toString:$estr},BROKEN:{_hx_name:"BROKEN",_hx_index:3,__enum__:"ceramic.AssetStatus",toString:$estr}};a.__constructs__=[a.NONE,a.LOADING,a.READY,a.BROKEN];var ceramic_AtlasAsset=function(n,e){this.unobservedAtlas=null,this.atlasAutoruns=null,ceramic_Asset.call(this,"atlas",n,e),this.set_handleTexturesDensityChange(!0),this.assets=new ceramic_Assets};t["ceramic.AtlasAsset"]=ceramic_AtlasAsset,ceramic_AtlasAsset.__name__="ceramic.AtlasAsset",ceramic_AtlasAsset.__super__=ceramic_Asset,ceramic_AtlasAsset.prototype=$extend(ceramic_Asset.prototype,{emitReplaceAtlas:function(n,e){var t=0;if(null!=this.__cbOnReplaceAtlas&&(t+=this.__cbOnReplaceAtlas.length),null!=this.__cbOnceReplaceAtlas&&(t+=this.__cbOnceReplaceAtlas.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnReplaceAtlas)for(var s=0,a=this.__cbOnReplaceAtlas.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnReplaceAtlas[o],++l):--t}if(null!=this.__cbOnceReplaceAtlas){var p=null,h=null;for(s=0,a=this.__cbOnceReplaceAtlas.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceReplaceAtlas[o],this.__cbOnceReplaceAtlas[o]=null;var u=this.__cbOnceOwnerUnbindReplaceAtlas[o];this.__cbOnceOwnerUnbindReplaceAtlas[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindReplaceAtlas[o]),h.push(this.__cbOnceReplaceAtlas[o])}this.__cbOnceOwnerUnbindReplaceAtlas=p,this.__cbOnceReplaceAtlas=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onReplaceAtlas:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceAtlas because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceAtlas(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReplaceAtlas&&(this.__cbOnOwnerUnbindReplaceAtlas=[]),this.__cbOnOwnerUnbindReplaceAtlas.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReplaceAtlas&&(this.__cbOnOwnerUnbindReplaceAtlas=[]),this.__cbOnOwnerUnbindReplaceAtlas.push(null);null==this.__cbOnReplaceAtlas&&(this.__cbOnReplaceAtlas=[]),this.__cbOnReplaceAtlas.push(e)},onceReplaceAtlas:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceAtlas because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceAtlas(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReplaceAtlas&&(this.__cbOnceOwnerUnbindReplaceAtlas=[]),this.__cbOnceOwnerUnbindReplaceAtlas.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReplaceAtlas&&(this.__cbOnceOwnerUnbindReplaceAtlas=[]),this.__cbOnceOwnerUnbindReplaceAtlas.push(null);null==this.__cbOnceReplaceAtlas&&(this.__cbOnceReplaceAtlas=[]),this.__cbOnceReplaceAtlas.push(e)},offReplaceAtlas:function(n){if(null!=n){var e;null!=this.__cbOnReplaceAtlas&&-1!=(e=this.__cbOnReplaceAtlas.indexOf(n))&&(this.__cbOnReplaceAtlas.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReplaceAtlas[e])&&l(),this.__cbOnOwnerUnbindReplaceAtlas.splice(e,1)),null!=this.__cbOnceReplaceAtlas&&-1!=(e=this.__cbOnceReplaceAtlas.indexOf(n))&&(this.__cbOnceReplaceAtlas.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReplaceAtlas[e])&&l(),this.__cbOnceOwnerUnbindReplaceAtlas.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceAtlas){for(var t=0,i=this.__cbOnOwnerUnbindReplaceAtlas.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReplaceAtlas[r])&&l()}this.__cbOnOwnerUnbindReplaceAtlas=null}if(null!=this.__cbOnceOwnerUnbindReplaceAtlas){for(t=0,i=this.__cbOnceOwnerUnbindReplaceAtlas.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReplaceAtlas[r])&&l()}this.__cbOnceOwnerUnbindReplaceAtlas=null}this.__cbOnReplaceAtlas=null,this.__cbOnceReplaceAtlas=null}},listensReplaceAtlas:function(){return null!=this.__cbOnReplaceAtlas&&this.__cbOnReplaceAtlas.length>0||null!=this.__cbOnceReplaceAtlas&&this.__cbOnceReplaceAtlas.length>0},get_atlas:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.atlasAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.atlasAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedAtlas},set_atlas:function(n){var e=this.unobservedAtlas;if(this.unobservedAtlas=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitAtlasChange(n,e);var t=this.atlasAutoruns;if(null!=t){this.atlasAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateAtlas:function(){var n=this.unobservedAtlas;this.emitAtlasChange(n,n);var e=this.atlasAutoruns;if(null!=e){this.atlasAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitAtlasChange:function(n,e){var t=0;if(null!=this.__cbOnAtlasChange&&(t+=this.__cbOnAtlasChange.length),null!=this.__cbOnceAtlasChange&&(t+=this.__cbOnceAtlasChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnAtlasChange)for(var s=0,a=this.__cbOnAtlasChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnAtlasChange[o],++l):--t}if(null!=this.__cbOnceAtlasChange){var p=null,h=null;for(s=0,a=this.__cbOnceAtlasChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceAtlasChange[o],this.__cbOnceAtlasChange[o]=null;var u=this.__cbOnceOwnerUnbindAtlasChange[o];this.__cbOnceOwnerUnbindAtlasChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindAtlasChange[o]),h.push(this.__cbOnceAtlasChange[o])}this.__cbOnceOwnerUnbindAtlasChange=p,this.__cbOnceAtlasChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onAtlasChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event atlasChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offAtlasChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindAtlasChange&&(this.__cbOnOwnerUnbindAtlasChange=[]),this.__cbOnOwnerUnbindAtlasChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindAtlasChange&&(this.__cbOnOwnerUnbindAtlasChange=[]),this.__cbOnOwnerUnbindAtlasChange.push(null);null==this.__cbOnAtlasChange&&(this.__cbOnAtlasChange=[]),this.__cbOnAtlasChange.push(e)},onceAtlasChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event atlasChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offAtlasChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindAtlasChange&&(this.__cbOnceOwnerUnbindAtlasChange=[]),this.__cbOnceOwnerUnbindAtlasChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindAtlasChange&&(this.__cbOnceOwnerUnbindAtlasChange=[]),this.__cbOnceOwnerUnbindAtlasChange.push(null);null==this.__cbOnceAtlasChange&&(this.__cbOnceAtlasChange=[]),this.__cbOnceAtlasChange.push(e)},offAtlasChange:function(n){if(null!=n){var e;null!=this.__cbOnAtlasChange&&-1!=(e=this.__cbOnAtlasChange.indexOf(n))&&(this.__cbOnAtlasChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindAtlasChange[e])&&l(),this.__cbOnOwnerUnbindAtlasChange.splice(e,1)),null!=this.__cbOnceAtlasChange&&-1!=(e=this.__cbOnceAtlasChange.indexOf(n))&&(this.__cbOnceAtlasChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindAtlasChange[e])&&l(),this.__cbOnceOwnerUnbindAtlasChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindAtlasChange){for(var t=0,i=this.__cbOnOwnerUnbindAtlasChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindAtlasChange[r])&&l()}this.__cbOnOwnerUnbindAtlasChange=null}if(null!=this.__cbOnceOwnerUnbindAtlasChange){for(t=0,i=this.__cbOnceOwnerUnbindAtlasChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindAtlasChange[r])&&l()}this.__cbOnceOwnerUnbindAtlasChange=null}this.__cbOnAtlasChange=null,this.__cbOnceAtlasChange=null}},listensAtlasChange:function(){return null!=this.__cbOnAtlasChange&&this.__cbOnAtlasChange.length>0||null!=this.__cbOnceAtlasChange&&this.__cbOnceAtlasChange.length>0},load:function(){var n=this;null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets);for(var e=[],t=this.assets.iterator();t.hasNext();){var i=t.next();e.push(i)}if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load atlas asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:46,className:"ceramic.AtlasAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);ceramic_App.app.logger.info("Load atlas "+this.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:52,className:"ceramic.AtlasAsset",methodName:"load"}),this.assets.runtimeAssets=this.runtimeAssets,(t=new ceramic_TextAsset(this.name)).set_handleTexturesDensityChange(!1),t.set_path(this.path),this.assets.addAsset(t),this.assets.onceComplete(this,(function(i){var r=t.get_text();if(null!=r)try{var l=ceramic_TextureAtlasParser.parse(r);l.id="atlas:"+n.path;for(var s=[],o=0,p=l.pages.length;o<p;){var h=o++,u=l.pages[h].name,_=ceramic_Path.directory(n.path);null!=_&&_.length>0&&(u=ceramic_Path.join([_,u]));var c=ceramic_Assets.decodePath(u),d=new ceramic_ImageAsset(c.name);d.set_handleTexturesDensityChange(!1),d.set_path(c.path),n.assets.addAsset(d),s.push(d)}n.assets.onceComplete(n,(function(t){if(t){for(var i=0,r=s.length;i<r;){var o=i++,p=s[o];l.pages[o].set_texture(p.get_texture())}l.computeFrames();var h=n.get_atlas();if(l.asset=n,n.set_atlas(l),null!=h){n.emitReplaceAtlas(n.get_atlas(),h);for(i=0,r=[].concat(ceramic_App.app.visuals);i<r.length;){var u=r[i];if(++i,u._lifecycleState>=0&&null!=u.asQuad){var _=u.asQuad;if(null!=_.tile&&_.tile instanceof ceramic_TextureAtlasRegion){var c=_.tile;if(null!=c&&c.atlas==h){var d=c.name;if(null!=d){var f=l.region(d);null!=f?_.set_tile(f):_.set_tile(null)}else _.set_tile(null)}}}}h.asset=null,h.destroy()}for(i=0;i<e.length;){p=e[i];if(++i,p instanceof ceramic_ImageAsset){var x=p;-1==s.indexOf(x)&&p.destroy()}else p.destroy()}n.set_status(a.READY),n.emitComplete(!0),n.handleTexturesDensityChange&&n.checkTexturesDensity()}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load textures for atlas at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:177,className:"ceramic.AtlasAsset",methodName:"load"}),n.emitComplete(!1)})),n.assets.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:183,className:"ceramic.AtlasAsset",methodName:"load"})}catch(o){n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to decode atlas data at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:187,className:"ceramic.AtlasAsset",methodName:"load"}),n.emitComplete(!1)}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load atlas data at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:193,className:"ceramic.AtlasAsset",methodName:"load"}),n.emitComplete(!1)})),this.assets.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:198,className:"ceramic.AtlasAsset",methodName:"load"})},texturesDensityDidChange:function(n,e){this.get_status()==a.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var n=this.path;this.computePath(),n!=this.path&&(ceramic_App.app.logger.info("Reload atlas ("+n+" -> "+this.path+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:219,className:"ceramic.AtlasAsset",methodName:"checkTexturesDensity"}),this.load())},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload atlas (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/AtlasAsset.hx",lineNumber:240,className:"ceramic.AtlasAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),null!=this.get_atlas()&&(this.get_atlas().destroy(),this.set_atlas(null)))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offReplaceAtlas(),this.offAtlasChange()},__class__:ceramic_AtlasAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_atlas:"set_atlas",get_atlas:"get_atlas"})});var ceramic_Audio=function(){ceramic_Entity.call(this),this.mixers=new ceramic_IntMap,this.mixers.exists(0)||this.mixers.set(0,new ceramic_AudioMixer(0))};t["ceramic.Audio"]=ceramic_Audio,ceramic_Audio.__name__="ceramic.Audio",ceramic_Audio.__super__=ceramic_Entity,ceramic_Audio.prototype=$extend(ceramic_Entity.prototype,{initMixerIfNeeded:function(n){this.mixers.exists(n)||this.mixers.set(n,new ceramic_AudioMixer(n))},mixer:function(n){this.mixers.exists(n)||this.mixers.set(n,new ceramic_AudioMixer(n));var e=this.mixers,t=e.keys.h[0|n];return(n=null!=t?t:0)>=2?e.values[n-2]:ceramic_IntMap.RET_NULL},__class__:ceramic_Audio});var ceramic_AudioMixer=function(n){this.mute=!1,this.pitch=1,this.pan=0,this.volume=.5,ceramic_Entity.call(this),this.index=n};t["ceramic.AudioMixer"]=ceramic_AudioMixer,ceramic_AudioMixer.__name__="ceramic.AudioMixer",ceramic_AudioMixer.__super__=ceramic_Entity,ceramic_AudioMixer.prototype=$extend(ceramic_Entity.prototype,{__class__:ceramic_AudioMixer});var ceramic_AutoCollections=function(){};t["ceramic.AutoCollections"]=ceramic_AutoCollections,ceramic_AutoCollections.__name__="ceramic.AutoCollections",ceramic_AutoCollections.__isInterface__=!0;var ceramic_BackgroundQueue=function(n){null==n&&(n=.1),this.pending=[],this.stop=!1,this.runsInBackground=!1,this.checkInterval=.1,ceramic_Entity.call(this),this.checkInterval=.1};t["ceramic.BackgroundQueue"]=ceramic_BackgroundQueue,ceramic_BackgroundQueue.__name__="ceramic.BackgroundQueue",ceramic_BackgroundQueue.__super__=ceramic_Entity,ceramic_BackgroundQueue.prototype=$extend(ceramic_Entity.prototype,{schedule:function(n){ceramic_App.app._onceImmediate(n)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),this.stop=!0)},__class__:ceramic_BackgroundQueue});var ceramic_BezierEasing=function(n,e,t,i){if(this.quadratic=!1,this.cached=!1,this.linearEasing=!1,this.cached&&this.removeFromCache(this.mX1,this.mY1,this.mX2,this.mY2),null==t||null==i?(this.quadratic=!0,this.mQuadraticX1=n,this.mQuadraticX2=t,this.mX1=ceramic_BezierEasing.TWO_THIRD*n,this.mY1=ceramic_BezierEasing.TWO_THIRD*e,this.mX2=1+ceramic_BezierEasing.TWO_THIRD*(n-1),this.mY2=1+ceramic_BezierEasing.TWO_THIRD*(e-1)):(this.quadratic=!1,this.mX1=n,this.mY1=e,this.mX2=t,this.mY2=i),this.mX1==this.mY1&&this.mX2==this.mY2)this.linearEasing=!0;else{this.linearEasing=!1,null==this.sampleValues&&(this.sampleValues=[]);for(var r=0,l=ceramic_BezierEasing.SPLINE_TABLE_SIZE;r<l;){var s=r++,a=s*ceramic_BezierEasing.SAMPLE_STEP_SIZE,o=this.mX1,p=this.mX2;this.sampleValues[s]=(((1-3*p+3*o)*a+(3*p-6*o))*a+3*o)*a}}};t["ceramic.BezierEasing"]=ceramic_BezierEasing,ceramic_BezierEasing.__name__="ceramic.BezierEasing",ceramic_BezierEasing.quadraticToCubicCP1=function(n){return ceramic_BezierEasing.TWO_THIRD*n},ceramic_BezierEasing.quadraticToCubicCP2=function(n){return 1+ceramic_BezierEasing.TWO_THIRD*(n-1)},ceramic_BezierEasing.cacheKey=function(n,e,t,i){return 0|100*n+1e3*e+1e4*t+1e5*i},ceramic_BezierEasing.clearCache=function(){ceramic_BezierEasing.cachedInstances=null,ceramic_BezierEasing.numCachedInstances=0},ceramic_BezierEasing.get=function(n,e,t,i){var r=null==t||null==i,l=r?ceramic_BezierEasing.TWO_THIRD*n:n,s=r?ceramic_BezierEasing.TWO_THIRD*e:e,a=r?1+ceramic_BezierEasing.TWO_THIRD*(n-1):t,o=r?1+ceramic_BezierEasing.TWO_THIRD*(e-1):i,p=null,h=0|100*l+1e3*s+1e4*a+1e5*o;null==ceramic_BezierEasing.cachedInstances&&(ceramic_BezierEasing.cachedInstances=new ceramic_IntMap);var u=ceramic_BezierEasing.cachedInstances,_=u.keys.h[0|h],c=null!=_?_:0,d=c>=2?u.values[c-2]:ceramic_IntMap.RET_NULL;if(null==d)ceramic_BezierEasing.numCachedInstances>=ceramic_BezierEasing.CACHE_SIZE&&ceramic_BezierEasing.clearCache(),p=new ceramic_BezierEasing(l,s,a,o),ceramic_BezierEasing.cachedInstances.set(h,[p]),ceramic_BezierEasing.numCachedInstances++;else{for(var f=d.length-1;f>=0;){var x=d[f];if(x.mX1==l&&x.mY1==s&&x.mX2==a&&x.mY2==o){p=x;break}--f}null==p&&((p=new ceramic_BezierEasing(n,e,t,i)).cached=!0,d.push(p))}return p},ceramic_BezierEasing.prototype={configure:function(n,e,t,i){if(this.cached&&this.removeFromCache(this.mX1,this.mY1,this.mX2,this.mY2),null==t||null==i?(this.quadratic=!0,this.mQuadraticX1=n,this.mQuadraticX2=t,this.mX1=ceramic_BezierEasing.TWO_THIRD*n,this.mY1=ceramic_BezierEasing.TWO_THIRD*e,this.mX2=1+ceramic_BezierEasing.TWO_THIRD*(n-1),this.mY2=1+ceramic_BezierEasing.TWO_THIRD*(e-1)):(this.quadratic=!1,this.mX1=n,this.mY1=e,this.mX2=t,this.mY2=i),this.mX1==this.mY1&&this.mX2==this.mY2)this.linearEasing=!0;else{this.linearEasing=!1,null==this.sampleValues&&(this.sampleValues=[]);for(var r=0,l=ceramic_BezierEasing.SPLINE_TABLE_SIZE;r<l;){var s=r++,a=s*ceramic_BezierEasing.SAMPLE_STEP_SIZE,o=this.mX1,p=this.mX2;this.sampleValues[s]=(((1-3*p+3*o)*a+(3*p-6*o))*a+3*o)*a}}},ease:function(n){if(this.linearEasing)return n;if(0==n)return 0;if(1==n)return 1;for(var e=0,t=1,i=ceramic_BezierEasing.SPLINE_TABLE_SIZE-1;t!=i&&this.sampleValues[t]<=n;)e+=ceramic_BezierEasing.SAMPLE_STEP_SIZE,++t;--t;var r,l=e+(n-this.sampleValues[t])/(this.sampleValues[t+1]-this.sampleValues[t])*ceramic_BezierEasing.SAMPLE_STEP_SIZE,s=this.mX1,a=3*(1-3*(f=this.mX2)+3*s)*l*l+2*(3*f-6*s)*l+3*s;if(a>=ceramic_BezierEasing.NEWTON_MIN_SLOPE)r=this.newtonRaphsonIterate(n,l,this.mX1,this.mX2);else if(0==a)r=l;else{for(var o,p,h=e,u=e+ceramic_BezierEasing.SAMPLE_STEP_SIZE,_=this.mX1,c=this.mX2,d=0;(o=(((1-3*c+3*_)*(p=h+(u-h)/2)+(3*c-6*_))*p+3*_)*p-n)>0?u=p:h=p,Math.abs(o)>ceramic_BezierEasing.SUBDIVISION_PRECISION&&++d<ceramic_BezierEasing.SUBDIVISION_MAX_ITERATIONS;);r=p}var f;s=this.mY1;return(((1-3*(f=this.mY2)+3*s)*r+(3*f-6*s))*r+3*s)*r},getTForX:function(n){for(var e=0,t=1,i=ceramic_BezierEasing.SPLINE_TABLE_SIZE-1;t!=i&&this.sampleValues[t]<=n;)e+=ceramic_BezierEasing.SAMPLE_STEP_SIZE,++t;--t;var r=e+(n-this.sampleValues[t])/(this.sampleValues[t+1]-this.sampleValues[t])*ceramic_BezierEasing.SAMPLE_STEP_SIZE,l=this.mX1,s=this.mX2,a=3*(1-3*s+3*l)*r*r+2*(3*s-6*l)*r+3*l;if(a>=ceramic_BezierEasing.NEWTON_MIN_SLOPE)return this.newtonRaphsonIterate(n,r,this.mX1,this.mX2);if(0==a)return r;for(var o,p,h=e,u=e+ceramic_BezierEasing.SAMPLE_STEP_SIZE,_=this.mX1,c=this.mX2,d=0;(o=(((1-3*c+3*_)*(p=h+(u-h)/2)+(3*c-6*_))*p+3*_)*p-n)>0?u=p:h=p,Math.abs(o)>ceramic_BezierEasing.SUBDIVISION_PRECISION&&++d<ceramic_BezierEasing.SUBDIVISION_MAX_ITERATIONS;);return p},calcBezier:function(n,e,t){return(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n},getSlope:function(n,e,t){return 3*(1-3*t+3*e)*n*n+2*(3*t-6*e)*n+3*e},binarySubdivide:function(n,e,t,i,r){for(var l,s,a=0;(l=(((1-3*r+3*i)*(s=e+(t-e)/2)+(3*r-6*i))*s+3*i)*s-n)>0?t=s:e=s,Math.abs(l)>ceramic_BezierEasing.SUBDIVISION_PRECISION&&++a<ceramic_BezierEasing.SUBDIVISION_MAX_ITERATIONS;);return s},newtonRaphsonIterate:function(n,e,t,i){for(var r=0,l=ceramic_BezierEasing.NEWTON_ITERATIONS;r<l;){r++;var s=3*(1-3*i+3*t)*e*e+2*(3*i-6*t)*e+3*t;if(0==s)return e;e-=((((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e-n)/s}return e},A:function(n,e){return 1-3*e+3*n},B:function(n,e){return 3*e-6*n},C:function(n){return 3*n},removeFromCache:function(n,e,t,i){this.cached=!1;var r=0|100*n+1e3*e+1e4*t+1e5*i;if(null!=ceramic_BezierEasing.cachedInstances){var l=ceramic_BezierEasing.cachedInstances,s=l.keys.h[0|r],a=null!=s?s:0,o=a>=2?l.values[a-2]:ceramic_IntMap.RET_NULL;null!=o&&(1==o.length&&o[0]==this?ceramic_BezierEasing.cachedInstances.remove(r):HxOverrides.remove(o,this))}},__class__:ceramic_BezierEasing};var ceramic_BinaryAsset=function(n,e){this.unobservedBytes=null,this.bytesAutoruns=null,ceramic_Asset.call(this,"binary",n,e)};t["ceramic.BinaryAsset"]=ceramic_BinaryAsset,ceramic_BinaryAsset.__name__="ceramic.BinaryAsset",ceramic_BinaryAsset.__super__=ceramic_Asset,ceramic_BinaryAsset.prototype=$extend(ceramic_Asset.prototype,{get_bytes:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.bytesAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.bytesAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedBytes},set_bytes:function(n){var e=this.unobservedBytes;if(this.unobservedBytes=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitBytesChange(n,e);var t=this.bytesAutoruns;if(null!=t){this.bytesAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateBytes:function(){var n=this.unobservedBytes;this.emitBytesChange(n,n);var e=this.bytesAutoruns;if(null!=e){this.bytesAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitBytesChange:function(n,e){var t=0;if(null!=this.__cbOnBytesChange&&(t+=this.__cbOnBytesChange.length),null!=this.__cbOnceBytesChange&&(t+=this.__cbOnceBytesChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnBytesChange)for(var s=0,a=this.__cbOnBytesChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnBytesChange[o],++l):--t}if(null!=this.__cbOnceBytesChange){var p=null,h=null;for(s=0,a=this.__cbOnceBytesChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceBytesChange[o],this.__cbOnceBytesChange[o]=null;var u=this.__cbOnceOwnerUnbindBytesChange[o];this.__cbOnceOwnerUnbindBytesChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindBytesChange[o]),h.push(this.__cbOnceBytesChange[o])}this.__cbOnceOwnerUnbindBytesChange=p,this.__cbOnceBytesChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onBytesChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event bytesChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBytesChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBytesChange&&(this.__cbOnOwnerUnbindBytesChange=[]),this.__cbOnOwnerUnbindBytesChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBytesChange&&(this.__cbOnOwnerUnbindBytesChange=[]),this.__cbOnOwnerUnbindBytesChange.push(null);null==this.__cbOnBytesChange&&(this.__cbOnBytesChange=[]),this.__cbOnBytesChange.push(e)},onceBytesChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event bytesChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBytesChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBytesChange&&(this.__cbOnceOwnerUnbindBytesChange=[]),this.__cbOnceOwnerUnbindBytesChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBytesChange&&(this.__cbOnceOwnerUnbindBytesChange=[]),this.__cbOnceOwnerUnbindBytesChange.push(null);null==this.__cbOnceBytesChange&&(this.__cbOnceBytesChange=[]),this.__cbOnceBytesChange.push(e)},offBytesChange:function(n){if(null!=n){var e;null!=this.__cbOnBytesChange&&-1!=(e=this.__cbOnBytesChange.indexOf(n))&&(this.__cbOnBytesChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBytesChange[e])&&l(),this.__cbOnOwnerUnbindBytesChange.splice(e,1)),null!=this.__cbOnceBytesChange&&-1!=(e=this.__cbOnceBytesChange.indexOf(n))&&(this.__cbOnceBytesChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBytesChange[e])&&l(),this.__cbOnceOwnerUnbindBytesChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBytesChange){for(var t=0,i=this.__cbOnOwnerUnbindBytesChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBytesChange[r])&&l()}this.__cbOnOwnerUnbindBytesChange=null}if(null!=this.__cbOnceOwnerUnbindBytesChange){for(t=0,i=this.__cbOnceOwnerUnbindBytesChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBytesChange[r])&&l()}this.__cbOnceOwnerUnbindBytesChange=null}this.__cbOnBytesChange=null,this.__cbOnceBytesChange=null}},listensBytesChange:function(){return null!=this.__cbOnBytesChange&&this.__cbOnBytesChange.length>0||null!=this.__cbOnceBytesChange&&this.__cbOnceBytesChange.length>0},load:function(){var n=this;if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load binary asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:21,className:"ceramic.BinaryAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=Reflect.fields(this.options);t<i.length;){var r=i[t];++t,e[r]=Reflect.field(this.options,r)}var l=this.path,s=ceramic_Assets.realAssetPath(l,this.runtimeAssets),o=ceramic_Assets.getReloadCount(s);o>0&&(s+="?hot="+o,l+="?hot="+o),ceramic_App.app.logger.info("Load binary "+l,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:47,className:"ceramic.BinaryAsset",methodName:"load"}),ceramic_App.app.backend.binaries.load(s,e,(function(e){null!=e?(n.set_bytes(e),n.set_status(a.READY),n.emitComplete(!0)):(n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load binary at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:57,className:"ceramic.BinaryAsset",methodName:"load"}),n.emitComplete(!1))}))},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload binary (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/BinaryAsset.hx",lineNumber:80,className:"ceramic.BinaryAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),this.set_bytes(null))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offBytesChange()},__class__:ceramic_BinaryAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_bytes:"set_bytes",get_bytes:"get_bytes"})});var ceramic_BitmapFont=function(n,e){if(this._preRenderingPages=null,this.preRenderedPages=null,this.pageShaders=null,this.pages=new ceramic_IntMap(16,.5,!0),ceramic_Entity.call(this),this.set_fontData(n),null==n)throw haxe_Exception.thrown("BitmapFont: fontData is null");if(null==e)throw haxe_Exception.thrown("BitmapFont: pages is null");null!=n.distanceField&&(this.pageShaders=new haxe_ds_IntMap);for(var t=0,i=n.pages;t<i.length;){var r=i[t];++t;var l=r.file;null!=n.path&&n.path.length>0&&"."!=n.path&&(l=ceramic_Path.join([n.path,r.file]));var s=e.h[l];if(null==s)throw haxe_Exception.thrown("BitmapFont: missing texture for file "+r.file);if(this.pages.set(r.id,s),null!=n.distanceField){var a=ceramic_App.app.assets.shader("shader:msdf").clone();ceramic_App.app.backend.shaders;a.backendItem.uniforms.setFloat("pxRange",n.distanceField.distanceRange);ceramic_App.app.backend.shaders;a.backendItem.uniforms.setVector2("texSize",s.width*s.density,s.height*s.density),this.pageShaders.h[r.id]=a}}};t["ceramic.BitmapFont"]=ceramic_BitmapFont,ceramic_BitmapFont.__name__="ceramic.BitmapFont",ceramic_BitmapFont.__super__=ceramic_Entity,ceramic_BitmapFont.prototype=$extend(ceramic_Entity.prototype,{set_fontData:function(n){return this.fontData=n,null!=n&&(this.spaceChar=n.chars.get(32),null==n.chars.get(160)&&n.chars.set(160,this.spaceChar)),n},get_face:function(){return this.fontData.face},set_face:function(n){return this.fontData.face=n},get_pointSize:function(){return this.fontData.pointSize},set_pointSize:function(n){return this.fontData.pointSize=n},get_baseSize:function(){return this.fontData.baseSize},set_baseSize:function(n){return this.fontData.baseSize=n},get_chars:function(){return this.fontData.chars},set_chars:function(n){return this.fontData.chars=n},get_charCount:function(){return this.fontData.charCount},set_charCount:function(n){return this.fontData.charCount=n},get_lineHeight:function(){return this.fontData.lineHeight},set_lineHeight:function(n){return this.fontData.lineHeight=n},get_kernings:function(){return this.fontData.kernings},set_kernings:function(n){return this.fontData.kernings=n},get_msdf:function(){return null!=this.fontData.distanceField&&"msdf"==this.fontData.distanceField.fieldType},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),null!=this.pages){for(var n=this.pages.iterableKeys,e=0,t=n.length;e<t;){var i=e++;(s=this.pages.get(n[i])).destroy()}this.pages=null}if(null!=this.pageShaders){for(var r=this.pageShaders.iterator();r.hasNext();){r.next().destroy()}this.pageShaders=null}if(null!=this.preRenderedPages){for(var l=this.preRenderedPages.iterator();l.hasNext();)for(var s=l.next().iterator();s.hasNext();){s.next().destroy()}this.preRenderedPages=null}}},needsToPreRenderAtSize:function(n){if(null==this.preRenderedPages||!this.preRenderedPages.h.hasOwnProperty(n))return!0;for(var e=this.preRenderedPages.h[n],t=0,i=this.pages.iterableKeys;t<i.length;){var r=i[t];if(++t,!e.h.hasOwnProperty(r))return!0}return!1},preRenderAtSize:function(n,e){for(var t=0,i=0,r=this.pages.iterableKeys;i<r.length;){var l=r[i];++i,t+=1,this.preRenderPage(l,n,(function(){0==(t-=1)&&(e(),e=null)}))}},preRenderPage:function(n,e,t){var i,r,l=this;if((null==this.preRenderedPages&&(this.preRenderedPages=new haxe_ds_IntMap),null!=this._preRenderingPages)&&null!=(i=this._preRenderingPages.h[e]))return void(null!=(r=i.h[n])&&r.push(t));null==this._preRenderingPages&&(this._preRenderingPages=new haxe_ds_IntMap),null==(i=this._preRenderingPages.h[e])&&(i=new haxe_ds_IntMap,this._preRenderingPages.h[e]=i),null==(r=i.h[n])&&(r=[],i.h[n]=r);var s=this.preRenderedPages.h[e],a=this.pages.get(n);if(null==a)throw haxe_Exception.thrown("Invalid bitmap font page with id "+n);var o=e/this.fontData.pointSize,p=Math.ceil(a.width*a.density*o),h=Math.ceil(a.width*a.density*o),u=new ceramic_RenderTexture(p,h,1);u.clearOnRender=!0,u.autoRender=!1;var _=new ceramic_Quad;_._texture!=a&&_._set_texture(a),_.set_width(p),_.set_height(h),_.set_shader(null!=this.pageShaders?this.pageShaders.h[n]:null),_.set_visible(!1),null!=s&&s.h.hasOwnProperty(n)&&s.h[n].destroy(),u.stamp(_,(function(){for(_.destroy(),_=null,null==s&&(s=new haxe_ds_IntMap,l.preRenderedPages.h[e]=s),s.h[n]=u,t(),t=null,i.remove(n);r.length>0;){var a=r.shift();a(),a=null}}))},kerning:function(n,e){var t=this.fontData.kernings.get(n);if(null!=t&&t.h.hasOwnProperty(0|e)){var i=t.h[0|e];return null!=i?i:0}return 0},__class__:ceramic_BitmapFont,__properties__:$extend(ceramic_Entity.prototype.__properties__,{get_msdf:"get_msdf",set_kernings:"set_kernings",get_kernings:"get_kernings",set_lineHeight:"set_lineHeight",get_lineHeight:"get_lineHeight",set_charCount:"set_charCount",get_charCount:"get_charCount",set_chars:"set_chars",get_chars:"get_chars",set_baseSize:"set_baseSize",get_baseSize:"get_baseSize",set_pointSize:"set_pointSize",get_pointSize:"get_pointSize",set_face:"set_face",get_face:"get_face",set_fontData:"set_fontData"})});var ceramic_BitmapFontCharacter=function(n,e,t,i,r,l,s,a,o){this.id=n,this.x=e,this.y=t,this.width=i,this.height=r,this.xOffset=l,this.yOffset=s,this.xAdvance=a,this.page=o};t["ceramic.BitmapFontCharacter"]=ceramic_BitmapFontCharacter,ceramic_BitmapFontCharacter.__name__="ceramic.BitmapFontCharacter",ceramic_BitmapFontCharacter.prototype={__class__:ceramic_BitmapFontCharacter};var ceramic_BitmapFontData=function(n,e,t,i,r,l,s,a,o,p){this.face=n,this.path=e,this.pointSize=t,this.baseSize=i,this.chars=r,this.charCount=l,this.distanceField=s,this.pages=a,this.lineHeight=o,this.kernings=p};t["ceramic.BitmapFontData"]=ceramic_BitmapFontData,ceramic_BitmapFontData.__name__="ceramic.BitmapFontData",ceramic_BitmapFontData.prototype={__class__:ceramic_BitmapFontData};var ceramic_BitmapFontDataPage=function(n,e){this.id=n,this.file=e};t["ceramic.BitmapFontDataPage"]=ceramic_BitmapFontDataPage,ceramic_BitmapFontDataPage.__name__="ceramic.BitmapFontDataPage",ceramic_BitmapFontDataPage.prototype={__class__:ceramic_BitmapFontDataPage};var ceramic_BitmapFontDistanceFieldData=function(n,e){this.fieldType=n,this.distanceRange=e};t["ceramic.BitmapFontDistanceFieldData"]=ceramic_BitmapFontDistanceFieldData,ceramic_BitmapFontDistanceFieldData.__name__="ceramic.BitmapFontDistanceFieldData",ceramic_BitmapFontDistanceFieldData.prototype={__class__:ceramic_BitmapFontDistanceFieldData};var ceramic_BitmapFontParser=function(){};t["ceramic.BitmapFontParser"]=ceramic_BitmapFontParser,ceramic_BitmapFontParser.__name__="ceramic.BitmapFontParser",ceramic_BitmapFontParser.parse=function(n){if(0==n.length)throw haxe_Exception.thrown("BitmapFont: fontData is 0 length");if(StringTools.startsWith(StringTools.trim(n),"<"))try{n=ceramic_BitmapFontParser.convertXmlFontData(n)}catch(l){var e=haxe_Exception.caught(l).unwrap();throw haxe_Exception.thrown("BitmapFont: invalid xml font data specified for parser: "+Std.string(e))}var t=new ceramic_BitmapFontData(null,".",0,0,new ceramic_IntMap,0,null,[],0,new ceramic_IntMap),i=StringTools.replace(StringTools.replace(n,"\r",""),"\t"," ").split("\n");if(0==i.length)throw haxe_Exception.thrown("BitmapFont: invalid font data specified for parser.");var r=i[0];if("info"!=HxOverrides.substr(StringTools.ltrim(r),0,4))throw haxe_Exception.thrown("BitmapFont: invalid font data specified for parser. Format should be plain ascii text .fnt file only currently.");for(var l=0;l<i.length;){var s=i[l];++l,ceramic_BitmapFontParser.parseLine(s,t)}return i=null,t},ceramic_BitmapFontParser.convertXmlFontData=function(n){for(var e="",t=Xml.parse(n).firstElement().elements();t.hasNext();){var i=t.next();if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));switch(i.nodeName){case"chars":case"pages":if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));if("chars"==i.nodeName){if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));e+=Std.string(i.nodeName);for(var r=i.attributes();r.hasNext();){var s=r.next(),a=i.get(s);null!=a&&(e+=" ",e+=Std.string(s),e+="=","face"==s||"char"==s||"file"==s||-1!=a.indexOf(" ")||-1!=a.indexOf('"')||-1!=a.indexOf("=")?e+=Std.string(JSON.stringify(a)):e+=Std.string(a))}e+="\n"}for(var o=i.elements();o.hasNext();){var p=o.next();if(p.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==p.nodeType?"null":l.toString(p.nodeType)));e+=Std.string(p.nodeName);for(var h=p.attributes();h.hasNext();){var u=h.next(),_=p.get(u);null!=_&&(e+=" ",e+=Std.string(u),e+="=","face"==u||"char"==u||"file"==u||-1!=_.indexOf(" ")||-1!=_.indexOf('"')||-1!=_.indexOf("=")?e+=Std.string(JSON.stringify(_)):e+=Std.string(_))}e+="\n"}break;default:if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));e+=Std.string(i.nodeName);for(var c=i.attributes();c.hasNext();){var d=c.next(),f=i.get(d);null!=f&&(e+=" ",e+=Std.string(d),e+="=","face"==d||"char"==d||"file"==d||-1!=f.indexOf(" ")||-1!=f.indexOf('"')||-1!=f.indexOf("=")?e+=Std.string(JSON.stringify(f)):e+=Std.string(f))}e+="\n"}}return e},ceramic_BitmapFontParser.parseLine=function(n,e){var t=new haxe_ds_StringMap;switch(ceramic_BitmapFontParser.extractLineTokens(n,t)){case"char":var i=new ceramic_BitmapFontCharacter(Std.parseInt(t.h.id),parseFloat(t.h.x),parseFloat(t.h.y),parseFloat(t.h.width),parseFloat(t.h.height),parseFloat(t.h.xoffset),parseFloat(t.h.yoffset),parseFloat(t.h.xadvance),Std.parseInt(t.h.page));e.chars.set(i.id,i);break;case"chars":e.charCount=Std.parseInt(t.h.count);break;case"common":e.lineHeight=parseFloat(t.h.lineHeight),e.baseSize=parseFloat(t.h.base);break;case"distanceField":var r=t.h.fieldType,l=Std.parseInt(t.h.distanceRange);e.distanceField=new ceramic_BitmapFontDistanceFieldData(r,l);break;case"info":var s=(u=t.h.face).length;34==HxOverrides.cca(u,0)&&34==HxOverrides.cca(u,s-1)&&(u=u.substring(1,s-1)),e.face=u,e.pointSize=parseFloat(t.h.size);break;case"kerning":var a=Std.parseInt(t.h.first),o=Std.parseInt(t.h.second),p=parseFloat(t.h.amount),h=e.kernings.get(a);if(null==h)h=new haxe_ds_IntMap,e.kernings.set(a,h);h.h[0|o]=p;break;case"page":var u;s=(u=t.h.file).length;34==HxOverrides.cca(u,0)&&34==HxOverrides.cca(u,s-1)&&(u=u.substring(1,s-1)),e.pages.push(new ceramic_BitmapFontDataPage(Std.parseInt(t.h.id),StringTools.trim(u)))}},ceramic_BitmapFontParser.extractLineTokens=function(n,e){for(var t=0,i=n.length,r=null,l=null,s=null,a=!1;t<i;){var o=HxOverrides.cca(n,t);if(a){if(92==o?(o=HxOverrides.cca(n,t),++t):34==o&&(a=!1),null==s)throw haxe_Exception.thrown("Invalid bitmap font line: "+n);s.b+=Std.string(n.charAt(t))}else if(32==o)null!=s&&(null==r?r=s.b:null==l?(l=s.b,e.h[l]=null):e.h[l]=s.b,l=null,s=null);else if(null==l&&61==o){if(null==s)throw haxe_Exception.thrown("Invalid bitmap font line: "+n);l=s.b,s=null}else 34==o&&(a=!0),null==s&&(s=new StringBuf),s.b+=Std.string(n.charAt(t));++t}return null!=s&&(null==r?r=s.b:null==l?(l=s.b,e.h[l]=null):e.h[l]=s.b,l=null,s=null),r},ceramic_BitmapFontParser.unquote=function(n){var e=n.length;return 34==HxOverrides.cca(n,0)&&34==HxOverrides.cca(n,e-1)&&(n=n.substring(1,e-1)),n};var ceramic_Pool=function(){this.availableItems=[]};t["ceramic.Pool"]=ceramic_Pool,ceramic_Pool.__name__="ceramic.Pool",ceramic_Pool.prototype={get:function(){return this.availableItems.length>0?this.availableItems.pop():null},recycle:function(n){this.availableItems.push(n)},clear:function(){this.availableItems.length>0&&(this.availableItems=[])},__class__:ceramic_Pool};var ceramic_Point=function(n,e,t){null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),this.z=0,this.y=0,this.x=0,this.x=n,this.y=e,this.z=t};t["ceramic.Point"]=ceramic_Point,ceramic_Point.__name__="ceramic.Point",ceramic_Point.get=function(n,e,t){null==t&&(t=0),null==e&&(e=0),null==n&&(n=0);var i=ceramic_Point.pool,r=i.availableItems.length>0?i.availableItems.pop():null;return null==r?r=new ceramic_Point(n,e,t):(r.x=n,r.y=e,r.z=t),r},ceramic_Point.prototype={toString:function(){return"Point("+this.x+", "+this.y+", "+this.z+")"},recycle:function(){this.x=0,this.y=0,this.z=0,ceramic_Point.pool.recycle(this)},__class__:ceramic_Point};var ceramic_Visual=function(){this.parent=null,this.children=null,this.computedClip=!1,this.computedTouchable=!0,this.computedRenderTarget=null,this.computedDepth=0,this.computedAlpha=1,this.computedVisible=!0,this.matTY=0,this.matTX=0,this.matD=1,this.matC=0,this.matB=0,this.matA=1;this.flags=0,this.shader=null,this.transform=null,this.alpha=1,this.rotation=0,this.roundTranslation=-1,this._height=0,this._width=0,this.anchorY=0,this.anchorX=0,this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,this.depthRange=1,this.depth=0,this.touchable=!0,this.visible=!0,this.blending=0,this.renderTarget=null,this.clipDirty=!0,this.touchableDirty=!0,this.visibilityDirty=!0,this.renderTargetDirty=!0,this.matrixDirty=!0,this.contentDirty=!0,this.translatesOnlyDirty=!1,this.translatesOnly=!0,this.inheritAlpha=!1,this.clip=null,this._numPointerOver=0,this._numPointerDown=0,this.multiTouch=!1,this.asMesh=null,this.asQuad=null,this.nape=null,ceramic_Entity.call(this),ceramic_App.app.pendingVisuals.push(this)};t["ceramic.Visual"]=ceramic_Visual,ceramic_Visual.__name__="ceramic.Visual",ceramic_Visual.computeChildrenDepth=function(n){ceramic_Visual._computeChildrenDepth0(n)},ceramic_Visual._computeChildrenDepth0=function(n){var e=n.children;if(null!=e){for(var t=0,i=e.length;t<i;){(l=e[t++]).computedDepth=1e3*l.depth,ceramic_Visual._computeChildrenDepth0(l)}var r=n.depthRange;if(-1!=r){ceramic_Visual._minDepth=9999999999,ceramic_Visual._maxDepth=-9999999999;for(t=0,i=e.length;t<i;){var l=e[t++];ceramic_Visual._computeMinMaxDepths0(l)}for(t=0,i=e.length;t<i;){l=e[t++];ceramic_Visual._multiplyDepths0(l,n.computedDepth+Math.min(.01,1e3*r),Math.max(0,1e3*r-.01))}}}},ceramic_Visual._computeChildrenDepth1=function(n){var e=n.children;if(null!=e){for(var t=0,i=e.length;t<i;){(l=e[t++]).computedDepth=1e3*l.depth,ceramic_Visual._computeChildrenDepth0(l)}var r=n.depthRange;if(-1!=r){ceramic_Visual._minDepth=9999999999,ceramic_Visual._maxDepth=-9999999999;for(t=0,i=e.length;t<i;){var l=e[t++];ceramic_Visual._computeMinMaxDepths0(l)}for(t=0,i=e.length;t<i;){l=e[t++];ceramic_Visual._multiplyDepths0(l,n.computedDepth+Math.min(.01,1e3*r),Math.max(0,1e3*r-.01))}}}},ceramic_Visual._computeChildrenDepthApplyDepthRange=function(n,e){var t=n.depthRange;if(-1!=t){ceramic_Visual._minDepth=9999999999,ceramic_Visual._maxDepth=-9999999999;for(var i=0,r=e.length;i<r;){var l=e[i++];ceramic_Visual._computeMinMaxDepths0(l)}for(i=0,r=e.length;i<r;){l=e[i++];ceramic_Visual._multiplyDepths0(l,n.computedDepth+Math.min(.01,1e3*t),Math.max(0,1e3*t-.01))}}},ceramic_Visual.computeMinMaxDepths=function(n){ceramic_Visual._computeMinMaxDepths0(n)},ceramic_Visual._computeMinMaxDepths0=function(n){var e=n.computedDepth;ceramic_Visual._minDepth>e&&(ceramic_Visual._minDepth=e),ceramic_Visual._maxDepth<e+1&&(ceramic_Visual._maxDepth=e+1);var t=n.children;if(null!=t)for(var i=0,r=t.length;i<r;){var l=t[i++];ceramic_Visual._computeMinMaxDepths0(l)}},ceramic_Visual._computeMinMaxDepths1=function(n){var e=n.computedDepth;ceramic_Visual._minDepth>e&&(ceramic_Visual._minDepth=e),ceramic_Visual._maxDepth<e+1&&(ceramic_Visual._maxDepth=e+1);var t=n.children;if(null!=t)for(var i=0,r=t.length;i<r;){var l=t[i++];ceramic_Visual._computeMinMaxDepths0(l)}},ceramic_Visual.multiplyDepths=function(n,e,t){ceramic_Visual._multiplyDepths0(n,e,t)},ceramic_Visual._multiplyDepths0=function(n,e,t){ceramic_Visual._maxDepth==ceramic_Visual._minDepth?n.computedDepth=e+.5*t:n.computedDepth=e+(n.computedDepth-ceramic_Visual._minDepth)/(ceramic_Visual._maxDepth-ceramic_Visual._minDepth)*t;var i=n.children;if(null!=i)for(var r=0,l=i.length;r<l;){var s=i[r++];ceramic_Visual._multiplyDepths0(s,e,t)}},ceramic_Visual._multiplyDepths1=function(n,e,t){ceramic_Visual._maxDepth==ceramic_Visual._minDepth?n.computedDepth=e+.5*t:n.computedDepth=e+(n.computedDepth-ceramic_Visual._minDepth)/(ceramic_Visual._maxDepth-ceramic_Visual._minDepth)*t;var i=n.children;if(null!=i)for(var r=0,l=i.length;r<l;){var s=i[r++];ceramic_Visual._multiplyDepths0(s,e,t)}},ceramic_Visual.__super__=ceramic_Entity,ceramic_Visual.prototype=$extend(ceramic_Entity.prototype,{emitPointerDown:function(n){var e=0;if(null!=this.__cbOnPointerDown&&(e+=this.__cbOnPointerDown.length),null!=this.__cbOncePointerDown&&(e+=this.__cbOncePointerDown.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerDown)for(var l=0,s=this.__cbOnPointerDown.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerDown[a],++r):--e}if(null!=this.__cbOncePointerDown){var o=null,p=null;for(l=0,s=this.__cbOncePointerDown.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerDown[a],this.__cbOncePointerDown[a]=null;var h=this.__cbOnceOwnerUnbindPointerDown[a];this.__cbOnceOwnerUnbindPointerDown[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerDown[a]),p.push(this.__cbOncePointerDown[a])}this.__cbOnceOwnerUnbindPointerDown=o,this.__cbOncePointerDown=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(null);null==this.__cbOnPointerDown&&(this.__cbOnPointerDown=[]),this.__cbOnPointerDown.push(e)},oncePointerDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(null);null==this.__cbOncePointerDown&&(this.__cbOncePointerDown=[]),this.__cbOncePointerDown.push(e)},offPointerDown:function(n){if(null!=n){var e;null!=this.__cbOnPointerDown&&-1!=(e=this.__cbOnPointerDown.indexOf(n))&&(this.__cbOnPointerDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerDown[e])&&l(),this.__cbOnOwnerUnbindPointerDown.splice(e,1)),null!=this.__cbOncePointerDown&&-1!=(e=this.__cbOncePointerDown.indexOf(n))&&(this.__cbOncePointerDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerDown[e])&&l(),this.__cbOnceOwnerUnbindPointerDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindPointerDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerDown[r])&&l()}this.__cbOnOwnerUnbindPointerDown=null}if(null!=this.__cbOnceOwnerUnbindPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindPointerDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerDown[r])&&l()}this.__cbOnceOwnerUnbindPointerDown=null}this.__cbOnPointerDown=null,this.__cbOncePointerDown=null}},listensPointerDown:function(){return null!=this.__cbOnPointerDown&&this.__cbOnPointerDown.length>0||null!=this.__cbOncePointerDown&&this.__cbOncePointerDown.length>0},emitPointerUp:function(n){var e=0;if(null!=this.__cbOnPointerUp&&(e+=this.__cbOnPointerUp.length),null!=this.__cbOncePointerUp&&(e+=this.__cbOncePointerUp.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerUp)for(var l=0,s=this.__cbOnPointerUp.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerUp[a],++r):--e}if(null!=this.__cbOncePointerUp){var o=null,p=null;for(l=0,s=this.__cbOncePointerUp.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerUp[a],this.__cbOncePointerUp[a]=null;var h=this.__cbOnceOwnerUnbindPointerUp[a];this.__cbOnceOwnerUnbindPointerUp[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerUp[a]),p.push(this.__cbOncePointerUp[a])}this.__cbOnceOwnerUnbindPointerUp=o,this.__cbOncePointerUp=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(null);null==this.__cbOnPointerUp&&(this.__cbOnPointerUp=[]),this.__cbOnPointerUp.push(e)},oncePointerUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(null);null==this.__cbOncePointerUp&&(this.__cbOncePointerUp=[]),this.__cbOncePointerUp.push(e)},offPointerUp:function(n){if(null!=n){var e;null!=this.__cbOnPointerUp&&-1!=(e=this.__cbOnPointerUp.indexOf(n))&&(this.__cbOnPointerUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerUp[e])&&l(),this.__cbOnOwnerUnbindPointerUp.splice(e,1)),null!=this.__cbOncePointerUp&&-1!=(e=this.__cbOncePointerUp.indexOf(n))&&(this.__cbOncePointerUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerUp[e])&&l(),this.__cbOnceOwnerUnbindPointerUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindPointerUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerUp[r])&&l()}this.__cbOnOwnerUnbindPointerUp=null}if(null!=this.__cbOnceOwnerUnbindPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindPointerUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerUp[r])&&l()}this.__cbOnceOwnerUnbindPointerUp=null}this.__cbOnPointerUp=null,this.__cbOncePointerUp=null}},listensPointerUp:function(){return null!=this.__cbOnPointerUp&&this.__cbOnPointerUp.length>0||null!=this.__cbOncePointerUp&&this.__cbOncePointerUp.length>0},emitPointerOver:function(n){var e=0;if(null!=this.__cbOnPointerOver&&(e+=this.__cbOnPointerOver.length),null!=this.__cbOncePointerOver&&(e+=this.__cbOncePointerOver.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerOver)for(var l=0,s=this.__cbOnPointerOver.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerOver[a],++r):--e}if(null!=this.__cbOncePointerOver){var o=null,p=null;for(l=0,s=this.__cbOncePointerOver.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerOver[a],this.__cbOncePointerOver[a]=null;var h=this.__cbOnceOwnerUnbindPointerOver[a];this.__cbOnceOwnerUnbindPointerOver[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerOver[a]),p.push(this.__cbOncePointerOver[a])}this.__cbOnceOwnerUnbindPointerOver=o,this.__cbOncePointerOver=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerOver:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerOver because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerOver(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerOver&&(this.__cbOnOwnerUnbindPointerOver=[]),this.__cbOnOwnerUnbindPointerOver.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerOver&&(this.__cbOnOwnerUnbindPointerOver=[]),this.__cbOnOwnerUnbindPointerOver.push(null);null==this.__cbOnPointerOver&&(this.__cbOnPointerOver=[]),this.__cbOnPointerOver.push(e)},oncePointerOver:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerOver because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerOver(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerOver&&(this.__cbOnceOwnerUnbindPointerOver=[]),this.__cbOnceOwnerUnbindPointerOver.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerOver&&(this.__cbOnceOwnerUnbindPointerOver=[]),this.__cbOnceOwnerUnbindPointerOver.push(null);null==this.__cbOncePointerOver&&(this.__cbOncePointerOver=[]),this.__cbOncePointerOver.push(e)},offPointerOver:function(n){if(null!=n){var e;null!=this.__cbOnPointerOver&&-1!=(e=this.__cbOnPointerOver.indexOf(n))&&(this.__cbOnPointerOver.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerOver[e])&&l(),this.__cbOnOwnerUnbindPointerOver.splice(e,1)),null!=this.__cbOncePointerOver&&-1!=(e=this.__cbOncePointerOver.indexOf(n))&&(this.__cbOncePointerOver.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerOver[e])&&l(),this.__cbOnceOwnerUnbindPointerOver.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerOver){for(var t=0,i=this.__cbOnOwnerUnbindPointerOver.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerOver[r])&&l()}this.__cbOnOwnerUnbindPointerOver=null}if(null!=this.__cbOnceOwnerUnbindPointerOver){for(t=0,i=this.__cbOnceOwnerUnbindPointerOver.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerOver[r])&&l()}this.__cbOnceOwnerUnbindPointerOver=null}this.__cbOnPointerOver=null,this.__cbOncePointerOver=null}},listensPointerOver:function(){return null!=this.__cbOnPointerOver&&this.__cbOnPointerOver.length>0||null!=this.__cbOncePointerOver&&this.__cbOncePointerOver.length>0},emitPointerOut:function(n){var e=0;if(null!=this.__cbOnPointerOut&&(e+=this.__cbOnPointerOut.length),null!=this.__cbOncePointerOut&&(e+=this.__cbOncePointerOut.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerOut)for(var l=0,s=this.__cbOnPointerOut.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerOut[a],++r):--e}if(null!=this.__cbOncePointerOut){var o=null,p=null;for(l=0,s=this.__cbOncePointerOut.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerOut[a],this.__cbOncePointerOut[a]=null;var h=this.__cbOnceOwnerUnbindPointerOut[a];this.__cbOnceOwnerUnbindPointerOut[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerOut[a]),p.push(this.__cbOncePointerOut[a])}this.__cbOnceOwnerUnbindPointerOut=o,this.__cbOncePointerOut=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerOut:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerOut because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerOut(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerOut&&(this.__cbOnOwnerUnbindPointerOut=[]),this.__cbOnOwnerUnbindPointerOut.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerOut&&(this.__cbOnOwnerUnbindPointerOut=[]),this.__cbOnOwnerUnbindPointerOut.push(null);null==this.__cbOnPointerOut&&(this.__cbOnPointerOut=[]),this.__cbOnPointerOut.push(e)},oncePointerOut:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerOut because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerOut(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerOut&&(this.__cbOnceOwnerUnbindPointerOut=[]),this.__cbOnceOwnerUnbindPointerOut.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerOut&&(this.__cbOnceOwnerUnbindPointerOut=[]),this.__cbOnceOwnerUnbindPointerOut.push(null);null==this.__cbOncePointerOut&&(this.__cbOncePointerOut=[]),this.__cbOncePointerOut.push(e)},offPointerOut:function(n){if(null!=n){var e;null!=this.__cbOnPointerOut&&-1!=(e=this.__cbOnPointerOut.indexOf(n))&&(this.__cbOnPointerOut.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerOut[e])&&l(),this.__cbOnOwnerUnbindPointerOut.splice(e,1)),null!=this.__cbOncePointerOut&&-1!=(e=this.__cbOncePointerOut.indexOf(n))&&(this.__cbOncePointerOut.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerOut[e])&&l(),this.__cbOnceOwnerUnbindPointerOut.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerOut){for(var t=0,i=this.__cbOnOwnerUnbindPointerOut.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerOut[r])&&l()}this.__cbOnOwnerUnbindPointerOut=null}if(null!=this.__cbOnceOwnerUnbindPointerOut){for(t=0,i=this.__cbOnceOwnerUnbindPointerOut.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerOut[r])&&l()}this.__cbOnceOwnerUnbindPointerOut=null}this.__cbOnPointerOut=null,this.__cbOncePointerOut=null}},listensPointerOut:function(){return null!=this.__cbOnPointerOut&&this.__cbOnPointerOut.length>0||null!=this.__cbOncePointerOut&&this.__cbOncePointerOut.length>0},emitFocus:function(){var n=0;if(null!=this.__cbOnFocus&&(n+=this.__cbOnFocus.length),null!=this.__cbOnceFocus&&(n+=this.__cbOnceFocus.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnFocus)for(var r=0,l=this.__cbOnFocus.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnFocus[s],++i):--n}if(null!=this.__cbOnceFocus){var a=null,o=null;for(r=0,l=this.__cbOnceFocus.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceFocus[s],this.__cbOnceFocus[s]=null;var p=this.__cbOnceOwnerUnbindFocus[s];this.__cbOnceOwnerUnbindFocus[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindFocus[s]),o.push(this.__cbOnceFocus[s])}this.__cbOnceOwnerUnbindFocus=a,this.__cbOnceFocus=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onFocus:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event focus because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFocus(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(null);null==this.__cbOnFocus&&(this.__cbOnFocus=[]),this.__cbOnFocus.push(e)},onceFocus:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event focus because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFocus(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(null);null==this.__cbOnceFocus&&(this.__cbOnceFocus=[]),this.__cbOnceFocus.push(e)},offFocus:function(n){if(null!=n){var e;null!=this.__cbOnFocus&&-1!=(e=this.__cbOnFocus.indexOf(n))&&(this.__cbOnFocus.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFocus[e])&&l(),this.__cbOnOwnerUnbindFocus.splice(e,1)),null!=this.__cbOnceFocus&&-1!=(e=this.__cbOnceFocus.indexOf(n))&&(this.__cbOnceFocus.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFocus[e])&&l(),this.__cbOnceOwnerUnbindFocus.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFocus){for(var t=0,i=this.__cbOnOwnerUnbindFocus.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFocus[r])&&l()}this.__cbOnOwnerUnbindFocus=null}if(null!=this.__cbOnceOwnerUnbindFocus){for(t=0,i=this.__cbOnceOwnerUnbindFocus.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFocus[r])&&l()}this.__cbOnceOwnerUnbindFocus=null}this.__cbOnFocus=null,this.__cbOnceFocus=null}},listensFocus:function(){return null!=this.__cbOnFocus&&this.__cbOnFocus.length>0||null!=this.__cbOnceFocus&&this.__cbOnceFocus.length>0},emitBlur:function(){var n=0;if(null!=this.__cbOnBlur&&(n+=this.__cbOnBlur.length),null!=this.__cbOnceBlur&&(n+=this.__cbOnceBlur.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnBlur)for(var r=0,l=this.__cbOnBlur.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnBlur[s],++i):--n}if(null!=this.__cbOnceBlur){var a=null,o=null;for(r=0,l=this.__cbOnceBlur.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceBlur[s],this.__cbOnceBlur[s]=null;var p=this.__cbOnceOwnerUnbindBlur[s];this.__cbOnceOwnerUnbindBlur[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindBlur[s]),o.push(this.__cbOnceBlur[s])}this.__cbOnceOwnerUnbindBlur=a,this.__cbOnceBlur=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onBlur:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event blur because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBlur(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(null);null==this.__cbOnBlur&&(this.__cbOnBlur=[]),this.__cbOnBlur.push(e)},onceBlur:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event blur because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBlur(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(null);null==this.__cbOnceBlur&&(this.__cbOnceBlur=[]),this.__cbOnceBlur.push(e)},offBlur:function(n){if(null!=n){var e;null!=this.__cbOnBlur&&-1!=(e=this.__cbOnBlur.indexOf(n))&&(this.__cbOnBlur.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBlur[e])&&l(),this.__cbOnOwnerUnbindBlur.splice(e,1)),null!=this.__cbOnceBlur&&-1!=(e=this.__cbOnceBlur.indexOf(n))&&(this.__cbOnceBlur.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBlur[e])&&l(),this.__cbOnceOwnerUnbindBlur.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBlur){for(var t=0,i=this.__cbOnOwnerUnbindBlur.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBlur[r])&&l()}this.__cbOnOwnerUnbindBlur=null}if(null!=this.__cbOnceOwnerUnbindBlur){for(t=0,i=this.__cbOnceOwnerUnbindBlur.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBlur[r])&&l()}this.__cbOnceOwnerUnbindBlur=null}this.__cbOnBlur=null,this.__cbOnceBlur=null}},listensBlur:function(){return null!=this.__cbOnBlur&&this.__cbOnBlur.length>0||null!=this.__cbOnceBlur&&this.__cbOnceBlur.length>0},set_nape:function(n){return this.nape==n||(null!=this.nape&&this.nape.visual==this&&(this.nape.visual=null),this.nape=n,null!=n&&(n.visual=this)),n},initNapePhysics:function(n,e,t,i,r){null!=this.nape&&(this.nape.destroy(),this.set_nape(null)),this.contentDirty&&this.computeContent();var l=this.get_width()*this.scaleX,s=this.get_height()*this.scaleY;this.set_nape(new ceramic_VisualNapePhysics(n,t,i,r,this.x-l*(this.anchorX-.5),this.y-s*(this.anchorY-.5),l,s,this.rotation)),null==e&&(e=ceramic_App.app.nape.space);var a=this.nape.body;if(null!=a.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");if(a.zpp_inner.immutable_midstep("Body::space"),a.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if((null==a.zpp_inner.space?null:a.zpp_inner.space.outer)!=e&&(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer)&&(a.zpp_inner.component.woken=!1),null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer)&&(null==a.zpp_inner.space?null:a.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(a),null!=e)){var o=e.zpp_inner.wrap_bodies;o.zpp_inner.reverse_flag?o.push(a):o.unshift(a)}a.zpp_inner.space;return this.nape},get_isPointerDown:function(){return this._numPointerDown>0},get_isPointerOver:function(){return this._numPointerOver>0},set_clip:function(n){if(this.clip==n)return n;if(this.clip=n,this.clipDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.clipDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_clipDirty(!0)}}return n},set_inheritAlpha:function(n){if(this.inheritAlpha==n)return n;if(this.inheritAlpha=n,this.visibilityDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.visibilityDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_visibilityDirty(!0)}}return n},stop:function(){},set_contentDirty:function(n){return this.contentDirty=n,n&&(ceramic_App.app.visualsContentDirty=!0),n},set_matrixDirty:function(n){if(this.matrixDirty=n,n&&null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++;this.children[i].set_matrixDirty(!0)}return n},set_renderTargetDirty:function(n){if(this.renderTargetDirty=n,n){if(this.clipDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++;if((a=this.children[i]).clipDirty=!0,null!=a.children)for(var r=0,l=a.children.length;r<l;){var s=r++;a.children[s].set_clipDirty(!0)}}if(null!=this.children)for(e=0,t=this.children.length;e<t;){var a;i=e++;(a=this.children[i]).set_renderTargetDirty(!0)}}return n},set_visibilityDirty:function(n){if(this.visibilityDirty=n,n&&null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++;this.children[i].set_visibilityDirty(!0)}return n},set_touchableDirty:function(n){if(this.touchableDirty=n,n&&null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++;this.children[i].set_touchableDirty(!0)}return n},set_clipDirty:function(n){if(this.clipDirty=n,n&&null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++;this.children[i].set_clipDirty(!0)}return n},set_renderTarget:function(n){if(this.renderTarget==n)return n;if(this.renderTarget=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++;if((a=this.children[i]).matrixDirty=!0,null!=a.children)for(var r=0,l=a.children.length;r<l;){var s=r++;(o=a.children[s]).set_matrixDirty(!0)}}if(this.renderTargetDirty=!0,this.clipDirty=!0,null!=this.children)for(e=0,t=this.children.length;e<t;){i=e++;if((a=this.children[i]).clipDirty=!0,null!=a.children)for(r=0,l=a.children.length;r<l;){s=r++;(o=a.children[s]).set_clipDirty(!0)}}if(null!=this.children)for(e=0,t=this.children.length;e<t;){var a;i=e++;if((a=this.children[i]).renderTargetDirty=!0,a.clipDirty=!0,null!=a.children)for(r=0,l=a.children.length;r<l;){var o;s=r++;if((o=a.children[s]).clipDirty=!0,null!=o.children)for(var p=0,h=o.children.length;p<h;){var u=p++,_=o.children[u];if(_.clipDirty=!0,null!=_.children)for(var c=0,d=_.children.length;c<d;){var f=c++;_.children[f].set_clipDirty(!0)}}}if(null!=a.children)for(var x=0,b=a.children.length;x<b;){var y=x++;a.children[y].set_renderTargetDirty(!0)}}return n},set_blending:function(n){return this.blending=n},set_visible:function(n){if(this.visible==n)return n;if(this.visible=n,this.visibilityDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.visibilityDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_visibilityDirty(!0)}}return n},set_touchable:function(n){if(this.touchable==n)return n;if(this.touchable=n,this.touchableDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.touchableDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_touchableDirty(!0)}}return n},set_depth:function(n){return this.depth==n||(this.depth=n,ceramic_App.app.hierarchyDirty=!0),n},set_depthRange:function(n){return this.depthRange==n||(this.depthRange=n,ceramic_App.app.hierarchyDirty=!0),n},set_x:function(n){if(this.x==n)return n;if(this.x=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},set_y:function(n){if(this.y==n)return n;if(this.y=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},set_scaleX:function(n){if(this.scaleX==n)return n;if(this.scaleX=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return this.translatesOnlyDirty=!0,n},set_scaleY:function(n){if(this.scaleY==n)return n;if(this.scaleY=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return this.translatesOnlyDirty=!0,n},set_skewX:function(n){if(this.skewX==n)return n;if(this.skewX=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return this.translatesOnlyDirty=!0,n},set_skewY:function(n){if(this.skewY==n)return n;if(this.skewY=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return this.translatesOnlyDirty=!0,n},set_anchorX:function(n){if(this.anchorX==n)return n;if(this.anchorX=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},set_anchorY:function(n){if(this.anchorY==n)return n;if(this.anchorY=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},get_width:function(){return this._width},set_width:function(n){if(this._width==n)return n;if(this._width=n,0!=this.anchorX&&(this.matrixDirty=!0,null!=this.children))for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},get_height:function(){return this._height},set_height:function(n){if(this._height==n)return n;if(this._height=n,0!=this.anchorY&&(this.matrixDirty=!0,null!=this.children))for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},set_roundTranslation:function(n){if(this.roundTranslation==n)return n;if(this.roundTranslation=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},set_rotation:function(n){if(this.rotation==n)return n;if(this.rotation=n,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return this.translatesOnlyDirty=!0,n},set_alpha:function(n){if(this.alpha==n)return n;if(this.alpha=n,this.visibilityDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.visibilityDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_visibilityDirty(!0)}}return n},get_translateX:function(){return null!=this.transform?this.transform.tx:0},set_translateX:function(n){return 0==n?null!=this.transform&&0!=this.transform.tx&&(this.transform.tx=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new ceramic_Transform),this.transform.tx!=n&&(this.transform.tx=n,this.transform.changedDirty=!0)),n},get_translateY:function(){return null!=this.transform?this.transform.ty:0},set_translateY:function(n){return 0==n?null!=this.transform&&0!=this.transform.ty&&(this.transform.ty=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new ceramic_Transform),this.transform.ty!=n&&(this.transform.ty=n,this.transform.changedDirty=!0)),n},set_transform:function(n){if(this.transform==n)return n;if(null!=this.transform&&this.transform.offChange($bind(this,this.transformDidChange)),this.transform=n,null!=this.transform&&this.transform.onChange(this,$bind(this,this.transformDidChange)),this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}return n},set_shader:function(n){return this.shader=n},flag:function(n,e){var t=n+16;if(null!=e)return this.flags=e?this.flags|1<<t:this.flags&~(1<<t),e;var i=1<<t;return(this.flags&i)==i},internalFlag:function(n,e){if(null!=e)return this.flags=e?this.flags|1<<n:this.flags&~(1<<n),e;var t=1<<n;return(this.flags&t)==t},get_active:function(){return 1!=(1&this.flags)},set_active:function(n){return n==(1!=(1&this.flags))||(this.flags=n?-2&this.flags:1|this.flags,n?(this.set_visible(2==(2&this.flags)),this.set_touchable(4==(4&this.flags))):(this.flags=this.visible?2|this.flags:-3&this.flags,this.flags=this.touchable?4|this.flags:-5&this.flags,this.set_visible(!1),this.set_touchable(!1))),n},size:function(n,e){this.set_width(n),this.set_height(e)},anchor:function(n,e){this.set_anchorX(n),this.set_anchorY(e)},pos:function(n,e){this.set_x(n),this.set_y(e)},scale:function(n,e){null==e&&(e=-1),this.set_scaleX(n),this.set_scaleY(-1!=e?e:n)},skew:function(n,e){this.set_skewX(n),this.set_skewY(e)},translate:function(n,e){0==n?null!=this.transform&&0!=this.transform.tx&&(this.transform.tx=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new ceramic_Transform),this.transform.tx!=n&&(this.transform.tx=n,this.transform.changedDirty=!0)),0==e?null!=this.transform&&0!=this.transform.ty&&(this.transform.ty=0,this.transform.changedDirty=!0):(null==this.transform&&this.set_transform(new ceramic_Transform),this.transform.ty!=e&&(this.transform.ty=e,this.transform.changedDirty=!0))},anchorKeepPosition:function(n,e){if(this.anchorX!=n||this.anchorY!=e){this.visualToScreen(0,0,ceramic_Visual._point,!1),null!=this.parent&&this.parent.screenToVisual(ceramic_Visual._point.x,ceramic_Visual._point.y,ceramic_Visual._point,!1);var t=ceramic_Visual._point.x,i=ceramic_Visual._point.y;this.set_anchorX(n),this.set_anchorY(e),this.visualToScreen(0,0,ceramic_Visual._point,!1),null!=this.parent&&this.parent.screenToVisual(ceramic_Visual._point.x,ceramic_Visual._point.y,ceramic_Visual._point,!1),this.set_x(this.x+(t-ceramic_Visual._point.x)),this.set_y(this.y+(i-ceramic_Visual._point.y))}},childWithId:function(n,e){if(null==e&&(e=!0),null!=this.children){for(var t=0,i=this.children.length;t<i;){var r=t++;if((l=this.children[r]).id==n)return l}if(e)for(t=0,i=this.children.length;t<i;){r=t++;var l,s=(l=this.children[r]).childWithId(n,!0);if(null!=s)return s}}return null},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),ceramic_App.app.screen.get_focusedVisual()==this&&ceramic_App.app.screen.set_focusedVisual(null),ceramic_App.app.destroyedVisuals.push(this),null!=this.parent&&this.parent.remove(this),null!=this.transform&&this.set_transform(null),null!=this.nape&&(this.nape.destroy(),this.set_nape(null)),this.clear(),this.visibilityDirty=!1,this.computedVisible=!1)},clear:function(){if(null!=this.children&&this.children.length>0){for(var n=this.children.length,e=ceramic_ArrayPool.pool(n),t=e.get(),i=0,r=n;i<r;){var l=i++;t.vector[l]=this.children[l]}for(i=0,r=n;i<r;){l=i++;t.vector[l].destroy()}this.children=null,e.release(t)}},transformDidChange:function(){if(this.matrixDirty=!0,null!=this.children)for(var n=0,e=this.children.length;n<e;){var t=n++,i=this.children[t];if(i.matrixDirty=!0,null!=i.children)for(var r=0,l=i.children.length;r<l;){var s=r++;i.children[s].set_matrixDirty(!0)}}},computeMatrix:function(){null!=this.parent&&this.parent.matrixDirty&&this.parent.computeMatrix(),(t=ceramic_Visual._matrix).a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.changedDirty=!0,this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1);var n=this.get_width(),e=this.get_height();if(this.translatesOnly)ceramic_Visual._matrix.tx+=this.x-this.anchorX*n,ceramic_Visual._matrix.ty+=this.y-this.anchorY*e;else{if((t=ceramic_Visual._matrix).tx+=-this.anchorX*n,t.ty+=-this.anchorY*e,t.changedDirty=!0,1!=this.scaleX||1!=this.scaleY){var t=ceramic_Visual._matrix,i=this.scaleX,r=this.scaleY;t.a*=i,t.b*=r,t.c*=i,t.d*=r,t.tx*=i,t.ty*=r,t.changedDirty=!0}if(0!=this.skewX||0!=this.skewY){var t=ceramic_Visual._matrix,l=.017453292519943295*this.skewX,s=.017453292519943295*this.skewY,a=ceramic_Transform._tmp;a.a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0;var o=Math.cos(s),p=Math.sin(s),h=-Math.sin(l),u=Math.cos(l);ceramic_Transform._tmp.a=1*o+-0*p,ceramic_Transform._tmp.b=0*o+1*p,ceramic_Transform._tmp.c=1*h+-0*u,ceramic_Transform._tmp.d=0*h+1*u;var _=ceramic_Transform._tmp,c=t.a*_.a+t.b*_.c;t.b=t.a*_.b+t.b*_.d,t.a=c;var d=t.c*_.a+t.d*_.c;t.d=t.c*_.b+t.d*_.d,t.c=d;var f=t.tx*_.a+t.ty*_.c+_.tx;t.ty=t.tx*_.b+t.ty*_.d+_.ty,t.tx=f,t.changedDirty=!0}if(0!=this.rotation){t=ceramic_Visual._matrix;var x=.017453292519943295*this.rotation,b=Math.cos(x),y=Math.sin(x);c=t.a*b-t.b*y;t.b=t.a*y+t.b*b,t.a=c;d=t.c*b-t.d*y;t.d=t.c*y+t.d*b,t.c=d;f=t.tx*b-t.ty*y;t.ty=t.tx*y+t.ty*b,t.tx=f,t.changedDirty=!0}(t=ceramic_Visual._matrix).tx+=this.x,t.ty+=this.y,t.changedDirty=!0}if(null!=this.transform){c=ceramic_Visual._matrix.a*this.transform.a+ceramic_Visual._matrix.b*this.transform.c;ceramic_Visual._matrix.b=ceramic_Visual._matrix.a*this.transform.b+ceramic_Visual._matrix.b*this.transform.d,ceramic_Visual._matrix.a=c;d=ceramic_Visual._matrix.c*this.transform.a+ceramic_Visual._matrix.d*this.transform.c;ceramic_Visual._matrix.d=ceramic_Visual._matrix.c*this.transform.b+ceramic_Visual._matrix.d*this.transform.d,ceramic_Visual._matrix.c=d;f=ceramic_Visual._matrix.tx*this.transform.a+ceramic_Visual._matrix.ty*this.transform.c+this.transform.tx;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.transform.b+ceramic_Visual._matrix.ty*this.transform.d+this.transform.ty,ceramic_Visual._matrix.tx=f}if(null!=this.parent&&null==this.renderTarget)if(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD)ceramic_Visual._matrix.tx+=this.parent.matTX,ceramic_Visual._matrix.ty+=this.parent.matTY;else if(this.translatesOnly&&null==this.transform){ceramic_Visual._matrix.a=this.parent.matA,ceramic_Visual._matrix.b=this.parent.matB,ceramic_Visual._matrix.c=this.parent.matC,ceramic_Visual._matrix.d=this.parent.matD;f=ceramic_Visual._matrix.tx*this.parent.matA+ceramic_Visual._matrix.ty*this.parent.matC+this.parent.matTX;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.parent.matB+ceramic_Visual._matrix.ty*this.parent.matD+this.parent.matTY,ceramic_Visual._matrix.tx=f}else{c=ceramic_Visual._matrix.a*this.parent.matA+ceramic_Visual._matrix.b*this.parent.matC;ceramic_Visual._matrix.b=ceramic_Visual._matrix.a*this.parent.matB+ceramic_Visual._matrix.b*this.parent.matD,ceramic_Visual._matrix.a=c;d=ceramic_Visual._matrix.c*this.parent.matA+ceramic_Visual._matrix.d*this.parent.matC;ceramic_Visual._matrix.d=ceramic_Visual._matrix.c*this.parent.matB+ceramic_Visual._matrix.d*this.parent.matD,ceramic_Visual._matrix.c=d;f=ceramic_Visual._matrix.tx*this.parent.matA+ceramic_Visual._matrix.ty*this.parent.matC+this.parent.matTX;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.parent.matB+ceramic_Visual._matrix.ty*this.parent.matD+this.parent.matTY,ceramic_Visual._matrix.tx=f}this.matA=ceramic_Visual._matrix.a,this.matB=ceramic_Visual._matrix.b,this.matC=ceramic_Visual._matrix.c,this.matD=ceramic_Visual._matrix.d,this.matTX=ceramic_Visual._matrix.tx,this.matTY=ceramic_Visual._matrix.ty,this.roundTranslation>0&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},computeTranslatesOnly:function(){this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1},doComputeMatrix:function(){this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1);var n=this.get_width(),e=this.get_height();if(this.translatesOnly)ceramic_Visual._matrix.tx+=this.x-this.anchorX*n,ceramic_Visual._matrix.ty+=this.y-this.anchorY*e;else{if((t=ceramic_Visual._matrix).tx+=-this.anchorX*n,t.ty+=-this.anchorY*e,t.changedDirty=!0,1!=this.scaleX||1!=this.scaleY){var t=ceramic_Visual._matrix,i=this.scaleX,r=this.scaleY;t.a*=i,t.b*=r,t.c*=i,t.d*=r,t.tx*=i,t.ty*=r,t.changedDirty=!0}if(0!=this.skewX||0!=this.skewY){var t=ceramic_Visual._matrix,l=.017453292519943295*this.skewX,s=.017453292519943295*this.skewY,a=ceramic_Transform._tmp;a.a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0;var o=Math.cos(s),p=Math.sin(s),h=-Math.sin(l),u=Math.cos(l);ceramic_Transform._tmp.a=1*o+-0*p,ceramic_Transform._tmp.b=0*o+1*p,ceramic_Transform._tmp.c=1*h+-0*u,ceramic_Transform._tmp.d=0*h+1*u;var _=ceramic_Transform._tmp,c=t.a*_.a+t.b*_.c;t.b=t.a*_.b+t.b*_.d,t.a=c;var d=t.c*_.a+t.d*_.c;t.d=t.c*_.b+t.d*_.d,t.c=d;var f=t.tx*_.a+t.ty*_.c+_.tx;t.ty=t.tx*_.b+t.ty*_.d+_.ty,t.tx=f,t.changedDirty=!0}if(0!=this.rotation){t=ceramic_Visual._matrix;var x=.017453292519943295*this.rotation,b=Math.cos(x),y=Math.sin(x);c=t.a*b-t.b*y;t.b=t.a*y+t.b*b,t.a=c;d=t.c*b-t.d*y;t.d=t.c*y+t.d*b,t.c=d;f=t.tx*b-t.ty*y;t.ty=t.tx*y+t.ty*b,t.tx=f,t.changedDirty=!0}(t=ceramic_Visual._matrix).tx+=this.x,t.ty+=this.y,t.changedDirty=!0}if(null!=this.transform){c=ceramic_Visual._matrix.a*this.transform.a+ceramic_Visual._matrix.b*this.transform.c;ceramic_Visual._matrix.b=ceramic_Visual._matrix.a*this.transform.b+ceramic_Visual._matrix.b*this.transform.d,ceramic_Visual._matrix.a=c;d=ceramic_Visual._matrix.c*this.transform.a+ceramic_Visual._matrix.d*this.transform.c;ceramic_Visual._matrix.d=ceramic_Visual._matrix.c*this.transform.b+ceramic_Visual._matrix.d*this.transform.d,ceramic_Visual._matrix.c=d;f=ceramic_Visual._matrix.tx*this.transform.a+ceramic_Visual._matrix.ty*this.transform.c+this.transform.tx;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.transform.b+ceramic_Visual._matrix.ty*this.transform.d+this.transform.ty,ceramic_Visual._matrix.tx=f}if(null!=this.parent&&null==this.renderTarget)if(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD)ceramic_Visual._matrix.tx+=this.parent.matTX,ceramic_Visual._matrix.ty+=this.parent.matTY;else if(this.translatesOnly&&null==this.transform){ceramic_Visual._matrix.a=this.parent.matA,ceramic_Visual._matrix.b=this.parent.matB,ceramic_Visual._matrix.c=this.parent.matC,ceramic_Visual._matrix.d=this.parent.matD;f=ceramic_Visual._matrix.tx*this.parent.matA+ceramic_Visual._matrix.ty*this.parent.matC+this.parent.matTX;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.parent.matB+ceramic_Visual._matrix.ty*this.parent.matD+this.parent.matTY,ceramic_Visual._matrix.tx=f}else{c=ceramic_Visual._matrix.a*this.parent.matA+ceramic_Visual._matrix.b*this.parent.matC;ceramic_Visual._matrix.b=ceramic_Visual._matrix.a*this.parent.matB+ceramic_Visual._matrix.b*this.parent.matD,ceramic_Visual._matrix.a=c;d=ceramic_Visual._matrix.c*this.parent.matA+ceramic_Visual._matrix.d*this.parent.matC;ceramic_Visual._matrix.d=ceramic_Visual._matrix.c*this.parent.matB+ceramic_Visual._matrix.d*this.parent.matD,ceramic_Visual._matrix.c=d;f=ceramic_Visual._matrix.tx*this.parent.matA+ceramic_Visual._matrix.ty*this.parent.matC+this.parent.matTX;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.parent.matB+ceramic_Visual._matrix.ty*this.parent.matD+this.parent.matTY,ceramic_Visual._matrix.tx=f}this.matA=ceramic_Visual._matrix.a,this.matB=ceramic_Visual._matrix.b,this.matC=ceramic_Visual._matrix.c,this.matD=ceramic_Visual._matrix.d,this.matTX=ceramic_Visual._matrix.tx,this.matTY=ceramic_Visual._matrix.ty,this.roundTranslation>0&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},_hits:function(n,e,t){if(!t){if(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget){var i=this.parent;if(null!=i)for(;;){if(null!=i.asQuad&&i instanceof ceramic_Filter){var r=i;if(r.get_renderTexture()==this.computedRenderTarget&&(null==ceramic_Screen.matchedHitVisual||r.hitVisual==ceramic_Screen.matchedHitVisual))return r.visualInContentHits(this,n,e)}if(null==(i=i.parent))break}return!1}if(null!=ceramic_Screen.matchedHitVisual&&ceramic_Screen.matchedHitVisual!=this)return!1}this.matrixDirty&&this.computeMatrix(),(l=ceramic_Visual._matrix).a=this.matA,l.b=this.matB,l.c=this.matC,l.d=this.matD,l.tx=this.matTX,l.ty=this.matTY,l.changedDirty=!0;var l,s=(l=ceramic_Visual._matrix).a*l.d-l.b*l.c;if(0==s)l.a=l.b=l.c=l.d=0,l.tx=-l.tx,l.ty=-l.ty;else{s=1/s;var a=l.d*s;l.d=l.a*s,l.a=a,l.b*=-s,l.c*=-s;var o=-l.a*l.tx-l.c*l.ty;l.ty=-l.b*l.tx-l.d*l.ty,l.tx=o}return l.changedDirty=!0,this.hitTest(n,e,ceramic_Visual._matrix)},hitTest:function(n,e,t){var i=n*t.a+e*t.c+t.tx,r=n*t.b+e*t.d+t.ty;return i>=0&&i<this.get_width()&&r>=0&&r<this.get_height()},get_isHitVisual:function(){return 8==(8&this.flags)},set_isHitVisual:function(n){return this.flags=n?8|this.flags:-9&this.flags,n},interceptPointerDown:function(n,e,t,i,r){return!1},interceptPointerOver:function(n,e,t){return!1},screenToVisual:function(n,e,t,i){if(null==i&&(i=!0),this.matrixDirty&&this.computeMatrix(),i&&(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget)){var r=this.parent;if(null!=r)for(;;){if(null!=r.asQuad&&r instanceof ceramic_Filter){var l=r;if(l.get_renderTexture()==this.computedRenderTarget){l.screenToVisual(n,e,t),(d=ceramic_Visual._matrix).a=this.matA,d.b=this.matB,d.c=this.matC,d.d=this.matD,d.tx=this.matTX,d.ty=this.matTY,d.changedDirty=!0;var s=ceramic_Visual._matrix;if(0==(c=s.a*s.d-s.b*s.c))s.a=s.b=s.c=s.d=0,s.tx=-s.tx,s.ty=-s.ty;else{c=1/c;var a=s.d*c;s.d=s.a*c,s.a=a,s.b*=-c,s.c*=-c;var o=-s.a*s.tx-s.c*s.ty;s.ty=-s.b*s.tx-s.d*s.ty,s.tx=o}s.changedDirty=!0;var p=t.x,h=t.y,u=ceramic_Visual._matrix;t.x=p*u.a+h*u.c+u.tx;var _=ceramic_Visual._matrix;return void(t.y=p*_.b+h*_.d+_.ty)}}if(null==(r=r.parent))break}}var c;if((d=ceramic_Visual._matrix).a=this.matA,d.b=this.matB,d.c=this.matC,d.d=this.matD,d.tx=this.matTX,d.ty=this.matTY,d.changedDirty=!0,0==(c=(d=ceramic_Visual._matrix).a*d.d-d.b*d.c))d.a=d.b=d.c=d.d=0,d.tx=-d.tx,d.ty=-d.ty;else{c=1/c;a=d.d*c;d.d=d.a*c,d.a=a,d.b*=-c,d.c*=-c;o=-d.a*d.tx-d.c*d.ty;d.ty=-d.b*d.tx-d.d*d.ty,d.tx=o}d.changedDirty=!0;var d=ceramic_Visual._matrix;t.x=n*d.a+e*d.c+d.tx;d=ceramic_Visual._matrix;t.y=n*d.b+e*d.d+d.ty},visualToScreen:function(n,e,t,i){if(null==i&&(i=!0),this.matrixDirty&&this.computeMatrix(),i&&(this.renderTargetDirty&&this.computeRenderTarget(),null!=this.computedRenderTarget)){var r=this.parent;if(null!=r)for(;;){if(null!=r.asQuad&&r instanceof ceramic_Filter){var l=r;if(l.get_renderTexture()==this.computedRenderTarget){(o=ceramic_Visual._matrix).a=this.matA,o.b=this.matB,o.c=this.matC,o.d=this.matD,o.tx=this.matTX,o.ty=this.matTY,o.changedDirty=!0;var s=ceramic_Visual._matrix;t.x=n*s.a+e*s.c+s.tx;var a=ceramic_Visual._matrix;return t.y=n*a.b+e*a.d+a.ty,void l.visualToScreen(t.x,t.y,t)}}if(null==(r=r.parent))break}}(o=ceramic_Visual._matrix).a=this.matA,o.b=this.matB,o.c=this.matC,o.d=this.matD,o.tx=this.matTX,o.ty=this.matTY,o.changedDirty=!0;var o=ceramic_Visual._matrix;t.x=n*o.a+e*o.c+o.tx;o=ceramic_Visual._matrix;t.y=n*o.b+e*o.d+o.ty},visualToTransform:function(n){this.matrixDirty&&this.computeMatrix(),n.a=this.matA,n.b=this.matB,n.c=this.matC,n.d=this.matD,n.tx=this.matTX,n.ty=this.matTY,n.changedDirty=!0},computeVisibility:function(){this._lifecycleState<0?this.computedVisible=!1:(null!=this.parent&&this.parent.visibilityDirty&&this.parent.computeVisibility(),this.computedVisible=this.visible,this.computedAlpha=this.alpha,this.computedVisible&&(null!=this.parent&&(this.parent.computedVisible||!this.parent.inheritAlpha&&this.parent.visible&&(null==this.parent.parent||this.parent.parent.computedVisible)||(this.computedVisible=!1),this.inheritAlpha&&(this.computedAlpha*=this.parent.computedAlpha)),0==this.computedAlpha&&4!=this.blending&&(this.computedVisible=!1))),this.visibilityDirty=!1},computeClip:function(){this.renderTargetDirty&&this.computeRenderTarget(),null!=this.parent&&this.parent.clipDirty&&this.parent.computeClip(),this.computedClip=!1,null!=this.parent&&(this.parent.computedClip||null!=this.parent.clip)&&this.computedRenderTarget==this.parent.computedRenderTarget&&(this.computedClip=!0),this.clipDirty=!1},computeTouchable:function(){null!=this.parent&&this.parent.touchableDirty&&this.parent.computeTouchable(),this.computedTouchable=this.touchable,this.computedTouchable&&null!=this.parent&&(this.parent.computedTouchable||(this.computedTouchable=!1)),this.touchableDirty=!1},computeRenderTarget:function(){null!=this.parent&&this.parent.renderTargetDirty&&this.parent.computeRenderTarget();this.computedRenderTarget;this.computedRenderTarget=this.renderTarget,null==this.computedRenderTarget&&null!=this.parent&&null!=this.parent.computedRenderTarget&&(this.computedRenderTarget=this.parent.computedRenderTarget),this.renderTargetDirty=!1},computeContent:function(){this.contentDirty=!1},autoChildrenDepth:function(n,e){null==e&&(e=1),null==n&&(n=1);var t=n;if(null!=this.children)for(var i=0,r=this.children.length;i<r;){var l=i++;this.children[l].set_depth(t),t+=e}},sortChildrenByDepth:function(){if(null!=this.children&&this.children.length>0){var n=this.children;ceramic_SortVisualsByDepth.rec(n,0,n.length)}},normalizeChildrenDepth:function(n,e){null==e&&(e=1),null==n&&(n=1),null!=this.children&&this.children.length>0&&(this.sortChildrenByDepth(),this.autoChildrenDepth())},hasIndirectParent:function(n){for(var e=this.parent;null!=e;){if(e==n)return!0;e=e.parent}return!1},firstParentWithClass:function(n){for(var e=this.parent;null!=e;){if(js_Boot.__instanceof(e,n))return e;e=e.parent}return null},add:function(n){if(n==this)throw haxe_Exception.thrown("A visual cannot add itself as child!");if(n.parent!=this){if(ceramic_App.app.hierarchyDirty=!0,null!=n.parent&&n.parent.remove(n),n.parent=this,n.visibilityDirty=!0,null!=n.children)for(var e=0,t=n.children.length;e<t;){var i=e++;if((b=n.children[i]).visibilityDirty=!0,null!=b.children)for(var r=0,l=b.children.length;r<l;){var s=r++;(y=b.children[s]).set_visibilityDirty(!0)}}if(n.matrixDirty=!0,null!=n.children)for(e=0,t=n.children.length;e<t;){i=e++;if((b=n.children[i]).matrixDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){s=r++;(y=b.children[s]).set_matrixDirty(!0)}}if(n.renderTargetDirty=!0,n.clipDirty=!0,null!=n.children)for(e=0,t=n.children.length;e<t;){i=e++;if((b=n.children[i]).clipDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){s=r++;(y=b.children[s]).set_clipDirty(!0)}}if(null!=n.children)for(e=0,t=n.children.length;e<t;){i=e++;if((b=n.children[i]).renderTargetDirty=!0,b.clipDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){s=r++;if((y=b.children[s]).clipDirty=!0,null!=y.children)for(var a=0,o=y.children.length;a<o;){var p=a++,h=y.children[p];if(h.clipDirty=!0,null!=h.children)for(var u=0,_=h.children.length;u<_;){var c=u++;h.children[c].set_clipDirty(!0)}}}if(null!=b.children)for(var d=0,f=b.children.length;d<f;){var x=d++;b.children[x].set_renderTargetDirty(!0)}}if(null==this.children&&(this.children=[]),this.children.push(n),this.clipDirty=!0,null!=this.children)for(e=0,t=this.children.length;e<t;){var b;i=e++;if((b=this.children[i]).clipDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){var y;s=r++;(y=b.children[s]).set_clipDirty(!0)}}}},remove:function(n){if(ceramic_App.app.hierarchyDirty=!0,null!=this.children){if(-1!=this.children.indexOf(n)?this.children.splice(this.children.indexOf(n),1):ceramic_App.app.logger.warning("Cannot remove visual "+Std.string(n)+", index is -1",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Visual.hx",lineNumber:2832,className:"ceramic.Visual",methodName:"remove"}),n.parent=null,n.visibilityDirty=!0,null!=n.children)for(var e=0,t=n.children.length;e<t;){var i=e++;if((b=n.children[i]).visibilityDirty=!0,null!=b.children)for(var r=0,l=b.children.length;r<l;){var s=r++;(y=b.children[s]).set_visibilityDirty(!0)}}if(n.matrixDirty=!0,null!=n.children)for(e=0,t=n.children.length;e<t;){i=e++;if((b=n.children[i]).matrixDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){s=r++;(y=b.children[s]).set_matrixDirty(!0)}}if(n.renderTargetDirty=!0,n.clipDirty=!0,null!=n.children)for(e=0,t=n.children.length;e<t;){i=e++;if((b=n.children[i]).clipDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){s=r++;(y=b.children[s]).set_clipDirty(!0)}}if(null!=n.children)for(e=0,t=n.children.length;e<t;){i=e++;if((b=n.children[i]).renderTargetDirty=!0,b.clipDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){s=r++;if((y=b.children[s]).clipDirty=!0,null!=y.children)for(var a=0,o=y.children.length;a<o;){var p=a++,h=y.children[p];if(h.clipDirty=!0,null!=h.children)for(var u=0,_=h.children.length;u<_;){var c=u++;h.children[c].set_clipDirty(!0)}}}if(null!=b.children)for(var d=0,f=b.children.length;d<f;){var x=d++;b.children[x].set_renderTargetDirty(!0)}}if(n.clipDirty=!0,null!=n.children)for(e=0,t=n.children.length;e<t;){var b;i=e++;if((b=n.children[i]).clipDirty=!0,null!=b.children)for(r=0,l=b.children.length;r<l;){var y;s=r++;(y=b.children[s]).set_clipDirty(!0)}}}},contains:function(n,e){null==e&&(e=!1);for(var t=n.parent;null!=t;){if(t==this)return!0;if(t=t.parent,!e)break}return!1},computeBounds:function(){if(null==this.children)this._width=0,this._height=0;else{for(var n=999999999,e=999999999,t=-999999999.9,i=-999999999.9,r=new ceramic_Point,l=0,s=this.children.length;l<s;){var a=l++;if((b=this.children[a]).visible)if(null!=b.asMesh)for(var o=b.asMesh.vertices,p=0,h=o.length,u=0,_=0;p<h;)u=o[p],_=o[p+1],b.visualToScreen(u,_,r,!1),r.x>t&&(t=r.x),r.y>i&&(i=r.y),r.x<n&&(n=r.x),r.y<e&&(e=r.y),p+=2;else b.visualToScreen(0,0,r,!1),r.x>t&&(t=r.x),r.y>i&&(i=r.y),r.x<n&&(n=r.x),r.y<e&&(e=r.y),b.visualToScreen(b.get_width(),0,r,!1),r.x>t&&(t=r.x),r.y>i&&(i=r.y),r.x<n&&(n=r.x),r.y<e&&(e=r.y),b.visualToScreen(0,b.get_height(),r,!1),r.x>t&&(t=r.x),r.y>i&&(i=r.y),r.x<n&&(n=r.x),r.y<e&&(e=r.y),b.visualToScreen(b.get_width(),b.get_height(),r,!1),r.x>t&&(t=r.x),r.y>i&&(i=r.y),r.x<n&&(n=r.x),r.y<e&&(e=r.y)}this.visualToScreen(0,0,r,!1);var c=r.x,d=r.y;if(this.screenToVisual(n,e,r,!1),n=r.x,e=r.y,this.screenToVisual(t,i,r,!1),(t=r.x)<n){var f=n;n=t,t=f}if((i=r.y)<e){var x=e;e=i,i=x}if(this._width=t-n,this._height=i-e,this.set_anchorX(0!=this._width?-n/this._width:0),this.set_anchorY(0!=this._height?-e/this._height:0),this.screenToVisual(c,d,r,!1),this.set_x(r.x-this._width*this.anchorX),this.set_y(r.y-this._height*this.anchorY),this.matrixDirty=!0,null!=this.children)for(l=0,s=this.children.length;l<s;){var b;a=l++;if((b=this.children[a]).matrixDirty=!0,null!=b.children)for(var y=0,v=b.children.length;y<v;){p=y++;b.children[p].set_matrixDirty(!0)}}}},bindToNativeScreenSize:function(){ceramic_App.app.screen.reverseMatrix.onChange(this,$bind(this,this._bindToNativeScreenSizeCallback)),this._bindToNativeScreenSizeCallback()},_bindToNativeScreenSizeCallback:function(){null==this.transform&&this.set_transform(new ceramic_Transform),(n=this.transform).a=1,n.b=0,n.c=0,n.d=1,n.tx=0,n.ty=0,n.changedDirty=!0;var n=this.transform,e=clay_Clay.app.screenDensity,t=clay_Clay.app.screenDensity;n.a*=e,n.b*=t,n.c*=e,n.d*=t,n.tx*=e,n.ty*=t,n.changedDirty=!0;n=this.transform;var i=ceramic_App.app.screen.reverseMatrix,r=n.a*i.a+n.b*i.c;n.b=n.a*i.b+n.b*i.d,n.a=r;var l=n.c*i.a+n.d*i.c;n.d=n.c*i.b+n.d*i.d,n.c=l;var s=n.tx*i.a+n.ty*i.c+i.tx;n.ty=n.tx*i.b+n.ty*i.d+i.ty,n.tx=s,n.changedDirty=!0,this.transform.tx=Math.round(this.transform.tx),this.transform.ty=Math.round(this.transform.ty),this.transform.changedDirty=!0;var a=clay_Clay.app.screenHeight;this.set_width(clay_Clay.app.screenWidth),this.set_height(a)},bindToScreenSize:function(){ceramic_App.app.screen.onResize(this,$bind(this,this._bindToScreenSizeCallback)),this._bindToScreenSizeCallback()},_bindToScreenSizeCallback:function(){var n=ceramic_App.app.screen.height;this.set_width(ceramic_App.app.screen.width),this.set_height(n)},bindToTargetSize:function(){ceramic_App.app.screen.onResize(this,$bind(this,this._bindToTargetSizeCallback)),this._bindToTargetSizeCallback()},_bindToTargetSizeCallback:function(){var n=ceramic_App.app.screen.height;this.set_width(ceramic_App.app.screen.width),this.set_height(n)},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offPointerDown(),this.offPointerUp(),this.offPointerOver(),this.offPointerOut(),this.offFocus(),this.offBlur()},__class__:ceramic_Visual,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_isHitVisual:"set_isHitVisual",get_isHitVisual:"get_isHitVisual",set_active:"set_active",get_active:"get_active",set_shader:"set_shader",set_transform:"set_transform",set_translateY:"set_translateY",get_translateY:"get_translateY",set_translateX:"set_translateX",get_translateX:"get_translateX",set_alpha:"set_alpha",set_rotation:"set_rotation",set_roundTranslation:"set_roundTranslation",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_anchorY:"set_anchorY",set_anchorX:"set_anchorX",set_skewY:"set_skewY",set_skewX:"set_skewX",set_scaleY:"set_scaleY",set_scaleX:"set_scaleX",set_y:"set_y",set_x:"set_x",set_depthRange:"set_depthRange",set_depth:"set_depth",set_touchable:"set_touchable",set_visible:"set_visible",set_blending:"set_blending",set_renderTarget:"set_renderTarget",set_clipDirty:"set_clipDirty",set_touchableDirty:"set_touchableDirty",set_visibilityDirty:"set_visibilityDirty",set_renderTargetDirty:"set_renderTargetDirty",set_matrixDirty:"set_matrixDirty",set_contentDirty:"set_contentDirty",set_inheritAlpha:"set_inheritAlpha",set_clip:"set_clip",get_isPointerOver:"get_isPointerOver",get_isPointerDown:"get_isPointerDown",set_nape:"set_nape"})});var ceramic_Mesh=function(){this.uvs=[],this.texture=null,this.colors=[],this.indices=[],this.vertices=[],this.complexHit=!1,this.customFloatAttributesSize=0,this.colorMapping=0,ceramic_Visual.call(this),this.asMesh=this};t["ceramic.Mesh"]=ceramic_Mesh,ceramic_Mesh.__name__="ceramic.Mesh",ceramic_Mesh.__super__=ceramic_Visual,ceramic_Mesh.prototype=$extend(ceramic_Visual.prototype,{destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2;null!=this.texture&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset&&this.texture.asset.release()),this.texture=null,null!=this.texture&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset&&this.texture.asset.retain())),this._lifecycleState=-1,ceramic_Visual.prototype.destroy.call(this)}},get_color:function(){if(null==this.colors||0==this.colors.length)return 16777215;var n=this.colors[0],e=n>>16&255,t=n>>8&255,i=255&n,r=p._new();return r&=65535,r|=(e>255?255:e<0?0:e)<<16,r&=16711935,r|=(t>255?255:t<0?0:t)<<8,r&=16776960,r|=i>255?255:i<0?0:i},set_color:function(n){if(null==this.colors&&(this.colors=[]),0==this.colors.length){null==(i=255)&&(i=255);var e=(0|n)-16777216;e&=16777215;var t=e|=(i>255?255:i<0?0:i)<<24;this.colors.push(t)}else{var i;null==(i=255)&&(i=255);e=(0|n)-16777216;e&=16777215;t=e|=(i>255?255:i<0?0:i)<<24;this.colors[0]=t}return n},set_texture:function(n){return this.texture==n||(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset&&this.texture.asset.release()),this.texture=n,null!=this.texture&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset&&this.texture.asset.retain())),n},textureDestroyed:function(n){null!=this.texture&&(null!=this.texture&&(this.texture.offDestroy($bind(this,this.textureDestroyed)),null!=this.texture.asset&&this.texture.asset.release()),this.texture=null,null!=this.texture&&(this.texture.onDestroy(this,$bind(this,this.textureDestroyed)),null!=this.texture.asset&&this.texture.asset.retain()))},hitTest:function(n,e,t){if(this.complexHit){for(var i,r,l,s,a,o,p,h,u,_,c=n*t.a+e*t.c+t.tx,d=n*t.b+e*t.d+t.ty,f=2+this.customFloatAttributesSize,x=0,b=0,y=this.indices.length/3|0;x<y;){r=this.indices[b],++b,l=this.indices[b],++b,s=this.indices[b],++b,i=r*f,a=this.vertices[i],++i,o=this.vertices[i],i=l*f,p=this.vertices[i],++i,h=this.vertices[i],i=s*f,u=this.vertices[i],++i;var v=(c-p)*(o-h)-(a-p)*(d-h),m=(c-u)*(h-(_=this.vertices[i]))-(p-u)*(d-_),g=(c-a)*(_-o)-(u-a)*(d-o);if(!(v<0||m<0||g<0)||!(v>0||m>0||g>0))return!0;++x}return!1}return ceramic_Visual.prototype.hitTest.call(this,n,e,t)},set_shader:function(n){return this.shader=n,null!=n&&(this.customFloatAttributesSize=n.customFloatAttributesSize),n},computeSize:function(){if(null!=this.vertices&&this.vertices.length>=2){var n=0,e=0,t=0,i=this.vertices.length-1;if(this.customFloatAttributesSize>0)for(;t<i;){(r=this.vertices[t])>n&&(n=r),++t,(l=this.vertices[t])>e&&(e=l),t+=1+this.customFloatAttributesSize}else for(;t<i;){var r,l;(r=this.vertices[t])>n&&(n=r),++t,(l=this.vertices[t])>e&&(e=l),++t}var s=Math.round(1e3*e)/1e3;this.set_width(Math.round(1e3*n)/1e3),this.set_height(s)}else this.set_width(0),this.set_height(0)},grid:function(n,e,t,i){null==i&&(i=-1),null==t&&(t=-1),-1==t&&(t=this._width),-1==i&&(i=this._height);for(var r,l=t/n,s=i/e,a=0,o=0,p=0,h=e+1;p<h;)for(var u=p++,_=u*s,c=0,d=n+1;c<d;){var f=c++;if(this.vertices[a]=f*l,++a,this.vertices[a]=_,++a,u>0&&f>0){var x=(u-1)*(n+1)+f-1;this.indices[o]=x,++o,this.indices[o]=x+1,++o,this.indices[o]=x+(n+1),++o,this.indices[o]=x+1,++o,this.indices[o]=x+(n+1),++o,this.indices[o]=x+(n+1)+1,++o}}this.vertices.length>a&&((r=this.vertices).length!=a&&(r.length>a?r.splice(a,r.length-a):r[a-1]=null));this.indices.length>o&&((r=this.indices).length!=o&&(r.length>o?r.splice(o,r.length-o):r[o-1]=null))},gridFromTexture:function(n,e,t){null==t&&(t=this.texture),this.grid(n,e,t.width,t.height);for(var i=0,r=1/n,l=1/e,s=0,a=e+1;s<a;){var o=s++*l;this.uvs[i]=0,++i,this.uvs[i]=o,++i;for(var p=1,h=n+1;p<h;){var u=p++;this.uvs[i]=u*r,++i,this.uvs[i]=o,++i}}if(this.uvs.length>i){var _=this.uvs;if(_.length!=i)if(_.length>i)_.splice(i,_.length-i);else _[i-1]=null}},__class__:ceramic_Mesh,__properties__:$extend(ceramic_Visual.prototype.__properties__,{set_texture:"set_texture",set_color:"set_color",get_color:"get_color"})});var ceramic_Border=function(){this.borderRightColor=-1,this.borderLeftColor=-1,this.borderBottomColor=-1,this.borderTopColor=-1,this.borderColor=8421504,this.borderRightSize=-1,this.borderLeftSize=-1,this.borderBottomSize=-1,this.borderTopSize=-1,this.borderSize=1,this.borderPosition=o.INSIDE,this.autoComputeColors=!0,this.autoComputeVertices=!0,ceramic_Mesh.call(this),this.colorMapping=1,this.vertices=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.indices=[0,1,2,2,1,3,3,1,5,5,1,7,4,5,6,6,5,7,0,2,6,6,2,4],this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.computeVertices()};t["ceramic.Border"]=ceramic_Border,ceramic_Border.__name__="ceramic.Border",ceramic_Border.__super__=ceramic_Mesh,ceramic_Border.prototype=$extend(ceramic_Mesh.prototype,{set_autoComputeVertices:function(n){return this.autoComputeVertices==n||(this.autoComputeVertices=n,n&&this.computeVertices()),n},set_autoComputeColors:function(n){return this.autoComputeColors==n||(this.autoComputeColors=n,n&&this.computeColors()),n},set_width:function(n){return ceramic_Mesh.prototype.set_width.call(this,n),this.autoComputeVertices&&this.computeVertices(),n},set_height:function(n){return ceramic_Mesh.prototype.set_height.call(this,n),this.autoComputeVertices&&this.computeVertices(),n},set_borderPosition:function(n){return this.borderPosition==n||(this.borderPosition=n,this.autoComputeVertices&&this.computeVertices()),n},set_borderSize:function(n){return this.borderSize==n||(this.borderSize=n,this.autoComputeVertices&&this.computeVertices()),n},set_borderTopSize:function(n){return this.borderTopSize==n||(this.borderTopSize=n,this.autoComputeVertices&&this.computeVertices()),n},set_borderBottomSize:function(n){return this.borderBottomSize==n||(this.borderBottomSize=n,this.autoComputeVertices&&this.computeVertices()),n},set_borderLeftSize:function(n){return this.borderLeftSize==n||(this.borderLeftSize=n,this.autoComputeVertices&&this.computeVertices()),n},set_borderRightSize:function(n){return this.borderRightSize==n||(this.borderRightSize=n,this.autoComputeVertices&&this.computeVertices()),n},set_borderColor:function(n){return this.borderColor==n||(this.borderColor=n,this.autoComputeColors&&this.computeColors()),n},set_borderTopColor:function(n){return this.borderTopColor==n||(this.borderTopColor=n,this.autoComputeColors&&this.computeColors()),n},set_borderBottomColor:function(n){return this.borderBottomColor==n||(this.borderBottomColor=n,this.autoComputeColors&&this.computeColors()),n},set_borderLeftColor:function(n){return this.borderLeftColor==n||(this.borderLeftColor=n,this.autoComputeColors&&this.computeColors()),n},set_borderRightColor:function(n){return this.borderRightColor==n||(this.borderRightColor=n,this.autoComputeColors&&this.computeColors()),n},computeColors:function(){var n=(0|(-1!=this.borderTopColor?this.borderTopColor:this.borderColor))-16777216;n&=16777215;var e=n|=-16777216;n=(0|(-1!=this.borderBottomColor?this.borderBottomColor:this.borderColor))-16777216;n&=16777215;var t=n|=-16777216;n=(0|(-1!=this.borderLeftColor?this.borderLeftColor:this.borderColor))-16777216;n&=16777215;var i=n|=-16777216;n=(0|(-1!=this.borderRightColor?this.borderRightColor:this.borderColor))-16777216;n&=16777215;var r=n|=-16777216;this.colors[0]=e,this.colors[1]=e,this.colors[2]=e,this.colors[3]=e,this.colors[4]=e,this.colors[5]=e,this.colors[6]=r,this.colors[7]=r,this.colors[8]=r,this.colors[9]=r,this.colors[10]=r,this.colors[11]=r,this.colors[12]=t,this.colors[13]=t,this.colors[14]=t,this.colors[15]=t,this.colors[16]=t,this.colors[17]=t,this.colors[18]=i,this.colors[19]=i,this.colors[20]=i,this.colors[21]=i,this.colors[22]=i,this.colors[23]=i},computeVertices:function(){var n=.5,e=.5;this.borderPosition==o.OUTSIDE?(n=1,e=0):this.borderPosition==o.INSIDE&&(n=0,e=1);var t=this.borderLeftSize>=0?this.borderLeftSize:this.borderSize,i=n*t,r=e*t,l=this.borderTopSize>=0?this.borderTopSize:this.borderSize,s=n*l,a=e*l,p=this.borderRightSize>=0?this.borderRightSize:this.borderSize,h=n*p,u=e*p,_=this.borderBottomSize>=0?this.borderBottomSize:this.borderSize,c=n*_,d=e*_,f=this.get_width(),x=this.get_height();this.vertices[0]=-i,this.vertices[1]=-s;var b=f+h;this.vertices[2]=b,this.vertices[3]=-s,this.vertices[4]=r,this.vertices[5]=a,b=f-u,this.vertices[6]=b,this.vertices[7]=a,this.vertices[8]=r,b=x-d,this.vertices[9]=b,b=f-u,this.vertices[10]=b,b=x-d,this.vertices[11]=b,this.vertices[12]=-i,b=x+c,this.vertices[13]=b,b=f+h,this.vertices[14]=b,b=x+c,this.vertices[15]=b},__class__:ceramic_Border,__properties__:$extend(ceramic_Mesh.prototype.__properties__,{set_borderRightColor:"set_borderRightColor",set_borderLeftColor:"set_borderLeftColor",set_borderBottomColor:"set_borderBottomColor",set_borderTopColor:"set_borderTopColor",set_borderColor:"set_borderColor",set_borderRightSize:"set_borderRightSize",set_borderLeftSize:"set_borderLeftSize",set_borderBottomSize:"set_borderBottomSize",set_borderTopSize:"set_borderTopSize",set_borderSize:"set_borderSize",set_borderPosition:"set_borderPosition",set_autoComputeColors:"set_autoComputeColors",set_autoComputeVertices:"set_autoComputeVertices"})});var o=i["ceramic.BorderPosition"]={__ename__:"ceramic.BorderPosition",__constructs__:null,INSIDE:{_hx_name:"INSIDE",_hx_index:0,__enum__:"ceramic.BorderPosition",toString:$estr},OUTSIDE:{_hx_name:"OUTSIDE",_hx_index:1,__enum__:"ceramic.BorderPosition",toString:$estr},MIDDLE:{_hx_name:"MIDDLE",_hx_index:2,__enum__:"ceramic.BorderPosition",toString:$estr}};o.__constructs__=[o.INSIDE,o.OUTSIDE,o.MIDDLE];var ceramic_CollectionImpl=function(){this.combinedCollectionLastChanges=null,this.combinedCollections=null,this.filter=null,this.byId=null,this.entriesDirty=!1,this.indexDirty=!0,this.entries=[],this.lastChange=0,this.internalId=ceramic_CollectionImpl._nextInternalId++};t["ceramic.CollectionImpl"]=ceramic_CollectionImpl,ceramic_CollectionImpl.__name__="ceramic.CollectionImpl",ceramic_CollectionImpl.__interfaces__=[tracker_Events],ceramic_CollectionImpl.prototype={get_length:function(){if(null!=this.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=this){for(var n=0,e=this.combinedCollections.length;n<e;){var t=n++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries.length},pushAll:function(n){for(var e=0;e<n.length;){var t=n[e];++e,this.entries.push(t)}this.indexDirty=!0,this.lastChange=this.lastChange>999999999?-999999999:this.lastChange+1,ceramic_CollectionImpl._lastCheckedCombined=null},clear:function(){var n=this.entries.length;n>0&&this.entries.splice(0,n),this.indexDirty=!0,this.lastChange=this.lastChange>999999999?-999999999:this.lastChange+1,ceramic_CollectionImpl._lastCheckedCombined=null},push:function(n){this.entries.push(n),this.indexDirty=!0,this.lastChange=this.lastChange>999999999?-999999999:this.lastChange+1,ceramic_CollectionImpl._lastCheckedCombined=null},remove:function(n){HxOverrides.remove(this.entries,n),this.indexDirty=!0,this.lastChange=this.lastChange>999999999?-999999999:this.lastChange+1,ceramic_CollectionImpl._lastCheckedCombined=null},synchronize:function(){this.entriesDirty&&this.computeEntries(),this.indexDirty&&this.computeIndex()},get:function(n){if(null==n)throw haxe_Exception.thrown("Cannot get a collection entry with a null id!");if(null!=this.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=this){for(var e=0,t=this.combinedCollections.length;e<t;){var i=e++,r=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=r.lastChange){this.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.indexDirty&&this.computeIndex(),this.byId.h[n]},getByIndex:function(n){if(null!=this.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=this){for(var e=0,t=this.combinedCollections.length;e<t;){var i=e++,r=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=r.lastChange){this.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries[n]},indexOfId:function(n){var e=this.get(n);return null==e?-1:this.indexOf(e)},indexOf:function(n){if(null!=this.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=this){for(var e=0,t=this.combinedCollections.length;e<t;){var i=e++,r=this.combinedCollections[i];if(this.combinedCollectionLastChanges[i]!=r.lastChange){this.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),this.entries.indexOf(n)},iterator:function(){if(null!=this.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=this){for(var n=0,e=this.combinedCollections.length;n<e;){var t=n++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=this}return this.entriesDirty&&this.computeEntries(),new haxe_iterators_ArrayIterator(this.entries)},checkCombined:function(){if(null!=this.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=this){for(var n=0,e=this.combinedCollections.length;n<e;){var t=n++,i=this.combinedCollections[t];if(this.combinedCollectionLastChanges[t]!=i.lastChange){this.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=this}},computeIndex:function(){this.entriesDirty&&this.computeEntries(),this.byId=new haxe_ds_StringMap;for(var n=0,e=this.entries;n<e.length;){var t=e[n];++n,Object.prototype.hasOwnProperty.call(this.byId.h,t.id)||(this.byId.h[t.id]=t)}this.indexDirty=!1},computeEntries:function(){this.entries=[];for(var n=0,e=this.combinedCollections.length;n<e;){var t=n++,i=this.combinedCollections[t];if(null!=i.combinedCollections&&ceramic_CollectionImpl._lastCheckedCombined!=i){for(var r=0,l=i.combinedCollections.length;r<l;){var s=r++,a=i.combinedCollections[s];if(i.combinedCollectionLastChanges[s]!=a.lastChange){i.entriesDirty=!0;break}}ceramic_CollectionImpl._lastCheckedCombined=i}i.entriesDirty&&i.computeEntries();for(var o=0,p=i.entries;o<p.length;){var h=p[o++];this.entries.push(h)}this.combinedCollectionLastChanges[t]=i.lastChange}null!=this.filter&&(this.entries=this.filter(this.entries)),this.entriesDirty=!1,this.indexDirty=!0,ceramic_CollectionImpl._lastCheckedCombined!=this&&(ceramic_CollectionImpl._lastCheckedCombined=null)},__class__:ceramic_CollectionImpl,__properties__:{get_length:"get_length"}};var ceramic_CollectionEntry=function(n,e){this.index=ceramic_CollectionEntry._nextIndex++,this.id=null!=n?n:"id"+ceramic_CollectionEntry._nextId++,this.name=e};t["ceramic.CollectionEntry"]=ceramic_CollectionEntry,ceramic_CollectionEntry.__name__="ceramic.CollectionEntry",ceramic_CollectionEntry.prototype={setRawData:function(n){for(var e=js_Boot.getClass(this),t=e.__name__,r=ceramic_FieldInfo.types(t),l=r.h,s=Object.keys(l),a=s.length,o=0;o<a;){var p=s[o++],h=r.h[p];if(Object.prototype.hasOwnProperty.call(n,p)){var u=Reflect.field(n,p),_=null;if(this.setRawField(p,u))continue;var c=e.__name__;if(ceramic_FieldMeta._hasMeta(e,c,p,"skipEmpty",!0)){if(null==u)continue;if("string"==typeof u)if(0==u.length)continue}if(null==h){var d=StringTools.trim((""+Std.string(u)).toLowerCase()),f=i[h];if(null!=f){for(var x=0,b=f.__constructs__,y=new Array(b.length),v=0,m=b.length;v<m;){var g=v++;y[g]=b[g]._hx_name}for(var z=y;x<z.length;){var w=z[x];if(++x,w.toLowerCase()==d){_=Type.createEnum(f,w);break}}}}else switch(h){case"Bool":_="boolean"==typeof u?u:""!=(u=StringTools.trim((""+Std.string(u)).toLowerCase()))&&"0"!=u&&"false"!=u&&"no"!=u;break;case"Float":"number"==typeof u&&(0|u)===u||"number"==typeof u?_=u:(null==(_=parseFloat(StringTools.replace(""+Std.string(u),",",".")))||isNaN(_))&&(_=0);break;case"String":_=null==u||"null"==u?null:""+Std.string(u);break;case"Int":case"ceramic.Color":"number"==typeof u&&(0|u)===u||"number"==typeof u?_=0|u:(null==(_=Std.parseInt(""+Std.string(u)))||isNaN(_))&&(_=0);break;default:var O=StringTools.trim((""+Std.string(u)).toLowerCase()),C=i[h];if(null!=C){for(var E=0,U=C.__constructs__,M=new Array(U.length),T=0,k=U.length;T<k;){var D=T++;M[D]=U[D]._hx_name}for(var S=M;E<S.length;){var A=S[E];if(++E,A.toLowerCase()==O){_=Type.createEnum(C,A);break}}}}this[p]=_}}},setRawField:function(n,e){return!1},__class__:ceramic_CollectionEntry};var p={__properties__:{set_lightness:"set_lightness",get_lightness:"get_lightness",set_brightness:"set_brightness",get_brightness:"get_brightness",set_saturation:"set_saturation",get_saturation:"get_saturation",set_hue:"set_hue",get_hue:"get_hue",set_black:"set_black",get_black:"get_black",set_yellow:"set_yellow",get_yellow:"get_yellow",set_magenta:"set_magenta",get_magenta:"get_magenta",set_cyan:"set_cyan",get_cyan:"get_cyan",set_greenFloat:"set_greenFloat",get_greenFloat:"get_greenFloat",set_blueFloat:"set_blueFloat",get_blueFloat:"get_blueFloat",set_redFloat:"set_redFloat",get_redFloat:"get_redFloat",set_green:"set_green",get_green:"get_green",set_blue:"set_blue",get_blue:"get_blue",set_red:"set_red",get_red:"get_red"},random:function(n,e){null==e&&(e=.5),null==n&&(n=.5);var t=360*Math.random(),i=Math.random()*(1-n)+n,r=Math.random()*(1-e)+e;return p.fromHSB(t,i,r)},fromInt:function(n){return p._new(n)},fromRGB:function(n,e,t){var i=p._new();return i&=65535,i|=(n>255?255:n<0?0:n)<<16,i&=16711935,i|=(e>255?255:e<0?0:e)<<8,i&=16776960,i|=t>255?255:t<0?0:t},fromRGBFloat:function(n,e,t){var i,r=p._new();return r&=65535,r|=((i=Math.round(255*n))>255?255:i<0?0:i)<<16,r&=16711935,r|=((i=Math.round(255*e))>255?255:i<0?0:i)<<8,r&=16776960,r|=(i=Math.round(255*t))>255?255:i<0?0:i},fromCMYK:function(n,e,t,i){var r=p._new(),l=(1-n)*(1-i);r&=65535,r|=((s=Math.round(255*l))>255?255:s<0?0:s)<<16;l=(1-e)*(1-i);r&=16711935,r|=((s=Math.round(255*l))>255?255:s<0?0:s)<<8;var s;l=(1-t)*(1-i);return r&=16776960,r|=(s=Math.round(255*l))>255?255:s<0?0:s},fromHSB:function(n,e,t){var i=p._new(),r=t*e,l=t-r,s=n,a=r,o=(s%=360)/60,h=a*(1-Math.abs(o%2-1))+l;switch(a+=l,0|o){case 0:i&=65535,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*l))>255?255:u<0?0:u;break;case 1:i&=65535,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*l))>255?255:u<0?0:u;break;case 2:i&=65535,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*h))>255?255:u<0?0:u;break;case 3:i&=65535,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*a))>255?255:u<0?0:u;break;case 4:i&=65535,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*a))>255?255:u<0?0:u;break;case 5:var u;i&=65535,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*h))>255?255:u<0?0:u}return i},fromHSL:function(n,e,t){var i=p._new(),r=(1-Math.abs(2*t-1))*e,l=t-r/2,s=n,a=r,o=(s%=360)/60,h=a*(1-Math.abs(o%2-1))+l;switch(a+=l,0|o){case 0:i&=65535,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*l))>255?255:u<0?0:u;break;case 1:i&=65535,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*l))>255?255:u<0?0:u;break;case 2:i&=65535,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*h))>255?255:u<0?0:u;break;case 3:i&=65535,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*a))>255?255:u<0?0:u;break;case 4:i&=65535,i|=((u=Math.round(255*h))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*a))>255?255:u<0?0:u;break;case 5:var u;i&=65535,i|=((u=Math.round(255*a))>255?255:u<0?0:u)<<16,i&=16711935,i|=((u=Math.round(255*l))>255?255:u<0?0:u)<<8,i&=16776960,i|=(u=Math.round(255*h))>255?255:u<0?0:u}return i},fromString:function(n){var e=null;if(n=StringTools.trim(n),StringTools.startsWith(n,"0x"))e=p._new(Std.parseInt(n.substring(0,8)));else if(StringTools.startsWith(n,"#")){var t="0x"+n.substring(1,7);e=p._new(Std.parseInt(t))}else{n=n.toUpperCase();for(var i=p.colorLookup.h,r=Object.keys(i),l=r.length,s=0;s<l;){var a=r[s++];if(a.toUpperCase()==n){e=p._new(p.colorLookup.h[a]);break}}}return e},getHSBColorWheel:function(){for(var n=[],e=0;e<360;){var t=e++;n.push(p.fromHSB(t,1,1))}return n},interpolate:function(n,e,t){null==t&&(t=.5);var i=((e>>16&255)-(n>>16&255))*t+(n>>16&255)|0,r=((e>>8&255)-(n>>8&255))*t+(n>>8&255)|0,l=((255&e)-(255&n))*t+(255&n)|0,s=p._new();return s&=65535,s|=(i>255?255:i<0?0:i)<<16,s&=16711935,s|=(r>255?255:r<0?0:r)<<8,s&=16776960,s|=l>255?255:l<0?0:l},gradient:function(n,e,t,i){var r=[];null==i&&(i=function(n){return n});for(var l=0,s=t;l<s;){var a=l++,o=i(a/(t-1));null==o&&(o=.5);var h=((e>>16&255)-(n>>16&255))*o+(n>>16&255)|0,u=((e>>8&255)-(n>>8&255))*o+(n>>8&255)|0,_=((255&e)-(255&n))*o+(255&n)|0,c=p._new();c&=65535,c|=(h>255?255:h<0?0:h)<<16,c&=16711935,c|=(u>255?255:u<0?0:u)<<8,c&=16776960,c|=_>255?255:_<0?0:_,r[a]=c}return r},multiply:function(n,e){var t,i=(n>>16&255)/255*((e>>16&255)/255),r=(n>>8&255)/255*((e>>8&255)/255),l=(255&n)/255*((255&e)/255),s=p._new();return s&=65535,s|=((t=Math.round(255*i))>255?255:t<0?0:t)<<16,s&=16711935,s|=((t=Math.round(255*r))>255?255:t<0?0:t)<<8,s&=16776960,s|=(t=Math.round(255*l))>255?255:t<0?0:t},add:function(n,e){var t=(n>>16&255)+(e>>16&255),i=(n>>8&255)+(e>>8&255),r=(255&n)+(255&e),l=p._new();return l&=65535,l|=(t>255?255:t<0?0:t)<<16,l&=16711935,l|=(i>255?255:i<0?0:i)<<8,l&=16776960,l|=r>255?255:r<0?0:r},subtract:function(n,e){var t=(n>>16&255)-(e>>16&255),i=(n>>8&255)-(e>>8&255),r=(255&n)-(255&e),l=p._new();return l&=65535,l|=(t>255?255:t<0?0:t)<<16,l&=16711935,l|=(i>255?255:i<0?0:i)<<8,l&=16776960,l|=r>255?255:r<0?0:r},toHexString:function(n,e){return null==e&&(e=!0),(e?"0x":"")+StringTools.hex(n>>16&255,2)+StringTools.hex(n>>8&255,2)+StringTools.hex(255&n,2)},toWebString:function(n){var e=!1;return null==e&&(e=!0),"#"+(e?"0x":"")+StringTools.hex(n>>16&255,2)+StringTools.hex(n>>8&255,2)+StringTools.hex(255&n,2)},getColorInfo:function(n){var e="0x"+StringTools.hex(n>>16&255,2)+StringTools.hex(n>>8&255,2)+StringTools.hex(255&n,2)+"\n";return e+="Red: "+(n>>16&255)+" green: "+(n>>8&255)+" blue: "+(255&n)+"\n",e+="Hue: "+p.roundDecimal(p.get_hue(n),2)+" saturation: "+p.roundDecimal((Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))-Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),2)+" brightness: "+p.roundDecimal(Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),2)+" lightness: "+p.roundDecimal((Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))+Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/2,2)},getDarkened:function(n,e){null==e&&(e=.2);var t=e<0?0:e;e=t>1?1:t;var i=n,r=(Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))+Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/2*(1-e),l=p.get_hue(i),s=(1-Math.abs(2*r-1))*((Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))-Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))),a=r-s/2,o=l,h=s,u=(o%=360)/60,_=h*(1-Math.abs(u%2-1))+a;switch(h+=a,0|u){case 0:i&=65535,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*a))>255?255:r<0?0:r;break;case 1:i&=65535,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*a))>255?255:r<0?0:r;break;case 2:i&=65535,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*_))>255?255:r<0?0:r;break;case 3:i&=65535,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*h))>255?255:r<0?0:r;break;case 4:i&=65535,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*h))>255?255:r<0?0:r;break;case 5:i&=65535,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*_))>255?255:r<0?0:r}return i},getLightened:function(n,e){null==e&&(e=.2);var t=e<0?0:e;e=t>1?1:t;var i=n,r=(Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))+Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/2+(1-(Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))+Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/2)*e,l=p.get_hue(i),s=(1-Math.abs(2*r-1))*((Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))-Math.min((i>>16&255)/255,Math.min((i>>8&255)/255,(255&i)/255)))/Math.max((i>>16&255)/255,Math.max((i>>8&255)/255,(255&i)/255))),a=r-s/2,o=l,h=s,u=(o%=360)/60,_=h*(1-Math.abs(u%2-1))+a;switch(h+=a,0|u){case 0:i&=65535,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*a))>255?255:r<0?0:r;break;case 1:i&=65535,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*a))>255?255:r<0?0:r;break;case 2:i&=65535,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*_))>255?255:r<0?0:r;break;case 3:i&=65535,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*h))>255?255:r<0?0:r;break;case 4:i&=65535,i|=((r=Math.round(255*_))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*h))>255?255:r<0?0:r;break;case 5:i&=65535,i|=((r=Math.round(255*h))>255?255:r<0?0:r)<<16,i&=16711935,i|=((r=Math.round(255*a))>255?255:r<0?0:r)<<8,i&=16776960,i|=(r=Math.round(255*_))>255?255:r<0?0:r}return i},getInverted:function(n){var e=255-(n>>16&255),t=255-(n>>8&255),i=255-(255&n),r=p._new();return r&=65535,r|=(e>255?255:e<0?0:e)<<16,r&=16711935,r|=(t>255?255:t<0?0:t)<<8,r&=16776960,r|=i>255?255:i<0?0:i},setRGB:function(n,e,t,i){return n&=65535,n|=(e>255?255:e<0?0:e)<<16,n&=16711935,n|=(t>255?255:t<0?0:t)<<8,n&=16776960,n|=i>255?255:i<0?0:i},setRGBFloat:function(n,e,t,i){var r;return n&=65535,n|=((r=Math.round(255*e))>255?255:r<0?0:r)<<16,n&=16711935,n|=((r=Math.round(255*t))>255?255:r<0?0:r)<<8,n&=16776960,n|=(r=Math.round(255*i))>255?255:r<0?0:r},setCMYK:function(n,e,t,i,r){var l=(1-e)*(1-r);n&=65535,n|=((s=Math.round(255*l))>255?255:s<0?0:s)<<16;l=(1-t)*(1-r);n&=16711935,n|=((s=Math.round(255*l))>255?255:s<0?0:s)<<8;var s;l=(1-i)*(1-r);return n&=16776960,n|=(s=Math.round(255*l))>255?255:s<0?0:s},setHSB:function(n,e,t,i){var r=i*t,l=i-r,s=e,a=r,o=(s%=360)/60,p=a*(1-Math.abs(o%2-1))+l;switch(a+=l,0|o){case 0:n&=65535,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*l))>255?255:h<0?0:h;break;case 1:n&=65535,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*l))>255?255:h<0?0:h;break;case 2:n&=65535,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*p))>255?255:h<0?0:h;break;case 3:n&=65535,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*a))>255?255:h<0?0:h;break;case 4:n&=65535,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*a))>255?255:h<0?0:h;break;case 5:var h;n&=65535,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*p))>255?255:h<0?0:h}return n},setHSL:function(n,e,t,i){var r=(1-Math.abs(2*i-1))*t,l=i-r/2,s=e,a=r,o=(s%=360)/60,p=a*(1-Math.abs(o%2-1))+l;switch(a+=l,0|o){case 0:n&=65535,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*l))>255?255:h<0?0:h;break;case 1:n&=65535,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*l))>255?255:h<0?0:h;break;case 2:n&=65535,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*p))>255?255:h<0?0:h;break;case 3:n&=65535,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*a))>255?255:h<0?0:h;break;case 4:n&=65535,n|=((h=Math.round(255*p))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*a))>255?255:h<0?0:h;break;case 5:var h;n&=65535,n|=((h=Math.round(255*a))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*l))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*p))>255?255:h<0?0:h}return n},setHSChromaMatch:function(n,e,t,i,r){var l=(e%=360)/60,s=i*(1-Math.abs(l%2-1))+r;switch(i+=r,0|l){case 0:n&=65535,n|=((a=Math.round(255*i))>255?255:a<0?0:a)<<16,n&=16711935,n|=((a=Math.round(255*s))>255?255:a<0?0:a)<<8,n&=16776960,n|=(a=Math.round(255*r))>255?255:a<0?0:a;break;case 1:n&=65535,n|=((a=Math.round(255*s))>255?255:a<0?0:a)<<16,n&=16711935,n|=((a=Math.round(255*i))>255?255:a<0?0:a)<<8,n&=16776960,n|=(a=Math.round(255*r))>255?255:a<0?0:a;break;case 2:n&=65535,n|=((a=Math.round(255*r))>255?255:a<0?0:a)<<16,n&=16711935,n|=((a=Math.round(255*i))>255?255:a<0?0:a)<<8,n&=16776960,n|=(a=Math.round(255*s))>255?255:a<0?0:a;break;case 3:n&=65535,n|=((a=Math.round(255*r))>255?255:a<0?0:a)<<16,n&=16711935,n|=((a=Math.round(255*s))>255?255:a<0?0:a)<<8,n&=16776960,n|=(a=Math.round(255*i))>255?255:a<0?0:a;break;case 4:n&=65535,n|=((a=Math.round(255*s))>255?255:a<0?0:a)<<16,n&=16711935,n|=((a=Math.round(255*r))>255?255:a<0?0:a)<<8,n&=16776960,n|=(a=Math.round(255*i))>255?255:a<0?0:a;break;case 5:var a;n&=65535,n|=((a=Math.round(255*i))>255?255:a<0?0:a)<<16,n&=16711935,n|=((a=Math.round(255*r))>255?255:a<0?0:a)<<8,n&=16776960,n|=(a=Math.round(255*s))>255?255:a<0?0:a}return n},_new:function(n){return null==n&&(n=0),n},get_red:function(n){return n>>16&255},get_green:function(n){return n>>8&255},get_blue:function(n){return 255&n},get_redFloat:function(n){return(n>>16&255)/255},get_greenFloat:function(n){return(n>>8&255)/255},get_blueFloat:function(n){return(255&n)/255},set_red:function(n,e){return 65535,(e>255?255:e<0?0:e)<<16,e},set_green:function(n,e){return 16711935,(e>255?255:e<0?0:e)<<8,e},set_blue:function(n,e){return 16776960,e>255?255:e<0?0:e,e},set_redFloat:function(n,e){var t=Math.round(255*e);return 65535,(t>255?255:t<0?0:t)<<16,e},set_greenFloat:function(n,e){var t=Math.round(255*e);return 16711935,(t>255?255:t<0?0:t)<<8,e},set_blueFloat:function(n,e){var t=Math.round(255*e);return 16776960,t>255?255:t<0?0:t,e},get_cyan:function(n){return(1-(n>>16&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},get_magenta:function(n){return(1-(n>>8&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},get_yellow:function(n){return(1-(255&n)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},get_black:function(n){return 1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},set_cyan:function(n,e){var t=(1-(n>>8&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),i=(1-(255&n)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),r=1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),l=(1-e)*(1-r);n&=65535,n|=((s=Math.round(255*l))>255?255:s<0?0:s)<<16;l=(1-t)*(1-r);n&=16711935,n|=((s=Math.round(255*l))>255?255:s<0?0:s)<<8;var s;l=(1-i)*(1-r);return n&=16776960,n|=(s=Math.round(255*l))>255?255:s<0?0:s,e},set_magenta:function(n,e){var t=(1-(255&n)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),i=1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),r=(1-(1-(n>>16&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)))*(1-i);n&=65535,n|=((l=Math.round(255*r))>255?255:l<0?0:l)<<16;r=(1-e)*(1-i);n&=16711935,n|=((l=Math.round(255*r))>255?255:l<0?0:l)<<8;var l;r=(1-t)*(1-i);return n&=16776960,n|=(l=Math.round(255*r))>255?255:l<0?0:l,e},set_yellow:function(n,e){var t=(1-(n>>8&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),i=1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),r=(1-(1-(n>>16&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)))*(1-i);n&=65535,n|=((l=Math.round(255*r))>255?255:l<0?0:l)<<16;r=(1-t)*(1-i);n&=16711935,n|=((l=Math.round(255*r))>255?255:l<0?0:l)<<8;var l;r=(1-e)*(1-i);return n&=16776960,n|=(l=Math.round(255*r))>255?255:l<0?0:l,e},set_black:function(n,e){var t=(1-(n>>8&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),i=(1-(255&n)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),r=(1-(1-(n>>16&255)/255-(1-Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)))*(1-e);n&=65535,n|=((l=Math.round(255*r))>255?255:l<0?0:l)<<16;r=(1-t)*(1-e);n&=16711935,n|=((l=Math.round(255*r))>255?255:l<0?0:l)<<8;var l;r=(1-i)*(1-e);return n&=16776960,n|=(l=Math.round(255*r))>255?255:l<0?0:l,e},get_hue:function(n){var e=0;return 0!=Math.atan2(Math.sqrt(3)*((n>>8&255)/255-(255&n)/255),(n>>16&255)/255*2-(n>>8&255)/255-(255&n)/255)&&(e=180/Math.PI*Math.atan2(Math.sqrt(3)*((n>>8&255)/255-(255&n)/255),(n>>16&255)/255*2-(n>>8&255)/255-(255&n)/255)),e<0?e+360:e},get_brightness:function(n){return Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},get_saturation:function(n){return(Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))-Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},get_lightness:function(n){return(Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))+Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/2},set_hue:function(n,e){var t=Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),i=t*((Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))-Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))),r=t-i,l=e,s=i,a=(l%=360)/60,o=s*(1-Math.abs(a%2-1))+r;switch(s+=r,0|a){case 0:n&=65535,n|=((p=Math.round(255*s))>255?255:p<0?0:p)<<16,n&=16711935,n|=((p=Math.round(255*o))>255?255:p<0?0:p)<<8,n&=16776960,n|=(p=Math.round(255*r))>255?255:p<0?0:p;break;case 1:n&=65535,n|=((p=Math.round(255*o))>255?255:p<0?0:p)<<16,n&=16711935,n|=((p=Math.round(255*s))>255?255:p<0?0:p)<<8,n&=16776960,n|=(p=Math.round(255*r))>255?255:p<0?0:p;break;case 2:n&=65535,n|=((p=Math.round(255*r))>255?255:p<0?0:p)<<16,n&=16711935,n|=((p=Math.round(255*s))>255?255:p<0?0:p)<<8,n&=16776960,n|=(p=Math.round(255*o))>255?255:p<0?0:p;break;case 3:n&=65535,n|=((p=Math.round(255*r))>255?255:p<0?0:p)<<16,n&=16711935,n|=((p=Math.round(255*o))>255?255:p<0?0:p)<<8,n&=16776960,n|=(p=Math.round(255*s))>255?255:p<0?0:p;break;case 4:n&=65535,n|=((p=Math.round(255*o))>255?255:p<0?0:p)<<16,n&=16711935,n|=((p=Math.round(255*r))>255?255:p<0?0:p)<<8,n&=16776960,n|=(p=Math.round(255*s))>255?255:p<0?0:p;break;case 5:var p;n&=65535,n|=((p=Math.round(255*s))>255?255:p<0?0:p)<<16,n&=16711935,n|=((p=Math.round(255*r))>255?255:p<0?0:p)<<8,n&=16776960,n|=(p=Math.round(255*o))>255?255:p<0?0:p}return e},set_saturation:function(n,e){var t=p.get_hue(n),i=Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255)),r=i*e,l=i-r,s=t,a=r,o=(s%=360)/60,h=a*(1-Math.abs(o%2-1))+l;switch(a+=l,0|o){case 0:n&=65535,n|=((u=Math.round(255*a))>255?255:u<0?0:u)<<16,n&=16711935,n|=((u=Math.round(255*h))>255?255:u<0?0:u)<<8,n&=16776960,n|=(u=Math.round(255*l))>255?255:u<0?0:u;break;case 1:n&=65535,n|=((u=Math.round(255*h))>255?255:u<0?0:u)<<16,n&=16711935,n|=((u=Math.round(255*a))>255?255:u<0?0:u)<<8,n&=16776960,n|=(u=Math.round(255*l))>255?255:u<0?0:u;break;case 2:n&=65535,n|=((u=Math.round(255*l))>255?255:u<0?0:u)<<16,n&=16711935,n|=((u=Math.round(255*a))>255?255:u<0?0:u)<<8,n&=16776960,n|=(u=Math.round(255*h))>255?255:u<0?0:u;break;case 3:n&=65535,n|=((u=Math.round(255*l))>255?255:u<0?0:u)<<16,n&=16711935,n|=((u=Math.round(255*h))>255?255:u<0?0:u)<<8,n&=16776960,n|=(u=Math.round(255*a))>255?255:u<0?0:u;break;case 4:n&=65535,n|=((u=Math.round(255*h))>255?255:u<0?0:u)<<16,n&=16711935,n|=((u=Math.round(255*l))>255?255:u<0?0:u)<<8,n&=16776960,n|=(u=Math.round(255*a))>255?255:u<0?0:u;break;case 5:var u;n&=65535,n|=((u=Math.round(255*a))>255?255:u<0?0:u)<<16,n&=16711935,n|=((u=Math.round(255*l))>255?255:u<0?0:u)<<8,n&=16776960,n|=(u=Math.round(255*h))>255?255:u<0?0:u}return e},set_brightness:function(n,e){var t=p.get_hue(n),i=e*((Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))-Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))),r=e-i,l=t,s=i,a=(l%=360)/60,o=s*(1-Math.abs(a%2-1))+r;switch(s+=r,0|a){case 0:n&=65535,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*r))>255?255:h<0?0:h;break;case 1:n&=65535,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*r))>255?255:h<0?0:h;break;case 2:n&=65535,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*o))>255?255:h<0?0:h;break;case 3:n&=65535,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*s))>255?255:h<0?0:h;break;case 4:n&=65535,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*s))>255?255:h<0?0:h;break;case 5:var h;n&=65535,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*o))>255?255:h<0?0:h}return e},set_lightness:function(n,e){var t=p.get_hue(n),i=(1-Math.abs(2*e-1))*((Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))-Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255)))/Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))),r=e-i/2,l=t,s=i,a=(l%=360)/60,o=s*(1-Math.abs(a%2-1))+r;switch(s+=r,0|a){case 0:n&=65535,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*r))>255?255:h<0?0:h;break;case 1:n&=65535,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*r))>255?255:h<0?0:h;break;case 2:n&=65535,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*o))>255?255:h<0?0:h;break;case 3:n&=65535,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*s))>255?255:h<0?0:h;break;case 4:n&=65535,n|=((h=Math.round(255*o))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*s))>255?255:h<0?0:h;break;case 5:var h;n&=65535,n|=((h=Math.round(255*s))>255?255:h<0?0:h)<<16,n&=16711935,n|=((h=Math.round(255*r))>255?255:h<0?0:h)<<8,n&=16776960,n|=(h=Math.round(255*o))>255?255:h<0?0:h}return e},maxColor:function(n){return Math.max((n>>16&255)/255,Math.max((n>>8&255)/255,(255&n)/255))},minColor:function(n){return Math.min((n>>16&255)/255,Math.min((n>>8&255)/255,(255&n)/255))},boundChannel:function(n,e){return e>255?255:e<0?0:e},roundDecimal:function(n,e){for(var t=1,i=0,r=e;i<r;){i++;t*=10}return Math.round(n*t)/t},bound:function(n,e,t){var i=null!=e&&n<e?e:n;return null!=t&&i>t?t:i},toString:function(n){return-1==n?"NONE":"0x"+StringTools.hex(n>>16&255,2)+StringTools.hex(n>>8&255,2)+StringTools.hex(255&n,2)},fromHSLuv:function(n,e,t){var i=p._new();if(p._hsluvTuple[0]=n,p._hsluvTuple[1]=100*e,p._hsluvTuple[2]=100*t,t>.001){hsluv_Hsluv.hsluvToRgb(p._hsluvTuple,p._hsluvResult);var r=p._hsluvResult[0];r<0&&(r=0),i&=65535,i|=((_=Math.round(255*r))>255?255:_<0?0:_)<<16,(r=p._hsluvResult[1])<0&&(r=0),i&=16711935,i|=((_=Math.round(255*r))>255?255:_<0?0:_)<<8,(r=p._hsluvResult[2])<0&&(r=0),i&=16776960,i|=(_=Math.round(255*r))>255?255:_<0?0:_}else{var l=(1-Math.abs(2*t-1))*e,s=t-l/2,a=n,o=l,h=(a%=360)/60,u=o*(1-Math.abs(h%2-1))+s;switch(o+=s,0|h){case 0:i&=65535,i|=((_=Math.round(255*o))>255?255:_<0?0:_)<<16,i&=16711935,i|=((_=Math.round(255*u))>255?255:_<0?0:_)<<8,i&=16776960,i|=(_=Math.round(255*s))>255?255:_<0?0:_;break;case 1:i&=65535,i|=((_=Math.round(255*u))>255?255:_<0?0:_)<<16,i&=16711935,i|=((_=Math.round(255*o))>255?255:_<0?0:_)<<8,i&=16776960,i|=(_=Math.round(255*s))>255?255:_<0?0:_;break;case 2:i&=65535,i|=((_=Math.round(255*s))>255?255:_<0?0:_)<<16,i&=16711935,i|=((_=Math.round(255*o))>255?255:_<0?0:_)<<8,i&=16776960,i|=(_=Math.round(255*u))>255?255:_<0?0:_;break;case 3:i&=65535,i|=((_=Math.round(255*s))>255?255:_<0?0:_)<<16,i&=16711935,i|=((_=Math.round(255*u))>255?255:_<0?0:_)<<8,i&=16776960,i|=(_=Math.round(255*o))>255?255:_<0?0:_;break;case 4:i&=65535,i|=((_=Math.round(255*u))>255?255:_<0?0:_)<<16,i&=16711935,i|=((_=Math.round(255*s))>255?255:_<0?0:_)<<8,i&=16776960,i|=(_=Math.round(255*o))>255?255:_<0?0:_;break;case 5:var _;i&=65535,i|=((_=Math.round(255*o))>255?255:_<0?0:_)<<16,i&=16711935,i|=((_=Math.round(255*s))>255?255:_<0?0:_)<<8,i&=16776960,i|=(_=Math.round(255*u))>255?255:_<0?0:_}}return i},setHSLuv:function(n,e,t,i){if(p._hsluvTuple[0]=e,p._hsluvTuple[1]=100*t,p._hsluvTuple[2]=100*i,i>.001){hsluv_Hsluv.hsluvToRgb(p._hsluvTuple,p._hsluvResult);var r=p._hsluvResult[0];r<0&&(r=0),n&=65535,n|=((_=Math.round(255*r))>255?255:_<0?0:_)<<16,(r=p._hsluvResult[1])<0&&(r=0),n&=16711935,n|=((_=Math.round(255*r))>255?255:_<0?0:_)<<8,(r=p._hsluvResult[2])<0&&(r=0),n&=16776960,n|=(_=Math.round(255*r))>255?255:_<0?0:_}else{var l=(1-Math.abs(2*i-1))*t,s=i-l/2,a=e,o=l,h=(a%=360)/60,u=o*(1-Math.abs(h%2-1))+s;switch(o+=s,0|h){case 0:n&=65535,n|=((_=Math.round(255*o))>255?255:_<0?0:_)<<16,n&=16711935,n|=((_=Math.round(255*u))>255?255:_<0?0:_)<<8,n&=16776960,n|=(_=Math.round(255*s))>255?255:_<0?0:_;break;case 1:n&=65535,n|=((_=Math.round(255*u))>255?255:_<0?0:_)<<16,n&=16711935,n|=((_=Math.round(255*o))>255?255:_<0?0:_)<<8,n&=16776960,n|=(_=Math.round(255*s))>255?255:_<0?0:_;break;case 2:n&=65535,n|=((_=Math.round(255*s))>255?255:_<0?0:_)<<16,n&=16711935,n|=((_=Math.round(255*o))>255?255:_<0?0:_)<<8,n&=16776960,n|=(_=Math.round(255*u))>255?255:_<0?0:_;break;case 3:n&=65535,n|=((_=Math.round(255*s))>255?255:_<0?0:_)<<16,n&=16711935,n|=((_=Math.round(255*u))>255?255:_<0?0:_)<<8,n&=16776960,n|=(_=Math.round(255*o))>255?255:_<0?0:_;break;case 4:n&=65535,n|=((_=Math.round(255*u))>255?255:_<0?0:_)<<16,n&=16711935,n|=((_=Math.round(255*s))>255?255:_<0?0:_)<<8,n&=16776960,n|=(_=Math.round(255*o))>255?255:_<0?0:_;break;case 5:var _;n&=65535,n|=((_=Math.round(255*o))>255?255:_<0?0:_)<<16,n&=16711935,n|=((_=Math.round(255*s))>255?255:_<0?0:_)<<8,n&=16776960,n|=(_=Math.round(255*u))>255?255:_<0?0:_}}return n},getHSLuv:function(n,e){return null==e&&(e=[0,0,0]),p._hsluvTuple[0]=(n>>16&255)/255,p._hsluvTuple[1]=(n>>8&255)/255,p._hsluvTuple[2]=(255&n)/255,hsluv_Hsluv.rgbToHsluv(p._hsluvTuple,e),e[1]*=.01,e[2]*=.01,e}},ceramic_Component=function(){};t["ceramic.Component"]=ceramic_Component,ceramic_Component.__name__="ceramic.Component",ceramic_Component.__isInterface__=!0,ceramic_Component.prototype={__class__:ceramic_Component};var ceramic_ComputeFps=function(n){null==n&&(n=10),this.fps=0,this.index=0,this.size=n,this.frames=[];for(var e=0,t=n;e<t;){e++;this.frames.push(0)}};t["ceramic.ComputeFps"]=ceramic_ComputeFps,ceramic_ComputeFps.__name__="ceramic.ComputeFps",ceramic_ComputeFps.prototype={addFrame:function(n){this.frames[this.index]=n,this.index=(this.index+1)%this.size;for(var e=0,t=0,i=this.size;t<i;){var r=t++;e+=this.frames[r]}e=e>0?this.size/e:0,this.fps=Math.round(Math.min(999,e))},__class__:ceramic_ComputeFps};var ceramic_ConvertField=function(){};t["ceramic.ConvertField"]=ceramic_ConvertField,ceramic_ConvertField.__name__="ceramic.ConvertField",ceramic_ConvertField.__isInterface__=!0,ceramic_ConvertField.prototype={__class__:ceramic_ConvertField};var ceramic_ConvertArray=function(){};t["ceramic.ConvertArray"]=ceramic_ConvertArray,ceramic_ConvertArray.__name__="ceramic.ConvertArray",ceramic_ConvertArray.__interfaces__=[ceramic_ConvertField],ceramic_ConvertArray.prototype={basicToField:function(n,e,t,i,r){if(null!=i){var l=[];r(l=l.concat(i))}else r(null)},fieldToBasic:function(n,e,t){if(null==t)return null;var i=[];return i=i.concat(t)},__class__:ceramic_ConvertArray};var ceramic_ConvertComponentMap=function(){};t["ceramic.ConvertComponentMap"]=ceramic_ConvertComponentMap,ceramic_ConvertComponentMap.__name__="ceramic.ConvertComponentMap",ceramic_ConvertComponentMap.__interfaces__=[ceramic_ConvertField],ceramic_ConvertComponentMap.prototype={basicToField:function(n,e,t,i,r){if(null!=i){for(var l=new haxe_ds_StringMap,s=0,a=Reflect.fields(i);s<a.length;){var o=a[s];++s;i[o];ceramic_App.app.logger.error("Not using component initializers anymore. Need to implement event based solution!",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ConvertComponentMap.hx",lineNumber:38,className:"ceramic.ConvertComponentMap",methodName:"basicToField"})}r(l)}else r(null)},fieldToBasic:function(n,e,t){if(null==t)return null;for(var i={},r=t.h,l=Object.keys(r),s=l.length,a=0;a<s;){var o=l[a++],p=t.h[o];null!=p&&null!=p.initializerName&&(i[o]=p.initializerName)}return i},__class__:ceramic_ConvertComponentMap};var ceramic_ConvertFont=function(){};t["ceramic.ConvertFont"]=ceramic_ConvertFont,ceramic_ConvertFont.__name__="ceramic.ConvertFont",ceramic_ConvertFont.__interfaces__=[ceramic_ConvertField],ceramic_ConvertFont.prototype={basicToField:function(n,e,t,i,r){null!=i?i==ceramic_App.app.defaultFont.asset.name?r(ceramic_App.app.defaultFont):t.ensureFont(i,null,(function(n){r(null!=n?n.get_font():null)})):r(null)},fieldToBasic:function(n,e,t){return null==t||null==t.asset?null:t.asset.name},__class__:ceramic_ConvertFont};var ceramic_ConvertFragmentData=function(){};t["ceramic.ConvertFragmentData"]=ceramic_ConvertFragmentData,ceramic_ConvertFragmentData.__name__="ceramic.ConvertFragmentData",ceramic_ConvertFragmentData.__interfaces__=[ceramic_ConvertField],ceramic_ConvertFragmentData.prototype={basicToField:function(n,e,t,i,r){r(i)},fieldToBasic:function(n,e,t){return t},__class__:ceramic_ConvertFragmentData};var ceramic_ConvertIntBoolMap=function(){};t["ceramic.ConvertIntBoolMap"]=ceramic_ConvertIntBoolMap,ceramic_ConvertIntBoolMap.__name__="ceramic.ConvertIntBoolMap",ceramic_ConvertIntBoolMap.__interfaces__=[ceramic_ConvertField],ceramic_ConvertIntBoolMap.prototype={basicToField:function(n,e,t,i,r){if(null!=i){for(var l=new haxe_ds_IntMap,s=0,a=Reflect.fields(i);s<a.length;){var o=a[s];++s;var p=Reflect.field(i,o);l.h[0|Std.parseInt(o)]=p}r(l)}else r(null)},fieldToBasic:function(n,e,t){if(null==t)return null;return ceramic_App.app.logger.warning("ConvertIntBoolMap.fieldToBasic() not implemented!",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ConvertIntBoolMap.hx",lineNumber:47,className:"ceramic.ConvertIntBoolMap",methodName:"fieldToBasic"}),{}},__class__:ceramic_ConvertIntBoolMap};var ceramic_ConvertMap=function(){};t["ceramic.ConvertMap"]=ceramic_ConvertMap,ceramic_ConvertMap.__name__="ceramic.ConvertMap",ceramic_ConvertMap.__interfaces__=[ceramic_ConvertField],ceramic_ConvertMap.prototype={basicToField:function(n,e,t,i,r){if(null!=i){for(var l=new haxe_ds_StringMap,s=0,a=Reflect.fields(i);s<a.length;){var o=a[s];++s,l.h[o]=i[o]}r(l)}else r(null)},fieldToBasic:function(n,e,t){if(null==t)return null;for(var i={},r=t.h,l=Object.keys(r),s=l.length,a=0;a<s;){var o=l[a++];i[o]=t.h[o]}return i},__class__:ceramic_ConvertMap};var ceramic_ConvertTexture=function(){};t["ceramic.ConvertTexture"]=ceramic_ConvertTexture,ceramic_ConvertTexture.__name__="ceramic.ConvertTexture",ceramic_ConvertTexture.__interfaces__=[ceramic_ConvertField],ceramic_ConvertTexture.prototype={basicToField:function(n,e,t,i,r){null!=i?t.ensureImage(i,null,(function(n){r(null!=n?n.get_texture():null)})):r(null)},fieldToBasic:function(n,e,t){return null==t||null==t.asset?null:t.asset.name},__class__:ceramic_ConvertTexture};var ceramic_Csv=function(){};t["ceramic.Csv"]=ceramic_Csv,ceramic_Csv.__name__="ceramic.Csv",ceramic_Csv.parse=function(n){for(var e="",t=0,i="",r=(n=StringTools.trim(n)).length,l=!1,s="",a=[];t<r;)if(i=n.charAt(t),l)'"'==i?'""'==i+n.charAt(t+1)?(s+='"',t+=2):(l=!1,++t):(s+=i,++t);else{if("\n"==i){++t;break}""==s&&'"'==i?(l=!0,++t):""==e?(","==i||";"==i?(e=i,a.push(StringTools.replace(s,"\r","")),s=""):s+=i,++t):i==e?(a.push(StringTools.replace(s,"\r","")),s="",++t):(s+=i,++t)}""!=s&&a.push(StringTools.replace(s,"\r","")),l=!1,s="";for(var o={},p=!1,h=[],u=0,_="",c=-1;t<r;)i=n.charAt(t),l?'"'==i?'""'==i+n.charAt(t+1)?(s+='"',t+=2):(l=!1,++t):(s+=i,++t):"\n"==i?(null!=(_=a[u++])?(o[_]=StringTools.replace(s,"\r",""),p=!0):-1==c&&(c=h.length),s="",h.push(o),p=!1,u=0,o={},++t):""==s&&'"'==i?(l=!0,++t):i==e?(null!=(_=a[u++])?(o[_]=StringTools.replace(s,"\r",""),p=!0):-1==c&&(c=h.length),s="",++t):(s+=i,++t);return null!=(_=a[u++])?(o[_]=StringTools.replace(s,"\r",""),p=!0):-1==c&&(ceramic_Csv.warning(o),c=h.length),s="",p&&h.push(o),c>=0&&ceramic_Csv.warning("Malformed CSV: too many columns at row #"+c),h},ceramic_Csv.stringify=function(n,e){if(null==e){e=[];for(var t=Object.create(null),i=0;i<n.length;){var r=n[i];++i;for(var l=0,s=Reflect.fields(r);l<s.length;){var a=s[l];++l,Object.prototype.hasOwnProperty.call(t,a)||(e.push(a),t[a]=!0)}}}var o="",p=0;for(i=0;i<e.length;){a=e[i];if(++i,p++>0&&(o+=","),0!=a.length){o+='"';for(l=0,s=a.length;l<s;){var h=l++;o+='"'==(d=a.charAt(h))?'""':Std.string(d)}o+='"'}}for(i=0;i<n.length;){r=n[i];++i,o+="\n",p=0;for(l=0;l<e.length;){a=e[l];++l,p++>0&&(o+=",");var u=Reflect.field(r,a),_=null!=u?Std.string(u):"";if(0!=_.length){o+='"';s=0;for(var c=_.length;s<c;){var d;h=s++;o+='"'==(d=_.charAt(h))?'""':Std.string(d)}o+='"'}}}return o},ceramic_Csv.warning=function(n){ceramic_App.app.logger.warning(n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Csv.hx",lineNumber:238,className:"ceramic.Csv",methodName:"warning"})};var ceramic_CustomAssetKind=function(n,e,t,i,r){this.kind=n,this.add=e,this.extensions=t,this.dir=i,this.types=r};t["ceramic.CustomAssetKind"]=ceramic_CustomAssetKind,ceramic_CustomAssetKind.__name__="ceramic.CustomAssetKind",ceramic_CustomAssetKind.prototype={__class__:ceramic_CustomAssetKind};var ceramic_DatabaseAsset=function(n,e){this.unobservedDatabase=null,this.databaseAutoruns=null,ceramic_Asset.call(this,"database",n,e)};t["ceramic.DatabaseAsset"]=ceramic_DatabaseAsset,ceramic_DatabaseAsset.__name__="ceramic.DatabaseAsset",ceramic_DatabaseAsset.__super__=ceramic_Asset,ceramic_DatabaseAsset.prototype=$extend(ceramic_Asset.prototype,{get_database:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.databaseAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.databaseAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedDatabase},set_database:function(n){var e=this.unobservedDatabase;if(this.unobservedDatabase=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitDatabaseChange(n,e);var t=this.databaseAutoruns;if(null!=t){this.databaseAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateDatabase:function(){var n=this.unobservedDatabase;this.emitDatabaseChange(n,n);var e=this.databaseAutoruns;if(null!=e){this.databaseAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitDatabaseChange:function(n,e){var t=0;if(null!=this.__cbOnDatabaseChange&&(t+=this.__cbOnDatabaseChange.length),null!=this.__cbOnceDatabaseChange&&(t+=this.__cbOnceDatabaseChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnDatabaseChange)for(var s=0,a=this.__cbOnDatabaseChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnDatabaseChange[o],++l):--t}if(null!=this.__cbOnceDatabaseChange){var p=null,h=null;for(s=0,a=this.__cbOnceDatabaseChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceDatabaseChange[o],this.__cbOnceDatabaseChange[o]=null;var u=this.__cbOnceOwnerUnbindDatabaseChange[o];this.__cbOnceOwnerUnbindDatabaseChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindDatabaseChange[o]),h.push(this.__cbOnceDatabaseChange[o])}this.__cbOnceOwnerUnbindDatabaseChange=p,this.__cbOnceDatabaseChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onDatabaseChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event databaseChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDatabaseChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindDatabaseChange&&(this.__cbOnOwnerUnbindDatabaseChange=[]),this.__cbOnOwnerUnbindDatabaseChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindDatabaseChange&&(this.__cbOnOwnerUnbindDatabaseChange=[]),this.__cbOnOwnerUnbindDatabaseChange.push(null);null==this.__cbOnDatabaseChange&&(this.__cbOnDatabaseChange=[]),this.__cbOnDatabaseChange.push(e)},onceDatabaseChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event databaseChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDatabaseChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindDatabaseChange&&(this.__cbOnceOwnerUnbindDatabaseChange=[]),this.__cbOnceOwnerUnbindDatabaseChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindDatabaseChange&&(this.__cbOnceOwnerUnbindDatabaseChange=[]),this.__cbOnceOwnerUnbindDatabaseChange.push(null);null==this.__cbOnceDatabaseChange&&(this.__cbOnceDatabaseChange=[]),this.__cbOnceDatabaseChange.push(e)},offDatabaseChange:function(n){if(null!=n){var e;null!=this.__cbOnDatabaseChange&&-1!=(e=this.__cbOnDatabaseChange.indexOf(n))&&(this.__cbOnDatabaseChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindDatabaseChange[e])&&l(),this.__cbOnOwnerUnbindDatabaseChange.splice(e,1)),null!=this.__cbOnceDatabaseChange&&-1!=(e=this.__cbOnceDatabaseChange.indexOf(n))&&(this.__cbOnceDatabaseChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindDatabaseChange[e])&&l(),this.__cbOnceOwnerUnbindDatabaseChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindDatabaseChange){for(var t=0,i=this.__cbOnOwnerUnbindDatabaseChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindDatabaseChange[r])&&l()}this.__cbOnOwnerUnbindDatabaseChange=null}if(null!=this.__cbOnceOwnerUnbindDatabaseChange){for(t=0,i=this.__cbOnceOwnerUnbindDatabaseChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindDatabaseChange[r])&&l()}this.__cbOnceOwnerUnbindDatabaseChange=null}this.__cbOnDatabaseChange=null,this.__cbOnceDatabaseChange=null}},listensDatabaseChange:function(){return null!=this.__cbOnDatabaseChange&&this.__cbOnDatabaseChange.length>0||null!=this.__cbOnceDatabaseChange&&this.__cbOnceDatabaseChange.length>0},load:function(){var n=this;if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load database asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:21,className:"ceramic.DatabaseAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var e={};null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod);var t=this.path,i=ceramic_Assets.realAssetPath(t,this.runtimeAssets),r=ceramic_Assets.getReloadCount(i);r>0&&(i+="?hot="+r,t+="?hot="+r),ceramic_App.app.logger.info("Load database "+t,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:42,className:"ceramic.DatabaseAsset",methodName:"load"}),ceramic_App.app.backend.texts.load(i,e,(function(e){if(null!=e){try{n.set_database(ceramic_Csv.parse(e))}catch(e){return n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to parse database at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:50,className:"ceramic.DatabaseAsset",methodName:"load"}),void n.emitComplete(!1)}n.set_status(a.READY),n.emitComplete(!0)}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load database at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:59,className:"ceramic.DatabaseAsset",methodName:"load"}),n.emitComplete(!1)}))},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload database (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/DatabaseAsset.hx",lineNumber:82,className:"ceramic.DatabaseAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),this.set_database(null))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offDatabaseChange()},__class__:ceramic_DatabaseAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_database:"set_database",get_database:"get_database"})});var h=i["ceramic.Easing"]={__ename__:"ceramic.Easing",__constructs__:null,NONE:{_hx_name:"NONE",_hx_index:0,__enum__:"ceramic.Easing",toString:$estr},LINEAR:{_hx_name:"LINEAR",_hx_index:1,__enum__:"ceramic.Easing",toString:$estr},BACK_EASE_IN:{_hx_name:"BACK_EASE_IN",_hx_index:2,__enum__:"ceramic.Easing",toString:$estr},BACK_EASE_IN_OUT:{_hx_name:"BACK_EASE_IN_OUT",_hx_index:3,__enum__:"ceramic.Easing",toString:$estr},BACK_EASE_OUT:{_hx_name:"BACK_EASE_OUT",_hx_index:4,__enum__:"ceramic.Easing",toString:$estr},QUAD_EASE_IN:{_hx_name:"QUAD_EASE_IN",_hx_index:5,__enum__:"ceramic.Easing",toString:$estr},QUAD_EASE_IN_OUT:{_hx_name:"QUAD_EASE_IN_OUT",_hx_index:6,__enum__:"ceramic.Easing",toString:$estr},QUAD_EASE_OUT:{_hx_name:"QUAD_EASE_OUT",_hx_index:7,__enum__:"ceramic.Easing",toString:$estr},CUBIC_EASE_IN:{_hx_name:"CUBIC_EASE_IN",_hx_index:8,__enum__:"ceramic.Easing",toString:$estr},CUBIC_EASE_IN_OUT:{_hx_name:"CUBIC_EASE_IN_OUT",_hx_index:9,__enum__:"ceramic.Easing",toString:$estr},CUBIC_EASE_OUT:{_hx_name:"CUBIC_EASE_OUT",_hx_index:10,__enum__:"ceramic.Easing",toString:$estr},QUART_EASE_IN:{_hx_name:"QUART_EASE_IN",_hx_index:11,__enum__:"ceramic.Easing",toString:$estr},QUART_EASE_IN_OUT:{_hx_name:"QUART_EASE_IN_OUT",_hx_index:12,__enum__:"ceramic.Easing",toString:$estr},QUART_EASE_OUT:{_hx_name:"QUART_EASE_OUT",_hx_index:13,__enum__:"ceramic.Easing",toString:$estr},QUINT_EASE_IN:{_hx_name:"QUINT_EASE_IN",_hx_index:14,__enum__:"ceramic.Easing",toString:$estr},QUINT_EASE_IN_OUT:{_hx_name:"QUINT_EASE_IN_OUT",_hx_index:15,__enum__:"ceramic.Easing",toString:$estr},QUINT_EASE_OUT:{_hx_name:"QUINT_EASE_OUT",_hx_index:16,__enum__:"ceramic.Easing",toString:$estr},BOUNCE_EASE_IN:{_hx_name:"BOUNCE_EASE_IN",_hx_index:17,__enum__:"ceramic.Easing",toString:$estr},BOUNCE_EASE_IN_OUT:{_hx_name:"BOUNCE_EASE_IN_OUT",_hx_index:18,__enum__:"ceramic.Easing",toString:$estr},BOUNCE_EASE_OUT:{_hx_name:"BOUNCE_EASE_OUT",_hx_index:19,__enum__:"ceramic.Easing",toString:$estr},ELASTIC_EASE_IN:{_hx_name:"ELASTIC_EASE_IN",_hx_index:20,__enum__:"ceramic.Easing",toString:$estr},ELASTIC_EASE_IN_OUT:{_hx_name:"ELASTIC_EASE_IN_OUT",_hx_index:21,__enum__:"ceramic.Easing",toString:$estr},ELASTIC_EASE_OUT:{_hx_name:"ELASTIC_EASE_OUT",_hx_index:22,__enum__:"ceramic.Easing",toString:$estr},EXPO_EASE_IN:{_hx_name:"EXPO_EASE_IN",_hx_index:23,__enum__:"ceramic.Easing",toString:$estr},EXPO_EASE_IN_OUT:{_hx_name:"EXPO_EASE_IN_OUT",_hx_index:24,__enum__:"ceramic.Easing",toString:$estr},EXPO_EASE_OUT:{_hx_name:"EXPO_EASE_OUT",_hx_index:25,__enum__:"ceramic.Easing",toString:$estr},SINE_EASE_IN:{_hx_name:"SINE_EASE_IN",_hx_index:26,__enum__:"ceramic.Easing",toString:$estr},SINE_EASE_IN_OUT:{_hx_name:"SINE_EASE_IN_OUT",_hx_index:27,__enum__:"ceramic.Easing",toString:$estr},SINE_EASE_OUT:{_hx_name:"SINE_EASE_OUT",_hx_index:28,__enum__:"ceramic.Easing",toString:$estr},BEZIER:(e=function(n,e,t,i){return{_hx_index:29,x1:n,y1:e,x2:t,y2:i,__enum__:"ceramic.Easing",toString:$estr}},e._hx_name="BEZIER",e.__params__=["x1","y1","x2","y2"],e),CUSTOM:(e=function(n){return{_hx_index:30,easing:n,__enum__:"ceramic.Easing",toString:$estr}},e._hx_name="CUSTOM",e.__params__=["easing"],e)};h.__constructs__=[h.NONE,h.LINEAR,h.BACK_EASE_IN,h.BACK_EASE_IN_OUT,h.BACK_EASE_OUT,h.QUAD_EASE_IN,h.QUAD_EASE_IN_OUT,h.QUAD_EASE_OUT,h.CUBIC_EASE_IN,h.CUBIC_EASE_IN_OUT,h.CUBIC_EASE_OUT,h.QUART_EASE_IN,h.QUART_EASE_IN_OUT,h.QUART_EASE_OUT,h.QUINT_EASE_IN,h.QUINT_EASE_IN_OUT,h.QUINT_EASE_OUT,h.BOUNCE_EASE_IN,h.BOUNCE_EASE_IN_OUT,h.BOUNCE_EASE_OUT,h.ELASTIC_EASE_IN,h.ELASTIC_EASE_IN_OUT,h.ELASTIC_EASE_OUT,h.EXPO_EASE_IN,h.EXPO_EASE_IN_OUT,h.EXPO_EASE_OUT,h.SINE_EASE_IN,h.SINE_EASE_IN_OUT,h.SINE_EASE_OUT,h.BEZIER,h.CUSTOM];var ceramic_EasingUtils=function(){};t["ceramic.EasingUtils"]=ceramic_EasingUtils,ceramic_EasingUtils.__name__="ceramic.EasingUtils",ceramic_EasingUtils.easingFromString=function(n){return Type.createEnum(h,n,ceramic_EasingUtils._emptyArray)},ceramic_EasingUtils.easingToString=function(n){return i[n.__enum__].__constructs__[n._hx_index]._hx_name};var ceramic_Extensions=function(){};t["ceramic.Extensions"]=ceramic_Extensions,ceramic_Extensions.__name__="ceramic.Extensions",ceramic_Extensions.unsafeGet=function(n,e){return n[e]},ceramic_Extensions.unsafeSet=function(n,e,t){n[e]=t},ceramic_Extensions.setArrayLength=function(n,e){n.length!=e&&(n.length>e?n.splice(e,n.length-e):n[e-1]=null)},ceramic_Extensions.randomElement=function(n){return n[Math.floor(.99999*Math.random()*n.length)]},ceramic_Extensions.randomElementExcept=function(n,e,t){if(null==t&&(t=!1),t){for(var i=null;(i=n[Math.floor(.99999*Math.random()*n.length)])==e;);return i}for(var r=[],l=0;l<n.length;){var s=n[l];++l,r.push(s)}ceramic_Extensions.shuffle(r);for(l=0;l<r.length;){s=r[l];if(++l,s!=e)return s}return null},ceramic_Extensions.randomElementMatchingValidator=function(n,e){for(var t=[],i=0;i<n.length;){var r=n[i];++i,t.push(r)}ceramic_Extensions.shuffle(t);for(i=0;i<t.length;){r=t[i];if(++i,e(r))return r}return null},ceramic_Extensions.shuffle=function(n){if(null!=n)for(var e=0,t=n.length;e<t;){var i=e++,r=Math.floor((n.length-1+1)*Math.random()),l=n[i],s=n[r];n[i]=s,n[r]=l}},ceramic_Extensions.swapElements=function(n,e,t){var i=n[e];n[e]=n[t],n[t]=i},ceramic_Extensions.removeNullElements=function(n){for(var e=0,t=0,i=n.length;e<i;){for(;;){if(null!=n[e])break;if(++t,!(++e<i))break}if(0!=t&&e<i)n[e-t]=n[e];++e}var r=i-t;n.length!=r&&(n.length>r?n.splice(r,n.length-r):n[r-1]=null)},ceramic_Extensions.setProperty=function(n,e,t){Reflect.setProperty(n,e,t)},ceramic_Extensions.getProperty=function(n,e){return Reflect.getProperty(n,e)};var ceramic_FieldInfo=function(){};t["ceramic.FieldInfo"]=ceramic_FieldInfo,ceramic_FieldInfo.__name__="ceramic.FieldInfo",ceramic_FieldInfo.types=function(n,e){null==e&&(e=!0);var i=ceramic_FieldInfo.fieldInfoMap.h[n];if(null==i){i=new haxe_ds_StringMap,ceramic_FieldInfo.fieldInfoMap.h[n]=i;for(var r=t[n];null!=r;){var l=Reflect.field(r,"_fieldInfo");if(!1,null!=l)for(var s=l,a=Reflect.fields(l),o=0;o<a.length;){var p=a[o++],h=p,u=s[p];Object.prototype.hasOwnProperty.call(i.h,h)||(i.h[h]=u.type)}if(!e)break;r=r.__super__}}return i},ceramic_FieldInfo.typeOf=function(n,e){return ceramic_FieldInfo.types(n).h[e]};var ceramic_FieldMeta=function(){};t["ceramic.FieldMeta"]=ceramic_FieldMeta,ceramic_FieldMeta.__name__="ceramic.FieldMeta",ceramic_FieldMeta._hasMeta=function(n,e,t,i,r){var l=ceramic_FieldMeta._getMeta(n,e,t,r);return null!=l&&Object.prototype.hasOwnProperty.call(l.h,i)},ceramic_FieldMeta._getMeta=function(n,e,t,i){var r=null,l=i?ceramic_FieldMeta.metaMapRecursive:ceramic_FieldMeta.metaMap;if(Object.prototype.hasOwnProperty.call(l.h,e))r=l.h[e];else{for(r=new haxe_ds_StringMap;null!=n;){var s=haxe_rtti_Meta.getFields(n);if(null!=s)for(var a=0,o=Reflect.fields(s);a<o.length;){var p=o[a];++a;var h=r.h[p];null==h&&(h=new haxe_ds_StringMap,r.h[p]=h);var u=Reflect.field(s,p);if(null!=u)for(var _=0,c=Reflect.fields(u);_<c.length;){var d=c[_];++_,Object.prototype.hasOwnProperty.call(h.h,d)||(h.h[d]=Reflect.field(u,d))}}if(!i)break;n=n.__super__}l.h[e]=r}return Object.prototype.hasOwnProperty.call(r.h,t)?r.h[t]:null};var ceramic_Files=function(){};t["ceramic.Files"]=ceramic_Files,ceramic_Files.__name__="ceramic.Files",ceramic_Files.haveSameContent=function(n,e){return ceramic_App.app.logger.warning("haveSameContent() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:41,className:"ceramic.Files",methodName:"haveSameContent"}),!1},ceramic_Files.haveSameLastModified=function(n,e){return ceramic_App.app.logger.warning("haveSameLastModified() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:78,className:"ceramic.Files",methodName:"haveSameLastModified"}),!1},ceramic_Files.setToSameLastModified=function(n,e){ceramic_App.app.logger.warning("setToSameLastModified() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:103,className:"ceramic.Files",methodName:"setToSameLastModified"})},ceramic_Files.getFlatDirectory=function(n,e,t,i){return null==i&&(i=!0),null==t&&(t=!1),null==e&&(e=!0),[]},ceramic_Files.getLastModified=function(n){return-1},ceramic_Files.removeEmptyDirectories=function(n,e){null==e&&(e=!0),ceramic_App.app.logger.warning("removeEmptyDirectories() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:234,className:"ceramic.Files",methodName:"removeEmptyDirectories"})},ceramic_Files.isEmptyDirectory=function(n,e){return null==e&&(e=!0),ceramic_App.app.logger.warning("isEmptyDirectory() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:255,className:"ceramic.Files",methodName:"isEmptyDirectory"}),!1},ceramic_Files.deleteRecursive=function(n){ceramic_App.app.logger.warning("deleteRecursive() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:299,className:"ceramic.Files",methodName:"deleteRecursive"})},ceramic_Files.getRelativePath=function(n,e){for(var t=HxOverrides.substr(ceramic_Path.normalize(e),1,null).split("/"),i=HxOverrides.substr(ceramic_Path.normalize(n),1,null).split("/"),r=Math.min(t.length,i.length),l=r,s=0,a=r;s<a;){if(t[p=s++]!=i[p]){l=p;break}}var o=[];for(s=l,a=t.length;s<a;){var p=s++;o.push("..")}var h=(o=o.concat(i.slice(l))).join("/");return StringTools.endsWith(n,"/")&&!StringTools.endsWith(h,"/")&&(h+="/"),StringTools.startsWith(h,".")||(h="./"+h),h},ceramic_Files.copyFileWithIntermediateDirs=function(n,e){ceramic_App.app.logger.warning("copyFileWithIntermediateDirs() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:355,className:"ceramic.Files",methodName:"copyFileWithIntermediateDirs"})},ceramic_Files.copyDirectory=function(n,e,t){null==t&&(t=!1),ceramic_App.app.logger.warning("copyDirectory() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:389,className:"ceramic.Files",methodName:"copyDirectory"})},ceramic_Files.deleteFile=function(n){ceramic_App.app.logger.warning("deleteFile() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:415,className:"ceramic.Files",methodName:"deleteFile"})},ceramic_Files.getContent=function(n){return ceramic_App.app.logger.warning("getContent() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:441,className:"ceramic.Files",methodName:"getContent"}),null},ceramic_Files.getBytes=function(n){return ceramic_App.app.logger.warning("getBytes() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:469,className:"ceramic.Files",methodName:"getBytes"}),null},ceramic_Files.saveContent=function(n,e){ceramic_App.app.logger.warning("saveContent() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:495,className:"ceramic.Files",methodName:"saveContent"})},ceramic_Files.saveBytes=function(n,e){ceramic_App.app.logger.warning("saveBytes() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:521,className:"ceramic.Files",methodName:"saveBytes"})},ceramic_Files.createDirectory=function(n){ceramic_App.app.logger.warning("createDirectory() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:546,className:"ceramic.Files",methodName:"createDirectory"})},ceramic_Files.exists=function(n){return ceramic_App.app.logger.warning("exists() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:598,className:"ceramic.Files",methodName:"exists"}),!1},ceramic_Files.isDirectory=function(n){return ceramic_App.app.logger.warning("isDirectory() is not supported on this target",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Files.hx",lineNumber:631,className:"ceramic.Files",methodName:"isDirectory"}),!1};var ceramic_Quad=function(){this.frameHeight=-1,this.frameWidth=-1,this.frameY=-1,this.frameX=-1,this._texture=null,this.tile=null,this.color=16777215,ceramic_Visual.call(this),this.asQuad=this};t["ceramic.Quad"]=ceramic_Quad,ceramic_Quad.__name__="ceramic.Quad",ceramic_Quad.__super__=ceramic_Visual,ceramic_Quad.prototype=$extend(ceramic_Visual.prototype,{get_transparent:function(){return 16==(16&this.flags)},set_transparent:function(n){return this.flags=n?16|this.flags:-17&this.flags,n},set_tile:function(n){if(this.tile==n)return n;if(this.tile=n,null==n){var e=null;this._texture!=e&&this._set_texture(e)}else{if(this._texture!=n.texture){e=n.texture;this._texture!=e&&this._set_texture(e)}this.frameX=n.frameX+n.edgeInset,this.frameY=n.frameY+n.edgeInset;var t=n.frameWidth-2*n.edgeInset;this.frameWidth!=t&&(this.frameWidth=t,-1!=t&&this.set_width(t));var i=n.frameHeight-2*n.edgeInset;this.frameHeight!=i&&(this.frameHeight=i,-1!=i&&this.set_height(i)),this.set_width(n.frameWidth),this.set_height(n.frameHeight);var r=n.rotateFrame;this.flags=r?32|this.flags:-33&this.flags}return n},get_texture:function(){return this._texture},set_texture:function(n){return this._texture!=n&&this._set_texture(n),n},_set_texture:function(n){if(null!=this._texture&&(this._texture.offDestroy($bind(this,this.textureDestroyed)),null!=this._texture.asset&&this._texture.asset.release()),this._texture=n,null==n)this.frameX=-1,this.frameY=-1,-1!=this.frameWidth&&(this.frameWidth=-1),-1!=this.frameHeight&&(this.frameHeight=-1);else if(null!=this.tile){this.frameX=this.tile.frameX,this.frameY=this.tile.frameY;var e=this.tile.frameWidth;this.frameWidth!=e&&(this.frameWidth=e,-1!=e&&this.set_width(e));var t=this.tile.frameHeight;this.frameHeight!=t&&(this.frameHeight=t,-1!=t&&this.set_height(t)),n.onDestroy(this,$bind(this,this.textureDestroyed)),null!=n.asset&&n.asset.retain()}else{this.frameX=0,this.frameY=0;e=n.width;this.frameWidth!=e&&(this.frameWidth=e,-1!=e&&this.set_width(e));t=n.height;this.frameHeight!=t&&(this.frameHeight=t,-1!=t&&this.set_height(t)),n.onDestroy(this,$bind(this,this.textureDestroyed)),null!=n.asset&&n.asset.retain()}},set_frameWidth:function(n){return this.frameWidth==n||(this.frameWidth=n,-1!=n&&this.set_width(n)),n},set_frameHeight:function(n){return this.frameHeight==n||(this.frameHeight=n,-1!=n&&this.set_height(n)),n},get_rotateFrame:function(){return 32==(32&this.flags)},set_rotateFrame:function(n){return this.flags=n?32|this.flags:-33&this.flags,n},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2;null!=this._texture&&this._set_texture(null),this._lifecycleState=-1,ceramic_Visual.prototype.destroy.call(this)}},frame:function(n,e,t,i){this.frameX=n,this.frameY=e,this.frameWidth!=t&&(this.frameWidth=t,-1!=t&&this.set_width(t)),this.frameHeight!=i&&(this.frameHeight=i,-1!=i&&this.set_height(i))},computeMatrix:function(){null!=this.parent&&this.parent.matrixDirty&&this.parent.computeMatrix(),(t=ceramic_Quad._matrix).a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.changedDirty=!0,this.translatesOnlyDirty&&(this.translatesOnly=0==this.rotation&&1==this.scaleX&&1==this.scaleY&&0==this.skewX&&0==this.skewY,this.translatesOnlyDirty=!1);var n=this.get_width(),e=this.get_height();if(this.translatesOnly)ceramic_Visual._matrix.tx+=this.x-this.anchorX*n,ceramic_Visual._matrix.ty+=this.y-this.anchorY*e;else{if((t=ceramic_Visual._matrix).tx+=-this.anchorX*n,t.ty+=-this.anchorY*e,t.changedDirty=!0,1!=this.scaleX||1!=this.scaleY){var t=ceramic_Visual._matrix,i=this.scaleX,r=this.scaleY;t.a*=i,t.b*=r,t.c*=i,t.d*=r,t.tx*=i,t.ty*=r,t.changedDirty=!0}if(0!=this.skewX||0!=this.skewY){var t=ceramic_Visual._matrix,l=.017453292519943295*this.skewX,s=.017453292519943295*this.skewY,a=ceramic_Transform._tmp;a.a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0;var o=Math.cos(s),p=Math.sin(s),h=-Math.sin(l),u=Math.cos(l);ceramic_Transform._tmp.a=1*o+-0*p,ceramic_Transform._tmp.b=0*o+1*p,ceramic_Transform._tmp.c=1*h+-0*u,ceramic_Transform._tmp.d=0*h+1*u;var _=ceramic_Transform._tmp,c=t.a*_.a+t.b*_.c;t.b=t.a*_.b+t.b*_.d,t.a=c;var d=t.c*_.a+t.d*_.c;t.d=t.c*_.b+t.d*_.d,t.c=d;var f=t.tx*_.a+t.ty*_.c+_.tx;t.ty=t.tx*_.b+t.ty*_.d+_.ty,t.tx=f,t.changedDirty=!0}if(0!=this.rotation){t=ceramic_Visual._matrix;var x=.017453292519943295*this.rotation,b=Math.cos(x),y=Math.sin(x);c=t.a*b-t.b*y;t.b=t.a*y+t.b*b,t.a=c;d=t.c*b-t.d*y;t.d=t.c*y+t.d*b,t.c=d;f=t.tx*b-t.ty*y;t.ty=t.tx*y+t.ty*b,t.tx=f,t.changedDirty=!0}(t=ceramic_Visual._matrix).tx+=this.x,t.ty+=this.y,t.changedDirty=!0}if(null!=this.transform){c=ceramic_Visual._matrix.a*this.transform.a+ceramic_Visual._matrix.b*this.transform.c;ceramic_Visual._matrix.b=ceramic_Visual._matrix.a*this.transform.b+ceramic_Visual._matrix.b*this.transform.d,ceramic_Visual._matrix.a=c;d=ceramic_Visual._matrix.c*this.transform.a+ceramic_Visual._matrix.d*this.transform.c;ceramic_Visual._matrix.d=ceramic_Visual._matrix.c*this.transform.b+ceramic_Visual._matrix.d*this.transform.d,ceramic_Visual._matrix.c=d;f=ceramic_Visual._matrix.tx*this.transform.a+ceramic_Visual._matrix.ty*this.transform.c+this.transform.tx;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.transform.b+ceramic_Visual._matrix.ty*this.transform.d+this.transform.ty,ceramic_Visual._matrix.tx=f}if(null!=this.parent&&null==this.renderTarget)if(1==this.parent.matA&&0==this.parent.matB&&0==this.parent.matC&&1==this.parent.matD)ceramic_Visual._matrix.tx+=this.parent.matTX,ceramic_Visual._matrix.ty+=this.parent.matTY;else if(this.translatesOnly&&null==this.transform){ceramic_Visual._matrix.a=this.parent.matA,ceramic_Visual._matrix.b=this.parent.matB,ceramic_Visual._matrix.c=this.parent.matC,ceramic_Visual._matrix.d=this.parent.matD;f=ceramic_Visual._matrix.tx*this.parent.matA+ceramic_Visual._matrix.ty*this.parent.matC+this.parent.matTX;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.parent.matB+ceramic_Visual._matrix.ty*this.parent.matD+this.parent.matTY,ceramic_Visual._matrix.tx=f}else{c=ceramic_Visual._matrix.a*this.parent.matA+ceramic_Visual._matrix.b*this.parent.matC;ceramic_Visual._matrix.b=ceramic_Visual._matrix.a*this.parent.matB+ceramic_Visual._matrix.b*this.parent.matD,ceramic_Visual._matrix.a=c;d=ceramic_Visual._matrix.c*this.parent.matA+ceramic_Visual._matrix.d*this.parent.matC;ceramic_Visual._matrix.d=ceramic_Visual._matrix.c*this.parent.matB+ceramic_Visual._matrix.d*this.parent.matD,ceramic_Visual._matrix.c=d;f=ceramic_Visual._matrix.tx*this.parent.matA+ceramic_Visual._matrix.ty*this.parent.matC+this.parent.matTX;ceramic_Visual._matrix.ty=ceramic_Visual._matrix.tx*this.parent.matB+ceramic_Visual._matrix.ty*this.parent.matD+this.parent.matTY,ceramic_Visual._matrix.tx=f}this.matA=ceramic_Visual._matrix.a,this.matB=ceramic_Visual._matrix.b,this.matC=ceramic_Visual._matrix.c,this.matD=ceramic_Visual._matrix.d,this.matTX=ceramic_Visual._matrix.tx,this.matTY=ceramic_Visual._matrix.ty,this.roundTranslation>0&&(1==this.roundTranslation?(this.matTX=Math.round(this.matTX),this.matTY=Math.round(this.matTY)):(this.matTX=Math.round(this.matTX*this.roundTranslation)/this.roundTranslation,this.matTY=Math.round(this.matTY*this.roundTranslation)/this.roundTranslation)),this.matrixDirty=!1},textureDestroyed:function(n){null!=this._texture&&this._set_texture(null),this.set_tile(null)},__class__:ceramic_Quad,__properties__:$extend(ceramic_Visual.prototype.__properties__,{set_rotateFrame:"set_rotateFrame",get_rotateFrame:"get_rotateFrame",set_frameHeight:"set_frameHeight",set_frameWidth:"set_frameWidth",set_texture:"set_texture",get_texture:"get_texture",set_tile:"set_tile",set_transparent:"set_transparent",get_transparent:"get_transparent"})});var ceramic_Layer=function(){this.sizeDirty=!1,ceramic_Quad.call(this),this.flags|=16};t["ceramic.Layer"]=ceramic_Layer,ceramic_Layer.__name__="ceramic.Layer",ceramic_Layer.__super__=ceramic_Quad,ceramic_Layer.prototype=$extend(ceramic_Quad.prototype,{emitResize:function(n,e){this.willEmitResize(n,e);var t=0;if(null!=this.__cbOnResize&&(t+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(t+=this.__cbOnceResize.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnResize)for(var s=0,a=this.__cbOnResize.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnResize[o],++l):--t}if(null!=this.__cbOnceResize){var p=null,h=null;for(s=0,a=this.__cbOnceResize.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceResize[o],this.__cbOnceResize[o]=null;var u=this.__cbOnceOwnerUnbindResize[o];this.__cbOnceOwnerUnbindResize[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindResize[o]),h.push(this.__cbOnceResize[o])}this.__cbOnceOwnerUnbindResize=p,this.__cbOnceResize=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}this.didEmitResize(n,e)},onResize:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event resize because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offResize(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(e)},onceResize:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event resize because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offResize(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(e)},offResize:function(n){if(null!=n){var e;null!=this.__cbOnResize&&-1!=(e=this.__cbOnResize.indexOf(n))&&(this.__cbOnResize.splice(e,1),null!=(l=this.__cbOnOwnerUnbindResize[e])&&l(),this.__cbOnOwnerUnbindResize.splice(e,1)),null!=this.__cbOnceResize&&-1!=(e=this.__cbOnceResize.indexOf(n))&&(this.__cbOnceResize.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindResize[e])&&l(),this.__cbOnceOwnerUnbindResize.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindResize[r])&&l()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindResize[r])&&l()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&this.__cbOnResize.length>0||null!=this.__cbOnceResize&&this.__cbOnceResize.length>0},emitResizeIfNeeded:function(){this._lifecycleState<0||!this.sizeDirty||(this.sizeDirty=!1,this.emitResize(this.get_width(),this.get_height()))},willEmitResize:function(n,e){},didEmitResize:function(n,e){},set_width:function(n){return this._width==n||(ceramic_Quad.prototype.set_width.call(this,n),this.sizeDirty||(this.sizeDirty=!0,ceramic_App.app._onceImmediate($bind(this,this.emitResizeIfNeeded)))),n},set_height:function(n){return this._height==n||(ceramic_Quad.prototype.set_height.call(this,n),this.sizeDirty||(this.sizeDirty=!0,ceramic_App.app._onceImmediate($bind(this,this.emitResizeIfNeeded)))),n},unbindEvents:function(){ceramic_Quad.prototype.unbindEvents.call(this),this.offResize()},__class__:ceramic_Layer});var ceramic_Filter=function(){this.explicitRenderPendingResultCallbacks=null,this.explicitRenderState=0,this.density=-1,this.unobservedRenderTexture=null,this.renderTextureAutoruns=null,this.textureTile=null,this.textureTilePacker=null,this.explicitRender=!1,this.autoRender=!0,this.textureFilter=v.LINEAR,this.enabled=!0,this.hitVisual=null,this.textureId=null,this.observedDirty=!1,ceramic_Layer.call(this),this.flags&=-17,this.content=new ceramic_Quad,this.content.flags|=16,this.content.color=16777215,this.add(this.content),this.set_hitVisual(this),ceramic_App.app.screen.onTexturesDensityChange(this,$bind(this,this.handleTexturesDensityChange))};t["ceramic.Filter"]=ceramic_Filter,ceramic_Filter.__name__="ceramic.Filter",ceramic_Filter.__interfaces__=[tracker_Observable],ceramic_Filter.__super__=ceramic_Layer,ceramic_Filter.prototype=$extend(ceramic_Layer.prototype,{emitObservedDirty:function(n,e){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnObservedDirty)for(var s=0,a=this.__cbOnObservedDirty.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnObservedDirty[o],++l):--t}if(null!=this.__cbOnceObservedDirty){var p=null,h=null;for(s=0,a=this.__cbOnceObservedDirty.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceObservedDirty[o],this.__cbOnceObservedDirty[o]=null;var u=this.__cbOnceOwnerUnbindObservedDirty[o];this.__cbOnceOwnerUnbindObservedDirty[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindObservedDirty[o]),h.push(this.__cbOnceObservedDirty[o])}this.__cbOnceOwnerUnbindObservedDirty=p,this.__cbOnceObservedDirty=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(e)},onceObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(e)},offObservedDirty:function(n){if(null!=n){var e;null!=this.__cbOnObservedDirty&&-1!=(e=this.__cbOnObservedDirty.indexOf(n))&&(this.__cbOnObservedDirty.splice(e,1),null!=(l=this.__cbOnOwnerUnbindObservedDirty[e])&&l(),this.__cbOnOwnerUnbindObservedDirty.splice(e,1)),null!=this.__cbOnceObservedDirty&&-1!=(e=this.__cbOnceObservedDirty.indexOf(n))&&(this.__cbOnceObservedDirty.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindObservedDirty[e])&&l(),this.__cbOnceOwnerUnbindObservedDirty.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindObservedDirty[r])&&l()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindObservedDirty[r])&&l()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&this.__cbOnObservedDirty.length>0||null!=this.__cbOnceObservedDirty&&this.__cbOnceObservedDirty.length>0},set_textureId:function(n){return this.textureId=n,null!=this.get_renderTexture()&&(this.get_renderTexture().id=n),n},set_hitVisual:function(n){return this.hitVisual==n||(null!=this.hitVisual&&ceramic_App.app.screen.removeHitVisual(this.hitVisual),this.hitVisual=n,null!=this.hitVisual&&ceramic_App.app.screen.addHitVisual(this.hitVisual)),n},set_enabled:function(n){if(this.enabled==n)return n;this.enabled=n;var e=!n;return this.flags=e?16|this.flags:-17&this.flags,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,n},set_textureFilter:function(n){return this.textureFilter==n||(this.textureFilter=n,null!=this.get_renderTexture()&&this.get_renderTexture().set_filter(n)),n},set_autoRender:function(n){return this.autoRender==n||(this.autoRender=n,null!=this.get_renderTexture()&&(this.get_renderTexture().autoRender=n)),n},set_explicitRender:function(n){return this.explicitRender==n||(this.explicitRender=n,this.content.set_active(!n)),n},set_textureTilePacker:function(n){return this.textureTilePacker==n||(null!=this.textureTile&&null!=this.textureTilePacker&&(this.textureTilePacker.releaseTile(this.textureTile),this.textureTile=null,this.set_tile(null),this.set_tile(null),this.content.set_renderTarget(null)),this.textureTilePacker=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},get_renderTexture:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.renderTextureAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.renderTextureAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedRenderTexture},set_renderTexture:function(n){var e=this.unobservedRenderTexture;if(this.unobservedRenderTexture=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitRenderTextureChange(n,e);var t=this.renderTextureAutoruns;if(null!=t){this.renderTextureAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateRenderTexture:function(){var n=this.unobservedRenderTexture;this.emitRenderTextureChange(n,n);var e=this.renderTextureAutoruns;if(null!=e){this.renderTextureAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitRenderTextureChange:function(n,e){var t=0;if(null!=this.__cbOnRenderTextureChange&&(t+=this.__cbOnRenderTextureChange.length),null!=this.__cbOnceRenderTextureChange&&(t+=this.__cbOnceRenderTextureChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnRenderTextureChange)for(var s=0,a=this.__cbOnRenderTextureChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnRenderTextureChange[o],++l):--t}if(null!=this.__cbOnceRenderTextureChange){var p=null,h=null;for(s=0,a=this.__cbOnceRenderTextureChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceRenderTextureChange[o],this.__cbOnceRenderTextureChange[o]=null;var u=this.__cbOnceOwnerUnbindRenderTextureChange[o];this.__cbOnceOwnerUnbindRenderTextureChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindRenderTextureChange[o]),h.push(this.__cbOnceRenderTextureChange[o])}this.__cbOnceOwnerUnbindRenderTextureChange=p,this.__cbOnceRenderTextureChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onRenderTextureChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event renderTextureChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offRenderTextureChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindRenderTextureChange&&(this.__cbOnOwnerUnbindRenderTextureChange=[]),this.__cbOnOwnerUnbindRenderTextureChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindRenderTextureChange&&(this.__cbOnOwnerUnbindRenderTextureChange=[]),this.__cbOnOwnerUnbindRenderTextureChange.push(null);null==this.__cbOnRenderTextureChange&&(this.__cbOnRenderTextureChange=[]),this.__cbOnRenderTextureChange.push(e)},onceRenderTextureChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event renderTextureChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offRenderTextureChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindRenderTextureChange&&(this.__cbOnceOwnerUnbindRenderTextureChange=[]),this.__cbOnceOwnerUnbindRenderTextureChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindRenderTextureChange&&(this.__cbOnceOwnerUnbindRenderTextureChange=[]),this.__cbOnceOwnerUnbindRenderTextureChange.push(null);null==this.__cbOnceRenderTextureChange&&(this.__cbOnceRenderTextureChange=[]),this.__cbOnceRenderTextureChange.push(e)},offRenderTextureChange:function(n){if(null!=n){var e;null!=this.__cbOnRenderTextureChange&&-1!=(e=this.__cbOnRenderTextureChange.indexOf(n))&&(this.__cbOnRenderTextureChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindRenderTextureChange[e])&&l(),this.__cbOnOwnerUnbindRenderTextureChange.splice(e,1)),null!=this.__cbOnceRenderTextureChange&&-1!=(e=this.__cbOnceRenderTextureChange.indexOf(n))&&(this.__cbOnceRenderTextureChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindRenderTextureChange[e])&&l(),this.__cbOnceOwnerUnbindRenderTextureChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindRenderTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindRenderTextureChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindRenderTextureChange[r])&&l()}this.__cbOnOwnerUnbindRenderTextureChange=null}if(null!=this.__cbOnceOwnerUnbindRenderTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindRenderTextureChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindRenderTextureChange[r])&&l()}this.__cbOnceOwnerUnbindRenderTextureChange=null}this.__cbOnRenderTextureChange=null,this.__cbOnceRenderTextureChange=null}},listensRenderTextureChange:function(){return null!=this.__cbOnRenderTextureChange&&this.__cbOnRenderTextureChange.length>0||null!=this.__cbOnceRenderTextureChange&&this.__cbOnceRenderTextureChange.length>0},set_density:function(n){return this.density==n||(this.density=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},handleTexturesDensityChange:function(n,e){n!=e&&-1==this.density&&(this.filterSize(Math.ceil(this.get_width()),Math.ceil(this.get_height()),n),this.contentDirty=!1)},filterSize:function(n,e,t){if(this.enabled){if(null==this.get_renderTexture()||(null==this.textureTilePacker||!this.textureTilePacker.managesTexture(this.get_renderTexture()))&&(this.get_renderTexture().width!=n||this.get_renderTexture().height!=e||-1!=t&&this.get_renderTexture().density!=t)||null!=this.textureTilePacker&&!this.textureTilePacker.managesTexture(this.get_renderTexture())||null!=this.textureTile&&(this.textureTile.frameWidth!=n||this.textureTile.frameHeight!=e)){if(null!=this.get_renderTexture()&&(null==this.textureTilePacker||!this.textureTilePacker.managesTexture(this.get_renderTexture()))){var i=null;this._texture!=i&&this._set_texture(i),this.get_renderTexture().destroy(),this.set_renderTexture(null)}if(null!=this.textureTile&&null!=this.textureTilePacker&&(this.textureTilePacker.releaseTile(this.textureTile),this.textureTile=null),n>0&&e>0)if(null!=this.textureTilePacker)this.set_renderTexture(this.textureTilePacker.texture),this.textureTile=this.textureTilePacker.allocTile(n,e),this.set_tile(this.textureTile);else{this.set_renderTexture(new ceramic_RenderTexture(n,e,t)),this.get_renderTexture().id=this.textureId,this.get_renderTexture().set_filter(this.textureFilter),this.get_renderTexture().autoRender=this.autoRender,this.set_tile(null);i=this.get_renderTexture();this._texture!=i&&this._set_texture(i)}}}else if(null!=this.get_renderTexture()&&(null==this.textureTilePacker||!this.textureTilePacker.managesTexture(this.get_renderTexture()))){this.set_tile(null);i=null;this._texture!=i&&this._set_texture(i),this.get_renderTexture().destroy(),this.set_renderTexture(null)}if((r=this.content).set_width(n),r.set_height(e),this.content.set_renderTarget(this.get_renderTexture()),null!=this.textureTile){var r=this.content,l=this.textureTile.frameY;r.set_x(this.textureTile.frameX),r.set_y(l)}else{(r=this.content).set_x(0),r.set_y(0)}this.content.contentDirty&&this.content.computeContent()},render:function(n,e){null==n&&(n=!1);var t=this;if(this.explicitRender)if(1!=this.explicitRenderState)if(2!=this.explicitRenderState)if(this.explicitRenderState=1,this.contentDirty&&this.computeContent(),null!=this.get_renderTexture()){if(this.content.set_active(!0),n){var i=ceramic_App.app;i.inUpdate&&(i.shouldUpdateAndDrawAgain=!0)}ceramic_App.app.onceUpdate(null,(function(n){if(t._lifecycleState<0)e=null;else if(t.explicitRenderState=2,t.contentDirty&&t.computeContent(),null!=t.get_renderTexture())t.get_renderTexture().renderDirty=!0,ceramic_App.app.onceFinishDraw(null,(function(){if(t._lifecycleState<0)e=null;else{t.content.set_active(!1),t.explicitRenderState=0;var n=t.explicitRenderPendingResultCallbacks;if(t.explicitRenderPendingResultCallbacks=null,null!=e&&(e(),e=null),null!=n)for(var i=0,r=n.length;i<r;){var l=i++,s=n[l];n[l]=null,s(),s=null}}}));else{t.content.set_active(!1),t.explicitRenderState=0;var i=t.explicitRenderPendingResultCallbacks;if(t.explicitRenderPendingResultCallbacks=null,null!=e&&(e(),e=null),null!=i)for(var r=0,l=i.length;r<l;){var s=r++,a=i[s];i[s]=null,a(),a=null}}}))}else{this.explicitRenderState=0;var r=this.explicitRenderPendingResultCallbacks;if(this.explicitRenderPendingResultCallbacks=null,null!=e&&(e(),e=null),null!=r)for(var l=0,s=r.length;l<s;){var a=l++,o=r[a];r[a]=null,o(),o=null}}else null!=e&&(null==this.explicitRenderPendingResultCallbacks&&(this.explicitRenderPendingResultCallbacks=[]),this.explicitRenderPendingResultCallbacks.push((function(){t.render(n,e),e=null})));else null!=e&&(null==this.explicitRenderPendingResultCallbacks&&(this.explicitRenderPendingResultCallbacks=[]),this.explicitRenderPendingResultCallbacks.push(e),e=null);else ceramic_App.app.logger.warning("Explicit render is disabled on this filter. Ignoring render() call.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Filter.hx",lineNumber:244,className:"ceramic.Filter",methodName:"render"})},visualInContentHits:function(n,e,t){var i=ceramic_Screen.matchedHitVisual;if(ceramic_Screen.matchedHitVisual=null,this.hitVisual._hits(e,t,!1)){ceramic_Screen.matchedHitVisual=i,n.matrixDirty&&n.computeMatrix(),(u=ceramic_Filter._matrix).a=n.matA,u.b=n.matB,u.c=n.matC,u.d=n.matD,u.tx=n.matTX,u.ty=n.matTY,u.changedDirty=!0;for(var r=this.hitVisual;;){r.matrixDirty&&r.computeMatrix();var l=ceramic_Filter._matrix.a*r.matA+ceramic_Filter._matrix.b*r.matC;ceramic_Filter._matrix.b=ceramic_Filter._matrix.a*r.matB+ceramic_Filter._matrix.b*r.matD,ceramic_Filter._matrix.a=l;var s=ceramic_Filter._matrix.c*r.matA+ceramic_Filter._matrix.d*r.matC;ceramic_Filter._matrix.d=ceramic_Filter._matrix.c*r.matB+ceramic_Filter._matrix.d*r.matD,ceramic_Filter._matrix.c=s;var a=ceramic_Filter._matrix.tx*r.matA+ceramic_Filter._matrix.ty*r.matC+r.matTX;if(ceramic_Filter._matrix.ty=ceramic_Filter._matrix.tx*r.matB+ceramic_Filter._matrix.ty*r.matD+r.matTY,ceramic_Filter._matrix.tx=a,null!=r.computedRenderTarget){var o=!1,p=r.parent;if(null!=p)for(;;){if(null!=p.asQuad&&p instanceof ceramic_Filter){var h=p;if(h.get_renderTexture()==r.computedRenderTarget){r=h.hitVisual,o=!0;break}}if(null==(p=p.parent))break}if(!o)return!1}else r=null;if(null==r)break}var u,_=(u=ceramic_Filter._matrix).a*u.d-u.b*u.c;if(0==_)u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{_=1/_;l=u.d*_;u.d=u.a*_,u.a=l,u.b*=-_,u.c*=-_;a=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=a}return u.changedDirty=!0,n.hitTest(e,t,ceramic_Filter._matrix)}return ceramic_Screen.matchedHitVisual=i,!1},set_width:function(n){return this.get_width()==n?n:(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,ceramic_Layer.prototype.set_width.call(this,n))},set_height:function(n){return this.get_height()==n?n:(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,ceramic_Layer.prototype.set_height.call(this,n))},computeContent:function(){this.filterSize(Math.ceil(this.get_width()),Math.ceil(this.get_height()),this.density),this.contentDirty=!1},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this.set_hitVisual(null);null!=this._texture&&this._set_texture(null),null==this.get_renderTexture()||null!=this.textureTilePacker&&this.textureTilePacker.managesTexture(this.get_renderTexture())||(this.get_renderTexture().destroy(),this.set_renderTexture(null)),this.set_textureTilePacker(null),this.set_renderTexture(null),this.explicitRenderPendingResultCallbacks=null,this.content=null,this._lifecycleState=-1,ceramic_Layer.prototype.destroy.call(this)}},unbindEvents:function(){ceramic_Layer.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offRenderTextureChange()},__class__:ceramic_Filter,__properties__:$extend(ceramic_Layer.prototype.__properties__,{set_density:"set_density",set_renderTexture:"set_renderTexture",get_renderTexture:"get_renderTexture",set_textureTilePacker:"set_textureTilePacker",set_explicitRender:"set_explicitRender",set_autoRender:"set_autoRender",set_textureFilter:"set_textureFilter",set_enabled:"set_enabled",set_hitVisual:"set_hitVisual",set_textureId:"set_textureId"})});var ceramic_FontAsset=function(n,e){this.unobservedFont=null,this.fontAutoruns=null,this.pages=null,this.fontData=null,ceramic_Asset.call(this,"font",n,e),this.set_handleTexturesDensityChange(!0),this.assets=new ceramic_Assets};t["ceramic.FontAsset"]=ceramic_FontAsset,ceramic_FontAsset.__name__="ceramic.FontAsset",ceramic_FontAsset.__super__=ceramic_Asset,ceramic_FontAsset.prototype=$extend(ceramic_Asset.prototype,{emitReplaceFont:function(n,e){var t=0;if(null!=this.__cbOnReplaceFont&&(t+=this.__cbOnReplaceFont.length),null!=this.__cbOnceReplaceFont&&(t+=this.__cbOnceReplaceFont.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnReplaceFont)for(var s=0,a=this.__cbOnReplaceFont.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnReplaceFont[o],++l):--t}if(null!=this.__cbOnceReplaceFont){var p=null,h=null;for(s=0,a=this.__cbOnceReplaceFont.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceReplaceFont[o],this.__cbOnceReplaceFont[o]=null;var u=this.__cbOnceOwnerUnbindReplaceFont[o];this.__cbOnceOwnerUnbindReplaceFont[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindReplaceFont[o]),h.push(this.__cbOnceReplaceFont[o])}this.__cbOnceOwnerUnbindReplaceFont=p,this.__cbOnceReplaceFont=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onReplaceFont:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceFont because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceFont(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReplaceFont&&(this.__cbOnOwnerUnbindReplaceFont=[]),this.__cbOnOwnerUnbindReplaceFont.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReplaceFont&&(this.__cbOnOwnerUnbindReplaceFont=[]),this.__cbOnOwnerUnbindReplaceFont.push(null);null==this.__cbOnReplaceFont&&(this.__cbOnReplaceFont=[]),this.__cbOnReplaceFont.push(e)},onceReplaceFont:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceFont because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceFont(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReplaceFont&&(this.__cbOnceOwnerUnbindReplaceFont=[]),this.__cbOnceOwnerUnbindReplaceFont.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReplaceFont&&(this.__cbOnceOwnerUnbindReplaceFont=[]),this.__cbOnceOwnerUnbindReplaceFont.push(null);null==this.__cbOnceReplaceFont&&(this.__cbOnceReplaceFont=[]),this.__cbOnceReplaceFont.push(e)},offReplaceFont:function(n){if(null!=n){var e;null!=this.__cbOnReplaceFont&&-1!=(e=this.__cbOnReplaceFont.indexOf(n))&&(this.__cbOnReplaceFont.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReplaceFont[e])&&l(),this.__cbOnOwnerUnbindReplaceFont.splice(e,1)),null!=this.__cbOnceReplaceFont&&-1!=(e=this.__cbOnceReplaceFont.indexOf(n))&&(this.__cbOnceReplaceFont.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReplaceFont[e])&&l(),this.__cbOnceOwnerUnbindReplaceFont.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceFont){for(var t=0,i=this.__cbOnOwnerUnbindReplaceFont.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReplaceFont[r])&&l()}this.__cbOnOwnerUnbindReplaceFont=null}if(null!=this.__cbOnceOwnerUnbindReplaceFont){for(t=0,i=this.__cbOnceOwnerUnbindReplaceFont.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReplaceFont[r])&&l()}this.__cbOnceOwnerUnbindReplaceFont=null}this.__cbOnReplaceFont=null,this.__cbOnceReplaceFont=null}},listensReplaceFont:function(){return null!=this.__cbOnReplaceFont&&this.__cbOnReplaceFont.length>0||null!=this.__cbOnceReplaceFont&&this.__cbOnceReplaceFont.length>0},get_font:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.fontAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.fontAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedFont},set_font:function(n){var e=this.unobservedFont;if(this.unobservedFont=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFontChange(n,e);var t=this.fontAutoruns;if(null!=t){this.fontAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateFont:function(){var n=this.unobservedFont;this.emitFontChange(n,n);var e=this.fontAutoruns;if(null!=e){this.fontAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitFontChange:function(n,e){var t=0;if(null!=this.__cbOnFontChange&&(t+=this.__cbOnFontChange.length),null!=this.__cbOnceFontChange&&(t+=this.__cbOnceFontChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFontChange)for(var s=0,a=this.__cbOnFontChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFontChange[o],++l):--t}if(null!=this.__cbOnceFontChange){var p=null,h=null;for(s=0,a=this.__cbOnceFontChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFontChange[o],this.__cbOnceFontChange[o]=null;var u=this.__cbOnceOwnerUnbindFontChange[o];this.__cbOnceOwnerUnbindFontChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFontChange[o]),h.push(this.__cbOnceFontChange[o])}this.__cbOnceOwnerUnbindFontChange=p,this.__cbOnceFontChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFontChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event fontChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFontChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFontChange&&(this.__cbOnOwnerUnbindFontChange=[]),this.__cbOnOwnerUnbindFontChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFontChange&&(this.__cbOnOwnerUnbindFontChange=[]),this.__cbOnOwnerUnbindFontChange.push(null);null==this.__cbOnFontChange&&(this.__cbOnFontChange=[]),this.__cbOnFontChange.push(e)},onceFontChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event fontChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFontChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFontChange&&(this.__cbOnceOwnerUnbindFontChange=[]),this.__cbOnceOwnerUnbindFontChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFontChange&&(this.__cbOnceOwnerUnbindFontChange=[]),this.__cbOnceOwnerUnbindFontChange.push(null);null==this.__cbOnceFontChange&&(this.__cbOnceFontChange=[]),this.__cbOnceFontChange.push(e)},offFontChange:function(n){if(null!=n){var e;null!=this.__cbOnFontChange&&-1!=(e=this.__cbOnFontChange.indexOf(n))&&(this.__cbOnFontChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFontChange[e])&&l(),this.__cbOnOwnerUnbindFontChange.splice(e,1)),null!=this.__cbOnceFontChange&&-1!=(e=this.__cbOnceFontChange.indexOf(n))&&(this.__cbOnceFontChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFontChange[e])&&l(),this.__cbOnceOwnerUnbindFontChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFontChange){for(var t=0,i=this.__cbOnOwnerUnbindFontChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFontChange[r])&&l()}this.__cbOnOwnerUnbindFontChange=null}if(null!=this.__cbOnceOwnerUnbindFontChange){for(t=0,i=this.__cbOnceOwnerUnbindFontChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFontChange[r])&&l()}this.__cbOnceOwnerUnbindFontChange=null}this.__cbOnFontChange=null,this.__cbOnceFontChange=null}},listensFontChange:function(){return null!=this.__cbOnFontChange&&this.__cbOnFontChange.length>0||null!=this.__cbOnceFontChange&&this.__cbOnceFontChange.length>0},load:function(){var n=this;null!=this.owner&&(this.assets.inheritRuntimeAssetsFromAssets(this.owner),this.assets.loadMethod=this.owner.loadMethod,this.assets.scheduleMethod=this.owner.scheduleMethod,this.assets.delayBetweenXAssets=this.owner.delayBetweenXAssets);for(var e=[],t=this.assets.iterator();t.hasNext();){var i=t.next();e.push(i)}if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load font asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:50,className:"ceramic.FontAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);ceramic_App.app.logger.info("Load font "+this.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:56,className:"ceramic.FontAsset",methodName:"load"}),this.assets.runtimeAssets=this.runtimeAssets,(t=new ceramic_TextAsset(this.name)).set_handleTexturesDensityChange(!1),t.set_path(this.path),this.assets.addAsset(t),this.assets.onceComplete(this,(function(i){var r=t.get_text(),l=ceramic_Path.directory(n.path);if(""==l&&(l="."),null!=r)try{n.fontData=ceramic_BitmapFontParser.parse(r),n.fontData.path=l;for(var s=new haxe_ds_StringMap,o=[],p=0,h=n.fontData.pages;p<h.length;){var u=h[p];++p;var _=u.file;""!=l&&(_=ceramic_Path.join([l,_]));var c=ceramic_Assets.decodePath(_),d=new ceramic_ImageAsset(c.name);d.set_handleTexturesDensityChange(!1),d.set_path(c.path),n.assets.addAsset(d),o.push(d)}n.assets.onceComplete(n,(function(t){if(t){for(var i=0;i<o.length;){var r=o[i];++i;var l=r.path,p=r.get_texture();s.h[l]=p}var h=n.get_font(),u=new ceramic_BitmapFont(n.fontData,s);if(u.id="font:"+n.path,u.asset=n,n.set_font(u),null!=h){n.emitReplaceFont(n.get_font(),h),h==ceramic_App.app.defaultFont&&(ceramic_App.app.defaultFont=n.get_font());i=0;for(var _=[].concat(ceramic_App.app.visuals);i<_.length;){var c=_[i];if(++i,c._lifecycleState>=0&&c instanceof ceramic_Text){var d=c;d.font==h&&d.set_font(n.get_font())}}h.asset=null,h.destroy()}for(i=0;i<e.length;){r=e[i];if(++i,r instanceof ceramic_ImageAsset){var f=r;-1==o.indexOf(f)&&r.destroy()}else r.destroy()}n.set_status(a.READY),n.emitComplete(!0),n.handleTexturesDensityChange&&n.checkTexturesDensity()}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load textures for font at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:171,className:"ceramic.FontAsset",methodName:"load"}),n.emitComplete(!1)})),n.assets.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:177,className:"ceramic.FontAsset",methodName:"load"})}catch(p){n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to decode font data at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:181,className:"ceramic.FontAsset",methodName:"load"}),n.emitComplete(!1)}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load font data at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:187,className:"ceramic.FontAsset",methodName:"load"}),n.emitComplete(!1)})),this.assets.load(null,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:192,className:"ceramic.FontAsset",methodName:"load"})},texturesDensityDidChange:function(n,e){this.get_status()==a.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var n=this.path;this.computePath(),n!=this.path&&(ceramic_App.app.logger.info("Reload font ("+n+" -> "+this.path+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:213,className:"ceramic.FontAsset",methodName:"checkTexturesDensity"}),this.load())},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload font (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FontAsset.hx",lineNumber:234,className:"ceramic.FontAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){if(!(this._lifecycleState<=-2)&&(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),null!=this.get_font()&&(this.get_font().destroy(),this.set_font(null)),null!=this.pages)){for(var n=this.pages.h,e=Object.keys(n),t=e.length,i=0;i<t;){var r=e[i++];this.pages.h[r].destroy()}this.pages=null}},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offReplaceFont(),this.offFontChange()},__class__:ceramic_FontAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_font:"set_font",get_font:"get_font"})});var ceramic_Value=function(n){null!=n&&(this.value=n)};t["ceramic.Value"]=ceramic_Value,ceramic_Value.__name__="ceramic.Value",ceramic_Value.prototype={__class__:ceramic_Value};var ceramic_Fragment=function(n,e){null==e&&(e=!1),this.fragmentComponents=null,this.timeline=null,this.pendingLoads=0,this.floatD=0,this.floatC=0,this.floatB=0,this.floatA=0,this.autoUpdateTimeline=!0,this.resizable=!1,this.fragmentData=null,this.fps=30,this.assets=null,this.editedItems=!1,ceramic_Layer.call(this),this.editedItems=e,this.assets=n,this.entities=[],this.items=[]};t["ceramic.Fragment"]=ceramic_Fragment,ceramic_Fragment.__name__="ceramic.Fragment",ceramic_Fragment.cacheData=function(n){ceramic_Fragment.cachedFragmentData.h[n.id]=n},ceramic_Fragment.getData=function(n){return ceramic_Fragment.cachedFragmentData.h[n]},ceramic_Fragment.__super__=ceramic_Layer,ceramic_Fragment.prototype=$extend(ceramic_Layer.prototype,{emitFloatAChange:function(n,e){var t=0;if(null!=this.__cbOnFloatAChange&&(t+=this.__cbOnFloatAChange.length),null!=this.__cbOnceFloatAChange&&(t+=this.__cbOnceFloatAChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFloatAChange)for(var s=0,a=this.__cbOnFloatAChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFloatAChange[o],++l):--t}if(null!=this.__cbOnceFloatAChange){var p=null,h=null;for(s=0,a=this.__cbOnceFloatAChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFloatAChange[o],this.__cbOnceFloatAChange[o]=null;var u=this.__cbOnceOwnerUnbindFloatAChange[o];this.__cbOnceOwnerUnbindFloatAChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFloatAChange[o]),h.push(this.__cbOnceFloatAChange[o])}this.__cbOnceOwnerUnbindFloatAChange=p,this.__cbOnceFloatAChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFloatAChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatAChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatAChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFloatAChange&&(this.__cbOnOwnerUnbindFloatAChange=[]),this.__cbOnOwnerUnbindFloatAChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFloatAChange&&(this.__cbOnOwnerUnbindFloatAChange=[]),this.__cbOnOwnerUnbindFloatAChange.push(null);null==this.__cbOnFloatAChange&&(this.__cbOnFloatAChange=[]),this.__cbOnFloatAChange.push(e)},onceFloatAChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatAChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatAChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFloatAChange&&(this.__cbOnceOwnerUnbindFloatAChange=[]),this.__cbOnceOwnerUnbindFloatAChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFloatAChange&&(this.__cbOnceOwnerUnbindFloatAChange=[]),this.__cbOnceOwnerUnbindFloatAChange.push(null);null==this.__cbOnceFloatAChange&&(this.__cbOnceFloatAChange=[]),this.__cbOnceFloatAChange.push(e)},offFloatAChange:function(n){if(null!=n){var e;null!=this.__cbOnFloatAChange&&-1!=(e=this.__cbOnFloatAChange.indexOf(n))&&(this.__cbOnFloatAChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFloatAChange[e])&&l(),this.__cbOnOwnerUnbindFloatAChange.splice(e,1)),null!=this.__cbOnceFloatAChange&&-1!=(e=this.__cbOnceFloatAChange.indexOf(n))&&(this.__cbOnceFloatAChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFloatAChange[e])&&l(),this.__cbOnceOwnerUnbindFloatAChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFloatAChange){for(var t=0,i=this.__cbOnOwnerUnbindFloatAChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFloatAChange[r])&&l()}this.__cbOnOwnerUnbindFloatAChange=null}if(null!=this.__cbOnceOwnerUnbindFloatAChange){for(t=0,i=this.__cbOnceOwnerUnbindFloatAChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFloatAChange[r])&&l()}this.__cbOnceOwnerUnbindFloatAChange=null}this.__cbOnFloatAChange=null,this.__cbOnceFloatAChange=null}},listensFloatAChange:function(){return null!=this.__cbOnFloatAChange&&this.__cbOnFloatAChange.length>0||null!=this.__cbOnceFloatAChange&&this.__cbOnceFloatAChange.length>0},emitFloatBChange:function(n,e){var t=0;if(null!=this.__cbOnFloatBChange&&(t+=this.__cbOnFloatBChange.length),null!=this.__cbOnceFloatBChange&&(t+=this.__cbOnceFloatBChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFloatBChange)for(var s=0,a=this.__cbOnFloatBChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFloatBChange[o],++l):--t}if(null!=this.__cbOnceFloatBChange){var p=null,h=null;for(s=0,a=this.__cbOnceFloatBChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFloatBChange[o],this.__cbOnceFloatBChange[o]=null;var u=this.__cbOnceOwnerUnbindFloatBChange[o];this.__cbOnceOwnerUnbindFloatBChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFloatBChange[o]),h.push(this.__cbOnceFloatBChange[o])}this.__cbOnceOwnerUnbindFloatBChange=p,this.__cbOnceFloatBChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFloatBChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatBChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatBChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFloatBChange&&(this.__cbOnOwnerUnbindFloatBChange=[]),this.__cbOnOwnerUnbindFloatBChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFloatBChange&&(this.__cbOnOwnerUnbindFloatBChange=[]),this.__cbOnOwnerUnbindFloatBChange.push(null);null==this.__cbOnFloatBChange&&(this.__cbOnFloatBChange=[]),this.__cbOnFloatBChange.push(e)},onceFloatBChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatBChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatBChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFloatBChange&&(this.__cbOnceOwnerUnbindFloatBChange=[]),this.__cbOnceOwnerUnbindFloatBChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFloatBChange&&(this.__cbOnceOwnerUnbindFloatBChange=[]),this.__cbOnceOwnerUnbindFloatBChange.push(null);null==this.__cbOnceFloatBChange&&(this.__cbOnceFloatBChange=[]),this.__cbOnceFloatBChange.push(e)},offFloatBChange:function(n){if(null!=n){var e;null!=this.__cbOnFloatBChange&&-1!=(e=this.__cbOnFloatBChange.indexOf(n))&&(this.__cbOnFloatBChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFloatBChange[e])&&l(),this.__cbOnOwnerUnbindFloatBChange.splice(e,1)),null!=this.__cbOnceFloatBChange&&-1!=(e=this.__cbOnceFloatBChange.indexOf(n))&&(this.__cbOnceFloatBChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFloatBChange[e])&&l(),this.__cbOnceOwnerUnbindFloatBChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFloatBChange){for(var t=0,i=this.__cbOnOwnerUnbindFloatBChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFloatBChange[r])&&l()}this.__cbOnOwnerUnbindFloatBChange=null}if(null!=this.__cbOnceOwnerUnbindFloatBChange){for(t=0,i=this.__cbOnceOwnerUnbindFloatBChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFloatBChange[r])&&l()}this.__cbOnceOwnerUnbindFloatBChange=null}this.__cbOnFloatBChange=null,this.__cbOnceFloatBChange=null}},listensFloatBChange:function(){return null!=this.__cbOnFloatBChange&&this.__cbOnFloatBChange.length>0||null!=this.__cbOnceFloatBChange&&this.__cbOnceFloatBChange.length>0},emitFloatCChange:function(n,e){var t=0;if(null!=this.__cbOnFloatCChange&&(t+=this.__cbOnFloatCChange.length),null!=this.__cbOnceFloatCChange&&(t+=this.__cbOnceFloatCChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFloatCChange)for(var s=0,a=this.__cbOnFloatCChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFloatCChange[o],++l):--t}if(null!=this.__cbOnceFloatCChange){var p=null,h=null;for(s=0,a=this.__cbOnceFloatCChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFloatCChange[o],this.__cbOnceFloatCChange[o]=null;var u=this.__cbOnceOwnerUnbindFloatCChange[o];this.__cbOnceOwnerUnbindFloatCChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFloatCChange[o]),h.push(this.__cbOnceFloatCChange[o])}this.__cbOnceOwnerUnbindFloatCChange=p,this.__cbOnceFloatCChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFloatCChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatCChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatCChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFloatCChange&&(this.__cbOnOwnerUnbindFloatCChange=[]),this.__cbOnOwnerUnbindFloatCChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFloatCChange&&(this.__cbOnOwnerUnbindFloatCChange=[]),this.__cbOnOwnerUnbindFloatCChange.push(null);null==this.__cbOnFloatCChange&&(this.__cbOnFloatCChange=[]),this.__cbOnFloatCChange.push(e)},onceFloatCChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatCChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatCChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFloatCChange&&(this.__cbOnceOwnerUnbindFloatCChange=[]),this.__cbOnceOwnerUnbindFloatCChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFloatCChange&&(this.__cbOnceOwnerUnbindFloatCChange=[]),this.__cbOnceOwnerUnbindFloatCChange.push(null);null==this.__cbOnceFloatCChange&&(this.__cbOnceFloatCChange=[]),this.__cbOnceFloatCChange.push(e)},offFloatCChange:function(n){if(null!=n){var e;null!=this.__cbOnFloatCChange&&-1!=(e=this.__cbOnFloatCChange.indexOf(n))&&(this.__cbOnFloatCChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFloatCChange[e])&&l(),this.__cbOnOwnerUnbindFloatCChange.splice(e,1)),null!=this.__cbOnceFloatCChange&&-1!=(e=this.__cbOnceFloatCChange.indexOf(n))&&(this.__cbOnceFloatCChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFloatCChange[e])&&l(),this.__cbOnceOwnerUnbindFloatCChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFloatCChange){for(var t=0,i=this.__cbOnOwnerUnbindFloatCChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFloatCChange[r])&&l()}this.__cbOnOwnerUnbindFloatCChange=null}if(null!=this.__cbOnceOwnerUnbindFloatCChange){for(t=0,i=this.__cbOnceOwnerUnbindFloatCChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFloatCChange[r])&&l()}this.__cbOnceOwnerUnbindFloatCChange=null}this.__cbOnFloatCChange=null,this.__cbOnceFloatCChange=null}},listensFloatCChange:function(){return null!=this.__cbOnFloatCChange&&this.__cbOnFloatCChange.length>0||null!=this.__cbOnceFloatCChange&&this.__cbOnceFloatCChange.length>0},emitFloatDChange:function(n,e){var t=0;if(null!=this.__cbOnFloatDChange&&(t+=this.__cbOnFloatDChange.length),null!=this.__cbOnceFloatDChange&&(t+=this.__cbOnceFloatDChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFloatDChange)for(var s=0,a=this.__cbOnFloatDChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFloatDChange[o],++l):--t}if(null!=this.__cbOnceFloatDChange){var p=null,h=null;for(s=0,a=this.__cbOnceFloatDChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFloatDChange[o],this.__cbOnceFloatDChange[o]=null;var u=this.__cbOnceOwnerUnbindFloatDChange[o];this.__cbOnceOwnerUnbindFloatDChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFloatDChange[o]),h.push(this.__cbOnceFloatDChange[o])}this.__cbOnceOwnerUnbindFloatDChange=p,this.__cbOnceFloatDChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFloatDChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatDChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatDChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFloatDChange&&(this.__cbOnOwnerUnbindFloatDChange=[]),this.__cbOnOwnerUnbindFloatDChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFloatDChange&&(this.__cbOnOwnerUnbindFloatDChange=[]),this.__cbOnOwnerUnbindFloatDChange.push(null);null==this.__cbOnFloatDChange&&(this.__cbOnFloatDChange=[]),this.__cbOnFloatDChange.push(e)},onceFloatDChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event floatDChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFloatDChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFloatDChange&&(this.__cbOnceOwnerUnbindFloatDChange=[]),this.__cbOnceOwnerUnbindFloatDChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFloatDChange&&(this.__cbOnceOwnerUnbindFloatDChange=[]),this.__cbOnceOwnerUnbindFloatDChange.push(null);null==this.__cbOnceFloatDChange&&(this.__cbOnceFloatDChange=[]),this.__cbOnceFloatDChange.push(e)},offFloatDChange:function(n){if(null!=n){var e;null!=this.__cbOnFloatDChange&&-1!=(e=this.__cbOnFloatDChange.indexOf(n))&&(this.__cbOnFloatDChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFloatDChange[e])&&l(),this.__cbOnOwnerUnbindFloatDChange.splice(e,1)),null!=this.__cbOnceFloatDChange&&-1!=(e=this.__cbOnceFloatDChange.indexOf(n))&&(this.__cbOnceFloatDChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFloatDChange[e])&&l(),this.__cbOnceOwnerUnbindFloatDChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFloatDChange){for(var t=0,i=this.__cbOnOwnerUnbindFloatDChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFloatDChange[r])&&l()}this.__cbOnOwnerUnbindFloatDChange=null}if(null!=this.__cbOnceOwnerUnbindFloatDChange){for(t=0,i=this.__cbOnceOwnerUnbindFloatDChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFloatDChange[r])&&l()}this.__cbOnceOwnerUnbindFloatDChange=null}this.__cbOnFloatDChange=null,this.__cbOnceFloatDChange=null}},listensFloatDChange:function(){return null!=this.__cbOnFloatDChange&&this.__cbOnFloatDChange.length>0||null!=this.__cbOnceFloatDChange&&this.__cbOnceFloatDChange.length>0},emitLocation:function(n){var e=0;if(null!=this.__cbOnLocation&&(e+=this.__cbOnLocation.length),null!=this.__cbOnceLocation&&(e+=this.__cbOnceLocation.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnLocation)for(var l=0,s=this.__cbOnLocation.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnLocation[a],++r):--e}if(null!=this.__cbOnceLocation){var o=null,p=null;for(l=0,s=this.__cbOnceLocation.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceLocation[a],this.__cbOnceLocation[a]=null;var h=this.__cbOnceOwnerUnbindLocation[a];this.__cbOnceOwnerUnbindLocation[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindLocation[a]),p.push(this.__cbOnceLocation[a])}this.__cbOnceOwnerUnbindLocation=o,this.__cbOnceLocation=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onLocation:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event location because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offLocation(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindLocation&&(this.__cbOnOwnerUnbindLocation=[]),this.__cbOnOwnerUnbindLocation.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindLocation&&(this.__cbOnOwnerUnbindLocation=[]),this.__cbOnOwnerUnbindLocation.push(null);null==this.__cbOnLocation&&(this.__cbOnLocation=[]),this.__cbOnLocation.push(e)},onceLocation:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event location because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offLocation(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindLocation&&(this.__cbOnceOwnerUnbindLocation=[]),this.__cbOnceOwnerUnbindLocation.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindLocation&&(this.__cbOnceOwnerUnbindLocation=[]),this.__cbOnceOwnerUnbindLocation.push(null);null==this.__cbOnceLocation&&(this.__cbOnceLocation=[]),this.__cbOnceLocation.push(e)},offLocation:function(n){if(null!=n){var e;null!=this.__cbOnLocation&&-1!=(e=this.__cbOnLocation.indexOf(n))&&(this.__cbOnLocation.splice(e,1),null!=(l=this.__cbOnOwnerUnbindLocation[e])&&l(),this.__cbOnOwnerUnbindLocation.splice(e,1)),null!=this.__cbOnceLocation&&-1!=(e=this.__cbOnceLocation.indexOf(n))&&(this.__cbOnceLocation.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindLocation[e])&&l(),this.__cbOnceOwnerUnbindLocation.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindLocation){for(var t=0,i=this.__cbOnOwnerUnbindLocation.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindLocation[r])&&l()}this.__cbOnOwnerUnbindLocation=null}if(null!=this.__cbOnceOwnerUnbindLocation){for(t=0,i=this.__cbOnceOwnerUnbindLocation.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindLocation[r])&&l()}this.__cbOnceOwnerUnbindLocation=null}this.__cbOnLocation=null,this.__cbOnceLocation=null}},listensLocation:function(){return null!=this.__cbOnLocation&&this.__cbOnLocation.length>0||null!=this.__cbOnceLocation&&this.__cbOnceLocation.length>0},set_autoUpdateTimeline:function(n){return this.autoUpdateTimeline!=n&&(this.autoUpdateTimeline=n,null!=this.timeline&&this.timeline.set_autoUpdate(n)),n},set_floatA:function(n){if(this.floatA!=n){var e=this.floatA;this.floatA=n,this.emitFloatAChange(n,e)}return n},set_floatB:function(n){if(this.floatB!=n){var e=this.floatB;this.floatB=n,this.emitFloatBChange(n,e)}return n},set_floatC:function(n){if(this.floatC!=n){var e=this.floatC;this.floatC=n,this.emitFloatCChange(n,e)}return n},set_floatD:function(n){if(this.floatD!=n){var e=this.floatD;this.floatD=n,this.emitFloatDChange(n,e)}return n},emitReady:function(){var n=0;if(null!=this.__cbOnReady&&(n+=this.__cbOnReady.length),null!=this.__cbOnceReady&&(n+=this.__cbOnceReady.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnReady)for(var r=0,l=this.__cbOnReady.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnReady[s],++i):--n}if(null!=this.__cbOnceReady){var a=null,o=null;for(r=0,l=this.__cbOnceReady.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceReady[s],this.__cbOnceReady[s]=null;var p=this.__cbOnceOwnerUnbindReady[s];this.__cbOnceOwnerUnbindReady[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindReady[s]),o.push(this.__cbOnceReady[s])}this.__cbOnceOwnerUnbindReady=a,this.__cbOnceReady=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onReady:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event ready because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReady(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReady&&(this.__cbOnOwnerUnbindReady=[]),this.__cbOnOwnerUnbindReady.push(null);null==this.__cbOnReady&&(this.__cbOnReady=[]),this.__cbOnReady.push(e)},onceReady:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event ready because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReady(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReady&&(this.__cbOnceOwnerUnbindReady=[]),this.__cbOnceOwnerUnbindReady.push(null);null==this.__cbOnceReady&&(this.__cbOnceReady=[]),this.__cbOnceReady.push(e)},offReady:function(n){if(null!=n){var e;null!=this.__cbOnReady&&-1!=(e=this.__cbOnReady.indexOf(n))&&(this.__cbOnReady.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReady[e])&&l(),this.__cbOnOwnerUnbindReady.splice(e,1)),null!=this.__cbOnceReady&&-1!=(e=this.__cbOnceReady.indexOf(n))&&(this.__cbOnceReady.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReady[e])&&l(),this.__cbOnceOwnerUnbindReady.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReady){for(var t=0,i=this.__cbOnOwnerUnbindReady.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReady[r])&&l()}this.__cbOnOwnerUnbindReady=null}if(null!=this.__cbOnceOwnerUnbindReady){for(t=0,i=this.__cbOnceOwnerUnbindReady.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReady[r])&&l()}this.__cbOnceOwnerUnbindReady=null}this.__cbOnReady=null,this.__cbOnceReady=null}},listensReady:function(){return null!=this.__cbOnReady&&this.__cbOnReady.length>0||null!=this.__cbOnceReady&&this.__cbOnceReady.length>0},set_fragmentData:function(n){var e=this;this.pendingLoads++,this.fragmentData=n;var t=Object.create(null);if(null!=n){if(this.set_width(n.width),this.set_height(n.height),null!=n.color?this.color=n.color:this.color=0,null!=n.transparent){var i=n.transparent;this.flags=i?16|this.flags:-17&this.flags}else this.flags|=16;if(null!=n.items)for(var r=0,l=n.items;r<l.length;){var s=l[r];++r,this.putItem(s),t[s.id]=!0}}if(null==n||Object.prototype.hasOwnProperty.call(n,"items")){var a=null;for(r=0,l=this.entities;r<l.length;){var o=l[r];++r,Object.prototype.hasOwnProperty.call(t,o.id)||(null==a&&(a=[]),a.push(o.id))}if(null!=a)for(r=0;r<a.length;){var p=a[r];++r,this.removeItem(p)}}null!=n&&(this.pendingLoads++,ceramic_App.app.converters.h["ceramic.ReadOnlyMap<String,ceramic.Component>"].basicToField(this,"components",this.assets,n.components,(function(n){e._lifecycleState<0||(e.pendingLoads--,e.onceReady(e,(function(){e.set_fragmentComponents(n)})),0==e.pendingLoads&&e.emitReady())})));null!=n&&null!=n.fps&&this.set_fps(n.fps);var h=null;if(null!=n&&null!=n.tracks){for(r=0,l=n.tracks;r<l.length;){var u=l[r];++r,null==h&&(h=new haxe_ds_StringMap),h.h[u.entity+"#"+u.field]=!0,this.putTrack(null,u)}if(null!=this.timeline&&this.timeline.tracks.length>0)for(r=0,l=[].concat(this.timeline.tracks);r<l.length;){var _=l[r];if(++r,null==h||!Object.prototype.hasOwnProperty.call(h.h,_.id)){var c=_.id.split("#");2==c.length?this.removeTrack(c[0],c[1]):ceramic_App.app.logger.warning("Cannot remove track with unhandled id: "+_.id,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:312,className:"ceramic.Fragment",methodName:"set_fragmentData"})}}}var d=null;if(null!=n&&null!=n.labels){var f=n.labels;for(r=0,l=Reflect.fields(f);r<l.length;){var x=l[r];++r,null==d&&(d=new haxe_ds_StringMap),d.h[x]=!0;var b=f[x];this.putLabel(b,x)}if(null!=this.timeline&&null!=this.timeline.labels)for(r=0,l=[].concat(this.timeline.labels);r<l.length;){var y=l[r];++r,null!=d&&Object.prototype.hasOwnProperty.call(d.h,y)||this.timeline.removeLabel(y)}}return this.pendingLoads--,0==this.pendingLoads&&this.emitReady(),n},set_fps:function(n){if(this.fps!=n&&(this.fps=n,null!=this.timeline&&(this.timeline.fps=n),null!=this.tracks))for(var e=0,t=this.tracks;e<t.length;){var i=t[e];++e,this.putTrack(null,i)}return n},putItem:function(n){var e=this.get(n.id),r=!1;if(null!=e){r=e instanceof ceramic_Visual;var l=js_Boot.getClass(e);n.entity!=l.__name__&&(this.removeItem(n.id),e=null)}else this.items.push(n);var s=n.entity,a=t[s],o=null!=e?e:null,p="ceramic.Fragment"==n.entity;if(null==o){var h=[];p&&(h.push(this.assets),h.push(!1)),o=Type.createInstance(a,h)}if(null==o)throw haxe_Exception.thrown("Failed to create instance of "+n.entity);(o.id=n.id,p)&&o.set_depthRange(1);if(null==o.get_data().name&&null!=n.name&&(o.get_data().name=n.name),null!=n.data&&null!=o.get_data())for(var u=0,_=Reflect.fields(n.data);u<_.length;){var c=_[u];++u,o.get_data()[c]=Reflect.field(n.data,c)}if(null!=n.props){var d=Reflect.fields(n.props);haxe_ds_ArraySort.sort(d,(function(n,e){return 0}));for(u=0;u<d.length;){var f=d[u];++u;var x=ceramic_FieldInfo.typeOf(n.entity,f),b=Reflect.field(n.props,f);if(null!=(C=null!=x?ceramic_App.app.converters.h[x]:null))this.putItemField(p,n,o,f,b,C);else{if(!Object.prototype.hasOwnProperty.call(ceramic_Fragment.basicTypes.h,x)){var y=i[x];if(null!=y){_=0;for(var v=y.__constructs__,m=new Array(v.length),g=0,z=v.length;g<z;){var w=g++;m[w]=v[w]._hx_name}for(var O=m;_<O.length;){s=O[_];if(++_,s.toLowerCase()==b.toLowerCase()){b=Type.createEnum(y,s);break}}}}Reflect.setProperty(o,f,b)}}var C;x=ceramic_FieldInfo.typeOf(n.entity,"components"),b=n.components;null!=(C=null!=x?ceramic_App.app.converters.h[x]:null)?this.putItemField(p,n,o,"components",b,C):ceramic_App.app.logger.warning("No converter found for field: components (type: "+x+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:472,className:"ceramic.Fragment",methodName:"putItem"})}return null==e&&("ceramic.Assets"==ceramic_FieldInfo.typeOf(n.entity,"assets")&&Reflect.setProperty(o,"assets",this.assets),this.entities.push(o)),o instanceof ceramic_Visual&&!r&&this.add(o),null==e&&this.putTracksForItem(n.id),o},putItemField:function(n,e,t,i,r,l){var s=this;this.pendingLoads++,l.basicToField(t,i,this.assets,r,(function(e){if(s.pendingLoads--,!(s._lifecycleState<0)){if(t._lifecycleState>=0)if(n&&"fragmentData"==i){var r=t;s.pendingLoads++,r.onceReady(s,(function(){s.pendingLoads--,s._lifecycleState<0||0==s.pendingLoads&&s.emitReady()})),r.set_fragmentData(e)}else"components"!=i?Reflect.setProperty(t,i,e):s.onceReady(s,(function(){var n=null;if(null!=e&&null!=(n=e))for(var i=n.h,r=Object.keys(i),l=r.length,s=0;s<l;){var a=r[s++],o=n.h[a];null!=o&&t.component(a,o)}}));0==s.pendingLoads&&s.emitReady()}}))},get:function(n){for(var e=0,t=this.entities;e<t.length;){var i=t[e];if(++e,i.id==n)return i}return null},getItemInstanceByName:function(n){for(var e=0,t=this.entities;e<t.length;){var i=t[e];if(++e,i.get_data().name==n)return i}return null},getItem:function(n){for(var e=0,t=this.items;e<t.length;){var i=t[e];if(++e,i.id==n)return i}return null},getItemByName:function(n){for(var e=0,t=this.items;e<t.length;){var i=t[e];if(++e,i.name==n)return i}return null},typeOfItem:function(n){var e=this.getItem(n);return null!=e?e.entity:(ceramic_App.app.logger.warning("Failed to resolve entity type for item "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:685,className:"ceramic.Fragment",methodName:"typeOfItem"}),null)},removeItem:function(n){for(var e=0,t=this.entities;e<t.length;){var i=t[e];if(++e,i.id==n){HxOverrides.remove(this.entities,i),i.destroy();break}}for(e=0,t=this.items;e<t.length;){var r=t[e];if(++e,r.id==n){HxOverrides.remove(this.items,r);break}}},removeAllItems:function(){for(var n=0,e=[].concat(this.entities);n<e.length;){var t=e[n];++n,HxOverrides.remove(this.entities,t),t.destroy()}for(n=0,e=[].concat(this.items);n<e.length;){var i=e[n];++n,HxOverrides.remove(this.items,i)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Layer.prototype.destroy.call(this),null!=this.timeline&&(this.timeline.destroy(),this.timeline=null),this.removeAllItems())},set_components:function(n){if(this._components==n)return n;if(null!=this._components){r=this._components.h;for(var e=(l=Object.keys(r)).length,t=0;t<e;){var i=l[t++];null!=n&&Object.prototype.hasOwnProperty.call(n.h,i)||null!=this.fragmentComponents&&Object.prototype.hasOwnProperty.call(this.fragmentComponents.h,i)||this.removeComponent(i)}}if(null!=n){var r,l;for(r=n.h,e=(l=Object.keys(r)).length,t=0;t<e;){i=l[t++];var s=n.h[i];if(null!=this._components){var a=this._components.h[i];null!=a?a!=s&&(this.removeComponent(i),this.component(i,s)):this.component(i,s)}else this.component(i,s)}}return this._components=n,n},set_fragmentComponents:function(n){if(this.fragmentComponents==n)return n;if(null!=this.fragmentComponents){r=this.fragmentComponents.h;for(var e=(l=Object.keys(r)).length,t=0;t<e;){var i=l[t++];null!=n&&Object.prototype.hasOwnProperty.call(n.h,i)||this.removeComponent(i)}}if(null!=n){var r,l;for(r=n.h,e=(l=Object.keys(r)).length,t=0;t<e;){i=l[t++];var s=n.h[i];if(null!=this.fragmentComponents){var a=this.fragmentComponents.h[i];null!=a?a!=s&&(this.removeComponent(i),this.component(i,s)):this.component(i,s)}else this.component(i,s)}}return this.fragmentComponents=n,n},isManagedComponent:function(){},putTrack:function(n,e){var t=null;if(null==(v=this.getTrack(e.entity,e.field)))null==this.tracks&&(this.tracks=[]),this.tracks.push(e);else{t=new haxe_ds_IntMap;for(var i=0,r=v.keyframes;i<r.length;){var l=r[i];++i,t.h[l.index]=!0}var s=this.tracks.indexOf(v);this.tracks[s]=e}var a=e.entity,o=this.get(a);if(null!=e.keyframes&&e.keyframes.length>0){this.createTimelineIfNeeded();var p=e.field,h=a+"#"+p,u=e.options;if(null==n&&(n=this.typeOfItem(e.entity)),null==n)return void ceramic_App.app.logger.warning("Cannot update timeline track "+h+": failed to resolve entity type",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1011,className:"ceramic.Fragment",methodName:"putTrack"});var _=ceramic_FieldInfo.types(n),c=null!=_?_.h[p]:null;if(null==c)return void ceramic_App.app.logger.warning("Cannot update timeline track "+h+": failed to resolve info for "+p+" of entity type "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1017,className:"ceramic.Fragment",methodName:"putTrack"});var d=this.timeline.get(h);if(null==d){if(null==o)return void ceramic_App.app.logger.warning("Failed to create timeline track "+h+" because there is no entity with id "+e.entity,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1025,className:"ceramic.Fragment",methodName:"putTrack"});if(ceramic_Fragment._trackResult.value=null,ceramic_App.app.timelines.emitCreateTrack(c,u,ceramic_Fragment._trackResult),null==(d=ceramic_Fragment._trackResult.value))return void ceramic_App.app.logger.warning("Failed to create timeline track "+h+" for "+p+" of entity type "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1033,className:"ceramic.Fragment",methodName:"putTrack"});o.onDestroy(d,(function(n){d.destroy()})),d.id=h,ceramic_App.app.timelines.emitBindTrack(c,u,d,o,p),this.timeline.add(d)}if(d.loop=e.loop,ceramic_Fragment._usedKeyframes.length>0){for(i=0,r=ceramic_Fragment._usedKeyframes.length;i<r;){var f=i++;ceramic_Fragment._usedKeyframes[f]=null}if(0!=(O=ceramic_Fragment._usedKeyframes).length)if(O.length>0)O.splice(0,O.length);else O[-1]=null}var x=-1,b=!0;for(i=0,r=e.keyframes;i<r.length;){l=r[i];++i;var y=l.index;y<x&&(b=!1),x=y;var v=d.findKeyframeAtIndex(y);if(ceramic_Fragment._keyframeResult.value=null,ceramic_App.app.timelines.emitCreateKeyframe(c,u,l.value,y,ceramic_EasingUtils.easingFromString(l.easing),v,ceramic_Fragment._keyframeResult),null==(w=ceramic_Fragment._keyframeResult.value))return void ceramic_App.app.logger.warning("Failed to create or update keyframe #"+Std.string($bind(this,this.frame))+" of track "+h+" for field "+p+" of entity type "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1090,className:"ceramic.Fragment",methodName:"putTrack"});ceramic_Fragment._usedKeyframes.push(w),null!=v?v!=w&&(d.remove(v),d.add(w)):d.add(w)}var m=null,g=d.keyframes;if(b){var z=0;for(i=0,r=g.length;i<r;){var w=g[f=i++];ceramic_Fragment._usedKeyframes[z]==w?++z:(null==m&&(m=[]),m.push(w))}}else{ceramic_App.app.logger.warning("Input keyframe array should be sorted by time in ascending order!",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Fragment.hx",lineNumber:1120,className:"ceramic.Fragment",methodName:"putTrack"});for(i=0,r=g.length;i<r;){w=g[f=i++];-1==ceramic_Fragment._usedKeyframes.indexOf(w)&&(null==m&&(m=[]),m.push(w))}}if(null!=m){for(i=0;i<m.length;){w=m[i];++i,d.remove(w)}m=null}if(ceramic_Fragment._usedKeyframes.length>0){for(i=0,r=ceramic_Fragment._usedKeyframes.length;i<r;){f=i++;ceramic_Fragment._usedKeyframes[f]=null}var O;if(0!=(O=ceramic_Fragment._usedKeyframes).length)if(O.length>0)O.splice(0,O.length);else O[-1]=null}d.apply()}},putTracksForItem:function(n){if(null!=this.tracks)for(var e=0,t=this.tracks.length;e<t;){var i=e++,r=this.tracks[i];r.entity==n&&this.putTrack(null,r)}},getTrack:function(n,e){if(null!=this.tracks)for(var t=0,i=this.tracks;t<i.length;){var r=i[t];if(++t,r.entity==n&&r.field==e)return r}return null},removeTrack:function(n,e){if(null!=this.tracks){for(var t=-1,i=0,r=this.tracks.length;i<r;){var l=i++,s=this.tracks[l];if(s.entity==n&&s.field==e){t=l;break}}if(-1!=t&&(this.tracks.splice(t,1),null!=this.timeline)){var a=n+"#"+e,o=this.timeline.get(a);null!=o&&(this.timeline.remove(o),o.destroy())}}},createTimelineIfNeeded:function(){null==this.timeline&&(this.timeline=new ceramic_Timeline,this.timeline.fps=this.fps,this.timeline.set_autoUpdate(this.autoUpdateTimeline))},putLabel:function(n,e){this.createTimelineIfNeeded(),this.timeline.setLabel(n,e)},indexOfLabel:function(n){return null!=this.timeline?this.timeline.indexOfLabel(n):-1},labelAtIndex:function(n){return null!=this.timeline?this.timeline.labelAtIndex(n):null},removeLabel:function(n){null!=this.timeline&&this.timeline.removeLabel(n)},removeLabelAtIndex:function(n){null!=this.timeline&&this.timeline.removeLabelAtIndex(n)},get_paused:function(){return null!=this.timeline&&this.timeline.paused},set_paused:function(n){return(null!=this.timeline&&this.timeline.paused)!=n&&(this.createTimelineIfNeeded(),this.timeline.set_paused(n)),n},unbindEvents:function(){ceramic_Layer.prototype.unbindEvents.call(this),this.offFloatAChange(),this.offFloatBChange(),this.offFloatCChange(),this.offFloatDChange(),this.offLocation(),this.offReady()},__class__:ceramic_Fragment,__properties__:$extend(ceramic_Layer.prototype.__properties__,{set_paused:"set_paused",get_paused:"get_paused",set_fragmentComponents:"set_fragmentComponents",set_floatD:"set_floatD",set_floatC:"set_floatC",set_floatB:"set_floatB",set_floatA:"set_floatA",set_autoUpdateTimeline:"set_autoUpdateTimeline",set_fragmentData:"set_fragmentData",set_fps:"set_fps"})});var ceramic_FragmentsAsset=function(n,e){this.unobservedFragments=null,this.fragmentsAutoruns=null,ceramic_Asset.call(this,"fragments",n,e)};t["ceramic.FragmentsAsset"]=ceramic_FragmentsAsset,ceramic_FragmentsAsset.__name__="ceramic.FragmentsAsset",ceramic_FragmentsAsset.__super__=ceramic_Asset,ceramic_FragmentsAsset.prototype=$extend(ceramic_Asset.prototype,{get_fragments:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.fragmentsAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.fragmentsAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedFragments},set_fragments:function(n){var e=this.unobservedFragments;if(this.unobservedFragments=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFragmentsChange(n,e);var t=this.fragmentsAutoruns;if(null!=t){this.fragmentsAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateFragments:function(){var n=this.unobservedFragments;this.emitFragmentsChange(n,n);var e=this.fragmentsAutoruns;if(null!=e){this.fragmentsAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitFragmentsChange:function(n,e){var t=0;if(null!=this.__cbOnFragmentsChange&&(t+=this.__cbOnFragmentsChange.length),null!=this.__cbOnceFragmentsChange&&(t+=this.__cbOnceFragmentsChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFragmentsChange)for(var s=0,a=this.__cbOnFragmentsChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFragmentsChange[o],++l):--t}if(null!=this.__cbOnceFragmentsChange){var p=null,h=null;for(s=0,a=this.__cbOnceFragmentsChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFragmentsChange[o],this.__cbOnceFragmentsChange[o]=null;var u=this.__cbOnceOwnerUnbindFragmentsChange[o];this.__cbOnceOwnerUnbindFragmentsChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFragmentsChange[o]),h.push(this.__cbOnceFragmentsChange[o])}this.__cbOnceOwnerUnbindFragmentsChange=p,this.__cbOnceFragmentsChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFragmentsChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event fragmentsChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFragmentsChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFragmentsChange&&(this.__cbOnOwnerUnbindFragmentsChange=[]),this.__cbOnOwnerUnbindFragmentsChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFragmentsChange&&(this.__cbOnOwnerUnbindFragmentsChange=[]),this.__cbOnOwnerUnbindFragmentsChange.push(null);null==this.__cbOnFragmentsChange&&(this.__cbOnFragmentsChange=[]),this.__cbOnFragmentsChange.push(e)},onceFragmentsChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event fragmentsChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFragmentsChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFragmentsChange&&(this.__cbOnceOwnerUnbindFragmentsChange=[]),this.__cbOnceOwnerUnbindFragmentsChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFragmentsChange&&(this.__cbOnceOwnerUnbindFragmentsChange=[]),this.__cbOnceOwnerUnbindFragmentsChange.push(null);null==this.__cbOnceFragmentsChange&&(this.__cbOnceFragmentsChange=[]),this.__cbOnceFragmentsChange.push(e)},offFragmentsChange:function(n){if(null!=n){var e;null!=this.__cbOnFragmentsChange&&-1!=(e=this.__cbOnFragmentsChange.indexOf(n))&&(this.__cbOnFragmentsChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFragmentsChange[e])&&l(),this.__cbOnOwnerUnbindFragmentsChange.splice(e,1)),null!=this.__cbOnceFragmentsChange&&-1!=(e=this.__cbOnceFragmentsChange.indexOf(n))&&(this.__cbOnceFragmentsChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFragmentsChange[e])&&l(),this.__cbOnceOwnerUnbindFragmentsChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFragmentsChange){for(var t=0,i=this.__cbOnOwnerUnbindFragmentsChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFragmentsChange[r])&&l()}this.__cbOnOwnerUnbindFragmentsChange=null}if(null!=this.__cbOnceOwnerUnbindFragmentsChange){for(t=0,i=this.__cbOnceOwnerUnbindFragmentsChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFragmentsChange[r])&&l()}this.__cbOnceOwnerUnbindFragmentsChange=null}this.__cbOnFragmentsChange=null,this.__cbOnceFragmentsChange=null}},listensFragmentsChange:function(){return null!=this.__cbOnFragmentsChange&&this.__cbOnFragmentsChange.length>0||null!=this.__cbOnceFragmentsChange&&this.__cbOnceFragmentsChange.length>0},load:function(){var n=this;if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load fragments asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:22,className:"ceramic.FragmentsAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var e=this.path,t=ceramic_Assets.realAssetPath(e,this.runtimeAssets),i=ceramic_Assets.getReloadCount(t);i>0&&(t+="?hot="+i,e+="?hot="+i);var r={};null!=this.owner&&(r.immediate=this.owner.immediate,r.loadMethod=this.owner.loadMethod),ceramic_App.app.logger.info("Load fragments "+e,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:43,className:"ceramic.FragmentsAsset",methodName:"load"}),ceramic_App.app.backend.texts.load(t,r,(function(e){if(null!=e){try{n.set_fragments(JSON.parse(e))}catch(e){return n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to parse fragments at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:51,className:"ceramic.FragmentsAsset",methodName:"load"}),void n.emitComplete(!1)}n.set_status(a.READY),n.emitComplete(!0)}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load fragments at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:60,className:"ceramic.FragmentsAsset",methodName:"load"}),n.emitComplete(!1)}))},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload fragments (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/FragmentsAsset.hx",lineNumber:83,className:"ceramic.FragmentsAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),this.set_fragments(null))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offFragmentsChange()},__class__:ceramic_FragmentsAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_fragments:"set_fragments",get_fragments:"get_fragments"})});var u={toString:function(n){switch(n){case 0:return"LEFT_X";case 1:return"LEFT_Y";case 2:return"RIGHT_X";case 3:return"RIGHT_Y";case 4:return"LEFT_TRIGGER";case 5:return"RIGHT_TRIGGER";default:return""+n}}},_={toString:function(n){switch(n){case 0:return"A";case 1:return"B";case 2:return"X";case 3:return"Y";case 4:return"L1";case 5:return"R1";case 6:return"L2";case 7:return"R2";case 8:return"SELECT";case 9:return"START";case 10:return"L3";case 11:return"R3";case 12:return"DPAD_UP";case 13:return"DPAD_DOWN";case 14:return"DPAD_LEFT";case 15:return"DPAD_RIGHT";default:return""+n}}},ceramic_GeometryUtils=function(){};t["ceramic.GeometryUtils"]=ceramic_GeometryUtils,ceramic_GeometryUtils.__name__="ceramic.GeometryUtils",ceramic_GeometryUtils.pointInTriangle=function(n,e,t,i,r,l,s,a){var o=(n-r)*(i-l)-(t-r)*(e-l),p=(n-s)*(l-a)-(r-s)*(e-a),h=(n-t)*(a-i)-(s-t)*(e-i);return!((o<0||p<0||h<0)&&(o>0||p>0||h>0))},ceramic_GeometryUtils.pointInRectangle=function(n,e,t,i,r,l){return!(n<t)&&(!(e<i)&&(!(n>=t+r)&&!(e>=i+l)))},ceramic_GeometryUtils.pointInCircle=function(n,e,t,i,r){return(n-t)*(n-t)+(e-i)*(e-i)<=r*r},ceramic_GeometryUtils.distance=function(n,e,t,i){var r=t-n,l=i-e;return Math.sqrt(r*r+l*l)},ceramic_GeometryUtils.squareDistance=function(n,e,t,i){var r=t-n,l=i-e;return r*r+l*l},ceramic_GeometryUtils.angleTo=function(n,e,t,i){var r=57.29577951308232*Math.atan2(i-e,t-n)+90;return r<0?r+=360:r>=360&&(r-=360),r},ceramic_GeometryUtils.angleDelta=function(n,e){for(var t=n;t<0;)t+=360;for(;t>=360;)t-=360;n=t;for(t=e;t<0;)t+=360;for(;t>=360;)t-=360;var i=(e=t)-n;return i>180?e-=360:i<-180&&(e+=360),e-n},ceramic_GeometryUtils.clampDegrees=function(n){for(;n<0;)n+=360;for(;n>=360;)n-=360;return n},ceramic_GeometryUtils.angleDirection=function(n,e){var t=.017453292519943295*(n-90);return e.x=Math.cos(t),e.y=Math.sin(t),e};var ceramic_GlyphQuad=function(){this.glyphAdvance=-1,this.glyphY=-1,this.glyphX=-1,this.code=-1,this.line=-1,this.posInLine=-1,this.index=-1,this.glyph=null,this.char=null,ceramic_Quad.call(this)};t["ceramic.GlyphQuad"]=ceramic_GlyphQuad,ceramic_GlyphQuad.__name__="ceramic.GlyphQuad",ceramic_GlyphQuad.__super__=ceramic_Quad,ceramic_GlyphQuad.prototype=$extend(ceramic_Quad.prototype,{emitClear:function(n){var e=0;if(null!=this.__cbOnClear&&(e+=this.__cbOnClear.length),null!=this.__cbOnceClear&&(e+=this.__cbOnceClear.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnClear)for(var l=0,s=this.__cbOnClear.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnClear[a],++r):--e}if(null!=this.__cbOnceClear){var o=null,p=null;for(l=0,s=this.__cbOnceClear.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceClear[a],this.__cbOnceClear[a]=null;var h=this.__cbOnceOwnerUnbindClear[a];this.__cbOnceOwnerUnbindClear[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindClear[a]),p.push(this.__cbOnceClear[a])}this.__cbOnceOwnerUnbindClear=o,this.__cbOnceClear=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onClear:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event clear because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offClear(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindClear&&(this.__cbOnOwnerUnbindClear=[]),this.__cbOnOwnerUnbindClear.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindClear&&(this.__cbOnOwnerUnbindClear=[]),this.__cbOnOwnerUnbindClear.push(null);null==this.__cbOnClear&&(this.__cbOnClear=[]),this.__cbOnClear.push(e)},onceClear:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event clear because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offClear(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindClear&&(this.__cbOnceOwnerUnbindClear=[]),this.__cbOnceOwnerUnbindClear.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindClear&&(this.__cbOnceOwnerUnbindClear=[]),this.__cbOnceOwnerUnbindClear.push(null);null==this.__cbOnceClear&&(this.__cbOnceClear=[]),this.__cbOnceClear.push(e)},offClear:function(n){if(null!=n){var e;null!=this.__cbOnClear&&-1!=(e=this.__cbOnClear.indexOf(n))&&(this.__cbOnClear.splice(e,1),null!=(l=this.__cbOnOwnerUnbindClear[e])&&l(),this.__cbOnOwnerUnbindClear.splice(e,1)),null!=this.__cbOnceClear&&-1!=(e=this.__cbOnceClear.indexOf(n))&&(this.__cbOnceClear.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindClear[e])&&l(),this.__cbOnceOwnerUnbindClear.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindClear){for(var t=0,i=this.__cbOnOwnerUnbindClear.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindClear[r])&&l()}this.__cbOnOwnerUnbindClear=null}if(null!=this.__cbOnceOwnerUnbindClear){for(t=0,i=this.__cbOnceOwnerUnbindClear.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindClear[r])&&l()}this.__cbOnceOwnerUnbindClear=null}this.__cbOnClear=null,this.__cbOnceClear=null}},listensClear:function(){return null!=this.__cbOnClear&&this.__cbOnClear.length>0||null!=this.__cbOnceClear&&this.__cbOnceClear.length>0},toString:function(){return"GlyphQuad(c="+this.char+",i="+this.index+",l="+this.line+",x="+this.glyphX+",y="+this.glyphY+")"},clear:function(){this.emitClear(this),ceramic_Quad.prototype.clear.call(this)},unbindEvents:function(){ceramic_Quad.prototype.unbindEvents.call(this),this.offClear()},__class__:ceramic_GlyphQuad});var ceramic_Group=function(n){this.items=[],ceramic_Entity.call(this),null!=n&&(this.id=n),ceramic_App.app.groups.push(this)};t["ceramic.Group"]=ceramic_Group,ceramic_Group.__name__="ceramic.Group",ceramic_Group.__super__=ceramic_Entity,ceramic_Group.prototype=$extend(ceramic_Entity.prototype,{add:function(n){var e=this.items;-1!=e.indexOf(n)?ceramic_App.app.logger.warning("Cannot add item "+Std.string(n)+" to group, already inside group",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Group.hx",lineNumber:43,className:"ceramic.Group",methodName:"add"}):(e.push(n),n.onDestroy(this,$bind(this,this.itemDestroyed)))},remove:function(n){var e=this.items,t=e.indexOf(n);-1!=t?(e.splice(t,1),n.offDestroy($bind(this,this.itemDestroyed))):ceramic_App.app.logger.warning("Cannot remove item "+Std.string(n)+" from group, index is -1",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Group.hx",lineNumber:62,className:"ceramic.Group",methodName:"remove"})},contains:function(n){return-1!=this.items.indexOf(n)},itemDestroyed:function(n){this.remove(n)},clear:function(){var n=this.items;if(n.length>0){for(var e=n.length,t=ceramic_ArrayPool.pool(e),i=t.get(),r=0,l=e;r<l;){var s=r++;i.vector[s]=n[s]}for(r=0,l=e;r<l;){s=r++;var a=i.vector[s];a.offDestroy($bind(this,this.itemDestroyed)),a.destroy()}if(0!=n.length)if(n.length>0)n.splice(0,n.length);else n[-1]=null;t.release(i)}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),HxOverrides.remove(ceramic_App.app.groups,this),this.clear())},__class__:ceramic_Group});var ceramic_HashedString=function(){};t["ceramic.HashedString"]=ceramic_HashedString,ceramic_HashedString.__name__="ceramic.HashedString",ceramic_HashedString.encode=function(n){return haxe_crypto_Md5.encode(n)+""+n.length+";"+n},ceramic_HashedString.append=function(n,e){return n+ceramic_HashedString.encode(e)},ceramic_HashedString.decode=function(n){ceramic_HashedString._lastDecodeIncomplete=!1;for(var e=0,t=n.length,i=null;e<t;){for(var r=n.substring(e,e+32),l=e+=32;l<t&&59!=HxOverrides.cca(n,l);)++l;var s=Std.parseInt(n.substring(e,l));if(null==s||s<=0){ceramic_App.app.logger.warning("Failed to parse all encoded string: invalid section length",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:63,className:"ceramic.HashedString",methodName:"decode"}),ceramic_HashedString._lastDecodeIncomplete=!0;break}e=l+1;var a=n.substring(e,e+s);if(null==a){ceramic_App.app.logger.warning("Failed to parse all encoded string: null section",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:72,className:"ceramic.HashedString",methodName:"decode"}),ceramic_HashedString._lastDecodeIncomplete=!0;break}if(haxe_crypto_Md5.encode(a)!=r){ceramic_App.app.logger.warning("Failed to parse all encoded string: section hash mismatch",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:77,className:"ceramic.HashedString",methodName:"decode"}),ceramic_HashedString._lastDecodeIncomplete=!0;break}e+=s,null==i&&(i=new StringBuf),i.b+=null==a?"null":""+a}return null!=i?i.b:(ceramic_App.app.logger.error("Invalid encoded string",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/HashedString.hx",lineNumber:95,className:"ceramic.HashedString",methodName:"decode"}),ceramic_HashedString._lastDecodeIncomplete=!0,null)},ceramic_HashedString.prototype={isLastDecodeIncomplete:function(){return ceramic_HashedString._lastDecodeIncomplete},__class__:ceramic_HashedString};var ceramic_ImageAsset=function(n,e){this.reloadBecauseOfDensityChange=!1,this.defaultImageOptions=null,this.unobservedTexture=null,this.textureAutoruns=null,ceramic_Asset.call(this,"image",n,e),this.set_handleTexturesDensityChange(!0)};t["ceramic.ImageAsset"]=ceramic_ImageAsset,ceramic_ImageAsset.__name__="ceramic.ImageAsset",ceramic_ImageAsset.__super__=ceramic_Asset,ceramic_ImageAsset.prototype=$extend(ceramic_Asset.prototype,{emitReplaceTexture:function(n,e){var t=0;if(null!=this.__cbOnReplaceTexture&&(t+=this.__cbOnReplaceTexture.length),null!=this.__cbOnceReplaceTexture&&(t+=this.__cbOnceReplaceTexture.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnReplaceTexture)for(var s=0,a=this.__cbOnReplaceTexture.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnReplaceTexture[o],++l):--t}if(null!=this.__cbOnceReplaceTexture){var p=null,h=null;for(s=0,a=this.__cbOnceReplaceTexture.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceReplaceTexture[o],this.__cbOnceReplaceTexture[o]=null;var u=this.__cbOnceOwnerUnbindReplaceTexture[o];this.__cbOnceOwnerUnbindReplaceTexture[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindReplaceTexture[o]),h.push(this.__cbOnceReplaceTexture[o])}this.__cbOnceOwnerUnbindReplaceTexture=p,this.__cbOnceReplaceTexture=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onReplaceTexture:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceTexture because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceTexture(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReplaceTexture&&(this.__cbOnOwnerUnbindReplaceTexture=[]),this.__cbOnOwnerUnbindReplaceTexture.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReplaceTexture&&(this.__cbOnOwnerUnbindReplaceTexture=[]),this.__cbOnOwnerUnbindReplaceTexture.push(null);null==this.__cbOnReplaceTexture&&(this.__cbOnReplaceTexture=[]),this.__cbOnReplaceTexture.push(e)},onceReplaceTexture:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceTexture because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceTexture(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReplaceTexture&&(this.__cbOnceOwnerUnbindReplaceTexture=[]),this.__cbOnceOwnerUnbindReplaceTexture.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReplaceTexture&&(this.__cbOnceOwnerUnbindReplaceTexture=[]),this.__cbOnceOwnerUnbindReplaceTexture.push(null);null==this.__cbOnceReplaceTexture&&(this.__cbOnceReplaceTexture=[]),this.__cbOnceReplaceTexture.push(e)},offReplaceTexture:function(n){if(null!=n){var e;null!=this.__cbOnReplaceTexture&&-1!=(e=this.__cbOnReplaceTexture.indexOf(n))&&(this.__cbOnReplaceTexture.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReplaceTexture[e])&&l(),this.__cbOnOwnerUnbindReplaceTexture.splice(e,1)),null!=this.__cbOnceReplaceTexture&&-1!=(e=this.__cbOnceReplaceTexture.indexOf(n))&&(this.__cbOnceReplaceTexture.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReplaceTexture[e])&&l(),this.__cbOnceOwnerUnbindReplaceTexture.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceTexture){for(var t=0,i=this.__cbOnOwnerUnbindReplaceTexture.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReplaceTexture[r])&&l()}this.__cbOnOwnerUnbindReplaceTexture=null}if(null!=this.__cbOnceOwnerUnbindReplaceTexture){for(t=0,i=this.__cbOnceOwnerUnbindReplaceTexture.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReplaceTexture[r])&&l()}this.__cbOnceOwnerUnbindReplaceTexture=null}this.__cbOnReplaceTexture=null,this.__cbOnceReplaceTexture=null}},listensReplaceTexture:function(){return null!=this.__cbOnReplaceTexture&&this.__cbOnReplaceTexture.length>0||null!=this.__cbOnceReplaceTexture&&this.__cbOnceReplaceTexture.length>0},get_texture:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.textureAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.textureAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTexture},set_texture:function(n){var e=this.unobservedTexture;if(this.unobservedTexture=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextureChange(n,e);var t=this.textureAutoruns;if(null!=t){this.textureAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTexture:function(){var n=this.unobservedTexture;this.emitTextureChange(n,n);var e=this.textureAutoruns;if(null!=e){this.textureAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTextureChange:function(n,e){var t=0;if(null!=this.__cbOnTextureChange&&(t+=this.__cbOnTextureChange.length),null!=this.__cbOnceTextureChange&&(t+=this.__cbOnceTextureChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTextureChange)for(var s=0,a=this.__cbOnTextureChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTextureChange[o],++l):--t}if(null!=this.__cbOnceTextureChange){var p=null,h=null;for(s=0,a=this.__cbOnceTextureChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTextureChange[o],this.__cbOnceTextureChange[o]=null;var u=this.__cbOnceOwnerUnbindTextureChange[o];this.__cbOnceOwnerUnbindTextureChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTextureChange[o]),h.push(this.__cbOnceTextureChange[o])}this.__cbOnceOwnerUnbindTextureChange=p,this.__cbOnceTextureChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTextureChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event textureChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTextureChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTextureChange&&(this.__cbOnOwnerUnbindTextureChange=[]),this.__cbOnOwnerUnbindTextureChange.push(null);null==this.__cbOnTextureChange&&(this.__cbOnTextureChange=[]),this.__cbOnTextureChange.push(e)},onceTextureChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event textureChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTextureChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTextureChange&&(this.__cbOnceOwnerUnbindTextureChange=[]),this.__cbOnceOwnerUnbindTextureChange.push(null);null==this.__cbOnceTextureChange&&(this.__cbOnceTextureChange=[]),this.__cbOnceTextureChange.push(e)},offTextureChange:function(n){if(null!=n){var e;null!=this.__cbOnTextureChange&&-1!=(e=this.__cbOnTextureChange.indexOf(n))&&(this.__cbOnTextureChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTextureChange[e])&&l(),this.__cbOnOwnerUnbindTextureChange.splice(e,1)),null!=this.__cbOnceTextureChange&&-1!=(e=this.__cbOnceTextureChange.indexOf(n))&&(this.__cbOnceTextureChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTextureChange[e])&&l(),this.__cbOnceOwnerUnbindTextureChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTextureChange){for(var t=0,i=this.__cbOnOwnerUnbindTextureChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTextureChange[r])&&l()}this.__cbOnOwnerUnbindTextureChange=null}if(null!=this.__cbOnceOwnerUnbindTextureChange){for(t=0,i=this.__cbOnceOwnerUnbindTextureChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTextureChange[r])&&l()}this.__cbOnceOwnerUnbindTextureChange=null}this.__cbOnTextureChange=null,this.__cbOnceTextureChange=null}},listensTextureChange:function(){return null!=this.__cbOnTextureChange&&this.__cbOnTextureChange.length>0||null!=this.__cbOnceTextureChange&&this.__cbOnceTextureChange.length>0},load:function(){var n=this;this.set_status(a.LOADING);var e=this.reloadBecauseOfDensityChange;if(this.reloadBecauseOfDensityChange=!1,null==this.path)return ceramic_App.app.logger.warning("Cannot load image asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:41,className:"ceramic.ImageAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var t={};if(null!=this.owner&&(t.immediate=this.owner.immediate,t.loadMethod=this.owner.loadMethod),null!=this.defaultImageOptions)for(var i=0,r=Reflect.fields(this.defaultImageOptions);i<r.length;){var l=r[i];++i,t[l]=Reflect.field(this.defaultImageOptions,l)}if(null!=this.options)for(i=0,r=Reflect.fields(this.options);i<r.length;){l=r[i];++i,t[l]=Reflect.field(this.options,l)}var s=this.path,o=ceramic_Assets.realAssetPath(s,this.runtimeAssets),p=ceramic_Assets.getReloadCount(o);p>0&&(o+="?hot="+p,s+="?hot="+p),ceramic_App.app.logger.info("Load image "+s+" (density="+this.density+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:72,className:"ceramic.ImageAsset",methodName:"load"}),ceramic_App.app.backend.textures.load(o,t,(function(t){if(null!=t){var i=n.get_texture(),r=new ceramic_Texture(t,n.density);if(r.id="texture:"+s,n.set_texture(r),n.get_texture().asset=n,null!=i){n.get_texture().set_filter(i.filter),n.emitReplaceTexture(n.get_texture(),i);for(var l=0,o=[].concat(ceramic_App.app.visuals);l<o.length;){var p=o[l];if(++l,p._lifecycleState>=0)if(null!=p.asQuad){var h=p.asQuad;if(h._texture==i){var u=h.frameX,_=h.frameY,c=h.frameWidth,d=h.frameHeight,f=n.get_texture();h._texture!=f&&h._set_texture(f),(e||0!=u||0!=_||c!=i.width||d!=i.height)&&(h.frameX=u,h.frameY=_,h.frameWidth!=c&&(h.frameWidth=c,-1!=c&&h.set_width(c)),h.frameHeight!=d&&(h.frameHeight=d,-1!=d&&h.set_height(d)))}}else if(null!=p.asMesh){var x=p.asMesh;if(x.texture==i){var b=n.get_texture();x.texture!=b&&(null!=x.texture&&(x.texture.offDestroy($bind(x,x.textureDestroyed)),null!=x.texture.asset&&x.texture.asset.release()),x.texture=b,null!=x.texture&&(x.texture.onDestroy(x,$bind(x,x.textureDestroyed)),null!=x.texture.asset&&x.texture.asset.retain()))}}}i.asset=null,i.destroy()}n.set_status(a.READY),n.emitComplete(!0),n.handleTexturesDensityChange&&n.checkTexturesDensity()}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load texture at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:150,className:"ceramic.ImageAsset",methodName:"load"}),n.emitComplete(!1)}))},texturesDensityDidChange:function(n,e){this.get_status()==a.READY&&this.checkTexturesDensity()},checkTexturesDensity:function(){var n=this.path;this.computePath(),n!=this.path&&(ceramic_App.app.logger.info("Reload texture ("+n+" -> "+this.path+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:175,className:"ceramic.ImageAsset",methodName:"checkTexturesDensity"}),this.reloadBecauseOfDensityChange=!0,this.load())},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload texture (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ImageAsset.hx",lineNumber:197,className:"ceramic.ImageAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),null!=this.get_texture()&&(this.get_texture().destroy(),this.set_texture(null)))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offReplaceTexture(),this.offTextureChange()},__class__:ceramic_ImageAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})});var ceramic_Immediate=function(){this.immediateCallbacksLen=0,this.immediateCallbacksCapacity=0,this.immediateCallbacks=[]};t["ceramic.Immediate"]=ceramic_Immediate,ceramic_Immediate.__name__="ceramic.Immediate",ceramic_Immediate.prototype={push:function(n){if(null==n)throw haxe_Exception.thrown("Immediate callback should not be null!");this.immediateCallbacksLen<this.immediateCallbacksCapacity?(this.immediateCallbacks[this.immediateCallbacksLen]=n,this.immediateCallbacksLen++):(this.immediateCallbacks[this.immediateCallbacksLen++]=n,this.immediateCallbacksCapacity++)},flush:function(){for(var n=!1;this.immediateCallbacksLen>0;){n=!0;var e=ceramic_ArrayPool.pool(this.immediateCallbacksLen),t=e.get(),i=this.immediateCallbacksLen;this.immediateCallbacksLen=0;for(var r=0,l=i;r<l;){var s=r++;t.vector[s]=this.immediateCallbacks[s],this.immediateCallbacks[s]=null}for(var a=0,o=i;a<o;){var p=a++;(0,t.vector[p])()}e.release(t)}return n},__class__:ceramic_Immediate};var ceramic_InitSettings=function(n){this.settings=n};t["ceramic.InitSettings"]=ceramic_InitSettings,ceramic_InitSettings.__name__="ceramic.InitSettings",ceramic_InitSettings.prototype={get_targetWidth:function(){return this.settings.get_targetWidth()},set_targetWidth:function(n){return this.settings.set_targetWidth(n)},get_targetHeight:function(){return this.settings.get_targetHeight()},set_targetHeight:function(n){return this.settings.set_targetHeight(n)},targetSize:function(n,e){this.settings.set_targetWidth(n),this.settings.set_targetHeight(e)},get_windowWidth:function(){return this.settings.get_windowWidth()},set_windowWidth:function(n){return this.settings.set_windowWidth(n)},get_windowHeight:function(){return this.settings.get_windowHeight()},set_windowHeight:function(n){return this.settings.set_windowHeight(n)},windowSize:function(n,e){this.settings.set_windowWidth(n),this.settings.set_windowHeight(e)},get_targetDensity:function(){return this.settings.get_targetDensity()},set_targetDensity:function(n){return this.settings.set_targetDensity(n)},get_background:function(){return this.settings.get_background()},set_background:function(n){return this.settings.set_background(n)},get_scaling:function(){return this.settings.get_scaling()},set_scaling:function(n){return this.settings.set_scaling(n)},get_title:function(){return this.settings.get_title()},set_title:function(n){return this.settings.set_title(n)},get_fullscreen:function(){return this.settings.get_fullscreen()},set_fullscreen:function(n){return this.settings.set_fullscreen(n)},get_targetFps:function(){return this.settings.get_targetFps()},set_targetFps:function(n){return this.settings.set_targetFps(n)},get_maxDelta:function(){return this.settings.get_maxDelta()},set_maxDelta:function(n){return this.settings.set_maxDelta(n)},get_overrideDelta:function(){return this.settings.get_overrideDelta()},set_overrideDelta:function(n){return this.settings.set_overrideDelta(n)},get_orientation:function(){return this.settings.orientation},set_orientation:function(n){return this.settings.orientation=n},get_antialiasing:function(){return this.settings.antialiasing},set_antialiasing:function(n){return this.settings.antialiasing=n},get_collections:function(){return this.settings.collections},set_collections:function(n){return this.settings.collections=n},get_appInfo:function(){return this.settings.appInfo},set_appInfo:function(n){return this.settings.appInfo=n},get_resizable:function(){return this.settings.resizable},set_resizable:function(n){return this.settings.resizable=n},get_assetsPath:function(){return this.settings.assetsPath},set_assetsPath:function(n){return this.settings.assetsPath=n},get_backend:function(){return this.settings.backend},set_backend:function(n){return this.settings.backend=n},get_defaultFont:function(){return this.settings.defaultFont},set_defaultFont:function(n){return this.settings.defaultFont=n},get_defaultShader:function(){return this.settings.defaultShader},set_defaultShader:function(n){return this.settings.defaultShader=n},__class__:ceramic_InitSettings,__properties__:{set_defaultShader:"set_defaultShader",get_defaultShader:"get_defaultShader",set_defaultFont:"set_defaultFont",get_defaultFont:"get_defaultFont",set_backend:"set_backend",get_backend:"get_backend",set_assetsPath:"set_assetsPath",get_assetsPath:"get_assetsPath",set_resizable:"set_resizable",get_resizable:"get_resizable",set_appInfo:"set_appInfo",get_appInfo:"get_appInfo",set_collections:"set_collections",get_collections:"get_collections",set_antialiasing:"set_antialiasing",get_antialiasing:"get_antialiasing",set_orientation:"set_orientation",get_orientation:"get_orientation",set_overrideDelta:"set_overrideDelta",get_overrideDelta:"get_overrideDelta",set_maxDelta:"set_maxDelta",get_maxDelta:"get_maxDelta",set_targetFps:"set_targetFps",get_targetFps:"get_targetFps",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_title:"set_title",get_title:"get_title",set_scaling:"set_scaling",get_scaling:"get_scaling",set_background:"set_background",get_background:"get_background",set_targetDensity:"set_targetDensity",get_targetDensity:"get_targetDensity",set_windowHeight:"set_windowHeight",get_windowHeight:"get_windowHeight",set_windowWidth:"set_windowWidth",get_windowWidth:"get_windowWidth",set_targetHeight:"set_targetHeight",get_targetHeight:"get_targetHeight",set_targetWidth:"set_targetWidth",get_targetWidth:"get_targetWidth"}};var ceramic_Input=function(){this.activeGamepads=[],this.gamepadNames=new ceramic_IntMap,this.gamepadGyroKeys=[],this.gamepadGyroDeltas=new ceramic_IntMap;var n=new haxe_ds_IntMap;this.gamepadAxisValues=n;n=new haxe_ds_IntMap;this.pressedGamepadButtons=n;n=new haxe_ds_IntMap;this.pressedKeyCodes=n;n=new haxe_ds_IntMap;this.pressedScanCodes=n,ceramic_Entity.call(this)};t["ceramic.Input"]=ceramic_Input,ceramic_Input.__name__="ceramic.Input",ceramic_Input.__super__=ceramic_Entity,ceramic_Input.prototype=$extend(ceramic_Entity.prototype,{emitKeyDown:function(n){this.willEmitKeyDown(n);var e=0;if(null!=this.__cbOnKeyDown&&(e+=this.__cbOnKeyDown.length),null!=this.__cbOnceKeyDown&&(e+=this.__cbOnceKeyDown.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnKeyDown)for(var l=0,s=this.__cbOnKeyDown.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnKeyDown[a],++r):--e}if(null!=this.__cbOnceKeyDown){var o=null,p=null;for(l=0,s=this.__cbOnceKeyDown.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceKeyDown[a],this.__cbOnceKeyDown[a]=null;var h=this.__cbOnceOwnerUnbindKeyDown[a];this.__cbOnceOwnerUnbindKeyDown[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindKeyDown[a]),p.push(this.__cbOnceKeyDown[a])}this.__cbOnceOwnerUnbindKeyDown=o,this.__cbOnceKeyDown=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onKeyDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindKeyDown&&(this.__cbOnOwnerUnbindKeyDown=[]),this.__cbOnOwnerUnbindKeyDown.push(null);null==this.__cbOnKeyDown&&(this.__cbOnKeyDown=[]),this.__cbOnKeyDown.push(e)},onceKeyDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindKeyDown&&(this.__cbOnceOwnerUnbindKeyDown=[]),this.__cbOnceOwnerUnbindKeyDown.push(null);null==this.__cbOnceKeyDown&&(this.__cbOnceKeyDown=[]),this.__cbOnceKeyDown.push(e)},offKeyDown:function(n){if(null!=n){var e;null!=this.__cbOnKeyDown&&-1!=(e=this.__cbOnKeyDown.indexOf(n))&&(this.__cbOnKeyDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindKeyDown[e])&&l(),this.__cbOnOwnerUnbindKeyDown.splice(e,1)),null!=this.__cbOnceKeyDown&&-1!=(e=this.__cbOnceKeyDown.indexOf(n))&&(this.__cbOnceKeyDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindKeyDown[e])&&l(),this.__cbOnceOwnerUnbindKeyDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindKeyDown){for(var t=0,i=this.__cbOnOwnerUnbindKeyDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindKeyDown[r])&&l()}this.__cbOnOwnerUnbindKeyDown=null}if(null!=this.__cbOnceOwnerUnbindKeyDown){for(t=0,i=this.__cbOnceOwnerUnbindKeyDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindKeyDown[r])&&l()}this.__cbOnceOwnerUnbindKeyDown=null}this.__cbOnKeyDown=null,this.__cbOnceKeyDown=null}},listensKeyDown:function(){return null!=this.__cbOnKeyDown&&this.__cbOnKeyDown.length>0||null!=this.__cbOnceKeyDown&&this.__cbOnceKeyDown.length>0},emitKeyUp:function(n){this.willEmitKeyUp(n);var e=0;if(null!=this.__cbOnKeyUp&&(e+=this.__cbOnKeyUp.length),null!=this.__cbOnceKeyUp&&(e+=this.__cbOnceKeyUp.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnKeyUp)for(var l=0,s=this.__cbOnKeyUp.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnKeyUp[a],++r):--e}if(null!=this.__cbOnceKeyUp){var o=null,p=null;for(l=0,s=this.__cbOnceKeyUp.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceKeyUp[a],this.__cbOnceKeyUp[a]=null;var h=this.__cbOnceOwnerUnbindKeyUp[a];this.__cbOnceOwnerUnbindKeyUp[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindKeyUp[a]),p.push(this.__cbOnceKeyUp[a])}this.__cbOnceOwnerUnbindKeyUp=o,this.__cbOnceKeyUp=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onKeyUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindKeyUp&&(this.__cbOnOwnerUnbindKeyUp=[]),this.__cbOnOwnerUnbindKeyUp.push(null);null==this.__cbOnKeyUp&&(this.__cbOnKeyUp=[]),this.__cbOnKeyUp.push(e)},onceKeyUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event keyUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offKeyUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindKeyUp&&(this.__cbOnceOwnerUnbindKeyUp=[]),this.__cbOnceOwnerUnbindKeyUp.push(null);null==this.__cbOnceKeyUp&&(this.__cbOnceKeyUp=[]),this.__cbOnceKeyUp.push(e)},offKeyUp:function(n){if(null!=n){var e;null!=this.__cbOnKeyUp&&-1!=(e=this.__cbOnKeyUp.indexOf(n))&&(this.__cbOnKeyUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindKeyUp[e])&&l(),this.__cbOnOwnerUnbindKeyUp.splice(e,1)),null!=this.__cbOnceKeyUp&&-1!=(e=this.__cbOnceKeyUp.indexOf(n))&&(this.__cbOnceKeyUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindKeyUp[e])&&l(),this.__cbOnceOwnerUnbindKeyUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindKeyUp){for(var t=0,i=this.__cbOnOwnerUnbindKeyUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindKeyUp[r])&&l()}this.__cbOnOwnerUnbindKeyUp=null}if(null!=this.__cbOnceOwnerUnbindKeyUp){for(t=0,i=this.__cbOnceOwnerUnbindKeyUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindKeyUp[r])&&l()}this.__cbOnceOwnerUnbindKeyUp=null}this.__cbOnKeyUp=null,this.__cbOnceKeyUp=null}},listensKeyUp:function(){return null!=this.__cbOnKeyUp&&this.__cbOnKeyUp.length>0||null!=this.__cbOnceKeyUp&&this.__cbOnceKeyUp.length>0},emitGamepadAxis:function(n,e,t){var i=32*n+e;this.gamepadAxisValues.h[0|i]=t;var r=0;if(null!=this.__cbOnGamepadAxis&&(r+=this.__cbOnGamepadAxis.length),null!=this.__cbOnceGamepadAxis&&(r+=this.__cbOnceGamepadAxis.length),r>0){var l=ceramic_ArrayPool.pool(r),s=l.get(),a=0;if(null!=this.__cbOnGamepadAxis)for(var o=0,p=this.__cbOnGamepadAxis.length;o<p;){var h=o++;!0?(s.vector[a]=this.__cbOnGamepadAxis[h],++a):--r}if(null!=this.__cbOnceGamepadAxis){var u=null,_=null;for(o=0,p=this.__cbOnceGamepadAxis.length;o<p;){h=o++;if(!0){s.vector[a]=this.__cbOnceGamepadAxis[h],this.__cbOnceGamepadAxis[h]=null;var c=this.__cbOnceOwnerUnbindGamepadAxis[h];this.__cbOnceOwnerUnbindGamepadAxis[h]=null,null!=c&&c(),++a}else--r,null==u&&(u=[],_=[],[]),u.push(this.__cbOnceOwnerUnbindGamepadAxis[h]),_.push(this.__cbOnceGamepadAxis[h])}this.__cbOnceOwnerUnbindGamepadAxis=u,this.__cbOnceGamepadAxis=_}for(o=0,p=r;o<p;){a=o++;(0,s.vector[a])(n,e,t)}l.release(s),s=null}},onGamepadAxis:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadAxis(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadAxis&&(this.__cbOnOwnerUnbindGamepadAxis=[]),this.__cbOnOwnerUnbindGamepadAxis.push(null);null==this.__cbOnGamepadAxis&&(this.__cbOnGamepadAxis=[]),this.__cbOnGamepadAxis.push(e)},onceGamepadAxis:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadAxis because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadAxis(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadAxis&&(this.__cbOnceOwnerUnbindGamepadAxis=[]),this.__cbOnceOwnerUnbindGamepadAxis.push(null);null==this.__cbOnceGamepadAxis&&(this.__cbOnceGamepadAxis=[]),this.__cbOnceGamepadAxis.push(e)},offGamepadAxis:function(n){if(null!=n){var e;null!=this.__cbOnGamepadAxis&&-1!=(e=this.__cbOnGamepadAxis.indexOf(n))&&(this.__cbOnGamepadAxis.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadAxis[e])&&l(),this.__cbOnOwnerUnbindGamepadAxis.splice(e,1)),null!=this.__cbOnceGamepadAxis&&-1!=(e=this.__cbOnceGamepadAxis.indexOf(n))&&(this.__cbOnceGamepadAxis.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadAxis[e])&&l(),this.__cbOnceOwnerUnbindGamepadAxis.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadAxis){for(var t=0,i=this.__cbOnOwnerUnbindGamepadAxis.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadAxis[r])&&l()}this.__cbOnOwnerUnbindGamepadAxis=null}if(null!=this.__cbOnceOwnerUnbindGamepadAxis){for(t=0,i=this.__cbOnceOwnerUnbindGamepadAxis.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadAxis[r])&&l()}this.__cbOnceOwnerUnbindGamepadAxis=null}this.__cbOnGamepadAxis=null,this.__cbOnceGamepadAxis=null}},listensGamepadAxis:function(){return null!=this.__cbOnGamepadAxis&&this.__cbOnGamepadAxis.length>0||null!=this.__cbOnceGamepadAxis&&this.__cbOnceGamepadAxis.length>0},emitGamepadDown:function(n,e){this.willEmitGamepadDown(n,e);var t=0;if(null!=this.__cbOnGamepadDown&&(t+=this.__cbOnGamepadDown.length),null!=this.__cbOnceGamepadDown&&(t+=this.__cbOnceGamepadDown.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnGamepadDown)for(var s=0,a=this.__cbOnGamepadDown.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnGamepadDown[o],++l):--t}if(null!=this.__cbOnceGamepadDown){var p=null,h=null;for(s=0,a=this.__cbOnceGamepadDown.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceGamepadDown[o],this.__cbOnceGamepadDown[o]=null;var u=this.__cbOnceOwnerUnbindGamepadDown[o];this.__cbOnceOwnerUnbindGamepadDown[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindGamepadDown[o]),h.push(this.__cbOnceGamepadDown[o])}this.__cbOnceOwnerUnbindGamepadDown=p,this.__cbOnceGamepadDown=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onGamepadDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadDown&&(this.__cbOnOwnerUnbindGamepadDown=[]),this.__cbOnOwnerUnbindGamepadDown.push(null);null==this.__cbOnGamepadDown&&(this.__cbOnGamepadDown=[]),this.__cbOnGamepadDown.push(e)},onceGamepadDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadDown&&(this.__cbOnceOwnerUnbindGamepadDown=[]),this.__cbOnceOwnerUnbindGamepadDown.push(null);null==this.__cbOnceGamepadDown&&(this.__cbOnceGamepadDown=[]),this.__cbOnceGamepadDown.push(e)},offGamepadDown:function(n){if(null!=n){var e;null!=this.__cbOnGamepadDown&&-1!=(e=this.__cbOnGamepadDown.indexOf(n))&&(this.__cbOnGamepadDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadDown[e])&&l(),this.__cbOnOwnerUnbindGamepadDown.splice(e,1)),null!=this.__cbOnceGamepadDown&&-1!=(e=this.__cbOnceGamepadDown.indexOf(n))&&(this.__cbOnceGamepadDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadDown[e])&&l(),this.__cbOnceOwnerUnbindGamepadDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDown){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadDown[r])&&l()}this.__cbOnOwnerUnbindGamepadDown=null}if(null!=this.__cbOnceOwnerUnbindGamepadDown){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadDown[r])&&l()}this.__cbOnceOwnerUnbindGamepadDown=null}this.__cbOnGamepadDown=null,this.__cbOnceGamepadDown=null}},listensGamepadDown:function(){return null!=this.__cbOnGamepadDown&&this.__cbOnGamepadDown.length>0||null!=this.__cbOnceGamepadDown&&this.__cbOnceGamepadDown.length>0},emitGamepadUp:function(n,e){this.willEmitGamepadUp(n,e);var t=0;if(null!=this.__cbOnGamepadUp&&(t+=this.__cbOnGamepadUp.length),null!=this.__cbOnceGamepadUp&&(t+=this.__cbOnceGamepadUp.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnGamepadUp)for(var s=0,a=this.__cbOnGamepadUp.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnGamepadUp[o],++l):--t}if(null!=this.__cbOnceGamepadUp){var p=null,h=null;for(s=0,a=this.__cbOnceGamepadUp.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceGamepadUp[o],this.__cbOnceGamepadUp[o]=null;var u=this.__cbOnceOwnerUnbindGamepadUp[o];this.__cbOnceOwnerUnbindGamepadUp[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindGamepadUp[o]),h.push(this.__cbOnceGamepadUp[o])}this.__cbOnceOwnerUnbindGamepadUp=p,this.__cbOnceGamepadUp=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onGamepadUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadUp&&(this.__cbOnOwnerUnbindGamepadUp=[]),this.__cbOnOwnerUnbindGamepadUp.push(null);null==this.__cbOnGamepadUp&&(this.__cbOnGamepadUp=[]),this.__cbOnGamepadUp.push(e)},onceGamepadUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadUp&&(this.__cbOnceOwnerUnbindGamepadUp=[]),this.__cbOnceOwnerUnbindGamepadUp.push(null);null==this.__cbOnceGamepadUp&&(this.__cbOnceGamepadUp=[]),this.__cbOnceGamepadUp.push(e)},offGamepadUp:function(n){if(null!=n){var e;null!=this.__cbOnGamepadUp&&-1!=(e=this.__cbOnGamepadUp.indexOf(n))&&(this.__cbOnGamepadUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadUp[e])&&l(),this.__cbOnOwnerUnbindGamepadUp.splice(e,1)),null!=this.__cbOnceGamepadUp&&-1!=(e=this.__cbOnceGamepadUp.indexOf(n))&&(this.__cbOnceGamepadUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadUp[e])&&l(),this.__cbOnceOwnerUnbindGamepadUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadUp){for(var t=0,i=this.__cbOnOwnerUnbindGamepadUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadUp[r])&&l()}this.__cbOnOwnerUnbindGamepadUp=null}if(null!=this.__cbOnceOwnerUnbindGamepadUp){for(t=0,i=this.__cbOnceOwnerUnbindGamepadUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadUp[r])&&l()}this.__cbOnceOwnerUnbindGamepadUp=null}this.__cbOnGamepadUp=null,this.__cbOnceGamepadUp=null}},listensGamepadUp:function(){return null!=this.__cbOnGamepadUp&&this.__cbOnGamepadUp.length>0||null!=this.__cbOnceGamepadUp&&this.__cbOnceGamepadUp.length>0},emitGamepadGyro:function(n,e,t,i){this.willEmitGamepadGyro(n,e,t,i);var r=0;if(null!=this.__cbOnGamepadGyro&&(r+=this.__cbOnGamepadGyro.length),null!=this.__cbOnceGamepadGyro&&(r+=this.__cbOnceGamepadGyro.length),r>0){var l=ceramic_ArrayPool.pool(r),s=l.get(),a=0;if(null!=this.__cbOnGamepadGyro)for(var o=0,p=this.__cbOnGamepadGyro.length;o<p;){var h=o++;!0?(s.vector[a]=this.__cbOnGamepadGyro[h],++a):--r}if(null!=this.__cbOnceGamepadGyro){var u=null,_=null;for(o=0,p=this.__cbOnceGamepadGyro.length;o<p;){h=o++;if(!0){s.vector[a]=this.__cbOnceGamepadGyro[h],this.__cbOnceGamepadGyro[h]=null;var c=this.__cbOnceOwnerUnbindGamepadGyro[h];this.__cbOnceOwnerUnbindGamepadGyro[h]=null,null!=c&&c(),++a}else--r,null==u&&(u=[],_=[],[]),u.push(this.__cbOnceOwnerUnbindGamepadGyro[h]),_.push(this.__cbOnceGamepadGyro[h])}this.__cbOnceOwnerUnbindGamepadGyro=u,this.__cbOnceGamepadGyro=_}for(o=0,p=r;o<p;){a=o++;(0,s.vector[a])(n,e,t,i)}l.release(s),s=null}},onGamepadGyro:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadGyro(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadGyro&&(this.__cbOnOwnerUnbindGamepadGyro=[]),this.__cbOnOwnerUnbindGamepadGyro.push(null);null==this.__cbOnGamepadGyro&&(this.__cbOnGamepadGyro=[]),this.__cbOnGamepadGyro.push(e)},onceGamepadGyro:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadGyro because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadGyro(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadGyro&&(this.__cbOnceOwnerUnbindGamepadGyro=[]),this.__cbOnceOwnerUnbindGamepadGyro.push(null);null==this.__cbOnceGamepadGyro&&(this.__cbOnceGamepadGyro=[]),this.__cbOnceGamepadGyro.push(e)},offGamepadGyro:function(n){if(null!=n){var e;null!=this.__cbOnGamepadGyro&&-1!=(e=this.__cbOnGamepadGyro.indexOf(n))&&(this.__cbOnGamepadGyro.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadGyro[e])&&l(),this.__cbOnOwnerUnbindGamepadGyro.splice(e,1)),null!=this.__cbOnceGamepadGyro&&-1!=(e=this.__cbOnceGamepadGyro.indexOf(n))&&(this.__cbOnceGamepadGyro.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadGyro[e])&&l(),this.__cbOnceOwnerUnbindGamepadGyro.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadGyro){for(var t=0,i=this.__cbOnOwnerUnbindGamepadGyro.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadGyro[r])&&l()}this.__cbOnOwnerUnbindGamepadGyro=null}if(null!=this.__cbOnceOwnerUnbindGamepadGyro){for(t=0,i=this.__cbOnceOwnerUnbindGamepadGyro.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadGyro[r])&&l()}this.__cbOnceOwnerUnbindGamepadGyro=null}this.__cbOnGamepadGyro=null,this.__cbOnceGamepadGyro=null}},listensGamepadGyro:function(){return null!=this.__cbOnGamepadGyro&&this.__cbOnGamepadGyro.length>0||null!=this.__cbOnceGamepadGyro&&this.__cbOnceGamepadGyro.length>0},emitGamepadEnable:function(n,e){this.willEmitGamepadEnable(n,e);var t=0;if(null!=this.__cbOnGamepadEnable&&(t+=this.__cbOnGamepadEnable.length),null!=this.__cbOnceGamepadEnable&&(t+=this.__cbOnceGamepadEnable.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnGamepadEnable)for(var s=0,a=this.__cbOnGamepadEnable.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnGamepadEnable[o],++l):--t}if(null!=this.__cbOnceGamepadEnable){var p=null,h=null;for(s=0,a=this.__cbOnceGamepadEnable.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceGamepadEnable[o],this.__cbOnceGamepadEnable[o]=null;var u=this.__cbOnceOwnerUnbindGamepadEnable[o];this.__cbOnceOwnerUnbindGamepadEnable[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindGamepadEnable[o]),h.push(this.__cbOnceGamepadEnable[o])}this.__cbOnceOwnerUnbindGamepadEnable=p,this.__cbOnceGamepadEnable=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onGamepadEnable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadEnable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadEnable&&(this.__cbOnOwnerUnbindGamepadEnable=[]),this.__cbOnOwnerUnbindGamepadEnable.push(null);null==this.__cbOnGamepadEnable&&(this.__cbOnGamepadEnable=[]),this.__cbOnGamepadEnable.push(e)},onceGamepadEnable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadEnable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadEnable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadEnable&&(this.__cbOnceOwnerUnbindGamepadEnable=[]),this.__cbOnceOwnerUnbindGamepadEnable.push(null);null==this.__cbOnceGamepadEnable&&(this.__cbOnceGamepadEnable=[]),this.__cbOnceGamepadEnable.push(e)},offGamepadEnable:function(n){if(null!=n){var e;null!=this.__cbOnGamepadEnable&&-1!=(e=this.__cbOnGamepadEnable.indexOf(n))&&(this.__cbOnGamepadEnable.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadEnable[e])&&l(),this.__cbOnOwnerUnbindGamepadEnable.splice(e,1)),null!=this.__cbOnceGamepadEnable&&-1!=(e=this.__cbOnceGamepadEnable.indexOf(n))&&(this.__cbOnceGamepadEnable.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadEnable[e])&&l(),this.__cbOnceOwnerUnbindGamepadEnable.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadEnable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadEnable.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadEnable[r])&&l()}this.__cbOnOwnerUnbindGamepadEnable=null}if(null!=this.__cbOnceOwnerUnbindGamepadEnable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadEnable.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadEnable[r])&&l()}this.__cbOnceOwnerUnbindGamepadEnable=null}this.__cbOnGamepadEnable=null,this.__cbOnceGamepadEnable=null}},listensGamepadEnable:function(){return null!=this.__cbOnGamepadEnable&&this.__cbOnGamepadEnable.length>0||null!=this.__cbOnceGamepadEnable&&this.__cbOnceGamepadEnable.length>0},emitGamepadDisable:function(n){this.willEmitGamepadDisable(n);var e=0;if(null!=this.__cbOnGamepadDisable&&(e+=this.__cbOnGamepadDisable.length),null!=this.__cbOnceGamepadDisable&&(e+=this.__cbOnceGamepadDisable.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnGamepadDisable)for(var l=0,s=this.__cbOnGamepadDisable.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnGamepadDisable[a],++r):--e}if(null!=this.__cbOnceGamepadDisable){var o=null,p=null;for(l=0,s=this.__cbOnceGamepadDisable.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceGamepadDisable[a],this.__cbOnceGamepadDisable[a]=null;var h=this.__cbOnceOwnerUnbindGamepadDisable[a];this.__cbOnceOwnerUnbindGamepadDisable[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindGamepadDisable[a]),p.push(this.__cbOnceGamepadDisable[a])}this.__cbOnceOwnerUnbindGamepadDisable=o,this.__cbOnceGamepadDisable=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onGamepadDisable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDisable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGamepadDisable&&(this.__cbOnOwnerUnbindGamepadDisable=[]),this.__cbOnOwnerUnbindGamepadDisable.push(null);null==this.__cbOnGamepadDisable&&(this.__cbOnGamepadDisable=[]),this.__cbOnGamepadDisable.push(e)},onceGamepadDisable:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event gamepadDisable because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGamepadDisable(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGamepadDisable&&(this.__cbOnceOwnerUnbindGamepadDisable=[]),this.__cbOnceOwnerUnbindGamepadDisable.push(null);null==this.__cbOnceGamepadDisable&&(this.__cbOnceGamepadDisable=[]),this.__cbOnceGamepadDisable.push(e)},offGamepadDisable:function(n){if(null!=n){var e;null!=this.__cbOnGamepadDisable&&-1!=(e=this.__cbOnGamepadDisable.indexOf(n))&&(this.__cbOnGamepadDisable.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGamepadDisable[e])&&l(),this.__cbOnOwnerUnbindGamepadDisable.splice(e,1)),null!=this.__cbOnceGamepadDisable&&-1!=(e=this.__cbOnceGamepadDisable.indexOf(n))&&(this.__cbOnceGamepadDisable.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGamepadDisable[e])&&l(),this.__cbOnceOwnerUnbindGamepadDisable.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGamepadDisable){for(var t=0,i=this.__cbOnOwnerUnbindGamepadDisable.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGamepadDisable[r])&&l()}this.__cbOnOwnerUnbindGamepadDisable=null}if(null!=this.__cbOnceOwnerUnbindGamepadDisable){for(t=0,i=this.__cbOnceOwnerUnbindGamepadDisable.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGamepadDisable[r])&&l()}this.__cbOnceOwnerUnbindGamepadDisable=null}this.__cbOnGamepadDisable=null,this.__cbOnceGamepadDisable=null}},listensGamepadDisable:function(){return null!=this.__cbOnGamepadDisable&&this.__cbOnGamepadDisable.length>0||null!=this.__cbOnceGamepadDisable&&this.__cbOnceGamepadDisable.length>0},resetDeltas:function(){for(;this.gamepadGyroKeys.length>0;){var n=this.gamepadGyroKeys.pop(),e=this.gamepadGyroDeltas.get(n);null!=e&&(e[0]=0,e[1]=0,e[2]=0)}},willEmitKeyDown:function(n){var e=this,t=null!=(r=this.pressedScanCodes.h[0|n.scanCode])?r:0,i=null!=(r=this.pressedKeyCodes.h[0|n.keyCode])?r:0;-1==t&&(t=0,i=0);var r=t+1;this.pressedScanCodes.h[0|n.scanCode]=r;r=i+1;this.pressedKeyCodes.h[0|n.keyCode]=r,0==t&&ceramic_App.app.beginUpdateCallbacks.push((function(){var t;1==(null!=(t=e.pressedScanCodes.h[0|n.scanCode])?t:0)&&(e.pressedScanCodes.h[0|n.scanCode]=2),1==(null!=(t=e.pressedKeyCodes.h[0|n.keyCode])?t:0)&&(e.pressedKeyCodes.h[0|n.keyCode]=2)}))},willEmitKeyUp:function(n){var e=this,t=this.pressedScanCodes.h[0|n.scanCode];0!=(null!=t?t:0)&&(this.pressedScanCodes.h[0|n.scanCode]=-1,this.pressedKeyCodes.h[0|n.keyCode]=-1,ceramic_App.app.beginUpdateCallbacks.push((function(){var t;-1==(null!=(t=e.pressedScanCodes.h[0|n.scanCode])?t:0)&&(e.pressedScanCodes.h[0|n.scanCode]=0),-1==(null!=(t=e.pressedKeyCodes.h[0|n.keyCode])?t:0)&&(e.pressedKeyCodes.h[0|n.keyCode]=0)})))},_keyPressed:function(n){var e=this.pressedKeyCodes.h[0|n];return(null!=e?e:0)>0},_keyJustPressed:function(n){var e=this.pressedKeyCodes.h[0|n];return 1==(null!=e?e:0)},_keyJustReleased:function(n){var e=this.pressedKeyCodes.h[0|n];return-1==(null!=e?e:0)},_scanPressed:function(n){var e=this.pressedScanCodes.h[0|n];return(null!=e?e:0)>0},_scanJustPressed:function(n){var e=this.pressedScanCodes.h[0|n];return 1==(null!=e?e:0)},_scanJustReleased:function(n){var e=this.pressedScanCodes.h[0|n];return-1==(null!=e?e:0)},willEmitGamepadEnable:function(n,e){for(var t=32*n,i=0;i<32;){var r=t+i++;this.pressedGamepadButtons.h[0|r]=0,this.gamepadAxisValues.h[0|r]=0}-1==this.activeGamepads.indexOf(n)&&this.activeGamepads.push(n),this.gamepadNames.set(n,e)},willEmitGamepadDisable:function(n){for(var e=32*n,t=0;t<32;){var i=t++,r=e+i,l=this.pressedGamepadButtons.h[0|r];(null!=l?l:0)>0&&this.emitGamepadUp(n,i);var s=this.gamepadAxisValues.h[0|r],a=null!=s?s:0;0!=a&&this.emitGamepadAxis(n,i,a)}var o=this.activeGamepads.indexOf(n);-1!=o&&this.activeGamepads.splice(o,1),this.gamepadNames.remove(n)},willEmitGamepadDown:function(n,e){var t=this,i=32*n+e,r=null!=(l=this.pressedGamepadButtons.h[0|i])?l:0;-1==r&&(r=0);var l=r+1;this.pressedGamepadButtons.h[0|i]=l,0==r&&ceramic_App.app.beginUpdateCallbacks.push((function(){var n=t.pressedGamepadButtons.h[0|i];1==(null!=n?n:0)&&(t.pressedGamepadButtons.h[0|i]=2)}))},willEmitGamepadUp:function(n,e){var t=this,i=32*n+e;this.pressedGamepadButtons.h[0|i]=-1,ceramic_App.app.beginUpdateCallbacks.push((function(){var n=t.pressedGamepadButtons.h[0|i];-1==(null!=n?n:0)&&(t.pressedGamepadButtons.h[0|i]=0)}))},willEmitGamepadGyro:function(n,e,t,i){var r=n,l=this.gamepadGyroDeltas.get(r);null==l&&(l=[0,0,0],this.gamepadGyroDeltas.set(r,l)),-1==this.gamepadGyroKeys.indexOf(r)&&this.gamepadGyroKeys.push(r),l[0]+=e,l[1]+=t,l[2]+=i},_gamepadPressed:function(n,e){var t=32*n+e,i=this.pressedGamepadButtons.h[0|t];return(null!=i?i:0)>0},_gamepadJustPressed:function(n,e){var t=32*n+e,i=this.pressedGamepadButtons.h[0|t];return 1==(null!=i?i:0)},_gamepadJustReleased:function(n,e){var t=32*n+e,i=this.pressedGamepadButtons.h[0|t];return-1==(null!=i?i:0)},willEmitGamepadAxis:function(n,e,t){var i=32*n+e;this.gamepadAxisValues.h[0|i]=t},gamepadAxisValue:function(n,e){var t=32*n+e,i=this.gamepadAxisValues.h[0|t];return null!=i?i:0},gamepadGyroDeltaX:function(n){var e=n,t=this.gamepadGyroDeltas.get(e);return null!=t?t[0]:0},gamepadGyroDeltaY:function(n){var e=n,t=this.gamepadGyroDeltas.get(e);return null!=t?t[1]:0},gamepadGyroDeltaZ:function(n){var e=n,t=this.gamepadGyroDeltas.get(e);return null!=t?t[2]:0},startGamepadRumble:function(n,e,t,i){ceramic_App.app.backend.input.startGamepadRumble(n,t,i,e)},stopGamepadRumble:function(n){ceramic_App.app.backend.input.stopGamepadRumble(n)},gamepadName:function(n){return this.gamepadNames.get(n)},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offKeyDown(),this.offKeyUp(),this.offGamepadAxis(),this.offGamepadDown(),this.offGamepadUp(),this.offGamepadGyro(),this.offGamepadEnable(),this.offGamepadDisable()},__class__:ceramic_Input});var ceramic_IntMap=function(n,e,t){null==t&&(t=!1),null==e&&(e=.5),null==n&&(n=16),this.iterableKeys=null,this.nextFreeIndex=0;var i=new haxe_ds_IntMap;this.keys=i;i=new Array(n);this.values=i,t&&(this.iterableKeys=[])};t["ceramic.IntMap"]=ceramic_IntMap,ceramic_IntMap.__name__="ceramic.IntMap",ceramic_IntMap.prototype={get:function(n){var e=this.keys.h[0|n],t=null!=e?e:0;return t>=2?this.values[t-2]:ceramic_IntMap.RET_NULL},getInline:function(n){var e=this.keys.h[0|n],t=null!=e?e:0;return t>=2?this.values[t-2]:ceramic_IntMap.RET_NULL},exists:function(n){return this.keys.h.hasOwnProperty(0|n)},existsInline:function(n){return this.keys.h.hasOwnProperty(0|n)},set:function(n,e){var t=this.keys.h[0|n],i=null!=t?t:0;if(i>=2)i-=2,null!=e?this.values[i]=e:(this.values[i]=null,this.nextFreeIndex>i&&(this.nextFreeIndex=i),this.keys.h[0|n]=1);else if(null==e)1!=i&&(this.keys.h[0|n]=1,null!=this.iterableKeys&&this.iterableKeys.push(n));else{var r=this.values.length;this.nextFreeIndex>=r&&this.resizeValues(2*this.values.length),this.values[this.nextFreeIndex]=e;e=this.nextFreeIndex+2;for(this.keys.h[0|n]=e,1!=i&&null!=this.iterableKeys&&this.iterableKeys.push(n);this.nextFreeIndex++,this.nextFreeIndex<r&&null!=this.values[this.nextFreeIndex];);}},remove:function(n){var e=this.keys.h[0|n],t=null!=e?e:0;if(0!=t){1!=t&&(t-=2,this.values[t]=null,this.nextFreeIndex>t&&(this.nextFreeIndex=t));this.keys.remove(0|n);null!=this.iterableKeys&&this.iterableKeys.splice(this.iterableKeys.indexOf(n),1)}},copy:function(){var n=new ceramic_IntMap;n.keys=this.keys.copy(),n.nextFreeIndex=this.nextFreeIndex,n.iterableKeys=null!=this.iterableKeys?this.iterableKeys.slice():null;var e=this.values,t=new Array(e.length);return I.blit(e,0,t,0,e.length),n.values=t,n},resizeValues:function(n){var e=this.values,t=new Array(n);this.values=t;for(var i=0,r=e.length;i<r;){var l=i++;this.values[l]=e[l]}},__class__:ceramic_IntMap};var ceramic_Key=function(n,e){this.keyCode=n,this.scanCode=e};t["ceramic.Key"]=ceramic_Key,ceramic_Key.__name__="ceramic.Key",ceramic_Key.prototype={get_keyCodeName:function(){return c.$name(this.keyCode)},get_scanCodeName:function(){return f.$name(this.scanCode)},toString:function(){return"Key("+this.keyCode+" "+c.$name(this.keyCode)+" / "+this.scanCode+" "+f.$name(this.scanCode)+")"},__class__:ceramic_Key,__properties__:{get_scanCodeName:"get_scanCodeName",get_keyCodeName:"get_keyCodeName"}};var c={$name:function(n){if(0!=(n&f.MASK))return f.$name(n&~f.MASK);switch(n){case 8:return f.$name(42);case 9:return f.$name(43);case 13:return f.$name(40);case 27:return f.$name(41);case 32:return f.$name(44);case 97:return f.$name(4);case 98:return f.$name(5);case 99:return f.$name(6);case 100:return f.$name(7);case 101:return f.$name(8);case 102:return f.$name(9);case 103:return f.$name(10);case 104:return f.$name(11);case 105:return f.$name(12);case 106:return f.$name(13);case 107:return f.$name(14);case 108:return f.$name(15);case 109:return f.$name(16);case 110:return f.$name(17);case 111:return f.$name(18);case 112:return f.$name(19);case 113:return f.$name(20);case 114:return f.$name(21);case 115:return f.$name(22);case 116:return f.$name(23);case 117:return f.$name(24);case 118:return f.$name(25);case 119:return f.$name(26);case 120:return f.$name(27);case 121:return f.$name(28);case 122:return f.$name(29);case 127:return f.$name(76);default:return String.fromCodePoint(n)}},toString:function(n){return"KeyCode("+n+" "+c.$name(n)+")"}},polyline_MiterUtils=function(){this.tmpY=0,this.tmpX=0,this.outY=0,this.outX=0,this.bY=0,this.bX=0,this.aY=0,this.aX=0,this.miterY=0,this.miterX=0,this.tangentY=0,this.tangentX=0};t["polyline.MiterUtils"]=polyline_MiterUtils,polyline_MiterUtils.__name__="polyline.MiterUtils",polyline_MiterUtils.prototype={computeMiter:function(n){return this.tangentX=this.aX+this.bX,this.tangentY=this.aY+this.bY,this.miterX=-this.tangentY,this.miterY=this.tangentX,this.tmpX=-this.aY,this.tmpY=this.aX,n/(this.miterX*this.tmpX+this.miterY*this.tmpY)},normal:function(n,e){this.outX=-e,this.outY=n},direction:function(){this.outX=this.aX-this.bX,this.outY=this.aY-this.bY;var n=this.outX*this.outX+this.outY*this.outY;n>0&&(n=1/Math.sqrt(n),this.outX*=n,this.outY*=n)},__class__:polyline_MiterUtils};var polyline_Stroke=function(){this._points=null,this._started=!1,this._lastFlip=-1,this._normalY=0,this._normalX=0,this._hasNormal=!1,this.capEndY=0,this.capEndX=0,this.miterY=0,this.miterX=0,this.tangentY=0,this.tangentX=0,this.lineBY=0,this.lineBX=0,this.lineAY=0,this.lineAX=0,this.tmpY=0,this.tmpX=0,this.canLoop=!1,this.cap=Z.BUTT,this.join=q.MITER,this.thickness=1,this.miterLimit=10};t["polyline.Stroke"]=polyline_Stroke,polyline_Stroke.__name__="polyline.Stroke",polyline_Stroke.prototype={build:function(n,e,t){if(e.length>0&&e.splice(0,e.length),t.length>0&&t.splice(0,t.length),0!=n.length){var i=n.length;this._lastFlip=-1,this._started=!1,this._hasNormal=!1;var r=2,l=0,s=!1,a=0,o=0,p=0,h=0,u=-9999999999,_=-9999999999,c=0;for(this._points=n;r<i;){if(s||(a=n[r-2],o=n[r-1],p=n[r],h=n[r+1]),u=-9999999999,_=-9999999999,s=!1,c=this.mapThickness(p,h,r,n),r<i-2)if(u=n[r+2],_=n[r+3],p==u&&h==_)s=!0;else{var d=a-p,f=o-h,x=((u-p)*d+(_-h)*f)/(d*d+f*f),b=u-(p+x*d),y=_-(h+x*f);if(Math.sqrt(b*b+y*y)<c){for(var v=Math.atan2(o-h,a-p)-Math.atan2(_-h,u-p);v<0;)v+=6.28318530718;for(;v>6.28318530718;)v-=6.28318530718;(v<1.57079632679||v>4.71238898038)&&(u=-9999999999,_=-9999999999)}}if(!s){var m=a,g=o,z=p,w=h,O=.5*c,C=0,E=this.cap==Z.SQUARE,U=this.join==q.BEVEL;polyline_Stroke.miterUtils.aX=z,polyline_Stroke.miterUtils.aY=w,polyline_Stroke.miterUtils.bX=m,polyline_Stroke.miterUtils.bY=g;var M=polyline_Stroke.miterUtils;M.outX=M.aX-M.bX,M.outY=M.aY-M.bY;var T=M.outX*M.outX+M.outY*M.outY;if(T>0&&(T=1/Math.sqrt(T),M.outX*=T,M.outY*=T),this.lineAX=polyline_Stroke.miterUtils.outX,this.lineAY=polyline_Stroke.miterUtils.outY,!this._hasNormal){var k=polyline_Stroke.miterUtils;k.outX=-this.lineAY,k.outY=this.lineAX,this._normalX=polyline_Stroke.miterUtils.outX,this._normalY=polyline_Stroke.miterUtils.outY,this._hasNormal=!0}if(!this._started){this._started=!0;var D=.5*this.mapThickness(this._points[0],this._points[1],0,this._points);E&&(this.capEndX=m+this.lineAX*-D,this.capEndY=g+this.lineAY*-D,m=this.capEndX,g=this.capEndY);var S=this._normalX,A=this._normalY;this.tmpX=m+S*-D,this.tmpY=g+A*-D,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=m+S*D,this.tmpY=g+A*D,e.push(this.tmpX),e.push(this.tmpY)}if(t.push(l),t.push(l+1),t.push(l+2),-9999999999==u){var P=polyline_Stroke.miterUtils;P.outX=-this.lineAY,P.outY=this.lineAX,this._normalX=polyline_Stroke.miterUtils.outX,this._normalY=polyline_Stroke.miterUtils.outY,this._hasNormal=!0,E&&(this.capEndX=z+this.lineAX*O,this.capEndY=w+this.lineAY*O,z=this.capEndX,w=this.capEndY);var V=this._normalX,I=this._normalY;this.tmpX=z+V*-O,this.tmpY=w+I*-O,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=z+V*O,this.tmpY=w+I*O,e.push(this.tmpX),e.push(this.tmpY),1==this._lastFlip?(t.push(l),t.push(l+2),t.push(l+3)):(t.push(l+2),t.push(l+1),t.push(l+3)),C+=4}else{polyline_Stroke.miterUtils.aX=u,polyline_Stroke.miterUtils.aY=_,polyline_Stroke.miterUtils.bX=z,polyline_Stroke.miterUtils.bY=w;var N=polyline_Stroke.miterUtils;N.outX=N.aX-N.bX,N.outY=N.aY-N.bY;var F=N.outX*N.outX+N.outY*N.outY;F>0&&(F=1/Math.sqrt(F),N.outX*=F,N.outY*=F),this.lineBX=polyline_Stroke.miterUtils.outX,this.lineBY=polyline_Stroke.miterUtils.outY,polyline_Stroke.miterUtils.tangentX=this.tangentX,polyline_Stroke.miterUtils.tangentY=this.tangentY,polyline_Stroke.miterUtils.miterX=this.miterX,polyline_Stroke.miterUtils.miterY=this.miterY,polyline_Stroke.miterUtils.aX=this.lineAX,polyline_Stroke.miterUtils.aY=this.lineAY,polyline_Stroke.miterUtils.bX=this.lineBX,polyline_Stroke.miterUtils.bY=this.lineBY;var R=polyline_Stroke.miterUtils;R.tangentX=R.aX+R.bX,R.tangentY=R.aY+R.bY,R.miterX=-R.tangentY,R.miterY=R.tangentX,R.tmpX=-R.aY,R.tmpY=R.aX;var L=O/(R.miterX*R.tmpX+R.miterY*R.tmpY);this.tangentX=polyline_Stroke.miterUtils.tangentX,this.tangentY=polyline_Stroke.miterUtils.tangentY,this.miterX=polyline_Stroke.miterUtils.miterX,this.miterY=polyline_Stroke.miterUtils.miterY;var B=this.tangentX*this._normalX+this.tangentY*this._normalY<0?-1:1,G=U;if(!G&&this.join==q.MITER)L/O>this.miterLimit&&(G=!0);if(G){this.tmpX=z+this._normalX*-O*B,this.tmpY=w+this._normalY*-O*B,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=z+this.miterX*L*B,this.tmpY=w+this.miterY*L*B,e.push(this.tmpX),e.push(this.tmpY),this._lastFlip!=-B?(t.push(l),t.push(l+2),t.push(l+3)):(t.push(l+2),t.push(l+1),t.push(l+3)),t.push(l+2),t.push(l+3),t.push(l+4);var j=polyline_Stroke.miterUtils;j.outX=-this.lineBY,j.outY=this.lineBX,this.tmpX=polyline_Stroke.miterUtils.outX,this.tmpY=polyline_Stroke.miterUtils.outY,this._normalX=this.tmpX,this._normalY=this.tmpY,this.tmpX=z+this.tmpX*-O*B,this.tmpY=w+this.tmpY*-O*B,e.push(this.tmpX),e.push(this.tmpY),C+=3}else{var K=this.miterX,W=this.miterY;this.tmpX=z+K*-L,this.tmpY=w+W*-L,e.push(this.tmpX),e.push(this.tmpY),this.tmpX=z+K*L,this.tmpY=w+W*L,e.push(this.tmpX),e.push(this.tmpY),1==this._lastFlip?(t.push(l),t.push(l+2),t.push(l+3)):(t.push(l+2),t.push(l+1),t.push(l+3)),B=-1,this._normalX=this.miterX,this._normalY=this.miterY,C+=2}this._lastFlip=B}l+=C}-9999999999==u&&(this._lastFlip=-1,this._started=!1,this._hasNormal=!1,s=!1),r+=2}if(this._points=null,this.canLoop&&this.cap==Z.BUTT&&n[0]==n[n.length-2]&&n[1]==n[n.length-1]&&n.length>6){var Y=.5*(e[e.length-2]+e[2]),X=.5*(e[e.length-1]+e[3]);e[e.length-2]=Y,e[2]=Y,e[e.length-1]=X,e[3]=X,Y=.5*(e[e.length-4]+e[0]),X=.5*(e[e.length-3]+e[1]),e[e.length-4]=Y,e[0]=Y,e[e.length-3]=X,e[1]=X}}},mapThickness:function(n,e,t,i){return this.thickness},_seg:function(n,e,t,i,r,l,s,a,o,p){var h=0,u=this.cap==Z.SQUARE,_=this.join==q.BEVEL;(polyline_Stroke.miterUtils.aX=l,polyline_Stroke.miterUtils.aY=s,polyline_Stroke.miterUtils.bX=i,polyline_Stroke.miterUtils.bY=r,(m=polyline_Stroke.miterUtils).outX=m.aX-m.bX,m.outY=m.aY-m.bY,(x=m.outX*m.outX+m.outY*m.outY)>0&&(x=1/Math.sqrt(x),m.outX*=x,m.outY*=x),this.lineAX=polyline_Stroke.miterUtils.outX,this.lineAY=polyline_Stroke.miterUtils.outY,this._hasNormal)||((m=polyline_Stroke.miterUtils).outX=-this.lineAY,m.outY=this.lineAX,this._normalX=polyline_Stroke.miterUtils.outX,this._normalY=polyline_Stroke.miterUtils.outY,this._hasNormal=!0);if(!this._started){this._started=!0;var c=.5*this.mapThickness(this._points[0],this._points[1],0,this._points);u&&(this.capEndX=i+this.lineAX*-c,this.capEndY=r+this.lineAY*-c,i=this.capEndX,r=this.capEndY);var d=this._normalX,f=this._normalY;this.tmpX=i+d*-c,this.tmpY=r+f*-c,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=i+d*c,this.tmpY=r+f*c,n.push(this.tmpX),n.push(this.tmpY)}if(e.push(t),e.push(t+1),e.push(t+2),-9999999999==a){(m=polyline_Stroke.miterUtils).outX=-this.lineAY,m.outY=this.lineAX,this._normalX=polyline_Stroke.miterUtils.outX,this._normalY=polyline_Stroke.miterUtils.outY,this._hasNormal=!0,u&&(this.capEndX=l+this.lineAX*p,this.capEndY=s+this.lineAY*p,l=this.capEndX,s=this.capEndY);d=this._normalX,f=this._normalY;this.tmpX=l+d*-p,this.tmpY=s+f*-p,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=l+d*p,this.tmpY=s+f*p,n.push(this.tmpX),n.push(this.tmpY),1==this._lastFlip?(e.push(t),e.push(t+2),e.push(t+3)):(e.push(t+2),e.push(t+1),e.push(t+3)),h+=4}else{var x;polyline_Stroke.miterUtils.aX=a,polyline_Stroke.miterUtils.aY=o,polyline_Stroke.miterUtils.bX=l,polyline_Stroke.miterUtils.bY=s,(m=polyline_Stroke.miterUtils).outX=m.aX-m.bX,m.outY=m.aY-m.bY,(x=m.outX*m.outX+m.outY*m.outY)>0&&(x=1/Math.sqrt(x),m.outX*=x,m.outY*=x),this.lineBX=polyline_Stroke.miterUtils.outX,this.lineBY=polyline_Stroke.miterUtils.outY,polyline_Stroke.miterUtils.tangentX=this.tangentX,polyline_Stroke.miterUtils.tangentY=this.tangentY,polyline_Stroke.miterUtils.miterX=this.miterX,polyline_Stroke.miterUtils.miterY=this.miterY,polyline_Stroke.miterUtils.aX=this.lineAX,polyline_Stroke.miterUtils.aY=this.lineAY,polyline_Stroke.miterUtils.bX=this.lineBX,polyline_Stroke.miterUtils.bY=this.lineBY,(m=polyline_Stroke.miterUtils).tangentX=m.aX+m.bX,m.tangentY=m.aY+m.bY,m.miterX=-m.tangentY,m.miterY=m.tangentX,m.tmpX=-m.aY,m.tmpY=m.aX;var b=p/(m.miterX*m.tmpX+m.miterY*m.tmpY);this.tangentX=polyline_Stroke.miterUtils.tangentX,this.tangentY=polyline_Stroke.miterUtils.tangentY,this.miterX=polyline_Stroke.miterUtils.miterX,this.miterY=polyline_Stroke.miterUtils.miterY;var y=this.tangentX*this._normalX+this.tangentY*this._normalY<0?-1:1,v=_;if(!v&&this.join==q.MITER)b/p>this.miterLimit&&(v=!0);if(v){var m;this.tmpX=l+this._normalX*-p*y,this.tmpY=s+this._normalY*-p*y,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=l+this.miterX*b*y,this.tmpY=s+this.miterY*b*y,n.push(this.tmpX),n.push(this.tmpY),this._lastFlip!=-y?(e.push(t),e.push(t+2),e.push(t+3)):(e.push(t+2),e.push(t+1),e.push(t+3)),e.push(t+2),e.push(t+3),e.push(t+4),(m=polyline_Stroke.miterUtils).outX=-this.lineBY,m.outY=this.lineBX,this.tmpX=polyline_Stroke.miterUtils.outX,this.tmpY=polyline_Stroke.miterUtils.outY,this._normalX=this.tmpX,this._normalY=this.tmpY,this.tmpX=l+this.tmpX*-p*y,this.tmpY=s+this.tmpY*-p*y,n.push(this.tmpX),n.push(this.tmpY),h+=3}else{d=this.miterX,f=this.miterY;this.tmpX=l+d*-b,this.tmpY=s+f*-b,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=l+d*b,this.tmpY=s+f*b,n.push(this.tmpX),n.push(this.tmpY),1==this._lastFlip?(e.push(t),e.push(t+2),e.push(t+3)):(e.push(t+2),e.push(t+1),e.push(t+3)),y=-1,this._normalX=this.miterX,this._normalY=this.miterY,h+=2}this._lastFlip=y}return h},extrusions:function(n,e,t,i,r,l){this.tmpX=e+i*-l,this.tmpY=t+r*-l,n.push(this.tmpX),n.push(this.tmpY),this.tmpX=e+i*l,this.tmpY=t+r*l,n.push(this.tmpX),n.push(this.tmpY)},pointsAngle:function(n,e,t,i,r,l){for(var s=Math.atan2(l-e,r-n)-Math.atan2(i-e,t-n);s<0;)s+=6.28318530718;for(;s>6.28318530718;)s-=6.28318530718;return s},distanceToLine:function(n,e,t,i,r,l){var s=r-t,a=l-i,o=((n-t)*s+(e-i)*a)/(s*s+a*a),p=n-(t+o*s),h=e-(i+o*a);return Math.sqrt(p*p+h*h)},__class__:polyline_Stroke};var ceramic_Line=function(){this.autoComputeSize=!0,this.loop=!1,this.cap=Z.BUTT,this.join=q.BEVEL,this.thickness=1,this.miterLimit=10,this.points=null,ceramic_Mesh.call(this)};t["ceramic.Line"]=ceramic_Line,ceramic_Line.__name__="ceramic.Line",ceramic_Line.__super__=ceramic_Mesh,ceramic_Line.prototype=$extend(ceramic_Mesh.prototype,{set_points:function(n){return this.points=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,n},set_miterLimit:function(n){return this.miterLimit==n||(this.miterLimit=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_thickness:function(n){return this.thickness==n||(this.thickness=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_join:function(n){return this.join==n||(this.join=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_cap:function(n){return this.cap==n||(this.cap=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_loop:function(n){return this.loop==n||(this.loop=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_autoComputeSize:function(n){return this.autoComputeSize==n||(this.autoComputeSize=n,n&&this.computeSize()),n},computeContent:function(){null!=this.points&&this.points.length>=4&&(ceramic_Line._stroke.miterLimit=this.miterLimit,ceramic_Line._stroke.thickness=this.thickness,ceramic_Line._stroke.join=this.join,ceramic_Line._stroke.cap=this.cap,ceramic_Line._stroke.canLoop=this.loop,null==this.vertices&&(this.vertices=[]),null==this.indices&&(this.indices=[]),ceramic_Line._stroke.build(this.points,this.vertices,this.indices)),this.autoComputeSize&&this.computeSize(),this.contentDirty=!1},computeSize:function(){if(null!=this.points&&this.points.length>=2){for(var n=0,e=0,t=0,i=this.points.length-1;t<i;){var r=this.points[t];r>n&&(n=r),++t;var l=this.points[t];l>e&&(e=l),++t}this.set_width(n),this.set_height(e)}else this.set_width(0),this.set_height(0)},__class__:ceramic_Line,__properties__:$extend(ceramic_Mesh.prototype.__properties__,{set_autoComputeSize:"set_autoComputeSize",set_loop:"set_loop",set_cap:"set_cap",set_join:"set_join",set_thickness:"set_thickness",set_miterLimit:"set_miterLimit",set_points:"set_points"})});var ceramic_Logger=function(){this.indentPrefix="",ceramic_Entity.call(this),ceramic_Logger.didInitOnce||(ceramic_Logger.didInitOnce=!0)};t["ceramic.Logger"]=ceramic_Logger,ceramic_Logger.__name__="ceramic.Logger",ceramic_Logger.__super__=ceramic_Entity,ceramic_Logger.prototype=$extend(ceramic_Entity.prototype,{emitInfo:function(n,e){var t=0;if(null!=this.__cbOnInfo&&(t+=this.__cbOnInfo.length),null!=this.__cbOnceInfo&&(t+=this.__cbOnceInfo.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnInfo)for(var s=0,a=this.__cbOnInfo.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnInfo[o],++l):--t}if(null!=this.__cbOnceInfo){var p=null,h=null;for(s=0,a=this.__cbOnceInfo.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceInfo[o],this.__cbOnceInfo[o]=null;var u=this.__cbOnceOwnerUnbindInfo[o];this.__cbOnceOwnerUnbindInfo[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindInfo[o]),h.push(this.__cbOnceInfo[o])}this.__cbOnceOwnerUnbindInfo=p,this.__cbOnceInfo=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onInfo:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event info because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offInfo(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindInfo&&(this.__cbOnOwnerUnbindInfo=[]),this.__cbOnOwnerUnbindInfo.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindInfo&&(this.__cbOnOwnerUnbindInfo=[]),this.__cbOnOwnerUnbindInfo.push(null);null==this.__cbOnInfo&&(this.__cbOnInfo=[]),this.__cbOnInfo.push(e)},onceInfo:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event info because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offInfo(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindInfo&&(this.__cbOnceOwnerUnbindInfo=[]),this.__cbOnceOwnerUnbindInfo.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindInfo&&(this.__cbOnceOwnerUnbindInfo=[]),this.__cbOnceOwnerUnbindInfo.push(null);null==this.__cbOnceInfo&&(this.__cbOnceInfo=[]),this.__cbOnceInfo.push(e)},offInfo:function(n){if(null!=n){var e;null!=this.__cbOnInfo&&-1!=(e=this.__cbOnInfo.indexOf(n))&&(this.__cbOnInfo.splice(e,1),null!=(l=this.__cbOnOwnerUnbindInfo[e])&&l(),this.__cbOnOwnerUnbindInfo.splice(e,1)),null!=this.__cbOnceInfo&&-1!=(e=this.__cbOnceInfo.indexOf(n))&&(this.__cbOnceInfo.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindInfo[e])&&l(),this.__cbOnceOwnerUnbindInfo.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindInfo){for(var t=0,i=this.__cbOnOwnerUnbindInfo.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindInfo[r])&&l()}this.__cbOnOwnerUnbindInfo=null}if(null!=this.__cbOnceOwnerUnbindInfo){for(t=0,i=this.__cbOnceOwnerUnbindInfo.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindInfo[r])&&l()}this.__cbOnceOwnerUnbindInfo=null}this.__cbOnInfo=null,this.__cbOnceInfo=null}},listensInfo:function(){return null!=this.__cbOnInfo&&this.__cbOnInfo.length>0||null!=this.__cbOnceInfo&&this.__cbOnceInfo.length>0},emitDebug:function(n,e){var t=0;if(null!=this.__cbOnDebug&&(t+=this.__cbOnDebug.length),null!=this.__cbOnceDebug&&(t+=this.__cbOnceDebug.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnDebug)for(var s=0,a=this.__cbOnDebug.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnDebug[o],++l):--t}if(null!=this.__cbOnceDebug){var p=null,h=null;for(s=0,a=this.__cbOnceDebug.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceDebug[o],this.__cbOnceDebug[o]=null;var u=this.__cbOnceOwnerUnbindDebug[o];this.__cbOnceOwnerUnbindDebug[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindDebug[o]),h.push(this.__cbOnceDebug[o])}this.__cbOnceOwnerUnbindDebug=p,this.__cbOnceDebug=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onDebug:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event debug because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDebug(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindDebug&&(this.__cbOnOwnerUnbindDebug=[]),this.__cbOnOwnerUnbindDebug.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindDebug&&(this.__cbOnOwnerUnbindDebug=[]),this.__cbOnOwnerUnbindDebug.push(null);null==this.__cbOnDebug&&(this.__cbOnDebug=[]),this.__cbOnDebug.push(e)},onceDebug:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event debug because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDebug(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindDebug&&(this.__cbOnceOwnerUnbindDebug=[]),this.__cbOnceOwnerUnbindDebug.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindDebug&&(this.__cbOnceOwnerUnbindDebug=[]),this.__cbOnceOwnerUnbindDebug.push(null);null==this.__cbOnceDebug&&(this.__cbOnceDebug=[]),this.__cbOnceDebug.push(e)},offDebug:function(n){if(null!=n){var e;null!=this.__cbOnDebug&&-1!=(e=this.__cbOnDebug.indexOf(n))&&(this.__cbOnDebug.splice(e,1),null!=(l=this.__cbOnOwnerUnbindDebug[e])&&l(),this.__cbOnOwnerUnbindDebug.splice(e,1)),null!=this.__cbOnceDebug&&-1!=(e=this.__cbOnceDebug.indexOf(n))&&(this.__cbOnceDebug.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindDebug[e])&&l(),this.__cbOnceOwnerUnbindDebug.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindDebug){for(var t=0,i=this.__cbOnOwnerUnbindDebug.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindDebug[r])&&l()}this.__cbOnOwnerUnbindDebug=null}if(null!=this.__cbOnceOwnerUnbindDebug){for(t=0,i=this.__cbOnceOwnerUnbindDebug.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindDebug[r])&&l()}this.__cbOnceOwnerUnbindDebug=null}this.__cbOnDebug=null,this.__cbOnceDebug=null}},listensDebug:function(){return null!=this.__cbOnDebug&&this.__cbOnDebug.length>0||null!=this.__cbOnceDebug&&this.__cbOnceDebug.length>0},emitSuccess:function(n,e){var t=0;if(null!=this.__cbOnSuccess&&(t+=this.__cbOnSuccess.length),null!=this.__cbOnceSuccess&&(t+=this.__cbOnceSuccess.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnSuccess)for(var s=0,a=this.__cbOnSuccess.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnSuccess[o],++l):--t}if(null!=this.__cbOnceSuccess){var p=null,h=null;for(s=0,a=this.__cbOnceSuccess.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceSuccess[o],this.__cbOnceSuccess[o]=null;var u=this.__cbOnceOwnerUnbindSuccess[o];this.__cbOnceOwnerUnbindSuccess[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindSuccess[o]),h.push(this.__cbOnceSuccess[o])}this.__cbOnceOwnerUnbindSuccess=p,this.__cbOnceSuccess=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onSuccess:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event success because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offSuccess(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindSuccess&&(this.__cbOnOwnerUnbindSuccess=[]),this.__cbOnOwnerUnbindSuccess.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindSuccess&&(this.__cbOnOwnerUnbindSuccess=[]),this.__cbOnOwnerUnbindSuccess.push(null);null==this.__cbOnSuccess&&(this.__cbOnSuccess=[]),this.__cbOnSuccess.push(e)},onceSuccess:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event success because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offSuccess(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindSuccess&&(this.__cbOnceOwnerUnbindSuccess=[]),this.__cbOnceOwnerUnbindSuccess.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindSuccess&&(this.__cbOnceOwnerUnbindSuccess=[]),this.__cbOnceOwnerUnbindSuccess.push(null);null==this.__cbOnceSuccess&&(this.__cbOnceSuccess=[]),this.__cbOnceSuccess.push(e)},offSuccess:function(n){if(null!=n){var e;null!=this.__cbOnSuccess&&-1!=(e=this.__cbOnSuccess.indexOf(n))&&(this.__cbOnSuccess.splice(e,1),null!=(l=this.__cbOnOwnerUnbindSuccess[e])&&l(),this.__cbOnOwnerUnbindSuccess.splice(e,1)),null!=this.__cbOnceSuccess&&-1!=(e=this.__cbOnceSuccess.indexOf(n))&&(this.__cbOnceSuccess.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindSuccess[e])&&l(),this.__cbOnceOwnerUnbindSuccess.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindSuccess){for(var t=0,i=this.__cbOnOwnerUnbindSuccess.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindSuccess[r])&&l()}this.__cbOnOwnerUnbindSuccess=null}if(null!=this.__cbOnceOwnerUnbindSuccess){for(t=0,i=this.__cbOnceOwnerUnbindSuccess.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindSuccess[r])&&l()}this.__cbOnceOwnerUnbindSuccess=null}this.__cbOnSuccess=null,this.__cbOnceSuccess=null}},listensSuccess:function(){return null!=this.__cbOnSuccess&&this.__cbOnSuccess.length>0||null!=this.__cbOnceSuccess&&this.__cbOnceSuccess.length>0},emitWarning:function(n,e){var t=0;if(null!=this.__cbOnWarning&&(t+=this.__cbOnWarning.length),null!=this.__cbOnceWarning&&(t+=this.__cbOnceWarning.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnWarning)for(var s=0,a=this.__cbOnWarning.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnWarning[o],++l):--t}if(null!=this.__cbOnceWarning){var p=null,h=null;for(s=0,a=this.__cbOnceWarning.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceWarning[o],this.__cbOnceWarning[o]=null;var u=this.__cbOnceOwnerUnbindWarning[o];this.__cbOnceOwnerUnbindWarning[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindWarning[o]),h.push(this.__cbOnceWarning[o])}this.__cbOnceOwnerUnbindWarning=p,this.__cbOnceWarning=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onWarning:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event warning because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offWarning(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindWarning&&(this.__cbOnOwnerUnbindWarning=[]),this.__cbOnOwnerUnbindWarning.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindWarning&&(this.__cbOnOwnerUnbindWarning=[]),this.__cbOnOwnerUnbindWarning.push(null);null==this.__cbOnWarning&&(this.__cbOnWarning=[]),this.__cbOnWarning.push(e)},onceWarning:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event warning because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offWarning(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindWarning&&(this.__cbOnceOwnerUnbindWarning=[]),this.__cbOnceOwnerUnbindWarning.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindWarning&&(this.__cbOnceOwnerUnbindWarning=[]),this.__cbOnceOwnerUnbindWarning.push(null);null==this.__cbOnceWarning&&(this.__cbOnceWarning=[]),this.__cbOnceWarning.push(e)},offWarning:function(n){if(null!=n){var e;null!=this.__cbOnWarning&&-1!=(e=this.__cbOnWarning.indexOf(n))&&(this.__cbOnWarning.splice(e,1),null!=(l=this.__cbOnOwnerUnbindWarning[e])&&l(),this.__cbOnOwnerUnbindWarning.splice(e,1)),null!=this.__cbOnceWarning&&-1!=(e=this.__cbOnceWarning.indexOf(n))&&(this.__cbOnceWarning.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindWarning[e])&&l(),this.__cbOnceOwnerUnbindWarning.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindWarning){for(var t=0,i=this.__cbOnOwnerUnbindWarning.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindWarning[r])&&l()}this.__cbOnOwnerUnbindWarning=null}if(null!=this.__cbOnceOwnerUnbindWarning){for(t=0,i=this.__cbOnceOwnerUnbindWarning.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindWarning[r])&&l()}this.__cbOnceOwnerUnbindWarning=null}this.__cbOnWarning=null,this.__cbOnceWarning=null}},listensWarning:function(){return null!=this.__cbOnWarning&&this.__cbOnWarning.length>0||null!=this.__cbOnceWarning&&this.__cbOnceWarning.length>0},emitError:function(n,e){var t=0;if(null!=this.__cbOnError&&(t+=this.__cbOnError.length),null!=this.__cbOnceError&&(t+=this.__cbOnceError.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnError)for(var s=0,a=this.__cbOnError.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnError[o],++l):--t}if(null!=this.__cbOnceError){var p=null,h=null;for(s=0,a=this.__cbOnceError.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceError[o],this.__cbOnceError[o]=null;var u=this.__cbOnceOwnerUnbindError[o];this.__cbOnceOwnerUnbindError[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindError[o]),h.push(this.__cbOnceError[o])}this.__cbOnceOwnerUnbindError=p,this.__cbOnceError=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onError:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event error because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offError(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindError&&(this.__cbOnOwnerUnbindError=[]),this.__cbOnOwnerUnbindError.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindError&&(this.__cbOnOwnerUnbindError=[]),this.__cbOnOwnerUnbindError.push(null);null==this.__cbOnError&&(this.__cbOnError=[]),this.__cbOnError.push(e)},onceError:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event error because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offError(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindError&&(this.__cbOnceOwnerUnbindError=[]),this.__cbOnceOwnerUnbindError.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindError&&(this.__cbOnceOwnerUnbindError=[]),this.__cbOnceOwnerUnbindError.push(null);null==this.__cbOnceError&&(this.__cbOnceError=[]),this.__cbOnceError.push(e)},offError:function(n){if(null!=n){var e;null!=this.__cbOnError&&-1!=(e=this.__cbOnError.indexOf(n))&&(this.__cbOnError.splice(e,1),null!=(l=this.__cbOnOwnerUnbindError[e])&&l(),this.__cbOnOwnerUnbindError.splice(e,1)),null!=this.__cbOnceError&&-1!=(e=this.__cbOnceError.indexOf(n))&&(this.__cbOnceError.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindError[e])&&l(),this.__cbOnceOwnerUnbindError.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindError){for(var t=0,i=this.__cbOnOwnerUnbindError.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindError[r])&&l()}this.__cbOnOwnerUnbindError=null}if(null!=this.__cbOnceOwnerUnbindError){for(t=0,i=this.__cbOnceOwnerUnbindError.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindError[r])&&l()}this.__cbOnceOwnerUnbindError=null}this.__cbOnError=null,this.__cbOnceError=null}},listensError:function(){return null!=this.__cbOnError&&this.__cbOnError.length>0||null!=this.__cbOnceError&&this.__cbOnceError.length>0},debug:function(n,e){this.emitDebug(n,e),haxe_Log.trace(this.prefixLines("[debug] ",n),e)},info:function(n,e){this.emitInfo(n,e),haxe_Log.trace(this.prefixLines("[info] ",n),e)},success:function(n,e){this.emitSuccess(n,e),haxe_Log.trace(this.prefixLines("[success] ",n),e)},warning:function(n,e){this.emitWarning(n,e),ceramic_Logger._hasElectronRunner?haxe_Log.trace(this.prefixLines("[warning] ",n),e):console.warn(n)},error:function(n,e){this.emitError(n,e),ceramic_Logger._hasElectronRunner?haxe_Log.trace(this.prefixLines("[error] ",n),e):console.error(n)},pushIndent:function(){this.indentPrefix+="    "},popIndent:function(){this.indentPrefix=this.indentPrefix.substring(0,this.indentPrefix.length-4)},prefixLines:function(n,e){for(var t=[],i=0,r=Std.string(e).split("\n");i<r.length;){var l=r[i];++i,t.push(n+this.indentPrefix+l)}return t.join("\n")},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offInfo(),this.offDebug(),this.offSuccess(),this.offWarning(),this.offError()},__class__:ceramic_Logger});var d=i["ceramic.NapePhysicsBodyType"]={__ename__:"ceramic.NapePhysicsBodyType",__constructs__:null,STATIC:{_hx_name:"STATIC",_hx_index:0,__enum__:"ceramic.NapePhysicsBodyType",toString:$estr},KINEMATIC:{_hx_name:"KINEMATIC",_hx_index:1,__enum__:"ceramic.NapePhysicsBodyType",toString:$estr},DYNAMIC:{_hx_name:"DYNAMIC",_hx_index:2,__enum__:"ceramic.NapePhysicsBodyType",toString:$estr}};d.__constructs__=[d.STATIC,d.KINEMATIC,d.DYNAMIC];var ceramic_System=function(){this.lateUpdateOrder=0,this.earlyUpdateOrder=0,this.autoUpdate=!0,this.name=null,ceramic_Entity.call(this),ceramic_App.app.systems.addSystem(this)};t["ceramic.System"]=ceramic_System,ceramic_System.__name__="ceramic.System",ceramic_System.__super__=ceramic_Entity,ceramic_System.prototype=$extend(ceramic_Entity.prototype,{emitBeginEarlyUpdate:function(n){var e=0;if(null!=this.__cbOnBeginEarlyUpdate&&(e+=this.__cbOnBeginEarlyUpdate.length),null!=this.__cbOnceBeginEarlyUpdate&&(e+=this.__cbOnceBeginEarlyUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnBeginEarlyUpdate)for(var l=0,s=this.__cbOnBeginEarlyUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnBeginEarlyUpdate[a],++r):--e}if(null!=this.__cbOnceBeginEarlyUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceBeginEarlyUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceBeginEarlyUpdate[a],this.__cbOnceBeginEarlyUpdate[a]=null;var h=this.__cbOnceOwnerUnbindBeginEarlyUpdate[a];this.__cbOnceOwnerUnbindBeginEarlyUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindBeginEarlyUpdate[a]),p.push(this.__cbOnceBeginEarlyUpdate[a])}this.__cbOnceOwnerUnbindBeginEarlyUpdate=o,this.__cbOnceBeginEarlyUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onBeginEarlyUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginEarlyUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginEarlyUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginEarlyUpdate&&(this.__cbOnOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnOwnerUnbindBeginEarlyUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginEarlyUpdate&&(this.__cbOnOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnOwnerUnbindBeginEarlyUpdate.push(null);null==this.__cbOnBeginEarlyUpdate&&(this.__cbOnBeginEarlyUpdate=[]),this.__cbOnBeginEarlyUpdate.push(e)},onceBeginEarlyUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginEarlyUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginEarlyUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginEarlyUpdate&&(this.__cbOnceOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnceOwnerUnbindBeginEarlyUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginEarlyUpdate&&(this.__cbOnceOwnerUnbindBeginEarlyUpdate=[]),this.__cbOnceOwnerUnbindBeginEarlyUpdate.push(null);null==this.__cbOnceBeginEarlyUpdate&&(this.__cbOnceBeginEarlyUpdate=[]),this.__cbOnceBeginEarlyUpdate.push(e)},offBeginEarlyUpdate:function(n){if(null!=n){var e;null!=this.__cbOnBeginEarlyUpdate&&-1!=(e=this.__cbOnBeginEarlyUpdate.indexOf(n))&&(this.__cbOnBeginEarlyUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginEarlyUpdate[e])&&l(),this.__cbOnOwnerUnbindBeginEarlyUpdate.splice(e,1)),null!=this.__cbOnceBeginEarlyUpdate&&-1!=(e=this.__cbOnceBeginEarlyUpdate.indexOf(n))&&(this.__cbOnceBeginEarlyUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginEarlyUpdate[e])&&l(),this.__cbOnceOwnerUnbindBeginEarlyUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginEarlyUpdate){for(var t=0,i=this.__cbOnOwnerUnbindBeginEarlyUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginEarlyUpdate[r])&&l()}this.__cbOnOwnerUnbindBeginEarlyUpdate=null}if(null!=this.__cbOnceOwnerUnbindBeginEarlyUpdate){for(t=0,i=this.__cbOnceOwnerUnbindBeginEarlyUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginEarlyUpdate[r])&&l()}this.__cbOnceOwnerUnbindBeginEarlyUpdate=null}this.__cbOnBeginEarlyUpdate=null,this.__cbOnceBeginEarlyUpdate=null}},listensBeginEarlyUpdate:function(){return null!=this.__cbOnBeginEarlyUpdate&&this.__cbOnBeginEarlyUpdate.length>0||null!=this.__cbOnceBeginEarlyUpdate&&this.__cbOnceBeginEarlyUpdate.length>0},emitEndEarlyUpdate:function(n){var e=0;if(null!=this.__cbOnEndEarlyUpdate&&(e+=this.__cbOnEndEarlyUpdate.length),null!=this.__cbOnceEndEarlyUpdate&&(e+=this.__cbOnceEndEarlyUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnEndEarlyUpdate)for(var l=0,s=this.__cbOnEndEarlyUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnEndEarlyUpdate[a],++r):--e}if(null!=this.__cbOnceEndEarlyUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceEndEarlyUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceEndEarlyUpdate[a],this.__cbOnceEndEarlyUpdate[a]=null;var h=this.__cbOnceOwnerUnbindEndEarlyUpdate[a];this.__cbOnceOwnerUnbindEndEarlyUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindEndEarlyUpdate[a]),p.push(this.__cbOnceEndEarlyUpdate[a])}this.__cbOnceOwnerUnbindEndEarlyUpdate=o,this.__cbOnceEndEarlyUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onEndEarlyUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endEarlyUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndEarlyUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindEndEarlyUpdate&&(this.__cbOnOwnerUnbindEndEarlyUpdate=[]),this.__cbOnOwnerUnbindEndEarlyUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindEndEarlyUpdate&&(this.__cbOnOwnerUnbindEndEarlyUpdate=[]),this.__cbOnOwnerUnbindEndEarlyUpdate.push(null);null==this.__cbOnEndEarlyUpdate&&(this.__cbOnEndEarlyUpdate=[]),this.__cbOnEndEarlyUpdate.push(e)},onceEndEarlyUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endEarlyUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndEarlyUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindEndEarlyUpdate&&(this.__cbOnceOwnerUnbindEndEarlyUpdate=[]),this.__cbOnceOwnerUnbindEndEarlyUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindEndEarlyUpdate&&(this.__cbOnceOwnerUnbindEndEarlyUpdate=[]),this.__cbOnceOwnerUnbindEndEarlyUpdate.push(null);null==this.__cbOnceEndEarlyUpdate&&(this.__cbOnceEndEarlyUpdate=[]),this.__cbOnceEndEarlyUpdate.push(e)},offEndEarlyUpdate:function(n){if(null!=n){var e;null!=this.__cbOnEndEarlyUpdate&&-1!=(e=this.__cbOnEndEarlyUpdate.indexOf(n))&&(this.__cbOnEndEarlyUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindEndEarlyUpdate[e])&&l(),this.__cbOnOwnerUnbindEndEarlyUpdate.splice(e,1)),null!=this.__cbOnceEndEarlyUpdate&&-1!=(e=this.__cbOnceEndEarlyUpdate.indexOf(n))&&(this.__cbOnceEndEarlyUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindEndEarlyUpdate[e])&&l(),this.__cbOnceOwnerUnbindEndEarlyUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindEndEarlyUpdate){for(var t=0,i=this.__cbOnOwnerUnbindEndEarlyUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindEndEarlyUpdate[r])&&l()}this.__cbOnOwnerUnbindEndEarlyUpdate=null}if(null!=this.__cbOnceOwnerUnbindEndEarlyUpdate){for(t=0,i=this.__cbOnceOwnerUnbindEndEarlyUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindEndEarlyUpdate[r])&&l()}this.__cbOnceOwnerUnbindEndEarlyUpdate=null}this.__cbOnEndEarlyUpdate=null,this.__cbOnceEndEarlyUpdate=null}},listensEndEarlyUpdate:function(){return null!=this.__cbOnEndEarlyUpdate&&this.__cbOnEndEarlyUpdate.length>0||null!=this.__cbOnceEndEarlyUpdate&&this.__cbOnceEndEarlyUpdate.length>0},emitBeginLateUpdate:function(n){var e=0;if(null!=this.__cbOnBeginLateUpdate&&(e+=this.__cbOnBeginLateUpdate.length),null!=this.__cbOnceBeginLateUpdate&&(e+=this.__cbOnceBeginLateUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnBeginLateUpdate)for(var l=0,s=this.__cbOnBeginLateUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnBeginLateUpdate[a],++r):--e}if(null!=this.__cbOnceBeginLateUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceBeginLateUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceBeginLateUpdate[a],this.__cbOnceBeginLateUpdate[a]=null;var h=this.__cbOnceOwnerUnbindBeginLateUpdate[a];this.__cbOnceOwnerUnbindBeginLateUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindBeginLateUpdate[a]),p.push(this.__cbOnceBeginLateUpdate[a])}this.__cbOnceOwnerUnbindBeginLateUpdate=o,this.__cbOnceBeginLateUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onBeginLateUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginLateUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginLateUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginLateUpdate&&(this.__cbOnOwnerUnbindBeginLateUpdate=[]),this.__cbOnOwnerUnbindBeginLateUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginLateUpdate&&(this.__cbOnOwnerUnbindBeginLateUpdate=[]),this.__cbOnOwnerUnbindBeginLateUpdate.push(null);null==this.__cbOnBeginLateUpdate&&(this.__cbOnBeginLateUpdate=[]),this.__cbOnBeginLateUpdate.push(e)},onceBeginLateUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginLateUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginLateUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginLateUpdate&&(this.__cbOnceOwnerUnbindBeginLateUpdate=[]),this.__cbOnceOwnerUnbindBeginLateUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginLateUpdate&&(this.__cbOnceOwnerUnbindBeginLateUpdate=[]),this.__cbOnceOwnerUnbindBeginLateUpdate.push(null);null==this.__cbOnceBeginLateUpdate&&(this.__cbOnceBeginLateUpdate=[]),this.__cbOnceBeginLateUpdate.push(e)},offBeginLateUpdate:function(n){if(null!=n){var e;null!=this.__cbOnBeginLateUpdate&&-1!=(e=this.__cbOnBeginLateUpdate.indexOf(n))&&(this.__cbOnBeginLateUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginLateUpdate[e])&&l(),this.__cbOnOwnerUnbindBeginLateUpdate.splice(e,1)),null!=this.__cbOnceBeginLateUpdate&&-1!=(e=this.__cbOnceBeginLateUpdate.indexOf(n))&&(this.__cbOnceBeginLateUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginLateUpdate[e])&&l(),this.__cbOnceOwnerUnbindBeginLateUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginLateUpdate){for(var t=0,i=this.__cbOnOwnerUnbindBeginLateUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginLateUpdate[r])&&l()}this.__cbOnOwnerUnbindBeginLateUpdate=null}if(null!=this.__cbOnceOwnerUnbindBeginLateUpdate){for(t=0,i=this.__cbOnceOwnerUnbindBeginLateUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginLateUpdate[r])&&l()}this.__cbOnceOwnerUnbindBeginLateUpdate=null}this.__cbOnBeginLateUpdate=null,this.__cbOnceBeginLateUpdate=null}},listensBeginLateUpdate:function(){return null!=this.__cbOnBeginLateUpdate&&this.__cbOnBeginLateUpdate.length>0||null!=this.__cbOnceBeginLateUpdate&&this.__cbOnceBeginLateUpdate.length>0},emitEndLateUpdate:function(n){var e=0;if(null!=this.__cbOnEndLateUpdate&&(e+=this.__cbOnEndLateUpdate.length),null!=this.__cbOnceEndLateUpdate&&(e+=this.__cbOnceEndLateUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnEndLateUpdate)for(var l=0,s=this.__cbOnEndLateUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnEndLateUpdate[a],++r):--e}if(null!=this.__cbOnceEndLateUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceEndLateUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceEndLateUpdate[a],this.__cbOnceEndLateUpdate[a]=null;var h=this.__cbOnceOwnerUnbindEndLateUpdate[a];this.__cbOnceOwnerUnbindEndLateUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindEndLateUpdate[a]),p.push(this.__cbOnceEndLateUpdate[a])}this.__cbOnceOwnerUnbindEndLateUpdate=o,this.__cbOnceEndLateUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onEndLateUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endLateUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndLateUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindEndLateUpdate&&(this.__cbOnOwnerUnbindEndLateUpdate=[]),this.__cbOnOwnerUnbindEndLateUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindEndLateUpdate&&(this.__cbOnOwnerUnbindEndLateUpdate=[]),this.__cbOnOwnerUnbindEndLateUpdate.push(null);null==this.__cbOnEndLateUpdate&&(this.__cbOnEndLateUpdate=[]),this.__cbOnEndLateUpdate.push(e)},onceEndLateUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endLateUpdate because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndLateUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindEndLateUpdate&&(this.__cbOnceOwnerUnbindEndLateUpdate=[]),this.__cbOnceOwnerUnbindEndLateUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindEndLateUpdate&&(this.__cbOnceOwnerUnbindEndLateUpdate=[]),this.__cbOnceOwnerUnbindEndLateUpdate.push(null);null==this.__cbOnceEndLateUpdate&&(this.__cbOnceEndLateUpdate=[]),this.__cbOnceEndLateUpdate.push(e)},offEndLateUpdate:function(n){if(null!=n){var e;null!=this.__cbOnEndLateUpdate&&-1!=(e=this.__cbOnEndLateUpdate.indexOf(n))&&(this.__cbOnEndLateUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindEndLateUpdate[e])&&l(),this.__cbOnOwnerUnbindEndLateUpdate.splice(e,1)),null!=this.__cbOnceEndLateUpdate&&-1!=(e=this.__cbOnceEndLateUpdate.indexOf(n))&&(this.__cbOnceEndLateUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindEndLateUpdate[e])&&l(),this.__cbOnceOwnerUnbindEndLateUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindEndLateUpdate){for(var t=0,i=this.__cbOnOwnerUnbindEndLateUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindEndLateUpdate[r])&&l()}this.__cbOnOwnerUnbindEndLateUpdate=null}if(null!=this.__cbOnceOwnerUnbindEndLateUpdate){for(t=0,i=this.__cbOnceOwnerUnbindEndLateUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindEndLateUpdate[r])&&l()}this.__cbOnceOwnerUnbindEndLateUpdate=null}this.__cbOnEndLateUpdate=null,this.__cbOnceEndLateUpdate=null}},listensEndLateUpdate:function(){return null!=this.__cbOnEndLateUpdate&&this.__cbOnEndLateUpdate.length>0||null!=this.__cbOnceEndLateUpdate&&this.__cbOnceEndLateUpdate.length>0},set_earlyUpdateOrder:function(n){return this.earlyUpdateOrder!=n&&(this.earlyUpdateOrder=n,ceramic_App.app.systems.earlyUpdateOrderDirty=!0),n},set_lateUpdateOrder:function(n){return this.lateUpdateOrder!=n&&(this.lateUpdateOrder=n,ceramic_App.app.systems.lateUpdateOrderDirty=!0),n},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),ceramic_App.app.systems.removeSystem(this))},earlyUpdate:function(n){},lateUpdate:function(n){},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offBeginEarlyUpdate(),this.offEndEarlyUpdate(),this.offBeginLateUpdate(),this.offEndLateUpdate()},__class__:ceramic_System,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_lateUpdateOrder:"set_lateUpdateOrder",set_earlyUpdateOrder:"set_earlyUpdateOrder"})});var ceramic_NapeSystem=function(){this.space=null,this.spaces=[],this.items=[],this._freezeItems=!1,this._createdItems=[],this._destroyedItems=[],ceramic_System.call(this),this.set_earlyUpdateOrder(3e3),this.space=this.createSpace()};t["ceramic.NapeSystem"]=ceramic_NapeSystem,ceramic_NapeSystem.__name__="ceramic.NapeSystem",ceramic_NapeSystem.__super__=ceramic_System,ceramic_NapeSystem.prototype=$extend(ceramic_System.prototype,{emitUpdateSpaces:function(n){var e=0;if(null!=this.__cbOnUpdateSpaces&&(e+=this.__cbOnUpdateSpaces.length),null!=this.__cbOnceUpdateSpaces&&(e+=this.__cbOnceUpdateSpaces.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnUpdateSpaces)for(var l=0,s=this.__cbOnUpdateSpaces.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnUpdateSpaces[a],++r):--e}if(null!=this.__cbOnceUpdateSpaces){var o=null,p=null;for(l=0,s=this.__cbOnceUpdateSpaces.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceUpdateSpaces[a],this.__cbOnceUpdateSpaces[a]=null;var h=this.__cbOnceOwnerUnbindUpdateSpaces[a];this.__cbOnceOwnerUnbindUpdateSpaces[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindUpdateSpaces[a]),p.push(this.__cbOnceUpdateSpaces[a])}this.__cbOnceOwnerUnbindUpdateSpaces=o,this.__cbOnceUpdateSpaces=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onUpdateSpaces:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event updateSpaces because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdateSpaces(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindUpdateSpaces&&(this.__cbOnOwnerUnbindUpdateSpaces=[]),this.__cbOnOwnerUnbindUpdateSpaces.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindUpdateSpaces&&(this.__cbOnOwnerUnbindUpdateSpaces=[]),this.__cbOnOwnerUnbindUpdateSpaces.push(null);null==this.__cbOnUpdateSpaces&&(this.__cbOnUpdateSpaces=[]),this.__cbOnUpdateSpaces.push(e)},onceUpdateSpaces:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event updateSpaces because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdateSpaces(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindUpdateSpaces&&(this.__cbOnceOwnerUnbindUpdateSpaces=[]),this.__cbOnceOwnerUnbindUpdateSpaces.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindUpdateSpaces&&(this.__cbOnceOwnerUnbindUpdateSpaces=[]),this.__cbOnceOwnerUnbindUpdateSpaces.push(null);null==this.__cbOnceUpdateSpaces&&(this.__cbOnceUpdateSpaces=[]),this.__cbOnceUpdateSpaces.push(e)},offUpdateSpaces:function(n){if(null!=n){var e;null!=this.__cbOnUpdateSpaces&&-1!=(e=this.__cbOnUpdateSpaces.indexOf(n))&&(this.__cbOnUpdateSpaces.splice(e,1),null!=(l=this.__cbOnOwnerUnbindUpdateSpaces[e])&&l(),this.__cbOnOwnerUnbindUpdateSpaces.splice(e,1)),null!=this.__cbOnceUpdateSpaces&&-1!=(e=this.__cbOnceUpdateSpaces.indexOf(n))&&(this.__cbOnceUpdateSpaces.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindUpdateSpaces[e])&&l(),this.__cbOnceOwnerUnbindUpdateSpaces.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindUpdateSpaces){for(var t=0,i=this.__cbOnOwnerUnbindUpdateSpaces.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindUpdateSpaces[r])&&l()}this.__cbOnOwnerUnbindUpdateSpaces=null}if(null!=this.__cbOnceOwnerUnbindUpdateSpaces){for(t=0,i=this.__cbOnceOwnerUnbindUpdateSpaces.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindUpdateSpaces[r])&&l()}this.__cbOnceOwnerUnbindUpdateSpaces=null}this.__cbOnUpdateSpaces=null,this.__cbOnceUpdateSpaces=null}},listensUpdateSpaces:function(){return null!=this.__cbOnUpdateSpaces&&this.__cbOnUpdateSpaces.length>0||null!=this.__cbOnceUpdateSpaces&&this.__cbOnceUpdateSpaces.length>0},emitBeginUpdateVisuals:function(){var n=0;if(null!=this.__cbOnBeginUpdateVisuals&&(n+=this.__cbOnBeginUpdateVisuals.length),null!=this.__cbOnceBeginUpdateVisuals&&(n+=this.__cbOnceBeginUpdateVisuals.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnBeginUpdateVisuals)for(var r=0,l=this.__cbOnBeginUpdateVisuals.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnBeginUpdateVisuals[s],++i):--n}if(null!=this.__cbOnceBeginUpdateVisuals){var a=null,o=null;for(r=0,l=this.__cbOnceBeginUpdateVisuals.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceBeginUpdateVisuals[s],this.__cbOnceBeginUpdateVisuals[s]=null;var p=this.__cbOnceOwnerUnbindBeginUpdateVisuals[s];this.__cbOnceOwnerUnbindBeginUpdateVisuals[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindBeginUpdateVisuals[s]),o.push(this.__cbOnceBeginUpdateVisuals[s])}this.__cbOnceOwnerUnbindBeginUpdateVisuals=a,this.__cbOnceBeginUpdateVisuals=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onBeginUpdateVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginUpdateVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginUpdateVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBeginUpdateVisuals&&(this.__cbOnOwnerUnbindBeginUpdateVisuals=[]),this.__cbOnOwnerUnbindBeginUpdateVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBeginUpdateVisuals&&(this.__cbOnOwnerUnbindBeginUpdateVisuals=[]),this.__cbOnOwnerUnbindBeginUpdateVisuals.push(null);null==this.__cbOnBeginUpdateVisuals&&(this.__cbOnBeginUpdateVisuals=[]),this.__cbOnBeginUpdateVisuals.push(e)},onceBeginUpdateVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event beginUpdateVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBeginUpdateVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBeginUpdateVisuals&&(this.__cbOnceOwnerUnbindBeginUpdateVisuals=[]),this.__cbOnceOwnerUnbindBeginUpdateVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBeginUpdateVisuals&&(this.__cbOnceOwnerUnbindBeginUpdateVisuals=[]),this.__cbOnceOwnerUnbindBeginUpdateVisuals.push(null);null==this.__cbOnceBeginUpdateVisuals&&(this.__cbOnceBeginUpdateVisuals=[]),this.__cbOnceBeginUpdateVisuals.push(e)},offBeginUpdateVisuals:function(n){if(null!=n){var e;null!=this.__cbOnBeginUpdateVisuals&&-1!=(e=this.__cbOnBeginUpdateVisuals.indexOf(n))&&(this.__cbOnBeginUpdateVisuals.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBeginUpdateVisuals[e])&&l(),this.__cbOnOwnerUnbindBeginUpdateVisuals.splice(e,1)),null!=this.__cbOnceBeginUpdateVisuals&&-1!=(e=this.__cbOnceBeginUpdateVisuals.indexOf(n))&&(this.__cbOnceBeginUpdateVisuals.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBeginUpdateVisuals[e])&&l(),this.__cbOnceOwnerUnbindBeginUpdateVisuals.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBeginUpdateVisuals){for(var t=0,i=this.__cbOnOwnerUnbindBeginUpdateVisuals.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBeginUpdateVisuals[r])&&l()}this.__cbOnOwnerUnbindBeginUpdateVisuals=null}if(null!=this.__cbOnceOwnerUnbindBeginUpdateVisuals){for(t=0,i=this.__cbOnceOwnerUnbindBeginUpdateVisuals.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBeginUpdateVisuals[r])&&l()}this.__cbOnceOwnerUnbindBeginUpdateVisuals=null}this.__cbOnBeginUpdateVisuals=null,this.__cbOnceBeginUpdateVisuals=null}},listensBeginUpdateVisuals:function(){return null!=this.__cbOnBeginUpdateVisuals&&this.__cbOnBeginUpdateVisuals.length>0||null!=this.__cbOnceBeginUpdateVisuals&&this.__cbOnceBeginUpdateVisuals.length>0},emitEndUpdateVisuals:function(){var n=0;if(null!=this.__cbOnEndUpdateVisuals&&(n+=this.__cbOnEndUpdateVisuals.length),null!=this.__cbOnceEndUpdateVisuals&&(n+=this.__cbOnceEndUpdateVisuals.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnEndUpdateVisuals)for(var r=0,l=this.__cbOnEndUpdateVisuals.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnEndUpdateVisuals[s],++i):--n}if(null!=this.__cbOnceEndUpdateVisuals){var a=null,o=null;for(r=0,l=this.__cbOnceEndUpdateVisuals.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceEndUpdateVisuals[s],this.__cbOnceEndUpdateVisuals[s]=null;var p=this.__cbOnceOwnerUnbindEndUpdateVisuals[s];this.__cbOnceOwnerUnbindEndUpdateVisuals[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindEndUpdateVisuals[s]),o.push(this.__cbOnceEndUpdateVisuals[s])}this.__cbOnceOwnerUnbindEndUpdateVisuals=a,this.__cbOnceEndUpdateVisuals=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onEndUpdateVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endUpdateVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndUpdateVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindEndUpdateVisuals&&(this.__cbOnOwnerUnbindEndUpdateVisuals=[]),this.__cbOnOwnerUnbindEndUpdateVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindEndUpdateVisuals&&(this.__cbOnOwnerUnbindEndUpdateVisuals=[]),this.__cbOnOwnerUnbindEndUpdateVisuals.push(null);null==this.__cbOnEndUpdateVisuals&&(this.__cbOnEndUpdateVisuals=[]),this.__cbOnEndUpdateVisuals.push(e)},onceEndUpdateVisuals:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endUpdateVisuals because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndUpdateVisuals(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindEndUpdateVisuals&&(this.__cbOnceOwnerUnbindEndUpdateVisuals=[]),this.__cbOnceOwnerUnbindEndUpdateVisuals.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindEndUpdateVisuals&&(this.__cbOnceOwnerUnbindEndUpdateVisuals=[]),this.__cbOnceOwnerUnbindEndUpdateVisuals.push(null);null==this.__cbOnceEndUpdateVisuals&&(this.__cbOnceEndUpdateVisuals=[]),this.__cbOnceEndUpdateVisuals.push(e)},offEndUpdateVisuals:function(n){if(null!=n){var e;null!=this.__cbOnEndUpdateVisuals&&-1!=(e=this.__cbOnEndUpdateVisuals.indexOf(n))&&(this.__cbOnEndUpdateVisuals.splice(e,1),null!=(l=this.__cbOnOwnerUnbindEndUpdateVisuals[e])&&l(),this.__cbOnOwnerUnbindEndUpdateVisuals.splice(e,1)),null!=this.__cbOnceEndUpdateVisuals&&-1!=(e=this.__cbOnceEndUpdateVisuals.indexOf(n))&&(this.__cbOnceEndUpdateVisuals.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindEndUpdateVisuals[e])&&l(),this.__cbOnceOwnerUnbindEndUpdateVisuals.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindEndUpdateVisuals){for(var t=0,i=this.__cbOnOwnerUnbindEndUpdateVisuals.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindEndUpdateVisuals[r])&&l()}this.__cbOnOwnerUnbindEndUpdateVisuals=null}if(null!=this.__cbOnceOwnerUnbindEndUpdateVisuals){for(t=0,i=this.__cbOnceOwnerUnbindEndUpdateVisuals.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindEndUpdateVisuals[r])&&l()}this.__cbOnceOwnerUnbindEndUpdateVisuals=null}this.__cbOnEndUpdateVisuals=null,this.__cbOnceEndUpdateVisuals=null}},listensEndUpdateVisuals:function(){return null!=this.__cbOnEndUpdateVisuals&&this.__cbOnEndUpdateVisuals.length>0||null!=this.__cbOnceEndUpdateVisuals&&this.__cbOnceEndUpdateVisuals.length>0},createSpace:function(n){null==n&&(n=!0);var e=new nape_space_Space(new nape_geom_Vec2(0,0));return n&&this.addSpace(e),e},addSpace:function(n){-1==this.spaces.indexOf(n)?this.spaces.push(n):ceramic_App.app.logger.warning("Space already added to NapeSystem",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:76,className:"ceramic.NapeSystem",methodName:"addSpace"})},removeSpace:function(n){HxOverrides.remove(this.spaces,n)||ceramic_App.app.logger.warning("Space not removed from NapeSystem because it was not added at the first place",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:84,className:"ceramic.NapeSystem",methodName:"removeSpace"})},updateSpaces:function(n){this.emitUpdateSpaces(n);for(var e=0,t=this.spaces.length;e<t;){var i=e++;this.spaces[i].step(n)}},updateSpace:function(n,e){n.step(e)},earlyUpdate:function(n){if(!(n<=0)){this._freezeItems=!0;for(var e=0,t=this.items.length;e<t;){var i=e++;if((l=this.items[i])._lifecycleState>=0)null==(s=l.visual)?(ceramic_App.app.logger.warning("Pre updating nape body with no visual, destroy item!",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:117,className:"ceramic.NapeSystem",methodName:"earlyUpdate"}),l.destroy()):s._lifecycleState<0&&(ceramic_App.app.logger.warning("Pre updating nape body with destroyed visual, destroy item!",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:121,className:"ceramic.NapeSystem",methodName:"earlyUpdate"}),l.destroy())}for(this._freezeItems=!1;this._destroyedItems.length>0;){var r=this._destroyedItems.pop();HxOverrides.remove(this.items,r)}for(;this._createdItems.length>0;){r=this._createdItems.pop();this.items.push(r)}this.emitUpdateSpaces(n);for(e=0,t=this.spaces.length;e<t;){i=e++;this.spaces[i].step(n)}this.emitBeginUpdateVisuals(),this._freezeItems=!0;for(e=0,t=this.items.length;e<t;){var l,s;i=e++;if((l=this.items[i])._lifecycleState>=0)if(null==(s=l.visual))ceramic_App.app.logger.warning("Post updating nape body with no visual, destroy item!",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:149,className:"ceramic.NapeSystem",methodName:"updateVisuals"}),l.destroy();else if(s._lifecycleState<0)ceramic_App.app.logger.warning("Post updating nape body with destroyed visual, destroy item!",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:153,className:"ceramic.NapeSystem",methodName:"updateVisuals"}),l.destroy();else{r=l.body;var a=s.get_width()*s.scaleX,o=s.get_height()*s.scaleY,p=!r.zpp_inner.norotate,h=ceramic_NapeSystem._matrix;h.a=1,h.b=0,h.c=0,h.d=1,h.tx=0,h.ty=0,h.changedDirty=!0;var u=ceramic_NapeSystem._matrix;if(u.tx+=a*(.5-s.anchorX),u.ty+=o*(.5-s.anchorY),u.changedDirty=!0,p){var _=ceramic_NapeSystem._matrix,c=r.zpp_inner.rot,d=Math.cos(c),f=Math.sin(c),x=_.a*d-_.b*f;_.b=_.a*f+_.b*d,_.a=x;var b=_.c*d-_.d*f;_.d=_.c*f+_.d*d,_.c=b;var y=_.tx*d-_.ty*f;_.ty=_.tx*f+_.ty*d,_.tx=y,_.changedDirty=!0}null==r.zpp_inner.wrap_pos&&r.zpp_inner.setupPosition();var v=r.zpp_inner.wrap_pos;if(null!=v&&v.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var m=v.zpp_inner;null!=m._validate&&m._validate();var g=v.zpp_inner.x-ceramic_NapeSystem._matrix.tx;null==r.zpp_inner.wrap_pos&&r.zpp_inner.setupPosition();var z=r.zpp_inner.wrap_pos;if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var w=z.zpp_inner;null!=w._validate&&w._validate();var O=z.zpp_inner.y-ceramic_NapeSystem._matrix.ty;s.set_x(g),s.set_y(O),p&&s.set_rotation(57.29577951308232*r.zpp_inner.rot)}}for(this._freezeItems=!1;this._destroyedItems.length>0;){r=this._destroyedItems.pop();HxOverrides.remove(this.items,r)}for(;this._createdItems.length>0;){r=this._createdItems.pop();this.items.push(r)}this.emitEndUpdateVisuals()}},updateVisuals:function(n){this.emitBeginUpdateVisuals(),this._freezeItems=!0;for(var e=0,t=this.items.length;e<t;){var i=e++,r=this.items[i];if(r._lifecycleState>=0){var l=r.visual;if(null==l)ceramic_App.app.logger.warning("Post updating nape body with no visual, destroy item!",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:149,className:"ceramic.NapeSystem",methodName:"updateVisuals"}),r.destroy();else if(l._lifecycleState<0)ceramic_App.app.logger.warning("Post updating nape body with destroyed visual, destroy item!",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/nape/runtime/src/ceramic/NapeSystem.hx",lineNumber:153,className:"ceramic.NapeSystem",methodName:"updateVisuals"}),r.destroy();else{var s=r.body,a=l.get_width()*l.scaleX,o=l.get_height()*l.scaleY,p=!s.zpp_inner.norotate,h=ceramic_NapeSystem._matrix;h.a=1,h.b=0,h.c=0,h.d=1,h.tx=0,h.ty=0,h.changedDirty=!0;var u=ceramic_NapeSystem._matrix;if(u.tx+=a*(.5-l.anchorX),u.ty+=o*(.5-l.anchorY),u.changedDirty=!0,p){var _=ceramic_NapeSystem._matrix,c=s.zpp_inner.rot,d=Math.cos(c),f=Math.sin(c),x=_.a*d-_.b*f;_.b=_.a*f+_.b*d,_.a=x;var b=_.c*d-_.d*f;_.d=_.c*f+_.d*d,_.c=b;var y=_.tx*d-_.ty*f;_.ty=_.tx*f+_.ty*d,_.tx=y,_.changedDirty=!0}null==s.zpp_inner.wrap_pos&&s.zpp_inner.setupPosition();var v=s.zpp_inner.wrap_pos;if(null!=v&&v.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var m=v.zpp_inner;null!=m._validate&&m._validate();var g=v.zpp_inner.x-ceramic_NapeSystem._matrix.tx;null==s.zpp_inner.wrap_pos&&s.zpp_inner.setupPosition();var z=s.zpp_inner.wrap_pos;if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var w=z.zpp_inner;null!=w._validate&&w._validate();var O=z.zpp_inner.y-ceramic_NapeSystem._matrix.ty;l.set_x(g),l.set_y(O),p&&l.set_rotation(57.29577951308232*s.zpp_inner.rot)}}}for(this._freezeItems=!1;this._destroyedItems.length>0;){s=this._destroyedItems.pop();HxOverrides.remove(this.items,s)}for(;this._createdItems.length>0;){s=this._createdItems.pop();this.items.push(s)}this.emitEndUpdateVisuals()},flushDestroyedItems:function(){for(;this._destroyedItems.length>0;){var n=this._destroyedItems.pop();HxOverrides.remove(this.items,n)}},flushCreatedItems:function(){for(;this._createdItems.length>0;){var n=this._createdItems.pop();this.items.push(n)}},unbindEvents:function(){ceramic_System.prototype.unbindEvents.call(this),this.offUpdateSpaces(),this.offBeginUpdateVisuals(),this.offEndUpdateVisuals()},__class__:ceramic_NapeSystem});var ceramic_Path=function(n){switch(n){case".":case"..":return this.dir=n,void(this.file="")}var e=n.lastIndexOf("/"),t=n.lastIndexOf("\\");e<t?(this.dir=HxOverrides.substr(n,0,t),n=HxOverrides.substr(n,t+1,null),this.backslash=!0):t<e?(this.dir=HxOverrides.substr(n,0,e),n=HxOverrides.substr(n,e+1,null)):this.dir=null;var i=n.lastIndexOf(".");-1!=i?(this.ext=HxOverrides.substr(n,i+1,null),this.file=HxOverrides.substr(n,0,i)):(this.ext=null,this.file=n)};t["ceramic.Path"]=ceramic_Path,ceramic_Path.__name__="ceramic.Path",ceramic_Path.withoutExtension=function(n){var e=new ceramic_Path(n);return e.ext=null,e.toString()},ceramic_Path.withoutDirectory=function(n){var e=new ceramic_Path(n);return e.dir=null,e.toString()},ceramic_Path.directory=function(n){var e=new ceramic_Path(n);return null==e.dir?"":e.dir},ceramic_Path.extension=function(n){var e=new ceramic_Path(n);return null==e.ext?"":e.ext},ceramic_Path.withExtension=function(n,e){var t=new ceramic_Path(n);return t.ext=e,t.toString()},ceramic_Path.join=function(n){for(var e=[],t=0,i=n;t<i.length;){var r=i[t];++t,null!=r&&""!=r&&e.push(r)}if(0==(n=e).length)return"";var l=n[0];for(e=1,t=n.length;e<t;){var s=e++;l=ceramic_Path.addTrailingSlash(l),l+=n[s]}return ceramic_Path.normalize(l)},ceramic_Path.normalize=function(n){var e="/";if((n=n.split("\\").join(e))==e)return e;for(var t=[],i=0,r=n.split(e);i<r.length;){var l=r[i];++i,".."==l&&t.length>0&&".."!=t[t.length-1]?t.pop():"."!=l&&t.push(l)}for(var s=t.join(e),a=-1;-1!=(a=s.indexOf("//"));)s=s.substring(0,a)+s.substring(a+1);var o="",p=!1,h=!1;for(i=0,r=s.length;i<r;){var u=i++,_=s.charCodeAt(u);switch(_){case 47:if(p){var c=_;p=!1,h&&(o+="/",h=!1),o+=String.fromCodePoint(c)}else h=!0;break;case 58:o+=":",p=!0;break;default:var d=_;p=!1,h&&(o+="/",h=!1),o+=String.fromCodePoint(d)}}return o},ceramic_Path.addTrailingSlash=function(n){if(0==n.length)return"/";var e=n.lastIndexOf("/"),t=n.lastIndexOf("\\");return e<t?t!=n.length-1?n+"\\":n:e!=n.length-1?n+"/":n},ceramic_Path.removeTrailingSlashes=function(n){n:for(;;){var e=HxOverrides.cca(n,n.length-1);if(null==e)break;switch(e){case 47:case 92:n=HxOverrides.substr(n,0,-1);break;default:break n}}return n},ceramic_Path.isAbsolute=function(n){return!!StringTools.startsWith(n,"/")||(":"==n.charAt(1)||!!StringTools.startsWith(n,"\\\\"))},ceramic_Path.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:ceramic_Path};var ceramic_PersistentData=function(n){this.id=n;var e=ceramic_App.app.backend.io.readString("persistent_"+n);if(null!=e)try{var t=new haxe_Unserializer(e);this.internalData=t.unserialize()}catch(e){ceramic_App.app.logger.warning("Failed to read persistent data with id "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/PersistentData.hx",lineNumber:22,className:"ceramic.PersistentData",methodName:"new"})}null==this.internalData&&(this.internalData={})};t["ceramic.PersistentData"]=ceramic_PersistentData,ceramic_PersistentData.__name__="ceramic.PersistentData",ceramic_PersistentData.prototype={get:function(n){return this.internalData[n]},set:function(n,e){this.internalData[n]=e},remove:function(n){Reflect.deleteField(this.internalData,n)},clear:function(){for(var n=0,e=Reflect.fields(this.internalData);n<e.length;){var t=e[n];++n,Reflect.deleteField(this.internalData,t)}},exists:function(n){return Object.prototype.hasOwnProperty.call(this.internalData,n)},keys:function(){return Reflect.fields(this.internalData)},save:function(){var n=new haxe_Serializer;n.serialize(this.internalData);var e=n.toString();ceramic_App.app.backend.io.saveString("persistent_"+this.id,e)},__class__:ceramic_PersistentData};var ceramic_PlatformSpecific=function(){};t["ceramic.PlatformSpecific"]=ceramic_PlatformSpecific,ceramic_PlatformSpecific.__name__="ceramic.PlatformSpecific",ceramic_PlatformSpecific.postAppInit=function(){},ceramic_PlatformSpecific.readStringFromAsset=function(n){return null},ceramic_PlatformSpecific.readBytesFromAsset=function(n){return null},ceramic_PlatformSpecific.getAssetsPath=function(){return null},ceramic_PlatformSpecific.getRtti=function(n){return haxe_rtti_Rtti.getRtti(n)},ceramic_PlatformSpecific.nodeRequire=function(n){return null},ceramic_PlatformSpecific.quit=function(){clay_Clay.app.shutdown()};var ceramic_PremultiplyAlpha=function(){};t["ceramic.PremultiplyAlpha"]=ceramic_PremultiplyAlpha,ceramic_PremultiplyAlpha.__name__="ceramic.PremultiplyAlpha",ceramic_PremultiplyAlpha.premultiplyAlpha=function(n){for(var e=n.length,t=0;t<e;){var i=n[t],r=n[t+1],l=n[t+2],s=n[t+3]/255;n[t]=i*s|0,n[t+1]=r*s|0,n[t+2]=l*s|0,t+=4}},ceramic_PremultiplyAlpha.reversePremultiplyAlpha=function(n){for(var e=n.length,t=0;t<e;){var i=n[t],r=n[t+1],l=n[t+2],s=n[t+3]/255;s>0&&(n[t]=i/s|0,n[t+1]=r/s|0,n[t+2]=l/s|0),t+=4}};var ceramic_Texture=function(n,e){null==e&&(e=-1),this.asset=null,this.filter=v.LINEAR,this.asRenderTexture=null,this.isRenderTexture=!1,this.index=ceramic_Texture._nextIndex++,ceramic_Entity.call(this),-1==e&&(e=ceramic_App.app.screen.get_texturesDensity()),this.backendItem=n,this.set_density(e)};t["ceramic.Texture"]=ceramic_Texture,ceramic_Texture.__name__="ceramic.Texture",ceramic_Texture.fromPixels=function(n,e,t,i){null==i&&(i=1);var r=ceramic_App.app.backend.textures.createTexture(Math.round(n*i),Math.round(e*i),t);return new ceramic_Texture(r,i)},ceramic_Texture.__super__=ceramic_Entity,ceramic_Texture.prototype=$extend(ceramic_Entity.prototype,{get_textureId:function(){return this.backendItem.textureId},get_nativeWidth:function(){return this.backendItem.width},get_nativeHeight:function(){return this.backendItem.height},get_nativeWidthActual:function(){return this.backendItem.widthActual},get_nativeHeightActual:function(){return this.backendItem.heightActual},set_density:function(n){return this.density==n||(this.density=n,this.width=this.backendItem.width/n,this.height=this.backendItem.height/n),n},set_filter:function(n){if(this.filter==n)return n;this.filter=n;ceramic_App.app.backend.textures;var e=this.backendItem;switch(n._hx_index){case 0:e.set_filterMin(9729),e.set_filterMag(9729);break;case 1:e.set_filterMin(9728),e.set_filterMag(9728)}return n},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy(),ceramic_App.app.backend.textures.destroyTexture(this.backendItem),this.backendItem=null)},fetchPixels:function(n){return ceramic_App.app.backend.textures.fetchTexturePixels(this.backendItem,n)},submitPixels:function(n){ceramic_App.app.backend.textures.submitTexturePixels(this.backendItem,n)},_toPng:function(n,e,t){null==e&&(e=!0),ceramic_App.app.backend.textures.textureToPng(this.backendItem,e,n,t)},toString:function(){if(null!=this.id){var n=this.id;return StringTools.startsWith(n,"texture:")&&(n=HxOverrides.substr(n,8,null)),"Texture("+n+" "+this.width+" "+this.height+" "+this.density+" #"+this.index+")"}return"Texture("+this.width+" "+this.height+" "+this.density+" #"+this.index+")"},__class__:ceramic_Texture,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_filter:"set_filter",set_density:"set_density",get_nativeHeightActual:"get_nativeHeightActual",get_nativeWidthActual:"get_nativeWidthActual",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth",get_textureId:"get_textureId"})});var ceramic_RenderTexture=function(n,e,t){null==t&&(t=-1),this._initialClearQuad=null,this._renderedOnce=!1,this._usedInRendering=!1,this.priority=0,this.dependingTextures=null,this.renderDirty=!1,this.clearOnRender=!0,this.autoRender=!0,-1==t&&(t=ceramic_App.app.screen.get_texturesDensity());var i=ceramic_App.app.backend.textures,r=Math.round(n*t),l=Math.round(e*t),s="render:"+i.nextRenderIndex++,a=new clay_graphics_RenderTexture;a.id=s,a.width=r,a.height=l,a.stencil=!0,a.init(),i.loadedTexturesRetainCount.h[s]=1;var o=a;ceramic_Texture.call(this,o,t),this.isRenderTexture=!0,this.asRenderTexture=this,ceramic_App.app.renderTextures.push(this),this._initialClearQuad=new ceramic_Quad,(i=this._initialClearQuad).set_x(0),i.set_y(0),(i=this._initialClearQuad).set_width(0),i.set_height(0),(i=this._initialClearQuad).flags&=-17,this._initialClearQuad.set_renderTarget(this),this.renderDirty=!0};t["ceramic.RenderTexture"]=ceramic_RenderTexture,ceramic_RenderTexture.__name__="ceramic.RenderTexture",ceramic_RenderTexture.__super__=ceramic_Texture,ceramic_RenderTexture.prototype=$extend(ceramic_Texture.prototype,{set__renderedOnce:function(n){return this._renderedOnce=n,n&&null!=this._initialClearQuad&&(this._initialClearQuad.destroy(),this._initialClearQuad=null),n},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Texture.prototype.destroy.call(this),null!=this._initialClearQuad&&(this._initialClearQuad.destroy(),this._initialClearQuad=null),HxOverrides.remove(ceramic_App.app.renderTextures,this))},stamp:function(n,e){this._stamp(n,e)},_stamp:function(n,e){var t=this,i=n.parent,r=n.renderTarget,l=n.visible;null!=i&&i.remove(n),n.set_renderTarget(this),n.set_visible(!0),ceramic_App.app.oncePreUpdate(this,(function(s){t.renderDirty=!0,ceramic_App.app.onceFinishDraw(t,(function(){n.set_visible(l),n.set_renderTarget(r),null!=i&&(i.add(n),i=null),n=null,r=null,e(),e=null}))}))},clear:function(n,e,t,i,r,l,s){(null==l&&(l=-1),null==r&&(r=-1),null==i&&(i=-1),null==t&&(t=-1),null==e&&(e=0),null==n&&(n=16777215),null==ceramic_RenderTexture._clearQuad)&&(ceramic_RenderTexture._clearQuad=new ceramic_Quad,ceramic_RenderTexture._clearQuad.set_active(!1),ceramic_RenderTexture._clearQuad.set_blending(4),(a=ceramic_RenderTexture._clearQuad).set_anchorX(0),a.set_anchorY(0));if(ceramic_RenderTexture._clearQuad.color=n,ceramic_RenderTexture._clearQuad.set_alpha(e),ceramic_RenderTexture._clearQuad.set_depth(-1),-1!=t&&-1!=i&&-1!=r&&-1!=l){(a=ceramic_RenderTexture._clearQuad).set_width(r),a.set_height(l),(a=ceramic_RenderTexture._clearQuad).set_x(t),a.set_y(i)}else{var a=ceramic_RenderTexture._clearQuad,o=this.height;a.set_width(this.width),a.set_height(o),(a=ceramic_RenderTexture._clearQuad).set_x(0),a.set_y(0)}this.stamp(ceramic_RenderTexture._clearQuad,s)},dependsOnTexture:function(n){if(null!=this.dependingTextures){var e=this.dependingTextures.h[0|n.index];return(null!=e?e:0)>0}return!1},dependsOnTextureCount:function(n){if(null!=this.dependingTextures){var e=this.dependingTextures.h[0|n.index];return null!=e?e:0}return 0},incrementDependingTextureCount:function(n){if(null==this.dependingTextures){var e=new haxe_ds_IntMap;this.dependingTextures=e}var t=(null!=(t=this.dependingTextures.h[0|n.index])?t:0)+1;this.dependingTextures.h[0|n.index]=t},resetDependingTextureCounts:function(){null!=this.dependingTextures&&(this.dependingTextures.h={})},toString:function(){if(null!=this.id){var n=this.id;return StringTools.startsWith(n,"texture:")&&(n=HxOverrides.substr(n,8,null)),"RenderTexture("+n+" "+this.width+" "+this.height+" "+this.density+" #"+this.index+"/"+this.priority+")"}return"RenderTexture("+this.width+" "+this.height+" "+this.density+" #"+this.index+"/"+this.priority+")"},__class__:ceramic_RenderTexture,__properties__:$extend(ceramic_Texture.prototype.__properties__,{set__renderedOnce:"set__renderedOnce"})});var ceramic_Renderer=function(){this.usedRenderTarget=null,this.activeShaderCanBatchMultipleTextures=!1,this.maxUsableTexturesInBatch=-1,this.usedTextures=0,this.usedTextureIndexes=[],this.z=0,this.stateDirty=!0,this.mesh=null,this.quad=null,this.defaultWhiteTexture=null,this.defaultTexturedShader=null,this.texHeightActual=0,this.texWidthActual=0,this.texHeight=0,this.texWidth=0,this.activeTextureSlot=0,this.lastClip=null,this.lastComputedBlending=1,this.lastRenderTarget=null,this.lastShader=null,this.lastTextureId=null,this.lastTexture=null,this.stencilClip=!1,this.customFloatAttributesSize=0,this.activeShader=null,this.drawCalls=0,ceramic_Entity.call(this)};t["ceramic.Renderer"]=ceramic_Renderer,ceramic_Renderer.__name__="ceramic.Renderer",ceramic_Renderer.__super__=ceramic_Entity,ceramic_Renderer.prototype=$extend(ceramic_Entity.prototype,{render:function(n,e){var t=ceramic_App.app.backend.draw;for(this.backendTextures=ceramic_App.app.backend.textures,this.backendShaders=ceramic_App.app.backend.shaders,this.defaultTexturedShader=ceramic_App.app.defaultTexturedShader.backendItem,this.defaultWhiteTexture=ceramic_App.app.defaultWhiteTexture,this.maxUsableTexturesInBatch=0|Math.min(this.backendTextures.maxTexturesByBatch(),this.backendShaders.maxIfStatementsByFragmentShader());this.usedTextureIndexes.length<this.maxUsableTexturesInBatch;)this.usedTextureIndexes.push(0);this.usedRenderTarget=null,this.drawCalls=0,backend_Draw._activeTextureSlot=0,backend_Draw._buffersIndex=-1,t.prepareNextBuffers(),this.quad=null,this.mesh=null,this.lastTexture=null,this.lastTextureId=null,this.lastShader=null,this.lastRenderTarget=null,this.lastComputedBlending=1,this.lastClip=null,this.usedTextures=0,this.texWidth=0,this.texHeight=0,this.texWidthActual=0,this.texHeightActual=0,this.stencilClip=!1,this.z=0,this.stateDirty=!0;ceramic_App.app.defaultTexturedShader.backendItem;for(var i=0,r=(U=ceramic_App.app.renderTextures).length;i<r;){(T=U[i++])._usedInRendering=!1,T.autoRender&&(T.renderDirty=!0)}if(clay_opengl_web_GL.gl.enableVertexAttribArray(0),clay_opengl_web_GL.gl.enableVertexAttribArray(1),clay_opengl_web_GL.gl.enableVertexAttribArray(2),this.usedTextures=this.maxUsableTexturesInBatch,this.unbindUsedTextures(t),backend_Draw._activeTextureSlot=0,0!=clay_opengl_GLGraphics._activeTextureSlot){for(clay_opengl_GLGraphics._activeTextureSlot=0;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984)}this.activeTextureSlot=0;var l=null;if(null==(M=!0)&&(M=!1),backend_Draw._currentRenderTarget!=l||M)if(backend_Draw._currentRenderTarget=l,null!=l){null!=(k=(T=l.backendItem).renderTarget)?(clay_opengl_GLGraphics.bindFramebuffer(k.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(k.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));var s=0,a=0,o=((S=l.width)+s)/(I=S-s),p=(a+(A=l.height))/(N=a-A),h=((V=-1e3)+(P=1e3))/(F=V-P);(v=backend_Draw._projectionMatrix)[0]=2/I,v[4]=0,v[8]=0,v[12]=-o,v[1]=0,v[5]=2/N,v[9]=0,v[13]=-p,v[2]=0,v[6]=0,v[10]=-2/F,v[14]=-h,v[3]=0,v[7]=0,v[11]=0,v[15]=1,(u=backend_Draw._renderTargetTransform).a=1,u.b=0,u.c=0,u.d=1,u.tx=0,u.ty=0,u.changedDirty=!0;var u=backend_Draw._renderTargetTransform,_=l.density,c=l.density;u.a*=_,u.b*=c,u.c*=_,u.d*=c,u.tx*=_,u.ty*=c,u.changedDirty=!0;var d=l.density,f=l.width,x=l.height;if(null==(D=-1)&&(D=1),null!=(m=backend_Draw._renderTargetTransform)){if((u=backend_Draw._modelViewTransform).a=m.a,u.b=m.b,u.c=m.c,u.d=m.d,u.tx=m.tx,u.ty=m.ty,u.changedDirty=!0,0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;var b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;var y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0}else{(u=backend_Draw._modelViewTransform).a=1,u.b=0,u.c=0,u.d=1,u.tx=0,u.ty=0,u.changedDirty=!0}o=backend_Draw._modelViewTransform.tx,p=backend_Draw._modelViewTransform.ty;if((u=backend_Draw._modelViewTransform).tx+=-o,u.ty+=-p,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).a*=d,u.b*=d,u.c*=d,u.d*=d,u.tx*=d,u.ty*=d,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).tx+=o,u.ty+=p,u.changedDirty=!0,-1==D)(u=backend_Draw._modelViewTransform).tx+=.5*-f,u.ty+=.5*-x,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).a*=1,u.b*=-1,u.c*=1,u.d*=-1,u.tx*=1,u.ty*=-1,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).tx+=.5*f,u.ty+=.5*x,u.changedDirty=!0;if(0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0;var v=backend_Draw._modelViewMatrix,m=backend_Draw._modelViewTransform;v[0]=m.a,v[4]=m.c,v[8]=0,v[12]=m.tx,v[1]=m.b,v[5]=m.d,v[9]=0,v[13]=m.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,clay_opengl_web_GL.gl.viewport(0,0,l.width*l.density|0,l.height*l.density|0),l.clearOnRender&&clay_opengl_GLGraphics.clear((backend_Draw._blackTransparentColor>>16&255)/255,(backend_Draw._blackTransparentColor>>8&255)/255,(255&backend_Draw._blackTransparentColor)/255,(backend_Draw._blackTransparentColor>>24&255)/255)}else{null!=(l=null)?(clay_opengl_GLGraphics.bindFramebuffer(l.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(l.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));s=0,a=0,o=((S=clay_Clay.app.screenWidth)+s)/(I=S-s),p=(a+(A=clay_Clay.app.screenHeight))/(N=a-A),h=((V=-1e3)+(P=1e3))/(F=V-P);(v=backend_Draw._projectionMatrix)[0]=2/I,v[4]=0,v[8]=0,v[12]=-o,v[1]=0,v[5]=2/N,v[9]=0,v[13]=-p,v[2]=0,v[6]=0,v[10]=-2/F,v[14]=-h,v[3]=0,v[7]=0,v[11]=0,v[15]=1;d=clay_Clay.app.screenDensity,f=clay_Clay.app.screenWidth,x=clay_Clay.app.screenHeight;if(null!=(m=ceramic_App.app.screen.matrix)){if((u=backend_Draw._modelViewTransform).a=m.a,u.b=m.b,u.c=m.c,u.d=m.d,u.tx=m.tx,u.ty=m.ty,u.changedDirty=!0,0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0}else{(u=backend_Draw._modelViewTransform).a=1,u.b=0,u.c=0,u.d=1,u.tx=0,u.ty=0,u.changedDirty=!0}o=backend_Draw._modelViewTransform.tx,p=backend_Draw._modelViewTransform.ty;if((u=backend_Draw._modelViewTransform).tx+=-o,u.ty+=-p,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).a*=d,u.b*=d,u.c*=d,u.d*=d,u.tx*=d,u.ty*=d,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).tx+=o,u.ty+=p,u.changedDirty=!0,0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0;v=backend_Draw._modelViewMatrix,m=backend_Draw._modelViewTransform;v[0]=m.a,v[4]=m.c,v[8]=0,v[12]=m.tx,v[1]=m.b,v[5]=m.d,v[9]=0,v[13]=m.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,clay_opengl_web_GL.gl.viewport(0,0,clay_Clay.app.screenWidth*clay_Clay.app.screenDensity|0,clay_Clay.app.screenHeight*clay_Clay.app.screenDensity|0)}var g=ceramic_App.app.settings.get_background();if(clay_opengl_web_GL.gl.clearColor((g>>16&255)/255,(g>>8&255)/255,(255&g)/255,1),clay_Clay.app.config.render.depth>0?(clay_opengl_web_GL.gl.clear(16640),clay_opengl_web_GL.gl.clearDepth(1)):clay_opengl_web_GL.gl.clear(16384),clay_opengl_web_GL.gl.enable(3042),this.activeShader=null,this.lastShader=null,this.useShader(t,null),clay_opengl_web_GL.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,clay_opengl_web_GL.gl.stencilFunc(519,1,255),clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.colorMask(!0,!0,!0,!0),clay_opengl_web_GL.gl.disable(2960),null!=e){for(i=0,r=e.length;i<r;){var z=e[i++],w=z.asQuad,O=z.asMesh;if(z.computedVisible&&(null==z.computedRenderTarget||z.computedRenderTarget.renderDirty)){var C;if(z.computedClip){for(var E=z;null!=E&&null==E.clip;)E=E.parent;C=null!=E?E.clip:null}else C=null;C!=this.lastClip&&(this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0,null!=this.lastClip&&(this.lastRenderTarget=this.lastClip.computedRenderTarget,this.useRenderTarget(t,this.lastRenderTarget),clay_opengl_web_GL.gl.stencilFunc(519,1,255),clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.colorMask(!0,!0,!0,!0),clay_opengl_web_GL.gl.disable(2960)),this.lastClip=C,null!=this.lastClip&&(this.lastRenderTarget=this.lastClip.computedRenderTarget,this.useRenderTarget(t,this.lastRenderTarget),backend_Draw._drawingInStencilBuffer=!0,clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.clearStencil(255),clay_opengl_web_GL.gl.clear(1024),clay_opengl_web_GL.gl.enable(2960),clay_opengl_web_GL.gl.stencilOp(7680,7680,7681),clay_opengl_web_GL.gl.stencilFunc(519,1,255),clay_opengl_web_GL.gl.stencilMask(255),clay_opengl_web_GL.gl.colorMask(!1,!1,!1,!1),null!=this.lastClip.asQuad?(w=this.lastClip.asQuad,this.stencilClip=!0,this.drawQuad(t,w),this.stencilClip=!1,w=z.asQuad):null!=this.lastClip.asMesh&&(O=this.lastClip.asMesh,this.stencilClip=!0,this.drawMesh(t,O),this.stencilClip=!1,O=z.asMesh),this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0,backend_Draw._drawingInStencilBuffer=!1,clay_opengl_web_GL.gl.stencilFunc(514,1,255),clay_opengl_web_GL.gl.stencilMask(0),clay_opengl_web_GL.gl.colorMask(!0,!0,!0,!0),clay_opengl_web_GL.gl.enable(2960))),null!=w&&16!=(16&w.flags)?this.drawQuad(t,w):null!=O&&this.drawMesh(t,O)}}this.flush(t),this.unbindUsedTextures(t),this.stateDirty=!0}var U;for(i=0,r=(U=ceramic_App.app.renderTextures).length;i<r;){(T=U[i++]).renderDirty=!1}if(backend_Draw._activeTextureSlot=0,0!=clay_opengl_GLGraphics._activeTextureSlot){for(clay_opengl_GLGraphics._activeTextureSlot=0;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984)}this.activeTextureSlot=0;var M;l=null;if(null==(M=!0)&&(M=!1),backend_Draw._currentRenderTarget!=l||M)if(backend_Draw._currentRenderTarget=l,null!=l){var T,k;null!=(k=(T=l.backendItem).renderTarget)?(clay_opengl_GLGraphics.bindFramebuffer(k.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(k.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));s=0,a=0,o=((S=l.width)+s)/(I=S-s),p=(a+(A=l.height))/(N=a-A),h=((V=-1e3)+(P=1e3))/(F=V-P);(v=backend_Draw._projectionMatrix)[0]=2/I,v[4]=0,v[8]=0,v[12]=-o,v[1]=0,v[5]=2/N,v[9]=0,v[13]=-p,v[2]=0,v[6]=0,v[10]=-2/F,v[14]=-h,v[3]=0,v[7]=0,v[11]=0,v[15]=1,(u=backend_Draw._renderTargetTransform).a=1,u.b=0,u.c=0,u.d=1,u.tx=0,u.ty=0,u.changedDirty=!0;u=backend_Draw._renderTargetTransform,_=l.density,c=l.density;u.a*=_,u.b*=c,u.c*=_,u.d*=c,u.tx*=_,u.ty*=c,u.changedDirty=!0;var D;d=l.density,f=l.width,x=l.height;if(null==(D=-1)&&(D=1),null!=(m=backend_Draw._renderTargetTransform)){if((u=backend_Draw._modelViewTransform).a=m.a,u.b=m.b,u.c=m.c,u.d=m.d,u.tx=m.tx,u.ty=m.ty,u.changedDirty=!0,0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0}else{(u=backend_Draw._modelViewTransform).a=1,u.b=0,u.c=0,u.d=1,u.tx=0,u.ty=0,u.changedDirty=!0}o=backend_Draw._modelViewTransform.tx,p=backend_Draw._modelViewTransform.ty;if((u=backend_Draw._modelViewTransform).tx+=-o,u.ty+=-p,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).a*=d,u.b*=d,u.c*=d,u.d*=d,u.tx*=d,u.ty*=d,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).tx+=o,u.ty+=p,u.changedDirty=!0,-1==D)(u=backend_Draw._modelViewTransform).tx+=.5*-f,u.ty+=.5*-x,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).a*=1,u.b*=-1,u.c*=1,u.d*=-1,u.tx*=1,u.ty*=-1,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).tx+=.5*f,u.ty+=.5*x,u.changedDirty=!0;if(0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0;v=backend_Draw._modelViewMatrix,m=backend_Draw._modelViewTransform;v[0]=m.a,v[4]=m.c,v[8]=0,v[12]=m.tx,v[1]=m.b,v[5]=m.d,v[9]=0,v[13]=m.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,clay_opengl_web_GL.gl.viewport(0,0,l.width*l.density|0,l.height*l.density|0),l.clearOnRender&&clay_opengl_GLGraphics.clear((backend_Draw._blackTransparentColor>>16&255)/255,(backend_Draw._blackTransparentColor>>8&255)/255,(255&backend_Draw._blackTransparentColor)/255,(backend_Draw._blackTransparentColor>>24&255)/255)}else{null!=(l=null)?(clay_opengl_GLGraphics.bindFramebuffer(l.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(l.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));var S,A,P,V,I,N,F;s=0,a=0,o=((S=clay_Clay.app.screenWidth)+s)/(I=S-s),p=(a+(A=clay_Clay.app.screenHeight))/(N=a-A),h=((V=-1e3)+(P=1e3))/(F=V-P);(v=backend_Draw._projectionMatrix)[0]=2/I,v[4]=0,v[8]=0,v[12]=-o,v[1]=0,v[5]=2/N,v[9]=0,v[13]=-p,v[2]=0,v[6]=0,v[10]=-2/F,v[14]=-h,v[3]=0,v[7]=0,v[11]=0,v[15]=1;d=clay_Clay.app.screenDensity,f=clay_Clay.app.screenWidth,x=clay_Clay.app.screenHeight;if(null!=(m=ceramic_App.app.screen.matrix)){if((u=backend_Draw._modelViewTransform).a=m.a,u.b=m.b,u.c=m.c,u.d=m.d,u.tx=m.tx,u.ty=m.ty,u.changedDirty=!0,0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0}else{(u=backend_Draw._modelViewTransform).a=1,u.b=0,u.c=0,u.d=1,u.tx=0,u.ty=0,u.changedDirty=!0}var R;o=backend_Draw._modelViewTransform.tx,p=backend_Draw._modelViewTransform.ty;if((u=backend_Draw._modelViewTransform).tx+=-o,u.ty+=-p,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).a*=d,u.b*=d,u.c*=d,u.d*=d,u.tx*=d,u.ty*=d,u.changedDirty=!0,(u=backend_Draw._modelViewTransform).tx+=o,u.ty+=p,u.changedDirty=!0,0==(R=(u=backend_Draw._modelViewTransform).a*u.d-u.b*u.c))u.a=u.b=u.c=u.d=0,u.tx=-u.tx,u.ty=-u.ty;else{R=1/R;b=u.d*R;u.d=u.a*R,u.a=b,u.b*=-R,u.c*=-R;y=-u.a*u.tx-u.c*u.ty;u.ty=-u.b*u.tx-u.d*u.ty,u.tx=y}u.changedDirty=!0;v=backend_Draw._modelViewMatrix,m=backend_Draw._modelViewTransform;v[0]=m.a,v[4]=m.c,v[8]=0,v[12]=m.tx,v[1]=m.b,v[5]=m.d,v[9]=0,v[13]=m.ty,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1,clay_opengl_web_GL.gl.viewport(0,0,clay_Clay.app.screenWidth*clay_Clay.app.screenDensity|0,clay_Clay.app.screenHeight*clay_Clay.app.screenDensity|0)}clay_opengl_web_GL.gl.enable(3042),this.activeShader=null,this.lastShader=null,this.useShader(t,null),clay_opengl_web_GL.gl.blendFuncSeparate(1,771,1,771)},drawQuad:function(n,e){var t=this;if(this.stencilClip)this.unbindUsedTextures(n),this.useFirstTextureInBatch(n,null),clay_opengl_web_GL.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=e.computedRenderTarget,this.useRenderTarget(n,this.lastRenderTarget),this.lastShader=null,this.useShader(n,null),this.stateDirty=!1;else{var i=null;if(!this.stateDirty){var r=this.computeQuadBlending(e);this.stateDirty=!this.isSameShader(e.shader,this.lastShader)||r!=this.lastComputedBlending||e.computedRenderTarget!=this.lastRenderTarget,this.stateDirty||e._texture!=this.lastTexture&&(null!=e._texture&&null!=this.lastTexture?e._texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(n,e._texture)?i=e._texture:this.stateDirty=!0):this.canUseTextureInSameBatch(n,e._texture)?i=null!=e._texture?e._texture:this.defaultWhiteTexture:this.stateDirty=!0)}this.stateDirty?(t.flush(n),t.unbindUsedTextures(n),t.lastTexture=e._texture,t.useFirstTextureInBatch(n,t.lastTexture),e.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=e.computedRenderTarget,t.useRenderTarget(n,t.lastRenderTarget)),t.lastShader=e.shader,t.useShader(n,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeQuadBlending(e),t.useBlending(n,t.lastComputedBlending),t.stateDirty=!1):null!=i&&this.useTextureInSameBatch(n,i)}(backend_Draw._numPos+4>backend_Draw._maxVerts||backend_Draw._numIndices+6>16384)&&(t.flush(n),t.unbindUsedTextures(n),t.lastTexture=e._texture,t.useFirstTextureInBatch(n,t.lastTexture),e.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=e.computedRenderTarget,t.useRenderTarget(n,t.lastRenderTarget)),t.lastShader=e.shader,t.useShader(n,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeQuadBlending(e),t.useBlending(n,t.lastComputedBlending),t.stateDirty=!1);var l,s,a,o,p=e.get_width(),h=e.get_height(),u=e.matA,_=e.matB,c=e.matC,d=e.matD,f=e.matTX,x=e.matTY,b=this.z,y=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1;if(0==this.customFloatAttributesSize)if(-1!=y){var v=backend_Draw._numPos,m=f+u*p+c*h,g=x+_*p+d*h;backend_Draw._posList[backend_Draw._posIndex]=m,backend_Draw._posList[backend_Draw._posIndex+1]=g,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++,backend_Draw._posList[backend_Draw._posIndex]=f+c*h,backend_Draw._posList[backend_Draw._posIndex+1]=x+d*h,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++,backend_Draw._posList[backend_Draw._posIndex]=f,backend_Draw._posList[backend_Draw._posIndex+1]=x,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++,backend_Draw._posList[backend_Draw._posIndex]=f+u*p,backend_Draw._posList[backend_Draw._posIndex+1]=x+_*p,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+1,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+3,backend_Draw._numIndices++}else{v=backend_Draw._numPos,m=f+u*p+c*h,g=x+_*p+d*h;backend_Draw._posList[backend_Draw._posIndex]=m,backend_Draw._posList[backend_Draw._posIndex+1]=g,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++,backend_Draw._posList[backend_Draw._posIndex]=f+c*h,backend_Draw._posList[backend_Draw._posIndex+1]=x+d*h,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++,backend_Draw._posList[backend_Draw._posIndex]=f,backend_Draw._posList[backend_Draw._posIndex+1]=x,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++,backend_Draw._posList[backend_Draw._posIndex]=f+u*p,backend_Draw._posList[backend_Draw._posIndex+1]=x+_*p,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+1,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+3,backend_Draw._numIndices++}else if(-1!=y){v=backend_Draw._numPos,m=f+u*p+c*h,g=x+_*p+d*h;backend_Draw._posList[backend_Draw._posIndex]=m,backend_Draw._posList[backend_Draw._posIndex+1]=g,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++;for(var z=0,w=t.customFloatAttributesSize;z<w;){var O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._posList[backend_Draw._posIndex]=f+c*h,backend_Draw._posList[backend_Draw._posIndex+1]=x+d*h,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._posList[backend_Draw._posIndex]=f,backend_Draw._posList[backend_Draw._posIndex+1]=x,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._posList[backend_Draw._posIndex]=f+u*p,backend_Draw._posList[backend_Draw._posIndex+1]=x+_*p,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posList[backend_Draw._posIndex+3]=y,backend_Draw._posIndex+=4,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+1,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+3,backend_Draw._numIndices++}else{v=backend_Draw._numPos,m=f+u*p+c*h,g=x+_*p+d*h;backend_Draw._posList[backend_Draw._posIndex]=m,backend_Draw._posList[backend_Draw._posIndex+1]=g,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._posList[backend_Draw._posIndex]=f+c*h,backend_Draw._posList[backend_Draw._posIndex+1]=x+d*h,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._posList[backend_Draw._posIndex]=f,backend_Draw._posList[backend_Draw._posIndex+1]=x,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._posList[backend_Draw._posIndex]=f+u*p,backend_Draw._posList[backend_Draw._posIndex+1]=x+_*p,backend_Draw._posList[backend_Draw._posIndex+2]=b,backend_Draw._posIndex+=3,backend_Draw._numPos++;for(z=0,w=t.customFloatAttributesSize;z<w;){O=z++;backend_Draw._posList[backend_Draw._posIndex+O]=0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+1,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+2,backend_Draw._numIndices++,backend_Draw._indiceList[backend_Draw._numIndices]=v+3,backend_Draw._numIndices++}this.stencilClip?(o=1,l=1,s=0,a=0):3==this.lastComputedBlending?(o=e.computedAlpha,l=(e.color>>16&255)/255,s=(e.color>>8&255)/255,a=(255&e.color)/255,2==e.blending&&2!=this.lastComputedBlending&&(o=0)):(o=e.computedAlpha,l=(e.color>>16&255)/255*o,s=(e.color>>8&255)/255*o,a=(255&e.color)/255*o,2==e.blending&&2!=this.lastComputedBlending&&(o=0));for(var C=0;C<4;)backend_Draw._colorList[backend_Draw._colorIndex]=l,backend_Draw._colorList[backend_Draw._colorIndex+1]=s,backend_Draw._colorList[backend_Draw._colorIndex+2]=a,backend_Draw._colorList[backend_Draw._colorIndex+3]=o,backend_Draw._colorIndex+=4,backend_Draw._numColors++,++C;var E=0,U=0,M=0,T=0;if(null!=e._texture){var k=this.texWidthActual,D=this.texHeightActual,S=e._texture.density;E=e.frameX*S/k,U=e.frameY*S/D,32==(32&e.flags)?(M=e.frameHeight*S/k,T=e.frameWidth*S/D,backend_Draw._uvList[backend_Draw._uvIndex]=E+M,backend_Draw._uvList[backend_Draw._uvIndex+1]=U,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=E+M,backend_Draw._uvList[backend_Draw._uvIndex+1]=U+T,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=E,backend_Draw._uvList[backend_Draw._uvIndex+1]=U+T,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=E,backend_Draw._uvList[backend_Draw._uvIndex+1]=U,backend_Draw._uvIndex+=2,backend_Draw._numUVs++):(M=e.frameWidth*S/k,T=e.frameHeight*S/D,backend_Draw._uvList[backend_Draw._uvIndex]=E+M,backend_Draw._uvList[backend_Draw._uvIndex+1]=U+T,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=E,backend_Draw._uvList[backend_Draw._uvIndex+1]=U+T,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=E,backend_Draw._uvList[backend_Draw._uvIndex+1]=U,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=E+M,backend_Draw._uvList[backend_Draw._uvIndex+1]=U,backend_Draw._uvIndex+=2,backend_Draw._numUVs++)}else backend_Draw._uvList[backend_Draw._uvIndex]=0,backend_Draw._uvList[backend_Draw._uvIndex+1]=0,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=0,backend_Draw._uvList[backend_Draw._uvIndex+1]=0,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=0,backend_Draw._uvList[backend_Draw._uvIndex+1]=0,backend_Draw._uvIndex+=2,backend_Draw._numUVs++,backend_Draw._uvList[backend_Draw._uvIndex]=0,backend_Draw._uvList[backend_Draw._uvIndex+1]=0,backend_Draw._uvIndex+=2,backend_Draw._numUVs++;this.z=b+.001},drawMesh:function(n,e){var t=this;if(this.stencilClip)this.unbindUsedTextures(n),this.useFirstTextureInBatch(n,null),clay_opengl_web_GL.gl.blendFuncSeparate(1,771,1,771),this.lastComputedBlending=1,this.lastRenderTarget=e.computedRenderTarget,this.useRenderTarget(n,this.lastRenderTarget),this.lastShader=null,this.useShader(n,null),this.stateDirty=!1;else{var i=null;if(!this.stateDirty){var r=this.computeMeshBlending(e);this.stateDirty=!this.isSameShader(e.shader,this.lastShader)||r!=this.lastComputedBlending||e.computedRenderTarget!=this.lastRenderTarget,this.stateDirty||e.texture!=this.lastTexture&&(null!=e.texture&&null!=this.lastTexture?e.texture.backendItem.textureId!=this.lastTextureId&&(this.canUseTextureInSameBatch(n,e.texture)?i=e.texture:this.stateDirty=!0):this.canUseTextureInSameBatch(n,e.texture)?i=null!=e.texture?e.texture:this.defaultWhiteTexture:this.stateDirty=!0)}this.stateDirty?(t.flush(n),t.unbindUsedTextures(n),t.lastTexture=e.texture,t.useFirstTextureInBatch(n,t.lastTexture),e.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=e.computedRenderTarget,t.useRenderTarget(n,t.lastRenderTarget)),t.lastShader=e.shader,t.useShader(n,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeMeshBlending(e),t.useBlending(n,t.lastComputedBlending),t.stateDirty=!1):null!=i&&this.useTextureInSameBatch(n,i)}var l=e.matA,s=e.matB,a=e.matC,o=e.matD,p=e.matTX,h=e.matTY,u=this.z,_=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,c=e.colors,d=this.stencilClip||0==e.colorMapping,f=!this.stencilClip&&1==e.colorMapping,x=e.uvs,b=e.vertices,y=e.indices,v=y.length,m=this.customFloatAttributesSize,g=e.customFloatAttributesSize,z=0,w=null!=e.texture&&e.texture.isRenderTexture,O=v;(backend_Draw._numPos+v>backend_Draw._maxVerts||backend_Draw._numIndices+v>16384)&&(t.flush(n),t.unbindUsedTextures(n),t.lastTexture=e.texture,t.useFirstTextureInBatch(n,t.lastTexture),e.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=e.computedRenderTarget,t.useRenderTarget(n,t.lastRenderTarget)),t.lastShader=e.shader,t.useShader(n,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeMeshBlending(e),t.useBlending(n,t.lastComputedBlending),t.stateDirty=!1,_=this.activeShaderCanBatchMultipleTextures?this.activeTextureSlot:-1,(v>backend_Draw._maxVerts-backend_Draw._numPos||v>16384-backend_Draw._numIndices)&&(O=3*((O=0|Math.min(backend_Draw._maxVerts-backend_Draw._numPos,16384-backend_Draw._numIndices))/3|0)));var C=e.texture,E=0,U=0;for(null!=C&&(E=this.texWidth/this.texWidthActual,U=this.texHeight/this.texHeightActual);;){var M=0,T=0,k=0,D=0;if(d)if(t.stencilClip)M=1,T=1,k=0,D=0;else if(3==t.lastComputedBlending){var S=c[0];M=e.computedAlpha*((S>>24&255)/255),T=(S>>16&255)/255,k=(S>>8&255)/255,D=(255&S)/255,2==e.blending&&2!=t.lastComputedBlending&&(M=0)}else{var A=c[0];T=(A>>16&255)/255*(M=e.computedAlpha*((A>>24&255)/255)),k=(A>>8&255)/255*M,D=(255&A)/255*M,2==e.blending&&2!=t.lastComputedBlending&&(M=0)}for(var P=z,V=backend_Draw._numPos;P<O;){var I=y[P],N=2*I,F=I*(2+g),R=b[F++],L=b[F++];if(backend_Draw._indiceList[backend_Draw._numIndices]=V,backend_Draw._numIndices++,++V,-1!=_?(backend_Draw._posList[backend_Draw._posIndex]=p+l*R+a*L,backend_Draw._posList[backend_Draw._posIndex+1]=h+s*R+o*L,backend_Draw._posList[backend_Draw._posIndex+2]=u,backend_Draw._posList[backend_Draw._posIndex+3]=_,backend_Draw._posIndex+=4,backend_Draw._numPos++):(backend_Draw._posList[backend_Draw._posIndex]=p+l*R+a*L,backend_Draw._posList[backend_Draw._posIndex+1]=h+s*R+o*L,backend_Draw._posList[backend_Draw._posIndex+2]=u,backend_Draw._posIndex+=3,backend_Draw._numPos++),!d){var B=f?c[P]:c[I];w||3==t.lastComputedBlending?(M=e.computedAlpha*((B>>24&255)/255),T=(B>>16&255)/255,k=(B>>8&255)/255,D=(255&B)/255,2==e.blending&&2!=t.lastComputedBlending&&(M=0)):(T=(B>>16&255)/255*(M=e.computedAlpha*((B>>24&255)/255)),k=(B>>8&255)/255*M,D=(255&B)/255*M,2==e.blending&&2!=t.lastComputedBlending&&(M=0))}if(backend_Draw._colorList[backend_Draw._colorIndex]=T,backend_Draw._colorList[backend_Draw._colorIndex+1]=k,backend_Draw._colorList[backend_Draw._colorIndex+2]=D,backend_Draw._colorList[backend_Draw._colorIndex+3]=M,backend_Draw._colorIndex+=4,backend_Draw._numColors++,null!=C){var G=x[N]*E,j=x[N+1]*U;backend_Draw._uvList[backend_Draw._uvIndex]=G,backend_Draw._uvList[backend_Draw._uvIndex+1]=j,backend_Draw._uvIndex+=2,backend_Draw._numUVs++}else backend_Draw._uvList[backend_Draw._uvIndex]=0,backend_Draw._uvList[backend_Draw._uvIndex+1]=0,backend_Draw._uvIndex+=2,backend_Draw._numUVs++;if(0!=m){for(var K=0,W=m;K<W;){var Y=K++;backend_Draw._posList[backend_Draw._posIndex+Y]=Y<g?b[F++]:0}backend_Draw._posIndex+=backend_Draw._floatAttributesSize}++P}if(O==v)break;t.flush(n),t.unbindUsedTextures(n),t.lastTexture=e.texture,t.useFirstTextureInBatch(n,t.lastTexture),e.computedRenderTarget!=t.lastRenderTarget&&(t.lastRenderTarget=e.computedRenderTarget,t.useRenderTarget(n,t.lastRenderTarget)),t.lastShader=e.shader,t.useShader(n,null!=t.lastShader?t.lastShader.backendItem:null),t.lastComputedBlending=t.computeMeshBlending(e),t.useBlending(n,t.lastComputedBlending),t.stateDirty=!1,_=t.activeShaderCanBatchMultipleTextures?t.activeTextureSlot:-1,(O=3*((O=(z=O)+(0|Math.min(backend_Draw._maxVerts-backend_Draw._numPos,16384-backend_Draw._numIndices)))/3|0))>v&&(O=v)}this.z=u+.001},flush:function(n){if(backend_Draw._numPos<=0)return!1;var e=backend_Draw._batchMultiTexture,t=new Float32Array(backend_Draw._posList.buffer,0,4*backend_Draw._posIndex/4|0),i=new Float32Array(backend_Draw._uvList.buffer,0,4*backend_Draw._uvIndex/4|0),r=new Float32Array(backend_Draw._colorList.buffer,0,4*backend_Draw._colorIndex/4|0),l=new Uint16Array(backend_Draw._indiceList.buffer,0,2*backend_Draw._numIndices/2|0),s=clay_opengl_web_GL.gl.createBuffer(),a=clay_opengl_web_GL.gl.createBuffer(),o=clay_opengl_web_GL.gl.createBuffer(),p=clay_opengl_web_GL.gl.createBuffer();clay_opengl_web_GL.gl.enableVertexAttribArray(0),clay_opengl_web_GL.gl.enableVertexAttribArray(1),clay_opengl_web_GL.gl.enableVertexAttribArray(2),clay_opengl_web_GL.gl.bindBuffer(34962,s),clay_opengl_web_GL.gl.vertexAttribPointer(0,3,5126,!1,4*backend_Draw._posSize,0),clay_opengl_web_GL.gl.bufferData(34962,t,35040),clay_opengl_web_GL.gl.bindBuffer(34962,o),clay_opengl_web_GL.gl.vertexAttribPointer(1,2,5126,!1,0,0),clay_opengl_web_GL.gl.bufferData(34962,i,35040),clay_opengl_web_GL.gl.bindBuffer(34962,a),clay_opengl_web_GL.gl.vertexAttribPointer(2,4,5126,!1,0,0),clay_opengl_web_GL.gl.bufferData(34962,r,35040);var h=3,u=3,_=0;if(e){var c=clay_opengl_web_GL.gl.createBuffer();backend_Draw._customGLBuffers[_++]=c,clay_opengl_web_GL.gl.enableVertexAttribArray(u),clay_opengl_web_GL.gl.bindBuffer(34962,c),clay_opengl_web_GL.gl.vertexAttribPointer(u,1,5126,!1,4*backend_Draw._posSize,4*h),clay_opengl_web_GL.gl.bufferData(34962,t,35040),++u,++h}if(null!=backend_Draw._activeShader&&null!=backend_Draw._activeShader.customAttributes){var d=backend_Draw._activeShader.customAttributes,f=_,x=f+d.length;_+=d.length;for(var b=f,y=x;b<y;){var v=d[(m=b++)-f];c=clay_opengl_web_GL.gl.createBuffer();backend_Draw._customGLBuffers[m]=c,clay_opengl_web_GL.gl.enableVertexAttribArray(u),clay_opengl_web_GL.gl.bindBuffer(34962,c),clay_opengl_web_GL.gl.vertexAttribPointer(u,v.size,5126,!1,4*backend_Draw._posSize,4*h),clay_opengl_web_GL.gl.bufferData(34962,t,35040),++u,h+=v.size}}if(clay_opengl_web_GL.gl.bindBuffer(34963,p),clay_opengl_web_GL.gl.bufferData(34963,l,35040),clay_opengl_web_GL.gl.drawElements(4,backend_Draw._numIndices,5123,0),clay_opengl_web_GL.gl.deleteBuffer(s),clay_opengl_web_GL.gl.deleteBuffer(a),clay_opengl_web_GL.gl.deleteBuffer(o),_>0)for(u=3,b=0,y=_;b<y;){var m=b++;c=backend_Draw._customGLBuffers[m];clay_opengl_web_GL.gl.deleteBuffer(c),clay_opengl_web_GL.gl.disableVertexAttribArray(u),++u}return clay_opengl_web_GL.gl.bindBuffer(34963,null),clay_opengl_web_GL.gl.deleteBuffer(p),t=null,i=null,r=null,l=null,backend_Draw._numIndices=0,backend_Draw._numPos=0,backend_Draw._numUVs=0,backend_Draw._numColors=0,backend_Draw._posIndex=0,backend_Draw._uvIndex=0,backend_Draw._colorIndex=0,n.prepareNextBuffers(),this.drawCalls++,!0},computeQuadBlending:function(n){var e=n.blending;return 0!=e&&2!=e||(e=null!=n.computedRenderTarget?5:1),e},computeMeshBlending:function(n){var e=n.blending;return 0!=e&&2!=e||(e=null!=n.computedRenderTarget?5:1),e},isSameShader:function(n,e){return(null!=n?n.backendItem:this.defaultTexturedShader)==(null!=e?e.backendItem:this.defaultTexturedShader)},useShader:function(n,e){null==e&&(e=this.defaultTexturedShader),this.activeShader=e,backend_Draw._activeShader=e,e.uniforms.setMatrix4("projectionMatrix",backend_Draw._projectionMatrix),e.uniforms.setMatrix4("modelViewMatrix",backend_Draw._modelViewMatrix);var t=ceramic_App.app.backend.shaders,i=0;if(null!=(s=backend_Draw._activeShader.customAttributes))for(var r=0,l=s.length;r<l;){i+=s[r++].size}backend_Draw._floatAttributesSize=i,backend_Draw._batchMultiTexture=t.canBatchWithMultipleTextures(backend_Draw._activeShader),backend_Draw._vertexSize=3+backend_Draw._floatAttributesSize+(backend_Draw._batchMultiTexture?1:0),backend_Draw._posSize=backend_Draw._vertexSize,backend_Draw._vertexSize<4&&(backend_Draw._vertexSize=4),backend_Draw._maxVerts=0|Math.floor(65536/backend_Draw._vertexSize),e.activate(),0==backend_Draw._numPos&&(backend_Draw._numIndices=0,backend_Draw._numPos=0,backend_Draw._numUVs=0,backend_Draw._numColors=0,backend_Draw._posIndex=0,backend_Draw._uvIndex=0,backend_Draw._colorIndex=0),this.activeShaderCanBatchMultipleTextures=this.backendShaders.canBatchWithMultipleTextures(e);var s;this.backendShaders,i=0;if(null!=(s=e.customAttributes))for(r=0,l=s.length;r<l;){i+=s[r++].size}this.customFloatAttributesSize=i},useBlending:function(n,e){switch(e){case 0:throw haxe_Exception.thrown("Cannot apply AUTO blending. Needs to be computed to an actual blending function.");case 1:clay_opengl_web_GL.gl.blendFuncSeparate(1,771,1,771);break;case 2:clay_opengl_web_GL.gl.blendFuncSeparate(1,1,1,1);break;case 3:clay_opengl_web_GL.gl.blendFuncSeparate(770,771,1,771);break;case 4:clay_opengl_web_GL.gl.blendFuncSeparate(1,770,1,770);break;case 5:clay_opengl_web_GL.gl.blendFuncSeparate(1,771,773,1);break;case 6:clay_opengl_web_GL.gl.blendFuncSeparate(770,771,773,1)}},isNotRenderedRenderTexture:function(n){var e=n.asRenderTexture;return!(null==e||e._renderedOnce||!e.renderDirty)&&!e._usedInRendering},useRenderTarget:function(n,e){if(this.usedRenderTarget=e,null!=e){if(e._usedInRendering=!0,e.set__renderedOnce(!0),backend_Draw._currentRenderTarget!=e)if(backend_Draw._currentRenderTarget=e,null!=e){null!=(b=e.backendItem.renderTarget)?(clay_opengl_GLGraphics.bindFramebuffer(b.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(b.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));var t=0,i=0,r=((v=e.width)+t)/(w=v-t),l=(i+(m=e.height))/(O=i-m),s=((z=-1e3)+(g=1e3))/(C=z-g);(f=backend_Draw._projectionMatrix)[0]=2/w,f[4]=0,f[8]=0,f[12]=-r,f[1]=0,f[5]=2/O,f[9]=0,f[13]=-l,f[2]=0,f[6]=0,f[10]=-2/C,f[14]=-s,f[3]=0,f[7]=0,f[11]=0,f[15]=1,(a=backend_Draw._renderTargetTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0;var a=backend_Draw._renderTargetTransform,o=e.density,p=e.density;a.a*=o,a.b*=p,a.c*=o,a.d*=p,a.tx*=o,a.ty*=p,a.changedDirty=!0;var h=e.density,u=e.width,_=e.height;if(null==(y=-1)&&(y=1),null!=(x=backend_Draw._renderTargetTransform)){if((a=backend_Draw._modelViewTransform).a=x.a,a.b=x.b,a.c=x.c,a.d=x.d,a.tx=x.tx,a.ty=x.ty,a.changedDirty=!0,0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;var c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;var d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0}else{(a=backend_Draw._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0}r=backend_Draw._modelViewTransform.tx,l=backend_Draw._modelViewTransform.ty;if((a=backend_Draw._modelViewTransform).tx+=-r,a.ty+=-l,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=h,a.b*=h,a.c*=h,a.d*=h,a.tx*=h,a.ty*=h,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=r,a.ty+=l,a.changedDirty=!0,-1==y)(a=backend_Draw._modelViewTransform).tx+=.5*-u,a.ty+=.5*-_,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=1,a.b*=-1,a.c*=1,a.d*=-1,a.tx*=1,a.ty*=-1,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=.5*u,a.ty+=.5*_,a.changedDirty=!0;if(0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0;var f=backend_Draw._modelViewMatrix,x=backend_Draw._modelViewTransform;f[0]=x.a,f[4]=x.c,f[8]=0,f[12]=x.tx,f[1]=x.b,f[5]=x.d,f[9]=0,f[13]=x.ty,f[2]=0,f[6]=0,f[10]=1,f[14]=0,f[3]=0,f[7]=0,f[11]=0,f[15]=1,clay_opengl_web_GL.gl.viewport(0,0,e.width*e.density|0,e.height*e.density|0),e.clearOnRender&&clay_opengl_GLGraphics.clear((backend_Draw._blackTransparentColor>>16&255)/255,(backend_Draw._blackTransparentColor>>8&255)/255,(255&backend_Draw._blackTransparentColor)/255,(backend_Draw._blackTransparentColor>>24&255)/255)}else{null!=(e=null)?(clay_opengl_GLGraphics.bindFramebuffer(e.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(e.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));t=0,i=0,r=((v=clay_Clay.app.screenWidth)+t)/(w=v-t),l=(i+(m=clay_Clay.app.screenHeight))/(O=i-m),s=((z=-1e3)+(g=1e3))/(C=z-g);(f=backend_Draw._projectionMatrix)[0]=2/w,f[4]=0,f[8]=0,f[12]=-r,f[1]=0,f[5]=2/O,f[9]=0,f[13]=-l,f[2]=0,f[6]=0,f[10]=-2/C,f[14]=-s,f[3]=0,f[7]=0,f[11]=0,f[15]=1;h=clay_Clay.app.screenDensity,u=clay_Clay.app.screenWidth,_=clay_Clay.app.screenHeight;if(null!=(x=ceramic_App.app.screen.matrix)){if((a=backend_Draw._modelViewTransform).a=x.a,a.b=x.b,a.c=x.c,a.d=x.d,a.tx=x.tx,a.ty=x.ty,a.changedDirty=!0,0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0}else{(a=backend_Draw._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0}r=backend_Draw._modelViewTransform.tx,l=backend_Draw._modelViewTransform.ty;if((a=backend_Draw._modelViewTransform).tx+=-r,a.ty+=-l,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=h,a.b*=h,a.c*=h,a.d*=h,a.tx*=h,a.ty*=h,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=r,a.ty+=l,a.changedDirty=!0,0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0;f=backend_Draw._modelViewMatrix,x=backend_Draw._modelViewTransform;f[0]=x.a,f[4]=x.c,f[8]=0,f[12]=x.tx,f[1]=x.b,f[5]=x.d,f[9]=0,f[13]=x.ty,f[2]=0,f[6]=0,f[10]=1,f[14]=0,f[3]=0,f[7]=0,f[11]=0,f[15]=1,clay_opengl_web_GL.gl.viewport(0,0,clay_Clay.app.screenWidth*clay_Clay.app.screenDensity|0,clay_Clay.app.screenHeight*clay_Clay.app.screenDensity|0)}}else{e=null;if(backend_Draw._currentRenderTarget!=e)if(backend_Draw._currentRenderTarget=e,null!=e){var b;null!=(b=e.backendItem.renderTarget)?(clay_opengl_GLGraphics.bindFramebuffer(b.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(b.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));t=0,i=0,r=((v=e.width)+t)/(w=v-t),l=(i+(m=e.height))/(O=i-m),s=((z=-1e3)+(g=1e3))/(C=z-g);(f=backend_Draw._projectionMatrix)[0]=2/w,f[4]=0,f[8]=0,f[12]=-r,f[1]=0,f[5]=2/O,f[9]=0,f[13]=-l,f[2]=0,f[6]=0,f[10]=-2/C,f[14]=-s,f[3]=0,f[7]=0,f[11]=0,f[15]=1,(a=backend_Draw._renderTargetTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0;a=backend_Draw._renderTargetTransform,o=e.density,p=e.density;a.a*=o,a.b*=p,a.c*=o,a.d*=p,a.tx*=o,a.ty*=p,a.changedDirty=!0;var y;h=e.density,u=e.width,_=e.height;if(null==(y=-1)&&(y=1),null!=(x=backend_Draw._renderTargetTransform)){if((a=backend_Draw._modelViewTransform).a=x.a,a.b=x.b,a.c=x.c,a.d=x.d,a.tx=x.tx,a.ty=x.ty,a.changedDirty=!0,0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0}else{(a=backend_Draw._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0}r=backend_Draw._modelViewTransform.tx,l=backend_Draw._modelViewTransform.ty;if((a=backend_Draw._modelViewTransform).tx+=-r,a.ty+=-l,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=h,a.b*=h,a.c*=h,a.d*=h,a.tx*=h,a.ty*=h,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=r,a.ty+=l,a.changedDirty=!0,-1==y)(a=backend_Draw._modelViewTransform).tx+=.5*-u,a.ty+=.5*-_,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=1,a.b*=-1,a.c*=1,a.d*=-1,a.tx*=1,a.ty*=-1,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=.5*u,a.ty+=.5*_,a.changedDirty=!0;if(0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0;f=backend_Draw._modelViewMatrix,x=backend_Draw._modelViewTransform;f[0]=x.a,f[4]=x.c,f[8]=0,f[12]=x.tx,f[1]=x.b,f[5]=x.d,f[9]=0,f[13]=x.ty,f[2]=0,f[6]=0,f[10]=1,f[14]=0,f[3]=0,f[7]=0,f[11]=0,f[15]=1,clay_opengl_web_GL.gl.viewport(0,0,e.width*e.density|0,e.height*e.density|0),e.clearOnRender&&clay_opengl_GLGraphics.clear((backend_Draw._blackTransparentColor>>16&255)/255,(backend_Draw._blackTransparentColor>>8&255)/255,(255&backend_Draw._blackTransparentColor)/255,(backend_Draw._blackTransparentColor>>24&255)/255)}else{null!=(e=null)?(clay_opengl_GLGraphics.bindFramebuffer(e.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(e.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null));var v,m,g,z,w,O,C;t=0,i=0,r=((v=clay_Clay.app.screenWidth)+t)/(w=v-t),l=(i+(m=clay_Clay.app.screenHeight))/(O=i-m),s=((z=-1e3)+(g=1e3))/(C=z-g);(f=backend_Draw._projectionMatrix)[0]=2/w,f[4]=0,f[8]=0,f[12]=-r,f[1]=0,f[5]=2/O,f[9]=0,f[13]=-l,f[2]=0,f[6]=0,f[10]=-2/C,f[14]=-s,f[3]=0,f[7]=0,f[11]=0,f[15]=1;h=clay_Clay.app.screenDensity,u=clay_Clay.app.screenWidth,_=clay_Clay.app.screenHeight;if(null!=(x=ceramic_App.app.screen.matrix)){if((a=backend_Draw._modelViewTransform).a=x.a,a.b=x.b,a.c=x.c,a.d=x.d,a.tx=x.tx,a.ty=x.ty,a.changedDirty=!0,0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0}else{(a=backend_Draw._modelViewTransform).a=1,a.b=0,a.c=0,a.d=1,a.tx=0,a.ty=0,a.changedDirty=!0}var E;r=backend_Draw._modelViewTransform.tx,l=backend_Draw._modelViewTransform.ty;if((a=backend_Draw._modelViewTransform).tx+=-r,a.ty+=-l,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).a*=h,a.b*=h,a.c*=h,a.d*=h,a.tx*=h,a.ty*=h,a.changedDirty=!0,(a=backend_Draw._modelViewTransform).tx+=r,a.ty+=l,a.changedDirty=!0,0==(E=(a=backend_Draw._modelViewTransform).a*a.d-a.b*a.c))a.a=a.b=a.c=a.d=0,a.tx=-a.tx,a.ty=-a.ty;else{E=1/E;c=a.d*E;a.d=a.a*E,a.a=c,a.b*=-E,a.c*=-E;d=-a.a*a.tx-a.c*a.ty;a.ty=-a.b*a.tx-a.d*a.ty,a.tx=d}a.changedDirty=!0;f=backend_Draw._modelViewMatrix,x=backend_Draw._modelViewTransform;f[0]=x.a,f[4]=x.c,f[8]=0,f[12]=x.tx,f[1]=x.b,f[5]=x.d,f[9]=0,f[13]=x.ty,f[2]=0,f[6]=0,f[10]=1,f[14]=0,f[3]=0,f[7]=0,f[11]=0,f[15]=1,clay_opengl_web_GL.gl.viewport(0,0,clay_Clay.app.screenWidth*clay_Clay.app.screenDensity|0,clay_Clay.app.screenHeight*clay_Clay.app.screenDensity|0)}}},useFirstTextureInBatch:function(n,e){null==e&&(e=this.defaultWhiteTexture),this.usedTextures=1;var t=e.backendItem.index;if(this.usedTextureIndexes[0]=t,backend_Draw._activeTextureSlot=0,0!=clay_opengl_GLGraphics._activeTextureSlot){for(clay_opengl_GLGraphics._activeTextureSlot=0;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984)}this.activeTextureSlot=0,this.useTexture(n,e,!1)},useTexture:function(n,e,t){if(null!=e){if(this.lastTexture=e,this.lastTextureId=e.backendItem.textureId,this.texWidth=e.backendItem.width,this.texHeight=e.backendItem.height,this.texWidthActual=e.backendItem.widthActual,this.texHeightActual=e.backendItem.heightActual,!t){var i=e.backendItem.textureId;clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=i&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=i,clay_opengl_web_GL.gl.bindTexture(3553,i))}}else{this.lastTexture=null,this.lastTextureId=null;i=ceramic_App.app.defaultWhiteTexture.backendItem.textureId;clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=i&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=i,clay_opengl_web_GL.gl.bindTexture(3553,i))}},canUseTextureInSameBatch:function(n,e){var t=!1;if(null==e&&(e=this.defaultWhiteTexture),this.usedTextures>0)if(this.activeShaderCanBatchMultipleTextures){for(var i=e.backendItem.index,r=0,l=this.usedTextures;r<l;){var s=r++;if(i==this.usedTextureIndexes[s]){t=!0;break}}!t&&this.usedTextures<this.maxUsableTexturesInBatch&&(t=!0)}else this.lastTexture==e&&(t=!0);return t},useTextureInSameBatch:function(n,e){var t=!1;if(null==e&&(e=this.defaultWhiteTexture),this.activeShaderCanBatchMultipleTextures){for(var i=e.backendItem.index,r=0,l=this.usedTextures;r<l;){var s=r++;if(i==this.usedTextureIndexes[s]){if(backend_Draw._activeTextureSlot=s,clay_opengl_GLGraphics._activeTextureSlot!=s){for(clay_opengl_GLGraphics._activeTextureSlot=s;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+s)}this.activeTextureSlot=s,this.useTexture(n,e,!0),t=!0;break}}if(!t&&this.usedTextures<this.maxUsableTexturesInBatch){s=this.usedTextures++;if(this.usedTextureIndexes[s]=i,backend_Draw._activeTextureSlot=s,clay_opengl_GLGraphics._activeTextureSlot!=s){for(clay_opengl_GLGraphics._activeTextureSlot=s;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+s)}this.activeTextureSlot=s,this.useTexture(n,e,!1)}}},unbindUsedTextures:function(n){for(;this.usedTextures>0;){this.usedTextures--;var e=this.usedTextures;if(backend_Draw._activeTextureSlot=e,clay_opengl_GLGraphics._activeTextureSlot!=e){for(clay_opengl_GLGraphics._activeTextureSlot=e;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+e)}var t=ceramic_App.app.defaultWhiteTexture.backendItem.textureId;clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=t&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=t,clay_opengl_web_GL.gl.bindTexture(3553,t))}if(backend_Draw._activeTextureSlot=0,0!=clay_opengl_GLGraphics._activeTextureSlot){for(clay_opengl_GLGraphics._activeTextureSlot=0;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984)}this.activeTextureSlot=0,this.useTexture(n,null,!1)},__class__:ceramic_Renderer});var ceramic_ReusableArray=function(n){this._poolIndex=-1,this.set_length(n)};t["ceramic.ReusableArray"]=ceramic_ReusableArray,ceramic_ReusableArray.__name__="ceramic.ReusableArray",ceramic_ReusableArray.prototype={set_length:function(n){if(null==this.vector){var e=new Array(n);return this.vector=e,this.length=n,n}if(n==this.length)return n;if(n>this.vector.length){for(var t=e=new Array(n),i=0,r=this.length;i<r;){t[l=i++]=this.vector[l],this.vector[l]=null}this.vector=t;for(i=this.length,r=n;i<r;){var l=i++;this.vector[l]=null}}else for(i=n,r=this.length;i<r;){l=i++;this.vector[l]=null}return this.length=n,n},get:function(n){return this.vector[n]},set:function(n,e){this.vector[n]=e},__class__:ceramic_ReusableArray,__properties__:{set_length:"set_length"}};var ceramic_Runner=function(){};t["ceramic.Runner"]=ceramic_Runner,ceramic_Runner.__name__="ceramic.Runner",ceramic_Runner.currentIsMainThread=function(){return!0},ceramic_Runner.init=function(){},ceramic_Runner.tick=function(){},ceramic_Runner.isEmulatingBackgroundWithMain=function(){return!0},ceramic_Runner.runInMain=function(n){ceramic_App.app._onceImmediate(n)},ceramic_Runner.runInBackground=function(n){ceramic_App.app._onceImmediate(n)};var ceramic_RuntimeAssets=function(n,e){this.path=null,this.cachedLists=null,this.cachedNames=new haxe_ds_StringMap,this.assetDirsByBaseName=null,this.assetsByBaseName=null,this.allAssetDirs=null,this.allAssets=null,this.allAssets=n,this.path=e,this.initData()};t["ceramic.RuntimeAssets"]=ceramic_RuntimeAssets,ceramic_RuntimeAssets.__name__="ceramic.RuntimeAssets",ceramic_RuntimeAssets.fromPath=function(n){return null},ceramic_RuntimeAssets.toAssetConstName=function(n){for(var e="",t=n.length,i=0,r=!1;i<t;){var l=n.charAt(i);if("/"==l)e+="__",r=!1;else if("."==l)e+="_",r=!1;else if(ceramic_RuntimeAssets.isAsciiChar(l)){var s=l.toUpperCase(),a=l==s;r&&a&&(e+="_",r=!1),e+=null==s?"null":""+s,r=!a}else e+="_",r=!1;++i}var o=e;return StringTools.endsWith(o,"_")&&(o=HxOverrides.substr(o,0,o.length-1)),o},ceramic_RuntimeAssets.isAsciiChar=function(n){var e=HxOverrides.cca(n,0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122},ceramic_RuntimeAssets.prototype={reset:function(n,e){this.allAssets=n,this.path=e,this.allAssetDirs=null,this.assetsByBaseName=null,this.assetDirsByBaseName=null,this.cachedNames=new haxe_ds_StringMap,this.cachedLists=null,this.initData()},getNames:function(e,t,i){null==i&&(i=!1);var r=e+"|"+(null!=t?t.join(","):"")+(i?"|1":"|0"),l=this.cachedNames.h[r];if(null!=l)return l;var s,a=[];switch(null==t&&(t=[]),e){case"atlas":s=["atlas"];break;case"database":s=["csv"];break;case"font":s=["fnt"];break;case"fragments":s=["fragments"];break;case"image":s=["png","jpg","jpeg"];break;case"shader":s=["frag","vert"];break;case"sound":ceramic_App.app.backend.info;if(null!=backend_Info._soundExtensions)s=[].concat(backend_Info._soundExtensions);else{backend_Info._soundExtensions=[];var o=new Audio,p=null!=n.navigator?n.navigator.userAgent:"",h=backend_Info.RE_OPERA.match(p)&&parseInt(backend_Info.RE_OPERA.matched(0).split("/")[1],10)<33,u=-1!=p.indexOf("Safari")&&-1==p.indexOf("Chrome"),_=backend_Info.RE_SAFARI_VERSION.match(p),c=(u&&_&&parseInt(backend_Info.RE_SAFARI_VERSION.matched(1),10),o.canPlayType('audio/ogg; codecs="vorbis"'));null!=c&&"no"!=c&&""!=c&&backend_Info._soundExtensions.push("ogg");var d=o.canPlayType("audio/mpeg;"),f=o.canPlayType("audio/mp3;");!h&&(null!=d&&"no"!=d&&""!=d||null!=f&&"no"!=f&&""!=f)&&backend_Info._soundExtensions.push("mp3");var x=o.canPlayType("audio/x-flac;"),b=o.canPlayType("audio/flac;");(null!=x&&"no"!=x&&""!=x||null!=b&&"no"!=b&&""!=b)&&backend_Info._soundExtensions.push("flac");var y=o.canPlayType('audio/wav; codecs="1"'),v=o.canPlayType("audio/wav;");(null!=y&&"no"!=y&&""!=y||null!=v&&"no"!=v&&""!=v)&&backend_Info._soundExtensions.push("wav"),s=[].concat(backend_Info._soundExtensions)}break;case"text":s=["txt","json","fnt","atlas"];break;default:s=[]}if(0==(t=t.concat(s)).length)return a;for(var m=Object.create(null),g=i?this.allAssetDirs:this.allAssets,z=0;z<t.length;){var w=t[z];++z;for(var O=0;O<g.length;){var C=g[O];++O;var E=C.toLowerCase(),U=E.lastIndexOf("."),M=null,T=null,k=null;if(-1!=U&&(M=HxOverrides.substr(E,U+1,null))==w){var D=HxOverrides.substr(C,0,U).lastIndexOf("@");-1==D&&(D=U),T=HxOverrides.substr(C,0,Math.min(D,U)),null==(k=ceramic_RuntimeAssets.toAssetConstName(T))||Object.prototype.hasOwnProperty.call(m,k)||null==M||(m[k]=T)}}}for(var S=i?this.assetDirsByBaseName:this.assetsByBaseName,A=m,P=Object.keys(A),V=P.length,I=0;I<V;){m[k=P[I++]];var N=[],F=S.h[m[k]];for(z=0;z<F.length;){var R=F[z];++z;for(O=0;O<t.length;){w=t[O];if(++O,StringTools.endsWith(R,"."+w)){N.push(R);break}}}var L={name:m[k],constName:k,paths:N};a.push(L)}return this.cachedNames.h[r]=a,a},getLists:function(){if(null!=this.cachedLists)return this.cachedLists;for(var n={all:[],allDirs:[],allByName:new haxe_ds_StringMap,allDirsByName:new haxe_ds_StringMap},e=0,t=this.allAssets;e<t.length;){var i=t[e];++e,n.all.push(i)}for(e=0,t=this.allAssetDirs;e<t.length;){i=t[e];++e,n.allDirs.push(i)}o=this.assetsByBaseName.h;for(var r=(p=Object.keys(o)).length,l=0;l<r;){var s=p[l++],a=[].concat(this.assetsByBaseName.h[s]);n.allByName.h[s]=a}var o,p;for(o=this.assetDirsByBaseName.h,r=(p=Object.keys(o)).length,l=0;l<r;){s=p[l++],a=[].concat(this.assetDirsByBaseName.h[s]);n.allDirsByName.h[s]=a}return this.cachedLists=n,n},getEncodableLists:function(){for(var n=this.getLists(),e={},t=(r=n.allByName.h,(l=Object.keys(r)).length),i=0;i<t;){e[a=l[i++]]=n.allByName.h[a]}var r,l,s={};for(r=n.allDirsByName.h,t=(l=Object.keys(r)).length,i=0;i<t;){var a;s[a=l[i++]]=n.allDirsByName.h[a]}return{all:n.all,allDirs:n.allDirs,allByName:e,allDirsByName:s}},initData:function(){for(var n=Object.create(null),e=0,t=this.allAssets;e<t.length;){var i=t[e];++e,n[i]=!0}var r=Object.create(null);this.allAssetDirs=[];for(e=0,t=this.allAssets;e<t.length;){i=t[e];++e;var l=i.lastIndexOf("/");if(-1!=l)for(var s=HxOverrides.substr(i,0,l);!Object.prototype.hasOwnProperty.call(r,s)&&(this.allAssetDirs.push(s),r[s]=!0,-1!=(l=s.lastIndexOf("/")));)s=HxOverrides.substr(s,0,l)}if(null==this.assetsByBaseName){this.assetsByBaseName=new haxe_ds_StringMap;for(e=0,t=this.allAssets;e<t.length;){var a=t[e];++e;var o=a.lastIndexOf(".");-1==(h=HxOverrides.substr(a,0,o).lastIndexOf("@"))&&(h=o);var p=HxOverrides.substr(a,0,Math.min(h,o));Object.prototype.hasOwnProperty.call(this.assetsByBaseName.h,p)||(this.assetsByBaseName.h[p]=[]),this.assetsByBaseName.h[p].push(a)}}if(null==this.assetDirsByBaseName){this.assetDirsByBaseName=new haxe_ds_StringMap;for(e=0,t=this.allAssetDirs;e<t.length;){a=t[e];++e;var h;o=a.lastIndexOf(".");-1==(h=HxOverrides.substr(a,0,o).lastIndexOf("@"))&&(h=o);p=HxOverrides.substr(a,0,Math.min(h,o));Object.prototype.hasOwnProperty.call(this.assetDirsByBaseName.h,p)||(this.assetDirsByBaseName.h[p]=[]),this.assetDirsByBaseName.h[p].push(a)}}},__class__:ceramic_RuntimeAssets};var f={$name:function(n){var e=null;return n>=0&&n<f.scanCodeNames.length&&(e=f.scanCodeNames[n]),null!=e?e:""},toString:function(n){return"ScanCode("+n+" "+f.$name(n)+")"}},ceramic_Scene=function(){this.paused=!1,this.autoUpdateWhenInactive=!1,this.autoUpdate=!0,this.isRootScene=!1,this.unobservedStatus=0,this.statusAutoruns=null,this._assets=null,this.observedDirty=!1,ceramic_Layer.call(this),this.flags|=16,ceramic_SceneSystem.get_shared().all.push(this)};t["ceramic.Scene"]=ceramic_Scene,ceramic_Scene.__name__="ceramic.Scene",ceramic_Scene.__interfaces__=[tracker_Observable],ceramic_Scene.__super__=ceramic_Layer,ceramic_Scene.prototype=$extend(ceramic_Layer.prototype,{emitObservedDirty:function(n,e){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnObservedDirty)for(var s=0,a=this.__cbOnObservedDirty.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnObservedDirty[o],++l):--t}if(null!=this.__cbOnceObservedDirty){var p=null,h=null;for(s=0,a=this.__cbOnceObservedDirty.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceObservedDirty[o],this.__cbOnceObservedDirty[o]=null;var u=this.__cbOnceOwnerUnbindObservedDirty[o];this.__cbOnceOwnerUnbindObservedDirty[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindObservedDirty[o]),h.push(this.__cbOnceObservedDirty[o])}this.__cbOnceOwnerUnbindObservedDirty=p,this.__cbOnceObservedDirty=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(e)},onceObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(e)},offObservedDirty:function(n){if(null!=n){var e;null!=this.__cbOnObservedDirty&&-1!=(e=this.__cbOnObservedDirty.indexOf(n))&&(this.__cbOnObservedDirty.splice(e,1),null!=(l=this.__cbOnOwnerUnbindObservedDirty[e])&&l(),this.__cbOnOwnerUnbindObservedDirty.splice(e,1)),null!=this.__cbOnceObservedDirty&&-1!=(e=this.__cbOnceObservedDirty.indexOf(n))&&(this.__cbOnceObservedDirty.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindObservedDirty[e])&&l(),this.__cbOnceOwnerUnbindObservedDirty.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindObservedDirty[r])&&l()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindObservedDirty[r])&&l()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&this.__cbOnObservedDirty.length>0||null!=this.__cbOnceObservedDirty&&this.__cbOnceObservedDirty.length>0},get_status:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.statusAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.statusAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedStatus},set_status:function(n){var e=this.unobservedStatus;if(this.unobservedStatus=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStatusChange(n,e);var t=this.statusAutoruns;if(null!=t){this.statusAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateStatus:function(){var n=this.unobservedStatus;this.emitStatusChange(n,n);var e=this.statusAutoruns;if(null!=e){this.statusAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitStatusChange:function(n,e){var t=0;if(null!=this.__cbOnStatusChange&&(t+=this.__cbOnStatusChange.length),null!=this.__cbOnceStatusChange&&(t+=this.__cbOnceStatusChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnStatusChange)for(var s=0,a=this.__cbOnStatusChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnStatusChange[o],++l):--t}if(null!=this.__cbOnceStatusChange){var p=null,h=null;for(s=0,a=this.__cbOnceStatusChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceStatusChange[o],this.__cbOnceStatusChange[o]=null;var u=this.__cbOnceOwnerUnbindStatusChange[o];this.__cbOnceOwnerUnbindStatusChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindStatusChange[o]),h.push(this.__cbOnceStatusChange[o])}this.__cbOnceOwnerUnbindStatusChange=p,this.__cbOnceStatusChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onStatusChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event statusChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStatusChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindStatusChange&&(this.__cbOnOwnerUnbindStatusChange=[]),this.__cbOnOwnerUnbindStatusChange.push(null);null==this.__cbOnStatusChange&&(this.__cbOnStatusChange=[]),this.__cbOnStatusChange.push(e)},onceStatusChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event statusChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStatusChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindStatusChange&&(this.__cbOnceOwnerUnbindStatusChange=[]),this.__cbOnceOwnerUnbindStatusChange.push(null);null==this.__cbOnceStatusChange&&(this.__cbOnceStatusChange=[]),this.__cbOnceStatusChange.push(e)},offStatusChange:function(n){if(null!=n){var e;null!=this.__cbOnStatusChange&&-1!=(e=this.__cbOnStatusChange.indexOf(n))&&(this.__cbOnStatusChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindStatusChange[e])&&l(),this.__cbOnOwnerUnbindStatusChange.splice(e,1)),null!=this.__cbOnceStatusChange&&-1!=(e=this.__cbOnceStatusChange.indexOf(n))&&(this.__cbOnceStatusChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindStatusChange[e])&&l(),this.__cbOnceOwnerUnbindStatusChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindStatusChange){for(var t=0,i=this.__cbOnOwnerUnbindStatusChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindStatusChange[r])&&l()}this.__cbOnOwnerUnbindStatusChange=null}if(null!=this.__cbOnceOwnerUnbindStatusChange){for(t=0,i=this.__cbOnceOwnerUnbindStatusChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindStatusChange[r])&&l()}this.__cbOnceOwnerUnbindStatusChange=null}this.__cbOnStatusChange=null,this.__cbOnceStatusChange=null}},listensStatusChange:function(){return null!=this.__cbOnStatusChange&&this.__cbOnStatusChange.length>0||null!=this.__cbOnceStatusChange&&this.__cbOnceStatusChange.length>0},get_assets:function(){return null==this._assets&&this._lifecycleState>=0&&(this._assets=new ceramic_Assets),this._assets},set_assets:function(n){return this._assets=n},_boot:function(){if(0==this.get_status())this.set_status(1),this.preload(),this.set_status(2),null!=this._assets&&this._assets.hasAnythingToLoad()?(this._assets.onceComplete(this,$bind(this,this._handleAssetsComplete)),this._assets.load(!1,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Scene.hx",lineNumber:76,className:"ceramic.Scene",methodName:"_boot"})):this.load($bind(this,this.internalCreate));else{var n=ceramic_App.app.logger,e=this.get_status();n.warning("Scene already booted! (status: "+(null==e?"null":x.toString(e))+")",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Scene.hx",lineNumber:65,className:"ceramic.Scene",methodName:"_boot"})}},internalCreate:function(){this.set_status(3),this.create(),this.fadeIn($bind(this,this._fadeInDone))},_fadeInDone:function(){},_handleAssetsComplete:function(n){n?this.load($bind(this,this.internalCreate)):ceramic_App.app.logger.error("Failed to load all scene assets!",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Scene.hx",lineNumber:106,className:"ceramic.Scene",methodName:"_handleAssetsComplete"})},willEmitResize:function(n,e){this.resize(n,e)},preload:function(){},load:function(n){this._lifecycleState>=0&&n()},create:function(){},ready:function(){},update:function(n){},resize:function(n,e){},_fadeIn:function(n){n()},_fadeOut:function(n){n()},fadeIn:function(n){var e=this;this.set_status(4),this._fadeIn((function(){e.set_status(5),e._lifecycleState>=0&&(e.ready(),n())}))},fadeOut:function(n){var e=this;this.set_status(6),this._fadeOut((function(){e.set_status(7),e._lifecycleState>=0&&n()}))},isReady:function(){switch(this.get_status()){case 0:case 1:case 2:case 3:case 4:return!1;case 5:return!0;case 6:case 7:return!1}},scheduleOnceReady:function(n,e){var t=this;if(this._lifecycleState<0)return ceramic_App.app.logger.warning("Cannot schedule callback on destroyed scene",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Scene.hx",lineNumber:256,className:"ceramic.Scene",methodName:"scheduleOnceReady"}),!1;switch(this.get_status()){case 0:case 1:case 2:case 3:case 4:return this.onceStatusChange(n,(function(i,r){t.scheduleOnceReady(n,e)})),!0;case 5:return e(),!0;case 6:case 7:var i=ceramic_App.app.logger,r=this.get_status();return i.warning("Cannot schedule callback on scene with status: "+(null==r?"null":x.toString(r)),{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Scene.hx",lineNumber:273,className:"ceramic.Scene",methodName:"scheduleOnceReady"}),!1}},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,HxOverrides.remove(ceramic_SceneSystem.get_shared().all,this),null!=this._assets&&(this._assets.destroy(),this._assets=null),this._lifecycleState=-1,ceramic_Layer.prototype.destroy.call(this))},unbindEvents:function(){ceramic_Layer.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offStatusChange()},__class__:ceramic_Scene,__properties__:$extend(ceramic_Layer.prototype.__properties__,{set_assets:"set_assets",get_assets:"get_assets",set_status:"set_status",get_status:"get_status"})});var x={toString:function(n){switch(n){case 0:return"NONE";case 1:return"PRELOAD";case 2:return"LOAD";case 3:return"CREATE";case 4:return"FADE_IN";case 5:return"READY";case 6:return"FADE_OUT";case 7:return"DISABLED";default:return"_"}}},ceramic_SceneSystem=function(){this.rootScenes=new haxe_ds_StringMap,this.filter=null,this.autoScaleFilter=!0,this.autoDestroyFilter=!0,this.main=null,this.fadeOutWhenNextMainCanFadeIn=!0,this.bindMainToScreenSize=!0,this.keepAssetsForNextMain=!1,this._updatingScenes=[],this.all=[],ceramic_System.call(this),this.set_lateUpdateOrder(5e3)};t["ceramic.SceneSystem"]=ceramic_SceneSystem,ceramic_SceneSystem.__name__="ceramic.SceneSystem",ceramic_SceneSystem.__properties__={set_shared:"set_shared",get_shared:"get_shared"},ceramic_SceneSystem.get_shared=function(){return ceramic_SceneSystem.lazyShared&&(ceramic_SceneSystem.lazyShared=!1,ceramic_SceneSystem.shared=new ceramic_SceneSystem),ceramic_SceneSystem.shared},ceramic_SceneSystem.set_shared=function(n){return ceramic_SceneSystem.shared=n},ceramic_SceneSystem.__super__=ceramic_System,ceramic_SceneSystem.prototype=$extend(ceramic_System.prototype,{set_filter:function(n){if(this.filter!=n){var e=this.filter;if(null!=e){for(var t=u=this.rootScenes.h,i=(_=Object.keys(u)).length,r=0;r<i;){(c=t[_[r++]]).parent==e.content&&(e.content.remove(c),c.set_scaleX(1),c.set_scaleY(1))}if(null!=e.content.children){for(var l=null,s=0,a=e.content.children.length;s<a;){var o=s++,p=e.content.children[o];if(p instanceof ceramic_Scene)(h=p).isRootScene&&(null==l&&(l=[]),l.push(h))}if(null!=l)for(s=0,a=l.length;s<a;){var h=l[o=s++];e.content.remove(h),h.set_active(!1)}}this.autoDestroyFilter?e.destroy():(e.set_scaleX(1),e.set_scaleY(1))}if(this.filter=n,null!=n){this.autoScaleFilter&&this.scaleFilter();var u,_;for(t=u=this.rootScenes.h,i=(_=Object.keys(u)).length,r=0;r<i;){var c;(c=t[_[r++]]).parent!=n.content&&n.content.add(c)}}}return n},scaleFilter:function(){var n=this.filter,e=ceramic_App.app.screen.width/this.filter.get_width();null==(t=ceramic_App.app.screen.height/this.filter.get_height())&&(t=-1),n.set_scaleX(e),n.set_scaleY(-1!=t?t:e);var t;n=this.filter.content,e=this.filter.get_width()/ceramic_App.app.screen.width;null==(t=this.filter.get_height()/ceramic_App.app.screen.height)&&(t=-1),n.set_scaleX(e),n.set_scaleY(-1!=t?t:e)},set_main:function(n){return this.main!=n&&(this.main=n,this.set("main",n,this.bindMainToScreenSize,this.keepAssetsForNextMain)),n},set:function(n,e,t,i){null==i&&(i=!1),null==t&&(t=!0);var r=this,l=this.rootScenes.h[n];if(e!=l)if(null==e){var s=this.rootScenes;if(Object.prototype.hasOwnProperty.call(s.h,n)&&delete s.h[n],"main"==n&&this.set_main(null),l._lifecycleState>=0)switch(l.get_status()){case 0:case 1:case 2:case 3:case 4:l.scheduleOnceReady(l,$bind(l,l.destroy));break;case 5:l.fadeOut($bind(l,l.destroy));break;case 6:case 7:l.destroy()}}else{if(e._lifecycleState<0)throw haxe_Exception.thrown("Cannot assign a destroyed scene as root scene!");e.isRootScene=!0;var a=null;if(this.rootScenes.h[n]=e,"main"==n&&this.set_main(e),e.onDestroy(this,(function(e){if(e==r.rootScenes.h[n]){var t=r.rootScenes;Object.prototype.hasOwnProperty.call(t.h,n)&&delete t.h[n],"main"==n&&r.set_main(null)}})),null!=l){i&&(a=l._assets);var fadeOutDone=function(){i&&(l._assets=null),l.destroy(),l=null};if(this.fadeOutWhenNextMainCanFadeIn){var o=null;switch(e.get_status()){case 0:case 1:case 2:case 3:o=function(n,t){switch(n){case 0:case 1:case 2:case 3:break;case 4:case 5:case 6:case 7:switch(e.offStatusChange(o),l.get_status()){case 0:case 1:case 2:case 3:case 4:case 6:case 7:fadeOutDone();break;case 5:l.fadeOut(fadeOutDone)}}},e.onStatusChange(l,o);break;case 4:case 5:case 6:case 7:switch(l.get_status()){case 0:case 1:case 2:case 3:case 4:case 6:case 7:fadeOutDone();break;case 5:l.fadeOut(fadeOutDone)}}}else switch(l.get_status()){case 0:case 1:case 2:case 3:case 4:case 6:case 7:fadeOutDone();break;case 5:l.fadeOut(fadeOutDone)}}e._assets=a,t&&e.bindToScreenSize(),null!=this.filter&&this.filter.content.add(e),e._boot()}},get:function(n){return this.rootScenes.h[n]},setCurrentScene:function(n,e){null==e&&(e=!1),this.keepAssetsForNextMain=e,this.set_main(n)},lateUpdate:function(n){for(var e=this.all.length,t=0,i=e;t<i;){var r=t++;this._updatingScenes[r]=this.all[r]}for(t=0,i=e;t<i;){r=t++;var l=this._updatingScenes[r];if((1!=(1&l.flags)||l.autoUpdateWhenInactive)&&(!(l._lifecycleState<0)&&(0==l.get_status()&&null!=l.parent&&l._boot(),!l.paused&&l.autoUpdate)))switch(l.get_status()){case 0:case 1:case 2:case 3:case 7:break;case 4:case 5:case 6:l.update(n)}}for(t=0,i=e;t<i;){r=t++;this._updatingScenes[r]=null}this.autoScaleFilter&&null!=this.filter&&this.scaleFilter()},__class__:ceramic_SceneSystem,__properties__:$extend(ceramic_System.prototype.__properties__,{set_filter:"set_filter",set_main:"set_main"})});var ceramic_Screen=function(){this.hitVisuals=[],this.matchedOverListeners=new haxe_ds_IntMap,this.matchedDownListeners=new haxe_ds_IntMap,this.maxTouchIndex=-1,this.prevMouseY=0,this.prevMouseX=0;var n=new haxe_ds_IntMap;this.prevTouchPositions=n;n=new haxe_ds_IntMap;this.pressedTouches=n;n=new haxe_ds_IntMap;this.pressedMouseButtons=n,this._numPointerDown=0,this.resizing=!1,this.reverseMatrix=new ceramic_Transform,this.matrix=new ceramic_Transform,this.unobservedTexturesDensity=1,this.texturesDensityAutoruns=null,this.unobservedFocusedVisual=null,this.focusedVisualAutoruns=null;n=new ceramic_IntMap(8,.5,!1);this.touches=n,this.mouseWheelDeltaY=0,this.mouseWheelDeltaX=0,this.mouseDeltaY=0,this.mouseDeltaX=0,this.mouseY=0,this.mouseX=0,this.pointerDeltaY=0,this.pointerDeltaX=0,this.pointerY=0,this.pointerX=0,this.offsetY=0,this.offsetX=0,this.actualHeight=0,this.actualWidth=0,this.height=0,this.width=0,this.density=1,this.observedDirty=!1,ceramic_Entity.call(this)};t["ceramic.Screen"]=ceramic_Screen,ceramic_Screen.__name__="ceramic.Screen",ceramic_Screen.__interfaces__=[tracker_Observable],ceramic_Screen.__super__=ceramic_Entity,ceramic_Screen.prototype=$extend(ceramic_Entity.prototype,{emitObservedDirty:function(n,e){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnObservedDirty)for(var s=0,a=this.__cbOnObservedDirty.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnObservedDirty[o],++l):--t}if(null!=this.__cbOnceObservedDirty){var p=null,h=null;for(s=0,a=this.__cbOnceObservedDirty.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceObservedDirty[o],this.__cbOnceObservedDirty[o]=null;var u=this.__cbOnceOwnerUnbindObservedDirty[o];this.__cbOnceOwnerUnbindObservedDirty[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindObservedDirty[o]),h.push(this.__cbOnceObservedDirty[o])}this.__cbOnceOwnerUnbindObservedDirty=p,this.__cbOnceObservedDirty=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(e)},onceObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(e)},offObservedDirty:function(n){if(null!=n){var e;null!=this.__cbOnObservedDirty&&-1!=(e=this.__cbOnObservedDirty.indexOf(n))&&(this.__cbOnObservedDirty.splice(e,1),null!=(l=this.__cbOnOwnerUnbindObservedDirty[e])&&l(),this.__cbOnOwnerUnbindObservedDirty.splice(e,1)),null!=this.__cbOnceObservedDirty&&-1!=(e=this.__cbOnceObservedDirty.indexOf(n))&&(this.__cbOnceObservedDirty.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindObservedDirty[e])&&l(),this.__cbOnceOwnerUnbindObservedDirty.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindObservedDirty[r])&&l()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindObservedDirty[r])&&l()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&this.__cbOnObservedDirty.length>0||null!=this.__cbOnceObservedDirty&&this.__cbOnceObservedDirty.length>0},get_nativeWidth:function(){return clay_Clay.app.screenWidth},get_nativeHeight:function(){return clay_Clay.app.screenHeight},get_nativeDensity:function(){return clay_Clay.app.screenDensity},get_focusedVisual:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.focusedVisualAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.focusedVisualAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedFocusedVisual},set_focusedVisual:function(n){var e=this.unobservedFocusedVisual;if(this.set_unobservedFocusedVisual(n),e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFocusedVisualChange(n,e);var t=this.focusedVisualAutoruns;if(null!=t){this.focusedVisualAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateFocusedVisual:function(){var n=this.unobservedFocusedVisual;this.emitFocusedVisualChange(n,n);var e=this.focusedVisualAutoruns;if(null!=e){this.focusedVisualAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitFocusedVisualChange:function(n,e){var t=0;if(null!=this.__cbOnFocusedVisualChange&&(t+=this.__cbOnFocusedVisualChange.length),null!=this.__cbOnceFocusedVisualChange&&(t+=this.__cbOnceFocusedVisualChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFocusedVisualChange)for(var s=0,a=this.__cbOnFocusedVisualChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFocusedVisualChange[o],++l):--t}if(null!=this.__cbOnceFocusedVisualChange){var p=null,h=null;for(s=0,a=this.__cbOnceFocusedVisualChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFocusedVisualChange[o],this.__cbOnceFocusedVisualChange[o]=null;var u=this.__cbOnceOwnerUnbindFocusedVisualChange[o];this.__cbOnceOwnerUnbindFocusedVisualChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFocusedVisualChange[o]),h.push(this.__cbOnceFocusedVisualChange[o])}this.__cbOnceOwnerUnbindFocusedVisualChange=p,this.__cbOnceFocusedVisualChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFocusedVisualChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event focusedVisualChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFocusedVisualChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFocusedVisualChange&&(this.__cbOnOwnerUnbindFocusedVisualChange=[]),this.__cbOnOwnerUnbindFocusedVisualChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFocusedVisualChange&&(this.__cbOnOwnerUnbindFocusedVisualChange=[]),this.__cbOnOwnerUnbindFocusedVisualChange.push(null);null==this.__cbOnFocusedVisualChange&&(this.__cbOnFocusedVisualChange=[]),this.__cbOnFocusedVisualChange.push(e)},onceFocusedVisualChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event focusedVisualChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFocusedVisualChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFocusedVisualChange&&(this.__cbOnceOwnerUnbindFocusedVisualChange=[]),this.__cbOnceOwnerUnbindFocusedVisualChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFocusedVisualChange&&(this.__cbOnceOwnerUnbindFocusedVisualChange=[]),this.__cbOnceOwnerUnbindFocusedVisualChange.push(null);null==this.__cbOnceFocusedVisualChange&&(this.__cbOnceFocusedVisualChange=[]),this.__cbOnceFocusedVisualChange.push(e)},offFocusedVisualChange:function(n){if(null!=n){var e;null!=this.__cbOnFocusedVisualChange&&-1!=(e=this.__cbOnFocusedVisualChange.indexOf(n))&&(this.__cbOnFocusedVisualChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFocusedVisualChange[e])&&l(),this.__cbOnOwnerUnbindFocusedVisualChange.splice(e,1)),null!=this.__cbOnceFocusedVisualChange&&-1!=(e=this.__cbOnceFocusedVisualChange.indexOf(n))&&(this.__cbOnceFocusedVisualChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFocusedVisualChange[e])&&l(),this.__cbOnceOwnerUnbindFocusedVisualChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFocusedVisualChange){for(var t=0,i=this.__cbOnOwnerUnbindFocusedVisualChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFocusedVisualChange[r])&&l()}this.__cbOnOwnerUnbindFocusedVisualChange=null}if(null!=this.__cbOnceOwnerUnbindFocusedVisualChange){for(t=0,i=this.__cbOnceOwnerUnbindFocusedVisualChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFocusedVisualChange[r])&&l()}this.__cbOnceOwnerUnbindFocusedVisualChange=null}this.__cbOnFocusedVisualChange=null,this.__cbOnceFocusedVisualChange=null}},listensFocusedVisualChange:function(){return null!=this.__cbOnFocusedVisualChange&&this.__cbOnFocusedVisualChange.length>0||null!=this.__cbOnceFocusedVisualChange&&this.__cbOnceFocusedVisualChange.length>0},set_unobservedFocusedVisual:function(n){if(this.unobservedFocusedVisual==n)return n;var e=this.unobservedFocusedVisual;return this.unobservedFocusedVisual=n,null!=e&&(this.emitBlur(e),e.emitBlur()),null!=n&&(this.emitFocus(n),n.emitFocus()),n},get_texturesDensity:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.texturesDensityAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.texturesDensityAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTexturesDensity},set_texturesDensity:function(n){var e=this.unobservedTexturesDensity;if(this.unobservedTexturesDensity=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTexturesDensityChange(n,e);var t=this.texturesDensityAutoruns;if(null!=t){this.texturesDensityAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTexturesDensity:function(){var n=this.unobservedTexturesDensity;this.emitTexturesDensityChange(n,n);var e=this.texturesDensityAutoruns;if(null!=e){this.texturesDensityAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTexturesDensityChange:function(n,e){var t=0;if(null!=this.__cbOnTexturesDensityChange&&(t+=this.__cbOnTexturesDensityChange.length),null!=this.__cbOnceTexturesDensityChange&&(t+=this.__cbOnceTexturesDensityChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTexturesDensityChange)for(var s=0,a=this.__cbOnTexturesDensityChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTexturesDensityChange[o],++l):--t}if(null!=this.__cbOnceTexturesDensityChange){var p=null,h=null;for(s=0,a=this.__cbOnceTexturesDensityChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTexturesDensityChange[o],this.__cbOnceTexturesDensityChange[o]=null;var u=this.__cbOnceOwnerUnbindTexturesDensityChange[o];this.__cbOnceOwnerUnbindTexturesDensityChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTexturesDensityChange[o]),h.push(this.__cbOnceTexturesDensityChange[o])}this.__cbOnceOwnerUnbindTexturesDensityChange=p,this.__cbOnceTexturesDensityChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTexturesDensityChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event texturesDensityChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTexturesDensityChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTexturesDensityChange&&(this.__cbOnOwnerUnbindTexturesDensityChange=[]),this.__cbOnOwnerUnbindTexturesDensityChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTexturesDensityChange&&(this.__cbOnOwnerUnbindTexturesDensityChange=[]),this.__cbOnOwnerUnbindTexturesDensityChange.push(null);null==this.__cbOnTexturesDensityChange&&(this.__cbOnTexturesDensityChange=[]),this.__cbOnTexturesDensityChange.push(e)},onceTexturesDensityChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event texturesDensityChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTexturesDensityChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTexturesDensityChange&&(this.__cbOnceOwnerUnbindTexturesDensityChange=[]),this.__cbOnceOwnerUnbindTexturesDensityChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTexturesDensityChange&&(this.__cbOnceOwnerUnbindTexturesDensityChange=[]),this.__cbOnceOwnerUnbindTexturesDensityChange.push(null);null==this.__cbOnceTexturesDensityChange&&(this.__cbOnceTexturesDensityChange=[]),this.__cbOnceTexturesDensityChange.push(e)},offTexturesDensityChange:function(n){if(null!=n){var e;null!=this.__cbOnTexturesDensityChange&&-1!=(e=this.__cbOnTexturesDensityChange.indexOf(n))&&(this.__cbOnTexturesDensityChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTexturesDensityChange[e])&&l(),this.__cbOnOwnerUnbindTexturesDensityChange.splice(e,1)),null!=this.__cbOnceTexturesDensityChange&&-1!=(e=this.__cbOnceTexturesDensityChange.indexOf(n))&&(this.__cbOnceTexturesDensityChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTexturesDensityChange[e])&&l(),this.__cbOnceOwnerUnbindTexturesDensityChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTexturesDensityChange){for(var t=0,i=this.__cbOnOwnerUnbindTexturesDensityChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTexturesDensityChange[r])&&l()}this.__cbOnOwnerUnbindTexturesDensityChange=null}if(null!=this.__cbOnceOwnerUnbindTexturesDensityChange){for(t=0,i=this.__cbOnceOwnerUnbindTexturesDensityChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTexturesDensityChange[r])&&l()}this.__cbOnceOwnerUnbindTexturesDensityChange=null}this.__cbOnTexturesDensityChange=null,this.__cbOnceTexturesDensityChange=null}},listensTexturesDensityChange:function(){return null!=this.__cbOnTexturesDensityChange&&this.__cbOnTexturesDensityChange.length>0||null!=this.__cbOnceTexturesDensityChange&&this.__cbOnceTexturesDensityChange.length>0},get_isPointerDown:function(){return this._numPointerDown>0},emitResize:function(){var n=0;if(null!=this.__cbOnResize&&(n+=this.__cbOnResize.length),null!=this.__cbOnceResize&&(n+=this.__cbOnceResize.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnResize)for(var r=0,l=this.__cbOnResize.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnResize[s],++i):--n}if(null!=this.__cbOnceResize){var a=null,o=null;for(r=0,l=this.__cbOnceResize.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceResize[s],this.__cbOnceResize[s]=null;var p=this.__cbOnceOwnerUnbindResize[s];this.__cbOnceOwnerUnbindResize[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindResize[s]),o.push(this.__cbOnceResize[s])}this.__cbOnceOwnerUnbindResize=a,this.__cbOnceResize=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onResize:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event resize because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offResize(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindResize&&(this.__cbOnOwnerUnbindResize=[]),this.__cbOnOwnerUnbindResize.push(null);null==this.__cbOnResize&&(this.__cbOnResize=[]),this.__cbOnResize.push(e)},onceResize:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event resize because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offResize(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindResize&&(this.__cbOnceOwnerUnbindResize=[]),this.__cbOnceOwnerUnbindResize.push(null);null==this.__cbOnceResize&&(this.__cbOnceResize=[]),this.__cbOnceResize.push(e)},offResize:function(n){if(null!=n){var e;null!=this.__cbOnResize&&-1!=(e=this.__cbOnResize.indexOf(n))&&(this.__cbOnResize.splice(e,1),null!=(l=this.__cbOnOwnerUnbindResize[e])&&l(),this.__cbOnOwnerUnbindResize.splice(e,1)),null!=this.__cbOnceResize&&-1!=(e=this.__cbOnceResize.indexOf(n))&&(this.__cbOnceResize.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindResize[e])&&l(),this.__cbOnceOwnerUnbindResize.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindResize){for(var t=0,i=this.__cbOnOwnerUnbindResize.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindResize[r])&&l()}this.__cbOnOwnerUnbindResize=null}if(null!=this.__cbOnceOwnerUnbindResize){for(t=0,i=this.__cbOnceOwnerUnbindResize.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindResize[r])&&l()}this.__cbOnceOwnerUnbindResize=null}this.__cbOnResize=null,this.__cbOnceResize=null}},listensResize:function(){return null!=this.__cbOnResize&&this.__cbOnResize.length>0||null!=this.__cbOnceResize&&this.__cbOnceResize.length>0},emitMouseDown:function(n,e,t){this.willEmitMouseDown(n,e,t);var i=0;if(null!=this.__cbOnMouseDown&&(i+=this.__cbOnMouseDown.length),null!=this.__cbOnceMouseDown&&(i+=this.__cbOnceMouseDown.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnMouseDown)for(var a=0,o=this.__cbOnMouseDown.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnMouseDown[p],++s):--i}if(null!=this.__cbOnceMouseDown){var h=null,u=null;for(a=0,o=this.__cbOnceMouseDown.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceMouseDown[p],this.__cbOnceMouseDown[p]=null;var _=this.__cbOnceOwnerUnbindMouseDown[p];this.__cbOnceOwnerUnbindMouseDown[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindMouseDown[p]),u.push(this.__cbOnceMouseDown[p])}this.__cbOnceOwnerUnbindMouseDown=h,this.__cbOnceMouseDown=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}var c=this.matchFirstDownListener(e,t,-1,n);null!=c&&(c._numPointerDown++,(1==c._numPointerDown||c.multiTouch)&&(ceramic_App.app.screen.set_focusedVisual(c),c.emitPointerDown(new ceramic_TouchInfo(-1,n,e,t,!0))));var d=1e4+n;this.matchedDownListeners.h[d]=c},onMouseDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseDown&&(this.__cbOnOwnerUnbindMouseDown=[]),this.__cbOnOwnerUnbindMouseDown.push(null);null==this.__cbOnMouseDown&&(this.__cbOnMouseDown=[]),this.__cbOnMouseDown.push(e)},onceMouseDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseDown&&(this.__cbOnceOwnerUnbindMouseDown=[]),this.__cbOnceOwnerUnbindMouseDown.push(null);null==this.__cbOnceMouseDown&&(this.__cbOnceMouseDown=[]),this.__cbOnceMouseDown.push(e)},offMouseDown:function(n){if(null!=n){var e;null!=this.__cbOnMouseDown&&-1!=(e=this.__cbOnMouseDown.indexOf(n))&&(this.__cbOnMouseDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseDown[e])&&l(),this.__cbOnOwnerUnbindMouseDown.splice(e,1)),null!=this.__cbOnceMouseDown&&-1!=(e=this.__cbOnceMouseDown.indexOf(n))&&(this.__cbOnceMouseDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseDown[e])&&l(),this.__cbOnceOwnerUnbindMouseDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseDown){for(var t=0,i=this.__cbOnOwnerUnbindMouseDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseDown[r])&&l()}this.__cbOnOwnerUnbindMouseDown=null}if(null!=this.__cbOnceOwnerUnbindMouseDown){for(t=0,i=this.__cbOnceOwnerUnbindMouseDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseDown[r])&&l()}this.__cbOnceOwnerUnbindMouseDown=null}this.__cbOnMouseDown=null,this.__cbOnceMouseDown=null}},listensMouseDown:function(){return null!=this.__cbOnMouseDown&&this.__cbOnMouseDown.length>0||null!=this.__cbOnceMouseDown&&this.__cbOnceMouseDown.length>0},emitMouseUp:function(n,e,t){this.willEmitMouseUp(n,e,t);var i=0;if(null!=this.__cbOnMouseUp&&(i+=this.__cbOnMouseUp.length),null!=this.__cbOnceMouseUp&&(i+=this.__cbOnceMouseUp.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnMouseUp)for(var a=0,o=this.__cbOnMouseUp.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnMouseUp[p],++s):--i}if(null!=this.__cbOnceMouseUp){var h=null,u=null;for(a=0,o=this.__cbOnceMouseUp.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceMouseUp[p],this.__cbOnceMouseUp[p]=null;var _=this.__cbOnceOwnerUnbindMouseUp[p];this.__cbOnceOwnerUnbindMouseUp[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindMouseUp[p]),u.push(this.__cbOnceMouseUp[p])}this.__cbOnceOwnerUnbindMouseUp=h,this.__cbOnceMouseUp=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}var c=1e4+n,d=this.matchedDownListeners.h[c];null!=d&&d._lifecycleState>=0&&d._numPointerDown>0&&(d._numPointerDown--,(0==d._numPointerDown||d.multiTouch)&&d.emitPointerUp(new ceramic_TouchInfo(-1,n,e,t,d._hits(e,t,!1)))),this.matchedDownListeners.remove(c)},onMouseUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseUp&&(this.__cbOnOwnerUnbindMouseUp=[]),this.__cbOnOwnerUnbindMouseUp.push(null);null==this.__cbOnMouseUp&&(this.__cbOnMouseUp=[]),this.__cbOnMouseUp.push(e)},onceMouseUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseUp&&(this.__cbOnceOwnerUnbindMouseUp=[]),this.__cbOnceOwnerUnbindMouseUp.push(null);null==this.__cbOnceMouseUp&&(this.__cbOnceMouseUp=[]),this.__cbOnceMouseUp.push(e)},offMouseUp:function(n){if(null!=n){var e;null!=this.__cbOnMouseUp&&-1!=(e=this.__cbOnMouseUp.indexOf(n))&&(this.__cbOnMouseUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseUp[e])&&l(),this.__cbOnOwnerUnbindMouseUp.splice(e,1)),null!=this.__cbOnceMouseUp&&-1!=(e=this.__cbOnceMouseUp.indexOf(n))&&(this.__cbOnceMouseUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseUp[e])&&l(),this.__cbOnceOwnerUnbindMouseUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseUp){for(var t=0,i=this.__cbOnOwnerUnbindMouseUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseUp[r])&&l()}this.__cbOnOwnerUnbindMouseUp=null}if(null!=this.__cbOnceOwnerUnbindMouseUp){for(t=0,i=this.__cbOnceOwnerUnbindMouseUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseUp[r])&&l()}this.__cbOnceOwnerUnbindMouseUp=null}this.__cbOnMouseUp=null,this.__cbOnceMouseUp=null}},listensMouseUp:function(){return null!=this.__cbOnMouseUp&&this.__cbOnMouseUp.length>0||null!=this.__cbOnceMouseUp&&this.__cbOnceMouseUp.length>0},emitMouseWheel:function(n,e){this.willEmitMouseWheel(n,e);var t=0;if(null!=this.__cbOnMouseWheel&&(t+=this.__cbOnMouseWheel.length),null!=this.__cbOnceMouseWheel&&(t+=this.__cbOnceMouseWheel.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnMouseWheel)for(var s=0,a=this.__cbOnMouseWheel.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnMouseWheel[o],++l):--t}if(null!=this.__cbOnceMouseWheel){var p=null,h=null;for(s=0,a=this.__cbOnceMouseWheel.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceMouseWheel[o],this.__cbOnceMouseWheel[o]=null;var u=this.__cbOnceOwnerUnbindMouseWheel[o];this.__cbOnceOwnerUnbindMouseWheel[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindMouseWheel[o]),h.push(this.__cbOnceMouseWheel[o])}this.__cbOnceOwnerUnbindMouseWheel=p,this.__cbOnceMouseWheel=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onMouseWheel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseWheel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseWheel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseWheel&&(this.__cbOnOwnerUnbindMouseWheel=[]),this.__cbOnOwnerUnbindMouseWheel.push(null);null==this.__cbOnMouseWheel&&(this.__cbOnMouseWheel=[]),this.__cbOnMouseWheel.push(e)},onceMouseWheel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseWheel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseWheel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseWheel&&(this.__cbOnceOwnerUnbindMouseWheel=[]),this.__cbOnceOwnerUnbindMouseWheel.push(null);null==this.__cbOnceMouseWheel&&(this.__cbOnceMouseWheel=[]),this.__cbOnceMouseWheel.push(e)},offMouseWheel:function(n){if(null!=n){var e;null!=this.__cbOnMouseWheel&&-1!=(e=this.__cbOnMouseWheel.indexOf(n))&&(this.__cbOnMouseWheel.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseWheel[e])&&l(),this.__cbOnOwnerUnbindMouseWheel.splice(e,1)),null!=this.__cbOnceMouseWheel&&-1!=(e=this.__cbOnceMouseWheel.indexOf(n))&&(this.__cbOnceMouseWheel.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseWheel[e])&&l(),this.__cbOnceOwnerUnbindMouseWheel.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseWheel){for(var t=0,i=this.__cbOnOwnerUnbindMouseWheel.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseWheel[r])&&l()}this.__cbOnOwnerUnbindMouseWheel=null}if(null!=this.__cbOnceOwnerUnbindMouseWheel){for(t=0,i=this.__cbOnceOwnerUnbindMouseWheel.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseWheel[r])&&l()}this.__cbOnceOwnerUnbindMouseWheel=null}this.__cbOnMouseWheel=null,this.__cbOnceMouseWheel=null}},listensMouseWheel:function(){return null!=this.__cbOnMouseWheel&&this.__cbOnMouseWheel.length>0||null!=this.__cbOnceMouseWheel&&this.__cbOnceMouseWheel.length>0},emitMouseMove:function(n,e){this.willEmitMouseMove(n,e);var t=0;if(null!=this.__cbOnMouseMove&&(t+=this.__cbOnMouseMove.length),null!=this.__cbOnceMouseMove&&(t+=this.__cbOnceMouseMove.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnMouseMove)for(var s=0,a=this.__cbOnMouseMove.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnMouseMove[o],++l):--t}if(null!=this.__cbOnceMouseMove){var p=null,h=null;for(s=0,a=this.__cbOnceMouseMove.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceMouseMove[o],this.__cbOnceMouseMove[o]=null;var u=this.__cbOnceOwnerUnbindMouseMove[o];this.__cbOnceOwnerUnbindMouseMove[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindMouseMove[o]),h.push(this.__cbOnceMouseMove[o])}this.__cbOnceOwnerUnbindMouseMove=p,this.__cbOnceMouseMove=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onMouseMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMouseMove&&(this.__cbOnOwnerUnbindMouseMove=[]),this.__cbOnOwnerUnbindMouseMove.push(null);null==this.__cbOnMouseMove&&(this.__cbOnMouseMove=[]),this.__cbOnMouseMove.push(e)},onceMouseMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event mouseMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMouseMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMouseMove&&(this.__cbOnceOwnerUnbindMouseMove=[]),this.__cbOnceOwnerUnbindMouseMove.push(null);null==this.__cbOnceMouseMove&&(this.__cbOnceMouseMove=[]),this.__cbOnceMouseMove.push(e)},offMouseMove:function(n){if(null!=n){var e;null!=this.__cbOnMouseMove&&-1!=(e=this.__cbOnMouseMove.indexOf(n))&&(this.__cbOnMouseMove.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMouseMove[e])&&l(),this.__cbOnOwnerUnbindMouseMove.splice(e,1)),null!=this.__cbOnceMouseMove&&-1!=(e=this.__cbOnceMouseMove.indexOf(n))&&(this.__cbOnceMouseMove.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMouseMove[e])&&l(),this.__cbOnceOwnerUnbindMouseMove.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMouseMove){for(var t=0,i=this.__cbOnOwnerUnbindMouseMove.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMouseMove[r])&&l()}this.__cbOnOwnerUnbindMouseMove=null}if(null!=this.__cbOnceOwnerUnbindMouseMove){for(t=0,i=this.__cbOnceOwnerUnbindMouseMove.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMouseMove[r])&&l()}this.__cbOnceOwnerUnbindMouseMove=null}this.__cbOnMouseMove=null,this.__cbOnceMouseMove=null}},listensMouseMove:function(){return null!=this.__cbOnMouseMove&&this.__cbOnMouseMove.length>0||null!=this.__cbOnceMouseMove&&this.__cbOnceMouseMove.length>0},emitTouchDown:function(n,e,t){this.willEmitTouchDown(n,e,t);var i=0;if(null!=this.__cbOnTouchDown&&(i+=this.__cbOnTouchDown.length),null!=this.__cbOnceTouchDown&&(i+=this.__cbOnceTouchDown.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnTouchDown)for(var a=0,o=this.__cbOnTouchDown.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnTouchDown[p],++s):--i}if(null!=this.__cbOnceTouchDown){var h=null,u=null;for(a=0,o=this.__cbOnceTouchDown.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceTouchDown[p],this.__cbOnceTouchDown[p]=null;var _=this.__cbOnceOwnerUnbindTouchDown[p];this.__cbOnceOwnerUnbindTouchDown[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindTouchDown[p]),u.push(this.__cbOnceTouchDown[p])}this.__cbOnceOwnerUnbindTouchDown=h,this.__cbOnceTouchDown=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}var c=this.matchFirstDownListener(e,t,n,-1);null!=c&&(c._numPointerDown++,(1==c._numPointerDown||c.multiTouch)&&(ceramic_App.app.screen.set_focusedVisual(c),c.emitPointerDown(new ceramic_TouchInfo(n,-1,e,t,!0))));var d=2e4+n;this.matchedDownListeners.h[d]=c},onTouchDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTouchDown&&(this.__cbOnOwnerUnbindTouchDown=[]),this.__cbOnOwnerUnbindTouchDown.push(null);null==this.__cbOnTouchDown&&(this.__cbOnTouchDown=[]),this.__cbOnTouchDown.push(e)},onceTouchDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTouchDown&&(this.__cbOnceOwnerUnbindTouchDown=[]),this.__cbOnceOwnerUnbindTouchDown.push(null);null==this.__cbOnceTouchDown&&(this.__cbOnceTouchDown=[]),this.__cbOnceTouchDown.push(e)},offTouchDown:function(n){if(null!=n){var e;null!=this.__cbOnTouchDown&&-1!=(e=this.__cbOnTouchDown.indexOf(n))&&(this.__cbOnTouchDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTouchDown[e])&&l(),this.__cbOnOwnerUnbindTouchDown.splice(e,1)),null!=this.__cbOnceTouchDown&&-1!=(e=this.__cbOnceTouchDown.indexOf(n))&&(this.__cbOnceTouchDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTouchDown[e])&&l(),this.__cbOnceOwnerUnbindTouchDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTouchDown){for(var t=0,i=this.__cbOnOwnerUnbindTouchDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTouchDown[r])&&l()}this.__cbOnOwnerUnbindTouchDown=null}if(null!=this.__cbOnceOwnerUnbindTouchDown){for(t=0,i=this.__cbOnceOwnerUnbindTouchDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTouchDown[r])&&l()}this.__cbOnceOwnerUnbindTouchDown=null}this.__cbOnTouchDown=null,this.__cbOnceTouchDown=null}},listensTouchDown:function(){return null!=this.__cbOnTouchDown&&this.__cbOnTouchDown.length>0||null!=this.__cbOnceTouchDown&&this.__cbOnceTouchDown.length>0},emitTouchUp:function(n,e,t){this.willEmitTouchUp(n,e,t);var i=0;if(null!=this.__cbOnTouchUp&&(i+=this.__cbOnTouchUp.length),null!=this.__cbOnceTouchUp&&(i+=this.__cbOnceTouchUp.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnTouchUp)for(var a=0,o=this.__cbOnTouchUp.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnTouchUp[p],++s):--i}if(null!=this.__cbOnceTouchUp){var h=null,u=null;for(a=0,o=this.__cbOnceTouchUp.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceTouchUp[p],this.__cbOnceTouchUp[p]=null;var _=this.__cbOnceOwnerUnbindTouchUp[p];this.__cbOnceOwnerUnbindTouchUp[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindTouchUp[p]),u.push(this.__cbOnceTouchUp[p])}this.__cbOnceOwnerUnbindTouchUp=h,this.__cbOnceTouchUp=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}var c=2e4+n,d=this.matchedDownListeners.h[c];null!=d&&d._lifecycleState>=0&&d._numPointerDown>0&&(d._numPointerDown--,(0==d._numPointerDown||d.multiTouch)&&d.emitPointerUp(new ceramic_TouchInfo(n,-1,e,t,d._hits(e,t,!1)))),this.matchedDownListeners.remove(c)},onTouchUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTouchUp&&(this.__cbOnOwnerUnbindTouchUp=[]),this.__cbOnOwnerUnbindTouchUp.push(null);null==this.__cbOnTouchUp&&(this.__cbOnTouchUp=[]),this.__cbOnTouchUp.push(e)},onceTouchUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTouchUp&&(this.__cbOnceOwnerUnbindTouchUp=[]),this.__cbOnceOwnerUnbindTouchUp.push(null);null==this.__cbOnceTouchUp&&(this.__cbOnceTouchUp=[]),this.__cbOnceTouchUp.push(e)},offTouchUp:function(n){if(null!=n){var e;null!=this.__cbOnTouchUp&&-1!=(e=this.__cbOnTouchUp.indexOf(n))&&(this.__cbOnTouchUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTouchUp[e])&&l(),this.__cbOnOwnerUnbindTouchUp.splice(e,1)),null!=this.__cbOnceTouchUp&&-1!=(e=this.__cbOnceTouchUp.indexOf(n))&&(this.__cbOnceTouchUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTouchUp[e])&&l(),this.__cbOnceOwnerUnbindTouchUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTouchUp){for(var t=0,i=this.__cbOnOwnerUnbindTouchUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTouchUp[r])&&l()}this.__cbOnOwnerUnbindTouchUp=null}if(null!=this.__cbOnceOwnerUnbindTouchUp){for(t=0,i=this.__cbOnceOwnerUnbindTouchUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTouchUp[r])&&l()}this.__cbOnceOwnerUnbindTouchUp=null}this.__cbOnTouchUp=null,this.__cbOnceTouchUp=null}},listensTouchUp:function(){return null!=this.__cbOnTouchUp&&this.__cbOnTouchUp.length>0||null!=this.__cbOnceTouchUp&&this.__cbOnceTouchUp.length>0},emitTouchMove:function(n,e,t){this.willEmitTouchMove(n,e,t);var i=0;if(null!=this.__cbOnTouchMove&&(i+=this.__cbOnTouchMove.length),null!=this.__cbOnceTouchMove&&(i+=this.__cbOnceTouchMove.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnTouchMove)for(var a=0,o=this.__cbOnTouchMove.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnTouchMove[p],++s):--i}if(null!=this.__cbOnceTouchMove){var h=null,u=null;for(a=0,o=this.__cbOnceTouchMove.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceTouchMove[p],this.__cbOnceTouchMove[p]=null;var _=this.__cbOnceOwnerUnbindTouchMove[p];this.__cbOnceOwnerUnbindTouchMove[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindTouchMove[p]),u.push(this.__cbOnceTouchMove[p])}this.__cbOnceOwnerUnbindTouchMove=h,this.__cbOnceTouchMove=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onTouchMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTouchMove&&(this.__cbOnOwnerUnbindTouchMove=[]),this.__cbOnOwnerUnbindTouchMove.push(null);null==this.__cbOnTouchMove&&(this.__cbOnTouchMove=[]),this.__cbOnTouchMove.push(e)},onceTouchMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event touchMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTouchMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTouchMove&&(this.__cbOnceOwnerUnbindTouchMove=[]),this.__cbOnceOwnerUnbindTouchMove.push(null);null==this.__cbOnceTouchMove&&(this.__cbOnceTouchMove=[]),this.__cbOnceTouchMove.push(e)},offTouchMove:function(n){if(null!=n){var e;null!=this.__cbOnTouchMove&&-1!=(e=this.__cbOnTouchMove.indexOf(n))&&(this.__cbOnTouchMove.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTouchMove[e])&&l(),this.__cbOnOwnerUnbindTouchMove.splice(e,1)),null!=this.__cbOnceTouchMove&&-1!=(e=this.__cbOnceTouchMove.indexOf(n))&&(this.__cbOnceTouchMove.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTouchMove[e])&&l(),this.__cbOnceOwnerUnbindTouchMove.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTouchMove){for(var t=0,i=this.__cbOnOwnerUnbindTouchMove.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTouchMove[r])&&l()}this.__cbOnOwnerUnbindTouchMove=null}if(null!=this.__cbOnceOwnerUnbindTouchMove){for(t=0,i=this.__cbOnceOwnerUnbindTouchMove.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTouchMove[r])&&l()}this.__cbOnceOwnerUnbindTouchMove=null}this.__cbOnTouchMove=null,this.__cbOnceTouchMove=null}},listensTouchMove:function(){return null!=this.__cbOnTouchMove&&this.__cbOnTouchMove.length>0||null!=this.__cbOnceTouchMove&&this.__cbOnceTouchMove.length>0},emitPointerDown:function(n){var e=0;if(null!=this.__cbOnPointerDown&&(e+=this.__cbOnPointerDown.length),null!=this.__cbOncePointerDown&&(e+=this.__cbOncePointerDown.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerDown)for(var l=0,s=this.__cbOnPointerDown.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerDown[a],++r):--e}if(null!=this.__cbOncePointerDown){var o=null,p=null;for(l=0,s=this.__cbOncePointerDown.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerDown[a],this.__cbOncePointerDown[a]=null;var h=this.__cbOnceOwnerUnbindPointerDown[a];this.__cbOnceOwnerUnbindPointerDown[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerDown[a]),p.push(this.__cbOncePointerDown[a])}this.__cbOnceOwnerUnbindPointerDown=o,this.__cbOncePointerDown=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerDown&&(this.__cbOnOwnerUnbindPointerDown=[]),this.__cbOnOwnerUnbindPointerDown.push(null);null==this.__cbOnPointerDown&&(this.__cbOnPointerDown=[]),this.__cbOnPointerDown.push(e)},oncePointerDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerDown&&(this.__cbOnceOwnerUnbindPointerDown=[]),this.__cbOnceOwnerUnbindPointerDown.push(null);null==this.__cbOncePointerDown&&(this.__cbOncePointerDown=[]),this.__cbOncePointerDown.push(e)},offPointerDown:function(n){if(null!=n){var e;null!=this.__cbOnPointerDown&&-1!=(e=this.__cbOnPointerDown.indexOf(n))&&(this.__cbOnPointerDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerDown[e])&&l(),this.__cbOnOwnerUnbindPointerDown.splice(e,1)),null!=this.__cbOncePointerDown&&-1!=(e=this.__cbOncePointerDown.indexOf(n))&&(this.__cbOncePointerDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerDown[e])&&l(),this.__cbOnceOwnerUnbindPointerDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindPointerDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerDown[r])&&l()}this.__cbOnOwnerUnbindPointerDown=null}if(null!=this.__cbOnceOwnerUnbindPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindPointerDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerDown[r])&&l()}this.__cbOnceOwnerUnbindPointerDown=null}this.__cbOnPointerDown=null,this.__cbOncePointerDown=null}},listensPointerDown:function(){return null!=this.__cbOnPointerDown&&this.__cbOnPointerDown.length>0||null!=this.__cbOncePointerDown&&this.__cbOncePointerDown.length>0},emitPointerUp:function(n){var e=0;if(null!=this.__cbOnPointerUp&&(e+=this.__cbOnPointerUp.length),null!=this.__cbOncePointerUp&&(e+=this.__cbOncePointerUp.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerUp)for(var l=0,s=this.__cbOnPointerUp.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerUp[a],++r):--e}if(null!=this.__cbOncePointerUp){var o=null,p=null;for(l=0,s=this.__cbOncePointerUp.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerUp[a],this.__cbOncePointerUp[a]=null;var h=this.__cbOnceOwnerUnbindPointerUp[a];this.__cbOnceOwnerUnbindPointerUp[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerUp[a]),p.push(this.__cbOncePointerUp[a])}this.__cbOnceOwnerUnbindPointerUp=o,this.__cbOncePointerUp=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerUp&&(this.__cbOnOwnerUnbindPointerUp=[]),this.__cbOnOwnerUnbindPointerUp.push(null);null==this.__cbOnPointerUp&&(this.__cbOnPointerUp=[]),this.__cbOnPointerUp.push(e)},oncePointerUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerUp&&(this.__cbOnceOwnerUnbindPointerUp=[]),this.__cbOnceOwnerUnbindPointerUp.push(null);null==this.__cbOncePointerUp&&(this.__cbOncePointerUp=[]),this.__cbOncePointerUp.push(e)},offPointerUp:function(n){if(null!=n){var e;null!=this.__cbOnPointerUp&&-1!=(e=this.__cbOnPointerUp.indexOf(n))&&(this.__cbOnPointerUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerUp[e])&&l(),this.__cbOnOwnerUnbindPointerUp.splice(e,1)),null!=this.__cbOncePointerUp&&-1!=(e=this.__cbOncePointerUp.indexOf(n))&&(this.__cbOncePointerUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerUp[e])&&l(),this.__cbOnceOwnerUnbindPointerUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindPointerUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerUp[r])&&l()}this.__cbOnOwnerUnbindPointerUp=null}if(null!=this.__cbOnceOwnerUnbindPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindPointerUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerUp[r])&&l()}this.__cbOnceOwnerUnbindPointerUp=null}this.__cbOnPointerUp=null,this.__cbOncePointerUp=null}},listensPointerUp:function(){return null!=this.__cbOnPointerUp&&this.__cbOnPointerUp.length>0||null!=this.__cbOncePointerUp&&this.__cbOncePointerUp.length>0},emitPointerMove:function(n){var e=0;if(null!=this.__cbOnPointerMove&&(e+=this.__cbOnPointerMove.length),null!=this.__cbOncePointerMove&&(e+=this.__cbOncePointerMove.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnPointerMove)for(var l=0,s=this.__cbOnPointerMove.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnPointerMove[a],++r):--e}if(null!=this.__cbOncePointerMove){var o=null,p=null;for(l=0,s=this.__cbOncePointerMove.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOncePointerMove[a],this.__cbOncePointerMove[a]=null;var h=this.__cbOnceOwnerUnbindPointerMove[a];this.__cbOnceOwnerUnbindPointerMove[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindPointerMove[a]),p.push(this.__cbOncePointerMove[a])}this.__cbOnceOwnerUnbindPointerMove=o,this.__cbOncePointerMove=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onPointerMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindPointerMove&&(this.__cbOnOwnerUnbindPointerMove=[]),this.__cbOnOwnerUnbindPointerMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindPointerMove&&(this.__cbOnOwnerUnbindPointerMove=[]),this.__cbOnOwnerUnbindPointerMove.push(null);null==this.__cbOnPointerMove&&(this.__cbOnPointerMove=[]),this.__cbOnPointerMove.push(e)},oncePointerMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event pointerMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offPointerMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindPointerMove&&(this.__cbOnceOwnerUnbindPointerMove=[]),this.__cbOnceOwnerUnbindPointerMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindPointerMove&&(this.__cbOnceOwnerUnbindPointerMove=[]),this.__cbOnceOwnerUnbindPointerMove.push(null);null==this.__cbOncePointerMove&&(this.__cbOncePointerMove=[]),this.__cbOncePointerMove.push(e)},offPointerMove:function(n){if(null!=n){var e;null!=this.__cbOnPointerMove&&-1!=(e=this.__cbOnPointerMove.indexOf(n))&&(this.__cbOnPointerMove.splice(e,1),null!=(l=this.__cbOnOwnerUnbindPointerMove[e])&&l(),this.__cbOnOwnerUnbindPointerMove.splice(e,1)),null!=this.__cbOncePointerMove&&-1!=(e=this.__cbOncePointerMove.indexOf(n))&&(this.__cbOncePointerMove.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindPointerMove[e])&&l(),this.__cbOnceOwnerUnbindPointerMove.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindPointerMove){for(var t=0,i=this.__cbOnOwnerUnbindPointerMove.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindPointerMove[r])&&l()}this.__cbOnOwnerUnbindPointerMove=null}if(null!=this.__cbOnceOwnerUnbindPointerMove){for(t=0,i=this.__cbOnceOwnerUnbindPointerMove.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindPointerMove[r])&&l()}this.__cbOnceOwnerUnbindPointerMove=null}this.__cbOnPointerMove=null,this.__cbOncePointerMove=null}},listensPointerMove:function(){return null!=this.__cbOnPointerMove&&this.__cbOnPointerMove.length>0||null!=this.__cbOncePointerMove&&this.__cbOncePointerMove.length>0},emitMultiTouchPointerDown:function(n){var e=0;if(null!=this.__cbOnMultiTouchPointerDown&&(e+=this.__cbOnMultiTouchPointerDown.length),null!=this.__cbOnceMultiTouchPointerDown&&(e+=this.__cbOnceMultiTouchPointerDown.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnMultiTouchPointerDown)for(var l=0,s=this.__cbOnMultiTouchPointerDown.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnMultiTouchPointerDown[a],++r):--e}if(null!=this.__cbOnceMultiTouchPointerDown){var o=null,p=null;for(l=0,s=this.__cbOnceMultiTouchPointerDown.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceMultiTouchPointerDown[a],this.__cbOnceMultiTouchPointerDown[a]=null;var h=this.__cbOnceOwnerUnbindMultiTouchPointerDown[a];this.__cbOnceOwnerUnbindMultiTouchPointerDown[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindMultiTouchPointerDown[a]),p.push(this.__cbOnceMultiTouchPointerDown[a])}this.__cbOnceOwnerUnbindMultiTouchPointerDown=o,this.__cbOnceMultiTouchPointerDown=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onMultiTouchPointerDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event multiTouchPointerDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMultiTouchPointerDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMultiTouchPointerDown&&(this.__cbOnOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnOwnerUnbindMultiTouchPointerDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMultiTouchPointerDown&&(this.__cbOnOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnOwnerUnbindMultiTouchPointerDown.push(null);null==this.__cbOnMultiTouchPointerDown&&(this.__cbOnMultiTouchPointerDown=[]),this.__cbOnMultiTouchPointerDown.push(e)},onceMultiTouchPointerDown:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event multiTouchPointerDown because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMultiTouchPointerDown(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMultiTouchPointerDown&&(this.__cbOnceOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnceOwnerUnbindMultiTouchPointerDown.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMultiTouchPointerDown&&(this.__cbOnceOwnerUnbindMultiTouchPointerDown=[]),this.__cbOnceOwnerUnbindMultiTouchPointerDown.push(null);null==this.__cbOnceMultiTouchPointerDown&&(this.__cbOnceMultiTouchPointerDown=[]),this.__cbOnceMultiTouchPointerDown.push(e)},offMultiTouchPointerDown:function(n){if(null!=n){var e;null!=this.__cbOnMultiTouchPointerDown&&-1!=(e=this.__cbOnMultiTouchPointerDown.indexOf(n))&&(this.__cbOnMultiTouchPointerDown.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMultiTouchPointerDown[e])&&l(),this.__cbOnOwnerUnbindMultiTouchPointerDown.splice(e,1)),null!=this.__cbOnceMultiTouchPointerDown&&-1!=(e=this.__cbOnceMultiTouchPointerDown.indexOf(n))&&(this.__cbOnceMultiTouchPointerDown.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMultiTouchPointerDown[e])&&l(),this.__cbOnceOwnerUnbindMultiTouchPointerDown.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerDown){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerDown.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMultiTouchPointerDown[r])&&l()}this.__cbOnOwnerUnbindMultiTouchPointerDown=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerDown){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerDown.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMultiTouchPointerDown[r])&&l()}this.__cbOnceOwnerUnbindMultiTouchPointerDown=null}this.__cbOnMultiTouchPointerDown=null,this.__cbOnceMultiTouchPointerDown=null}},listensMultiTouchPointerDown:function(){return null!=this.__cbOnMultiTouchPointerDown&&this.__cbOnMultiTouchPointerDown.length>0||null!=this.__cbOnceMultiTouchPointerDown&&this.__cbOnceMultiTouchPointerDown.length>0},emitMultiTouchPointerUp:function(n){var e=0;if(null!=this.__cbOnMultiTouchPointerUp&&(e+=this.__cbOnMultiTouchPointerUp.length),null!=this.__cbOnceMultiTouchPointerUp&&(e+=this.__cbOnceMultiTouchPointerUp.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnMultiTouchPointerUp)for(var l=0,s=this.__cbOnMultiTouchPointerUp.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnMultiTouchPointerUp[a],++r):--e}if(null!=this.__cbOnceMultiTouchPointerUp){var o=null,p=null;for(l=0,s=this.__cbOnceMultiTouchPointerUp.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceMultiTouchPointerUp[a],this.__cbOnceMultiTouchPointerUp[a]=null;var h=this.__cbOnceOwnerUnbindMultiTouchPointerUp[a];this.__cbOnceOwnerUnbindMultiTouchPointerUp[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindMultiTouchPointerUp[a]),p.push(this.__cbOnceMultiTouchPointerUp[a])}this.__cbOnceOwnerUnbindMultiTouchPointerUp=o,this.__cbOnceMultiTouchPointerUp=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onMultiTouchPointerUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event multiTouchPointerUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMultiTouchPointerUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMultiTouchPointerUp&&(this.__cbOnOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnOwnerUnbindMultiTouchPointerUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMultiTouchPointerUp&&(this.__cbOnOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnOwnerUnbindMultiTouchPointerUp.push(null);null==this.__cbOnMultiTouchPointerUp&&(this.__cbOnMultiTouchPointerUp=[]),this.__cbOnMultiTouchPointerUp.push(e)},onceMultiTouchPointerUp:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event multiTouchPointerUp because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMultiTouchPointerUp(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMultiTouchPointerUp&&(this.__cbOnceOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnceOwnerUnbindMultiTouchPointerUp.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMultiTouchPointerUp&&(this.__cbOnceOwnerUnbindMultiTouchPointerUp=[]),this.__cbOnceOwnerUnbindMultiTouchPointerUp.push(null);null==this.__cbOnceMultiTouchPointerUp&&(this.__cbOnceMultiTouchPointerUp=[]),this.__cbOnceMultiTouchPointerUp.push(e)},offMultiTouchPointerUp:function(n){if(null!=n){var e;null!=this.__cbOnMultiTouchPointerUp&&-1!=(e=this.__cbOnMultiTouchPointerUp.indexOf(n))&&(this.__cbOnMultiTouchPointerUp.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMultiTouchPointerUp[e])&&l(),this.__cbOnOwnerUnbindMultiTouchPointerUp.splice(e,1)),null!=this.__cbOnceMultiTouchPointerUp&&-1!=(e=this.__cbOnceMultiTouchPointerUp.indexOf(n))&&(this.__cbOnceMultiTouchPointerUp.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMultiTouchPointerUp[e])&&l(),this.__cbOnceOwnerUnbindMultiTouchPointerUp.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerUp){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerUp.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMultiTouchPointerUp[r])&&l()}this.__cbOnOwnerUnbindMultiTouchPointerUp=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerUp){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerUp.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMultiTouchPointerUp[r])&&l()}this.__cbOnceOwnerUnbindMultiTouchPointerUp=null}this.__cbOnMultiTouchPointerUp=null,this.__cbOnceMultiTouchPointerUp=null}},listensMultiTouchPointerUp:function(){return null!=this.__cbOnMultiTouchPointerUp&&this.__cbOnMultiTouchPointerUp.length>0||null!=this.__cbOnceMultiTouchPointerUp&&this.__cbOnceMultiTouchPointerUp.length>0},emitMultiTouchPointerMove:function(n){var e=0;if(null!=this.__cbOnMultiTouchPointerMove&&(e+=this.__cbOnMultiTouchPointerMove.length),null!=this.__cbOnceMultiTouchPointerMove&&(e+=this.__cbOnceMultiTouchPointerMove.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnMultiTouchPointerMove)for(var l=0,s=this.__cbOnMultiTouchPointerMove.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnMultiTouchPointerMove[a],++r):--e}if(null!=this.__cbOnceMultiTouchPointerMove){var o=null,p=null;for(l=0,s=this.__cbOnceMultiTouchPointerMove.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceMultiTouchPointerMove[a],this.__cbOnceMultiTouchPointerMove[a]=null;var h=this.__cbOnceOwnerUnbindMultiTouchPointerMove[a];this.__cbOnceOwnerUnbindMultiTouchPointerMove[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindMultiTouchPointerMove[a]),p.push(this.__cbOnceMultiTouchPointerMove[a])}this.__cbOnceOwnerUnbindMultiTouchPointerMove=o,this.__cbOnceMultiTouchPointerMove=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onMultiTouchPointerMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event multiTouchPointerMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMultiTouchPointerMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMultiTouchPointerMove&&(this.__cbOnOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnOwnerUnbindMultiTouchPointerMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMultiTouchPointerMove&&(this.__cbOnOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnOwnerUnbindMultiTouchPointerMove.push(null);null==this.__cbOnMultiTouchPointerMove&&(this.__cbOnMultiTouchPointerMove=[]),this.__cbOnMultiTouchPointerMove.push(e)},onceMultiTouchPointerMove:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event multiTouchPointerMove because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMultiTouchPointerMove(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMultiTouchPointerMove&&(this.__cbOnceOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnceOwnerUnbindMultiTouchPointerMove.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMultiTouchPointerMove&&(this.__cbOnceOwnerUnbindMultiTouchPointerMove=[]),this.__cbOnceOwnerUnbindMultiTouchPointerMove.push(null);null==this.__cbOnceMultiTouchPointerMove&&(this.__cbOnceMultiTouchPointerMove=[]),this.__cbOnceMultiTouchPointerMove.push(e)},offMultiTouchPointerMove:function(n){if(null!=n){var e;null!=this.__cbOnMultiTouchPointerMove&&-1!=(e=this.__cbOnMultiTouchPointerMove.indexOf(n))&&(this.__cbOnMultiTouchPointerMove.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMultiTouchPointerMove[e])&&l(),this.__cbOnOwnerUnbindMultiTouchPointerMove.splice(e,1)),null!=this.__cbOnceMultiTouchPointerMove&&-1!=(e=this.__cbOnceMultiTouchPointerMove.indexOf(n))&&(this.__cbOnceMultiTouchPointerMove.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMultiTouchPointerMove[e])&&l(),this.__cbOnceOwnerUnbindMultiTouchPointerMove.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMultiTouchPointerMove){for(var t=0,i=this.__cbOnOwnerUnbindMultiTouchPointerMove.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMultiTouchPointerMove[r])&&l()}this.__cbOnOwnerUnbindMultiTouchPointerMove=null}if(null!=this.__cbOnceOwnerUnbindMultiTouchPointerMove){for(t=0,i=this.__cbOnceOwnerUnbindMultiTouchPointerMove.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMultiTouchPointerMove[r])&&l()}this.__cbOnceOwnerUnbindMultiTouchPointerMove=null}this.__cbOnMultiTouchPointerMove=null,this.__cbOnceMultiTouchPointerMove=null}},listensMultiTouchPointerMove:function(){return null!=this.__cbOnMultiTouchPointerMove&&this.__cbOnMultiTouchPointerMove.length>0||null!=this.__cbOnceMultiTouchPointerMove&&this.__cbOnceMultiTouchPointerMove.length>0},emitFocus:function(n){var e=0;if(null!=this.__cbOnFocus&&(e+=this.__cbOnFocus.length),null!=this.__cbOnceFocus&&(e+=this.__cbOnceFocus.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnFocus)for(var l=0,s=this.__cbOnFocus.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnFocus[a],++r):--e}if(null!=this.__cbOnceFocus){var o=null,p=null;for(l=0,s=this.__cbOnceFocus.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceFocus[a],this.__cbOnceFocus[a]=null;var h=this.__cbOnceOwnerUnbindFocus[a];this.__cbOnceOwnerUnbindFocus[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindFocus[a]),p.push(this.__cbOnceFocus[a])}this.__cbOnceOwnerUnbindFocus=o,this.__cbOnceFocus=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onFocus:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event focus because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFocus(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFocus&&(this.__cbOnOwnerUnbindFocus=[]),this.__cbOnOwnerUnbindFocus.push(null);null==this.__cbOnFocus&&(this.__cbOnFocus=[]),this.__cbOnFocus.push(e)},onceFocus:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event focus because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFocus(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFocus&&(this.__cbOnceOwnerUnbindFocus=[]),this.__cbOnceOwnerUnbindFocus.push(null);null==this.__cbOnceFocus&&(this.__cbOnceFocus=[]),this.__cbOnceFocus.push(e)},offFocus:function(n){if(null!=n){var e;null!=this.__cbOnFocus&&-1!=(e=this.__cbOnFocus.indexOf(n))&&(this.__cbOnFocus.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFocus[e])&&l(),this.__cbOnOwnerUnbindFocus.splice(e,1)),null!=this.__cbOnceFocus&&-1!=(e=this.__cbOnceFocus.indexOf(n))&&(this.__cbOnceFocus.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFocus[e])&&l(),this.__cbOnceOwnerUnbindFocus.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFocus){for(var t=0,i=this.__cbOnOwnerUnbindFocus.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFocus[r])&&l()}this.__cbOnOwnerUnbindFocus=null}if(null!=this.__cbOnceOwnerUnbindFocus){for(t=0,i=this.__cbOnceOwnerUnbindFocus.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFocus[r])&&l()}this.__cbOnceOwnerUnbindFocus=null}this.__cbOnFocus=null,this.__cbOnceFocus=null}},listensFocus:function(){return null!=this.__cbOnFocus&&this.__cbOnFocus.length>0||null!=this.__cbOnceFocus&&this.__cbOnceFocus.length>0},emitBlur:function(n){var e=0;if(null!=this.__cbOnBlur&&(e+=this.__cbOnBlur.length),null!=this.__cbOnceBlur&&(e+=this.__cbOnceBlur.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnBlur)for(var l=0,s=this.__cbOnBlur.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnBlur[a],++r):--e}if(null!=this.__cbOnceBlur){var o=null,p=null;for(l=0,s=this.__cbOnceBlur.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceBlur[a],this.__cbOnceBlur[a]=null;var h=this.__cbOnceOwnerUnbindBlur[a];this.__cbOnceOwnerUnbindBlur[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindBlur[a]),p.push(this.__cbOnceBlur[a])}this.__cbOnceOwnerUnbindBlur=o,this.__cbOnceBlur=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onBlur:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event blur because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBlur(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBlur&&(this.__cbOnOwnerUnbindBlur=[]),this.__cbOnOwnerUnbindBlur.push(null);null==this.__cbOnBlur&&(this.__cbOnBlur=[]),this.__cbOnBlur.push(e)},onceBlur:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event blur because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBlur(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBlur&&(this.__cbOnceOwnerUnbindBlur=[]),this.__cbOnceOwnerUnbindBlur.push(null);null==this.__cbOnceBlur&&(this.__cbOnceBlur=[]),this.__cbOnceBlur.push(e)},offBlur:function(n){if(null!=n){var e;null!=this.__cbOnBlur&&-1!=(e=this.__cbOnBlur.indexOf(n))&&(this.__cbOnBlur.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBlur[e])&&l(),this.__cbOnOwnerUnbindBlur.splice(e,1)),null!=this.__cbOnceBlur&&-1!=(e=this.__cbOnceBlur.indexOf(n))&&(this.__cbOnceBlur.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBlur[e])&&l(),this.__cbOnceOwnerUnbindBlur.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBlur){for(var t=0,i=this.__cbOnOwnerUnbindBlur.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBlur[r])&&l()}this.__cbOnOwnerUnbindBlur=null}if(null!=this.__cbOnceOwnerUnbindBlur){for(t=0,i=this.__cbOnceOwnerUnbindBlur.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBlur[r])&&l()}this.__cbOnceOwnerUnbindBlur=null}this.__cbOnBlur=null,this.__cbOnceBlur=null}},listensBlur:function(){return null!=this.__cbOnBlur&&this.__cbOnBlur.length>0||null!=this.__cbOnceBlur&&this.__cbOnceBlur.length>0},backendReady:function(){var n=this;ceramic_App.app.backend.screen.onResize(this,$bind(this,this.resize)),this.resize(),ceramic_App.app.settings.onBackgroundChange(this,(function(n,e){ceramic_App.app.backend.screen.setBackground(n)})),ceramic_App.app.settings.onTitleChange(this,(function(n,e){ceramic_App.app.backend.screen.setWindowTitle(n)})),ceramic_App.app.settings.onFullscreenChange(this,(function(n,e){ceramic_App.app.backend.screen.setWindowFullscreen(n)})),ceramic_App.app.settings.onScalingChange(this,(function(e,t){n.resize()})),ceramic_App.app.settings.onTargetWidthChange(this,(function(e,t){n.resize()})),ceramic_App.app.settings.onTargetHeightChange(this,(function(e,t){n.resize()})),ceramic_App.app.settings.onTargetDensityChange(this,(function(e,t){n.updateTexturesDensity()})),this.matrix.onChange(this,(function(){(e=n.reverseMatrix).a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.changedDirty=!0;var e=n.reverseMatrix,t=n.matrix,i=e.a*t.a+e.b*t.c;e.b=e.a*t.b+e.b*t.d,e.a=i;var r=e.c*t.a+e.d*t.c;e.d=e.c*t.b+e.d*t.d,e.c=r;var l=e.tx*t.a+e.ty*t.c+t.tx;e.ty=e.tx*t.b+e.ty*t.d+t.ty,e.tx=l,e.changedDirty=!0;var s=(e=n.reverseMatrix).a*e.d-e.b*e.c;if(0==s)e.a=e.b=e.c=e.d=0,e.tx=-e.tx,e.ty=-e.ty;else{s=1/s;i=e.d*s;e.d=e.a*s,e.a=i,e.b*=-s,e.c*=-s;l=-e.a*e.tx-e.c*e.ty;e.ty=-e.b*e.tx-e.d*e.ty,e.tx=l}e.changedDirty=!0,n.reverseMatrix.emitChange()})),ceramic_App.app.backend.screen.onMouseDown(this,(function(e,t,i){ceramic_App.app.beginUpdateCallbacks.push((function(){ceramic_App.app.flushImmediate();var r,l=t*clay_Clay.app.screenDensity,s=i*clay_Clay.app.screenDensity,a=l*(r=n.reverseMatrix).a+s*r.c+r.tx,o=l*(r=n.reverseMatrix).b+s*r.d+r.ty,p=new ceramic_TouchInfo(-1,e,a,o,a>=0&&a<=n.width&&o>=0&&o<=n.height);(-1!=p.buttonId&&(n.mouseX=p.x,n.mouseY=p.y),-1!=p.touchIndex)&&(null==(y=n.touches.get(p.touchIndex))?(y=new ceramic_Touch(p.touchIndex,p.x,p.y,0,0),n.touches.set(p.touchIndex,y)):(y.x=p.x,y.y=p.y));for(var h=n.pointerX,u=n.pointerY,_=0,c=0,d=0,f=n.touches,x=0,b=f.values.length;;){for(;x<b&&null==f.values[x];)++x;if(!(x<b))break;var y,v=x++;++_,c+=(y=f.values[v]).x,d+=y.y}_>0?(n.pointerX=c/_,n.pointerY=d/_):(n.pointerX=n.mouseX,n.pointerY=n.mouseY),n.pointerDeltaX+=n.pointerX-h,n.pointerDeltaY+=n.pointerY-u,n.emitMouseDown(e,a,o),n._numPointerDown++,n.emitMultiTouchPointerDown(p),1==n._numPointerDown&&n.emitPointerDown(p)}))})),ceramic_App.app.backend.screen.onMouseUp(this,(function(e,t,i){ceramic_App.app.beginUpdateCallbacks.push((function(){ceramic_App.app.flushImmediate();var r,l=t*clay_Clay.app.screenDensity,s=i*clay_Clay.app.screenDensity,a=l*(r=n.reverseMatrix).a+s*r.c+r.tx,o=l*(r=n.reverseMatrix).b+s*r.d+r.ty,p=new ceramic_TouchInfo(-1,e,a,o,a>=0&&a<=n.width&&o>=0&&o<=n.height);(-1!=p.buttonId&&(n.mouseX=p.x,n.mouseY=p.y),-1!=p.touchIndex)&&(null==(y=n.touches.get(p.touchIndex))?(y=new ceramic_Touch(p.touchIndex,p.x,p.y,0,0),n.touches.set(p.touchIndex,y)):(y.x=p.x,y.y=p.y));for(var h=n.pointerX,u=n.pointerY,_=0,c=0,d=0,f=n.touches,x=0,b=f.values.length;;){for(;x<b&&null==f.values[x];)++x;if(!(x<b))break;var y,v=x++;++_,c+=(y=f.values[v]).x,d+=y.y}_>0?(n.pointerX=c/_,n.pointerY=d/_):(n.pointerX=n.mouseX,n.pointerY=n.mouseY),n.pointerDeltaX+=n.pointerX-h,n.pointerDeltaY+=n.pointerY-u,-1!=p.touchIndex&&n.touches.set(p.touchIndex,null),n.emitMouseUp(e,a,o),n._numPointerDown--,n.emitMultiTouchPointerUp(p),0==n._numPointerDown&&n.emitPointerUp(p)}))})),ceramic_App.app.backend.screen.onMouseMove(this,(function(e,t){ceramic_App.app.beginUpdateCallbacks.push((function(){ceramic_App.app.flushImmediate();var i,r=e*clay_Clay.app.screenDensity,l=t*clay_Clay.app.screenDensity,s=r*(i=n.reverseMatrix).a+l*i.c+i.tx,a=r*(i=n.reverseMatrix).b+l*i.d+i.ty,o=new ceramic_TouchInfo(-1,-1,s,a,s>=0&&s<=n.width&&a>=0&&a<=n.height);(n.mouseX=o.x,n.mouseY=o.y,-1!=o.touchIndex)&&(null==(b=n.touches.get(o.touchIndex))?(b=new ceramic_Touch(o.touchIndex,o.x,o.y,0,0),n.touches.set(o.touchIndex,b)):(b.x=o.x,b.y=o.y));for(var p=n.pointerX,h=n.pointerY,u=0,_=0,c=0,d=n.touches,f=0,x=d.values.length;;){for(;f<x&&null==d.values[f];)++f;if(!(f<x))break;var b,y=f++;++u,_+=(b=d.values[y]).x,c+=b.y}u>0?(n.pointerX=_/u,n.pointerY=c/u):(n.pointerX=n.mouseX,n.pointerY=n.mouseY),n.pointerDeltaX+=n.pointerX-p,n.pointerDeltaY+=n.pointerY-h,n.emitMouseMove(s,a),n.emitMultiTouchPointerMove(o),n.emitPointerMove(o)}))})),ceramic_App.app.backend.screen.onMouseWheel(this,(function(e,t){ceramic_App.app.beginUpdateCallbacks.push((function(){n.emitMouseWheel(e,t)}))})),ceramic_App.app.backend.screen.onTouchDown(this,(function(e,t,i){ceramic_App.app.beginUpdateCallbacks.push((function(){ceramic_App.app.flushImmediate();var r,l=t*clay_Clay.app.screenDensity,s=i*clay_Clay.app.screenDensity,a=l*(r=n.reverseMatrix).a+s*r.c+r.tx,o=l*(r=n.reverseMatrix).b+s*r.d+r.ty,p=new ceramic_TouchInfo(e,-1,a,o,a>=0&&a<=n.width&&o>=0&&o<=n.height);(-1!=p.buttonId&&(n.mouseX=p.x,n.mouseY=p.y),-1!=p.touchIndex)&&(null==(y=n.touches.get(p.touchIndex))?(y=new ceramic_Touch(p.touchIndex,p.x,p.y,0,0),n.touches.set(p.touchIndex,y)):(y.x=p.x,y.y=p.y));for(var h=n.pointerX,u=n.pointerY,_=0,c=0,d=0,f=n.touches,x=0,b=f.values.length;;){for(;x<b&&null==f.values[x];)++x;if(!(x<b))break;var y,v=x++;++_,c+=(y=f.values[v]).x,d+=y.y}_>0?(n.pointerX=c/_,n.pointerY=d/_):(n.pointerX=n.mouseX,n.pointerY=n.mouseY),n.pointerDeltaX+=n.pointerX-h,n.pointerDeltaY+=n.pointerY-u,n.emitTouchDown(e,a,o),n._numPointerDown++,n.emitMultiTouchPointerDown(p),1==n._numPointerDown&&n.emitPointerDown(p)}))})),ceramic_App.app.backend.screen.onTouchUp(this,(function(e,t,i){ceramic_App.app.beginUpdateCallbacks.push((function(){ceramic_App.app.flushImmediate();var r,l=t*clay_Clay.app.screenDensity,s=i*clay_Clay.app.screenDensity,a=l*(r=n.reverseMatrix).a+s*r.c+r.tx,o=l*(r=n.reverseMatrix).b+s*r.d+r.ty,p=new ceramic_TouchInfo(e,-1,a,o,a>=0&&a<=n.width&&o>=0&&o<=n.height);(-1!=p.buttonId&&(n.mouseX=p.x,n.mouseY=p.y),-1!=p.touchIndex)&&(null==(y=n.touches.get(p.touchIndex))?(y=new ceramic_Touch(p.touchIndex,p.x,p.y,0,0),n.touches.set(p.touchIndex,y)):(y.x=p.x,y.y=p.y));for(var h=n.pointerX,u=n.pointerY,_=0,c=0,d=0,f=n.touches,x=0,b=f.values.length;;){for(;x<b&&null==f.values[x];)++x;if(!(x<b))break;var y,v=x++;++_,c+=(y=f.values[v]).x,d+=y.y}_>0?(n.pointerX=c/_,n.pointerY=d/_):(n.pointerX=n.mouseX,n.pointerY=n.mouseY),n.pointerDeltaX+=n.pointerX-h,n.pointerDeltaY+=n.pointerY-u,-1!=p.touchIndex&&n.touches.set(p.touchIndex,null),n.emitTouchUp(e,a,o),n._numPointerDown--,n.emitMultiTouchPointerUp(p),0==n._numPointerDown&&n.emitPointerUp(p)}))})),ceramic_App.app.backend.screen.onTouchMove(this,(function(e,t,i){ceramic_App.app.beginUpdateCallbacks.push((function(){ceramic_App.app.flushImmediate();var r,l=t*clay_Clay.app.screenDensity,s=i*clay_Clay.app.screenDensity,a=l*(r=n.reverseMatrix).a+s*r.c+r.tx,o=l*(r=n.reverseMatrix).b+s*r.d+r.ty,p=new ceramic_TouchInfo(e,-1,a,o,a>=0&&a<=n.width&&o>=0&&o<=n.height);-1!=p.touchIndex&&(null==(y=n.touches.get(p.touchIndex))?(y=new ceramic_Touch(p.touchIndex,p.x,p.y,0,0),n.touches.set(p.touchIndex,y)):(y.x=p.x,y.y=p.y));for(var h=n.pointerX,u=n.pointerY,_=0,c=0,d=0,f=n.touches,x=0,b=f.values.length;;){for(;x<b&&null==f.values[x];)++x;if(!(x<b))break;var y,v=x++;++_,c+=(y=f.values[v]).x,d+=y.y}_>0?(n.pointerX=c/_,n.pointerY=d/_):(n.pointerX=n.mouseX,n.pointerY=n.mouseY),n.pointerDeltaX+=n.pointerX-h,n.pointerDeltaY+=n.pointerY-u,n.emitTouchMove(e,a,o),n.emitMultiTouchPointerMove(p),n._numPointerDown>0&&n.emitPointerMove(p)}))}))},updatePointerOverState:function(n){var e=this.mouseX,t=this.mouseY,i=1e4,r=this.matchedOverListeners.h[i];(o=this.matchFirstOverListener(e,t))!=r&&(null!=o?this.matchedOverListeners.h[i]=o:this.matchedOverListeners.remove(i)),null!=r&&r!=o&&r._lifecycleState>=0&&r._numPointerOver>0&&(r._numPointerOver--,(0==r._numPointerOver||r.multiTouch)&&r.emitPointerOut(new ceramic_TouchInfo(-1,-1,e,t,!1))),null!=o&&r!=o&&(o._numPointerOver++,(1==o._numPointerOver||o.multiTouch)&&o.emitPointerOver(new ceramic_TouchInfo(-1,-1,e,t,!0)));for(var l=this.touches,s=0,a=l.values.length;;){for(;s<a&&null==l.values[s];)++s;if(!(s<a))break;var o,p=s++,h=l.values[p];e=h.x,t=h.y,i=2e4+h.index,r=this.matchedOverListeners.h[i];(o=this.matchFirstOverListener(e,t))!=r&&(null!=o?this.matchedOverListeners.h[i]=o:this.matchedOverListeners.remove(i)),null!=r&&r!=o&&r._lifecycleState>=0&&r._numPointerOver>0&&(r._numPointerOver--,(0==r._numPointerOver||r.multiTouch)&&r.emitPointerOut(new ceramic_TouchInfo(-1,-1,e,t,!1))),null!=o&&r!=o&&(o._numPointerOver++,(1==o._numPointerOver||o.multiTouch)&&o.emitPointerOver(new ceramic_TouchInfo(-1,-1,e,t,!0)))}},resize:function(){if(!this.resizing){this.resizing=!0,this.updateScaling();var n=ceramic_App.app.settings.get_scaling(),e=ceramic_App.app.settings.get_targetWidth(),t=ceramic_App.app.settings.get_targetHeight();this.emitResize(),n==ceramic_App.app.settings.get_scaling()&&e==ceramic_App.app.settings.get_targetWidth()&&t==ceramic_App.app.settings.get_targetHeight()||this.updateScaling(),this.updateTransform(),this.updateTexturesDensity(),this.resizing=!1}},updateTexturesDensity:function(){if(ceramic_App.app.settings.get_targetDensity()>0)this.set_texturesDensity(ceramic_App.app.settings.get_targetDensity());else{var n=this.density;n=n<1?1:Math.round(n),this.set_texturesDensity(n)}},updateScaling:function(){var n,e=ceramic_App.app.settings.get_targetWidth()>0?ceramic_App.app.settings.get_targetWidth():clay_Clay.app.screenWidth,t=ceramic_App.app.settings.get_targetHeight()>0?ceramic_App.app.settings.get_targetHeight():clay_Clay.app.screenHeight;switch(ceramic_App.app.settings.get_scaling()._hx_index){case 0:n=Math.max(e/(clay_Clay.app.screenWidth*clay_Clay.app.screenDensity),t/(clay_Clay.app.screenHeight*clay_Clay.app.screenDensity));break;case 1:n=Math.min(e/(clay_Clay.app.screenWidth*clay_Clay.app.screenDensity),t/(clay_Clay.app.screenHeight*clay_Clay.app.screenDensity));break;case 2:e=clay_Clay.app.screenWidth,t=clay_Clay.app.screenHeight,n=Math.max(e/(clay_Clay.app.screenWidth*clay_Clay.app.screenDensity),t/(clay_Clay.app.screenHeight*clay_Clay.app.screenDensity));break;case 3:var i=clay_Clay.app.screenHeight/clay_Clay.app.screenWidth,r=t/e;i>r?t=e*i:i<r&&(e=t/i),e=Math.ceil(e),t=Math.ceil(t),n=Math.max(e/(clay_Clay.app.screenWidth*clay_Clay.app.screenDensity),t/(clay_Clay.app.screenHeight*clay_Clay.app.screenDensity))}switch(this.actualWidth=Math.ceil(clay_Clay.app.screenWidth*clay_Clay.app.screenDensity*n),this.actualHeight=Math.ceil(clay_Clay.app.screenHeight*clay_Clay.app.screenDensity*n),this.density=1/n,ceramic_App.app.settings.get_scaling()._hx_index){case 0:case 1:this.offsetX=.5*(this.actualWidth-e),this.offsetY=.5*(this.actualHeight-t);break;case 2:case 3:this.offsetX=0,this.offsetY=0}this.width=e,this.height=t},updateTransform:function(){var n=ceramic_App.app.settings.get_targetWidth()>0?ceramic_App.app.settings.get_targetWidth()*this.density:clay_Clay.app.screenWidth*clay_Clay.app.screenDensity,e=ceramic_App.app.settings.get_targetHeight()>0?ceramic_App.app.settings.get_targetHeight()*this.density:clay_Clay.app.screenHeight*clay_Clay.app.screenDensity;switch(ceramic_App.app.settings.get_scaling()._hx_index){case 2:n=clay_Clay.app.screenWidth*clay_Clay.app.screenDensity,e=clay_Clay.app.screenHeight*clay_Clay.app.screenDensity;break;case 3:var t=clay_Clay.app.screenHeight/clay_Clay.app.screenWidth,i=e/n;t>i?e=n*t:t<i&&(n=e/t)}(r=this.matrix).a=1,r.b=0,r.c=0,r.d=1,r.tx=0,r.ty=0,r.changedDirty=!0;var r=this.matrix,l=this.density,s=this.density;r.a*=l,r.b*=s,r.c*=l,r.d*=s,r.tx*=l,r.ty*=s,r.changedDirty=!0;var a=.5*(clay_Clay.app.screenWidth*clay_Clay.app.screenDensity-n),o=.5*(clay_Clay.app.screenHeight*clay_Clay.app.screenDensity-e);(r=this.matrix).tx+=a,r.ty+=o,r.changedDirty=!0},matchFirstDownListener:function(n,e,t,i){null==i&&(i=-1),null==t&&(t=-1),ceramic_App.app.computeHierarchy();for(var r=0;r<2;){var l=r++;ceramic_Screen.matchedHitVisual=null;for(var s=0==l,a=ceramic_App.app.visuals,o=a.length-1;o>=0;){var p=a[o];if(p._lifecycleState>=0&&p.computedTouchable){var h=null!=p.__cbOnPointerDown&&p.__cbOnPointerDown.length>0||null!=p.__cbOncePointerDown&&p.__cbOncePointerDown.length>0,u=!1,_=!1;if(h&&(u=p._hits(n,e,!1))&&(_=p.interceptPointerDown(p,n,e,t,i)),u&&!_||s&&this.isHitVisual(p)&&p._hits(n,e,!1)){var c=!1;if(h)for(var d=p.parent;null!=d&&!(c=d.interceptPointerDown(p,n,e,t,i));)d=d.parent;if(!c){if(h||!s||!this.isHitVisual(p))return ceramic_Screen.matchedHitVisual=null,p;ceramic_Screen.matchedHitVisual=p}}}--o}}return ceramic_Screen.matchedHitVisual=null,null},matchFirstOverListener:function(n,e){ceramic_App.app.computeHierarchy();for(var t=0;t<2;){var i=t++;ceramic_Screen.matchedHitVisual=null;for(var r=0==i,l=ceramic_App.app.visuals,s=l.length-1;s>=0;){var a=l[s];if(a._lifecycleState>=0&&a.computedTouchable){var o=null!=a.__cbOnPointerOver&&a.__cbOnPointerOver.length>0||null!=a.__cbOncePointerOver&&a.__cbOncePointerOver.length>0,p=!1,h=!1;if(o&&(p=a._hits(n,e,!1))&&(h=a.interceptPointerOver(a,n,e)),p&&!h||r&&this.isHitVisual(a)&&a._hits(n,e,!1)){var u=!1;if(o)for(var _=a.parent;null!=_&&!(u=_.interceptPointerOver(a,n,e));)_=_.parent;if(!u){if(o||!r||!this.isHitVisual(a))return ceramic_Screen.matchedHitVisual=null,a;ceramic_Screen.matchedHitVisual=a}}}--s}}return ceramic_Screen.matchedHitVisual=null,null},prepareMultiTouchPointerDown:function(n){(-1!=n.buttonId&&(this.mouseX=n.x,this.mouseY=n.y),-1!=n.touchIndex)&&(null==(p=this.touches.get(n.touchIndex))?(p=new ceramic_Touch(n.touchIndex,n.x,n.y,0,0),this.touches.set(n.touchIndex,p)):(p.x=n.x,p.y=n.y));for(var e=this.pointerX,t=this.pointerY,i=0,r=0,l=0,s=this.touches,a=0,o=s.values.length;;){for(;a<o&&null==s.values[a];)++a;if(!(a<o))break;var p,h=a++;++i,r+=(p=s.values[h]).x,l+=p.y}i>0?(this.pointerX=r/i,this.pointerY=l/i):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-e,this.pointerDeltaY+=this.pointerY-t},prepareMultiTouchPointerUp:function(n){(-1!=n.buttonId&&(this.mouseX=n.x,this.mouseY=n.y),-1!=n.touchIndex)&&(null==(p=this.touches.get(n.touchIndex))?(p=new ceramic_Touch(n.touchIndex,n.x,n.y,0,0),this.touches.set(n.touchIndex,p)):(p.x=n.x,p.y=n.y));for(var e=this.pointerX,t=this.pointerY,i=0,r=0,l=0,s=this.touches,a=0,o=s.values.length;;){for(;a<o&&null==s.values[a];)++a;if(!(a<o))break;var p,h=a++;++i,r+=(p=s.values[h]).x,l+=p.y}i>0?(this.pointerX=r/i,this.pointerY=l/i):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-e,this.pointerDeltaY+=this.pointerY-t,-1!=n.touchIndex&&this.touches.set(n.touchIndex,null)},prepareMultiTouchPointerMove:function(n,e){(e&&(this.mouseX=n.x,this.mouseY=n.y),-1!=n.touchIndex)&&(null==(h=this.touches.get(n.touchIndex))?(h=new ceramic_Touch(n.touchIndex,n.x,n.y,0,0),this.touches.set(n.touchIndex,h)):(h.x=n.x,h.y=n.y));for(var t=this.pointerX,i=this.pointerY,r=0,l=0,s=0,a=this.touches,o=0,p=a.values.length;;){for(;o<p&&null==a.values[o];)++o;if(!(o<p))break;var h,u=o++;++r,l+=(h=a.values[u]).x,s+=h.y}r>0?(this.pointerX=l/r,this.pointerY=s/r):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-t,this.pointerDeltaY+=this.pointerY-i},updatePointer:function(){for(var n=this.pointerX,e=this.pointerY,t=0,i=0,r=0,l=this.touches,s=0,a=l.values.length;;){for(;s<a&&null==l.values[s];)++s;if(!(s<a))break;var o=s++,p=l.values[o];++t,i+=p.x,r+=p.y}t>0?(this.pointerX=i/t,this.pointerY=r/t):(this.pointerX=this.mouseX,this.pointerY=this.mouseY),this.pointerDeltaX+=this.pointerX-n,this.pointerDeltaY+=this.pointerY-e},didEmitMouseDown:function(n,e,t){var i=this.matchFirstDownListener(e,t,-1,n);null!=i&&(i._numPointerDown++,(1==i._numPointerDown||i.multiTouch)&&(ceramic_App.app.screen.set_focusedVisual(i),i.emitPointerDown(new ceramic_TouchInfo(-1,n,e,t,!0))));var r=1e4+n;this.matchedDownListeners.h[r]=i},didEmitMouseUp:function(n,e,t){var i=1e4+n,r=this.matchedDownListeners.h[i];null!=r&&r._lifecycleState>=0&&r._numPointerDown>0&&(r._numPointerDown--,(0==r._numPointerDown||r.multiTouch)&&r.emitPointerUp(new ceramic_TouchInfo(-1,n,e,t,r._hits(e,t,!1)))),this.matchedDownListeners.remove(i)},updateMouseOver:function(n,e){var t=1e4,i=this.matchedOverListeners.h[t],r=this.matchFirstOverListener(n,e);r!=i&&(null!=r?this.matchedOverListeners.h[t]=r:this.matchedOverListeners.remove(t)),null!=i&&i!=r&&i._lifecycleState>=0&&i._numPointerOver>0&&(i._numPointerOver--,(0==i._numPointerOver||i.multiTouch)&&i.emitPointerOut(new ceramic_TouchInfo(-1,-1,n,e,!1))),null!=r&&i!=r&&(r._numPointerOver++,(1==r._numPointerOver||r.multiTouch)&&r.emitPointerOver(new ceramic_TouchInfo(-1,-1,n,e,!0)))},didEmitTouchDown:function(n,e,t){var i=this.matchFirstDownListener(e,t,n,-1);null!=i&&(i._numPointerDown++,(1==i._numPointerDown||i.multiTouch)&&(ceramic_App.app.screen.set_focusedVisual(i),i.emitPointerDown(new ceramic_TouchInfo(n,-1,e,t,!0))));var r=2e4+n;this.matchedDownListeners.h[r]=i},didEmitTouchUp:function(n,e,t){var i=2e4+n,r=this.matchedDownListeners.h[i];null!=r&&r._lifecycleState>=0&&r._numPointerDown>0&&(r._numPointerDown--,(0==r._numPointerDown||r.multiTouch)&&r.emitPointerUp(new ceramic_TouchInfo(n,-1,e,t,r._hits(e,t,!1)))),this.matchedDownListeners.remove(i)},updateTouchOver:function(n,e,t){var i=2e4+n,r=this.matchedOverListeners.h[i],l=this.matchFirstOverListener(e,t);l!=r&&(null!=l?this.matchedOverListeners.h[i]=l:this.matchedOverListeners.remove(i)),null!=r&&r!=l&&r._lifecycleState>=0&&r._numPointerOver>0&&(r._numPointerOver--,(0==r._numPointerOver||r.multiTouch)&&r.emitPointerOut(new ceramic_TouchInfo(-1,-1,e,t,!1))),null!=l&&r!=l&&(l._numPointerOver++,(1==l._numPointerOver||l.multiTouch)&&l.emitPointerOver(new ceramic_TouchInfo(-1,-1,e,t,!0)))},addHitVisual:function(n){var e=8==(8&n.flags);this.hitVisuals.push(n),e||(n.flags|=8)},removeHitVisual:function(n){var e=this.hitVisuals.indexOf(n);-1==e?ceramic_App.app.logger.warning("Hit visual not removed from hitVisuals because it was not added at the first place",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Screen.hx",lineNumber:1193,className:"ceramic.Screen",methodName:"removeHitVisual"}):(this.hitVisuals.splice(e,1),-1==this.hitVisuals.indexOf(n)&&(n.flags&=-9))},isHitVisual:function(n){return 8==(8&n.flags)},resetDeltas:function(){this.pointerDeltaX=0,this.pointerDeltaY=0,this.mouseDeltaX=0,this.mouseDeltaY=0,this.mouseWheelDeltaX=0,this.mouseWheelDeltaY=0;for(var n=0;n<=this.maxTouchIndex;){var e=this.touches.get(n);null!=e&&(e.deltaX=0,e.deltaY=0),++n}},willEmitMouseMove:function(n,e){this.mouseDeltaX+=n-this.prevMouseX,this.mouseDeltaY+=e-this.prevMouseY,this.prevMouseX=n,this.prevMouseY=e},willEmitMouseDown:function(n,e,t){var i=this;this.prevMouseX=e,this.prevMouseY=t;var r=null!=(l=this.pressedMouseButtons.h[0|n])?l:0;-1==r&&(r=0);var l=r+1;this.pressedMouseButtons.h[0|n]=l,0==r&&ceramic_App.app.beginUpdateCallbacks.push((function(){var e=i.pressedMouseButtons.h[0|n];1==(null!=e?e:0)&&(i.pressedMouseButtons.h[0|n]=2)}))},willEmitMouseUp:function(n,e,t){var i=this;this.pressedMouseButtons.h[0|n]=-1,ceramic_App.app.beginUpdateCallbacks.push((function(){var e=i.pressedMouseButtons.h[0|n];-1==(null!=e?e:0)&&(i.pressedMouseButtons.h[0|n]=0)}))},willEmitMouseWheel:function(n,e){this.mouseWheelDeltaX+=n,this.mouseWheelDeltaY+=e},mouseAllowed:function(n){return!0},_mousePressed:function(n){var e=this.pressedMouseButtons.h[0|n];return(null!=e?e:0)>0},_mouseJustPressed:function(n){var e=this.pressedMouseButtons.h[0|n];return 1==(null!=e?e:0)},_mouseJustReleased:function(n){var e=this.pressedMouseButtons.h[0|n];return-1==(null!=e?e:0)},willEmitTouchMove:function(n,e,t){n>this.maxTouchIndex&&(this.maxTouchIndex=n);var i,r=2*n,l=r+1,s=null!=(i=this.prevTouchPositions.h[0|r])?i:0,a=null!=(i=this.prevTouchPositions.h[0|l])?i:0,o=this.touches.get(n);null!=o&&(o.deltaX+=e-s,o.deltaY+=t-a)},willEmitTouchDown:function(n,e,t){var i=this,r=2*n,l=r+1;this.prevTouchPositions.h[0|r]=e,this.prevTouchPositions.h[0|l]=t;var s=null!=(a=this.pressedTouches.h[0|n])?a:0;-1==s&&(s=0);var a=s+1;this.pressedTouches.h[0|n]=a,0==s&&ceramic_App.app.beginUpdateCallbacks.push((function(){var e=i.pressedTouches.h[0|n];1==(null!=e?e:0)&&(i.pressedTouches.h[0|n]=2)}))},willEmitTouchUp:function(n,e,t){var i=this,r=this.pressedTouches.h[0|n],l=null!=r?r:0;this.pressedTouches.h[0|n]=1==l?-2:-1,ceramic_App.app.beginUpdateCallbacks.push((function(){var e=i.pressedTouches.h[0|n],t=null!=e?e:0;-1!=t&&-2!=t||(i.pressedTouches.h[0|n]=0)}))},_touchPressed:function(n){var e=this.pressedTouches.h[0|n];return(null!=e?e:0)>0},_touchJustPressed:function(n){var e=this.pressedTouches.h[0|n],t=null!=e?e:0;return 1==t||-2==t},_touchJustReleased:function(n){var e=this.pressedTouches.h[0|n],t=null!=e?e:0;return-1==t||-2==t},touchDeltaX:function(n){var e=this.touches.get(n);return null!=e?e.deltaX:0},touchDeltaY:function(n){var e=this.touches.get(n);return null!=e?e.deltaY:0},toTexture:function(n){ceramic_App.app.backend.screen.screenshotToTexture((function(e){if(null!=e){var t=new ceramic_Texture(e,clay_Clay.app.screenDensity);n(t)}else n(null)}))},toPixels:function(n){ceramic_App.app.backend.screen.screenshotToPixels(n)},_toPng:function(n,e){ceramic_App.app.onceFinishDraw(this,(function(){ceramic_App.app.backend.screen.screenshotToPng(n,e)}))},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offObservedDirty(),this.offFocusedVisualChange(),this.offTexturesDensityChange(),this.offResize(),this.offMouseDown(),this.offMouseUp(),this.offMouseWheel(),this.offMouseMove(),this.offTouchDown(),this.offTouchUp(),this.offTouchMove(),this.offPointerDown(),this.offPointerUp(),this.offPointerMove(),this.offMultiTouchPointerDown(),this.offMultiTouchPointerUp(),this.offMultiTouchPointerMove(),this.offFocus(),this.offBlur()},__class__:ceramic_Screen,__properties__:$extend(ceramic_Entity.prototype.__properties__,{get_isPointerDown:"get_isPointerDown",set_texturesDensity:"set_texturesDensity",get_texturesDensity:"get_texturesDensity",set_unobservedFocusedVisual:"set_unobservedFocusedVisual",set_focusedVisual:"set_focusedVisual",get_focusedVisual:"get_focusedVisual",get_nativeDensity:"get_nativeDensity",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth"})});var b=i["ceramic.ScreenScaling"]={__ename__:"ceramic.ScreenScaling",__constructs__:null,FIT:{_hx_name:"FIT",_hx_index:0,__enum__:"ceramic.ScreenScaling",toString:$estr},FILL:{_hx_name:"FILL",_hx_index:1,__enum__:"ceramic.ScreenScaling",toString:$estr},RESIZE:{_hx_name:"RESIZE",_hx_index:2,__enum__:"ceramic.ScreenScaling",toString:$estr},FIT_RESIZE:{_hx_name:"FIT_RESIZE",_hx_index:3,__enum__:"ceramic.ScreenScaling",toString:$estr}};b.__constructs__=[b.FIT,b.FILL,b.RESIZE,b.FIT_RESIZE];var ceramic_Settings=function(){this.defaultShader="shader:textured",this.defaultFont="font:RobotoMedium",this.backend={},this.assetsPath="assets",this.resizable=!1,this.antialiasing=0,this.appInfo=null,this.collections=null,this.orientation=0,this.unobservedOverrideDelta=-1,this.overrideDeltaAutoruns=null,this.unobservedMaxDelta=.1,this.maxDeltaAutoruns=null,this.unobservedTargetFps=-1,this.targetFpsAutoruns=null,this.unobservedFullscreen=!1,this.fullscreenAutoruns=null,this.unobservedTitle="App",this.titleAutoruns=null,this.unobservedScaling=b.FIT,this.scalingAutoruns=null,this.unobservedBackground=0,this.backgroundAutoruns=null,this.unobservedTargetDensity=0,this.targetDensityAutoruns=null,this.unobservedWindowHeight=0,this.windowHeightAutoruns=null,this.unobservedWindowWidth=0,this.windowWidthAutoruns=null,this.unobservedTargetHeight=0,this.targetHeightAutoruns=null,this.unobservedTargetWidth=0,this.targetWidthAutoruns=null,this.observedDirty=!1};t["ceramic.Settings"]=ceramic_Settings,ceramic_Settings.__name__="ceramic.Settings",ceramic_Settings.__interfaces__=[tracker_Observable],ceramic_Settings.prototype={emitObservedDirty:function(n,e){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnObservedDirty)for(var s=0,a=this.__cbOnObservedDirty.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnObservedDirty[o],++l):--t}if(null!=this.__cbOnceObservedDirty){var p=null,h=null;for(s=0,a=this.__cbOnceObservedDirty.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceObservedDirty[o],this.__cbOnceObservedDirty[o]=null;var u=this.__cbOnceOwnerUnbindObservedDirty[o];this.__cbOnceOwnerUnbindObservedDirty[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindObservedDirty[o]),h.push(this.__cbOnceObservedDirty[o])}this.__cbOnceOwnerUnbindObservedDirty=p,this.__cbOnceObservedDirty=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(e)},onceObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(e)},offObservedDirty:function(n){if(null!=n){var e;null!=this.__cbOnObservedDirty&&-1!=(e=this.__cbOnObservedDirty.indexOf(n))&&(this.__cbOnObservedDirty.splice(e,1),null!=(l=this.__cbOnOwnerUnbindObservedDirty[e])&&l(),this.__cbOnOwnerUnbindObservedDirty.splice(e,1)),null!=this.__cbOnceObservedDirty&&-1!=(e=this.__cbOnceObservedDirty.indexOf(n))&&(this.__cbOnceObservedDirty.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindObservedDirty[e])&&l(),this.__cbOnceOwnerUnbindObservedDirty.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindObservedDirty[r])&&l()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindObservedDirty[r])&&l()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&this.__cbOnObservedDirty.length>0||null!=this.__cbOnceObservedDirty&&this.__cbOnceObservedDirty.length>0},get_targetWidth:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.targetWidthAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.targetWidthAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTargetWidth},set_targetWidth:function(n){var e=this.unobservedTargetWidth;if(this.unobservedTargetWidth=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetWidthChange(n,e);var t=this.targetWidthAutoruns;if(null!=t){this.targetWidthAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTargetWidth:function(){var n=this.unobservedTargetWidth;this.emitTargetWidthChange(n,n);var e=this.targetWidthAutoruns;if(null!=e){this.targetWidthAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTargetWidthChange:function(n,e){var t=0;if(null!=this.__cbOnTargetWidthChange&&(t+=this.__cbOnTargetWidthChange.length),null!=this.__cbOnceTargetWidthChange&&(t+=this.__cbOnceTargetWidthChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTargetWidthChange)for(var s=0,a=this.__cbOnTargetWidthChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTargetWidthChange[o],++l):--t}if(null!=this.__cbOnceTargetWidthChange){var p=null,h=null;for(s=0,a=this.__cbOnceTargetWidthChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTargetWidthChange[o],this.__cbOnceTargetWidthChange[o]=null;var u=this.__cbOnceOwnerUnbindTargetWidthChange[o];this.__cbOnceOwnerUnbindTargetWidthChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTargetWidthChange[o]),h.push(this.__cbOnceTargetWidthChange[o])}this.__cbOnceOwnerUnbindTargetWidthChange=p,this.__cbOnceTargetWidthChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTargetWidthChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetWidthChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetWidthChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTargetWidthChange&&(this.__cbOnOwnerUnbindTargetWidthChange=[]),this.__cbOnOwnerUnbindTargetWidthChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTargetWidthChange&&(this.__cbOnOwnerUnbindTargetWidthChange=[]),this.__cbOnOwnerUnbindTargetWidthChange.push(null);null==this.__cbOnTargetWidthChange&&(this.__cbOnTargetWidthChange=[]),this.__cbOnTargetWidthChange.push(e)},onceTargetWidthChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetWidthChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetWidthChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTargetWidthChange&&(this.__cbOnceOwnerUnbindTargetWidthChange=[]),this.__cbOnceOwnerUnbindTargetWidthChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTargetWidthChange&&(this.__cbOnceOwnerUnbindTargetWidthChange=[]),this.__cbOnceOwnerUnbindTargetWidthChange.push(null);null==this.__cbOnceTargetWidthChange&&(this.__cbOnceTargetWidthChange=[]),this.__cbOnceTargetWidthChange.push(e)},offTargetWidthChange:function(n){if(null!=n){var e;null!=this.__cbOnTargetWidthChange&&-1!=(e=this.__cbOnTargetWidthChange.indexOf(n))&&(this.__cbOnTargetWidthChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTargetWidthChange[e])&&l(),this.__cbOnOwnerUnbindTargetWidthChange.splice(e,1)),null!=this.__cbOnceTargetWidthChange&&-1!=(e=this.__cbOnceTargetWidthChange.indexOf(n))&&(this.__cbOnceTargetWidthChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTargetWidthChange[e])&&l(),this.__cbOnceOwnerUnbindTargetWidthChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTargetWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetWidthChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTargetWidthChange[r])&&l()}this.__cbOnOwnerUnbindTargetWidthChange=null}if(null!=this.__cbOnceOwnerUnbindTargetWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetWidthChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTargetWidthChange[r])&&l()}this.__cbOnceOwnerUnbindTargetWidthChange=null}this.__cbOnTargetWidthChange=null,this.__cbOnceTargetWidthChange=null}},listensTargetWidthChange:function(){return null!=this.__cbOnTargetWidthChange&&this.__cbOnTargetWidthChange.length>0||null!=this.__cbOnceTargetWidthChange&&this.__cbOnceTargetWidthChange.length>0},get_targetHeight:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.targetHeightAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.targetHeightAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTargetHeight},set_targetHeight:function(n){var e=this.unobservedTargetHeight;if(this.unobservedTargetHeight=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetHeightChange(n,e);var t=this.targetHeightAutoruns;if(null!=t){this.targetHeightAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTargetHeight:function(){var n=this.unobservedTargetHeight;this.emitTargetHeightChange(n,n);var e=this.targetHeightAutoruns;if(null!=e){this.targetHeightAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTargetHeightChange:function(n,e){var t=0;if(null!=this.__cbOnTargetHeightChange&&(t+=this.__cbOnTargetHeightChange.length),null!=this.__cbOnceTargetHeightChange&&(t+=this.__cbOnceTargetHeightChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTargetHeightChange)for(var s=0,a=this.__cbOnTargetHeightChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTargetHeightChange[o],++l):--t}if(null!=this.__cbOnceTargetHeightChange){var p=null,h=null;for(s=0,a=this.__cbOnceTargetHeightChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTargetHeightChange[o],this.__cbOnceTargetHeightChange[o]=null;var u=this.__cbOnceOwnerUnbindTargetHeightChange[o];this.__cbOnceOwnerUnbindTargetHeightChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTargetHeightChange[o]),h.push(this.__cbOnceTargetHeightChange[o])}this.__cbOnceOwnerUnbindTargetHeightChange=p,this.__cbOnceTargetHeightChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTargetHeightChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetHeightChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetHeightChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTargetHeightChange&&(this.__cbOnOwnerUnbindTargetHeightChange=[]),this.__cbOnOwnerUnbindTargetHeightChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTargetHeightChange&&(this.__cbOnOwnerUnbindTargetHeightChange=[]),this.__cbOnOwnerUnbindTargetHeightChange.push(null);null==this.__cbOnTargetHeightChange&&(this.__cbOnTargetHeightChange=[]),this.__cbOnTargetHeightChange.push(e)},onceTargetHeightChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetHeightChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetHeightChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTargetHeightChange&&(this.__cbOnceOwnerUnbindTargetHeightChange=[]),this.__cbOnceOwnerUnbindTargetHeightChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTargetHeightChange&&(this.__cbOnceOwnerUnbindTargetHeightChange=[]),this.__cbOnceOwnerUnbindTargetHeightChange.push(null);null==this.__cbOnceTargetHeightChange&&(this.__cbOnceTargetHeightChange=[]),this.__cbOnceTargetHeightChange.push(e)},offTargetHeightChange:function(n){if(null!=n){var e;null!=this.__cbOnTargetHeightChange&&-1!=(e=this.__cbOnTargetHeightChange.indexOf(n))&&(this.__cbOnTargetHeightChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTargetHeightChange[e])&&l(),this.__cbOnOwnerUnbindTargetHeightChange.splice(e,1)),null!=this.__cbOnceTargetHeightChange&&-1!=(e=this.__cbOnceTargetHeightChange.indexOf(n))&&(this.__cbOnceTargetHeightChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTargetHeightChange[e])&&l(),this.__cbOnceOwnerUnbindTargetHeightChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTargetHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetHeightChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTargetHeightChange[r])&&l()}this.__cbOnOwnerUnbindTargetHeightChange=null}if(null!=this.__cbOnceOwnerUnbindTargetHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetHeightChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTargetHeightChange[r])&&l()}this.__cbOnceOwnerUnbindTargetHeightChange=null}this.__cbOnTargetHeightChange=null,this.__cbOnceTargetHeightChange=null}},listensTargetHeightChange:function(){return null!=this.__cbOnTargetHeightChange&&this.__cbOnTargetHeightChange.length>0||null!=this.__cbOnceTargetHeightChange&&this.__cbOnceTargetHeightChange.length>0},targetSize:function(n,e){this.set_targetWidth(n),this.set_targetHeight(e)},get_windowWidth:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.windowWidthAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.windowWidthAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedWindowWidth},set_windowWidth:function(n){var e=this.unobservedWindowWidth;if(this.unobservedWindowWidth=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWindowWidthChange(n,e);var t=this.windowWidthAutoruns;if(null!=t){this.windowWidthAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateWindowWidth:function(){var n=this.unobservedWindowWidth;this.emitWindowWidthChange(n,n);var e=this.windowWidthAutoruns;if(null!=e){this.windowWidthAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitWindowWidthChange:function(n,e){var t=0;if(null!=this.__cbOnWindowWidthChange&&(t+=this.__cbOnWindowWidthChange.length),null!=this.__cbOnceWindowWidthChange&&(t+=this.__cbOnceWindowWidthChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnWindowWidthChange)for(var s=0,a=this.__cbOnWindowWidthChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnWindowWidthChange[o],++l):--t}if(null!=this.__cbOnceWindowWidthChange){var p=null,h=null;for(s=0,a=this.__cbOnceWindowWidthChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceWindowWidthChange[o],this.__cbOnceWindowWidthChange[o]=null;var u=this.__cbOnceOwnerUnbindWindowWidthChange[o];this.__cbOnceOwnerUnbindWindowWidthChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindWindowWidthChange[o]),h.push(this.__cbOnceWindowWidthChange[o])}this.__cbOnceOwnerUnbindWindowWidthChange=p,this.__cbOnceWindowWidthChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onWindowWidthChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event windowWidthChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offWindowWidthChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindWindowWidthChange&&(this.__cbOnOwnerUnbindWindowWidthChange=[]),this.__cbOnOwnerUnbindWindowWidthChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindWindowWidthChange&&(this.__cbOnOwnerUnbindWindowWidthChange=[]),this.__cbOnOwnerUnbindWindowWidthChange.push(null);null==this.__cbOnWindowWidthChange&&(this.__cbOnWindowWidthChange=[]),this.__cbOnWindowWidthChange.push(e)},onceWindowWidthChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event windowWidthChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offWindowWidthChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindWindowWidthChange&&(this.__cbOnceOwnerUnbindWindowWidthChange=[]),this.__cbOnceOwnerUnbindWindowWidthChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindWindowWidthChange&&(this.__cbOnceOwnerUnbindWindowWidthChange=[]),this.__cbOnceOwnerUnbindWindowWidthChange.push(null);null==this.__cbOnceWindowWidthChange&&(this.__cbOnceWindowWidthChange=[]),this.__cbOnceWindowWidthChange.push(e)},offWindowWidthChange:function(n){if(null!=n){var e;null!=this.__cbOnWindowWidthChange&&-1!=(e=this.__cbOnWindowWidthChange.indexOf(n))&&(this.__cbOnWindowWidthChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindWindowWidthChange[e])&&l(),this.__cbOnOwnerUnbindWindowWidthChange.splice(e,1)),null!=this.__cbOnceWindowWidthChange&&-1!=(e=this.__cbOnceWindowWidthChange.indexOf(n))&&(this.__cbOnceWindowWidthChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindWindowWidthChange[e])&&l(),this.__cbOnceOwnerUnbindWindowWidthChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindWindowWidthChange){for(var t=0,i=this.__cbOnOwnerUnbindWindowWidthChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindWindowWidthChange[r])&&l()}this.__cbOnOwnerUnbindWindowWidthChange=null}if(null!=this.__cbOnceOwnerUnbindWindowWidthChange){for(t=0,i=this.__cbOnceOwnerUnbindWindowWidthChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindWindowWidthChange[r])&&l()}this.__cbOnceOwnerUnbindWindowWidthChange=null}this.__cbOnWindowWidthChange=null,this.__cbOnceWindowWidthChange=null}},listensWindowWidthChange:function(){return null!=this.__cbOnWindowWidthChange&&this.__cbOnWindowWidthChange.length>0||null!=this.__cbOnceWindowWidthChange&&this.__cbOnceWindowWidthChange.length>0},get_windowHeight:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.windowHeightAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.windowHeightAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedWindowHeight},set_windowHeight:function(n){var e=this.unobservedWindowHeight;if(this.unobservedWindowHeight=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitWindowHeightChange(n,e);var t=this.windowHeightAutoruns;if(null!=t){this.windowHeightAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateWindowHeight:function(){var n=this.unobservedWindowHeight;this.emitWindowHeightChange(n,n);var e=this.windowHeightAutoruns;if(null!=e){this.windowHeightAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitWindowHeightChange:function(n,e){var t=0;if(null!=this.__cbOnWindowHeightChange&&(t+=this.__cbOnWindowHeightChange.length),null!=this.__cbOnceWindowHeightChange&&(t+=this.__cbOnceWindowHeightChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnWindowHeightChange)for(var s=0,a=this.__cbOnWindowHeightChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnWindowHeightChange[o],++l):--t}if(null!=this.__cbOnceWindowHeightChange){var p=null,h=null;for(s=0,a=this.__cbOnceWindowHeightChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceWindowHeightChange[o],this.__cbOnceWindowHeightChange[o]=null;var u=this.__cbOnceOwnerUnbindWindowHeightChange[o];this.__cbOnceOwnerUnbindWindowHeightChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindWindowHeightChange[o]),h.push(this.__cbOnceWindowHeightChange[o])}this.__cbOnceOwnerUnbindWindowHeightChange=p,this.__cbOnceWindowHeightChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onWindowHeightChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event windowHeightChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offWindowHeightChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindWindowHeightChange&&(this.__cbOnOwnerUnbindWindowHeightChange=[]),this.__cbOnOwnerUnbindWindowHeightChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindWindowHeightChange&&(this.__cbOnOwnerUnbindWindowHeightChange=[]),this.__cbOnOwnerUnbindWindowHeightChange.push(null);null==this.__cbOnWindowHeightChange&&(this.__cbOnWindowHeightChange=[]),this.__cbOnWindowHeightChange.push(e)},onceWindowHeightChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event windowHeightChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offWindowHeightChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindWindowHeightChange&&(this.__cbOnceOwnerUnbindWindowHeightChange=[]),this.__cbOnceOwnerUnbindWindowHeightChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindWindowHeightChange&&(this.__cbOnceOwnerUnbindWindowHeightChange=[]),this.__cbOnceOwnerUnbindWindowHeightChange.push(null);null==this.__cbOnceWindowHeightChange&&(this.__cbOnceWindowHeightChange=[]),this.__cbOnceWindowHeightChange.push(e)},offWindowHeightChange:function(n){if(null!=n){var e;null!=this.__cbOnWindowHeightChange&&-1!=(e=this.__cbOnWindowHeightChange.indexOf(n))&&(this.__cbOnWindowHeightChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindWindowHeightChange[e])&&l(),this.__cbOnOwnerUnbindWindowHeightChange.splice(e,1)),null!=this.__cbOnceWindowHeightChange&&-1!=(e=this.__cbOnceWindowHeightChange.indexOf(n))&&(this.__cbOnceWindowHeightChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindWindowHeightChange[e])&&l(),this.__cbOnceOwnerUnbindWindowHeightChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindWindowHeightChange){for(var t=0,i=this.__cbOnOwnerUnbindWindowHeightChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindWindowHeightChange[r])&&l()}this.__cbOnOwnerUnbindWindowHeightChange=null}if(null!=this.__cbOnceOwnerUnbindWindowHeightChange){for(t=0,i=this.__cbOnceOwnerUnbindWindowHeightChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindWindowHeightChange[r])&&l()}this.__cbOnceOwnerUnbindWindowHeightChange=null}this.__cbOnWindowHeightChange=null,this.__cbOnceWindowHeightChange=null}},listensWindowHeightChange:function(){return null!=this.__cbOnWindowHeightChange&&this.__cbOnWindowHeightChange.length>0||null!=this.__cbOnceWindowHeightChange&&this.__cbOnceWindowHeightChange.length>0},get_targetDensity:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.targetDensityAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.targetDensityAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTargetDensity},set_targetDensity:function(n){var e=this.unobservedTargetDensity;if(this.unobservedTargetDensity=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetDensityChange(n,e);var t=this.targetDensityAutoruns;if(null!=t){this.targetDensityAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTargetDensity:function(){var n=this.unobservedTargetDensity;this.emitTargetDensityChange(n,n);var e=this.targetDensityAutoruns;if(null!=e){this.targetDensityAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTargetDensityChange:function(n,e){var t=0;if(null!=this.__cbOnTargetDensityChange&&(t+=this.__cbOnTargetDensityChange.length),null!=this.__cbOnceTargetDensityChange&&(t+=this.__cbOnceTargetDensityChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTargetDensityChange)for(var s=0,a=this.__cbOnTargetDensityChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTargetDensityChange[o],++l):--t}if(null!=this.__cbOnceTargetDensityChange){var p=null,h=null;for(s=0,a=this.__cbOnceTargetDensityChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTargetDensityChange[o],this.__cbOnceTargetDensityChange[o]=null;var u=this.__cbOnceOwnerUnbindTargetDensityChange[o];this.__cbOnceOwnerUnbindTargetDensityChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTargetDensityChange[o]),h.push(this.__cbOnceTargetDensityChange[o])}this.__cbOnceOwnerUnbindTargetDensityChange=p,this.__cbOnceTargetDensityChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTargetDensityChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetDensityChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetDensityChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTargetDensityChange&&(this.__cbOnOwnerUnbindTargetDensityChange=[]),this.__cbOnOwnerUnbindTargetDensityChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTargetDensityChange&&(this.__cbOnOwnerUnbindTargetDensityChange=[]),this.__cbOnOwnerUnbindTargetDensityChange.push(null);null==this.__cbOnTargetDensityChange&&(this.__cbOnTargetDensityChange=[]),this.__cbOnTargetDensityChange.push(e)},onceTargetDensityChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetDensityChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetDensityChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTargetDensityChange&&(this.__cbOnceOwnerUnbindTargetDensityChange=[]),this.__cbOnceOwnerUnbindTargetDensityChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTargetDensityChange&&(this.__cbOnceOwnerUnbindTargetDensityChange=[]),this.__cbOnceOwnerUnbindTargetDensityChange.push(null);null==this.__cbOnceTargetDensityChange&&(this.__cbOnceTargetDensityChange=[]),this.__cbOnceTargetDensityChange.push(e)},offTargetDensityChange:function(n){if(null!=n){var e;null!=this.__cbOnTargetDensityChange&&-1!=(e=this.__cbOnTargetDensityChange.indexOf(n))&&(this.__cbOnTargetDensityChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTargetDensityChange[e])&&l(),this.__cbOnOwnerUnbindTargetDensityChange.splice(e,1)),null!=this.__cbOnceTargetDensityChange&&-1!=(e=this.__cbOnceTargetDensityChange.indexOf(n))&&(this.__cbOnceTargetDensityChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTargetDensityChange[e])&&l(),this.__cbOnceOwnerUnbindTargetDensityChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTargetDensityChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetDensityChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTargetDensityChange[r])&&l()}this.__cbOnOwnerUnbindTargetDensityChange=null}if(null!=this.__cbOnceOwnerUnbindTargetDensityChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetDensityChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTargetDensityChange[r])&&l()}this.__cbOnceOwnerUnbindTargetDensityChange=null}this.__cbOnTargetDensityChange=null,this.__cbOnceTargetDensityChange=null}},listensTargetDensityChange:function(){return null!=this.__cbOnTargetDensityChange&&this.__cbOnTargetDensityChange.length>0||null!=this.__cbOnceTargetDensityChange&&this.__cbOnceTargetDensityChange.length>0},get_background:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.backgroundAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.backgroundAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedBackground},set_background:function(n){var e=this.unobservedBackground;if(this.unobservedBackground=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitBackgroundChange(n,e);var t=this.backgroundAutoruns;if(null!=t){this.backgroundAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateBackground:function(){var n=this.unobservedBackground;this.emitBackgroundChange(n,n);var e=this.backgroundAutoruns;if(null!=e){this.backgroundAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitBackgroundChange:function(n,e){var t=0;if(null!=this.__cbOnBackgroundChange&&(t+=this.__cbOnBackgroundChange.length),null!=this.__cbOnceBackgroundChange&&(t+=this.__cbOnceBackgroundChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnBackgroundChange)for(var s=0,a=this.__cbOnBackgroundChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnBackgroundChange[o],++l):--t}if(null!=this.__cbOnceBackgroundChange){var p=null,h=null;for(s=0,a=this.__cbOnceBackgroundChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceBackgroundChange[o],this.__cbOnceBackgroundChange[o]=null;var u=this.__cbOnceOwnerUnbindBackgroundChange[o];this.__cbOnceOwnerUnbindBackgroundChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindBackgroundChange[o]),h.push(this.__cbOnceBackgroundChange[o])}this.__cbOnceOwnerUnbindBackgroundChange=p,this.__cbOnceBackgroundChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onBackgroundChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event backgroundChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBackgroundChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBackgroundChange&&(this.__cbOnOwnerUnbindBackgroundChange=[]),this.__cbOnOwnerUnbindBackgroundChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBackgroundChange&&(this.__cbOnOwnerUnbindBackgroundChange=[]),this.__cbOnOwnerUnbindBackgroundChange.push(null);null==this.__cbOnBackgroundChange&&(this.__cbOnBackgroundChange=[]),this.__cbOnBackgroundChange.push(e)},onceBackgroundChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event backgroundChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBackgroundChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBackgroundChange&&(this.__cbOnceOwnerUnbindBackgroundChange=[]),this.__cbOnceOwnerUnbindBackgroundChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBackgroundChange&&(this.__cbOnceOwnerUnbindBackgroundChange=[]),this.__cbOnceOwnerUnbindBackgroundChange.push(null);null==this.__cbOnceBackgroundChange&&(this.__cbOnceBackgroundChange=[]),this.__cbOnceBackgroundChange.push(e)},offBackgroundChange:function(n){if(null!=n){var e;null!=this.__cbOnBackgroundChange&&-1!=(e=this.__cbOnBackgroundChange.indexOf(n))&&(this.__cbOnBackgroundChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBackgroundChange[e])&&l(),this.__cbOnOwnerUnbindBackgroundChange.splice(e,1)),null!=this.__cbOnceBackgroundChange&&-1!=(e=this.__cbOnceBackgroundChange.indexOf(n))&&(this.__cbOnceBackgroundChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBackgroundChange[e])&&l(),this.__cbOnceOwnerUnbindBackgroundChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBackgroundChange){for(var t=0,i=this.__cbOnOwnerUnbindBackgroundChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBackgroundChange[r])&&l()}this.__cbOnOwnerUnbindBackgroundChange=null}if(null!=this.__cbOnceOwnerUnbindBackgroundChange){for(t=0,i=this.__cbOnceOwnerUnbindBackgroundChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBackgroundChange[r])&&l()}this.__cbOnceOwnerUnbindBackgroundChange=null}this.__cbOnBackgroundChange=null,this.__cbOnceBackgroundChange=null}},listensBackgroundChange:function(){return null!=this.__cbOnBackgroundChange&&this.__cbOnBackgroundChange.length>0||null!=this.__cbOnceBackgroundChange&&this.__cbOnceBackgroundChange.length>0},get_scaling:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.scalingAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.scalingAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedScaling},set_scaling:function(n){var e=this.unobservedScaling;if(this.unobservedScaling=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitScalingChange(n,e);var t=this.scalingAutoruns;if(null!=t){this.scalingAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateScaling:function(){var n=this.unobservedScaling;this.emitScalingChange(n,n);var e=this.scalingAutoruns;if(null!=e){this.scalingAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitScalingChange:function(n,e){var t=0;if(null!=this.__cbOnScalingChange&&(t+=this.__cbOnScalingChange.length),null!=this.__cbOnceScalingChange&&(t+=this.__cbOnceScalingChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnScalingChange)for(var s=0,a=this.__cbOnScalingChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnScalingChange[o],++l):--t}if(null!=this.__cbOnceScalingChange){var p=null,h=null;for(s=0,a=this.__cbOnceScalingChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceScalingChange[o],this.__cbOnceScalingChange[o]=null;var u=this.__cbOnceOwnerUnbindScalingChange[o];this.__cbOnceOwnerUnbindScalingChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindScalingChange[o]),h.push(this.__cbOnceScalingChange[o])}this.__cbOnceOwnerUnbindScalingChange=p,this.__cbOnceScalingChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onScalingChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event scalingChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offScalingChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindScalingChange&&(this.__cbOnOwnerUnbindScalingChange=[]),this.__cbOnOwnerUnbindScalingChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindScalingChange&&(this.__cbOnOwnerUnbindScalingChange=[]),this.__cbOnOwnerUnbindScalingChange.push(null);null==this.__cbOnScalingChange&&(this.__cbOnScalingChange=[]),this.__cbOnScalingChange.push(e)},onceScalingChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event scalingChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offScalingChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindScalingChange&&(this.__cbOnceOwnerUnbindScalingChange=[]),this.__cbOnceOwnerUnbindScalingChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindScalingChange&&(this.__cbOnceOwnerUnbindScalingChange=[]),this.__cbOnceOwnerUnbindScalingChange.push(null);null==this.__cbOnceScalingChange&&(this.__cbOnceScalingChange=[]),this.__cbOnceScalingChange.push(e)},offScalingChange:function(n){if(null!=n){var e;null!=this.__cbOnScalingChange&&-1!=(e=this.__cbOnScalingChange.indexOf(n))&&(this.__cbOnScalingChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindScalingChange[e])&&l(),this.__cbOnOwnerUnbindScalingChange.splice(e,1)),null!=this.__cbOnceScalingChange&&-1!=(e=this.__cbOnceScalingChange.indexOf(n))&&(this.__cbOnceScalingChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindScalingChange[e])&&l(),this.__cbOnceOwnerUnbindScalingChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindScalingChange){for(var t=0,i=this.__cbOnOwnerUnbindScalingChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindScalingChange[r])&&l()}this.__cbOnOwnerUnbindScalingChange=null}if(null!=this.__cbOnceOwnerUnbindScalingChange){for(t=0,i=this.__cbOnceOwnerUnbindScalingChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindScalingChange[r])&&l()}this.__cbOnceOwnerUnbindScalingChange=null}this.__cbOnScalingChange=null,this.__cbOnceScalingChange=null}},listensScalingChange:function(){return null!=this.__cbOnScalingChange&&this.__cbOnScalingChange.length>0||null!=this.__cbOnceScalingChange&&this.__cbOnceScalingChange.length>0},get_title:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.titleAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.titleAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTitle},set_title:function(n){var e=this.unobservedTitle;if(this.unobservedTitle=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTitleChange(n,e);var t=this.titleAutoruns;if(null!=t){this.titleAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTitle:function(){var n=this.unobservedTitle;this.emitTitleChange(n,n);var e=this.titleAutoruns;if(null!=e){this.titleAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTitleChange:function(n,e){var t=0;if(null!=this.__cbOnTitleChange&&(t+=this.__cbOnTitleChange.length),null!=this.__cbOnceTitleChange&&(t+=this.__cbOnceTitleChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTitleChange)for(var s=0,a=this.__cbOnTitleChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTitleChange[o],++l):--t}if(null!=this.__cbOnceTitleChange){var p=null,h=null;for(s=0,a=this.__cbOnceTitleChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTitleChange[o],this.__cbOnceTitleChange[o]=null;var u=this.__cbOnceOwnerUnbindTitleChange[o];this.__cbOnceOwnerUnbindTitleChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTitleChange[o]),h.push(this.__cbOnceTitleChange[o])}this.__cbOnceOwnerUnbindTitleChange=p,this.__cbOnceTitleChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTitleChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event titleChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTitleChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTitleChange&&(this.__cbOnOwnerUnbindTitleChange=[]),this.__cbOnOwnerUnbindTitleChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTitleChange&&(this.__cbOnOwnerUnbindTitleChange=[]),this.__cbOnOwnerUnbindTitleChange.push(null);null==this.__cbOnTitleChange&&(this.__cbOnTitleChange=[]),this.__cbOnTitleChange.push(e)},onceTitleChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event titleChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTitleChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTitleChange&&(this.__cbOnceOwnerUnbindTitleChange=[]),this.__cbOnceOwnerUnbindTitleChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTitleChange&&(this.__cbOnceOwnerUnbindTitleChange=[]),this.__cbOnceOwnerUnbindTitleChange.push(null);null==this.__cbOnceTitleChange&&(this.__cbOnceTitleChange=[]),this.__cbOnceTitleChange.push(e)},offTitleChange:function(n){if(null!=n){var e;null!=this.__cbOnTitleChange&&-1!=(e=this.__cbOnTitleChange.indexOf(n))&&(this.__cbOnTitleChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTitleChange[e])&&l(),this.__cbOnOwnerUnbindTitleChange.splice(e,1)),null!=this.__cbOnceTitleChange&&-1!=(e=this.__cbOnceTitleChange.indexOf(n))&&(this.__cbOnceTitleChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTitleChange[e])&&l(),this.__cbOnceOwnerUnbindTitleChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTitleChange){for(var t=0,i=this.__cbOnOwnerUnbindTitleChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTitleChange[r])&&l()}this.__cbOnOwnerUnbindTitleChange=null}if(null!=this.__cbOnceOwnerUnbindTitleChange){for(t=0,i=this.__cbOnceOwnerUnbindTitleChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTitleChange[r])&&l()}this.__cbOnceOwnerUnbindTitleChange=null}this.__cbOnTitleChange=null,this.__cbOnceTitleChange=null}},listensTitleChange:function(){return null!=this.__cbOnTitleChange&&this.__cbOnTitleChange.length>0||null!=this.__cbOnceTitleChange&&this.__cbOnceTitleChange.length>0},get_fullscreen:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.fullscreenAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.fullscreenAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedFullscreen},set_fullscreen:function(n){var e=this.unobservedFullscreen;if(this.unobservedFullscreen=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitFullscreenChange(n,e);var t=this.fullscreenAutoruns;if(null!=t){this.fullscreenAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateFullscreen:function(){var n=this.unobservedFullscreen;this.emitFullscreenChange(n,n);var e=this.fullscreenAutoruns;if(null!=e){this.fullscreenAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitFullscreenChange:function(n,e){var t=0;if(null!=this.__cbOnFullscreenChange&&(t+=this.__cbOnFullscreenChange.length),null!=this.__cbOnceFullscreenChange&&(t+=this.__cbOnceFullscreenChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnFullscreenChange)for(var s=0,a=this.__cbOnFullscreenChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnFullscreenChange[o],++l):--t}if(null!=this.__cbOnceFullscreenChange){var p=null,h=null;for(s=0,a=this.__cbOnceFullscreenChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceFullscreenChange[o],this.__cbOnceFullscreenChange[o]=null;var u=this.__cbOnceOwnerUnbindFullscreenChange[o];this.__cbOnceOwnerUnbindFullscreenChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindFullscreenChange[o]),h.push(this.__cbOnceFullscreenChange[o])}this.__cbOnceOwnerUnbindFullscreenChange=p,this.__cbOnceFullscreenChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onFullscreenChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event fullscreenChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFullscreenChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindFullscreenChange&&(this.__cbOnOwnerUnbindFullscreenChange=[]),this.__cbOnOwnerUnbindFullscreenChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindFullscreenChange&&(this.__cbOnOwnerUnbindFullscreenChange=[]),this.__cbOnOwnerUnbindFullscreenChange.push(null);null==this.__cbOnFullscreenChange&&(this.__cbOnFullscreenChange=[]),this.__cbOnFullscreenChange.push(e)},onceFullscreenChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event fullscreenChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offFullscreenChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindFullscreenChange&&(this.__cbOnceOwnerUnbindFullscreenChange=[]),this.__cbOnceOwnerUnbindFullscreenChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindFullscreenChange&&(this.__cbOnceOwnerUnbindFullscreenChange=[]),this.__cbOnceOwnerUnbindFullscreenChange.push(null);null==this.__cbOnceFullscreenChange&&(this.__cbOnceFullscreenChange=[]),this.__cbOnceFullscreenChange.push(e)},offFullscreenChange:function(n){if(null!=n){var e;null!=this.__cbOnFullscreenChange&&-1!=(e=this.__cbOnFullscreenChange.indexOf(n))&&(this.__cbOnFullscreenChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindFullscreenChange[e])&&l(),this.__cbOnOwnerUnbindFullscreenChange.splice(e,1)),null!=this.__cbOnceFullscreenChange&&-1!=(e=this.__cbOnceFullscreenChange.indexOf(n))&&(this.__cbOnceFullscreenChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindFullscreenChange[e])&&l(),this.__cbOnceOwnerUnbindFullscreenChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindFullscreenChange){for(var t=0,i=this.__cbOnOwnerUnbindFullscreenChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindFullscreenChange[r])&&l()}this.__cbOnOwnerUnbindFullscreenChange=null}if(null!=this.__cbOnceOwnerUnbindFullscreenChange){for(t=0,i=this.__cbOnceOwnerUnbindFullscreenChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindFullscreenChange[r])&&l()}this.__cbOnceOwnerUnbindFullscreenChange=null}this.__cbOnFullscreenChange=null,this.__cbOnceFullscreenChange=null}},listensFullscreenChange:function(){return null!=this.__cbOnFullscreenChange&&this.__cbOnFullscreenChange.length>0||null!=this.__cbOnceFullscreenChange&&this.__cbOnceFullscreenChange.length>0},get_targetFps:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.targetFpsAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.targetFpsAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedTargetFps},set_targetFps:function(n){var e=this.unobservedTargetFps;if(this.unobservedTargetFps=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTargetFpsChange(n,e);var t=this.targetFpsAutoruns;if(null!=t){this.targetFpsAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateTargetFps:function(){var n=this.unobservedTargetFps;this.emitTargetFpsChange(n,n);var e=this.targetFpsAutoruns;if(null!=e){this.targetFpsAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTargetFpsChange:function(n,e){var t=0;if(null!=this.__cbOnTargetFpsChange&&(t+=this.__cbOnTargetFpsChange.length),null!=this.__cbOnceTargetFpsChange&&(t+=this.__cbOnceTargetFpsChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTargetFpsChange)for(var s=0,a=this.__cbOnTargetFpsChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTargetFpsChange[o],++l):--t}if(null!=this.__cbOnceTargetFpsChange){var p=null,h=null;for(s=0,a=this.__cbOnceTargetFpsChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTargetFpsChange[o],this.__cbOnceTargetFpsChange[o]=null;var u=this.__cbOnceOwnerUnbindTargetFpsChange[o];this.__cbOnceOwnerUnbindTargetFpsChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTargetFpsChange[o]),h.push(this.__cbOnceTargetFpsChange[o])}this.__cbOnceOwnerUnbindTargetFpsChange=p,this.__cbOnceTargetFpsChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTargetFpsChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetFpsChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetFpsChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTargetFpsChange&&(this.__cbOnOwnerUnbindTargetFpsChange=[]),this.__cbOnOwnerUnbindTargetFpsChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTargetFpsChange&&(this.__cbOnOwnerUnbindTargetFpsChange=[]),this.__cbOnOwnerUnbindTargetFpsChange.push(null);null==this.__cbOnTargetFpsChange&&(this.__cbOnTargetFpsChange=[]),this.__cbOnTargetFpsChange.push(e)},onceTargetFpsChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event targetFpsChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTargetFpsChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTargetFpsChange&&(this.__cbOnceOwnerUnbindTargetFpsChange=[]),this.__cbOnceOwnerUnbindTargetFpsChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTargetFpsChange&&(this.__cbOnceOwnerUnbindTargetFpsChange=[]),this.__cbOnceOwnerUnbindTargetFpsChange.push(null);null==this.__cbOnceTargetFpsChange&&(this.__cbOnceTargetFpsChange=[]),this.__cbOnceTargetFpsChange.push(e)},offTargetFpsChange:function(n){if(null!=n){var e;null!=this.__cbOnTargetFpsChange&&-1!=(e=this.__cbOnTargetFpsChange.indexOf(n))&&(this.__cbOnTargetFpsChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTargetFpsChange[e])&&l(),this.__cbOnOwnerUnbindTargetFpsChange.splice(e,1)),null!=this.__cbOnceTargetFpsChange&&-1!=(e=this.__cbOnceTargetFpsChange.indexOf(n))&&(this.__cbOnceTargetFpsChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTargetFpsChange[e])&&l(),this.__cbOnceOwnerUnbindTargetFpsChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTargetFpsChange){for(var t=0,i=this.__cbOnOwnerUnbindTargetFpsChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTargetFpsChange[r])&&l()}this.__cbOnOwnerUnbindTargetFpsChange=null}if(null!=this.__cbOnceOwnerUnbindTargetFpsChange){for(t=0,i=this.__cbOnceOwnerUnbindTargetFpsChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTargetFpsChange[r])&&l()}this.__cbOnceOwnerUnbindTargetFpsChange=null}this.__cbOnTargetFpsChange=null,this.__cbOnceTargetFpsChange=null}},listensTargetFpsChange:function(){return null!=this.__cbOnTargetFpsChange&&this.__cbOnTargetFpsChange.length>0||null!=this.__cbOnceTargetFpsChange&&this.__cbOnceTargetFpsChange.length>0},get_maxDelta:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.maxDeltaAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.maxDeltaAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedMaxDelta},set_maxDelta:function(n){var e=this.unobservedMaxDelta;if(this.unobservedMaxDelta=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitMaxDeltaChange(n,e);var t=this.maxDeltaAutoruns;if(null!=t){this.maxDeltaAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateMaxDelta:function(){var n=this.unobservedMaxDelta;this.emitMaxDeltaChange(n,n);var e=this.maxDeltaAutoruns;if(null!=e){this.maxDeltaAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitMaxDeltaChange:function(n,e){var t=0;if(null!=this.__cbOnMaxDeltaChange&&(t+=this.__cbOnMaxDeltaChange.length),null!=this.__cbOnceMaxDeltaChange&&(t+=this.__cbOnceMaxDeltaChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnMaxDeltaChange)for(var s=0,a=this.__cbOnMaxDeltaChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnMaxDeltaChange[o],++l):--t}if(null!=this.__cbOnceMaxDeltaChange){var p=null,h=null;for(s=0,a=this.__cbOnceMaxDeltaChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceMaxDeltaChange[o],this.__cbOnceMaxDeltaChange[o]=null;var u=this.__cbOnceOwnerUnbindMaxDeltaChange[o];this.__cbOnceOwnerUnbindMaxDeltaChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindMaxDeltaChange[o]),h.push(this.__cbOnceMaxDeltaChange[o])}this.__cbOnceOwnerUnbindMaxDeltaChange=p,this.__cbOnceMaxDeltaChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onMaxDeltaChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event maxDeltaChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMaxDeltaChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindMaxDeltaChange&&(this.__cbOnOwnerUnbindMaxDeltaChange=[]),this.__cbOnOwnerUnbindMaxDeltaChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindMaxDeltaChange&&(this.__cbOnOwnerUnbindMaxDeltaChange=[]),this.__cbOnOwnerUnbindMaxDeltaChange.push(null);null==this.__cbOnMaxDeltaChange&&(this.__cbOnMaxDeltaChange=[]),this.__cbOnMaxDeltaChange.push(e)},onceMaxDeltaChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event maxDeltaChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offMaxDeltaChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindMaxDeltaChange&&(this.__cbOnceOwnerUnbindMaxDeltaChange=[]),this.__cbOnceOwnerUnbindMaxDeltaChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindMaxDeltaChange&&(this.__cbOnceOwnerUnbindMaxDeltaChange=[]),this.__cbOnceOwnerUnbindMaxDeltaChange.push(null);null==this.__cbOnceMaxDeltaChange&&(this.__cbOnceMaxDeltaChange=[]),this.__cbOnceMaxDeltaChange.push(e)},offMaxDeltaChange:function(n){if(null!=n){var e;null!=this.__cbOnMaxDeltaChange&&-1!=(e=this.__cbOnMaxDeltaChange.indexOf(n))&&(this.__cbOnMaxDeltaChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindMaxDeltaChange[e])&&l(),this.__cbOnOwnerUnbindMaxDeltaChange.splice(e,1)),null!=this.__cbOnceMaxDeltaChange&&-1!=(e=this.__cbOnceMaxDeltaChange.indexOf(n))&&(this.__cbOnceMaxDeltaChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindMaxDeltaChange[e])&&l(),this.__cbOnceOwnerUnbindMaxDeltaChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindMaxDeltaChange){for(var t=0,i=this.__cbOnOwnerUnbindMaxDeltaChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindMaxDeltaChange[r])&&l()}this.__cbOnOwnerUnbindMaxDeltaChange=null}if(null!=this.__cbOnceOwnerUnbindMaxDeltaChange){for(t=0,i=this.__cbOnceOwnerUnbindMaxDeltaChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindMaxDeltaChange[r])&&l()}this.__cbOnceOwnerUnbindMaxDeltaChange=null}this.__cbOnMaxDeltaChange=null,this.__cbOnceMaxDeltaChange=null}},listensMaxDeltaChange:function(){return null!=this.__cbOnMaxDeltaChange&&this.__cbOnMaxDeltaChange.length>0||null!=this.__cbOnceMaxDeltaChange&&this.__cbOnceMaxDeltaChange.length>0},get_overrideDelta:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.overrideDeltaAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.overrideDeltaAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedOverrideDelta},set_overrideDelta:function(n){var e=this.unobservedOverrideDelta;if(this.unobservedOverrideDelta=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitOverrideDeltaChange(n,e);var t=this.overrideDeltaAutoruns;if(null!=t){this.overrideDeltaAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateOverrideDelta:function(){var n=this.unobservedOverrideDelta;this.emitOverrideDeltaChange(n,n);var e=this.overrideDeltaAutoruns;if(null!=e){this.overrideDeltaAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitOverrideDeltaChange:function(n,e){var t=0;if(null!=this.__cbOnOverrideDeltaChange&&(t+=this.__cbOnOverrideDeltaChange.length),null!=this.__cbOnceOverrideDeltaChange&&(t+=this.__cbOnceOverrideDeltaChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnOverrideDeltaChange)for(var s=0,a=this.__cbOnOverrideDeltaChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnOverrideDeltaChange[o],++l):--t}if(null!=this.__cbOnceOverrideDeltaChange){var p=null,h=null;for(s=0,a=this.__cbOnceOverrideDeltaChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceOverrideDeltaChange[o],this.__cbOnceOverrideDeltaChange[o]=null;var u=this.__cbOnceOwnerUnbindOverrideDeltaChange[o];this.__cbOnceOwnerUnbindOverrideDeltaChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindOverrideDeltaChange[o]),h.push(this.__cbOnceOverrideDeltaChange[o])}this.__cbOnceOwnerUnbindOverrideDeltaChange=p,this.__cbOnceOverrideDeltaChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onOverrideDeltaChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event overrideDeltaChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offOverrideDeltaChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindOverrideDeltaChange&&(this.__cbOnOwnerUnbindOverrideDeltaChange=[]),this.__cbOnOwnerUnbindOverrideDeltaChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindOverrideDeltaChange&&(this.__cbOnOwnerUnbindOverrideDeltaChange=[]),this.__cbOnOwnerUnbindOverrideDeltaChange.push(null);null==this.__cbOnOverrideDeltaChange&&(this.__cbOnOverrideDeltaChange=[]),this.__cbOnOverrideDeltaChange.push(e)},onceOverrideDeltaChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event overrideDeltaChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offOverrideDeltaChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindOverrideDeltaChange&&(this.__cbOnceOwnerUnbindOverrideDeltaChange=[]),this.__cbOnceOwnerUnbindOverrideDeltaChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindOverrideDeltaChange&&(this.__cbOnceOwnerUnbindOverrideDeltaChange=[]),this.__cbOnceOwnerUnbindOverrideDeltaChange.push(null);null==this.__cbOnceOverrideDeltaChange&&(this.__cbOnceOverrideDeltaChange=[]),this.__cbOnceOverrideDeltaChange.push(e)},offOverrideDeltaChange:function(n){if(null!=n){var e;null!=this.__cbOnOverrideDeltaChange&&-1!=(e=this.__cbOnOverrideDeltaChange.indexOf(n))&&(this.__cbOnOverrideDeltaChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindOverrideDeltaChange[e])&&l(),this.__cbOnOwnerUnbindOverrideDeltaChange.splice(e,1)),null!=this.__cbOnceOverrideDeltaChange&&-1!=(e=this.__cbOnceOverrideDeltaChange.indexOf(n))&&(this.__cbOnceOverrideDeltaChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindOverrideDeltaChange[e])&&l(),this.__cbOnceOwnerUnbindOverrideDeltaChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindOverrideDeltaChange){for(var t=0,i=this.__cbOnOwnerUnbindOverrideDeltaChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindOverrideDeltaChange[r])&&l()}this.__cbOnOwnerUnbindOverrideDeltaChange=null}if(null!=this.__cbOnceOwnerUnbindOverrideDeltaChange){for(t=0,i=this.__cbOnceOwnerUnbindOverrideDeltaChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindOverrideDeltaChange[r])&&l()}this.__cbOnceOwnerUnbindOverrideDeltaChange=null}this.__cbOnOverrideDeltaChange=null,this.__cbOnceOverrideDeltaChange=null}},listensOverrideDeltaChange:function(){return null!=this.__cbOnOverrideDeltaChange&&this.__cbOnOverrideDeltaChange.length>0||null!=this.__cbOnceOverrideDeltaChange&&this.__cbOnceOverrideDeltaChange.length>0},unbindEvents:function(){this.offObservedDirty(),this.offTargetWidthChange(),this.offTargetHeightChange(),this.offWindowWidthChange(),this.offWindowHeightChange(),this.offTargetDensityChange(),this.offBackgroundChange(),this.offScalingChange(),this.offTitleChange(),this.offFullscreenChange(),this.offTargetFpsChange(),this.offMaxDeltaChange(),this.offOverrideDeltaChange()},__class__:ceramic_Settings,__properties__:{set_overrideDelta:"set_overrideDelta",get_overrideDelta:"get_overrideDelta",set_maxDelta:"set_maxDelta",get_maxDelta:"get_maxDelta",set_targetFps:"set_targetFps",get_targetFps:"get_targetFps",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_title:"set_title",get_title:"get_title",set_scaling:"set_scaling",get_scaling:"get_scaling",set_background:"set_background",get_background:"get_background",set_targetDensity:"set_targetDensity",get_targetDensity:"get_targetDensity",set_windowHeight:"set_windowHeight",get_windowHeight:"get_windowHeight",set_windowWidth:"set_windowWidth",get_windowWidth:"get_windowWidth",set_targetHeight:"set_targetHeight",get_targetHeight:"get_targetHeight",set_targetWidth:"set_targetWidth",get_targetWidth:"get_targetWidth"}};var ceramic_Shader=function(n,e){ceramic_Entity.call(this),this.backendItem=n;var t=[new ceramic_ShaderAttribute(3,"vertexPosition"),new ceramic_ShaderAttribute(2,"vertexTCoord"),new ceramic_ShaderAttribute(4,"vertexColor")];if(null!=e)for(var i=0,r=e.length;i<r;){var l=e[i++];t.push(l)}this.attributes=t,this.customAttributes=e;ceramic_App.app.backend.shaders;var s=0,a=n.customAttributes;if(null!=a)for(i=0,r=a.length;i<r;){s+=a[i++].size}this.customFloatAttributesSize=s};t["ceramic.Shader"]=ceramic_Shader,ceramic_Shader.__name__="ceramic.Shader",ceramic_Shader.fromSource=function(n,e){for(var t=ceramic_App.app.backend.shaders,i=n,r=e,l=!1,s=0,a=r.split("\n");s<a.length;){var o=a[s];if(++s,"//ceramic:multitexture"==StringTools.replace(StringTools.trim(o)," ","").toLowerCase()){l=!0;break}}var p=["tex0"];if(l){var h=ceramic_App.app.backend.textures.maxTexturesByBatch(),u=t.maxIfStatementsByFragmentShader(),_=0|Math.min(h,u);if(_>1)for(var c=1;c<=_;)p.push("tex"+c),++c;r=backend_Shaders.processMultiTextureFragTemplate(r,h,u),i=backend_Shaders.processMultiTextureVertTemplate(i,h,u)}var d=new backend_ShaderImpl;d.attributes=l?backend_Shaders.SHADER_ATTRIBUTES_MULTITEXTURE:backend_Shaders.SHADER_ATTRIBUTES,d.textures=p,d.vertSource=i,d.fragSource=r,d.isBatchingMultiTexture=l,d.customAttributes=null,d.init();return null==d?null:new ceramic_Shader(d)},ceramic_Shader.__super__=ceramic_Entity,ceramic_Shader.prototype=$extend(ceramic_Entity.prototype,{destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy();ceramic_App.app.backend.shaders;this.backendItem.destroy(),this.backendItem=null,this.attributes=null}},clone:function(){ceramic_App.app.backend.shaders;var n=this.backendItem.clone();return new ceramic_Shader(n,this.customAttributes)},setInt:function(n,e){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setInt(n,e)},setFloat:function(n,e){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setFloat(n,e)},setColor:function(n,e){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setColor(n,(e>>16&255)/255,(e>>8&255)/255,(255&e)/255,1)},setAlphaColor:function(n,e){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setColor(n,(e>>16&255)/255,(e>>8&255)/255,(255&e)/255,(e>>24&255)/255)},setVec2:function(n,e,t){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setVector2(n,e,t)},setVec3:function(n,e,t,i){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setVector3(n,e,t,i)},setVec4:function(n,e,t,i,r){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setVector4(n,e,t,i,r)},setFloatArray:function(n,e){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setFloatArray(n,new Float32Array(e))},setTexture:function(n,e,t){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setTexture(n,e,t.backendItem)},setMat4FromTransform:function(n,e){ceramic_App.app.backend.shaders;this.backendItem.uniforms.setMatrix4(n,new Float32Array([e.a,e.b,0,0,e.c,e.d,0,0,0,0,1,0,e.tx,e.ty,0,1]))},toString:function(){if(null!=this.id){var n=this.id;return StringTools.startsWith(n,"shader:")&&(n=HxOverrides.substr(n,7,null)),null!=this.asset&&null!=this.asset.options.vertId||null!=this.asset.options.fragId?"Shader("+n+" "+(null!=this.asset.options.vertId?this.asset.options.vertId:"default")+" "+(null!=this.asset.options.fragId?this.asset.options.fragId:"default")+")":"Shader("+n+")"}return"Shader()"},__class__:ceramic_Shader});var ceramic_ShaderAsset=function(n,e){this.shader=null,ceramic_Asset.call(this,"shader",n,e)};t["ceramic.ShaderAsset"]=ceramic_ShaderAsset,ceramic_ShaderAsset.__name__="ceramic.ShaderAsset",ceramic_ShaderAsset.__super__=ceramic_Asset,ceramic_ShaderAsset.prototype=$extend(ceramic_Asset.prototype,{load:function(){var n=this;if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load shader asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:24,className:"ceramic.ShaderAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var e=null;if(null!=this.options.customAttributes){e=[];for(var t=this.options.customAttributes,i=0,r=t.length;i<r;){var l=t[i++];e.push(new ceramic_ShaderAttribute(l.size,l.name))}}var s={};if(null!=this.owner&&(s.immediate=this.owner.immediate,s.loadMethod=this.owner.loadMethod),null!=this.path&&(StringTools.endsWith(this.path.toLowerCase(),".frag")||StringTools.endsWith(this.path.toLowerCase(),".vert"))){var o=ceramic_Assets.allByName.h[this.name];if(null==this.options.fragId)for(i=0,r=o.length;i<r;){var p=o[i++];if(StringTools.endsWith(p.toLowerCase(),".frag")){this.options.fragId=p;break}}if(null==this.options.vertId)for(i=0,r=o.length;i<r;){p=o[i++];if(StringTools.endsWith(p.toLowerCase(),".vert")){this.options.vertId=p;break}}ceramic_App.app.logger.info("Load shader"+(null!=this.options.vertId?" "+Std.string(this.options.vertId):"")+(null!=this.options.fragId?" "+Std.string(this.options.fragId):""),{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:72,className:"ceramic.ShaderAsset",methodName:"load"})}else ceramic_App.app.logger.info("Load shader "+this.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:75,className:"ceramic.ShaderAsset",methodName:"load"});if(null==this.options.vertId&&(this.options.vertId="textured.vert"),null==this.options.fragId)return this.set_status(a.BROKEN),ceramic_App.app.logger.error("Missing fragId option to load shader at path: "+this.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:84,className:"ceramic.ShaderAsset",methodName:"load"}),void this.emitComplete(!1);ceramic_App.app.backend.texts.load(ceramic_Assets.realAssetPath(this.options.vertId,this.runtimeAssets),s,(function(t){ceramic_App.app.backend.texts.load(ceramic_Assets.realAssetPath(n.options.fragId,n.runtimeAssets),s,(function(i){if(null==t)return n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load "+Std.string(n.options.vertId)+" for shader at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:94,className:"ceramic.ShaderAsset",methodName:"load"}),void n.emitComplete(!1);if(null==i)return n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load "+Std.string(n.options.fragId)+" for shader at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:101,className:"ceramic.ShaderAsset",methodName:"load"}),void n.emitComplete(!1);for(var r=ceramic_App.app.backend.shaders,l=t,s=i,o=!1,p=0,h=s.split("\n");p<h.length;){var u=h[p];if(++p,"//ceramic:multitexture"==StringTools.replace(StringTools.trim(u)," ","").toLowerCase()){o=!0;break}}var _=["tex0"];if(o){var c=ceramic_App.app.backend.textures.maxTexturesByBatch(),d=r.maxIfStatementsByFragmentShader(),f=0|Math.min(c,d);if(f>1)for(var x=1;x<=f;)_.push("tex"+x),++x;s=backend_Shaders.processMultiTextureFragTemplate(s,c,d),l=backend_Shaders.processMultiTextureVertTemplate(l,c,d)}var b=new backend_ShaderImpl;b.attributes=o?backend_Shaders.SHADER_ATTRIBUTES_MULTITEXTURE:backend_Shaders.SHADER_ATTRIBUTES,b.textures=_,b.vertSource=l,b.fragSource=s,b.isBatchingMultiTexture=o,b.customAttributes=e,b.init();var y=b;if(null==y)return n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to create shader from data at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/ShaderAsset.hx",lineNumber:109,className:"ceramic.ShaderAsset",methodName:"load"}),void n.emitComplete(!1);n.shader=new ceramic_Shader(y,e),n.shader.asset=n,n.shader.id="shader:"+n.path,n.set_status(a.READY),n.emitComplete(!0)}))}))},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),null!=this.shader&&(this.shader.destroy(),this.shader=null))},toString:function(){var n="ShaderAsset";if(null!=this.options.vertId||null!=this.options.fragId){var e=null!=this.options.vertId?this.options.vertId:"default",t=null!=this.options.fragId?this.options.fragId:"default";return n+"("+this.name+" "+e+" "+t+")"}return null!=this.path&&""!=StringTools.trim(this.path)?n+"("+this.name+" "+this.path+")":n+"("+this.name+")"},__class__:ceramic_ShaderAsset});var ceramic_ShaderAttribute=function(n,e){this.size=n,this.name=e};t["ceramic.ShaderAttribute"]=ceramic_ShaderAttribute,ceramic_ShaderAttribute.__name__="ceramic.ShaderAttribute",ceramic_ShaderAttribute.prototype={toString:function(){return""+Std.string({size:this.size,name:this.name})},__class__:ceramic_ShaderAttribute};var ceramic_Shape=function(){this.autoComputeSize=!0,this.holes=null,this.triangulation=m.POLY2TRI,ceramic_Mesh.call(this)};t["ceramic.Shape"]=ceramic_Shape,ceramic_Shape.__name__="ceramic.Shape",ceramic_Shape.__super__=ceramic_Mesh,ceramic_Shape.prototype=$extend(ceramic_Mesh.prototype,{get_points:function(){return this.vertices},set_points:function(n){return this.vertices=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,n},set_triangulation:function(n){return this.triangulation!=n&&(this.triangulation=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_holes:function(n){return this.holes=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,n},set_autoComputeSize:function(n){return this.autoComputeSize==n||(this.autoComputeSize=n,n&&this.computeSize()),n},get_width:function(){return this.autoComputeSize&&this.contentDirty&&this.computeContent(),ceramic_Mesh.prototype.get_width.call(this)},get_height:function(){return this.autoComputeSize&&this.contentDirty&&this.computeContent(),ceramic_Mesh.prototype.get_height.call(this)},computeContent:function(){null!=this.vertices&&this.vertices.length>=6&&(null==this.indices&&(this.indices=[]),null!=this.holes&&this.holes.length>0?ceramic_Triangulate.triangulate(this.vertices,this.indices,this.holes,this.triangulation):ceramic_Triangulate.triangulate(this.vertices,this.indices,null,this.triangulation)),this.autoComputeSize&&this.computeSize(),this.contentDirty=!1},initNapePhysics:function(n,e,t,i,r){if(null!=this.nape&&(this.nape.destroy(),this.set_nape(null)),this.contentDirty&&this.computeContent(),null==t&&(null==i||0==i.length)){for(var l=new nape_geom_Vec2List,s=this.vertices.length,a=0,o=.5*this.get_width(),p=.5*this.get_height();a<s-1;){var h=a+1,u=this.vertices[a]-o,_=this.vertices[h]-p;null==_&&(_=0),null==u&&(u=0);var c,d=u,f=_,x=!0;if(null==x&&(x=!1),null==f&&(f=0),null==d&&(d=0),d!=d||f!=f)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?c=new nape_geom_Vec2:(c=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==c.zpp_inner){var b;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?b=new zpp_$nape_geom_ZPP_$Vec2:(b=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=b.next,b.next=null),b.weak=!1,b._immutable=!1,b.x=d,b.y=f,c.zpp_inner=b,c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var y,v=c.zpp_inner;if(v._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),d!=d||f!=f)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var m=c.zpp_inner;if(null!=m._validate&&m._validate(),c.zpp_inner.x==d){if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var g=c.zpp_inner;null!=g._validate&&g._validate(),y=c.zpp_inner.y==f}else y=!1;if(!y){c.zpp_inner.x=d,c.zpp_inner.y=f;var z=c.zpp_inner;null!=z._invalidate&&z._invalidate(z)}}c.zpp_inner.weak=x,l.push(c),a+=2}t=new nape_shape_Polygon(l)}return ceramic_Mesh.prototype.initNapePhysics.call(this,n,e,t,i,r)},__class__:ceramic_Shape,__properties__:$extend(ceramic_Mesh.prototype.__properties__,{set_autoComputeSize:"set_autoComputeSize",set_triangulation:"set_triangulation",set_points:"set_points",get_points:"get_points"})});var ceramic_Shortcuts=function(){};t["ceramic.Shortcuts"]=ceramic_Shortcuts,ceramic_Shortcuts.__name__="ceramic.Shortcuts",ceramic_Shortcuts.__properties__={get_systems:"get_systems",get_log:"get_log",get_settings:"get_settings",get_input:"get_input",get_audio:"get_audio",get_screen:"get_screen",get_app:"get_app"},ceramic_Shortcuts.get_app=function(){return ceramic_App.app},ceramic_Shortcuts.get_screen=function(){return ceramic_App.app.screen},ceramic_Shortcuts.get_audio=function(){return ceramic_App.app.audio},ceramic_Shortcuts.get_input=function(){return ceramic_App.app.input},ceramic_Shortcuts.get_settings=function(){return ceramic_App.app.settings},ceramic_Shortcuts.get_log=function(){return ceramic_App.app.logger},ceramic_Shortcuts.get_systems=function(){return ceramic_App.app.systems};var ceramic_SortVisuals=function(){};t["ceramic.SortVisuals"]=ceramic_SortVisuals,ceramic_SortVisuals.__name__="ceramic.SortVisuals",ceramic_SortVisuals.cmp=function(n,e){var t=0;if(n.computedVisible||n.computedTouchable)if(e.computedVisible||e.computedTouchable)if(n.computedRenderTarget!=e.computedRenderTarget)t=null==n.computedRenderTarget?1:null==e.computedRenderTarget||n.computedRenderTarget.priority>e.computedRenderTarget.priority?-1:n.computedRenderTarget.priority<e.computedRenderTarget.priority?1:n.computedRenderTarget.index<e.computedRenderTarget.index?-1:1;else if(n.computedDepth>e.computedDepth)t=1;else if(n.computedDepth<e.computedDepth)t=-1;else{var i=n.asQuad,r=e.asQuad,l=n.asMesh,s=e.asMesh;if((null!=i||null!=l)&&(null!=r||null!=s)){var a=null!=l?l.texture:i._texture,o=null!=s?s.texture:r._texture;null!=a&&null==o?t=1:null==a&&null!=o?t=-1:null!=a&&null!=o?a.index<o.index?t=1:a.index>o.index?t=-1:n.blending>e.blending?t=1:n.blending<e.blending&&(t=-1):n.blending>e.blending?t=1:n.blending<e.blending&&(t=-1)}}else t=1;else t=-1;return t},ceramic_SortVisuals.sort=function(n){ceramic_SortVisuals.rec(n,0,n.length)},ceramic_SortVisuals.rec=function(n,e,t){var i=e+t>>1;if(t-e<12){if(t<=e)return;for(var r=e+1,l=t;r<l;)for(var s=r++;s>e;){var a=n[s],o=n[s-1],p=0;if(a.computedVisible||a.computedTouchable)if(o.computedVisible||o.computedTouchable)if(a.computedRenderTarget!=o.computedRenderTarget)p=null==a.computedRenderTarget?1:null==o.computedRenderTarget||a.computedRenderTarget.priority>o.computedRenderTarget.priority?-1:a.computedRenderTarget.priority<o.computedRenderTarget.priority?1:a.computedRenderTarget.index<o.computedRenderTarget.index?-1:1;else if(a.computedDepth>o.computedDepth)p=1;else if(a.computedDepth<o.computedDepth)p=-1;else{var h=a.asQuad,u=o.asQuad,_=a.asMesh,c=o.asMesh;if((null!=h||null!=_)&&(null!=u||null!=c)){var d=null!=_?_.texture:h._texture,f=null!=c?c.texture:u._texture;null!=d&&null==f?p=1:null==d&&null!=f?p=-1:null!=d&&null!=f?d.index<f.index?p=1:d.index>f.index?p=-1:a.blending>o.blending?p=1:a.blending<o.blending&&(p=-1):a.blending>o.blending?p=1:a.blending<o.blending&&(p=-1)}}else p=1;else p=-1;if(!(p<0))break;var x=s-1,b=n[x];n[x]=n[s],n[s]=b,--s}}else ceramic_SortVisuals.rec(n,e,i),ceramic_SortVisuals.rec(n,i,t),ceramic_SortVisuals.doMerge(n,e,i,t,i-e,t-i)},ceramic_SortVisuals.doMerge=function(n,e,t,i,r,l){var s,a,o,p;if(0!=r&&0!=l)if(r+l!=2){if(r>l){s=e+(o=r>>1);for(var h=i-(u=t);h>0;){w=n[c=u+(_=h>>1)],O=n[s],C=0;if(w.computedVisible||w.computedTouchable)if(O.computedVisible||O.computedTouchable)if(w.computedRenderTarget!=O.computedRenderTarget)C=null==w.computedRenderTarget?1:null==O.computedRenderTarget||w.computedRenderTarget.priority>O.computedRenderTarget.priority?-1:w.computedRenderTarget.priority<O.computedRenderTarget.priority?1:w.computedRenderTarget.index<O.computedRenderTarget.index?-1:1;else if(w.computedDepth>O.computedDepth)C=1;else if(w.computedDepth<O.computedDepth)C=-1;else{E=w.asQuad,U=O.asQuad,M=w.asMesh,T=O.asMesh,k=null!=U||null!=T;if((null!=E||null!=M)&&k){D=null!=M?M.texture:E._texture,S=null!=T?T.texture:U._texture;null!=D&&null==S?C=1:null==D&&null!=S?C=-1:null!=D&&null!=S?D.index<S.index?C=1:D.index>S.index?C=-1:w.blending>O.blending?C=1:w.blending<O.blending&&(C=-1):w.blending>O.blending?C=1:w.blending<O.blending&&(C=-1)}}else C=1;else C=-1;C<0?(u=c+1,h=h-_-1):h=_}p=(a=u)-t}else{a=t+(p=l>>1);var u,_,c;for(h=t-(u=e);h>0;){c=u+(_=h>>1);w=n[a],O=n[c],C=0;if(w.computedVisible||w.computedTouchable)if(O.computedVisible||O.computedTouchable)if(w.computedRenderTarget!=O.computedRenderTarget)C=null==w.computedRenderTarget?1:null==O.computedRenderTarget||w.computedRenderTarget.priority>O.computedRenderTarget.priority?-1:w.computedRenderTarget.priority<O.computedRenderTarget.priority?1:w.computedRenderTarget.index<O.computedRenderTarget.index?-1:1;else if(w.computedDepth>O.computedDepth)C=1;else if(w.computedDepth<O.computedDepth)C=-1;else{E=w.asQuad,U=O.asQuad,M=w.asMesh,T=O.asMesh,k=null!=U||null!=T;if((null!=E||null!=M)&&k){D=null!=M?M.texture:E._texture,S=null!=T?T.texture:U._texture;null!=D&&null==S?C=1:null==D&&null!=S?C=-1:null!=D&&null!=S?D.index<S.index?C=1:D.index>S.index?C=-1:w.blending>O.blending?C=1:w.blending<O.blending&&(C=-1):w.blending>O.blending?C=1:w.blending<O.blending&&(C=-1)}}else C=1;else C=-1;C<0?h=_:(u=c+1,h=h-_-1)}o=(s=u)-e}var d;if(s!=t&&t!=a){for(var f=a-s,x=t-s;0!=x;){var b=f%x;f=x,x=b}for(d=f;0!=d--;){for(var y=n[s+d],v=t-s,m=s+d,g=s+d+v;g!=s+d;)n[m]=n[g],m=g,a-g>v?g+=v:g=s+(v-(a-g));n[m]=y}}var z=s+p;ceramic_SortVisuals.doMerge(n,e,s,z,o,p),ceramic_SortVisuals.doMerge(n,z,a,i,r-o,l-p)}else{var w=n[t],O=n[e],C=0;if(w.computedVisible||w.computedTouchable)if(O.computedVisible||O.computedTouchable)if(w.computedRenderTarget!=O.computedRenderTarget)C=null==w.computedRenderTarget?1:null==O.computedRenderTarget||w.computedRenderTarget.priority>O.computedRenderTarget.priority?-1:w.computedRenderTarget.priority<O.computedRenderTarget.priority?1:w.computedRenderTarget.index<O.computedRenderTarget.index?-1:1;else if(w.computedDepth>O.computedDepth)C=1;else if(w.computedDepth<O.computedDepth)C=-1;else{var E=w.asQuad,U=O.asQuad,M=w.asMesh,T=O.asMesh,k=null!=U||null!=T;if((null!=E||null!=M)&&k){var D=null!=M?M.texture:E._texture,S=null!=T?T.texture:U._texture;null!=D&&null==S?C=1:null==D&&null!=S?C=-1:null!=D&&null!=S?D.index<S.index?C=1:D.index>S.index?C=-1:w.blending>O.blending?C=1:w.blending<O.blending&&(C=-1):w.blending>O.blending?C=1:w.blending<O.blending&&(C=-1)}}else C=1;else C=-1;if(C<0){var A=n[t];n[t]=n[e],n[e]=A}}},ceramic_SortVisuals.rotate=function(n,e,t,i){if(e!=t&&t!=i){for(var r=i-e,l=t-e;0!=l;){var s=r%l;r=l,l=s}for(l=r;0!=l--;){for(var a=n[e+l],o=t-e,p=e+l,h=e+l+o;h!=e+l;)n[p]=n[h],p=h,i-h>o?h+=o:h=e+(o-(i-h));n[p]=a}}},ceramic_SortVisuals.gcd=function(n,e){for(;0!=e;){var t=n%e;n=e,e=t}return n},ceramic_SortVisuals.upper=function(n,e,t,i){for(var r,l,s=t-e;s>0;){l=e+(r=s>>1);var a=n[i],o=n[l],p=0;if(a.computedVisible||a.computedTouchable)if(o.computedVisible||o.computedTouchable)if(a.computedRenderTarget!=o.computedRenderTarget)p=null==a.computedRenderTarget?1:null==o.computedRenderTarget||a.computedRenderTarget.priority>o.computedRenderTarget.priority?-1:a.computedRenderTarget.priority<o.computedRenderTarget.priority?1:a.computedRenderTarget.index<o.computedRenderTarget.index?-1:1;else if(a.computedDepth>o.computedDepth)p=1;else if(a.computedDepth<o.computedDepth)p=-1;else{var h=a.asQuad,u=o.asQuad,_=a.asMesh,c=o.asMesh;if((null!=h||null!=_)&&(null!=u||null!=c)){var d=null!=_?_.texture:h._texture,f=null!=c?c.texture:u._texture;null!=d&&null==f?p=1:null==d&&null!=f?p=-1:null!=d&&null!=f?d.index<f.index?p=1:d.index>f.index?p=-1:a.blending>o.blending?p=1:a.blending<o.blending&&(p=-1):a.blending>o.blending?p=1:a.blending<o.blending&&(p=-1)}}else p=1;else p=-1;p<0?s=r:(e=l+1,s=s-r-1)}return e},ceramic_SortVisuals.lower=function(n,e,t,i){for(var r,l,s=t-e;s>0;){var a=n[l=e+(r=s>>1)],o=n[i],p=0;if(a.computedVisible||a.computedTouchable)if(o.computedVisible||o.computedTouchable)if(a.computedRenderTarget!=o.computedRenderTarget)p=null==a.computedRenderTarget?1:null==o.computedRenderTarget||a.computedRenderTarget.priority>o.computedRenderTarget.priority?-1:a.computedRenderTarget.priority<o.computedRenderTarget.priority?1:a.computedRenderTarget.index<o.computedRenderTarget.index?-1:1;else if(a.computedDepth>o.computedDepth)p=1;else if(a.computedDepth<o.computedDepth)p=-1;else{var h=a.asQuad,u=o.asQuad,_=a.asMesh,c=o.asMesh;if((null!=h||null!=_)&&(null!=u||null!=c)){var d=null!=_?_.texture:h._texture,f=null!=c?c.texture:u._texture;null!=d&&null==f?p=1:null==d&&null!=f?p=-1:null!=d&&null!=f?d.index<f.index?p=1:d.index>f.index?p=-1:a.blending>o.blending?p=1:a.blending<o.blending&&(p=-1):a.blending>o.blending?p=1:a.blending<o.blending&&(p=-1)}}else p=1;else p=-1;p<0?(e=l+1,s=s-r-1):s=r}return e},ceramic_SortVisuals.swap=function(n,e,t){var i=n[e];n[e]=n[t],n[t]=i},ceramic_SortVisuals.compare=function(n,e,t){var i=n[e],r=n[t],l=0;if(i.computedVisible||i.computedTouchable)if(r.computedVisible||r.computedTouchable)if(i.computedRenderTarget!=r.computedRenderTarget)l=null==i.computedRenderTarget?1:null==r.computedRenderTarget||i.computedRenderTarget.priority>r.computedRenderTarget.priority?-1:i.computedRenderTarget.priority<r.computedRenderTarget.priority?1:i.computedRenderTarget.index<r.computedRenderTarget.index?-1:1;else if(i.computedDepth>r.computedDepth)l=1;else if(i.computedDepth<r.computedDepth)l=-1;else{var s=i.asQuad,a=r.asQuad,o=i.asMesh,p=r.asMesh;if((null!=s||null!=o)&&(null!=a||null!=p)){var h=null!=o?o.texture:s._texture,u=null!=p?p.texture:a._texture;null!=h&&null==u?l=1:null==h&&null!=u?l=-1:null!=h&&null!=u?h.index<u.index?l=1:h.index>u.index?l=-1:i.blending>r.blending?l=1:i.blending<r.blending&&(l=-1):i.blending>r.blending?l=1:i.blending<r.blending&&(l=-1)}}else l=1;else l=-1;return l};var ceramic_SortVisualsByDepth=function(){};t["ceramic.SortVisualsByDepth"]=ceramic_SortVisualsByDepth,ceramic_SortVisualsByDepth.__name__="ceramic.SortVisualsByDepth",ceramic_SortVisualsByDepth.cmp=function(n,e){var t=0;return n.depth>e.depth?t=1:n.depth<e.depth&&(t=-1),t},ceramic_SortVisualsByDepth.sort=function(n){ceramic_SortVisualsByDepth.rec(n,0,n.length)},ceramic_SortVisualsByDepth.rec=function(n,e,t){var i=e+t>>1;if(t-e<12){if(t<=e)return;for(var r=e+1,l=t;r<l;)for(var s=r++;s>e;){var a=n[s],o=n[s-1],p=0;if(a.depth>o.depth?p=1:a.depth<o.depth&&(p=-1),!(p<0))break;var h=s-1,u=n[h];n[h]=n[s],n[s]=u,--s}}else ceramic_SortVisualsByDepth.rec(n,e,i),ceramic_SortVisualsByDepth.rec(n,i,t),ceramic_SortVisualsByDepth.doMerge(n,e,i,t,i-e,t-i)},ceramic_SortVisualsByDepth.doMerge=function(n,e,t,i,r,l){var s,a,o,p;if(0!=r&&0!=l)if(r+l!=2){if(r>l){s=e+(o=r>>1);for(var h=i-(u=t);h>0;){w=n[c=u+(_=h>>1)],O=n[s],C=0;w.depth>O.depth?C=1:w.depth<O.depth&&(C=-1),C<0?(u=c+1,h=h-_-1):h=_}p=(a=u)-t}else{a=t+(p=l>>1);var u,_,c;for(h=t-(u=e);h>0;){c=u+(_=h>>1);w=n[a],O=n[c],C=0;w.depth>O.depth?C=1:w.depth<O.depth&&(C=-1),C<0?h=_:(u=c+1,h=h-_-1)}o=(s=u)-e}var d;if(s!=t&&t!=a){for(var f=a-s,x=t-s;0!=x;){var b=f%x;f=x,x=b}for(d=f;0!=d--;){for(var y=n[s+d],v=t-s,m=s+d,g=s+d+v;g!=s+d;)n[m]=n[g],m=g,a-g>v?g+=v:g=s+(v-(a-g));n[m]=y}}var z=s+p;ceramic_SortVisualsByDepth.doMerge(n,e,s,z,o,p),ceramic_SortVisualsByDepth.doMerge(n,z,a,i,r-o,l-p)}else{var w=n[t],O=n[e],C=0;if(w.depth>O.depth?C=1:w.depth<O.depth&&(C=-1),C<0){var E=n[t];n[t]=n[e],n[e]=E}}},ceramic_SortVisualsByDepth.rotate=function(n,e,t,i){if(e!=t&&t!=i){for(var r=i-e,l=t-e;0!=l;){var s=r%l;r=l,l=s}for(l=r;0!=l--;){for(var a=n[e+l],o=t-e,p=e+l,h=e+l+o;h!=e+l;)n[p]=n[h],p=h,i-h>o?h+=o:h=e+(o-(i-h));n[p]=a}}},ceramic_SortVisualsByDepth.gcd=function(n,e){for(;0!=e;){var t=n%e;n=e,e=t}return n},ceramic_SortVisualsByDepth.upper=function(n,e,t,i){for(var r,l,s=t-e;s>0;){l=e+(r=s>>1);var a=n[i],o=n[l],p=0;a.depth>o.depth?p=1:a.depth<o.depth&&(p=-1),p<0?s=r:(e=l+1,s=s-r-1)}return e},ceramic_SortVisualsByDepth.lower=function(n,e,t,i){for(var r,l,s=t-e;s>0;){var a=n[l=e+(r=s>>1)],o=n[i],p=0;a.depth>o.depth?p=1:a.depth<o.depth&&(p=-1),p<0?(e=l+1,s=s-r-1):s=r}return e},ceramic_SortVisualsByDepth.swap=function(n,e,t){var i=n[e];n[e]=n[t],n[t]=i},ceramic_SortVisualsByDepth.compare=function(n,e,t){var i=n[e],r=n[t],l=0;return i.depth>r.depth?l=1:i.depth<r.depth&&(l=-1),l};var ceramic_Sound=function(n){this.pitch=1,this.pan=0,this.volume=.5,this.group=0,ceramic_Entity.call(this),this.backendItem=n};t["ceramic.Sound"]=ceramic_Sound,ceramic_Sound.__name__="ceramic.Sound",ceramic_Sound.__super__=ceramic_Entity,ceramic_Sound.prototype=$extend(ceramic_Entity.prototype,{set_group:function(n){if(this.group==n)return n;this.group=n;var e=ceramic_App.app.audio;return e.mixers.exists(n)||e.mixers.set(n,new ceramic_AudioMixer(n)),n},destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),null!=this.asset&&this.asset.destroy();for(var n=ceramic_App.app.backend.audio,e=this.backendItem,t=null,i=n.loadedAudioResources.h,r=i,l=Object.keys(i),s=l.length,a=0;a<s;){var o=l[a++],p=o;r[o]==e&&(t=p)}if(null==t)ceramic_App.app.logger.error("Failed to destroy audio resource: "+Std.string(e)+" because id could not be resolved",{fileName:"/Users/jeremyfa/Developer/ceramic/plugins/clay/runtime/src/backend/Audio.hx",lineNumber:172,className:"backend.Audio",methodName:"destroy"});else if(n.loadedAudioRetainCount.h[t]>1)n.loadedAudioRetainCount.h[t]-=1;else{var h=n.loadedAudioResources;Object.prototype.hasOwnProperty.call(h.h,t)&&delete h.h[t];h=n.loadedAudioRetainCount;Object.prototype.hasOwnProperty.call(h.h,t)&&delete h.h[t],e.destroy()}this.backendItem=null}},get_duration:function(){ceramic_App.app.backend.audio;return this.backendItem.getDuration()},play:function(n,e,t,i,r){null==e&&(e=!1),null==n&&(n=0);var l=ceramic_App.app.audio.mixers,s=l.keys.h[0|this.group],a=null!=s?s:0,o=a>=2?l.values[a-2]:ceramic_IntMap.RET_NULL;return o.mute?-1:(null==t&&(t=this.volume),null==i&&(i=this.pan),null==r&&(r=this.pitch),t*=2*o.volume,i+=o.pan,r+=o.pitch-1,ceramic_App.app.backend.audio.play(this.backendItem,t,i,r,n,e))},__class__:ceramic_Sound,__properties__:$extend(ceramic_Entity.prototype.__properties__,{get_duration:"get_duration",set_group:"set_group"})});var ceramic_SoundAsset=function(n,e){this.unobservedSound=null,this.soundAutoruns=null,this.stream=!1,ceramic_Asset.call(this,"sound",n,e)};t["ceramic.SoundAsset"]=ceramic_SoundAsset,ceramic_SoundAsset.__name__="ceramic.SoundAsset",ceramic_SoundAsset.__super__=ceramic_Asset,ceramic_SoundAsset.prototype=$extend(ceramic_Asset.prototype,{emitReplaceSound:function(n,e){var t=0;if(null!=this.__cbOnReplaceSound&&(t+=this.__cbOnReplaceSound.length),null!=this.__cbOnceReplaceSound&&(t+=this.__cbOnceReplaceSound.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnReplaceSound)for(var s=0,a=this.__cbOnReplaceSound.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnReplaceSound[o],++l):--t}if(null!=this.__cbOnceReplaceSound){var p=null,h=null;for(s=0,a=this.__cbOnceReplaceSound.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceReplaceSound[o],this.__cbOnceReplaceSound[o]=null;var u=this.__cbOnceOwnerUnbindReplaceSound[o];this.__cbOnceOwnerUnbindReplaceSound[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindReplaceSound[o]),h.push(this.__cbOnceReplaceSound[o])}this.__cbOnceOwnerUnbindReplaceSound=p,this.__cbOnceReplaceSound=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onReplaceSound:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceSound because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceSound(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReplaceSound&&(this.__cbOnOwnerUnbindReplaceSound=[]),this.__cbOnOwnerUnbindReplaceSound.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReplaceSound&&(this.__cbOnOwnerUnbindReplaceSound=[]),this.__cbOnOwnerUnbindReplaceSound.push(null);null==this.__cbOnReplaceSound&&(this.__cbOnReplaceSound=[]),this.__cbOnReplaceSound.push(e)},onceReplaceSound:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event replaceSound because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReplaceSound(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReplaceSound&&(this.__cbOnceOwnerUnbindReplaceSound=[]),this.__cbOnceOwnerUnbindReplaceSound.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReplaceSound&&(this.__cbOnceOwnerUnbindReplaceSound=[]),this.__cbOnceOwnerUnbindReplaceSound.push(null);null==this.__cbOnceReplaceSound&&(this.__cbOnceReplaceSound=[]),this.__cbOnceReplaceSound.push(e)},offReplaceSound:function(n){if(null!=n){var e;null!=this.__cbOnReplaceSound&&-1!=(e=this.__cbOnReplaceSound.indexOf(n))&&(this.__cbOnReplaceSound.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReplaceSound[e])&&l(),this.__cbOnOwnerUnbindReplaceSound.splice(e,1)),null!=this.__cbOnceReplaceSound&&-1!=(e=this.__cbOnceReplaceSound.indexOf(n))&&(this.__cbOnceReplaceSound.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReplaceSound[e])&&l(),this.__cbOnceOwnerUnbindReplaceSound.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReplaceSound){for(var t=0,i=this.__cbOnOwnerUnbindReplaceSound.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReplaceSound[r])&&l()}this.__cbOnOwnerUnbindReplaceSound=null}if(null!=this.__cbOnceOwnerUnbindReplaceSound){for(t=0,i=this.__cbOnceOwnerUnbindReplaceSound.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReplaceSound[r])&&l()}this.__cbOnceOwnerUnbindReplaceSound=null}this.__cbOnReplaceSound=null,this.__cbOnceReplaceSound=null}},listensReplaceSound:function(){return null!=this.__cbOnReplaceSound&&this.__cbOnReplaceSound.length>0||null!=this.__cbOnceReplaceSound&&this.__cbOnceReplaceSound.length>0},get_sound:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.soundAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.soundAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedSound},set_sound:function(n){var e=this.unobservedSound;if(this.unobservedSound=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitSoundChange(n,e);var t=this.soundAutoruns;if(null!=t){this.soundAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateSound:function(){var n=this.unobservedSound;this.emitSoundChange(n,n);var e=this.soundAutoruns;if(null!=e){this.soundAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitSoundChange:function(n,e){var t=0;if(null!=this.__cbOnSoundChange&&(t+=this.__cbOnSoundChange.length),null!=this.__cbOnceSoundChange&&(t+=this.__cbOnceSoundChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnSoundChange)for(var s=0,a=this.__cbOnSoundChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnSoundChange[o],++l):--t}if(null!=this.__cbOnceSoundChange){var p=null,h=null;for(s=0,a=this.__cbOnceSoundChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceSoundChange[o],this.__cbOnceSoundChange[o]=null;var u=this.__cbOnceOwnerUnbindSoundChange[o];this.__cbOnceOwnerUnbindSoundChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindSoundChange[o]),h.push(this.__cbOnceSoundChange[o])}this.__cbOnceOwnerUnbindSoundChange=p,this.__cbOnceSoundChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onSoundChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event soundChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offSoundChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindSoundChange&&(this.__cbOnOwnerUnbindSoundChange=[]),this.__cbOnOwnerUnbindSoundChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindSoundChange&&(this.__cbOnOwnerUnbindSoundChange=[]),this.__cbOnOwnerUnbindSoundChange.push(null);null==this.__cbOnSoundChange&&(this.__cbOnSoundChange=[]),this.__cbOnSoundChange.push(e)},onceSoundChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event soundChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offSoundChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindSoundChange&&(this.__cbOnceOwnerUnbindSoundChange=[]),this.__cbOnceOwnerUnbindSoundChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindSoundChange&&(this.__cbOnceOwnerUnbindSoundChange=[]),this.__cbOnceOwnerUnbindSoundChange.push(null);null==this.__cbOnceSoundChange&&(this.__cbOnceSoundChange=[]),this.__cbOnceSoundChange.push(e)},offSoundChange:function(n){if(null!=n){var e;null!=this.__cbOnSoundChange&&-1!=(e=this.__cbOnSoundChange.indexOf(n))&&(this.__cbOnSoundChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindSoundChange[e])&&l(),this.__cbOnOwnerUnbindSoundChange.splice(e,1)),null!=this.__cbOnceSoundChange&&-1!=(e=this.__cbOnceSoundChange.indexOf(n))&&(this.__cbOnceSoundChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindSoundChange[e])&&l(),this.__cbOnceOwnerUnbindSoundChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindSoundChange){for(var t=0,i=this.__cbOnOwnerUnbindSoundChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindSoundChange[r])&&l()}this.__cbOnOwnerUnbindSoundChange=null}if(null!=this.__cbOnceOwnerUnbindSoundChange){for(t=0,i=this.__cbOnceOwnerUnbindSoundChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindSoundChange[r])&&l()}this.__cbOnceOwnerUnbindSoundChange=null}this.__cbOnSoundChange=null,this.__cbOnceSoundChange=null}},listensSoundChange:function(){return null!=this.__cbOnSoundChange&&this.__cbOnSoundChange.length>0||null!=this.__cbOnceSoundChange&&this.__cbOnceSoundChange.length>0},load:function(){var n=this;if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load sound asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:27,className:"ceramic.SoundAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=Reflect.fields(this.options);t<i.length;){var r=i[t];++t,e[r]=Reflect.field(this.options,r)}var l=[].concat(this.allPaths),s=null;s=function(t){var i=t,r=ceramic_Assets.realAssetPath(i,n.runtimeAssets),o=ceramic_Assets.getReloadCount(r);o>0&&(r+="?hot="+o,i+="?hot="+o),ceramic_App.app.logger.info("Load sound "+i,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:87,className:"ceramic.SoundAsset",methodName:"load"});var p=ceramic_Path.extension(r);null!=p&&(p=p.toLowerCase()),ceramic_App.app.backend.audio.load(r,e,(function(e){if(null!=e||0==l.length)!function(e){if(null!=e){var t=n.get_sound(),i=new ceramic_Sound(e);i.asset=n,n.set_sound(i),null!=t&&(n.emitReplaceSound(n.get_sound(),t),t.asset=null,t.destroy()),n.set_status(a.READY),n.emitComplete(!0)}else n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load audio at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:71,className:"ceramic.SoundAsset",methodName:"load"}),n.emitComplete(!1)}(e);else{var i=l.shift();ceramic_App.app.logger.warning("Failed to load "+t+". Try "+i+"...",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:100,className:"ceramic.SoundAsset",methodName:"load"}),s(i)}}))},l.length>0?s(l.shift()):(this.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load audio at path: "+this.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:112,className:"ceramic.SoundAsset",methodName:"load"}),this.emitComplete(!1))},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload sound (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/SoundAsset.hx",lineNumber:133,className:"ceramic.SoundAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),null!=this.get_sound()&&(this.get_sound().destroy(),this.set_sound(null)))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offReplaceSound(),this.offSoundChange()},__class__:ceramic_SoundAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_sound:"set_sound",get_sound:"get_sound"})});var ceramic_State=function(){this.machine=null,ceramic_Entity.call(this)};t["ceramic.State"]=ceramic_State,ceramic_State.__name__="ceramic.State",ceramic_State.__super__=ceramic_Entity,ceramic_State.prototype=$extend(ceramic_Entity.prototype,{enter:function(){},update:function(n){},exit:function(){},__class__:ceramic_State});var ceramic_StateMachine=function(){};t["ceramic.StateMachine"]=ceramic_StateMachine,ceramic_StateMachine.__name__="ceramic.StateMachine";var ceramic_StateMachineBase=function(){this.initializerName=null,this.currentStateInstance=null,this.stateInstances=null,this.locked=!1,this.nextStateDefined=!1,this.stateDefined=!1,this.autoUpdate=!0,this.paused=!1,this.observedDirty=!1,ceramic_Entity.call(this),ceramic_StateMachineSystem.get_shared().stateMachines.push(this)};t["ceramic.StateMachineBase"]=ceramic_StateMachineBase,ceramic_StateMachineBase.__name__="ceramic.StateMachineBase",ceramic_StateMachineBase.__interfaces__=[ceramic_Component,tracker_Observable],ceramic_StateMachineBase.__super__=ceramic_Entity,ceramic_StateMachineBase.prototype=$extend(ceramic_Entity.prototype,{emitObservedDirty:function(n,e){var t=0;if(null!=this.__cbOnObservedDirty&&(t+=this.__cbOnObservedDirty.length),null!=this.__cbOnceObservedDirty&&(t+=this.__cbOnceObservedDirty.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnObservedDirty)for(var s=0,a=this.__cbOnObservedDirty.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnObservedDirty[o],++l):--t}if(null!=this.__cbOnceObservedDirty){var p=null,h=null;for(s=0,a=this.__cbOnceObservedDirty.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceObservedDirty[o],this.__cbOnceObservedDirty[o]=null;var u=this.__cbOnceOwnerUnbindObservedDirty[o];this.__cbOnceOwnerUnbindObservedDirty[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindObservedDirty[o]),h.push(this.__cbOnceObservedDirty[o])}this.__cbOnceOwnerUnbindObservedDirty=p,this.__cbOnceObservedDirty=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindObservedDirty&&(this.__cbOnOwnerUnbindObservedDirty=[]),this.__cbOnOwnerUnbindObservedDirty.push(null);null==this.__cbOnObservedDirty&&(this.__cbOnObservedDirty=[]),this.__cbOnObservedDirty.push(e)},onceObservedDirty:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event observedDirty because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offObservedDirty(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindObservedDirty&&(this.__cbOnceOwnerUnbindObservedDirty=[]),this.__cbOnceOwnerUnbindObservedDirty.push(null);null==this.__cbOnceObservedDirty&&(this.__cbOnceObservedDirty=[]),this.__cbOnceObservedDirty.push(e)},offObservedDirty:function(n){if(null!=n){var e;null!=this.__cbOnObservedDirty&&-1!=(e=this.__cbOnObservedDirty.indexOf(n))&&(this.__cbOnObservedDirty.splice(e,1),null!=(l=this.__cbOnOwnerUnbindObservedDirty[e])&&l(),this.__cbOnOwnerUnbindObservedDirty.splice(e,1)),null!=this.__cbOnceObservedDirty&&-1!=(e=this.__cbOnceObservedDirty.indexOf(n))&&(this.__cbOnceObservedDirty.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindObservedDirty[e])&&l(),this.__cbOnceOwnerUnbindObservedDirty.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindObservedDirty){for(var t=0,i=this.__cbOnOwnerUnbindObservedDirty.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindObservedDirty[r])&&l()}this.__cbOnOwnerUnbindObservedDirty=null}if(null!=this.__cbOnceOwnerUnbindObservedDirty){for(t=0,i=this.__cbOnceOwnerUnbindObservedDirty.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindObservedDirty[r])&&l()}this.__cbOnceOwnerUnbindObservedDirty=null}this.__cbOnObservedDirty=null,this.__cbOnceObservedDirty=null}},listensObservedDirty:function(){return null!=this.__cbOnObservedDirty&&this.__cbOnObservedDirty.length>0||null!=this.__cbOnceObservedDirty&&this.__cbOnceObservedDirty.length>0},update:function(n){},bindAsComponent:function(){},destroy:function(){if(!(this._lifecycleState<=-2)){if(this._lifecycleState=-2,null!=this.stateInstances){var n=this.stateInstances;this.stateInstances=null;for(var e=n.h,t=e,i=Object.keys(e),r=i.length,l=0;l<r;){var s=t[i[l++]];null!=s&&s.destroy()}}this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this)}},setEntity:function(n){this.rawEntity=n instanceof ceramic_Entity?n:null},getEntity:function(){return this.rawEntity},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offObservedDirty()},__class__:ceramic_StateMachineBase});var ceramic_StateMachineComponent=function(){};t["ceramic.StateMachineComponent"]=ceramic_StateMachineComponent,ceramic_StateMachineComponent.__name__="ceramic.StateMachineComponent";var ceramic_StateMachineImpl=function(){this.nextState=ceramic_StateMachineBase.NO_STATE,this.unobservedState=ceramic_StateMachineBase.NO_STATE,this.stateAutoruns=null,ceramic_StateMachineBase.call(this)};t["ceramic.StateMachineImpl"]=ceramic_StateMachineImpl,ceramic_StateMachineImpl.__name__="ceramic.StateMachineImpl",ceramic_StateMachineImpl.__super__=ceramic_StateMachineBase,ceramic_StateMachineImpl.prototype=$extend(ceramic_StateMachineBase.prototype,{get_state:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.stateAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.stateAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedState},set_state:function(n){var e=this.unobservedState;if(this.set_unobservedState(n),e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitStateChange(n,e);var t=this.stateAutoruns;if(null!=t){this.stateAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateState:function(){var n=this.unobservedState;this.emitStateChange(n,n);var e=this.stateAutoruns;if(null!=e){this.stateAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitStateChange:function(n,e){var t=0;if(null!=this.__cbOnStateChange&&(t+=this.__cbOnStateChange.length),null!=this.__cbOnceStateChange&&(t+=this.__cbOnceStateChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnStateChange)for(var s=0,a=this.__cbOnStateChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnStateChange[o],++l):--t}if(null!=this.__cbOnceStateChange){var p=null,h=null;for(s=0,a=this.__cbOnceStateChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceStateChange[o],this.__cbOnceStateChange[o]=null;var u=this.__cbOnceOwnerUnbindStateChange[o];this.__cbOnceOwnerUnbindStateChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindStateChange[o]),h.push(this.__cbOnceStateChange[o])}this.__cbOnceOwnerUnbindStateChange=p,this.__cbOnceStateChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onStateChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event stateChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStateChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindStateChange&&(this.__cbOnOwnerUnbindStateChange=[]),this.__cbOnOwnerUnbindStateChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindStateChange&&(this.__cbOnOwnerUnbindStateChange=[]),this.__cbOnOwnerUnbindStateChange.push(null);null==this.__cbOnStateChange&&(this.__cbOnStateChange=[]),this.__cbOnStateChange.push(e)},onceStateChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event stateChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStateChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindStateChange&&(this.__cbOnceOwnerUnbindStateChange=[]),this.__cbOnceOwnerUnbindStateChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindStateChange&&(this.__cbOnceOwnerUnbindStateChange=[]),this.__cbOnceOwnerUnbindStateChange.push(null);null==this.__cbOnceStateChange&&(this.__cbOnceStateChange=[]),this.__cbOnceStateChange.push(e)},offStateChange:function(n){if(null!=n){var e;null!=this.__cbOnStateChange&&-1!=(e=this.__cbOnStateChange.indexOf(n))&&(this.__cbOnStateChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindStateChange[e])&&l(),this.__cbOnOwnerUnbindStateChange.splice(e,1)),null!=this.__cbOnceStateChange&&-1!=(e=this.__cbOnceStateChange.indexOf(n))&&(this.__cbOnceStateChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindStateChange[e])&&l(),this.__cbOnceOwnerUnbindStateChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindStateChange){for(var t=0,i=this.__cbOnOwnerUnbindStateChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindStateChange[r])&&l()}this.__cbOnOwnerUnbindStateChange=null}if(null!=this.__cbOnceOwnerUnbindStateChange){for(t=0,i=this.__cbOnceOwnerUnbindStateChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindStateChange[r])&&l()}this.__cbOnceOwnerUnbindStateChange=null}this.__cbOnStateChange=null,this.__cbOnceStateChange=null}},listensStateChange:function(){return null!=this.__cbOnStateChange&&this.__cbOnStateChange.length>0||null!=this.__cbOnceStateChange&&this.__cbOnceStateChange.length>0},set_unobservedState:function(n){if(this.stateDefined&&this.unobservedState==n)return n;if(this.locked)throw haxe_Exception.thrown("Changing state is forbidden because `locked` is `true`.");return this.nextState=n,this.nextStateDefined=this.computeStateDefined(this.nextState),this.stateDefined&&(this._exitState(),this.stateDefined=!1),this.unobservedState=n,this.stateDefined=this.nextStateDefined,this.stateDefined&&this._enterState(),this.nextState=ceramic_StateMachineBase.NO_STATE,n},computeStateDefined:function(n){return n!=ceramic_StateMachineBase.NO_STATE},keyToString:function(n){return n.toString()},set:function(n,e){null==this.stateInstances&&(this.stateInstances=new haxe_ds_StringMap);var t=this.keyToString(n);if(Object.prototype.hasOwnProperty.call(this.stateInstances.h,t)){var i=this.stateInstances.h[t];i==this.currentStateInstance&&(this.currentStateInstance=null),i!=e&&i.destroy()}this.stateInstances.h[t]=e,null!=e&&(e.machine=this,n==this.get_state()&&null==this.currentStateInstance&&(this.currentStateInstance=e,this.currentStateInstance.enter()))},get:function(n){if(null==this.stateInstances)return null;var e=this.keyToString(n);return this.stateInstances.h[e]},update:function(n){this._updateState(n)},scheduleOnceEnterState:function(n,e,t){var i=this,r=null;r=function(n,l){e==n&&(i.offStateChange(r),t(),t=null)},this.onStateChange(n,r)},scheduleOnceExitState:function(n,e,t){var i=this,r=null;r=function(n,l){e==l&&(i.offStateChange(r),t(),t=null)},this.onStateChange(n,r)},_enterState:function(){this.currentStateInstance=this.get(this.get_state()),null!=this.currentStateInstance&&this.currentStateInstance.enter()},_updateState:function(n){!this.paused&&this.stateDefined&&null!=this.currentStateInstance&&this.currentStateInstance.update(n)},_exitState:function(){null!=this.currentStateInstance&&(this.currentStateInstance.exit(),this.currentStateInstance=null)},unbindEvents:function(){ceramic_StateMachineBase.prototype.unbindEvents.call(this),this.offStateChange()},__class__:ceramic_StateMachineImpl,__properties__:$extend(ceramic_StateMachineBase.prototype.__properties__,{set_unobservedState:"set_unobservedState",set_state:"set_state",get_state:"get_state"})});var ceramic_StateMachineSystem=function(){this._updatingStateMachines=[],this.stateMachines=[],ceramic_System.call(this),this.set_lateUpdateOrder(1e3)};t["ceramic.StateMachineSystem"]=ceramic_StateMachineSystem,ceramic_StateMachineSystem.__name__="ceramic.StateMachineSystem",ceramic_StateMachineSystem.__properties__={set_shared:"set_shared",get_shared:"get_shared"},ceramic_StateMachineSystem.get_shared=function(){return ceramic_StateMachineSystem.lazyShared&&(ceramic_StateMachineSystem.lazyShared=!1,ceramic_StateMachineSystem.shared=new ceramic_StateMachineSystem),ceramic_StateMachineSystem.shared},ceramic_StateMachineSystem.set_shared=function(n){return ceramic_StateMachineSystem.shared=n},ceramic_StateMachineSystem.__super__=ceramic_System,ceramic_StateMachineSystem.prototype=$extend(ceramic_System.prototype,{lateUpdate:function(n){for(var e=this.stateMachines.length,t=0,i=e;t<i;){var r=t++;this._updatingStateMachines[r]=this.stateMachines[r]}for(t=0,i=e;t<i;){r=t++;var l=this._updatingStateMachines[r];l.autoUpdate&&l.update(n)}for(t=0,i=e;t<i;){r=t++;this._updatingStateMachines[r]=null}},__class__:ceramic_StateMachineSystem});var ceramic_StateMachine_$GameState=function(){this.stateInstancesByIndex=[],ceramic_StateMachineImpl.call(this)};t["ceramic.StateMachine_GameState"]=ceramic_StateMachine_$GameState,ceramic_StateMachine_$GameState.__name__="ceramic.StateMachine_GameState",ceramic_StateMachine_$GameState.__super__=ceramic_StateMachineImpl,ceramic_StateMachine_$GameState.prototype=$extend(ceramic_StateMachineImpl.prototype,{indexForEnumValue:function(n){return null==n?-1:n._hx_index},computeStateDefined:function(n){return null!=n},set:function(n,e){var t=null==n?-1:n._hx_index;if(-1==t)throw haxe_Exception.thrown("Invalid enum value: "+Std.string(n));var i=this.stateInstancesByIndex[t];if(null!=i&&(i==this.currentStateInstance&&(this.currentStateInstance=null),i!=e&&i.destroy()),this.stateInstancesByIndex[t]=e,null!=e){e.machine=this;var r=this.get_state();t==(null==r?-1:r._hx_index)&&null==this.currentStateInstance&&(this.currentStateInstance=e,this.currentStateInstance.enter())}},get:function(n){var e=null==n?-1:n._hx_index;return-1==e?null:this.stateInstancesByIndex[e]},__class__:ceramic_StateMachine_$GameState});var ceramic_StateMachine_$GameState_$MainScene=function(){this.entity=null,ceramic_StateMachine_$GameState.call(this)};t["ceramic.StateMachine_GameState_MainScene"]=ceramic_StateMachine_$GameState_$MainScene,ceramic_StateMachine_$GameState_$MainScene.__name__="ceramic.StateMachine_GameState_MainScene",ceramic_StateMachine_$GameState_$MainScene.__super__=ceramic_StateMachine_$GameState,ceramic_StateMachine_$GameState_$MainScene.prototype=$extend(ceramic_StateMachine_$GameState.prototype,{_enterState:function(){switch(this.get_state()._hx_index){case 0:this.entity.TITLE_enter();break;case 1:this.entity.PLAY_enter();break;case 2:this.entity.GAME_OVER_enter()}this.currentStateInstance=this.get(this.get_state()),null!=this.currentStateInstance&&this.currentStateInstance.enter()},_updateState:function(n){var e=this.get_state();if(!this.paused&&this.stateDefined){switch(e._hx_index){case 0:this.entity.TITLE_update(n);break;case 1:this.entity.PLAY_update(n);break;case 2:this.entity.GAME_OVER_update(n)}null!=this.currentStateInstance&&this.currentStateInstance.update(n)}},_exitState:function(){switch(this.get_state()._hx_index){case 0:this.entity.TITLE_exit();break;case 1:this.entity.PLAY_exit();break;case 2:this.entity.GAME_OVER_exit()}null!=this.currentStateInstance&&(this.currentStateInstance.exit(),this.currentStateInstance=null)},setEntity:function(n){ceramic_StateMachine_$GameState.prototype.setEntity.call(this,n),this.entity=n instanceof ld49_MainScene?n:null},getEntity:function(){return this.entity},__class__:ceramic_StateMachine_$GameState_$MainScene});var ceramic_Systems=function(){this._udpatingSystems=[],this.lateUpdateOrdered=[],this.earlyUpdateOrdered=[],this.lateUpdateOrderDirty=!1,this.earlyUpdateOrderDirty=!1,ceramic_Entity.call(this)};t["ceramic.Systems"]=ceramic_Systems,ceramic_Systems.__name__="ceramic.Systems",ceramic_Systems.sortSystemsByEarlyUpdateOrder=function(n,e){return n.earlyUpdateOrder>e.earlyUpdateOrder?1:n.earlyUpdateOrder<e.earlyUpdateOrder?-1:0},ceramic_Systems.sortSystemsByLateUpdateOrder=function(n,e){return n.lateUpdateOrder>e.lateUpdateOrder?1:n.lateUpdateOrder<e.lateUpdateOrder?-1:0},ceramic_Systems.__super__=ceramic_Entity,ceramic_Systems.prototype=$extend(ceramic_Entity.prototype,{addSystem:function(n){this.earlyUpdateOrdered.push(n),this.earlyUpdateOrderDirty=!0,this.lateUpdateOrdered.push(n),this.lateUpdateOrderDirty=!0},removeSystem:function(n){HxOverrides.remove(this.earlyUpdateOrdered,n),this.earlyUpdateOrderDirty=!0,HxOverrides.remove(this.lateUpdateOrdered,n),this.lateUpdateOrderDirty=!0},earlyUpdate:function(n){this.earlyUpdateOrderDirty&&(haxe_ds_ArraySort.sort(this.earlyUpdateOrdered,ceramic_Systems.sortSystemsByEarlyUpdateOrder),this.earlyUpdateOrderDirty=!1);for(var e=this.earlyUpdateOrdered.length,t=0,i=e;t<i;){var r=t++;this._udpatingSystems[r]=this.earlyUpdateOrdered[r]}for(t=0,i=e;t<i;){r=t++;var l=this._udpatingSystems[r];l.emitBeginEarlyUpdate(n),l.earlyUpdate(n),l.emitEndEarlyUpdate(n),ceramic_App.app.flushImmediate()}for(t=0,i=e;t<i;){r=t++;this._udpatingSystems[r]=null}},lateUpdate:function(n){this.lateUpdateOrderDirty&&(haxe_ds_ArraySort.sort(this.lateUpdateOrdered,ceramic_Systems.sortSystemsByLateUpdateOrder),this.lateUpdateOrderDirty=!1);for(var e=this.lateUpdateOrdered.length,t=0,i=e;t<i;){var r=t++;this._udpatingSystems[r]=this.lateUpdateOrdered[r]}for(t=0,i=e;t<i;){r=t++;var l=this._udpatingSystems[r];l.emitBeginLateUpdate(n),l.lateUpdate(n),l.emitEndLateUpdate(n),ceramic_App.app.flushImmediate()}for(t=0,i=e;t<i;){r=t++;this._udpatingSystems[r]=null}},get:function(n){for(var e=0,t=this.earlyUpdateOrdered.length;e<t;){var i=e++,r=this.earlyUpdateOrdered[i];if(r.name==n)return r}return null},__class__:ceramic_Systems});var ceramic_Text=function(){this.maxLineDiff=-1,this.fitWidth=-1,this.align=y.LEFT,this.preRenderedSize=-1,this.clipTextHeight=-1,this.clipTextWidth=-1,this.clipTextY=-1,this.clipTextX=-1,this.letterSpacing=0,this.lineHeight=1,this.pointSize=20,this.content="",this.color=16777215,this.numLines=1,this.glyphQuads=[],ceramic_Visual.call(this),this.set_font(ceramic_App.app.defaultFont)};t["ceramic.Text"]=ceramic_Text,ceramic_Text.__name__="ceramic.Text",ceramic_Text.__super__=ceramic_Visual,ceramic_Text.prototype=$extend(ceramic_Visual.prototype,{emitGlyphQuadsChange:function(){var n=0;if(null!=this.__cbOnGlyphQuadsChange&&(n+=this.__cbOnGlyphQuadsChange.length),null!=this.__cbOnceGlyphQuadsChange&&(n+=this.__cbOnceGlyphQuadsChange.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnGlyphQuadsChange)for(var r=0,l=this.__cbOnGlyphQuadsChange.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnGlyphQuadsChange[s],++i):--n}if(null!=this.__cbOnceGlyphQuadsChange){var a=null,o=null;for(r=0,l=this.__cbOnceGlyphQuadsChange.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceGlyphQuadsChange[s],this.__cbOnceGlyphQuadsChange[s]=null;var p=this.__cbOnceOwnerUnbindGlyphQuadsChange[s];this.__cbOnceOwnerUnbindGlyphQuadsChange[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindGlyphQuadsChange[s]),o.push(this.__cbOnceGlyphQuadsChange[s])}this.__cbOnceOwnerUnbindGlyphQuadsChange=a,this.__cbOnceGlyphQuadsChange=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onGlyphQuadsChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event glyphQuadsChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGlyphQuadsChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindGlyphQuadsChange&&(this.__cbOnOwnerUnbindGlyphQuadsChange=[]),this.__cbOnOwnerUnbindGlyphQuadsChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindGlyphQuadsChange&&(this.__cbOnOwnerUnbindGlyphQuadsChange=[]),this.__cbOnOwnerUnbindGlyphQuadsChange.push(null);null==this.__cbOnGlyphQuadsChange&&(this.__cbOnGlyphQuadsChange=[]),this.__cbOnGlyphQuadsChange.push(e)},onceGlyphQuadsChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event glyphQuadsChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offGlyphQuadsChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindGlyphQuadsChange&&(this.__cbOnceOwnerUnbindGlyphQuadsChange=[]),this.__cbOnceOwnerUnbindGlyphQuadsChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindGlyphQuadsChange&&(this.__cbOnceOwnerUnbindGlyphQuadsChange=[]),this.__cbOnceOwnerUnbindGlyphQuadsChange.push(null);null==this.__cbOnceGlyphQuadsChange&&(this.__cbOnceGlyphQuadsChange=[]),this.__cbOnceGlyphQuadsChange.push(e)},offGlyphQuadsChange:function(n){if(null!=n){var e;null!=this.__cbOnGlyphQuadsChange&&-1!=(e=this.__cbOnGlyphQuadsChange.indexOf(n))&&(this.__cbOnGlyphQuadsChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindGlyphQuadsChange[e])&&l(),this.__cbOnOwnerUnbindGlyphQuadsChange.splice(e,1)),null!=this.__cbOnceGlyphQuadsChange&&-1!=(e=this.__cbOnceGlyphQuadsChange.indexOf(n))&&(this.__cbOnceGlyphQuadsChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindGlyphQuadsChange[e])&&l(),this.__cbOnceOwnerUnbindGlyphQuadsChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindGlyphQuadsChange){for(var t=0,i=this.__cbOnOwnerUnbindGlyphQuadsChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindGlyphQuadsChange[r])&&l()}this.__cbOnOwnerUnbindGlyphQuadsChange=null}if(null!=this.__cbOnceOwnerUnbindGlyphQuadsChange){for(t=0,i=this.__cbOnceOwnerUnbindGlyphQuadsChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindGlyphQuadsChange[r])&&l()}this.__cbOnceOwnerUnbindGlyphQuadsChange=null}this.__cbOnGlyphQuadsChange=null,this.__cbOnceGlyphQuadsChange=null}},listensGlyphQuadsChange:function(){return null!=this.__cbOnGlyphQuadsChange&&this.__cbOnGlyphQuadsChange.length>0||null!=this.__cbOnceGlyphQuadsChange&&this.__cbOnceGlyphQuadsChange.length>0},get_numLines:function(){return this.contentDirty&&this.computeContent(),this.numLines},set_color:function(n){if(this.color==n)return n;if(this.color=n,null!=this.glyphQuads)for(var e=0,t=this.glyphQuads.length;e<t;){var i=e++;this.glyphQuads[i].color=n}return n},set_content:function(n){return this.content==n||(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.content=n),n},set_pointSize:function(n){return this.pointSize==n||(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.pointSize=n),n},set_lineHeight:function(n){return this.lineHeight==n||(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.lineHeight=n),n},set_letterSpacing:function(n){return this.letterSpacing==n||(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.letterSpacing=n),n},set_font:function(n){return null==n&&(n=ceramic_App.app.defaultFont),this.font==n||(null!=this.font&&(this.font.offDestroy($bind(this,this.fontDestroyed)),null!=this.font.asset&&this.font.asset.release()),this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.font=n,null!=this.font&&(this.font.onDestroy(this,$bind(this,this.fontDestroyed)),null!=this.font.asset&&this.font.asset.retain())),n},set_clipTextX:function(n){return this.clipTextX==n||(this.clipTextX=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_clipTextY:function(n){return this.clipTextY==n||(this.clipTextY=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_clipTextWidth:function(n){return this.clipTextWidth==n||(this.clipTextWidth=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_clipTextHeight:function(n){return this.clipTextHeight==n||(this.clipTextHeight=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},clipText:function(n,e,t,i){this.set_clipTextX(n),this.set_clipTextY(e),this.set_clipTextWidth(t),this.set_clipTextHeight(i)},set_preRenderedSize:function(n){return this.preRenderedSize==n||(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.preRenderedSize<=0&&n>0&&ceramic_App.app.screen.onTexturesDensityChange(this,$bind(this,this.handleTexturesDensityChange)),this.preRenderedSize>0&&n<=0&&ceramic_App.app.screen.offTexturesDensityChange($bind(this,this.handleTexturesDensityChange)),this.preRenderedSize=n),n},handleTexturesDensityChange:function(n,e){this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0},set_align:function(n){return this.align==n||(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.align=n),n},set_fitWidth:function(n){return this.fitWidth==n||(this.fitWidth=n,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),n},set_maxLineDiff:function(n){return this.maxLineDiff==n||(this.maxLineDiff=n,-1!=this.fitWidth&&(this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0)),n},set_depth:function(n){if(this.depth==n)return n;if(null!=this.glyphQuads)for(var e=0,t=this.glyphQuads.length;e<t;){var i=e++;this.glyphQuads[i].set_depth(n)}return ceramic_Visual.prototype.set_depth.call(this,n)},get_width:function(){return this.contentDirty&&this.computeContent(),ceramic_Visual.prototype.get_width.call(this)},scaleWidth:function(n){if(this._height!=n&&(this.set_scaleX(n/this._width),this.matrixDirty=!0,null!=this.children))for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}},get_height:function(){return this.contentDirty&&this.computeContent(),ceramic_Visual.prototype.get_height.call(this)},scaleHeight:function(n){if(this._height!=n&&(this.set_scaleY(n/this._height),this.matrixDirty=!0,null!=this.children))for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}},set_blending:function(n){if(this.blending==n)return n;if(this.blending=n,null!=this.glyphQuads)for(var e=0,t=this.glyphQuads.length;e<t;){var i=e++;this.glyphQuads[i].set_blending(n)}return n},destroy:function(){if(!(this._lifecycleState<=-2)&&(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Visual.prototype.destroy.call(this),null!=this.glyphQuads)){for(var n=0,e=this.glyphQuads.length;n<e;){var t=n++;this.glyphQuads[t].destroy()}this.glyphQuads=null}},computeContent:function(){var n=this;if(null==this.font)return this.set_width(0),this.set_height(0),void(this.contentDirty=!1);if(this.numLines=this.computeGlyphQuads(this.fitWidth,this.maxLineDiff),this.contentDirty=!1,this.matrixDirty=!0,null!=this.children)for(var e=0,t=this.children.length;e<t;){var i=e++,r=this.children[i];if(r.matrixDirty=!0,null!=r.children)for(var l=0,s=r.children.length;l<s;){var a=l++;r.children[a].set_matrixDirty(!0)}}var o,p=this.preRenderedSize*ceramic_App.app.screen.get_texturesDensity()|0;if(p>0){var h=this.font;o=null!=h.fontData.distanceField&&"msdf"==h.fontData.distanceField.fieldType}else o=!1;o&&this.font.needsToPreRenderAtSize(p)&&this.font.preRenderAtSize(p,(function(){n.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0})),this.emitGlyphQuadsChange()},computeGlyphQuads:function(n,e,t){null==t&&(t=-1);var i=0,r=0,l=0,s=this.pointSize/this.font.fontData.pointSize,a=null,o=-1,p=null,h=-1,u=0,_=null,c=[],d=[[]],f=0,x=!1,b=!1,y=!1,v=0,m=0,g=!1,z=0,w=0,O=0,C=0,E=0,U=!1;-1!=this.clipTextX&&-1!=this.clipTextY&&-1!=this.clipTextWidth&&-1!=this.clipTextHeight&&(U=!0);var M,T=this.preRenderedSize*ceramic_App.app.screen.get_texturesDensity()|0;if(T>0){var k=this.font;M=null!=k.fontData.distanceField&&"msdf"==k.fontData.distanceField.fieldType}else M=!1;var D=M&&!this.font.needsToPreRenderAtSize(T),S=this.content;(""==S||S.length>0&&"\n"==S.charAt(S.length-1))&&(g=!0,S+=" ");for(var A=S.length;u<A&&f<2*A;){if(p=a,h=o,a=S.charAt(u),o=HxOverrides.cca(a,0),(b=" "==a)&&++v,(x="\n"==a)||b||u==A-1)if(!y&&n>=0&&l>1&&l>n-1&&v>0)for(y=!0,--v;u>0;){if(--u,a=S.charAt(u),o=HxOverrides.cca(a,0),u>0?(p=S.charAt(u-1),h=HxOverrides.cca(p,0)):(p=null,h=-1),_=this.font.fontData.chars.get(o),null!=p){var P,V=this.font.fontData.kernings.get(h);if(null!=V&&V.h.hasOwnProperty(0|o)){var I=V.h[0|o];P=null!=I?I:0}else P=0;i-=P*s}if(null!=_&&(i-=_.xAdvance*s+this.letterSpacing),!(d[d.length-1].length>0))break;if(--f,d[d.length-1].pop()," "==a){a="\n",_=this.font.fontData.chars.get(10),o=HxOverrides.cca(a,0),--v,x=!0,b=!1;break}}else y=!1;if(x)v=0,p=null,h=-1,m=++u,r+=this.lineHeight*this.font.fontData.lineHeight*s,c.push(i+(null!=_?(_.xOffset+_.width-_.xAdvance)*s-this.letterSpacing:0)),d.push([]),i=0,l=0;else if(null!=(_=this.font.fontData.chars.get(o))){if(null!=p){var N,F=this.font.fontData.kernings.get(h);if(null!=F&&F.h.hasOwnProperty(0|o)){var R=F.h[0|o];N=null!=R?R:0}else N=0;i+=N*s}if(z=i+_.xOffset*s,w=r+_.yOffset*s,O=_.width*s,C=_.height*s,E=0,U&&(z>=this.clipTextX+this.clipTextWidth||z+O<this.clipTextX||w>=this.clipTextY+this.clipTextHeight||w+C<this.clipTextY?E=2:(this.clipTextX>z&&this.clipTextX<=z+O||this.clipTextY>w&&this.clipTextY<=w+C||this.clipTextX+this.clipTextWidth>z&&this.clipTextX+this.clipTextWidth<=z+O||this.clipTextY+this.clipTextHeight>w&&this.clipTextY+this.clipTextHeight<=w+C)&&(E=1)),null==(yn=f<this.glyphQuads.length?this.glyphQuads[f]:null)){if(1!=(yn=new ceramic_GlyphQuad).inheritAlpha&&(yn.inheritAlpha=!0,yn.visibilityDirty=!0,null!=yn.children))for(var L=0,B=yn.children.length;L<B;){var G=L++,j=yn.children[G];if(j.visibilityDirty=!0,null!=j.children)for(var K=0,W=j.children.length;K<W;){var Y=K++;j.children[Y].set_visibilityDirty(!0)}}this.glyphQuads.push(yn),this.add(yn)}++f,yn.char=a,yn.code=o,yn.index=u,yn.set_visible(2!=E),yn.flags&=-17,yn.posInLine=u-m,yn.line=d.length-1;var X=D?this.font.preRenderedPages.h[T].h[_.page]:this.font.pages.get(_.page);if(yn._texture!=X&&yn._set_texture(X),yn.set_shader(D||null==this.font.pageShaders?null:this.font.pageShaders.h[_.page]),yn.color=this.color,yn.set_depth(this.depth),yn.set_blending(this.blending),yn.glyphX=i,yn.glyphY=r,yn.glyphAdvance=_.xAdvance*s+this.letterSpacing,yn.glyph=_,1==E){var H,Z,q,$,Q=Math.max(this.clipTextX,z),J=Math.max(this.clipTextY,w),nn=Math.min(this.clipTextX+this.clipTextWidth,z+O)-Q,en=Math.min(this.clipTextY+this.clipTextHeight,w+C)-J;if(D){var tn=this.font.pages.get(_.page);H=_.x*yn._texture.width/tn.width,Z=_.y*yn._texture.height/tn.height,q=_.width*yn._texture.width/tn.width,$=_.height*yn._texture.height/tn.height}else H=_.x/yn._texture.density,Z=_.y/yn._texture.density,q=_.width/yn._texture.density,$=_.height/yn._texture.density;var rn=(Q-z)*q/O;H+=rn,q-=rn+(z+O-Q-nn)*q/O;var ln=(J-w)*$/C;Z+=ln,$-=ln+(w+C-J-en)*$/C,yn.frameX=H,yn.frameY=Z,yn.frameWidth!=q&&(yn.frameWidth=q,-1!=q&&yn.set_width(q)),yn.frameHeight!=$&&(yn.frameHeight=$,-1!=$&&yn.set_height($)),yn.set_x(Q),yn.set_y(J),yn.set_width(nn),yn.set_height(en)}else{if(D){var sn=this.font.pages.get(_.page),an=_.width*yn._texture.width/sn.width,on=_.height*yn._texture.height/sn.height;yn.frameX=_.x*yn._texture.width/sn.width,yn.frameY=_.y*yn._texture.height/sn.height,yn.frameWidth!=an&&(yn.frameWidth=an,-1!=an&&yn.set_width(an)),yn.frameHeight!=on&&(yn.frameHeight=on,-1!=on&&yn.set_height(on))}else{var pn=_.width/yn._texture.density,hn=_.height/yn._texture.density;yn.frameX=_.x/yn._texture.density,yn.frameY=_.y/yn._texture.density,yn.frameWidth!=pn&&(yn.frameWidth=pn,-1!=pn&&yn.set_width(pn)),yn.frameHeight!=hn&&(yn.frameHeight=hn,-1!=hn&&yn.set_height(hn))}yn.set_x(z),yn.set_y(w),yn.set_width(O),yn.set_height(C)}yn.set_anchorX(0),yn.set_anchorY(0),d[d.length-1].push(yn),l=i+Math.max((_.xOffset+_.width)*s,_.xAdvance*s),i+=_.xAdvance*s+this.letterSpacing,++u}else++u}if(i>0&&c.push(i),g&&f>0){var un=this.glyphQuads[f-1],_n=c[c.length-1];_n-=un.glyphAdvance,c[c.length-1]=_n,un.glyphAdvance=0,un.set_visible(!1)}for(;f<this.glyphQuads.length;){(yn=this.glyphQuads.pop()).destroy()}var cn=0;for(L=0,B=c.length;L<B;){var dn=c[u=L++];cn=Math.max(dn,cn)}switch(this.set_width(Math.round(1e3*cn)/1e3),this.set_height(Math.round(1e3*((c.length-1)*this.lineHeight*this.font.fontData.lineHeight*s+this.font.fontData.lineHeight*s))/1e3),this.align._hx_index){case 1:for(L=0,B=c.length;L<B;){var xn=cn-c[u=L++];for(K=0,W=(bn=d[u]).length;K<W;){(yn=bn[gn=K++]).set_x(yn.x+xn)}}break;case 2:for(L=0,B=c.length;L<B;){var bn;for(xn=.5*(cn-c[u=L++]),K=0,W=(bn=d[u]).length;K<W;){var yn;(yn=bn[gn=K++]).set_x(yn.x+xn)}}}if((-1==t||t==c.length)&&n>0&&-1!=e&&n>this.pointSize){var vn=0,mn=this.fitWidth*e;for(L=0,B=c.length;L<B;)for(u=L++,K=0,W=c.length;K<W;){var gn=K++,zn=c[u]-c[gn];if(zn<0&&(zn=-zn),zn>vn&&(vn=zn),vn>mn)break}if(vn>mn)this.computeGlyphQuads(n-this.pointSize,e,c.length)>c.length&&this.computeGlyphQuads(n,-1,c.length)}return c.length},lineForYPosition:function(n){this.contentDirty&&this.computeContent();var e=this.lineHeight*this.font.fontData.lineHeight*this.pointSize/this.font.fontData.pointSize,t=0;if(e<=0)return 0;var i=this.glyphQuads;i.length>0&&(t=i[i.length-1].line);var r=Math.floor(n/e);return r<0&&(r=0),r>t&&(r=t),r},posInLineForX:function(n,e){this.contentDirty&&this.computeContent();var t=this.glyphQuads,i=0;if(0==t.length||0==e)return i;for(var r=0,l=t.length;r<l;){var s=t[r++];if(s.line==n){if(s.glyphX>=e)return i;if(s.glyphX+s.glyphAdvance>=e){var a=s.glyphX+s.glyphAdvance-e;if(e-s.glyphX<=a)return i}++i}else if(s.line>n)break}return i},indexForPosInLine:function(n,e){this.contentDirty&&this.computeContent();var t=this.glyphQuads;if(0==t.length)return 0;for(var i=0,r=t.length;i<r;){var l=t[i++];if(l.line==n&&l.posInLine>=e)return l.index+e-l.posInLine;if(l.line>n)return l.index-l.posInLine-(l.line-n)}return this.content.length},xPositionAtIndex:function(n){this.contentDirty&&this.computeContent();var e=this.glyphQuads;if(0==e.length)return 0;for(var t=0,i=e.length;t<i;){var r=t++,l=e[r];if(l.index>=n){if(0==l.glyphX&&l.index>n){if(r>=1){var s=e[r-1];return s.glyphX+s.glyphAdvance}return 0}return l.glyphX}}var a=e[e.length-1];return a.glyphX+a.glyphAdvance},lineForIndex:function(n){this.contentDirty&&this.computeContent();var e=this.glyphQuads;if(0==e.length)return 0;for(var t=0,i=e.length;t<i;){var r=e[t++];if(r.index>=n){if(r.posInLine>n-r.index){for(var l=r.index-r.posInLine,s=r.line;l>n;)--l,--s;return s}return r.line}}return e[e.length-1].line},posInLineForIndex:function(n){this.contentDirty&&this.computeContent();var e=this.glyphQuads;if(0==e.length)return 0;for(var t=!1,i=-1,r=0,l=e.length;r<l;){var s=r++,a=e[s];if(a.index>=n){var o=a.posInLine+n-a.index;if(o<0)for(var p=s-1;p>=0;){var h=e[p];if(t||(t=!0,i=this.lineForIndex(n)),h.line==i)return o=h.posInLine+n-h.index;if(h.line<i)return 0;--p}return o>=0?o:0}}return 0},fontDestroyed:function(n){this.set_font(ceramic_App.app.defaultFont)},toString:function(){return null!=this.id?"Text("+this.id+" "+this.content+")":"Text("+this.content+")"},unbindEvents:function(){ceramic_Visual.prototype.unbindEvents.call(this),this.offGlyphQuadsChange()},__class__:ceramic_Text,__properties__:$extend(ceramic_Visual.prototype.__properties__,{set_maxLineDiff:"set_maxLineDiff",set_fitWidth:"set_fitWidth",set_align:"set_align",set_preRenderedSize:"set_preRenderedSize",set_clipTextHeight:"set_clipTextHeight",set_clipTextWidth:"set_clipTextWidth",set_clipTextY:"set_clipTextY",set_clipTextX:"set_clipTextX",set_font:"set_font",set_letterSpacing:"set_letterSpacing",set_lineHeight:"set_lineHeight",set_pointSize:"set_pointSize",set_content:"set_content",set_color:"set_color",get_numLines:"get_numLines"})});var y=i["ceramic.TextAlign"]={__ename__:"ceramic.TextAlign",__constructs__:null,LEFT:{_hx_name:"LEFT",_hx_index:0,__enum__:"ceramic.TextAlign",toString:$estr},RIGHT:{_hx_name:"RIGHT",_hx_index:1,__enum__:"ceramic.TextAlign",toString:$estr},CENTER:{_hx_name:"CENTER",_hx_index:2,__enum__:"ceramic.TextAlign",toString:$estr}};y.__constructs__=[y.LEFT,y.RIGHT,y.CENTER];var ceramic_TextAsset=function(n,e){this.unobservedText=null,this.textAutoruns=null,ceramic_Asset.call(this,"text",n,e)};t["ceramic.TextAsset"]=ceramic_TextAsset,ceramic_TextAsset.__name__="ceramic.TextAsset",ceramic_TextAsset.__super__=ceramic_Asset,ceramic_TextAsset.prototype=$extend(ceramic_Asset.prototype,{get_text:function(){if(null!=tracker_Autorun.current){var n=tracker_Autorun.current,e=this.textAutoruns;null==e?(e=tracker_Autorun.getAutorunArray(),this.textAutoruns=e,null!=e&&n.bindToAutorunArray(e)):n.bindToAutorunArray(e)}return this.unobservedText},set_text:function(n){var e=this.unobservedText;if(this.unobservedText=n,e==n)return n;this.observedDirty||(this.observedDirty=!0,this.emitObservedDirty(this,!1)),this.emitTextChange(n,e);var t=this.textAutoruns;if(null!=t){this.textAutoruns=null;for(var i=0,r=t.length;i<r;){var l=t[i++];if(null!=l&&!l.invalidated){l.invalidated=!0,l.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(l,l.run))}}tracker_Autorun.recycleAutorunArray(t)}return n},invalidateText:function(){var n=this.unobservedText;this.emitTextChange(n,n);var e=this.textAutoruns;if(null!=e){this.textAutoruns=null;for(var t=0,i=e.length;t<i;){var r=e[t++];if(null!=r&&!r.invalidated){r.invalidated=!0,r.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(r,r.run))}}tracker_Autorun.recycleAutorunArray(e)}},emitTextChange:function(n,e){var t=0;if(null!=this.__cbOnTextChange&&(t+=this.__cbOnTextChange.length),null!=this.__cbOnceTextChange&&(t+=this.__cbOnceTextChange.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnTextChange)for(var s=0,a=this.__cbOnTextChange.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnTextChange[o],++l):--t}if(null!=this.__cbOnceTextChange){var p=null,h=null;for(s=0,a=this.__cbOnceTextChange.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceTextChange[o],this.__cbOnceTextChange[o]=null;var u=this.__cbOnceOwnerUnbindTextChange[o];this.__cbOnceOwnerUnbindTextChange[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindTextChange[o]),h.push(this.__cbOnceTextChange[o])}this.__cbOnceOwnerUnbindTextChange=p,this.__cbOnceTextChange=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onTextChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event textChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTextChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindTextChange&&(this.__cbOnOwnerUnbindTextChange=[]),this.__cbOnOwnerUnbindTextChange.push(null);null==this.__cbOnTextChange&&(this.__cbOnTextChange=[]),this.__cbOnTextChange.push(e)},onceTextChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event textChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offTextChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindTextChange&&(this.__cbOnceOwnerUnbindTextChange=[]),this.__cbOnceOwnerUnbindTextChange.push(null);null==this.__cbOnceTextChange&&(this.__cbOnceTextChange=[]),this.__cbOnceTextChange.push(e)},offTextChange:function(n){if(null!=n){var e;null!=this.__cbOnTextChange&&-1!=(e=this.__cbOnTextChange.indexOf(n))&&(this.__cbOnTextChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindTextChange[e])&&l(),this.__cbOnOwnerUnbindTextChange.splice(e,1)),null!=this.__cbOnceTextChange&&-1!=(e=this.__cbOnceTextChange.indexOf(n))&&(this.__cbOnceTextChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindTextChange[e])&&l(),this.__cbOnceOwnerUnbindTextChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindTextChange){for(var t=0,i=this.__cbOnOwnerUnbindTextChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindTextChange[r])&&l()}this.__cbOnOwnerUnbindTextChange=null}if(null!=this.__cbOnceOwnerUnbindTextChange){for(t=0,i=this.__cbOnceOwnerUnbindTextChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindTextChange[r])&&l()}this.__cbOnceOwnerUnbindTextChange=null}this.__cbOnTextChange=null,this.__cbOnceTextChange=null}},listensTextChange:function(){return null!=this.__cbOnTextChange&&this.__cbOnTextChange.length>0||null!=this.__cbOnceTextChange&&this.__cbOnceTextChange.length>0},load:function(){var n=this;if(this.set_status(a.LOADING),null==this.path)return ceramic_App.app.logger.warning("Cannot load text asset if path is undefined.",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:20,className:"ceramic.TextAsset",methodName:"load"}),this.set_status(a.BROKEN),void this.emitComplete(!1);var e={};if(null!=this.owner&&(e.immediate=this.owner.immediate,e.loadMethod=this.owner.loadMethod),null!=this.options)for(var t=0,i=Reflect.fields(this.options);t<i.length;){var r=i[t];++t,e[r]=Reflect.field(this.options,r)}var l=this.path,s=ceramic_Assets.realAssetPath(l,this.runtimeAssets),o=ceramic_Assets.getReloadCount(s);o>0&&(s+="?hot="+o,l+="?hot="+o),ceramic_App.app.logger.info("Load text "+l,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:46,className:"ceramic.TextAsset",methodName:"load"}),ceramic_App.app.backend.texts.load(s,e,(function(e){null!=e?(n.set_text(e),n.set_status(a.READY),n.emitComplete(!0)):(n.set_status(a.BROKEN),ceramic_App.app.logger.error("Failed to load text at path: "+n.path,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:56,className:"ceramic.TextAsset",methodName:"load"}),n.emitComplete(!1))}))},assetFilesDidChange:function(n,e){var t=-1;Object.prototype.hasOwnProperty.call(e.h,this.path)&&(t=e.h[this.path]);var i=-1;Object.prototype.hasOwnProperty.call(n.h,this.path)&&(i=n.h[this.path]),i>t&&(ceramic_App.app.logger.info("Reload text (file has changed)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextAsset.hx",lineNumber:79,className:"ceramic.TextAsset",methodName:"assetFilesDidChange"}),this.load())},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Asset.prototype.destroy.call(this),this.set_text(null))},unbindEvents:function(){ceramic_Asset.prototype.unbindEvents.call(this),this.offTextChange()},__class__:ceramic_TextAsset,__properties__:$extend(ceramic_Asset.prototype.__properties__,{set_text:"set_text",get_text:"get_text"})});var ceramic_TextInput=function(){this.delegate=null,this.selectionEnd=-1,this.selectionStart=-1,this.text="",this.multiline=!1,this.allowMovingCursor=!1,this.invertedSelection=!1,this.rmetaPressed=!1,this.lmetaPressed=!1,this.rctrlPressed=!1,this.lctrlPressed=!1,this.rshiftPressed=!1,this.lshiftPressed=!1,this.explicitPosLine=0,this.explicitPosInLine=0,this.inputActive=!1};t["ceramic.TextInput"]=ceramic_TextInput,ceramic_TextInput.__name__="ceramic.TextInput",ceramic_TextInput.__interfaces__=[tracker_Events],ceramic_TextInput.prototype={emitUpdate:function(n){var e=0;if(null!=this.__cbOnUpdate&&(e+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(e+=this.__cbOnceUpdate.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnUpdate)for(var l=0,s=this.__cbOnUpdate.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnUpdate[a],++r):--e}if(null!=this.__cbOnceUpdate){var o=null,p=null;for(l=0,s=this.__cbOnceUpdate.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceUpdate[a],this.__cbOnceUpdate[a]=null;var h=this.__cbOnceOwnerUnbindUpdate[a];this.__cbOnceOwnerUnbindUpdate[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindUpdate[a]),p.push(this.__cbOnceUpdate[a])}this.__cbOnceOwnerUnbindUpdate=o,this.__cbOnceUpdate=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(e)},onceUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(e)},offUpdate:function(n){if(null!=n){var e;null!=this.__cbOnUpdate&&-1!=(e=this.__cbOnUpdate.indexOf(n))&&(this.__cbOnUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindUpdate[e])&&l(),this.__cbOnOwnerUnbindUpdate.splice(e,1)),null!=this.__cbOnceUpdate&&-1!=(e=this.__cbOnceUpdate.indexOf(n))&&(this.__cbOnceUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindUpdate[e])&&l(),this.__cbOnceOwnerUnbindUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindUpdate[r])&&l()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindUpdate[r])&&l()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&this.__cbOnUpdate.length>0||null!=this.__cbOnceUpdate&&this.__cbOnceUpdate.length>0},emitEnter:function(){var n=0;if(null!=this.__cbOnEnter&&(n+=this.__cbOnEnter.length),null!=this.__cbOnceEnter&&(n+=this.__cbOnceEnter.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnEnter)for(var r=0,l=this.__cbOnEnter.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnEnter[s],++i):--n}if(null!=this.__cbOnceEnter){var a=null,o=null;for(r=0,l=this.__cbOnceEnter.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceEnter[s],this.__cbOnceEnter[s]=null;var p=this.__cbOnceOwnerUnbindEnter[s];this.__cbOnceOwnerUnbindEnter[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindEnter[s]),o.push(this.__cbOnceEnter[s])}this.__cbOnceOwnerUnbindEnter=a,this.__cbOnceEnter=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onEnter:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event enter because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEnter(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindEnter&&(this.__cbOnOwnerUnbindEnter=[]),this.__cbOnOwnerUnbindEnter.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindEnter&&(this.__cbOnOwnerUnbindEnter=[]),this.__cbOnOwnerUnbindEnter.push(null);null==this.__cbOnEnter&&(this.__cbOnEnter=[]),this.__cbOnEnter.push(e)},onceEnter:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event enter because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEnter(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindEnter&&(this.__cbOnceOwnerUnbindEnter=[]),this.__cbOnceOwnerUnbindEnter.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindEnter&&(this.__cbOnceOwnerUnbindEnter=[]),this.__cbOnceOwnerUnbindEnter.push(null);null==this.__cbOnceEnter&&(this.__cbOnceEnter=[]),this.__cbOnceEnter.push(e)},offEnter:function(n){if(null!=n){var e;null!=this.__cbOnEnter&&-1!=(e=this.__cbOnEnter.indexOf(n))&&(this.__cbOnEnter.splice(e,1),null!=(l=this.__cbOnOwnerUnbindEnter[e])&&l(),this.__cbOnOwnerUnbindEnter.splice(e,1)),null!=this.__cbOnceEnter&&-1!=(e=this.__cbOnceEnter.indexOf(n))&&(this.__cbOnceEnter.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindEnter[e])&&l(),this.__cbOnceOwnerUnbindEnter.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindEnter){for(var t=0,i=this.__cbOnOwnerUnbindEnter.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindEnter[r])&&l()}this.__cbOnOwnerUnbindEnter=null}if(null!=this.__cbOnceOwnerUnbindEnter){for(t=0,i=this.__cbOnceOwnerUnbindEnter.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindEnter[r])&&l()}this.__cbOnceOwnerUnbindEnter=null}this.__cbOnEnter=null,this.__cbOnceEnter=null}},listensEnter:function(){return null!=this.__cbOnEnter&&this.__cbOnEnter.length>0||null!=this.__cbOnceEnter&&this.__cbOnceEnter.length>0},emitEscape:function(){var n=0;if(null!=this.__cbOnEscape&&(n+=this.__cbOnEscape.length),null!=this.__cbOnceEscape&&(n+=this.__cbOnceEscape.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnEscape)for(var r=0,l=this.__cbOnEscape.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnEscape[s],++i):--n}if(null!=this.__cbOnceEscape){var a=null,o=null;for(r=0,l=this.__cbOnceEscape.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceEscape[s],this.__cbOnceEscape[s]=null;var p=this.__cbOnceOwnerUnbindEscape[s];this.__cbOnceOwnerUnbindEscape[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindEscape[s]),o.push(this.__cbOnceEscape[s])}this.__cbOnceOwnerUnbindEscape=a,this.__cbOnceEscape=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onEscape:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event escape because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEscape(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindEscape&&(this.__cbOnOwnerUnbindEscape=[]),this.__cbOnOwnerUnbindEscape.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindEscape&&(this.__cbOnOwnerUnbindEscape=[]),this.__cbOnOwnerUnbindEscape.push(null);null==this.__cbOnEscape&&(this.__cbOnEscape=[]),this.__cbOnEscape.push(e)},onceEscape:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event escape because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEscape(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindEscape&&(this.__cbOnceOwnerUnbindEscape=[]),this.__cbOnceOwnerUnbindEscape.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindEscape&&(this.__cbOnceOwnerUnbindEscape=[]),this.__cbOnceOwnerUnbindEscape.push(null);null==this.__cbOnceEscape&&(this.__cbOnceEscape=[]),this.__cbOnceEscape.push(e)},offEscape:function(n){if(null!=n){var e;null!=this.__cbOnEscape&&-1!=(e=this.__cbOnEscape.indexOf(n))&&(this.__cbOnEscape.splice(e,1),null!=(l=this.__cbOnOwnerUnbindEscape[e])&&l(),this.__cbOnOwnerUnbindEscape.splice(e,1)),null!=this.__cbOnceEscape&&-1!=(e=this.__cbOnceEscape.indexOf(n))&&(this.__cbOnceEscape.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindEscape[e])&&l(),this.__cbOnceOwnerUnbindEscape.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindEscape){for(var t=0,i=this.__cbOnOwnerUnbindEscape.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindEscape[r])&&l()}this.__cbOnOwnerUnbindEscape=null}if(null!=this.__cbOnceOwnerUnbindEscape){for(t=0,i=this.__cbOnceOwnerUnbindEscape.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindEscape[r])&&l()}this.__cbOnceOwnerUnbindEscape=null}this.__cbOnEscape=null,this.__cbOnceEscape=null}},listensEscape:function(){return null!=this.__cbOnEscape&&this.__cbOnEscape.length>0||null!=this.__cbOnceEscape&&this.__cbOnceEscape.length>0},emitSelection:function(n,e){var t=0;if(null!=this.__cbOnSelection&&(t+=this.__cbOnSelection.length),null!=this.__cbOnceSelection&&(t+=this.__cbOnceSelection.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnSelection)for(var s=0,a=this.__cbOnSelection.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnSelection[o],++l):--t}if(null!=this.__cbOnceSelection){var p=null,h=null;for(s=0,a=this.__cbOnceSelection.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceSelection[o],this.__cbOnceSelection[o]=null;var u=this.__cbOnceOwnerUnbindSelection[o];this.__cbOnceOwnerUnbindSelection[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindSelection[o]),h.push(this.__cbOnceSelection[o])}this.__cbOnceOwnerUnbindSelection=p,this.__cbOnceSelection=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onSelection:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event selection because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offSelection(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindSelection&&(this.__cbOnOwnerUnbindSelection=[]),this.__cbOnOwnerUnbindSelection.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindSelection&&(this.__cbOnOwnerUnbindSelection=[]),this.__cbOnOwnerUnbindSelection.push(null);null==this.__cbOnSelection&&(this.__cbOnSelection=[]),this.__cbOnSelection.push(e)},onceSelection:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event selection because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offSelection(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindSelection&&(this.__cbOnceOwnerUnbindSelection=[]),this.__cbOnceOwnerUnbindSelection.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindSelection&&(this.__cbOnceOwnerUnbindSelection=[]),this.__cbOnceOwnerUnbindSelection.push(null);null==this.__cbOnceSelection&&(this.__cbOnceSelection=[]),this.__cbOnceSelection.push(e)},offSelection:function(n){if(null!=n){var e;null!=this.__cbOnSelection&&-1!=(e=this.__cbOnSelection.indexOf(n))&&(this.__cbOnSelection.splice(e,1),null!=(l=this.__cbOnOwnerUnbindSelection[e])&&l(),this.__cbOnOwnerUnbindSelection.splice(e,1)),null!=this.__cbOnceSelection&&-1!=(e=this.__cbOnceSelection.indexOf(n))&&(this.__cbOnceSelection.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindSelection[e])&&l(),this.__cbOnceOwnerUnbindSelection.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindSelection){for(var t=0,i=this.__cbOnOwnerUnbindSelection.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindSelection[r])&&l()}this.__cbOnOwnerUnbindSelection=null}if(null!=this.__cbOnceOwnerUnbindSelection){for(t=0,i=this.__cbOnceOwnerUnbindSelection.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindSelection[r])&&l()}this.__cbOnceOwnerUnbindSelection=null}this.__cbOnSelection=null,this.__cbOnceSelection=null}},listensSelection:function(){return null!=this.__cbOnSelection&&this.__cbOnSelection.length>0||null!=this.__cbOnceSelection&&this.__cbOnceSelection.length>0},emitStop:function(){var n=0;if(null!=this.__cbOnStop&&(n+=this.__cbOnStop.length),null!=this.__cbOnceStop&&(n+=this.__cbOnceStop.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnStop)for(var r=0,l=this.__cbOnStop.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnStop[s],++i):--n}if(null!=this.__cbOnceStop){var a=null,o=null;for(r=0,l=this.__cbOnceStop.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceStop[s],this.__cbOnceStop[s]=null;var p=this.__cbOnceOwnerUnbindStop[s];this.__cbOnceOwnerUnbindStop[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindStop[s]),o.push(this.__cbOnceStop[s])}this.__cbOnceOwnerUnbindStop=a,this.__cbOnceStop=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onStop:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event stop because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStop(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindStop&&(this.__cbOnOwnerUnbindStop=[]),this.__cbOnOwnerUnbindStop.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindStop&&(this.__cbOnOwnerUnbindStop=[]),this.__cbOnOwnerUnbindStop.push(null);null==this.__cbOnStop&&(this.__cbOnStop=[]),this.__cbOnStop.push(e)},onceStop:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event stop because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStop(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindStop&&(this.__cbOnceOwnerUnbindStop=[]),this.__cbOnceOwnerUnbindStop.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindStop&&(this.__cbOnceOwnerUnbindStop=[]),this.__cbOnceOwnerUnbindStop.push(null);null==this.__cbOnceStop&&(this.__cbOnceStop=[]),this.__cbOnceStop.push(e)},offStop:function(n){if(null!=n){var e;null!=this.__cbOnStop&&-1!=(e=this.__cbOnStop.indexOf(n))&&(this.__cbOnStop.splice(e,1),null!=(l=this.__cbOnOwnerUnbindStop[e])&&l(),this.__cbOnOwnerUnbindStop.splice(e,1)),null!=this.__cbOnceStop&&-1!=(e=this.__cbOnceStop.indexOf(n))&&(this.__cbOnceStop.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindStop[e])&&l(),this.__cbOnceOwnerUnbindStop.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindStop){for(var t=0,i=this.__cbOnOwnerUnbindStop.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindStop[r])&&l()}this.__cbOnOwnerUnbindStop=null}if(null!=this.__cbOnceOwnerUnbindStop){for(t=0,i=this.__cbOnceOwnerUnbindStop.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindStop[r])&&l()}this.__cbOnceOwnerUnbindStop=null}this.__cbOnStop=null,this.__cbOnceStop=null}},listensStop:function(){return null!=this.__cbOnStop&&this.__cbOnStop.length>0||null!=this.__cbOnceStop&&this.__cbOnceStop.length>0},start:function(n,e,t,i,r,l,s,a,o,p){null==o&&(o=!1),null==a&&(a=-1),null==s&&(s=-1),null==l&&(l=!1),this.inputActive&&this.stop(),this.inputActive=!0,this.set_text(n),this.multiline=l,this.allowMovingCursor=o,this.delegate=p,this.explicitPosInLine=0,this.explicitPosLine=0,this.invertedSelection=!1,s<0&&(s=n.length),a<s&&(a=s),this.selectionStart=s,this.selectionEnd=a,ceramic_App.app.backend.textInput.start(n,e,t,i,r),this.emitUpdate(n),this.emitSelection(s,a)},stop:function(){this.inputActive&&(this.inputActive=!1,this.selectionStart=-1,this.selectionEnd=-1,this.invertedSelection=!1,this.delegate=null,ceramic_App.app.backend.textInput.stop(),this.emitStop())},updateSelection:function(n,e,t){this.selectionStart==n&&this.selectionEnd==e||(this.selectionStart=n,this.selectionEnd=e,null!=t&&(this.invertedSelection=t),this.emitSelection(n,e))},appendText:function(n){if(!this.lctrlPressed&&!this.rctrlPressed){var e="";this.selectionStart>0&&(e+=this.text.substring(0,this.selectionStart)),e+=n,e+=this.text.substring(this.selectionEnd),this.selectionStart+=n.length,this.selectionEnd=this.selectionStart,this.invertedSelection=!1,this.set_text(e),this.emitUpdate(this.text),this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)}},space:function(){this.appendText(" ")},backspace:function(){var n=this.selectionEnd>this.selectionStart,e="";this.selectionStart>1&&(e+=this.text.substring(0,n?this.selectionStart:this.selectionStart-1)),e+=this.text.substring(this.selectionEnd),this.selectionStart>0&&!n&&this.selectionStart--,this.selectionEnd=this.selectionStart,this.set_text(e),this.emitUpdate(this.text),this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)},moveLeft:function(){this.allowMovingCursor&&(this.lshiftPressed||this.rshiftPressed?this.invertedSelection?(this.selectionStart>0&&(this.selectionStart--,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):this.selectionEnd>this.selectionStart?(this.selectionEnd--,this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd)):(this.selectionStart>0&&(this.invertedSelection=!0,this.selectionStart--,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):(this.invertedSelection=!1,this.selectionEnd>this.selectionStart?(this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionStart>0&&(this.selectionStart--,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)))},moveRight:function(){if(this.allowMovingCursor)if(this.lshiftPressed||this.rshiftPressed){var n=this.text.length;this.selectionStart==this.selectionEnd?(this.invertedSelection=!1,this.selectionEnd<n&&(this.selectionEnd++,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd)):this.invertedSelection?(this.selectionStart++,this.emitSelection(this.selectionStart,this.selectionEnd),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)):(this.selectionEnd<n&&(this.selectionEnd++,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionEnd),this.explicitPosLine=this.lineForPos(this.selectionEnd))}else this.invertedSelection=!1,this.selectionEnd>this.selectionStart?(this.selectionStart=this.selectionEnd,this.emitSelection(this.selectionStart,this.selectionEnd)):this.selectionStart<this.text.length&&(this.selectionStart++,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)),this.explicitPosInLine=this.posInCurrentLine(this.selectionStart),this.explicitPosLine=this.lineForPos(this.selectionStart)},moveUp:function(){if(this.allowMovingCursor)if(this.lshiftPressed||this.rshiftPressed){var n=this.lineForPos(this.selectionStart),e=this.lineForPos(this.selectionEnd);if(!this.invertedSelection&&e>n){var t=this.explicitPosInLine,i=e;null!=this.delegate&&(t=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,i-1));var r=this.globalPosForLine(i-1,t);this.selectionEnd=0|Math.max(this.selectionStart,r),this.emitSelection(this.selectionStart,this.selectionEnd)}else if(this.selectionStart>0){if(this.invertedSelection=!0,n>0){t=this.explicitPosInLine,i=n;null!=this.delegate&&(t=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,i-1)),this.selectionStart=this.globalPosForLine(i-1,t)}else this.selectionStart=0;this.emitSelection(this.selectionStart,this.selectionEnd)}}else{if(this.invertedSelection=!1,this.selectionStart>0)if((i=this.lineForPos(this.selectionStart))>0){t=this.explicitPosInLine;null!=this.delegate&&(t=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,i-1)),this.selectionStart=this.globalPosForLine(i-1,t),this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)}else this.selectionStart=0,this.selectionEnd=0,this.emitSelection(this.selectionStart,this.selectionEnd);else this.selectionStart=0,this.selectionEnd=0,this.emitSelection(this.selectionStart,this.selectionEnd)}},moveDown:function(){if(this.allowMovingCursor){var n=this.text.length;if(this.lshiftPressed||this.rshiftPressed){var e=this.lineForPos(this.selectionStart),t=this.lineForPos(this.selectionEnd);if(this.invertedSelection){if(this.invertedSelection)if(t>e){r=this.explicitPosInLine,l=e;null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1));var i=this.globalPosForLine(l+1,r);this.selectionStart=0|Math.min(this.selectionEnd,i),this.emitSelection(this.selectionStart,this.selectionEnd)}else if(this.selectionEnd<n-1){this.invertedSelection=!1;l=e,s=this.numLines(),r=this.explicitPosInLine;l<s-1?(null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),this.selectionEnd=this.globalPosForLine(l+1,r)):this.selectionEnd=n,this.emitSelection(this.selectionStart,this.selectionEnd)}else this.selectionEnd<n&&(this.invertedSelection=!1,this.selectionEnd=n,this.emitSelection(this.selectionStart,this.selectionEnd))}else if(this.selectionEnd<n-1){var r=this.explicitPosInLine;(l=t)<(s=this.numLines())-1?(null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),this.selectionEnd=this.globalPosForLine(l+1,r)):this.selectionEnd=n,this.emitSelection(this.selectionStart,this.selectionEnd)}else this.selectionEnd<n&&(this.selectionEnd=n,this.emitSelection(this.selectionStart,this.selectionEnd))}else{var l,s;if(this.invertedSelection=!1,this.selectionEnd<n-1)if((l=this.lineForPos(this.selectionEnd))<(s=this.numLines())-1){r=this.explicitPosInLine;null!=this.delegate&&(r=this.delegate.textInputClosestPositionInLine(this.explicitPosInLine,this.explicitPosLine,l+1)),this.selectionStart=this.globalPosForLine(l+1,r),this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)}else this.selectionStart=n,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd);else this.selectionStart=n,this.selectionEnd=this.selectionStart,this.emitSelection(this.selectionStart,this.selectionEnd)}}},enter:function(){this.emitEnter(),this.inputActive&&this.multiline&&this.appendText("\n")},escape:function(){this.emitEscape(),this.stop()},lshiftDown:function(){this.lshiftPressed=!0},lshiftUp:function(){this.lshiftPressed=!1},rshiftDown:function(){this.rshiftPressed=!0},rshiftUp:function(){this.rshiftPressed=!1},lctrlDown:function(){this.lctrlPressed=!0},lctrlUp:function(){this.lctrlPressed=!1},rctrlDown:function(){this.rctrlPressed=!0},rctrlUp:function(){this.rctrlPressed=!1},lmetaDown:function(){this.lmetaPressed=!0},lmetaUp:function(){this.lmetaPressed=!1},rmetaDown:function(){this.rmetaPressed=!0},rmetaUp:function(){this.rmetaPressed=!1},posInCurrentLine:function(n){if(null!=this.delegate)return this.delegate.textInputPosInLineForIndex(n);for(var e=this.text,t=0;n>0;){if("\n"==e.charAt(n)&&t>0){--t;break}--n,++t}return t},lineForPos:function(n){if(null!=this.delegate)return this.delegate.textInputLineForIndex(n);for(var e=this.text,t=0,i=0;i<n;){"\n"==e.charAt(i)&&++t,++i}return t},numLines:function(){return null!=this.delegate?this.delegate.textInputNumberOfLines():this.text.split("\n").length},globalPosForLine:function(n,e){if(null!=this.delegate)return this.delegate.textInputIndexForPosInLine(n,e);for(var t=this.text,i=0,r=t.length,l=0;i<r;){var s=t.charAt(i);if(l==n){if(!(e>0))break;if("\n"==s)break;--e}else"\n"==s&&++l;++i}return i},set_text:function(n){if(this.text==n)return n;this.text=n;var e=n.length,t=this.selectionStart,i=this.selectionEnd;return i>e&&(i=e),t>i&&(t=i),this.updateSelection(t,i),n},unbindEvents:function(){this.offUpdate(),this.offEnter(),this.offEscape(),this.offSelection(),this.offStop()},__class__:ceramic_TextInput,__properties__:{set_text:"set_text"}};var ceramic_TextInputDelegate=function(){};t["ceramic.TextInputDelegate"]=ceramic_TextInputDelegate,ceramic_TextInputDelegate.__name__="ceramic.TextInputDelegate",ceramic_TextInputDelegate.__isInterface__=!0,ceramic_TextInputDelegate.prototype={__class__:ceramic_TextInputDelegate};var ceramic_TextureAtlas=function(){this.asset=null,this.regions=[],this.pages=[],ceramic_Entity.call(this)};t["ceramic.TextureAtlas"]=ceramic_TextureAtlas,ceramic_TextureAtlas.__name__="ceramic.TextureAtlas",ceramic_TextureAtlas.__super__=ceramic_Entity,ceramic_TextureAtlas.prototype=$extend(ceramic_Entity.prototype,{region:function(n){for(var e=0,t=this.regions.length;e<t;){var i=e++,r=this.regions[i];if(r.name==n)return r}return null},computeFrames:function(){for(var n=0,e=this.regions.length;n<e;){var t=n++;this.regions[t].computeFrame()}},destroy:function(){if(!(this._lifecycleState<=-2)){for(this._lifecycleState=-2;this.pages.length>0;){var n=this.pages.pop().texture;null!=n&&n.destroy()}null!=this.asset&&this.asset.destroy(),this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this)}},__class__:ceramic_TextureAtlas});var ceramic_TextureAtlasPage=function(n,e,t,i,r){this.texture=null,this.filter=v.LINEAR,this.height=0,this.width=0,this.name=n,null!=e&&(this.width=e),null!=t&&(this.height=t),null!=i&&(this.filter=i),null!=r&&(this.texture=r)};t["ceramic.TextureAtlasPage"]=ceramic_TextureAtlasPage,ceramic_TextureAtlasPage.__name__="ceramic.TextureAtlasPage",ceramic_TextureAtlasPage.prototype={set_filter:function(n){return this.filter!=n&&(this.filter=n,null!=this.texture&&this.texture.set_filter(n)),n},set_texture:function(n){return this.texture!=n&&(this.texture=n,null!=n&&(this.width<=0&&(this.width=n.backendItem.width),this.height<=0&&(this.height=n.backendItem.height))),n},__class__:ceramic_TextureAtlasPage,__properties__:{set_texture:"set_texture",set_filter:"set_filter"}};var ceramic_TextureAtlasParser=function(){};t["ceramic.TextureAtlasParser"]=ceramic_TextureAtlasParser,ceramic_TextureAtlasParser.__name__="ceramic.TextureAtlasParser",ceramic_TextureAtlasParser.parse=function(n){if(StringTools.startsWith(StringTools.trim(n),"<"))try{n=ceramic_TextureAtlasParser.convertXmlTextureAtlas(n)}catch(n){var e=haxe_Exception.caught(n).unwrap();throw haxe_Exception.thrown("TextureAtlas: invalid xml atlas data specified for parser: "+Std.string(e))}for(var t=new ceramic__$TextureAtlasParser_TextureAtlasReader(n),i=[null,null,null,null],r=null,l=new ceramic_TextureAtlas;;){var s=t.readLine();if(null==s)break;if(0==(s=t.trim(s)).length)r=null;else if(null==r){r=new ceramic_TextureAtlasPage(s,null,null,null,null);for(var a=t.nextLineKey();null!=a;){switch(a){case"filter":t.readTuple(i),r.set_filter(null!=i[0]&&"nearest"==i[0].toLowerCase()?v.NEAREST:v.LINEAR);break;case"size":t.readTuple(i),r.width=Std.parseInt(i[0]),r.height=Std.parseInt(i[1]);break;default:t.readLine()}a=t.nextLineKey()}l.pages.push(r)}else{var o=s,p=o.toLowerCase();StringTools.endsWith(p,".png")||StringTools.endsWith(p,".gif")||StringTools.endsWith(p,".jpg")?o=HxOverrides.substr(o,0,o.length-4):StringTools.endsWith(p,".jpeg")&&(o=HxOverrides.substr(o,0,o.length-5));for(var h=new ceramic_TextureAtlasRegion(o,l,l.pages.length-1),u=0,_=0,c=0,d=0,f=0,x=0,b=t.nextLineKey();null!=b;){switch(b){case"bounds":t.readTuple(i),u=Std.parseInt(i[0]),_=Std.parseInt(i[1]),c=Std.parseInt(i[2]),d=Std.parseInt(i[3]);break;case"offset":t.readTuple(i),h.offsetX=Std.parseInt(i[0]),h.offsetY=Std.parseInt(i[1]);break;case"offsets":t.readTuple(i),h.offsetX=Std.parseInt(i[0]),h.offsetY=Std.parseInt(i[1]),f=Std.parseInt(i[2]),x=Std.parseInt(i[3]);break;case"orig":t.readTuple(i),f=Std.parseInt(i[0]),x=Std.parseInt(i[1]);break;case"rotate":var y=t.readValue();h.rotateFrame="true"==y||"90"==y;break;case"size":t.readTuple(i),c=Std.parseInt(i[0]),d=Std.parseInt(i[1]);break;case"xy":t.readTuple(i),u=Std.parseInt(i[0]),_=Std.parseInt(i[1]);break;default:t.readLine()}b=t.nextLineKey()}h.x=u,h.y=_,h.width=0|Math.abs(c),h.height=0|Math.abs(d),h.originalWidth=0!=f?f:h.width,h.originalHeight=0!=x?x:h.height,h.rotateFrame?(h.packedWidth=h.height,h.packedHeight=h.width):(h.packedWidth=h.width,h.packedHeight=h.height)}}return l},ceramic_TextureAtlasParser.convertXmlTextureAtlas=function(n){var e="",t=Xml.parse(n).firstElement();e+=Std.string(t.get("imagePath")),e+="\n";for(var i=t.elements();i.hasNext();){var r=i.next();if(r.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==r.nodeType?"null":l.toString(r.nodeType)));"SubTexture"==r.nodeName&&(e+=Std.string(r.get("name")),e+="\n",r.exists("frameX")&&r.exists("frameY")&&r.exists("frameWidth")&&r.exists("frameHeight")&&(e+="offsets:",e+=Std.string(-parseFloat(r.get("frameX"))),e+=",",e+=Std.string(-parseFloat(r.get("frameY"))),e+=",",e+=Std.string(parseFloat(r.get("frameWidth"))),e+=",",e+=Std.string(parseFloat(r.get("frameHeight"))),e+="\n"),e+="bounds:",e+=Std.string(parseFloat(r.get("x"))),e+=",",e+=Std.string(parseFloat(r.get("y"))),e+=",",e+=Std.string(parseFloat(r.get("width"))),e+=",",e+=Std.string(parseFloat(r.get("height"))),e+="\n",r.exists("rotate")&&(e+="rotate:",e+=Std.string(r.get("rotate"))))}return e};var ceramic__$TextureAtlasParser_TextureAtlasReader=function(n){this.lines=StringTools.replace(StringTools.replace(StringTools.trim(n),"\r\n","\n"),"\r","\n").split("\n"),this.index=0};t["ceramic._TextureAtlasParser.TextureAtlasReader"]=ceramic__$TextureAtlasParser_TextureAtlasReader,ceramic__$TextureAtlasParser_TextureAtlasReader.__name__="ceramic._TextureAtlasParser.TextureAtlasReader",ceramic__$TextureAtlasParser_TextureAtlasReader.prototype={trim:function(n){return StringTools.trim(n)},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},nextLineKey:function(){if(this.index>=this.lines.length)return null;var n=this.lines[this.index],e=n.indexOf(":");return-1!=e?StringTools.trim(n.substring(0,e)):null},readValue:function(){var n=this.readLine(),e=n.indexOf(":");if(-1==e)throw haxe_Exception.thrown("Invalid line: "+n);return this.trim(n.substring(e+1))},readTuple:function(n){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw haxe_Exception.thrown("Invalid line: "+e);for(var i=0,r=t+1;i<3;){var l=e.indexOf(",",r);if(-1==l)break;n[i]=this.trim(HxOverrides.substr(e,r,l-r)),r=l+1,++i}return n[i]=this.trim(e.substring(r)),i+1},__class__:ceramic__$TextureAtlasParser_TextureAtlasReader};var ceramic_TextureTile=function(n,e,t,i,r,l,s){null==s&&(s=0),null==l&&(l=!1),this.texture=n,this.frameX=e,this.frameY=t,this.frameWidth=i,this.frameHeight=r,this.rotateFrame=l,this.edgeInset=s};t["ceramic.TextureTile"]=ceramic_TextureTile,ceramic_TextureTile.__name__="ceramic.TextureTile",ceramic_TextureTile.prototype={toString:function(){return""+Std.string({texture:this.texture,frameX:this.frameX,frameY:this.frameY,frameWidth:this.frameWidth,frameHeight:this.frameHeight})},__class__:ceramic_TextureTile};var ceramic_TextureAtlasRegion=function(n,e,t){this.originalHeight=0,this.originalWidth=0,this.offsetY=0,this.offsetX=0,this.height=0,this.width=0,this.y=0,this.x=0,this.packedHeight=0,this.packedWidth=0,this.page=0,this.atlas=null,this.name=null,this.name=n,this.atlas=e,this.page=t;var i=e.pages[t];ceramic_TextureTile.call(this,null!=i?i.texture:null,0,0,0,0,!1,0),e.regions.push(this)};t["ceramic.TextureAtlasRegion"]=ceramic_TextureAtlasRegion,ceramic_TextureAtlasRegion.__name__="ceramic.TextureAtlasRegion",ceramic_TextureAtlasRegion.__super__=ceramic_TextureTile,ceramic_TextureAtlasRegion.prototype=$extend(ceramic_TextureTile.prototype,{frame:function(n,e,t,i){this.frameX=n,this.frameY=e,this.frameWidth=t,this.frameHeight=i},computeFrame:function(){var n=this.atlas.pages[this.page];if(null!=n)if(this.texture=n.texture,null!=this.texture){var e=n.width,t=n.height,i=this.texture.width/e,r=this.texture.height/t;this.frameX=this.x*i,this.frameY=this.y*r,this.frameWidth=this.width*i,this.frameHeight=this.height*r}else ceramic_App.app.logger.warning("Failed to compute region frame because there is no texture at page "+this.page,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextureAtlasRegion.hx",lineNumber:82,className:"ceramic.TextureAtlasRegion",methodName:"computeFrame"});else ceramic_App.app.logger.warning("Failed to compute region frame because there is no page "+this.page,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextureAtlasRegion.hx",lineNumber:86,className:"ceramic.TextureAtlasRegion",methodName:"computeFrame"})},toString:function(){return""+Std.string({name:this.name,page:this.page,texture:this.texture,packedWidth:this.packedWidth,packedHeight:this.packedHeight,originalWidth:this.originalWidth,originalHeight:this.originalHeight,width:this.width,height:this.height,offsetX:this.offsetX,offsetY:this.offsetY,frameX:this.frameX,frameY:this.frameY,frameWidth:this.frameWidth,frameHeight:this.frameHeight})},__class__:ceramic_TextureAtlasRegion});var v=i["ceramic.TextureFilter"]={__ename__:"ceramic.TextureFilter",__constructs__:null,LINEAR:{_hx_name:"LINEAR",_hx_index:0,__enum__:"ceramic.TextureFilter",toString:$estr},NEAREST:{_hx_name:"NEAREST",_hx_index:1,__enum__:"ceramic.TextureFilter",toString:$estr}};v.__constructs__=[v.LINEAR,v.NEAREST];var ceramic_TextureTilePacker=function(n,e,t,i,r,l){null==l&&(l=1),null==r&&(r=16),null==i&&(i=16),null==t&&(t=-1),null==e&&(e=-1),this.maxPixelTextureHeight=0,this.maxPixelTextureWidth=0,this.numRows=0,this.numCols=0,this.nextPacker=null,ceramic_Entity.call(this),this.padWidth=i,this.padHeight=r,this.margin=l,this.maxPixelTextureWidth=e,this.maxPixelTextureHeight=t,-1==e&&(e=2048/ceramic_App.app.screen.get_texturesDensity()|0),-1==t&&(t=2048/ceramic_App.app.screen.get_texturesDensity()|0);var s=0|Math.min(e,2048/ceramic_App.app.screen.get_texturesDensity()),a=0|Math.min(t,2048/ceramic_App.app.screen.get_texturesDensity());this.texture=new ceramic_RenderTexture(s,a),n?(this.texture.autoRender=!0,this.texture.clearOnRender=!0):(this.texture.autoRender=!1,this.texture.clearOnRender=!1),this.areas=[];for(var o=this.texture.width,p=this.texture.height,h=l,u=l;u+r<p;){for(;h+i<o;)this.areas.push(null),h+=i+2*l,0==this.numRows&&this.numCols++;h=0,u+=r+2*l,this.numRows++}};t["ceramic.TextureTilePacker"]=ceramic_TextureTilePacker,ceramic_TextureTilePacker.__name__="ceramic.TextureTilePacker",ceramic_TextureTilePacker.__super__=ceramic_Entity,ceramic_TextureTilePacker.prototype=$extend(ceramic_Entity.prototype,{destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this),null!=this.nextPacker&&(this.nextPacker.destroy(),this.nextPacker=null),this.texture.destroy(),this.texture=null,this.areas=null)},getTileAtPosition:function(n,e){return this.areas[e*this.numCols+n]},setTileAtPosition:function(n,e,t){this.areas[e*this.numCols+n]=t},allocTile:function(n,e){this.texture.width,this.texture.height;var t=this.padWidth+2*this.margin,i=this.padHeight+2*this.margin,r=t*this.numCols-2*this.margin,l=i*this.numRows-2*this.margin;if(n>r||e>l)return ceramic_App.app.logger.warning("Cannot alloc tile of "+n+" x "+e+" because this is bigger than "+r+" x "+l,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:123,className:"ceramic.TextureTilePacker",methodName:"allocTile"}),null;for(var s=this.padWidth,a=1;s<n;)++a,s+=this.padWidth+2*this.margin;for(var o=this.padHeight,p=1;o<e;)++p,o+=this.padHeight+2*this.margin;for(var h=0,u=this.numRows-p+1;h<u;)for(var _=h++,c=0,d=this.numCols-a+1;c<d;){for(var f=c++,x=!0,b=_,y=_+p;b<y;){for(var v=b++,m=f,g=f+a;m<g;){var z=m++;if(null!=this.areas[v*this.numCols+z]){x=!1;break}}if(!x)break}if(x){var w=new ceramic__$TextureTilePacker_PackedTextureTile(this.texture,f*t,_*i,n,e);w.col=f,w.row=_,w.usedCols=a,w.usedRows=p;for(var O=_,C=_+p;O<C;)for(var E=O++,U=f,M=f+a;U<M;){var T=U++;this.areas[E*this.numCols+T]=w}return w}}return null==this.nextPacker&&(this.nextPacker=new ceramic_TextureTilePacker(this.texture.autoRender,this.maxPixelTextureWidth,this.maxPixelTextureHeight,this.padWidth,this.padHeight,this.margin)),this.nextPacker.allocTile(n,e)},releaseTile:function(n){var e=this;if(ceramic_App.app.logger.info("release tile "+Std.string(n),{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:198,className:"ceramic.TextureTilePacker",methodName:"releaseTile"}),!(n instanceof ceramic__$TextureTilePacker_PackedTextureTile))throw haxe_Exception.thrown("Cannot release tile: "+Std.string(n)+".");for(var t=n,i=this;null!=i&&i.texture!=t.texture;)i=i.nextPacker;null!=i?ceramic_App.app.onceUpdate(this,(function(n){ceramic_App.app.onceUpdate(e,(function(n){for(var e=!1,r=t.row,l=t.row+t.usedRows;r<l;)for(var s=r++,a=t.col,o=t.col+t.usedCols;a<o;){var p=a++;i.areas[s*i.numCols+p]==t&&(e=!0,i.areas[s*i.numCols+p]=null)}t.texture=null,e||ceramic_App.app.logger.warning("Failed to release tile: "+Std.string(t)+" (did not find it)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:234,className:"ceramic.TextureTilePacker",methodName:"releaseTile"})}))})):ceramic_App.app.logger.warning("Failed to release tile: "+Std.string(t)+" (it doesn't belong to this packer)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TextureTilePacker.hx",lineNumber:213,className:"ceramic.TextureTilePacker",methodName:"releaseTile"})},stamp:function(n,e,t){var i=new ceramic_Quad;i.set_anchorX(0),i.set_anchorY(0);var r=n.frameHeight+2*this.margin;i.set_width(n.frameWidth+2*this.margin),i.set_height(r);var l=n.frameY-this.margin;if(i.set_x(n.frameX-this.margin),i.set_y(l),i.set_blending(4),0!=i.inheritAlpha&&(i.inheritAlpha=!1,i.visibilityDirty=!0,null!=i.children))for(var s=0,a=i.children.length;s<a;){var o=s++,p=i.children[o];if(p.visibilityDirty=!0,null!=p.children)for(var h=0,u=p.children.length;h<u;){var _=h++;p.children[_].set_visibilityDirty(!0)}}i.set_alpha(0),i.color=16777215;var c=e.transform,d=e.parent;null!=d&&d.remove(e),i.add(e),e.set_transform(new ceramic_Transform);var f=e.transform;f.tx+=this.margin,f.ty+=this.margin,f.changedDirty=!0,n.texture.stamp(i,(function(){i.remove(e),null!=d&&d.add(e),i.destroy(),i=null,e.set_transform(c),e=null,t(),t=null}))},managesTexture:function(n){return this.texture==n||null!=this.nextPacker&&this.nextPacker.managesTexture(n)},__class__:ceramic_TextureTilePacker});var ceramic__$TextureTilePacker_PackedTextureTile=function(n,e,t,i,r){this.usedRows=1,this.usedCols=1,this.row=-1,this.col=-1,ceramic_TextureTile.call(this,n,e,t,i,r)};t["ceramic._TextureTilePacker.PackedTextureTile"]=ceramic__$TextureTilePacker_PackedTextureTile,ceramic__$TextureTilePacker_PackedTextureTile.__name__="ceramic._TextureTilePacker.PackedTextureTile",ceramic__$TextureTilePacker_PackedTextureTile.__super__=ceramic_TextureTile,ceramic__$TextureTilePacker_PackedTextureTile.prototype=$extend(ceramic_TextureTile.prototype,{__class__:ceramic__$TextureTilePacker_PackedTextureTile});var ceramic_Timeline=function(){this.initializerName=null,this.completeHandlerIndexes=null,this.completeHandlers=null,this.endPosition=-1,this.startPosition=-1,this.labelIndexes=null,this.labels=null,this.paused=!1,this.tracks=[],this.position=0,this.fps=30,this.autoUpdate=!0,this.loop=!0,this.autoFitSize=!0,this.size=0,ceramic_Entity.call(this),ceramic_App.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&ceramic_App.app.onPreUpdate(this,$bind(this,this.update))};t["ceramic.Timeline"]=ceramic_Timeline,ceramic_Timeline.__name__="ceramic.Timeline",ceramic_Timeline.__interfaces__=[ceramic_Component],ceramic_Timeline.__super__=ceramic_Entity,ceramic_Timeline.prototype=$extend(ceramic_Entity.prototype,{emitStartLabel:function(n,e){var t=0;if(null!=this.__cbOnStartLabel&&(t+=this.__cbOnStartLabel.length),null!=this.__cbOnceStartLabel&&(t+=this.__cbOnceStartLabel.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnStartLabel)for(var s=0,a=this.__cbOnStartLabel.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnStartLabel[o],++l):--t}if(null!=this.__cbOnceStartLabel){var p=null,h=null;for(s=0,a=this.__cbOnceStartLabel.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceStartLabel[o],this.__cbOnceStartLabel[o]=null;var u=this.__cbOnceOwnerUnbindStartLabel[o];this.__cbOnceOwnerUnbindStartLabel[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindStartLabel[o]),h.push(this.__cbOnceStartLabel[o])}this.__cbOnceOwnerUnbindStartLabel=p,this.__cbOnceStartLabel=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onStartLabel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event startLabel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStartLabel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindStartLabel&&(this.__cbOnOwnerUnbindStartLabel=[]),this.__cbOnOwnerUnbindStartLabel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindStartLabel&&(this.__cbOnOwnerUnbindStartLabel=[]),this.__cbOnOwnerUnbindStartLabel.push(null);null==this.__cbOnStartLabel&&(this.__cbOnStartLabel=[]),this.__cbOnStartLabel.push(e)},onceStartLabel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event startLabel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offStartLabel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindStartLabel&&(this.__cbOnceOwnerUnbindStartLabel=[]),this.__cbOnceOwnerUnbindStartLabel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindStartLabel&&(this.__cbOnceOwnerUnbindStartLabel=[]),this.__cbOnceOwnerUnbindStartLabel.push(null);null==this.__cbOnceStartLabel&&(this.__cbOnceStartLabel=[]),this.__cbOnceStartLabel.push(e)},offStartLabel:function(n){if(null!=n){var e;null!=this.__cbOnStartLabel&&-1!=(e=this.__cbOnStartLabel.indexOf(n))&&(this.__cbOnStartLabel.splice(e,1),null!=(l=this.__cbOnOwnerUnbindStartLabel[e])&&l(),this.__cbOnOwnerUnbindStartLabel.splice(e,1)),null!=this.__cbOnceStartLabel&&-1!=(e=this.__cbOnceStartLabel.indexOf(n))&&(this.__cbOnceStartLabel.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindStartLabel[e])&&l(),this.__cbOnceOwnerUnbindStartLabel.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindStartLabel){for(var t=0,i=this.__cbOnOwnerUnbindStartLabel.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindStartLabel[r])&&l()}this.__cbOnOwnerUnbindStartLabel=null}if(null!=this.__cbOnceOwnerUnbindStartLabel){for(t=0,i=this.__cbOnceOwnerUnbindStartLabel.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindStartLabel[r])&&l()}this.__cbOnceOwnerUnbindStartLabel=null}this.__cbOnStartLabel=null,this.__cbOnceStartLabel=null}},listensStartLabel:function(){return null!=this.__cbOnStartLabel&&this.__cbOnStartLabel.length>0||null!=this.__cbOnceStartLabel&&this.__cbOnceStartLabel.length>0},emitEndLabel:function(n,e){var t=0;if(null!=this.__cbOnEndLabel&&(t+=this.__cbOnEndLabel.length),null!=this.__cbOnceEndLabel&&(t+=this.__cbOnceEndLabel.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnEndLabel)for(var s=0,a=this.__cbOnEndLabel.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnEndLabel[o],++l):--t}if(null!=this.__cbOnceEndLabel){var p=null,h=null;for(s=0,a=this.__cbOnceEndLabel.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceEndLabel[o],this.__cbOnceEndLabel[o]=null;var u=this.__cbOnceOwnerUnbindEndLabel[o];this.__cbOnceOwnerUnbindEndLabel[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindEndLabel[o]),h.push(this.__cbOnceEndLabel[o])}this.__cbOnceOwnerUnbindEndLabel=p,this.__cbOnceEndLabel=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}this.didEmitEndLabel(n,e)},onEndLabel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endLabel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndLabel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindEndLabel&&(this.__cbOnOwnerUnbindEndLabel=[]),this.__cbOnOwnerUnbindEndLabel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindEndLabel&&(this.__cbOnOwnerUnbindEndLabel=[]),this.__cbOnOwnerUnbindEndLabel.push(null);null==this.__cbOnEndLabel&&(this.__cbOnEndLabel=[]),this.__cbOnEndLabel.push(e)},onceEndLabel:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event endLabel because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offEndLabel(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindEndLabel&&(this.__cbOnceOwnerUnbindEndLabel=[]),this.__cbOnceOwnerUnbindEndLabel.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindEndLabel&&(this.__cbOnceOwnerUnbindEndLabel=[]),this.__cbOnceOwnerUnbindEndLabel.push(null);null==this.__cbOnceEndLabel&&(this.__cbOnceEndLabel=[]),this.__cbOnceEndLabel.push(e)},offEndLabel:function(n){if(null!=n){var e;null!=this.__cbOnEndLabel&&-1!=(e=this.__cbOnEndLabel.indexOf(n))&&(this.__cbOnEndLabel.splice(e,1),null!=(l=this.__cbOnOwnerUnbindEndLabel[e])&&l(),this.__cbOnOwnerUnbindEndLabel.splice(e,1)),null!=this.__cbOnceEndLabel&&-1!=(e=this.__cbOnceEndLabel.indexOf(n))&&(this.__cbOnceEndLabel.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindEndLabel[e])&&l(),this.__cbOnceOwnerUnbindEndLabel.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindEndLabel){for(var t=0,i=this.__cbOnOwnerUnbindEndLabel.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindEndLabel[r])&&l()}this.__cbOnOwnerUnbindEndLabel=null}if(null!=this.__cbOnceOwnerUnbindEndLabel){for(t=0,i=this.__cbOnceOwnerUnbindEndLabel.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindEndLabel[r])&&l()}this.__cbOnceOwnerUnbindEndLabel=null}this.__cbOnEndLabel=null,this.__cbOnceEndLabel=null}},listensEndLabel:function(){return null!=this.__cbOnEndLabel&&this.__cbOnEndLabel.length>0||null!=this.__cbOnceEndLabel&&this.__cbOnceEndLabel.length>0},set_autoUpdate:function(n){return this.autoUpdate!=n&&(this.autoUpdate=n,ceramic_App.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&ceramic_App.app.onPreUpdate(this,$bind(this,this.update))),n},set_paused:function(n){return this.paused==n||(this.paused=n,ceramic_App.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&ceramic_App.app.onPreUpdate(this,$bind(this,this.update))),n},set_startPosition:function(n){return this.startPosition!=n&&(this.startPosition=n,this.apply()),n},set_endPosition:function(n){return this.endPosition!=n&&(this.endPosition=n,this.apply()),n},bindAsComponent:function(){},bindOrUnbindUpdateIfNeeded:function(){ceramic_App.app.offPreUpdate($bind(this,this.update)),!this.paused&&this.autoUpdate&&ceramic_App.app.onPreUpdate(this,$bind(this,this.update))},update:function(n){var e=this.position+n*this.fps,t=this.position;if(e!=this.position&&(this.startPosition>=0&&e<this.startPosition&&(e=this.startPosition),this.endPosition>=this.startPosition&&this.startPosition>=0&&e>this.endPosition&&(e=this.loop?this.startPosition+(e-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),this.size>0?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),e<0&&(e=0),e!=this.position)){this.position=e;for(var i=0,r=this.tracks.length;i<r;){var l=i++,s=this.tracks[l];if(!s.locked){e=this.position;var a=!1,o=!1;if(null==o&&(o=!1),null==a&&(a=!1),(a||e!=s.position)&&(s.size>0?e>s.size&&(s.loop?e%=s.size:e=s.size):0==s.size&&(e=0),e<0&&(e=0),e!=s.position)){s.position=e;var p=null,h=s.keyframeBeforeIndex;if(-1!=h)if((p=s.keyframes[h]).index<=s.position)for(var u=s.keyframes[h+1];null!=u&&u.index<=s.position;)p=u,++h,u=s.keyframes[h+1];else p=null;if(null==p){h=-1;for(var _=s.keyframes.length;h+1<_;){var c=s.keyframes[h+1];if(c.index>s.position)break;p=c,++h}}s.keyframeBeforeIndex=h,s.before=p;var d=null,f=s.keyframeAfterIndex;if(-1!=f&&null!=(d=s.keyframes[f]))if(d.index>s.position){if(f>0)for(var x=s.keyframes[f-1];null!=x&&x.index>s.position;)d=x,x=--f>0?s.keyframes[f-1]:null}else d=null;if(null==d){var b=s.keyframes.length;for(f=b;f-1>=0;){var y=s.keyframes[f-1];if(y.index<=s.position)break;d=y,--f}f>=b&&(f=-1)}s.keyframeAfterIndex=f,s.after=d,s.apply(o)}}}}if(this.position!=t){var v=Math.floor(this.position);if(v!=Math.floor(t)){var m=this.labelAtIndex(v);if(null!=m){var g=this.indexOfLabelBeforeIndex(v);-1!=g&&this.emitEndLabel(g,this.labelAtIndex(g)),this.emitStartLabel(v,m)}}}},seek:function(n){var e=n,t=this.position;if(e!=this.position&&(this.startPosition>=0&&e<this.startPosition&&(e=this.startPosition),this.endPosition>=this.startPosition&&this.startPosition>=0&&e>this.endPosition&&(e=this.loop?this.startPosition+(e-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),this.size>0?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),e<0&&(e=0),e!=this.position)){this.position=e;for(var i=0,r=this.tracks.length;i<r;){var l=i++,s=this.tracks[l];if(!s.locked){n=this.position;var a=!1,o=!1;if(null==o&&(o=!1),null==a&&(a=!1),(a||n!=s.position)&&(s.size>0?n>s.size&&(s.loop?n%=s.size:n=s.size):0==s.size&&(n=0),n<0&&(n=0),n!=s.position)){s.position=n;var p=null,h=s.keyframeBeforeIndex;if(-1!=h)if((p=s.keyframes[h]).index<=s.position)for(var u=s.keyframes[h+1];null!=u&&u.index<=s.position;)p=u,++h,u=s.keyframes[h+1];else p=null;if(null==p){h=-1;for(var _=s.keyframes.length;h+1<_;){var c=s.keyframes[h+1];if(c.index>s.position)break;p=c,++h}}s.keyframeBeforeIndex=h,s.before=p;var d=null,f=s.keyframeAfterIndex;if(-1!=f&&null!=(d=s.keyframes[f]))if(d.index>s.position){if(f>0)for(var x=s.keyframes[f-1];null!=x&&x.index>s.position;)d=x,x=--f>0?s.keyframes[f-1]:null}else d=null;if(null==d){var b=s.keyframes.length;for(f=b;f-1>=0;){var y=s.keyframes[f-1];if(y.index<=s.position)break;d=y,--f}f>=b&&(f=-1)}s.keyframeAfterIndex=f,s.after=d,s.apply(o)}}}}if(this.position!=t){var v=Math.floor(this.position);if(v!=Math.floor(t)){var m=this.labelAtIndex(v);if(null!=m){var g=this.indexOfLabelBeforeIndex(v);-1!=g&&this.emitEndLabel(g,this.labelAtIndex(g)),this.emitStartLabel(v,m)}}}},animate:function(n,e){if(null!=this.completeHandlers&&this.completeHandlers.length>0){var t;if(0!=(t=this.completeHandlers).length)if(t.length>0)t.splice(0,t.length);else t[-1]=null;if(0!=(t=this.completeHandlerIndexes).length)if(t.length>0)t.splice(0,t.length);else t[-1]=null}var i=this.indexOfLabel(n);-1!=i?(this.seek(i),null==this.completeHandlers&&(this.completeHandlers=[],this.completeHandlerIndexes=[]),this.completeHandlers.push(e),this.completeHandlerIndexes.push(i)):ceramic_App.app.logger.warning("Failed to animate whith label: "+n+" (not found)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:200,className:"ceramic.Timeline",methodName:"animate"})},seekLabel:function(n){var e=this.indexOfLabel(n);return-1!=e?this.seek(e):ceramic_App.app.logger.warning("Failed to seek label: "+n+" (not found)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:218,className:"ceramic.Timeline",methodName:"seekLabel"}),e},resetStartAndEndPositions:function(){this.set_startPosition(-1),this.set_endPosition(-1)},loopLabel:function(n){if(null==this.labels)return ceramic_App.app.logger.warning("Cannot loop label "+n+" (there is no label at all)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:245,className:"ceramic.Timeline",methodName:"loopLabel"}),-1;var e=this.labels.indexOf(n);if(-1==e)return ceramic_App.app.logger.warning("Cannot loop label "+n+" (no such label)",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Timeline.hx",lineNumber:251,className:"ceramic.Timeline",methodName:"loopLabel"}),-1;var t=this.labelIndexes[e];return this.set_startPosition(t),this.set_endPosition(e<this.labelIndexes.length-1?this.labelIndexes[e+1]:this.size),this.seek(t),t},apply:function(n){null==n&&(n=!1);var e=this.position,t=!0,i=n;null==i&&(i=!1),null==t&&(t=!1);var r=this.position;if((t||e!=this.position)&&(this.startPosition>=0&&e<this.startPosition&&(e=this.startPosition),this.endPosition>=this.startPosition&&this.startPosition>=0&&e>this.endPosition&&(e=this.loop?this.startPosition+(e-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),this.size>0?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),e<0&&(e=0),e!=this.position)){this.position=e;for(var l=0,s=this.tracks.length;l<s;){var a=l++,o=this.tracks[a];if(!o.locked){e=this.position;var p=t;if(null==(n=i)&&(n=!1),null==p&&(p=!1),(p||e!=o.position)&&(o.size>0?e>o.size&&(o.loop?e%=o.size:e=o.size):0==o.size&&(e=0),e<0&&(e=0),e!=o.position)){o.position=e;var h=null,u=o.keyframeBeforeIndex;if(-1!=u)if((h=o.keyframes[u]).index<=o.position)for(var _=o.keyframes[u+1];null!=_&&_.index<=o.position;)h=_,++u,_=o.keyframes[u+1];else h=null;if(null==h){u=-1;for(var c=o.keyframes.length;u+1<c;){var d=o.keyframes[u+1];if(d.index>o.position)break;h=d,++u}}o.keyframeBeforeIndex=u,o.before=h;var f=null,x=o.keyframeAfterIndex;if(-1!=x&&null!=(f=o.keyframes[x]))if(f.index>o.position){if(x>0)for(var b=o.keyframes[x-1];null!=b&&b.index>o.position;)f=b,b=--x>0?o.keyframes[x-1]:null}else f=null;if(null==f){var y=o.keyframes.length;for(x=y;x-1>=0;){var v=o.keyframes[x-1];if(v.index<=o.position)break;f=v,--x}x>=y&&(x=-1)}o.keyframeAfterIndex=x,o.after=f,o.apply(n)}}}}if(this.position!=r){var m=Math.floor(this.position);if(m!=Math.floor(r)){var g=this.labelAtIndex(m);if(null!=g){var z=this.indexOfLabelBeforeIndex(m);-1!=z&&this.emitEndLabel(z,this.labelAtIndex(z)),this.emitStartLabel(m,g)}}}},inlineSeek:function(n,e,t){null==t&&(t=!1),null==e&&(e=!1);var i=this.position;if((e||n!=this.position)&&(this.startPosition>=0&&n<this.startPosition&&(n=this.startPosition),this.endPosition>=this.startPosition&&this.startPosition>=0&&n>this.endPosition&&(n=this.loop?this.startPosition+(n-this.startPosition)%(this.endPosition-this.startPosition):this.endPosition),this.size>0?n>this.size&&(this.loop?n%=this.size:n=this.size):0==this.size&&(n=0),n<0&&(n=0),n!=this.position)){this.position=n;for(var r=0,l=this.tracks.length;r<l;){var s=r++,a=this.tracks[s];if(!a.locked){n=this.position;var o=e,p=t;if(null==p&&(p=!1),null==o&&(o=!1),(o||n!=a.position)&&(a.size>0?n>a.size&&(a.loop?n%=a.size:n=a.size):0==a.size&&(n=0),n<0&&(n=0),n!=a.position)){a.position=n;var h=null,u=a.keyframeBeforeIndex;if(-1!=u)if((h=a.keyframes[u]).index<=a.position)for(var _=a.keyframes[u+1];null!=_&&_.index<=a.position;)h=_,++u,_=a.keyframes[u+1];else h=null;if(null==h){u=-1;for(var c=a.keyframes.length;u+1<c;){var d=a.keyframes[u+1];if(d.index>a.position)break;h=d,++u}}a.keyframeBeforeIndex=u,a.before=h;var f=null,x=a.keyframeAfterIndex;if(-1!=x&&null!=(f=a.keyframes[x]))if(f.index>a.position){if(x>0)for(var b=a.keyframes[x-1];null!=b&&b.index>a.position;)f=b,b=--x>0?a.keyframes[x-1]:null}else f=null;if(null==f){var y=a.keyframes.length;for(x=y;x-1>=0;){var v=a.keyframes[x-1];if(v.index<=a.position)break;f=v,--x}x>=y&&(x=-1)}a.keyframeAfterIndex=x,a.after=f,a.apply(p)}}}}if(this.position!=i){var m=Math.floor(this.position);if(m!=Math.floor(i)){var g=this.labelAtIndex(m);if(null!=g){var z=this.indexOfLabelBeforeIndex(m);-1!=z&&this.emitEndLabel(z,this.labelAtIndex(z)),this.emitStartLabel(m,g)}}}},clearCompleteHandlers:function(){if(null!=this.completeHandlers&&this.completeHandlers.length>0){var n;if(0!=(n=this.completeHandlers).length)if(n.length>0)n.splice(0,n.length);else n[-1]=null;if(0!=(n=this.completeHandlerIndexes).length)if(n.length>0)n.splice(0,n.length);else n[-1]=null}},didEmitEndLabel:function(n,e){if(null!=this.completeHandlers&&this.completeHandlers.length>0){for(var t=null,i=null,r=0,l=0,s=this.completeHandlerIndexes.length;l<s;){var a=l++;if(this.completeHandlerIndexes[a]==n){null==i&&(i=(t=ceramic_ArrayPool.pool(this.completeHandlers.length)).get());var o=this.completeHandlers[a];i.vector[r]=o,this.completeHandlers[a]=null,++r}}if(null!=this.completeHandlers&&this.completeHandlers.length>0){var p;if(0!=(p=this.completeHandlers).length)if(p.length>0)p.splice(0,p.length);else p[-1]=null;if(0!=(p=this.completeHandlerIndexes).length)if(p.length>0)p.splice(0,p.length);else p[-1]=null}for(l=0,s=r;l<s;){a=l++;(o=i.vector[a])()}null!=i&&t.release(i)}},add:function(n){null!=n.timeline&&n.timeline.remove(n),n.timeline!=this&&(this.tracks.push(n),n.timeline=this),this.autoFitSize&&this.fitSize()},get:function(n){for(var e=0,t=this.tracks.length;e<t;){var i=e++,r=this.tracks[i];if(r.id==n)return r}return null},remove:function(n){n.timeline==this&&(HxOverrides.remove(this.tracks,n),n.timeline=null),this.autoFitSize&&this.fitSize()},fitSize:function(){for(var n=0,e=0,t=this.tracks.length;e<t;){var i=e++,r=this.tracks[i];r.size>n&&(n=r.size)}this.size=n},indexOfLabelBeforeIndex:function(n){if(null==this.labelIndexes)return-1;for(var e=-1,t=0,i=this.labelIndexes.length;t<i;){var r=t++,l=this.labelIndexes[r];if(l==n)return e;if(l>n)break;e=l}return e},labelAtIndex:function(n){if(null==this.labelIndexes)return null;for(var e=0,t=this.labelIndexes.length;e<t;){var i=e++,r=this.labelIndexes[i];if(r==n)return this.labels[i];if(r>n)break}return null},indexOfLabel:function(n){if(null==this.labelIndexes)return-1;for(var e=0,t=this.labels.length;e<t;){var i=e++;if(n==this.labels[i])return this.labelIndexes[i]}return-1},setLabel:function(n,e){this.removeLabel(e),null==this.labelIndexes&&(this.labelIndexes=[],this.labels=[]),this.labelIndexes.push(n),this.labels.push(e),this.sortLabels()},removeLabelAtIndex:function(n){var e=!1;if(null!=this.labelIndexes){var t=this.labelIndexes.indexOf(n);-1!=t&&(this.labels.splice(t,1),this.labelIndexes.splice(t,1),e=!0)}return e},removeLabel:function(n){var e=!1;if(null!=this.labels){var t=this.labels.indexOf(n);-1!=t&&(this.labels.splice(t,1),this.labelIndexes.splice(t,1),e=!0)}return e},sortLabels:function(){this.labelIndexes.sort($bind(this,this.compareLabelIndexes)),this.labels.sort($bind(this,this.compareLabelNames))},compareLabelIndexes:function(n,e){return n>e?1:n<e?-1:0},compareLabelNames:function(n,e){var t=this.labels.indexOf(n),i=this.labelIndexes[t],r=this.labels.indexOf(e),l=this.labelIndexes[r];return i>l?1:i<l?-1:0},setEntity:function(n){this.entity=n instanceof ceramic_Entity?n:null},getEntity:function(){return this.entity},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offStartLabel(),this.offEndLabel()},__class__:ceramic_Timeline,__properties__:$extend(ceramic_Entity.prototype.__properties__,{set_endPosition:"set_endPosition",set_startPosition:"set_startPosition",set_paused:"set_paused",set_autoUpdate:"set_autoUpdate"})});var ceramic_TimelineKeyframe=function(n,e){this.easing=h.NONE,this.index=n,this.easing=e};t["ceramic.TimelineKeyframe"]=ceramic_TimelineKeyframe,ceramic_TimelineKeyframe.__name__="ceramic.TimelineKeyframe",ceramic_TimelineKeyframe.prototype={__class__:ceramic_TimelineKeyframe};var ceramic_TimelineBoolKeyframe=function(n,e,t){ceramic_TimelineKeyframe.call(this,e,t),this.value=n};t["ceramic.TimelineBoolKeyframe"]=ceramic_TimelineBoolKeyframe,ceramic_TimelineBoolKeyframe.__name__="ceramic.TimelineBoolKeyframe",ceramic_TimelineBoolKeyframe.__super__=ceramic_TimelineKeyframe,ceramic_TimelineBoolKeyframe.prototype=$extend(ceramic_TimelineKeyframe.prototype,{__class__:ceramic_TimelineBoolKeyframe});var ceramic_TimelineTrack=function(){this.keyframeAfterIndex=-1,this.keyframeBeforeIndex=-1,this.after=null,this.before=null,this.keyframes=[],this.position=0,this.timeline=null,this.locked=!1,this.loop=!1,this.autoFitSize=!0,this.size=0,ceramic_Entity.call(this)};t["ceramic.TimelineTrack"]=ceramic_TimelineTrack,ceramic_TimelineTrack.__name__="ceramic.TimelineTrack",ceramic_TimelineTrack.__super__=ceramic_Entity,ceramic_TimelineTrack.prototype=$extend(ceramic_Entity.prototype,{destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.timeline&&this.timeline._lifecycleState>=0&&this.timeline.remove(this),this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this))},seek:function(n){var e=n;if(e!=this.position&&(this.size>0?e>this.size&&(this.loop?e%=this.size:e=this.size):0==this.size&&(e=0),e<0&&(e=0),e!=this.position)){this.position=e;var t=null;if(-1!=(l=this.keyframeBeforeIndex))if((t=this.keyframes[l]).index<=this.position)for(var i=this.keyframes[l+1];null!=i&&i.index<=this.position;)t=i,++l,i=this.keyframes[l+1];else t=null;if(null==t){l=-1;for(var r=this.keyframes.length;l+1<r;){if((a=this.keyframes[l+1]).index>this.position)break;t=a,++l}}this.keyframeBeforeIndex=l,this.before=t;var l;t=null;if(-1!=(l=this.keyframeAfterIndex)&&null!=(t=this.keyframes[l]))if(t.index>this.position){if(l>0)for(var s=this.keyframes[l-1];null!=s&&s.index>this.position;)t=s,s=--l>0?this.keyframes[l-1]:null}else t=null;if(null==t){for(l=r=this.keyframes.length;l-1>=0;){var a;if((a=this.keyframes[l-1]).index<=this.position)break;t=a,--l}l>=r&&(l=-1)}this.keyframeAfterIndex=l,this.after=t,this.apply(!1)}},inlineSeek:function(n,e,t){if(null==t&&(t=!1),null==e&&(e=!1),(e||n!=this.position)&&(this.size>0?n>this.size&&(this.loop?n%=this.size:n=this.size):0==this.size&&(n=0),n<0&&(n=0),n!=this.position)){this.position=n;var i=null;if(-1!=(s=this.keyframeBeforeIndex))if((i=this.keyframes[s]).index<=this.position)for(var r=this.keyframes[s+1];null!=r&&r.index<=this.position;)i=r,++s,r=this.keyframes[s+1];else i=null;if(null==i){s=-1;for(var l=this.keyframes.length;s+1<l;){if((o=this.keyframes[s+1]).index>this.position)break;i=o,++s}}this.keyframeBeforeIndex=s,this.before=i;var s;i=null;if(-1!=(s=this.keyframeAfterIndex)&&null!=(i=this.keyframes[s]))if(i.index>this.position){if(s>0)for(var a=this.keyframes[s-1];null!=a&&a.index>this.position;)i=a,a=--s>0?this.keyframes[s-1]:null}else i=null;if(null==i){for(s=l=this.keyframes.length;s-1>=0;){var o;if((o=this.keyframes[s-1]).index<=this.position)break;i=o,--s}s>=l&&(s=-1)}this.keyframeAfterIndex=s,this.after=i,this.apply(t)}},add:function(n){for(var e=this.keyframes,t=e.length,i=0,r=!1;i<t;){var l=e[i];if(l.index==n.index){ceramic_App.app.logger.warning("Replacing existing keyframe at index "+n.index,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TimelineTrack.hx",lineNumber:155,className:"ceramic.TimelineTrack",methodName:"add"}),e[i]=n,r=!0;break}if(l.index>n.index){e.splice(i,0,n),r=!0;break}++i}r||e.push(n),this.autoFitSize&&this.fitSize(),null!=this.timeline&&this.timeline.autoFitSize&&this.timeline.fitSize(),this.keyframeBeforeIndex=-1,this.keyframeAfterIndex=-1;var s=null;if(-1!=(o=this.keyframeBeforeIndex))if((s=this.keyframes[o]).index<=this.position)for(var a=this.keyframes[o+1];null!=a&&a.index<=this.position;)s=a,++o,a=this.keyframes[o+1];else s=null;if(null==s){o=-1;for(t=this.keyframes.length;o+1<t;){if((n=this.keyframes[o+1]).index>this.position)break;s=n,++o}}this.keyframeBeforeIndex=o,this.before=s;var o;s=null;if(-1!=(o=this.keyframeAfterIndex)&&null!=(s=this.keyframes[o]))if(s.index>this.position){if(o>0)for(var p=this.keyframes[o-1];null!=p&&p.index>this.position;)s=p,p=--o>0?this.keyframes[o-1]:null}else s=null;if(null==s){for(o=t=this.keyframes.length;o-1>=0;){if((n=this.keyframes[o-1]).index<=this.position)break;s=n,--o}o>=t&&(o=-1)}this.keyframeAfterIndex=o,this.after=s,this.apply(!0)},remove:function(n){if(-1!=(r=this.keyframes.indexOf(n))){this.keyframes.splice(r,1),this.autoFitSize&&this.fitSize(),null!=this.timeline&&this.timeline.autoFitSize&&this.timeline.fitSize(),this.keyframeBeforeIndex=-1,this.keyframeAfterIndex=-1;var e=null;if(-1!=(r=this.keyframeBeforeIndex))if((e=this.keyframes[r]).index<=this.position)for(var t=this.keyframes[r+1];null!=t&&t.index<=this.position;)e=t,++r,t=this.keyframes[r+1];else e=null;if(null==e){r=-1;for(var i=this.keyframes.length;r+1<i;){if((n=this.keyframes[r+1]).index>this.position)break;e=n,++r}}this.keyframeBeforeIndex=r,this.before=e;var r;e=null;if(-1!=(r=this.keyframeAfterIndex)&&null!=(e=this.keyframes[r]))if(e.index>this.position){if(r>0)for(var l=this.keyframes[r-1];null!=l&&l.index>this.position;)e=l,l=--r>0?this.keyframes[r-1]:null}else e=null;if(null==e){for(r=i=this.keyframes.length;r-1>=0;){if((n=this.keyframes[r-1]).index<=this.position)break;e=n,--r}r>=i&&(r=-1)}this.keyframeAfterIndex=r,this.after=e,this.apply(!0)}else ceramic_App.app.logger.warning("Failed to remove keyframe: keyframe not found in list",{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/TimelineTrack.hx",lineNumber:216,className:"ceramic.TimelineTrack",methodName:"remove"})},fitSize:function(){this.keyframes.length>0?this.size=this.keyframes[this.keyframes.length-1].index:this.size=0},apply:function(n){null==n&&(n=!1)},findKeyframeAtIndex:function(n){var e=this.findKeyframeBefore(n);return null!=e&&e.index==n?e:null},findKeyframeBefore:function(n){for(var e=null,t=-1,i=this.keyframes.length;t+1<i;){var r=this.keyframes[t+1];if(r.index>n)break;e=r,++t}return e},findKeyframeAfter:function(n){for(var e=null,t=-1,i=this.keyframes.length;t+1<i;){var r=this.keyframes[t+1];if(r.index>n)break;e=r,++t}return e},computeKeyframeBefore:function(){var n=null,e=this.keyframeBeforeIndex;if(-1!=e)if((n=this.keyframes[e]).index<=this.position)for(var t=this.keyframes[e+1];null!=t&&t.index<=this.position;)n=t,++e,t=this.keyframes[e+1];else n=null;if(null==n){e=-1;for(var i=this.keyframes.length;e+1<i;){var r=this.keyframes[e+1];if(r.index>this.position)break;n=r,++e}}this.keyframeBeforeIndex=e,this.before=n},computeKeyframeAfter:function(){var n=null,e=this.keyframeAfterIndex;if(-1!=e&&null!=(n=this.keyframes[e]))if(n.index>this.position){if(e>0)for(var t=this.keyframes[e-1];null!=t&&t.index>this.position;)n=t,t=--e>0?this.keyframes[e-1]:null}else n=null;if(null==n){var i=this.keyframes.length;for(e=i;e-1>=0;){var r=this.keyframes[e-1];if(r.index<=this.position)break;n=r,--e}e>=i&&(e=-1)}this.keyframeAfterIndex=e,this.after=n},__class__:ceramic_TimelineTrack});var ceramic_TimelineBoolTrack=function(){this.value=!1,ceramic_TimelineTrack.call(this)};t["ceramic.TimelineBoolTrack"]=ceramic_TimelineBoolTrack,ceramic_TimelineBoolTrack.__name__="ceramic.TimelineBoolTrack",ceramic_TimelineBoolTrack.__super__=ceramic_TimelineTrack,ceramic_TimelineBoolTrack.prototype=$extend(ceramic_TimelineTrack.prototype,{emitChange:function(n){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnChange)for(var l=0,s=this.__cbOnChange.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnChange[a],++r):--e}if(null!=this.__cbOnceChange){var o=null,p=null;for(l=0,s=this.__cbOnceChange.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null;var h=this.__cbOnceOwnerUnbindChange[a];this.__cbOnceOwnerUnbindChange[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindChange[a]),p.push(this.__cbOnceChange[a])}this.__cbOnceOwnerUnbindChange=o,this.__cbOnceChange=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(e)},onceChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(e)},offChange:function(n){if(null!=n){var e;null!=this.__cbOnChange&&-1!=(e=this.__cbOnChange.indexOf(n))&&(this.__cbOnChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindChange[e])&&l(),this.__cbOnOwnerUnbindChange.splice(e,1)),null!=this.__cbOnceChange&&-1!=(e=this.__cbOnceChange.indexOf(n))&&(this.__cbOnceChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindChange[e])&&l(),this.__cbOnceOwnerUnbindChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindChange[r])&&l()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindChange[r])&&l()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&this.__cbOnChange.length>0||null!=this.__cbOnceChange&&this.__cbOnceChange.length>0},apply:function(n){null==n&&(n=!1);var e=this.value;if(null!=this.before&&null!=this.after){var t=(this.position-this.before.index)/(this.after.index-this.before.index);t>1?t=1:t<0&&(t=0),this.value=t>=1?this.after.value:this.before.value}else null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value);(n||e!=this.value)&&this.emitChange(this)},unbindEvents:function(){ceramic_TimelineTrack.prototype.unbindEvents.call(this),this.offChange()},__class__:ceramic_TimelineBoolTrack});var ceramic_TimelineColorKeyframe=function(n,e,t){ceramic_TimelineKeyframe.call(this,e,t),this.value=n};t["ceramic.TimelineColorKeyframe"]=ceramic_TimelineColorKeyframe,ceramic_TimelineColorKeyframe.__name__="ceramic.TimelineColorKeyframe",ceramic_TimelineColorKeyframe.__super__=ceramic_TimelineKeyframe,ceramic_TimelineColorKeyframe.prototype=$extend(ceramic_TimelineKeyframe.prototype,{__class__:ceramic_TimelineColorKeyframe});var ceramic_TimelineColorTrack=function(){this.value=16777215,ceramic_TimelineTrack.call(this)};t["ceramic.TimelineColorTrack"]=ceramic_TimelineColorTrack,ceramic_TimelineColorTrack.__name__="ceramic.TimelineColorTrack",ceramic_TimelineColorTrack.__super__=ceramic_TimelineTrack,ceramic_TimelineColorTrack.prototype=$extend(ceramic_TimelineTrack.prototype,{emitChange:function(n){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnChange)for(var l=0,s=this.__cbOnChange.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnChange[a],++r):--e}if(null!=this.__cbOnceChange){var o=null,p=null;for(l=0,s=this.__cbOnceChange.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null;var h=this.__cbOnceOwnerUnbindChange[a];this.__cbOnceOwnerUnbindChange[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindChange[a]),p.push(this.__cbOnceChange[a])}this.__cbOnceOwnerUnbindChange=o,this.__cbOnceChange=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(e)},onceChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(e)},offChange:function(n){if(null!=n){var e;null!=this.__cbOnChange&&-1!=(e=this.__cbOnChange.indexOf(n))&&(this.__cbOnChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindChange[e])&&l(),this.__cbOnOwnerUnbindChange.splice(e,1)),null!=this.__cbOnceChange&&-1!=(e=this.__cbOnceChange.indexOf(n))&&(this.__cbOnceChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindChange[e])&&l(),this.__cbOnceOwnerUnbindChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindChange[r])&&l()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindChange[r])&&l()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&this.__cbOnChange.length>0||null!=this.__cbOnceChange&&this.__cbOnceChange.length>0},apply:function(n){null==n&&(n=!1);var e=this.value;if(null!=this.before&&null!=this.after){var t=(this.position-this.before.index)/(this.after.index-this.before.index);t>1?t=1:t<0&&(t=0);var i=this.before.value,r=this.after.value,l=ceramic_Tween.ease(this.after.easing,t);null==l&&(l=.5);var s=((r>>16&255)-(i>>16&255))*l+(i>>16&255)|0,a=((r>>8&255)-(i>>8&255))*l+(i>>8&255)|0,o=((255&r)-(255&i))*l+(255&i)|0,h=p._new();h&=65535,h|=(s>255?255:s<0?0:s)<<16,h&=16711935,h|=(a>255?255:a<0?0:a)<<8,h&=16776960,h|=o>255?255:o<0?0:o,this.value=h}else null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value);(n||e!=this.value)&&this.emitChange(this)},unbindEvents:function(){ceramic_TimelineTrack.prototype.unbindEvents.call(this),this.offChange()},__class__:ceramic_TimelineColorTrack});var ceramic_TimelineDegreesTrack=function(){this.value=0,ceramic_TimelineTrack.call(this)};t["ceramic.TimelineDegreesTrack"]=ceramic_TimelineDegreesTrack,ceramic_TimelineDegreesTrack.__name__="ceramic.TimelineDegreesTrack",ceramic_TimelineDegreesTrack.__super__=ceramic_TimelineTrack,ceramic_TimelineDegreesTrack.prototype=$extend(ceramic_TimelineTrack.prototype,{emitChange:function(n){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnChange)for(var l=0,s=this.__cbOnChange.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnChange[a],++r):--e}if(null!=this.__cbOnceChange){var o=null,p=null;for(l=0,s=this.__cbOnceChange.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null;var h=this.__cbOnceOwnerUnbindChange[a];this.__cbOnceOwnerUnbindChange[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindChange[a]),p.push(this.__cbOnceChange[a])}this.__cbOnceOwnerUnbindChange=o,this.__cbOnceChange=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(e)},onceChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(e)},offChange:function(n){if(null!=n){var e;null!=this.__cbOnChange&&-1!=(e=this.__cbOnChange.indexOf(n))&&(this.__cbOnChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindChange[e])&&l(),this.__cbOnOwnerUnbindChange.splice(e,1)),null!=this.__cbOnceChange&&-1!=(e=this.__cbOnceChange.indexOf(n))&&(this.__cbOnceChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindChange[e])&&l(),this.__cbOnceOwnerUnbindChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindChange[r])&&l()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindChange[r])&&l()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&this.__cbOnChange.length>0||null!=this.__cbOnceChange&&this.__cbOnceChange.length>0},apply:function(n){null==n&&(n=!1);var e=this.value,t=this.value;if(null!=this.before&&null!=this.after){var i=(this.position-this.before.index)/(this.after.index-this.before.index);i>1?i=1:i<0&&(i=0);var r=ceramic_GeometryUtils.clampDegrees(this.before.value),l=ceramic_GeometryUtils.clampDegrees(this.after.value),s=l-r;s>180?l-=360:s<-180&&(l+=360),t=r+(l-r)*ceramic_Tween.ease(this.after.easing,i),t=ceramic_GeometryUtils.clampDegrees(t)}else null!=this.after?t=ceramic_GeometryUtils.clampDegrees(this.after.value):null!=this.before&&(t=ceramic_GeometryUtils.clampDegrees(this.before.value));(n||e!=t)&&(this.value=t,this.emitChange(this))},unbindEvents:function(){ceramic_TimelineTrack.prototype.unbindEvents.call(this),this.offChange()},__class__:ceramic_TimelineDegreesTrack});var ceramic_TimelineFloatArrayKeyframe=function(n,e,t){ceramic_TimelineKeyframe.call(this,e,t),this.value=n};t["ceramic.TimelineFloatArrayKeyframe"]=ceramic_TimelineFloatArrayKeyframe,ceramic_TimelineFloatArrayKeyframe.__name__="ceramic.TimelineFloatArrayKeyframe",ceramic_TimelineFloatArrayKeyframe.__super__=ceramic_TimelineKeyframe,ceramic_TimelineFloatArrayKeyframe.prototype=$extend(ceramic_TimelineKeyframe.prototype,{__class__:ceramic_TimelineFloatArrayKeyframe});var ceramic_TimelineFloatArrayTrack=function(){this.value=[],ceramic_TimelineTrack.call(this)};t["ceramic.TimelineFloatArrayTrack"]=ceramic_TimelineFloatArrayTrack,ceramic_TimelineFloatArrayTrack.__name__="ceramic.TimelineFloatArrayTrack",ceramic_TimelineFloatArrayTrack.__super__=ceramic_TimelineTrack,ceramic_TimelineFloatArrayTrack.prototype=$extend(ceramic_TimelineTrack.prototype,{emitChange:function(n){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnChange)for(var l=0,s=this.__cbOnChange.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnChange[a],++r):--e}if(null!=this.__cbOnceChange){var o=null,p=null;for(l=0,s=this.__cbOnceChange.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null;var h=this.__cbOnceOwnerUnbindChange[a];this.__cbOnceOwnerUnbindChange[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindChange[a]),p.push(this.__cbOnceChange[a])}this.__cbOnceOwnerUnbindChange=o,this.__cbOnceChange=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(e)},onceChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(e)},offChange:function(n){if(null!=n){var e;null!=this.__cbOnChange&&-1!=(e=this.__cbOnChange.indexOf(n))&&(this.__cbOnChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindChange[e])&&l(),this.__cbOnOwnerUnbindChange.splice(e,1)),null!=this.__cbOnceChange&&-1!=(e=this.__cbOnceChange.indexOf(n))&&(this.__cbOnceChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindChange[e])&&l(),this.__cbOnceOwnerUnbindChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindChange[r])&&l()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindChange[r])&&l()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&this.__cbOnChange.length>0||null!=this.__cbOnceChange&&this.__cbOnceChange.length>0},apply:function(n){null==n&&(n=!1);var e=!1;if(null!=this.before&&null!=this.after){var t=(this.position-this.before.index)/(this.after.index-this.before.index);if(t>1?t=1:t<0&&(t=0),t>=1){var i=this.value,r=(x=this.after.value).length;if(i.length>r)if(i.length!=r)if(i.length>r)i.splice(r,i.length-r);else i[r-1]=null;for(var l=i.length,s=0,a=r;s<a;){var o=0;(b=s++)<l?o=i[b]:e=!0;var p=x[b];i[b]=p,p!=o&&(e=!0)}}else if(t<=0){i=this.value,r=(x=this.before.value).length;if(i.length>r)if(i.length!=r)if(i.length>r)i.splice(r,i.length-r);else i[r-1]=null;for(l=i.length,s=0,a=r;s<a;){o=0;(b=s++)<l?o=i[b]:e=!0;p=x[b];i[b]=p,p!=o&&(e=!0)}}else{i=this.value;var h=this.before.value,u=this.after.value,_=ceramic_Tween.ease(this.after.easing,t),c=u.length,d=h.length;r=c>d?d:c;if(i.length>r)if(i.length!=r)if(i.length>r)i.splice(r,i.length-r);else i[r-1]=null;for(l=i.length,s=0,a=r;s<a;){o=0;(b=s++)<l?o=i[b]:e=!0;var f=h[b];p=f+(u[b]-f)*_;i[b]=p,p!=o&&(e=!0)}}}else if(null!=this.after){i=this.value,r=(x=this.after.value).length;if(i.length>r)if(i.length!=r)if(i.length>r)i.splice(r,i.length-r);else i[r-1]=null;for(l=i.length,s=0,a=r;s<a;){o=0;(b=s++)<l?o=i[b]:e=!0;p=x[b];i[b]=p,p!=o&&(e=!0)}}else if(null!=this.before){var x;i=this.value,r=(x=this.before.value).length;if(i.length>r)if(i.length!=r)if(i.length>r)i.splice(r,i.length-r);else i[r-1]=null;for(l=i.length,s=0,a=r;s<a;){var b;o=0;(b=s++)<l?o=i[b]:e=!0;p=x[b];i[b]=p,p!=o&&(e=!0)}}(n||e)&&this.emitChange(this)},unbindEvents:function(){ceramic_TimelineTrack.prototype.unbindEvents.call(this),this.offChange()},__class__:ceramic_TimelineFloatArrayTrack});var ceramic_TimelineFloatKeyframe=function(n,e,t){ceramic_TimelineKeyframe.call(this,e,t),this.value=n};t["ceramic.TimelineFloatKeyframe"]=ceramic_TimelineFloatKeyframe,ceramic_TimelineFloatKeyframe.__name__="ceramic.TimelineFloatKeyframe",ceramic_TimelineFloatKeyframe.__super__=ceramic_TimelineKeyframe,ceramic_TimelineFloatKeyframe.prototype=$extend(ceramic_TimelineKeyframe.prototype,{__class__:ceramic_TimelineFloatKeyframe});var ceramic_TimelineFloatTrack=function(){this.value=0,ceramic_TimelineTrack.call(this)};t["ceramic.TimelineFloatTrack"]=ceramic_TimelineFloatTrack,ceramic_TimelineFloatTrack.__name__="ceramic.TimelineFloatTrack",ceramic_TimelineFloatTrack.__super__=ceramic_TimelineTrack,ceramic_TimelineFloatTrack.prototype=$extend(ceramic_TimelineTrack.prototype,{emitChange:function(n){var e=0;if(null!=this.__cbOnChange&&(e+=this.__cbOnChange.length),null!=this.__cbOnceChange&&(e+=this.__cbOnceChange.length),e>0){var t=ceramic_ArrayPool.pool(e),i=t.get(),r=0;if(null!=this.__cbOnChange)for(var l=0,s=this.__cbOnChange.length;l<s;){var a=l++;!0?(i.vector[r]=this.__cbOnChange[a],++r):--e}if(null!=this.__cbOnceChange){var o=null,p=null;for(l=0,s=this.__cbOnceChange.length;l<s;){a=l++;if(!0){i.vector[r]=this.__cbOnceChange[a],this.__cbOnceChange[a]=null;var h=this.__cbOnceOwnerUnbindChange[a];this.__cbOnceOwnerUnbindChange[a]=null,null!=h&&h(),++r}else--e,null==o&&(o=[],p=[],[]),o.push(this.__cbOnceOwnerUnbindChange[a]),p.push(this.__cbOnceChange[a])}this.__cbOnceOwnerUnbindChange=o,this.__cbOnceChange=p}for(l=0,s=e;l<s;){r=l++;(0,i.vector[r])(n)}t.release(i),i=null}},onChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindChange&&(this.__cbOnOwnerUnbindChange=[]),this.__cbOnOwnerUnbindChange.push(null);null==this.__cbOnChange&&(this.__cbOnChange=[]),this.__cbOnChange.push(e)},onceChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event change because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindChange&&(this.__cbOnceOwnerUnbindChange=[]),this.__cbOnceOwnerUnbindChange.push(null);null==this.__cbOnceChange&&(this.__cbOnceChange=[]),this.__cbOnceChange.push(e)},offChange:function(n){if(null!=n){var e;null!=this.__cbOnChange&&-1!=(e=this.__cbOnChange.indexOf(n))&&(this.__cbOnChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindChange[e])&&l(),this.__cbOnOwnerUnbindChange.splice(e,1)),null!=this.__cbOnceChange&&-1!=(e=this.__cbOnceChange.indexOf(n))&&(this.__cbOnceChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindChange[e])&&l(),this.__cbOnceOwnerUnbindChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindChange){for(var t=0,i=this.__cbOnOwnerUnbindChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindChange[r])&&l()}this.__cbOnOwnerUnbindChange=null}if(null!=this.__cbOnceOwnerUnbindChange){for(t=0,i=this.__cbOnceOwnerUnbindChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindChange[r])&&l()}this.__cbOnceOwnerUnbindChange=null}this.__cbOnChange=null,this.__cbOnceChange=null}},listensChange:function(){return null!=this.__cbOnChange&&this.__cbOnChange.length>0||null!=this.__cbOnceChange&&this.__cbOnceChange.length>0},apply:function(n){null==n&&(n=!1);var e=this.value;if(null!=this.before&&null!=this.after){var t=(this.position-this.before.index)/(this.after.index-this.before.index);t>1?t=1:t<0&&(t=0),this.value=this.before.value+(this.after.value-this.before.value)*ceramic_Tween.ease(this.after.easing,t)}else null!=this.after?this.value=this.after.value:null!=this.before&&(this.value=this.before.value);(n||e!=this.value)&&this.emitChange(this)},unbindEvents:function(){ceramic_TimelineTrack.prototype.unbindEvents.call(this),this.offChange()},__class__:ceramic_TimelineFloatTrack});var ceramic_Timelines=function(){ceramic_Entity.call(this),this.onCreateTrack(this,$bind(this,this.handleCreateTrack)),this.onBindTrack(this,$bind(this,this.handleBindTrack)),this.onCreateKeyframe(this,$bind(this,this.handleCreateKeyframe))};t["ceramic.Timelines"]=ceramic_Timelines,ceramic_Timelines.__name__="ceramic.Timelines",ceramic_Timelines.__super__=ceramic_Entity,ceramic_Timelines.prototype=$extend(ceramic_Entity.prototype,{emitCreateTrack:function(n,e,t){var i=0;if(null!=this.__cbOnCreateTrack&&(i+=this.__cbOnCreateTrack.length),null!=this.__cbOnceCreateTrack&&(i+=this.__cbOnceCreateTrack.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnCreateTrack)for(var a=0,o=this.__cbOnCreateTrack.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnCreateTrack[p],++s):--i}if(null!=this.__cbOnceCreateTrack){var h=null,u=null;for(a=0,o=this.__cbOnceCreateTrack.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceCreateTrack[p],this.__cbOnceCreateTrack[p]=null;var _=this.__cbOnceOwnerUnbindCreateTrack[p];this.__cbOnceOwnerUnbindCreateTrack[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindCreateTrack[p]),u.push(this.__cbOnceCreateTrack[p])}this.__cbOnceOwnerUnbindCreateTrack=h,this.__cbOnceCreateTrack=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onCreateTrack:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event createTrack because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offCreateTrack(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindCreateTrack&&(this.__cbOnOwnerUnbindCreateTrack=[]),this.__cbOnOwnerUnbindCreateTrack.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindCreateTrack&&(this.__cbOnOwnerUnbindCreateTrack=[]),this.__cbOnOwnerUnbindCreateTrack.push(null);null==this.__cbOnCreateTrack&&(this.__cbOnCreateTrack=[]),this.__cbOnCreateTrack.push(e)},onceCreateTrack:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event createTrack because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offCreateTrack(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindCreateTrack&&(this.__cbOnceOwnerUnbindCreateTrack=[]),this.__cbOnceOwnerUnbindCreateTrack.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindCreateTrack&&(this.__cbOnceOwnerUnbindCreateTrack=[]),this.__cbOnceOwnerUnbindCreateTrack.push(null);null==this.__cbOnceCreateTrack&&(this.__cbOnceCreateTrack=[]),this.__cbOnceCreateTrack.push(e)},offCreateTrack:function(n){if(null!=n){var e;null!=this.__cbOnCreateTrack&&-1!=(e=this.__cbOnCreateTrack.indexOf(n))&&(this.__cbOnCreateTrack.splice(e,1),null!=(l=this.__cbOnOwnerUnbindCreateTrack[e])&&l(),this.__cbOnOwnerUnbindCreateTrack.splice(e,1)),null!=this.__cbOnceCreateTrack&&-1!=(e=this.__cbOnceCreateTrack.indexOf(n))&&(this.__cbOnceCreateTrack.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindCreateTrack[e])&&l(),this.__cbOnceOwnerUnbindCreateTrack.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindCreateTrack){for(var t=0,i=this.__cbOnOwnerUnbindCreateTrack.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindCreateTrack[r])&&l()}this.__cbOnOwnerUnbindCreateTrack=null}if(null!=this.__cbOnceOwnerUnbindCreateTrack){for(t=0,i=this.__cbOnceOwnerUnbindCreateTrack.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindCreateTrack[r])&&l()}this.__cbOnceOwnerUnbindCreateTrack=null}this.__cbOnCreateTrack=null,this.__cbOnceCreateTrack=null}},listensCreateTrack:function(){return null!=this.__cbOnCreateTrack&&this.__cbOnCreateTrack.length>0||null!=this.__cbOnceCreateTrack&&this.__cbOnceCreateTrack.length>0},emitBindTrack:function(n,e,t,i,r){var l=0;if(null!=this.__cbOnBindTrack&&(l+=this.__cbOnBindTrack.length),null!=this.__cbOnceBindTrack&&(l+=this.__cbOnceBindTrack.length),l>0){var s=ceramic_ArrayPool.pool(l),a=s.get(),o=0;if(null!=this.__cbOnBindTrack)for(var p=0,h=this.__cbOnBindTrack.length;p<h;){var u=p++;!0?(a.vector[o]=this.__cbOnBindTrack[u],++o):--l}if(null!=this.__cbOnceBindTrack){var _=null,c=null;for(p=0,h=this.__cbOnceBindTrack.length;p<h;){u=p++;if(!0){a.vector[o]=this.__cbOnceBindTrack[u],this.__cbOnceBindTrack[u]=null;var d=this.__cbOnceOwnerUnbindBindTrack[u];this.__cbOnceOwnerUnbindBindTrack[u]=null,null!=d&&d(),++o}else--l,null==_&&(_=[],c=[],[]),_.push(this.__cbOnceOwnerUnbindBindTrack[u]),c.push(this.__cbOnceBindTrack[u])}this.__cbOnceOwnerUnbindBindTrack=_,this.__cbOnceBindTrack=c}for(p=0,h=l;p<h;){o=p++;(0,a.vector[o])(n,e,t,i,r)}s.release(a),a=null}},onBindTrack:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event bindTrack because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBindTrack(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindBindTrack&&(this.__cbOnOwnerUnbindBindTrack=[]),this.__cbOnOwnerUnbindBindTrack.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindBindTrack&&(this.__cbOnOwnerUnbindBindTrack=[]),this.__cbOnOwnerUnbindBindTrack.push(null);null==this.__cbOnBindTrack&&(this.__cbOnBindTrack=[]),this.__cbOnBindTrack.push(e)},onceBindTrack:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event bindTrack because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offBindTrack(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindBindTrack&&(this.__cbOnceOwnerUnbindBindTrack=[]),this.__cbOnceOwnerUnbindBindTrack.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindBindTrack&&(this.__cbOnceOwnerUnbindBindTrack=[]),this.__cbOnceOwnerUnbindBindTrack.push(null);null==this.__cbOnceBindTrack&&(this.__cbOnceBindTrack=[]),this.__cbOnceBindTrack.push(e)},offBindTrack:function(n){if(null!=n){var e;null!=this.__cbOnBindTrack&&-1!=(e=this.__cbOnBindTrack.indexOf(n))&&(this.__cbOnBindTrack.splice(e,1),null!=(l=this.__cbOnOwnerUnbindBindTrack[e])&&l(),this.__cbOnOwnerUnbindBindTrack.splice(e,1)),null!=this.__cbOnceBindTrack&&-1!=(e=this.__cbOnceBindTrack.indexOf(n))&&(this.__cbOnceBindTrack.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindBindTrack[e])&&l(),this.__cbOnceOwnerUnbindBindTrack.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindBindTrack){for(var t=0,i=this.__cbOnOwnerUnbindBindTrack.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindBindTrack[r])&&l()}this.__cbOnOwnerUnbindBindTrack=null}if(null!=this.__cbOnceOwnerUnbindBindTrack){for(t=0,i=this.__cbOnceOwnerUnbindBindTrack.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindBindTrack[r])&&l()}this.__cbOnceOwnerUnbindBindTrack=null}this.__cbOnBindTrack=null,this.__cbOnceBindTrack=null}},listensBindTrack:function(){return null!=this.__cbOnBindTrack&&this.__cbOnBindTrack.length>0||null!=this.__cbOnceBindTrack&&this.__cbOnceBindTrack.length>0},emitCreateKeyframe:function(n,e,t,i,r,l,s){var a=0;if(null!=this.__cbOnCreateKeyframe&&(a+=this.__cbOnCreateKeyframe.length),null!=this.__cbOnceCreateKeyframe&&(a+=this.__cbOnceCreateKeyframe.length),a>0){var o=ceramic_ArrayPool.pool(a),p=o.get(),h=0;if(null!=this.__cbOnCreateKeyframe)for(var u=0,_=this.__cbOnCreateKeyframe.length;u<_;){var c=u++;!0?(p.vector[h]=this.__cbOnCreateKeyframe[c],++h):--a}if(null!=this.__cbOnceCreateKeyframe){var d=null,f=null;for(u=0,_=this.__cbOnceCreateKeyframe.length;u<_;){c=u++;if(!0){p.vector[h]=this.__cbOnceCreateKeyframe[c],this.__cbOnceCreateKeyframe[c]=null;var x=this.__cbOnceOwnerUnbindCreateKeyframe[c];this.__cbOnceOwnerUnbindCreateKeyframe[c]=null,null!=x&&x(),++h}else--a,null==d&&(d=[],f=[],[]),d.push(this.__cbOnceOwnerUnbindCreateKeyframe[c]),f.push(this.__cbOnceCreateKeyframe[c])}this.__cbOnceOwnerUnbindCreateKeyframe=d,this.__cbOnceCreateKeyframe=f}for(u=0,_=a;u<_;){h=u++;(0,p.vector[h])(n,e,t,i,r,l,s)}o.release(p),p=null}},onCreateKeyframe:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event createKeyframe because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offCreateKeyframe(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindCreateKeyframe&&(this.__cbOnOwnerUnbindCreateKeyframe=[]),this.__cbOnOwnerUnbindCreateKeyframe.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindCreateKeyframe&&(this.__cbOnOwnerUnbindCreateKeyframe=[]),this.__cbOnOwnerUnbindCreateKeyframe.push(null);null==this.__cbOnCreateKeyframe&&(this.__cbOnCreateKeyframe=[]),this.__cbOnCreateKeyframe.push(e)},onceCreateKeyframe:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event createKeyframe because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offCreateKeyframe(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindCreateKeyframe&&(this.__cbOnceOwnerUnbindCreateKeyframe=[]),this.__cbOnceOwnerUnbindCreateKeyframe.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindCreateKeyframe&&(this.__cbOnceOwnerUnbindCreateKeyframe=[]),this.__cbOnceOwnerUnbindCreateKeyframe.push(null);null==this.__cbOnceCreateKeyframe&&(this.__cbOnceCreateKeyframe=[]),this.__cbOnceCreateKeyframe.push(e)},offCreateKeyframe:function(n){if(null!=n){var e;null!=this.__cbOnCreateKeyframe&&-1!=(e=this.__cbOnCreateKeyframe.indexOf(n))&&(this.__cbOnCreateKeyframe.splice(e,1),null!=(l=this.__cbOnOwnerUnbindCreateKeyframe[e])&&l(),this.__cbOnOwnerUnbindCreateKeyframe.splice(e,1)),null!=this.__cbOnceCreateKeyframe&&-1!=(e=this.__cbOnceCreateKeyframe.indexOf(n))&&(this.__cbOnceCreateKeyframe.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindCreateKeyframe[e])&&l(),this.__cbOnceOwnerUnbindCreateKeyframe.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindCreateKeyframe){for(var t=0,i=this.__cbOnOwnerUnbindCreateKeyframe.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindCreateKeyframe[r])&&l()}this.__cbOnOwnerUnbindCreateKeyframe=null}if(null!=this.__cbOnceOwnerUnbindCreateKeyframe){for(t=0,i=this.__cbOnceOwnerUnbindCreateKeyframe.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindCreateKeyframe[r])&&l()}this.__cbOnceOwnerUnbindCreateKeyframe=null}this.__cbOnCreateKeyframe=null,this.__cbOnceCreateKeyframe=null}},listensCreateKeyframe:function(){return null!=this.__cbOnCreateKeyframe&&this.__cbOnCreateKeyframe.length>0||null!=this.__cbOnceCreateKeyframe&&this.__cbOnceCreateKeyframe.length>0},handleCreateTrack:function(n,e,t){null==t.value&&(null!=e&&1==e.degrees?t.value=new ceramic_TimelineDegreesTrack:"Float"==n?t.value=new ceramic_TimelineFloatTrack:"ceramic.Color"==n?t.value=new ceramic_TimelineColorTrack:"Bool"==n?t.value=new ceramic_TimelineBoolTrack:"Array<Float>"==n&&(t.value=new ceramic_TimelineFloatArrayTrack))},handleBindTrack:function(n,e,t,i,r){if(t instanceof ceramic_TimelineFloatTrack)t.onChange(i,(function(n){Reflect.setProperty(i,r,n.value)}));else if(t instanceof ceramic_TimelineDegreesTrack){t.onChange(i,(function(n){Reflect.setProperty(i,r,n.value)}))}else if(t instanceof ceramic_TimelineColorTrack){t.onChange(i,(function(n){Reflect.setProperty(i,r,n.value)}))}else if(t instanceof ceramic_TimelineBoolTrack){t.onChange(i,(function(n){Reflect.setProperty(i,r,n.value)}))}else if(t instanceof ceramic_TimelineFloatArrayTrack){var l=null!=e&&1==e.copyArray;t.onChange(i,(function(n){var e=null;(l||null==(e=Reflect.getProperty(i,r)))&&(e=[]);var t=n.value,s=t.length;e.length!=s&&(e.length!=s&&(e.length>s?e.splice(s,e.length-s):e[s-1]=null));for(var a=0,o=s;a<o;){var p=a++,h=t[p];e[p]=h}Reflect.setProperty(i,r,e)}))}},handleCreateKeyframe:function(n,e,t,i,r,l,s){if(null==s.value)if("Float"==n)if(null!=l&&l instanceof ceramic_TimelineFloatKeyframe){var a=l;a.value=t,a.index=i,a.easing=r,s.value=a}else s.value=new ceramic_TimelineFloatKeyframe(t,i,r);else if("ceramic.Color"==n)if(null!=l&&l instanceof ceramic_TimelineColorKeyframe){var o=l;o.value=t,o.index=i,o.easing=r,s.value=o}else s.value=new ceramic_TimelineColorKeyframe(t,i,r);else if("Bool"==n)if(null!=l&&l instanceof ceramic_TimelineBoolKeyframe){var p=l;p.value=t,p.index=i,p.easing=r,s.value=p}else s.value=new ceramic_TimelineBoolKeyframe(t,i,r);else if("Array<Float>"==n)if(null!=l&&l instanceof ceramic_TimelineFloatArrayKeyframe){var h=l,u=t;h.value=[].concat(u),h.index=i,h.easing=r,s.value=h}else s.value=new ceramic_TimelineFloatArrayKeyframe(t,i,r)},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offCreateTrack(),this.offBindTrack(),this.offCreateKeyframe()},__class__:ceramic_Timelines});var ceramic_Timer=function(){};t["ceramic.Timer"]=ceramic_Timer,ceramic_Timer.__name__="ceramic.Timer",ceramic_Timer.__properties__={get_timestamp:"get_timestamp"},ceramic_Timer.get_timestamp=function(){return ceramic_Timer.startTimestamp+ceramic_Timer.now},ceramic_Timer.update=function(n,e){ceramic_Timer.now+=n,ceramic_Timer.timestamp=ceramic_Timer.startTimestamp+ceramic_Timer.now+e,ceramic_Timer.next<=ceramic_Timer.now&&ceramic_App.app.beginUpdateCallbacks.push(ceramic_Timer.flush)},ceramic_Timer.flush=function(){ceramic_Timer.next=999999999;var n=ceramic_Timer.callbacks;ceramic_Timer.callbacks=[];for(var e=0,t=n.length;e<t;){var i=n[e++];if(!i.cleared)if(null==i.owner||i.owner._lifecycleState>=0)if(i.time<=ceramic_Timer.now)if(i.interval>=0){for(;i.time<=ceramic_Timer.now&&!i.cleared&&(i.callback(),0!=i.interval);)i.time+=i.interval;i.cleared||(ceramic_Timer.callbacks.push(i),ceramic_Timer.next=Math.min(i.time,ceramic_Timer.next))}else i.callback();else ceramic_Timer.callbacks.push(i),ceramic_Timer.next=Math.min(i.time,ceramic_Timer.next);else i.cleared=!0}},ceramic_Timer.delay=function(n,e,t){return ceramic_Timer.schedule(n,e,t,-1)},ceramic_Timer.interval=function(n,e,t){return ceramic_Timer.schedule(n,e,t,e)},ceramic_Timer.schedule=function(n,e,t,i){var r=ceramic_Timer.now+e;ceramic_Timer.next=Math.min(r,ceramic_Timer.next);var l=new ceramic_TimerCallback;return l.owner=n,l.callback=t,l.time=r,l.interval=i,ceramic_Timer.callbacks.push(l),$bind(l,l.clear)};var ceramic_TimerCallback=function(){this.cleared=!1,this.interval=-1,this.time=0,this.callback=null,this.owner=null};t["ceramic.TimerCallback"]=ceramic_TimerCallback,ceramic_TimerCallback.__name__="ceramic.TimerCallback",ceramic_TimerCallback.prototype={clear:function(){this.cleared=!0},__class__:ceramic_TimerCallback};var ceramic_Touch=function(n,e,t,i,r){this.index=n,this.x=e,this.y=t,this.deltaX=i,this.deltaY=r};t["ceramic.Touch"]=ceramic_Touch,ceramic_Touch.__name__="ceramic.Touch",ceramic_Touch.prototype={toString:function(){return""+Std.string({index:this.index,x:this.x,y:this.y,deltaX:this.deltaX,deltaY:this.deltaY})},__class__:ceramic_Touch};var ceramic_TouchInfo=function(n,e,t,i,r){this.touchIndex=n,this.buttonId=e,this.x=t,this.y=i,this.hits=r};t["ceramic.TouchInfo"]=ceramic_TouchInfo,ceramic_TouchInfo.__name__="ceramic.TouchInfo",ceramic_TouchInfo.prototype={toString:function(){return""+Std.string({touchIndex:this.touchIndex,buttonId:this.buttonId,x:this.x,y:this.y,hits:this.hits})},__class__:ceramic_TouchInfo};var ceramic_TouchesIterator=function(n){this.intMap=n,this.i=0,this.len=this.intMap.values.length};t["ceramic.TouchesIterator"]=ceramic_TouchesIterator,ceramic_TouchesIterator.__name__="ceramic.TouchesIterator",ceramic_TouchesIterator.prototype={hasNext:function(){for(;this.i<this.len&&null==this.intMap.values[this.i];)this.i++;return this.i<this.len},next:function(){var n=this.i++;return this.intMap.values[n]},__class__:ceramic_TouchesIterator};var ceramic_TrackerBackend=function(){this.backgroundQueue=new ceramic_BackgroundQueue};t["ceramic.TrackerBackend"]=ceramic_TrackerBackend,ceramic_TrackerBackend.__name__="ceramic.TrackerBackend",ceramic_TrackerBackend.prototype={onceImmediate:function(n){ceramic_App.app._onceImmediate(n)},readString:function(n){return ceramic_App.app.backend.io.readString(n)},saveString:function(n,e){return ceramic_App.app.backend.io.saveString(n,e)},appendString:function(n,e){return ceramic_App.app.backend.io.appendString(n,e)},warning:function(n,e){ceramic_App.app.logger.warning(n,e)},error:function(n,e){ceramic_App.app.logger.error(n,e)},success:function(n,e){ceramic_App.app.logger.success(n,e)},runInBackground:function(n){this.backgroundQueue.schedule(n)},runInMain:function(n){ceramic_Runner.runInMain(n)},interval:function(n,e,t){return ceramic_Timer.schedule(n,e,t,e)},delay:function(n,e,t){return ceramic_Timer.schedule(n,e,t,-1)},storageDirectory:function(){return null},pathJoin:function(n){return ceramic_Path.join(n)},__class__:ceramic_TrackerBackend};var ceramic_TransformPool=function(){};t["ceramic.TransformPool"]=ceramic_TransformPool,ceramic_TransformPool.__name__="ceramic.TransformPool",ceramic_TransformPool.get=function(){return ceramic_TransformPool.availableTransforms.length>0?ceramic_TransformPool.availableTransforms.pop():new ceramic_Transform},ceramic_TransformPool.recycle=function(n){n.offChange(),n.a=1,n.b=0,n.c=0,n.d=1,n.tx=0,n.ty=0,n._aPrev=1,n._bPrev=0,n._cPrev=0,n._dPrev=1,n._txPrev=0,n._tyPrev=0,n.changed=!1,n.changedDirty=!1,ceramic_TransformPool.availableTransforms.push(n)},ceramic_TransformPool.clear=function(){ceramic_TransformPool.availableTransforms.length>0&&(ceramic_TransformPool.availableTransforms=[])};var ceramic_Triangulate=function(){};t["ceramic.Triangulate"]=ceramic_Triangulate,ceramic_Triangulate.__name__="ceramic.Triangulate",ceramic_Triangulate.triangulate=function(n,e,t,i){(null==i&&(i=m.POLY2TRI),e.length>0)&&(0!=e.length&&(e.length>0?e.splice(0,e.length):e[-1]=null));switch(i._hx_index){case 0:earcut_Earcut.earcut(n,t,2,e);break;case 1:try{null==ceramic_Triangulate.poly2triSweepContext?(ceramic_Triangulate.poly2triSweepContext=new poly2tri_SweepContext,ceramic_Triangulate.poly2triSweep=new poly2tri_Sweep(ceramic_Triangulate.poly2triSweepContext)):ceramic_Triangulate.poly2triSweepContext.reset();for(var r=0,l=0,s=0,a=n.length,o=0,p=0,h=null;s<a;){var u=ceramic_Triangulate.poly2triPointsPool[r];null==u?u=new poly2tri_Point(n[s],n[s+1]):(u.x=n[s],u.y=n[s+1]),u.id=l++,0==s&&(h=u),s>0&&o==u.x&&p==u.y||s==a-2&&h.x==u.x&&h.y==u.y||(o=u.x,p=u.y,ceramic_Triangulate.poly2triPoints[r]=u,++r),s+=2}var _=a/2|0;ceramic_Triangulate.poly2triPoints.length>_&&(g=ceramic_Triangulate.poly2triPoints).length!=_&&(g.length>_?g.splice(_,g.length-_):g[_-1]=null);for(var c=ceramic_Triangulate.poly2triSweepContext,d=ceramic_Triangulate.poly2triPoints,f=0,x=d.length;f<x;){var b=d[((D=f++)+1)%d.length];c.edge_list.push(poly2tri_Pool.getEdge(d[D],b))}for(f=0,x=d.length;f<x;){s=f++;c.points.push(d[s])}if(null!=t){var y=n.length/2|0,v=t.length;for(f=0,x=v;f<x;){for(var g,z=f++,w=t[z],O=z<v-1?t[z+1]:y,C=0,E=w,U=O;E<U;){var M=E++;ceramic_Triangulate.poly2triPoints[C]=ceramic_Triangulate.poly2triPointsPool[M],++C}if(ceramic_Triangulate.poly2triPoints.length>C)if((g=ceramic_Triangulate.poly2triPoints).length!=C)if(g.length>C)g.splice(C,g.length-C);else g[C-1]=null;c=ceramic_Triangulate.poly2triSweepContext,d=ceramic_Triangulate.poly2triPoints;for(var T=0,k=d.length;T<k;){var D;b=d[((D=T++)+1)%d.length];c.edge_list.push(poly2tri_Pool.getEdge(d[D],b))}for(var S=0,A=d.length;S<A;){s=S++;c.points.push(d[s])}}}ceramic_Triangulate.poly2triSweep.triangulate();var P=ceramic_Triangulate.poly2triSweepContext.triangles;for(f=0,x=P.length;f<x;){var V=P[f++].points;e.push(V[0].id),e.push(V[1].id),e.push(V[2].id)}}catch(f){var I=haxe_Exception.caught(f).unwrap();ceramic_App.app.logger.warning("Failed to triangulate with poly2tri: "+Std.string(I),{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Triangulate.hx",lineNumber:127,className:"ceramic.Triangulate",methodName:"triangulate"})}poly2tri_Pool.recycleAll()}};var m=i["ceramic.TriangulateMethod"]={__ename__:"ceramic.TriangulateMethod",__constructs__:null,EARCUT:{_hx_name:"EARCUT",_hx_index:0,__enum__:"ceramic.TriangulateMethod",toString:$estr},POLY2TRI:{_hx_name:"POLY2TRI",_hx_index:1,__enum__:"ceramic.TriangulateMethod",toString:$estr}};m.__constructs__=[m.EARCUT,m.POLY2TRI];var ceramic_Tween=function(n,e,t,i,r){this.customEasing=null,ceramic_Entity.call(this),this.owner=n,this.easing=e,this.duration=t,this.fromValue=i,this.toValue=r,this.init()};t["ceramic.Tween"]=ceramic_Tween,ceramic_Tween.__name__="ceramic.Tween",ceramic_Tween.start=function(n,e,t,i,r,l){var s=new ceramic_Tween(n,null==e?h.QUAD_EASE_IN_OUT:e,t,i,r);return null!=l&&s.onUpdate(n,l),s},ceramic_Tween.tick=function(n){for(var e=ceramic_Tween._tweens.length,t=0,i=e;t<i;){var r=t++,l=ceramic_Tween._tweens[r];ceramic_Tween._iteratedTweens[r]=l}for(t=0,i=e;t<i;){r=t++,l=ceramic_Tween._iteratedTweens[r];if(ceramic_Tween._iteratedTweens[r]=null,null!=l.owner&&l.owner._lifecycleState<0)l.destroy();else if(l.remaining-=n,l.remaining<=0)l.emitUpdate(l.toValue,l.duration),l.emitComplete(),l.destroy();else{var s=l.duration-l.remaining;ceramic__$Tween_TweenEasingFunction.k=s/l.duration;ceramic__$Tween_TweenEasingFunction.k;ceramic__$Tween_TweenEasingFunction.customEasing=l.customEasing,l.computedEasing(),ceramic__$Tween_TweenEasingFunction.customEasing=null,l.emitUpdate(l.fromValue+(l.toValue-l.fromValue)*ceramic__$Tween_TweenEasingFunction.k,s)}}},ceramic_Tween.computeEasing=function(n){switch(n._hx_index){case 0:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.none;break;case 1:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.linear;break;case 2:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseIn;break;case 3:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseInOut;break;case 4:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseOut;break;case 5:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseIn;break;case 6:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseInOut;break;case 7:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseOut;break;case 8:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseIn;break;case 9:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseInOut;break;case 10:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseOut;break;case 11:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseIn;break;case 12:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseInOut;break;case 13:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseOut;break;case 14:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseIn;break;case 15:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseInOut;break;case 16:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseOut;break;case 17:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseIn;break;case 18:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseInOut;break;case 19:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseOut;break;case 20:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseIn;break;case 21:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseInOut;break;case 22:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseOut;break;case 23:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseIn;break;case 24:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseInOut;break;case 25:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseOut;break;case 26:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseIn;break;case 27:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseInOut;break;case 28:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseOut;break;case 29:var t=n.x1,i=n.y1,r=n.x2,l=n.y2;ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.custom,ceramic_Tween._computedCustomEasing=$bind(e=ceramic_BezierEasing.get(t,i,r,l),e.ease);break;case 30:var s=n.easing;ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.custom,ceramic_Tween._computedCustomEasing=s}},ceramic_Tween.ease=function(n,t){switch(ceramic__$Tween_TweenEasingFunction.k=t,n._hx_index){case 0:ceramic__$Tween_TweenEasingFunction.none();break;case 1:ceramic__$Tween_TweenEasingFunction.linear();break;case 2:ceramic__$Tween_TweenEasingFunction.backEaseIn();break;case 3:ceramic__$Tween_TweenEasingFunction.backEaseInOut();break;case 4:ceramic__$Tween_TweenEasingFunction.backEaseOut();break;case 5:ceramic__$Tween_TweenEasingFunction.quadEaseIn();break;case 6:ceramic__$Tween_TweenEasingFunction.quadEaseInOut();break;case 7:ceramic__$Tween_TweenEasingFunction.quadEaseOut();break;case 8:ceramic__$Tween_TweenEasingFunction.cubicEaseIn();break;case 9:ceramic__$Tween_TweenEasingFunction.cubicEaseInOut();break;case 10:ceramic__$Tween_TweenEasingFunction.cubicEaseOut();break;case 11:ceramic__$Tween_TweenEasingFunction.quartEaseIn();break;case 12:ceramic__$Tween_TweenEasingFunction.quartEaseInOut();break;case 13:ceramic__$Tween_TweenEasingFunction.quartEaseOut();break;case 14:ceramic__$Tween_TweenEasingFunction.quintEaseIn();break;case 15:ceramic__$Tween_TweenEasingFunction.quintEaseInOut();break;case 16:ceramic__$Tween_TweenEasingFunction.quintEaseOut();break;case 17:ceramic__$Tween_TweenEasingFunction.bounceEaseIn();break;case 18:ceramic__$Tween_TweenEasingFunction.bounceEaseInOut();break;case 19:ceramic__$Tween_TweenEasingFunction.bounceEaseOut();break;case 20:ceramic__$Tween_TweenEasingFunction.elasticEaseIn();break;case 21:ceramic__$Tween_TweenEasingFunction.elasticEaseInOut();break;case 22:ceramic__$Tween_TweenEasingFunction.elasticEaseOut();break;case 23:ceramic__$Tween_TweenEasingFunction.expoEaseIn();break;case 24:ceramic__$Tween_TweenEasingFunction.expoEaseInOut();break;case 25:ceramic__$Tween_TweenEasingFunction.expoEaseOut();break;case 26:ceramic__$Tween_TweenEasingFunction.sineEaseIn();break;case 27:ceramic__$Tween_TweenEasingFunction.sineEaseInOut();break;case 28:ceramic__$Tween_TweenEasingFunction.sineEaseOut();break;case 29:var i=n.x1,r=n.y1,l=n.x2,s=n.y2;ceramic__$Tween_TweenEasingFunction.customEasing=$bind(e=ceramic_BezierEasing.get(i,r,l,s),e.ease),ceramic__$Tween_TweenEasingFunction.custom(),ceramic__$Tween_TweenEasingFunction.customEasing=null;break;case 30:var a=n.easing;ceramic__$Tween_TweenEasingFunction.customEasing=a,ceramic__$Tween_TweenEasingFunction.custom(),ceramic__$Tween_TweenEasingFunction.customEasing=null}return ceramic__$Tween_TweenEasingFunction.k},ceramic_Tween.easingFunction=function(n){switch(n._hx_index){case 0:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.none;break;case 1:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.linear;break;case 2:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseIn;break;case 3:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseInOut;break;case 4:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseOut;break;case 5:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseIn;break;case 6:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseInOut;break;case 7:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseOut;break;case 8:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseIn;break;case 9:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseInOut;break;case 10:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseOut;break;case 11:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseIn;break;case 12:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseInOut;break;case 13:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseOut;break;case 14:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseIn;break;case 15:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseInOut;break;case 16:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseOut;break;case 17:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseIn;break;case 18:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseInOut;break;case 19:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseOut;break;case 20:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseIn;break;case 21:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseInOut;break;case 22:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseOut;break;case 23:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseIn;break;case 24:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseInOut;break;case 25:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseOut;break;case 26:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseIn;break;case 27:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseInOut;break;case 28:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseOut;break;case 29:var t=n.x1,i=n.y1,r=n.x2,l=n.y2;ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.custom,ceramic_Tween._computedCustomEasing=$bind(e=ceramic_BezierEasing.get(t,i,r,l),e.ease);break;case 30:var s=n.easing;ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.custom,ceramic_Tween._computedCustomEasing=s}var a=ceramic_Tween._computedEasingFunction,o=ceramic_Tween._computedCustomEasing;return function(n){return ceramic__$Tween_TweenEasingFunction.k=n,ceramic__$Tween_TweenEasingFunction.customEasing=o,a(),ceramic__$Tween_TweenEasingFunction.customEasing=null,ceramic__$Tween_TweenEasingFunction.k}},ceramic_Tween.__super__=ceramic_Entity,ceramic_Tween.prototype=$extend(ceramic_Entity.prototype,{emitUpdate:function(n,e){var t=0;if(null!=this.__cbOnUpdate&&(t+=this.__cbOnUpdate.length),null!=this.__cbOnceUpdate&&(t+=this.__cbOnceUpdate.length),t>0){var i=ceramic_ArrayPool.pool(t),r=i.get(),l=0;if(null!=this.__cbOnUpdate)for(var s=0,a=this.__cbOnUpdate.length;s<a;){var o=s++;!0?(r.vector[l]=this.__cbOnUpdate[o],++l):--t}if(null!=this.__cbOnceUpdate){var p=null,h=null;for(s=0,a=this.__cbOnceUpdate.length;s<a;){o=s++;if(!0){r.vector[l]=this.__cbOnceUpdate[o],this.__cbOnceUpdate[o]=null;var u=this.__cbOnceOwnerUnbindUpdate[o];this.__cbOnceOwnerUnbindUpdate[o]=null,null!=u&&u(),++l}else--t,null==p&&(p=[],h=[],[]),p.push(this.__cbOnceOwnerUnbindUpdate[o]),h.push(this.__cbOnceUpdate[o])}this.__cbOnceOwnerUnbindUpdate=p,this.__cbOnceUpdate=h}for(s=0,a=t;s<a;){l=s++;(0,r.vector[l])(n,e)}i.release(r),r=null}},onUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindUpdate&&(this.__cbOnOwnerUnbindUpdate=[]),this.__cbOnOwnerUnbindUpdate.push(null);null==this.__cbOnUpdate&&(this.__cbOnUpdate=[]),this.__cbOnUpdate.push(e)},onceUpdate:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event update because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offUpdate(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindUpdate&&(this.__cbOnceOwnerUnbindUpdate=[]),this.__cbOnceOwnerUnbindUpdate.push(null);null==this.__cbOnceUpdate&&(this.__cbOnceUpdate=[]),this.__cbOnceUpdate.push(e)},offUpdate:function(n){if(null!=n){var e;null!=this.__cbOnUpdate&&-1!=(e=this.__cbOnUpdate.indexOf(n))&&(this.__cbOnUpdate.splice(e,1),null!=(l=this.__cbOnOwnerUnbindUpdate[e])&&l(),this.__cbOnOwnerUnbindUpdate.splice(e,1)),null!=this.__cbOnceUpdate&&-1!=(e=this.__cbOnceUpdate.indexOf(n))&&(this.__cbOnceUpdate.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindUpdate[e])&&l(),this.__cbOnceOwnerUnbindUpdate.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindUpdate){for(var t=0,i=this.__cbOnOwnerUnbindUpdate.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindUpdate[r])&&l()}this.__cbOnOwnerUnbindUpdate=null}if(null!=this.__cbOnceOwnerUnbindUpdate){for(t=0,i=this.__cbOnceOwnerUnbindUpdate.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindUpdate[r])&&l()}this.__cbOnceOwnerUnbindUpdate=null}this.__cbOnUpdate=null,this.__cbOnceUpdate=null}},listensUpdate:function(){return null!=this.__cbOnUpdate&&this.__cbOnUpdate.length>0||null!=this.__cbOnceUpdate&&this.__cbOnceUpdate.length>0},emitComplete:function(){var n=0;if(null!=this.__cbOnComplete&&(n+=this.__cbOnComplete.length),null!=this.__cbOnceComplete&&(n+=this.__cbOnceComplete.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnComplete)for(var r=0,l=this.__cbOnComplete.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnComplete[s],++i):--n}if(null!=this.__cbOnceComplete){var a=null,o=null;for(r=0,l=this.__cbOnceComplete.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceComplete[s],this.__cbOnceComplete[s]=null;var p=this.__cbOnceOwnerUnbindComplete[s];this.__cbOnceOwnerUnbindComplete[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindComplete[s]),o.push(this.__cbOnceComplete[s])}this.__cbOnceOwnerUnbindComplete=a,this.__cbOnceComplete=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onComplete:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event complete because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offComplete(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindComplete&&(this.__cbOnOwnerUnbindComplete=[]),this.__cbOnOwnerUnbindComplete.push(null);null==this.__cbOnComplete&&(this.__cbOnComplete=[]),this.__cbOnComplete.push(e)},onceComplete:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event complete because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offComplete(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindComplete&&(this.__cbOnceOwnerUnbindComplete=[]),this.__cbOnceOwnerUnbindComplete.push(null);null==this.__cbOnceComplete&&(this.__cbOnceComplete=[]),this.__cbOnceComplete.push(e)},offComplete:function(n){if(null!=n){var e;null!=this.__cbOnComplete&&-1!=(e=this.__cbOnComplete.indexOf(n))&&(this.__cbOnComplete.splice(e,1),null!=(l=this.__cbOnOwnerUnbindComplete[e])&&l(),this.__cbOnOwnerUnbindComplete.splice(e,1)),null!=this.__cbOnceComplete&&-1!=(e=this.__cbOnceComplete.indexOf(n))&&(this.__cbOnceComplete.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindComplete[e])&&l(),this.__cbOnceOwnerUnbindComplete.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindComplete){for(var t=0,i=this.__cbOnOwnerUnbindComplete.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindComplete[r])&&l()}this.__cbOnOwnerUnbindComplete=null}if(null!=this.__cbOnceOwnerUnbindComplete){for(t=0,i=this.__cbOnceOwnerUnbindComplete.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindComplete[r])&&l()}this.__cbOnceOwnerUnbindComplete=null}this.__cbOnComplete=null,this.__cbOnceComplete=null}},listensComplete:function(){return null!=this.__cbOnComplete&&this.__cbOnComplete.length>0||null!=this.__cbOnceComplete&&this.__cbOnceComplete.length>0},init:function(){if(this.duration<=0)ceramic_App.app._onceImmediate($bind(this,this.immediateComplete));else{var n=this.easing;switch(n._hx_index){case 0:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.none;break;case 1:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.linear;break;case 2:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseIn;break;case 3:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseInOut;break;case 4:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.backEaseOut;break;case 5:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseIn;break;case 6:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseInOut;break;case 7:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quadEaseOut;break;case 8:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseIn;break;case 9:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseInOut;break;case 10:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.cubicEaseOut;break;case 11:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseIn;break;case 12:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseInOut;break;case 13:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quartEaseOut;break;case 14:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseIn;break;case 15:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseInOut;break;case 16:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.quintEaseOut;break;case 17:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseIn;break;case 18:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseInOut;break;case 19:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.bounceEaseOut;break;case 20:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseIn;break;case 21:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseInOut;break;case 22:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.elasticEaseOut;break;case 23:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseIn;break;case 24:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseInOut;break;case 25:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.expoEaseOut;break;case 26:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseIn;break;case 27:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseInOut;break;case 28:ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.sineEaseOut;break;case 29:var t=n.x1,i=n.y1,r=n.x2,l=n.y2;ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.custom,ceramic_Tween._computedCustomEasing=$bind(e=ceramic_BezierEasing.get(t,i,r,l),e.ease);break;case 30:var s=n.easing;ceramic_Tween._computedEasingFunction=ceramic__$Tween_TweenEasingFunction.custom,ceramic_Tween._computedCustomEasing=s}this.computedEasing=ceramic_Tween._computedEasingFunction,this.customEasing=ceramic_Tween._computedCustomEasing,ceramic_Tween._computedEasingFunction=null,ceramic_Tween._computedCustomEasing=null,ceramic_Tween._tweens.push(this),this.remaining=this.duration,ceramic_App.app._onceImmediate($bind(this,this.immediateStart))}},updateFromTick:function(n){if(null!=this.owner&&this.owner._lifecycleState<0)this.destroy();else if(this.remaining-=n,this.remaining<=0)this.emitUpdate(this.toValue,this.duration),this.emitComplete(),this.destroy();else{var e=this.duration-this.remaining;ceramic__$Tween_TweenEasingFunction.k=e/this.duration;ceramic__$Tween_TweenEasingFunction.k;ceramic__$Tween_TweenEasingFunction.customEasing=this.customEasing,this.computedEasing(),ceramic__$Tween_TweenEasingFunction.customEasing=null,this.emitUpdate(this.fromValue+(this.toValue-this.fromValue)*ceramic__$Tween_TweenEasingFunction.k,e)}},immediateComplete:function(){this.emitUpdate(this.toValue,0),this.emitComplete(),this.destroy()},immediateStart:function(){this.emitUpdate(this.fromValue,0)},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.easing=null,this.owner=null,this.computedEasing=null,this.customEasing=null,HxOverrides.remove(ceramic_Tween._tweens,this),this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this))},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offUpdate(),this.offComplete()},__class__:ceramic_Tween});var ceramic__$Tween_TweenEasingFunction=function(){};t["ceramic._Tween.TweenEasingFunction"]=ceramic__$Tween_TweenEasingFunction,ceramic__$Tween_TweenEasingFunction.__name__="ceramic._Tween.TweenEasingFunction",ceramic__$Tween_TweenEasingFunction.custom=function(){ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.customEasing(ceramic__$Tween_TweenEasingFunction.k)},ceramic__$Tween_TweenEasingFunction.none=function(){ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k>=1?1:0},ceramic__$Tween_TweenEasingFunction.linear=function(){},ceramic__$Tween_TweenEasingFunction.backEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*(2.70158*ceramic__$Tween_TweenEasingFunction.k-1.70158)},ceramic__$Tween_TweenEasingFunction.backEaseInOut=function(){var n=1.70158;if(((e=ceramic__$Tween_TweenEasingFunction).k*=2)<1)ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*((1+(n*=1.525))*ceramic__$Tween_TweenEasingFunction.k-n)*.5;else{var e=ceramic__$Tween_TweenEasingFunction;ceramic__$Tween_TweenEasingFunction.k=.5*((e.k-=2)*ceramic__$Tween_TweenEasingFunction.k*((1+(n*=1.525))*ceramic__$Tween_TweenEasingFunction.k+n)+2)}},ceramic__$Tween_TweenEasingFunction.backEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=(ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k-1)*ceramic__$Tween_TweenEasingFunction.k*(2.70158*ceramic__$Tween_TweenEasingFunction.k+1.70158)+1},ceramic__$Tween_TweenEasingFunction.quadEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k*=ceramic__$Tween_TweenEasingFunction.k},ceramic__$Tween_TweenEasingFunction.quadEaseInOut=function(){(ceramic__$Tween_TweenEasingFunction.k*=2)<1?ceramic__$Tween_TweenEasingFunction.k=.5*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k:ceramic__$Tween_TweenEasingFunction.k=-.5*((ceramic__$Tween_TweenEasingFunction.k-1)*(ceramic__$Tween_TweenEasingFunction.k-3)-1)},ceramic__$Tween_TweenEasingFunction.quadEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=-ceramic__$Tween_TweenEasingFunction.k*(ceramic__$Tween_TweenEasingFunction.k-2)},ceramic__$Tween_TweenEasingFunction.cubicEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k},ceramic__$Tween_TweenEasingFunction.cubicEaseInOut=function(){var n;(ceramic__$Tween_TweenEasingFunction.k/=.5)<1?n=.5*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k:n=.5*((ceramic__$Tween_TweenEasingFunction.k-=2)*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k+2);ceramic__$Tween_TweenEasingFunction.k=n},ceramic__$Tween_TweenEasingFunction.cubicEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=--ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k+1},ceramic__$Tween_TweenEasingFunction.quartEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k},ceramic__$Tween_TweenEasingFunction.quartEaseInOut=function(){if(((n=ceramic__$Tween_TweenEasingFunction).k*=2)<1)ceramic__$Tween_TweenEasingFunction.k=.5*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k;else{var n=ceramic__$Tween_TweenEasingFunction;ceramic__$Tween_TweenEasingFunction.k=-.5*((n.k-=2)*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k-2)}},ceramic__$Tween_TweenEasingFunction.quartEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=-(--ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k-1)},ceramic__$Tween_TweenEasingFunction.quintEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k=ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k},ceramic__$Tween_TweenEasingFunction.quintEaseInOut=function(){if(((n=ceramic__$Tween_TweenEasingFunction).k*=2)<1)ceramic__$Tween_TweenEasingFunction.k=.5*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k;else{var n=ceramic__$Tween_TweenEasingFunction;ceramic__$Tween_TweenEasingFunction.k=.5*((n.k-=2)*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k+2)}},ceramic__$Tween_TweenEasingFunction.quintEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=--ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k*ceramic__$Tween_TweenEasingFunction.k+1},ceramic__$Tween_TweenEasingFunction.bounceEaseIn=function(){var n,e=1-ceramic__$Tween_TweenEasingFunction.k;n=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,ceramic__$Tween_TweenEasingFunction.k=1-n},ceramic__$Tween_TweenEasingFunction.bounceEaseInOut=function(){if(ceramic__$Tween_TweenEasingFunction.k<.5){var n=1-2*ceramic__$Tween_TweenEasingFunction.k;e=(n/=1)<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375,ceramic__$Tween_TweenEasingFunction.k=.5*(1-e)}else{var e;n=2*ceramic__$Tween_TweenEasingFunction.k-1;e=(n/=1)<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375,ceramic__$Tween_TweenEasingFunction.k=.5*e+.5}},ceramic__$Tween_TweenEasingFunction.bounceEaseOut=function(){var n,e=ceramic__$Tween_TweenEasingFunction.k;n=(e/=1)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,ceramic__$Tween_TweenEasingFunction.k=n},ceramic__$Tween_TweenEasingFunction._bounceEaseIn=function(n,e,t,i){var r=i-n;return t-((r/=i)<.36363636363636365?t*(7.5625*r*r):r<.7272727272727273?t*(7.5625*(r-=.5454545454545454)*r+.75):r<.9090909090909091?t*(7.5625*(r-=.8181818181818182)*r+.9375):t*(7.5625*(r-=.9545454545454546)*r+.984375))+e},ceramic__$Tween_TweenEasingFunction._bounceEaseOut=function(n,e,t,i){return(n/=i)<.36363636363636365?t*(7.5625*n*n)+e:n<.7272727272727273?t*(7.5625*(n-=.5454545454545454)*n+.75)+e:n<.9090909090909091?t*(7.5625*(n-=.8181818181818182)*n+.9375)+e:t*(7.5625*(n-=.9545454545454546)*n+.984375)+e},ceramic__$Tween_TweenEasingFunction.elasticEaseIn=function(){if(0!=ceramic__$Tween_TweenEasingFunction.k&&1!=ceramic__$Tween_TweenEasingFunction.k){var n,e=.1;e<1?(e=1,n=.1):n=.4/(2*Math.PI)*Math.asin(1/e);var t=ceramic__$Tween_TweenEasingFunction;ceramic__$Tween_TweenEasingFunction.k=-e*Math.exp(6.931471805599453*(t.k-=1))*Math.sin((ceramic__$Tween_TweenEasingFunction.k-n)*(2*Math.PI)/.4)}},ceramic__$Tween_TweenEasingFunction.elasticEaseInOut=function(){if(0!=ceramic__$Tween_TweenEasingFunction.k)if(2!=((t=ceramic__$Tween_TweenEasingFunction).k*=2)){var n=.44999999999999996,e=n/4;if(ceramic__$Tween_TweenEasingFunction.k<1){var t=ceramic__$Tween_TweenEasingFunction;ceramic__$Tween_TweenEasingFunction.k=Math.exp(6.931471805599453*(t.k-=1))*Math.sin((ceramic__$Tween_TweenEasingFunction.k-e)*(2*Math.PI)/n)*-.5}else{t=ceramic__$Tween_TweenEasingFunction;ceramic__$Tween_TweenEasingFunction.k=Math.exp(-6.931471805599453*(t.k-=1))*Math.sin((ceramic__$Tween_TweenEasingFunction.k-e)*(2*Math.PI)/n)*.5+1}}else ceramic__$Tween_TweenEasingFunction.k=1},ceramic__$Tween_TweenEasingFunction.elasticEaseOut=function(){if(0!=ceramic__$Tween_TweenEasingFunction.k&&1!=ceramic__$Tween_TweenEasingFunction.k){var n,e=.1;e<1?(e=1,n=.1):n=.4/(2*Math.PI)*Math.asin(1/e),ceramic__$Tween_TweenEasingFunction.k=e*Math.exp(-6.931471805599453*ceramic__$Tween_TweenEasingFunction.k)*Math.sin((ceramic__$Tween_TweenEasingFunction.k-n)*(2*Math.PI)/.4)+1}},ceramic__$Tween_TweenEasingFunction.expoEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k=0==ceramic__$Tween_TweenEasingFunction.k?0:Math.exp(6.931471805599453*(ceramic__$Tween_TweenEasingFunction.k-1))},ceramic__$Tween_TweenEasingFunction.expoEaseInOut=function(){0!=ceramic__$Tween_TweenEasingFunction.k&&(1!=ceramic__$Tween_TweenEasingFunction.k&&((ceramic__$Tween_TweenEasingFunction.k/=.5)<1?ceramic__$Tween_TweenEasingFunction.k=.5*Math.exp(6.931471805599453*(ceramic__$Tween_TweenEasingFunction.k-1)):ceramic__$Tween_TweenEasingFunction.k=.5*(2-Math.exp(-6.931471805599453*--ceramic__$Tween_TweenEasingFunction.k))))},ceramic__$Tween_TweenEasingFunction.expoEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=1==ceramic__$Tween_TweenEasingFunction.k?1:1-Math.exp(-6.931471805599453*ceramic__$Tween_TweenEasingFunction.k)},ceramic__$Tween_TweenEasingFunction.sineEaseIn=function(){ceramic__$Tween_TweenEasingFunction.k=1-Math.cos(ceramic__$Tween_TweenEasingFunction.k*(Math.PI/2))},ceramic__$Tween_TweenEasingFunction.sineEaseInOut=function(){ceramic__$Tween_TweenEasingFunction.k=-(Math.cos(Math.PI*ceramic__$Tween_TweenEasingFunction.k)-1)/2},ceramic__$Tween_TweenEasingFunction.sineEaseOut=function(){ceramic__$Tween_TweenEasingFunction.k=Math.sin(ceramic__$Tween_TweenEasingFunction.k*(Math.PI/2))};var ceramic_Utils=function(){};t["ceramic.Utils"]=ceramic_Utils,ceramic_Utils.__name__="ceramic.Utils",ceramic_Utils.realPath=function(n){return ceramic_Path.isAbsolute(n)||StringTools.startsWith(n,"http://")||StringTools.startsWith(n,"https://")||(n=ceramic_Path.join([ceramic_App.app.settings.assetsPath,n])),n},ceramic_Utils.getRtti=function(n){return ceramic_PlatformSpecific.getRtti(n)},ceramic_Utils.uniqueId=function(){switch(ceramic_Utils._nextUniqueIntCursor){case 0:ceramic_Utils._nextUniqueInt0=(ceramic_Utils._nextUniqueInt0+1)%2147483647;break;case 1:ceramic_Utils._nextUniqueInt1=(ceramic_Utils._nextUniqueInt1+1)%2147483647;break;case 2:ceramic_Utils._nextUniqueInt2=(ceramic_Utils._nextUniqueInt2+1)%2147483647;break;case 3:ceramic_Utils._nextUniqueInt3=(ceramic_Utils._nextUniqueInt3+1)%2147483647}ceramic_Utils._nextUniqueIntCursor=(ceramic_Utils._nextUniqueIntCursor+1)%4,null==(h=ceramic_Utils._nextUniqueInt0)&&(h=2147483646*Math.random()|0);var n,e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);var t=h%62|0;if((u=h/62|0)>0){var i=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(t).charAt(0);r=i+l}else{if(t>9)(d=t-10+65)>90&&(d+=6),i=String.fromCodePoint(d);else i=Std.string(t).charAt(0);r=Std.string(i)}if(e>9)(d=e-10+65)>90&&(d+=6),i=String.fromCodePoint(d);else i=Std.string(e).charAt(0);n=r+i}else{if(e>9)(d=e-10+65)>90&&(d+=6),r=String.fromCodePoint(d);else r=Std.string(e).charAt(0);n=Std.string(r)}null==(h=null)&&(h=2147483646*Math.random()|0);var r;e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var l=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(t).charAt(0);i=l+s}else{if(t>9)(d=t-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(t).charAt(0);i=Std.string(l)}if(e>9)(d=e-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(e).charAt(0);r=i+l}else{if(e>9)(d=e-10+65)>90&&(d+=6),i=String.fromCodePoint(d);else i=Std.string(e).charAt(0);r=Std.string(i)}null==(h=ceramic_Utils._nextUniqueInt1)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var s=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(t).charAt(0);l=s+a}else{if(t>9)(d=t-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(t).charAt(0);l=Std.string(s)}if(e>9)(d=e-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(e).charAt(0);i=l+s}else{if(e>9)(d=e-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(e).charAt(0);i=Std.string(l)}null==(h=null)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var a=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(t).charAt(0);s=a+o}else{if(t>9)(d=t-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(t).charAt(0);s=Std.string(a)}if(e>9)(d=e-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(e).charAt(0);l=s+a}else{if(e>9)(d=e-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(e).charAt(0);l=Std.string(s)}null==(h=ceramic_Utils._nextUniqueInt2)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var o=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(t).charAt(0);a=o+p}else{if(t>9)(d=t-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(t).charAt(0);a=Std.string(o)}if(e>9)(d=e-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(e).charAt(0);s=a+o}else{if(e>9)(d=e-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(e).charAt(0);s=Std.string(a)}null==(h=null)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var p=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),c=String.fromCodePoint(d);else c=Std.string(t).charAt(0);o=p+c}else{if(t>9)(d=t-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(t).charAt(0);o=Std.string(p)}if(e>9)(d=e-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(e).charAt(0);a=o+p}else{if(e>9)(d=e-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(e).charAt(0);a=Std.string(o)}null==(h=ceramic_Utils._nextUniqueInt3)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){var h;null==(h=u)&&(h=2147483646*Math.random()|0);var u;t=h%62|0;if((u=h/62|0)>0){var _,c=ceramic_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),_=String.fromCodePoint(d);else _=Std.string(t).charAt(0);p=c+_}else{if(t>9)(d=t-10+65)>90&&(d+=6),c=String.fromCodePoint(d);else c=Std.string(t).charAt(0);p=Std.string(c)}if(e>9)(d=e-10+65)>90&&(d+=6),c=String.fromCodePoint(d);else c=Std.string(e).charAt(0);o=p+c}else{var d;if(e>9)(d=e-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(e).charAt(0);o=Std.string(p)}return p=n+"-"+r+"-"+i+"-"+l+"-"+s+"-"+a+"-"+o},ceramic_Utils.randomId=function(n){null==n&&(n=32);for(var e=[];e.length<n;){var t=null;null==t&&(t=2147483646*Math.random()|0);var i,r=t%62|0,l=t/62|0;if(l>0){var s=l;null==s&&(s=2147483646*Math.random()|0);var a,o,p=s%62|0,h=s/62|0;if(h>0){var u,_=ceramic_Utils.base62Id(h);if(p>9){var c=p-10+65;c>90&&(c+=6),u=String.fromCodePoint(c)}else u=Std.string(p).charAt(0);a=_+u}else{var d;if(p>9){var f=p-10+65;f>90&&(f+=6),d=String.fromCodePoint(f)}else d=Std.string(p).charAt(0);a=Std.string(d)}if(r>9){var x=r-10+65;x>90&&(x+=6),o=String.fromCodePoint(x)}else o=Std.string(r).charAt(0);i=a+o}else{var b;if(r>9){var y=r-10+65;y>90&&(y+=6),b=String.fromCodePoint(y)}else b=Std.string(r).charAt(0);i=Std.string(b)}for(var v=0,m=i.length;v<m;){var g=v++;e.push(i.charAt(g))}}return ceramic_Extensions.shuffle(e),HxOverrides.substr(e.join(""),0,n)},ceramic_Utils.persistentId=function(n,e){null==e&&(e=32),null==n&&(n=0),null==ceramic_Utils._persistentIds&&(ceramic_Utils._persistentIds=new haxe_ds_IntMap);var t=ceramic_Utils._persistentIds.h[n];return null!=t?t:null!=(t=ceramic_App.app.backend.io.readString("persistentId_"+n))?(ceramic_Utils._persistentIds.h[n]=t,t):(t=ceramic_Utils.randomId(e),ceramic_App.app.backend.io.saveString("persistentId_"+n,t)||ceramic_App.app.logger.warning("Failed to save persistent id ("+t+") at slot "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/runtime/src/ceramic/Utils.hx",lineNumber:124,className:"ceramic.Utils",methodName:"persistentId"}),ceramic_Utils._persistentIds.h[n]=t,t)},ceramic_Utils.resetPersistentId=function(n){null==n&&(n=0),null!=ceramic_Utils._persistentIds&&ceramic_Utils._persistentIds.remove(n),ceramic_App.app.backend.io.saveString("persistentId_"+n,null)},ceramic_Utils.base62Id=function(n){null==n&&(n=2147483646*Math.random()|0);var e=n%62|0,t=n/62|0;if(t>0){var i,r,l=ceramic_Utils.base62Id(t);if(e>9)(r=e-10+65)>90&&(r+=6),i=String.fromCodePoint(r);else i=(null==e?"null":""+e).charAt(0);return l+i}return e>9?((r=e-10+65)>90&&(r+=6),l=String.fromCodePoint(r)):l=(null==e?"null":""+e).charAt(0),Std.string(l)},ceramic_Utils.println=function(n){var e=null;null!=(e=backend_ElectronRunner.electronRunner)?e.consoleLog("[error] "+n):console.log(""+n)},ceramic_Utils.printStackTrace=function(n){null==n&&(n=!1);var e="",t=null,i=null;try{throw new Error}catch(n){i=n}var r=(""+Std.string(i.stack)).split("\n"),l=r.length-1,s=-1!=navigator.platform.indexOf("Win");for(t=backend_ElectronRunner.electronRunner;l>=2;){var a=r[l];a=StringTools.ltrim(a),null!=t&&(a=StringTools.replace(a,"http://localhost:"+Std.string(t.serverPort)+"/file:"+(s?"/":""),""),a=StringTools.replace(a,"http://localhost:"+Std.string(t.serverPort)+"/",Std.string(t.appFiles)+"/"));var o=a;n||(null!=t?t.consoleLog("[error] "+Std.string(o)):console.log(""+Std.string(o))),e+=Std.string(o),e+=String.fromCodePoint(10),--l}return e},ceramic_Utils.stackItemToString=function(n){var e="";switch(n._hx_index){case 0:e="a C function";break;case 1:e="module "+n.m;break;case 2:n.column;var t=n.s,i=n.file,r=n.line;null!=t&&(e=ceramic_Utils.stackItemToString(t)+" ("),e+=i,e+=" line ",e+=r,null!=t&&(e+=")");break;case 3:e+=n.classname,e+=".",e+=n.method;break;case 4:e+="local function #",e+=n.v}return e},ceramic_Utils.radToDeg=function(n){return 57.29577951308232*n},ceramic_Utils.degToRad=function(n){return.017453292519943295*n},ceramic_Utils.round=function(n,e){if(null==e&&(e=0),e>0){for(var t=1;e-- >0;)t*=10;return Math.round(n*t)/t}return Math.round(n)},ceramic_Utils.hashCode=function(n){var e=0;if(0==n.length)return e;for(var t=0,i=n.length;t<i;){var r=t++;e=(e<<5)-e+HxOverrides.cca(n,r),e&=e}return e},ceramic_Utils.uniformFrequencyList=function(n,e,t){for(var i=[],r=[],l=0,s=n.length;l<s;){r[u=l++]=0}for(l=0,s=e.length;l<s;){r[u=l++]+=e[u]}for(l=0,s=t;l<s;){l++;for(var a=0,o=0,p=0,h=n.length;p<h;){var u,_=r[u=p++];_>o&&(a=u,o=_)}i.push(n[a]),r[a]-=1;for(var c=0,d=e.length;c<d;){var f=c++;r[f]+=e[f]}}return i},ceramic_Utils.upperCaseToCamelCase=function(n,e){null==e&&(e=!0);for(var t="",i=n.length,r=0,l=e;r<i;){var s=n.charAt(r);"_"==s?l=!0:l?(l=!1,t+=Std.string(s.toUpperCase())):t+=Std.string(s.toLowerCase()),++r}return t},ceramic_Utils.camelCaseToUpperCase=function(n,e){null==e&&(e=!0);for(var t="",i=n.length,r=0,l=!1;r<i;){var s=n.charAt(r);if("."==s)t+="_",l=!1;else if(ceramic_Utils.RE_ASCII_CHAR.match(s)){var a=s.toUpperCase(),o=s==a;l&&o&&(t+="_",l=!1),t+=null==a?"null":""+a,l=!o}else t+="_",l=!1;++r}for(var p=t;StringTools.endsWith(p,"_");)p=HxOverrides.substr(p,0,p.length-1);return p},ceramic_Utils.functionEquals=function(n,e){return n==e},ceramic_Utils.decodeUriParams=function(n){for(var e=new haxe_ds_StringMap,t=n.split("&"),i=0;i<t.length;){var r=t[i];++i;var l=r.indexOf("=");if(-1!=l){var s=r.substring(0,l),a=decodeURIComponent(s.split("+").join(" ")),o=r.substring(l+1),p=decodeURIComponent(o.split("+").join(" "));e.h[a]=p}}return e},ceramic_Utils.sinRatio=function(n){return n>=1&&(n%=1),.5*(Math.sin(n*Math.PI*2)+1)},ceramic_Utils.cosRatio=function(n){return n>=1&&(n%=1),.5*(Math.cos(n*Math.PI*2)+1)},ceramic_Utils.valueFromInterpolatedKey=function(n,e,t){var i=n.length-1,r=0;if(t<n[0])r=e[0];else if(t>=n[i])r=e[i];else{for(var l=0,s=1;t>n[s];)++l,++s;var a=(t-n[l])/(n[s]-n[l]);r=e[l]+(e[s]-e[l])*a}return r},ceramic_Utils.yFromInterpolatedX=function(n,e){var t=n.length-2,i=0;if(e<n[0])i=n[1];else if(e>=n[t]){i=n[t+1]}else{for(var r=0,l=2;e>n[l];)r+=2,l+=2;var s=(e-n[r])/(n[l]-n[r]),a=r+1,o=l+1;i=n[a]+(n[o]-n[a])*s}return i},ceramic_Utils.command=function(n,e,t,i){null==e&&(e=[]),i(-1,null,null)};var ceramic_VisualNapePhysics=function(n,e,t,i,r,l,s,a,o){var p;switch(this.body=null,this.visual=null,ceramic_Entity.call(this),n._hx_index){case 0:null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),p=zpp_$nape_util_ZPP_$Flags.BodyType_STATIC;break;case 1:null==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),p=zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC;break;case 2:null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),p=zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC}var h=r,u=l;null==u&&(u=0),null==h&&(h=0);var _,c=!0;if(null==c&&(c=!1),null==(l=u)&&(l=0),null==(r=h)&&(r=0),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?_=new nape_geom_Vec2:(_=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=_.zpp_pool,_.zpp_pool=null,_.zpp_disp=!1,_==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==_.zpp_inner){var d;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?d=new zpp_$nape_geom_ZPP_$Vec2:(d=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=r,d.y=l,_.zpp_inner=d,_.zpp_inner.outer=_}else{if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f;if((w=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=w._isimmutable&&w._isimmutable(),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(w=_.zpp_inner)._validate&&w._validate(),_.zpp_inner.x==r){if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(w=_.zpp_inner)._validate&&w._validate(),f=_.zpp_inner.y==l}else f=!1;if(!f)_.zpp_inner.x=r,_.zpp_inner.y=l,null!=(w=_.zpp_inner)._invalidate&&w._invalidate(w)}_.zpp_inner.weak=c,this.body=new nape_phys_Body(p,_),null!=e||null!=t&&0!=t.length||(e=new nape_shape_Polygon(nape_shape_Polygon.box(s,a)));var x=.017453292519943295*o;if((w=this.body).zpp_inner.immutable_midstep("Body::rotation"),w.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(1==w.zpp_inner.type&&null!=w.zpp_inner.space)throw haxe_Exception.thrown("Error: Static objects cannot be rotated once inside a Space");if(w.zpp_inner.rot!=x){if(x!=x)throw haxe_Exception.thrown("Error: Body::rotation cannot be NaN");w.zpp_inner.rot=x;var b=w.zpp_inner;b.zip_axis=!0;for(var y=b.shapes.head;null!=y;){var v=y.elt;1==v.type&&(v.polygon.invalidate_gverts(),v.polygon.invalidate_gaxi()),v.invalidate_worldCOM(),y=y.next}b.zip_worldCOM=!0,w.zpp_inner.wake()}null!=e&&((w=this.body.zpp_inner.wrap_shapes).zpp_inner.reverse_flag?w.push(e):w.unshift(e));if(null!=t)for(var m=0,g=t.length;m<g;){var z=m++,w=this.body.zpp_inner.wrap_shapes,O=t[z];w.zpp_inner.reverse_flag?w.push(O):w.unshift(O)}null!=i&&this.body.setShapeMaterials(i),ceramic_App.app.nape._freezeItems?ceramic_App.app.nape._createdItems.push(this):ceramic_App.app.nape.items.push(this)};t["ceramic.VisualNapePhysics"]=ceramic_VisualNapePhysics,ceramic_VisualNapePhysics.__name__="ceramic.VisualNapePhysics",ceramic_VisualNapePhysics.__super__=ceramic_Entity,ceramic_VisualNapePhysics.prototype=$extend(ceramic_Entity.prototype,{destroy:function(){if(!(this._lifecycleState<=-2)){this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this);var n=this.body,e=null;if(null!=n.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");if(n.zpp_inner.immutable_midstep("Body::space"),n.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if((null==n.zpp_inner.space?null:n.zpp_inner.space.outer)!=e)null!=(null==n.zpp_inner.space?null:n.zpp_inner.space.outer)&&(n.zpp_inner.component.woken=!1),null!=(null==n.zpp_inner.space?null:n.zpp_inner.space.outer)&&(null==n.zpp_inner.space?null:n.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(n);n.zpp_inner.space;null!=this.visual&&(this.visual.nape==this&&this.visual.set_nape(null),this.visual=null),ceramic_App.app.nape._freezeItems?ceramic_App.app.nape._destroyedItems.push(this):HxOverrides.remove(ceramic_App.app.nape.items,this)}},__class__:ceramic_VisualNapePhysics});var ceramic_VisualTransition=function(n,e){null==e&&(e=.3),this.initializerName=null,this.transformInTransition=null,this.transformEndToNull=!1,this.transformEnd=null,this.transformStart=null,this.transformTarget=null,this.transformTween=null,this.transformAssignedInstance=null,this.transformAssigned=!1,this.transformChanged=!1,this.translateYEnd=0,this.translateYStart=0,this.translateYTarget=0,this.translateYTween=null,this.translateYChanged=!1,this.translateXEnd=0,this.translateXStart=0,this.translateXTarget=0,this.translateXTween=null,this.translateXChanged=!1,this.alphaEnd=0,this.alphaStart=0,this.alphaTarget=0,this.alphaTween=null,this.alphaChanged=!1,this.colorEnd=-1,this.colorStart=-1,this.colorTarget=-1,this.colorTween=null,this.colorChanged=!1,this.heightEnd=0,this.heightStart=0,this.heightTarget=0,this.heightTween=null,this.heightChanged=!1,this.widthEnd=0,this.widthStart=0,this.widthTarget=0,this.widthTween=null,this.widthChanged=!1,this.rotationEnd=0,this.rotationStart=0,this.rotationTarget=0,this.rotationTween=null,this.rotationChanged=!1,this.anchorYEnd=0,this.anchorYStart=0,this.anchorYTarget=0,this.anchorYTween=null,this.anchorYChanged=!1,this.anchorXEnd=0,this.anchorXStart=0,this.anchorXTarget=0,this.anchorXTween=null,this.anchorXChanged=!1,this.skewYEnd=0,this.skewYStart=0,this.skewYTarget=0,this.skewYTween=null,this.skewYChanged=!1,this.skewXEnd=0,this.skewXStart=0,this.skewXTarget=0,this.skewXTween=null,this.skewXChanged=!1,this.scaleYEnd=0,this.scaleYStart=0,this.scaleYTarget=0,this.scaleYTween=null,this.scaleYChanged=!1,this.scaleXEnd=0,this.scaleXStart=0,this.scaleXTarget=0,this.scaleXTween=null,this.scaleXChanged=!1,this.yEnd=0,this.yStart=0,this.yTarget=0,this.yTween=null,this.yChanged=!1,this.xEnd=0,this.xStart=0,this.xTarget=0,this.xTween=null,this.xChanged=!1,this.anyPropertyChanged=!1,ceramic_Entity.call(this),this.easing=n,this.duration=e};t["ceramic.VisualTransition"]=ceramic_VisualTransition,ceramic_VisualTransition.__name__="ceramic.VisualTransition",ceramic_VisualTransition.__interfaces__=[ceramic_Component],ceramic_VisualTransition.transition=function(n,e,t,i){var r=n.component("transition");return null==r&&(r=new ceramic_VisualTransition,n.component("transition",r)),r.run(e,t,i)},ceramic_VisualTransition.__super__=ceramic_Entity,ceramic_VisualTransition.prototype=$extend(ceramic_Entity.prototype,{bindAsComponent:function(){},run:function(n,e,t){var i=this;null==n&&(n=this.easing),-1==e&&(e=this.duration),this.anyPropertyChanged=!1,this.xChanged=!1,this.yChanged=!1,this.scaleXChanged=!1,this.scaleYChanged=!1,this.translateXChanged=!1,this.translateYChanged=!1,this.skewXChanged=!1,this.skewYChanged=!1,this.anchorXChanged=!1,this.anchorYChanged=!1,this.rotationChanged=!1,this.widthChanged=!1,this.heightChanged=!1,this.colorChanged=!1,this.alphaChanged=!1,this.transformAssigned=!1,this.transformAssignedInstance=null,this.transformChanged=!1;var r=this.entity.x,l=this.entity.y,s=this.entity.scaleX,a=this.entity.scaleY,o=null!=(E=this.entity).transform?E.transform.tx:0,h=null!=(E=this.entity).transform?E.transform.ty:0,u=this.entity.skewX,_=this.entity.skewY,c=this.entity.anchorX,d=this.entity.anchorY,f=this.entity.rotation,x=this.entity.get_width(),b=this.entity.get_height(),y=-1,v=!1;null!=this.entity.asQuad?(y=this.entity.asQuad.color,v=!0):null!=this.entity.asMesh&&(y=this.entity.asMesh.get_color(),v=!0);var m,g,z=this.entity.alpha;if(null!=this.entity.transform){var w=this.entity.transform;(E=ceramic_VisualTransition._currentTransform).a=w.a,E.b=w.b,E.c=w.c,E.d=w.d,E.tx=w.tx,E.ty=w.ty,E.changedDirty=!0,(E=ceramic_VisualTransition._currentTransform)._aPrev=E.a,E._bPrev=E.b,E._cPrev=E.c,E._dPrev=E.d,E._txPrev=E.tx,E._tyPrev=E.ty,E.changed=!1,ceramic_VisualTransition._currentTransform.changedDirty=!1,m=ceramic_VisualTransition._currentTransform}else m=null;(this.xTarget=r,this.yTarget=l,this.scaleXTarget=s,this.scaleYTarget=a,this.translateXTarget=o,this.translateYTarget=h,this.skewXTarget=u,this.skewYTarget=_,this.anchorXTarget=c,this.anchorYTarget=d,this.rotationTarget=f,this.widthTarget=x,this.heightTarget=b,this.colorTarget=y,this.alphaTarget=z,null!=m)?((E=ceramic_VisualTransition._targetTransform).a=m.a,E.b=m.b,E.c=m.c,E.d=m.d,E.tx=m.tx,E.ty=m.ty,E.changedDirty=!0,(E=ceramic_VisualTransition._targetTransform)._aPrev=E.a,E._bPrev=E.b,E._cPrev=E.c,E._dPrev=E.d,E._txPrev=E.tx,E._tyPrev=E.ty,E.changed=!1,ceramic_VisualTransition._targetTransform.changedDirty=!1,g=ceramic_VisualTransition._targetTransform):g=null;this.transformTarget=g;if(t(this),!this.transformChanged&&null!=this.transformTarget){if(this.transformTarget.changedDirty)(E=this.transformTarget).changedDirty&&(E.changed=E.tx!=E._txPrev||E.ty!=E._tyPrev||E.a!=E._aPrev||E.b!=E._bPrev||E.c!=E._cPrev||E.d!=E._dPrev,E.changedDirty=!1);this.transformTarget.changed&&(this.transformChanged=!0,this.anyPropertyChanged=!0)}var O=null;if(this.anyPropertyChanged){if((O=this.entity.tween(n,e,0,1,(function(n,e){if(i.xTween==O&&i.entity.set_x(i.xStart+(i.xEnd-i.xStart)*n),i.yTween==O&&i.entity.set_y(i.yStart+(i.yEnd-i.yStart)*n),i.scaleXTween==O&&i.entity.set_scaleX(i.scaleXStart+(i.scaleXEnd-i.scaleXStart)*n),i.scaleYTween==O&&i.entity.set_scaleY(i.scaleYStart+(i.scaleYEnd-i.scaleYStart)*n),i.translateXTween==O){var t=i.entity,r=i.translateXStart+(i.translateXEnd-i.translateXStart)*n;0==r?null!=t.transform&&0!=t.transform.tx&&(t.transform.tx=0,t.transform.changedDirty=!0):(null==t.transform&&t.set_transform(new ceramic_Transform),t.transform.tx!=r&&(t.transform.tx=r,t.transform.changedDirty=!0))}if(i.translateYTween==O){t=i.entity;var l=i.translateYStart+(i.translateYEnd-i.translateYStart)*n;0==l?null!=t.transform&&0!=t.transform.ty&&(t.transform.ty=0,t.transform.changedDirty=!0):(null==t.transform&&t.set_transform(new ceramic_Transform),t.transform.ty!=l&&(t.transform.ty=l,t.transform.changedDirty=!0))}if(i.skewXTween==O&&i.entity.set_skewX(i.skewXStart+(i.skewXEnd-i.skewXStart)*n),i.skewYTween==O&&i.entity.set_skewY(i.skewYStart+(i.skewYEnd-i.skewYStart)*n),i.anchorXTween==O&&i.entity.set_anchorX(i.anchorXStart+(i.anchorXEnd-i.anchorXStart)*n),i.anchorYTween==O&&i.entity.set_anchorY(i.anchorYStart+(i.anchorYEnd-i.anchorYStart)*n),i.rotationTween==O&&i.entity.set_rotation(i.rotationStart+(i.rotationEnd-i.rotationStart)*n),i.widthTween==O&&i.entity.set_width(i.widthStart+(i.widthEnd-i.widthStart)*n),i.heightTween==O&&i.entity.set_height(i.heightStart+(i.heightEnd-i.heightStart)*n),i.colorTween==O)if(null!=i.entity.asQuad){var s=i.colorStart;null==(d=n)&&(d=.5);var a=(((c=i.colorEnd)>>16&255)-(s>>16&255))*d+(s>>16&255)|0,o=((c>>8&255)-(s>>8&255))*d+(s>>8&255)|0,h=((255&c)-(255&s))*d+(255&s)|0,u=p._new();u&=65535,u|=(a>255?255:a<0?0:a)<<16,u&=16711935,u|=(o>255?255:o<0?0:o)<<8,u&=16776960,u|=h>255?255:h<0?0:h,i.entity.asQuad.color=u}else if(null!=i.entity.asMesh){var _=i.entity.asMesh;s=i.colorStart;null==(d=n)&&(d=.5);a=(((c=i.colorEnd)>>16&255)-(s>>16&255))*d+(s>>16&255)|0,o=((c>>8&255)-(s>>8&255))*d+(s>>8&255)|0,h=((255&c)-(255&s))*d+(255&s)|0,u=p._new();u&=65535,u|=(a>255?255:a<0?0:a)<<16,u&=16711935,u|=(o>255?255:o<0?0:o)<<8,u&=16776960,u|=h>255?255:h<0?0:h,_.set_color(u)}else{var c,d,f=i.entity;s=i.colorStart;null==(d=n)&&(d=.5);a=(((c=i.colorEnd)>>16&255)-(s>>16&255))*d+(s>>16&255)|0,o=((c>>8&255)-(s>>8&255))*d+(s>>8&255)|0,h=((255&c)-(255&s))*d+(255&s)|0,u=p._new();u&=65535,u|=(a>255?255:a<0?0:a)<<16,u&=16711935,u|=(o>255?255:o<0?0:o)<<8,u&=16776960,Reflect.setProperty(f,"color",u|=h>255?255:h<0?0:h)}if(i.alphaTween==O&&i.entity.set_alpha(i.alphaStart+(i.alphaEnd-i.alphaStart)*n),i.transformTween==O)if(1==n&&i.transformAssigned)i.entity.set_transform(i.transformAssignedInstance);else{if(i.transformAssigned&&0==n&&i.entity.set_transform(null),null==i.entity.transform){if(null==i.transformInTransition){var x=ceramic_TransformPool.availableTransforms.length>0?ceramic_TransformPool.availableTransforms.pop():new ceramic_Transform;i.transformInTransition=x}i.entity.set_transform(i.transformInTransition)}var b=null!=i.transformStart?i.transformStart:ceramic_VisualTransition._identityTransform,y=null!=i.transformEnd?i.transformEnd:ceramic_VisualTransition._identityTransform;t=i.entity.transform;if(0==n)t.a=b.a,t.b=b.b,t.c=b.c,t.d=b.d,t.tx=b.tx,t.ty=b.ty,t.changedDirty=!0;else if(1==n)t.a=y.a,t.b=y.b,t.c=y.c,t.d=y.d,t.tx=y.tx,t.ty=y.ty,t.changedDirty=!0;else{var v;null==(v=ceramic_Transform._decomposed1)&&(v=new ceramic_DecomposedTransform),v.pivotX=0,v.pivotY=0,v.skewX=-Math.atan2(-b.c,b.d),v.skewY=Math.atan2(b.b,b.a),Math.abs(v.skewX+v.skewY)<1e-5&&(v.rotation=v.skewY,b.a<0&&b.d>=0&&(v.rotation+=v.rotation<=0?Math.PI:-Math.PI),v.skewX=0,v.skewY=0),v.scaleX=Math.sqrt(b.a*b.a+b.b*b.b),v.scaleY=Math.sqrt(b.c*b.c+b.d*b.d),v.x=b.tx,v.y=b.ty,null==(v=ceramic_Transform._decomposed2)&&(v=new ceramic_DecomposedTransform),v.pivotX=0,v.pivotY=0,v.skewX=-Math.atan2(-y.c,y.d),v.skewY=Math.atan2(y.b,y.a),Math.abs(v.skewX+v.skewY)<1e-5&&(v.rotation=v.skewY,y.a<0&&y.d>=0&&(v.rotation+=v.rotation<=0?Math.PI:-Math.PI),v.skewX=0,v.skewY=0),v.scaleX=Math.sqrt(y.a*y.a+y.b*y.b),v.scaleY=Math.sqrt(y.c*y.c+y.d*y.d),v.x=y.tx,v.y=y.ty,ceramic_Transform._decomposed1.pivotX+=(ceramic_Transform._decomposed2.pivotX-ceramic_Transform._decomposed1.pivotX)*n,ceramic_Transform._decomposed1.pivotY+=(ceramic_Transform._decomposed2.pivotY-ceramic_Transform._decomposed1.pivotY)*n,ceramic_Transform._decomposed1.rotation+=(ceramic_Transform._decomposed2.rotation-ceramic_Transform._decomposed1.rotation)*n,ceramic_Transform._decomposed1.scaleX+=(ceramic_Transform._decomposed2.scaleX-ceramic_Transform._decomposed1.scaleX)*n,ceramic_Transform._decomposed1.scaleY+=(ceramic_Transform._decomposed2.scaleY-ceramic_Transform._decomposed1.scaleY)*n,ceramic_Transform._decomposed1.skewX+=(ceramic_Transform._decomposed2.skewX-ceramic_Transform._decomposed1.skewX)*n,ceramic_Transform._decomposed1.skewY+=(ceramic_Transform._decomposed2.skewY-ceramic_Transform._decomposed1.skewY)*n,ceramic_Transform._decomposed1.x+=(ceramic_Transform._decomposed2.x-ceramic_Transform._decomposed1.x)*n,ceramic_Transform._decomposed1.y+=(ceramic_Transform._decomposed2.y-ceramic_Transform._decomposed1.y)*n;var m=ceramic_Transform._decomposed1,g=m.x,z=m.y,w=m.scaleX,C=m.scaleY,E=m.rotation,U=m.skewX,M=m.skewY,T=m.pivotX,k=m.pivotY;if(null==k&&(k=0),null==T&&(T=0),null==M&&(M=0),null==U&&(U=0),null==E&&(E=0),null==C&&(C=1),null==w&&(w=1),null==z&&(z=0),null==g&&(g=0),t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.changedDirty=!0,t.tx+=-T,t.ty+=-k,t.changedDirty=!0,0!=U&&(t.c=U*Math.PI/180),0!=M&&(t.b=M*Math.PI/180),0!=E){var D=E*Math.PI/180,S=Math.cos(D),A=Math.sin(D),P=t.a*S-t.b*A;t.b=t.a*A+t.b*S,t.a=P;var V=t.c*S-t.d*A;t.d=t.c*A+t.d*S,t.c=V;var I=t.tx*S-t.ty*A;t.ty=t.tx*A+t.ty*S,t.tx=I,t.changedDirty=!0}t.tx+=T,t.ty+=k,t.changedDirty=!0,1==w&&1==C||(t.a*=w,t.b*=C,t.c*=w,t.d*=C,t.tx*=w,t.ty*=C,t.changedDirty=!0),t.tx+=g-T*w,t.ty+=z-k*C,t.changedDirty=!0}}}))).onDestroy(this,(function(n){i.xTween==n&&(i.xTween=null),i.yTween==n&&(i.yTween=null),i.scaleXTween==n&&(i.scaleXTween=null),i.scaleYTween==n&&(i.scaleYTween=null),i.translateXTween==n&&(i.translateXTween=null),i.translateYTween==n&&(i.translateYTween=null),i.skewXTween==n&&(i.skewXTween=null),i.skewYTween==n&&(i.skewYTween=null),i.anchorXTween==n&&(i.anchorXTween=null),i.anchorYTween==n&&(i.anchorYTween=null),i.rotationTween==n&&(i.rotationTween=null),i.widthTween==n&&(i.widthTween=null),i.heightTween==n&&(i.heightTween=null),i.colorTween==n&&(i.colorTween=null),i.alphaTween==n&&(i.alphaTween=null),i.transformTween==n&&(i.transformTween=null)})),this.xChanged&&(this.xTween=O,this.xStart=r,this.xEnd=this.xTarget),this.yChanged&&(this.yTween=O,this.yStart=l,this.yEnd=this.yTarget),this.scaleXChanged&&(this.scaleXTween=O,this.scaleXStart=s,this.scaleXEnd=this.scaleXTarget),this.scaleYChanged&&(this.scaleYTween=O,this.scaleYStart=a,this.scaleYEnd=this.scaleYTarget),this.translateXChanged&&(this.translateXTween=O,this.translateXStart=o,this.translateXEnd=this.translateXTarget),this.translateYChanged&&(this.translateYTween=O,this.translateYStart=h,this.translateYEnd=this.translateYTarget),this.skewXChanged&&(this.skewXTween=O,this.skewXStart=u,this.skewXEnd=this.skewXTarget),this.skewYChanged&&(this.skewYTween=O,this.skewYStart=_,this.skewYEnd=this.skewYTarget),this.anchorXChanged&&(this.anchorXTween=O,this.anchorXStart=c,this.anchorXEnd=this.anchorXTarget),this.anchorYChanged&&(this.anchorYTween=O,this.anchorYStart=d,this.anchorYEnd=this.anchorYTarget),this.rotationChanged){this.rotationTween=O,this.rotationStart=ceramic_GeometryUtils.clampDegrees(f),this.rotationEnd=ceramic_GeometryUtils.clampDegrees(this.rotationTarget);var C=this.rotationEnd-this.rotationStart;C>180?this.rotationEnd-=360:C<-180&&(this.rotationEnd+=360)}if(this.widthChanged&&(this.widthTween=O,this.widthStart=x,this.widthEnd=this.widthTarget),this.heightChanged&&(this.heightTween=O,this.heightStart=b,this.heightEnd=this.heightTarget),this.colorChanged&&(this.colorTween=O,v||(v=!0,y=Reflect.getProperty(this.entity,"color")),this.colorStart=y,this.colorEnd=this.colorTarget),this.alphaChanged&&(this.alphaTween=O,this.alphaStart=z,this.alphaEnd=this.alphaTarget),this.transformChanged){if(this.transformTween=O,null!=m)null==this.transformStart&&(this.transformStart=ceramic_TransformPool.availableTransforms.length>0?ceramic_TransformPool.availableTransforms.pop():new ceramic_Transform),(E=this.transformStart).a=m.a,E.b=m.b,E.c=m.c,E.d=m.d,E.tx=m.tx,E.ty=m.ty,E.changedDirty=!0;else if(null!=this.transformStart){(E=this.transformStart).a=1,E.b=0,E.c=0,E.d=1,E.tx=0,E.ty=0,E.changedDirty=!0}if(null!=this.transformTarget){null==this.transformEnd&&(this.transformEnd=ceramic_TransformPool.availableTransforms.length>0?ceramic_TransformPool.availableTransforms.pop():new ceramic_Transform);var E=this.transformEnd;w=this.transformTarget;E.a=w.a,E.b=w.b,E.c=w.c,E.d=w.d,E.tx=w.tx,E.ty=w.ty,E.changedDirty=!0,this.transformEndToNull=!1}else if(null!=this.transformEnd){(E=this.transformEnd).a=1,E.b=0,E.c=0,E.d=1,E.tx=0,E.ty=0,E.changedDirty=!0,this.transformEndToNull=!0}}}else O=this.entity.tween(n,e,0,1,null);return O},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,null!=this.transformInTransition&&(ceramic_TransformPool.recycle(this.transformInTransition),this.transformInTransition=null),null!=this.transformStart&&(ceramic_TransformPool.recycle(this.transformStart),this.transformStart=null),null!=this.transformEnd&&(ceramic_TransformPool.recycle(this.transformEnd),this.transformEnd=null),this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this))},setEntity:function(n){this.entity=n instanceof ceramic_Visual?n:null},getEntity:function(){return this.entity},__class__:ceramic_VisualTransition});var g={__properties__:{set_transform:"set_transform",get_transform:"get_transform",set_alpha:"set_alpha",get_alpha:"get_alpha",set_color:"set_color",get_color:"get_color",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_rotation:"set_rotation",get_rotation:"get_rotation",set_anchorY:"set_anchorY",get_anchorY:"get_anchorY",set_anchorX:"set_anchorX",get_anchorX:"get_anchorX",set_skewY:"set_skewY",get_skewY:"get_skewY",set_skewX:"set_skewX",get_skewX:"get_skewX",set_translateY:"set_translateY",get_translateY:"get_translateY",set_translateX:"set_translateX",get_translateX:"get_translateX",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"},get_x:function(n){return n.xTarget},set_x:function(n,e){return null!=n.xTween&&e==n.xEnd||(n.anyPropertyChanged=!0,n.xChanged=!0),n.xTarget=e,e},get_y:function(n){return n.yTarget},set_y:function(n,e){return null!=n.yTween&&e==n.yEnd||(n.anyPropertyChanged=!0,n.yChanged=!0),n.yTarget=e,e},pos:function(n,e,t){null!=n.xTween&&e==n.xEnd||(n.anyPropertyChanged=!0,n.xChanged=!0),n.xTarget=e,null!=n.yTween&&t==n.yEnd||(n.anyPropertyChanged=!0,n.yChanged=!0),n.yTarget=t},get_scaleX:function(n){return n.scaleXTarget},set_scaleX:function(n,e){return null!=n.scaleXTween&&e==n.scaleXEnd||(n.anyPropertyChanged=!0,n.scaleXChanged=!0),n.scaleXTarget=e,e},get_scaleY:function(n){return n.scaleYTarget},set_scaleY:function(n,e){return null!=n.scaleYTween&&e==n.scaleYEnd||(n.anyPropertyChanged=!0,n.scaleYChanged=!0),n.scaleYTarget=e,e},scale:function(n,e,t){null==t&&(t=-1),null!=n.scaleXTween&&e==n.scaleXEnd||(n.anyPropertyChanged=!0,n.scaleXChanged=!0),n.scaleXTarget=e;var i=-1!=t?t:e;null!=n.scaleYTween&&i==n.scaleYEnd||(n.anyPropertyChanged=!0,n.scaleYChanged=!0),n.scaleYTarget=i},get_translateX:function(n){return n.translateXTarget},set_translateX:function(n,e){return null!=n.translateXTween&&e==n.translateXEnd||(n.anyPropertyChanged=!0,n.translateXChanged=!0),n.translateXTarget=e,e},get_translateY:function(n){return n.translateYTarget},set_translateY:function(n,e){return null!=n.translateYTween&&e==n.translateYEnd||(n.anyPropertyChanged=!0,n.translateYChanged=!0),n.translateYTarget=e,e},translate:function(n,e,t){null==t&&(t=-1),null!=n.translateXTween&&e==n.translateXEnd||(n.anyPropertyChanged=!0,n.translateXChanged=!0),n.translateXTarget=e;var i=-1!=t?t:e;null!=n.translateYTween&&i==n.translateYEnd||(n.anyPropertyChanged=!0,n.translateYChanged=!0),n.translateYTarget=i},get_skewX:function(n){return n.skewXTarget},set_skewX:function(n,e){return null!=n.skewXTween&&e==n.skewXEnd||(n.anyPropertyChanged=!0,n.skewXChanged=!0),n.skewXTarget=e,e},get_skewY:function(n){return n.skewYTarget},set_skewY:function(n,e){return null!=n.skewYTween&&e==n.skewYEnd||(n.anyPropertyChanged=!0,n.skewYChanged=!0),n.skewYTarget=e,e},skew:function(n,e,t){null!=n.skewXTween&&e==n.skewXEnd||(n.anyPropertyChanged=!0,n.skewXChanged=!0),n.skewXTarget=e,null!=n.skewYTween&&t==n.skewYEnd||(n.anyPropertyChanged=!0,n.skewYChanged=!0),n.skewYTarget=t},get_anchorX:function(n){return n.anchorXTarget},set_anchorX:function(n,e){return null!=n.anchorXTween&&e==n.anchorXEnd||(n.anyPropertyChanged=!0,n.anchorXChanged=!0),n.anchorXTarget=e,e},get_anchorY:function(n){return n.anchorYTarget},set_anchorY:function(n,e){return null!=n.anchorYTween&&e==n.anchorYEnd||(n.anyPropertyChanged=!0,n.anchorYChanged=!0),n.anchorYTarget=e,e},anchor:function(n,e,t){null!=n.anchorXTween&&e==n.anchorXEnd||(n.anyPropertyChanged=!0,n.anchorXChanged=!0),n.anchorXTarget=e,null!=n.anchorYTween&&t==n.anchorYEnd||(n.anyPropertyChanged=!0,n.anchorYChanged=!0),n.anchorYTarget=t},get_rotation:function(n){return n.rotationTarget},set_rotation:function(n,e){return null!=n.rotationTween&&e==n.rotationEnd||(n.anyPropertyChanged=!0,n.rotationChanged=!0),n.rotationTarget=e,e},get_width:function(n){return n.widthTarget},set_width:function(n,e){return null!=n.widthTween&&e==n.widthEnd||(n.anyPropertyChanged=!0,n.widthChanged=!0),n.widthTarget=e,e},get_height:function(n){return n.heightTarget},set_height:function(n,e){return null!=n.heightTween&&e==n.heightEnd||(n.anyPropertyChanged=!0,n.heightChanged=!0),n.heightTarget=e,e},size:function(n,e,t){null!=n.widthTween&&e==n.widthEnd||(n.anyPropertyChanged=!0,n.widthChanged=!0),n.widthTarget=e,null!=n.heightTween&&t==n.heightEnd||(n.anyPropertyChanged=!0,n.heightChanged=!0),n.heightTarget=t},get_color:function(n){return n.colorTarget},set_color:function(n,e){return null!=n.colorTween&&e==n.colorEnd||(n.anyPropertyChanged=!0,n.colorChanged=!0),n.colorTarget=e,e},get_alpha:function(n){return n.alphaTarget},set_alpha:function(n,e){return null!=n.alphaTween&&e==n.alphaEnd||(n.anyPropertyChanged=!0,n.alphaChanged=!0),n.alphaTarget=e,e},get_transform:function(n){return n.transformTarget},set_transform:function(n,e){return n.anyPropertyChanged=!0,n.transformChanged=!0,n.transformAssigned=!0,n.transformAssignedInstance=e,n.transformTarget=e,e}},ceramic_WatchDirectory=function(n){null==n&&(n=1),this.chokidarWatchers=null,this.chokidarUpdatedFilesByWatchedDirectory=null,this.startingToWatchDirectories=null,this.watchedDirectories=null,ceramic_Entity.call(this),ceramic_WatchDirectory.didTryRequireChokidar||(ceramic_WatchDirectory.didTryRequireChokidar=!0,ceramic_WatchDirectory.fs=ceramic_PlatformSpecific.nodeRequire("fs"),null!=ceramic_WatchDirectory.fs&&(ceramic_WatchDirectory.chokidar=ceramic_PlatformSpecific.nodeRequire("chokidar"))),this.updateInterval=n,ceramic_Timer.schedule(this,n,$bind(this,this.tick),n)};t["ceramic.WatchDirectory"]=ceramic_WatchDirectory,ceramic_WatchDirectory.__name__="ceramic.WatchDirectory",ceramic_WatchDirectory.__super__=ceramic_Entity,ceramic_WatchDirectory.prototype=$extend(ceramic_Entity.prototype,{emitDirectoryChange:function(n,e,t){var i=0;if(null!=this.__cbOnDirectoryChange&&(i+=this.__cbOnDirectoryChange.length),null!=this.__cbOnceDirectoryChange&&(i+=this.__cbOnceDirectoryChange.length),i>0){var r=ceramic_ArrayPool.pool(i),l=r.get(),s=0;if(null!=this.__cbOnDirectoryChange)for(var a=0,o=this.__cbOnDirectoryChange.length;a<o;){var p=a++;!0?(l.vector[s]=this.__cbOnDirectoryChange[p],++s):--i}if(null!=this.__cbOnceDirectoryChange){var h=null,u=null;for(a=0,o=this.__cbOnceDirectoryChange.length;a<o;){p=a++;if(!0){l.vector[s]=this.__cbOnceDirectoryChange[p],this.__cbOnceDirectoryChange[p]=null;var _=this.__cbOnceOwnerUnbindDirectoryChange[p];this.__cbOnceOwnerUnbindDirectoryChange[p]=null,null!=_&&_(),++s}else--i,null==h&&(h=[],u=[],[]),h.push(this.__cbOnceOwnerUnbindDirectoryChange[p]),u.push(this.__cbOnceDirectoryChange[p])}this.__cbOnceOwnerUnbindDirectoryChange=h,this.__cbOnceDirectoryChange=u}for(a=0,o=i;a<o;){s=a++;(0,l.vector[s])(n,e,t)}r.release(l),l=null}},onDirectoryChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event directoryChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDirectoryChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindDirectoryChange&&(this.__cbOnOwnerUnbindDirectoryChange=[]),this.__cbOnOwnerUnbindDirectoryChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindDirectoryChange&&(this.__cbOnOwnerUnbindDirectoryChange=[]),this.__cbOnOwnerUnbindDirectoryChange.push(null);null==this.__cbOnDirectoryChange&&(this.__cbOnDirectoryChange=[]),this.__cbOnDirectoryChange.push(e)},onceDirectoryChange:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event directoryChange because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offDirectoryChange(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindDirectoryChange&&(this.__cbOnceOwnerUnbindDirectoryChange=[]),this.__cbOnceOwnerUnbindDirectoryChange.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindDirectoryChange&&(this.__cbOnceOwnerUnbindDirectoryChange=[]),this.__cbOnceOwnerUnbindDirectoryChange.push(null);null==this.__cbOnceDirectoryChange&&(this.__cbOnceDirectoryChange=[]),this.__cbOnceDirectoryChange.push(e)},offDirectoryChange:function(n){if(null!=n){var e;null!=this.__cbOnDirectoryChange&&-1!=(e=this.__cbOnDirectoryChange.indexOf(n))&&(this.__cbOnDirectoryChange.splice(e,1),null!=(l=this.__cbOnOwnerUnbindDirectoryChange[e])&&l(),this.__cbOnOwnerUnbindDirectoryChange.splice(e,1)),null!=this.__cbOnceDirectoryChange&&-1!=(e=this.__cbOnceDirectoryChange.indexOf(n))&&(this.__cbOnceDirectoryChange.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindDirectoryChange[e])&&l(),this.__cbOnceOwnerUnbindDirectoryChange.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindDirectoryChange){for(var t=0,i=this.__cbOnOwnerUnbindDirectoryChange.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindDirectoryChange[r])&&l()}this.__cbOnOwnerUnbindDirectoryChange=null}if(null!=this.__cbOnceOwnerUnbindDirectoryChange){for(t=0,i=this.__cbOnceOwnerUnbindDirectoryChange.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindDirectoryChange[r])&&l()}this.__cbOnceOwnerUnbindDirectoryChange=null}this.__cbOnDirectoryChange=null,this.__cbOnceDirectoryChange=null}},listensDirectoryChange:function(){return null!=this.__cbOnDirectoryChange&&this.__cbOnDirectoryChange.length>0||null!=this.__cbOnceDirectoryChange&&this.__cbOnceDirectoryChange.length>0},watchDirectory:function(n){var e=this;null==this.watchedDirectories&&(this.watchedDirectories=new haxe_ds_StringMap),null==this.startingToWatchDirectories&&(this.startingToWatchDirectories=new haxe_ds_StringMap),this.startingToWatchDirectories.h[n]=!0,ceramic_Runner.runInBackground((function(){var t=e.computeFilesModificationTime(n);ceramic_Runner.runInMain((function(){if(Object.prototype.hasOwnProperty.call(e.startingToWatchDirectories.h,n)){var i=e.startingToWatchDirectories;Object.prototype.hasOwnProperty.call(i.h,n)&&delete i.h[n],e.watchedDirectories.h[n]=t,null!=ceramic_WatchDirectory.chokidar&&(null==e.chokidarUpdatedFilesByWatchedDirectory&&(e.chokidarUpdatedFilesByWatchedDirectory=new haxe_ds_StringMap),e.chokidarUpdatedFilesByWatchedDirectory.h[n]=[],e.watchWithChokidar(n))}}))}))},watchWithChokidar:function(n){var e=this,t=ceramic_WatchDirectory.chokidar.watch(".",{ignoreInitial:!0,disableGlobbing:!0,cwd:n});null==this.chokidarWatchers&&(this.chokidarWatchers=new haxe_ds_StringMap),Object.prototype.hasOwnProperty.call(this.chokidarWatchers.h,n)&&this.chokidarWatchers.h[n].close(),this.chokidarWatchers.h[n]=t,t.on("add",(function(t){var i=ceramic_WatchDirectory.fs.statSync(ceramic_Path.join([n,t]));i.isDirectory()||e.chokidarUpdatedFilesByWatchedDirectory.h[n].push({status:0,lastModified:i.mtime.getTime()/1e3,name:t})})),t.on("change",(function(t){var i=ceramic_WatchDirectory.fs.statSync(ceramic_Path.join([n,t]));i.isDirectory()||e.chokidarUpdatedFilesByWatchedDirectory.h[n].push({status:1,lastModified:i.mtime.getTime()/1e3,name:t})})),t.on("unlink",(function(t){e.chokidarUpdatedFilesByWatchedDirectory.h[n].push({status:2,lastModified:-1,name:t})}))},stopWatchingDirectory:function(n){if(null!=this.chokidarWatchers&&Object.prototype.hasOwnProperty.call(this.chokidarWatchers.h,n)){this.chokidarWatchers.h[n].close();var e=this.chokidarWatchers;Object.prototype.hasOwnProperty.call(e.h,n)&&delete e.h[n]}if(null==this.watchedDirectories&&Object.prototype.hasOwnProperty.call(this.watchedDirectories.h,n)){e=this.watchedDirectories;if(Object.prototype.hasOwnProperty.call(e.h,n)&&delete e.h[n],null!=this.startingToWatchDirectories&&Object.prototype.hasOwnProperty.call(this.startingToWatchDirectories.h,n)){e=this.startingToWatchDirectories;Object.prototype.hasOwnProperty.call(e.h,n)&&delete e.h[n]}return!0}if(null!=this.startingToWatchDirectories&&Object.prototype.hasOwnProperty.call(this.startingToWatchDirectories.h,n)){e=this.startingToWatchDirectories;return Object.prototype.hasOwnProperty.call(e.h,n)&&delete e.h[n],!0}return!1},tick:function(){if(null!=this.watchedDirectories){for(var n=[],e=this.watchedDirectories.h,t=Object.keys(e),i=t.length,r=0;r<i;){var l=t[r++];n.push(l)}for(var s=0;s<n.length;){l=n[s];++s,this.checkWatchedDirectory(l)}}},checkWatchedDirectory:function(n){var e=this;if(null!=ceramic_WatchDirectory.chokidar){if(Object.prototype.hasOwnProperty.call(this.chokidarUpdatedFilesByWatchedDirectory.h,n)){var t=this.chokidarUpdatedFilesByWatchedDirectory.h[n];if(t.length>0){for(var i=this.watchedDirectories.h[n],r=new haxe_ds_StringMap,l=i.h,s=l,a=Object.keys(l),o=a.length,p=0;p<o;){var h=d=a[p++],u=s[d];r.h[h]=u}for(var _=0;_<t.length;){var c=t[_];switch(++_,c.status){case 0:case 1:r.h[c.name]=c.lastModified;break;case 2:var d=c.name;Object.prototype.hasOwnProperty.call(r.h,d)&&delete r.h[d]}}Object.prototype.hasOwnProperty.call(this.watchedDirectories.h,n)&&(this.watchedDirectories.h[n]=r,this.emitDirectoryChange(n,r,i)),t.splice(0,t.length)}}}else{i=this.watchedDirectories.h[n];ceramic_Runner.runInBackground((function(){for(var t=e.computeFilesModificationTime(n),r=!1,l=h=t.h,s=(u=Object.keys(h)).length,a=0;a<s;){var o=_=u[a++],p=l[_];if(!Object.prototype.hasOwnProperty.call(i.h,o)){r=!0;break}if(p>i.h[o]){r=!0;break}}if(!r){var h,u;for(l=h=i.h,s=(u=Object.keys(h)).length,a=0;a<s;){var _;o=_=u[a++],p=l[_];if(!Object.prototype.hasOwnProperty.call(t.h,o)){r=!0;break}}}r&&ceramic_Runner.runInMain((function(){Object.prototype.hasOwnProperty.call(e.watchedDirectories.h,n)&&(e.watchedDirectories.h[n]=t,e.emitDirectoryChange(n,t,i))}))}))}},computeFilesModificationTime:function(n){for(var e=new haxe_ds_StringMap,t=0,i=ceramic_Files.getFlatDirectory(n);t<i.length;){var r=i[t];++t;var l=ceramic_Files.getLastModified(ceramic_Path.join([n,r]));e.h[r]=l}return e},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offDirectoryChange()},__class__:ceramic_WatchDirectory});var ceramic_macros_DefinesMacro=function(){};t["ceramic.macros.DefinesMacro"]=ceramic_macros_DefinesMacro,ceramic_macros_DefinesMacro.__name__="ceramic.macros.DefinesMacro",ceramic_macros_DefinesMacro._stringToBool=function(n){return null!=n&&("true"==(n=n.toLowerCase())||"1"==n)};var ceramic_macros_PluginsMacro=function(){};t["ceramic.macros.PluginsMacro"]=ceramic_macros_PluginsMacro,ceramic_macros_PluginsMacro.__name__="ceramic.macros.PluginsMacro";var clay_BackgroundQueue=function(n){null==n&&(n=.05),this.pending=[],this.stop=!1,this.runsInBackground=!1,this.checkInterval=n};t["clay.BackgroundQueue"]=clay_BackgroundQueue,clay_BackgroundQueue.__name__="clay.BackgroundQueue",clay_BackgroundQueue.prototype={schedule:function(n){ceramic_App.app._onceImmediate(n)},destroy:function(){this.stop=!0},__class__:clay_BackgroundQueue};var clay_Clay=function(n,e){this.windowInBackground=!1,this.ready=!1,this.freeze=!1,this.nextTick=0,this.immediateShutdown=!1,this.timestamp=-1,this.hasShutdown=!1,this.shuttingDown=!1,clay_Clay.app=this,clay_Runner.init(),this.extractAppId(),this.config=this.defaultConfig(),n(this.config),this.events=e,this.io=new clay_web_WebIO(this),clay_Immediate.flush(),this.assets=new clay_web_WebAssets(this),clay_Immediate.flush(),this.audio=new clay_web_WebAudio(this),clay_Immediate.flush(),this.input=new clay_Input(this),clay_Immediate.flush(),this.runtime=new clay_web_WebRuntime(this),clay_Immediate.flush(),this.backgroundQueue=new clay_BackgroundQueue,this.init()};t["clay.Clay"]=clay_Clay,clay_Clay.__name__="clay.Clay",clay_Clay.prototype={set_freeze:function(n){return this.freeze=n,n?(this.events.freeze(),this.audio.suspend()):(this.events.unfreeze(),this.audio.resume()),n},init:function(){clay_Log.debug("Clay / init",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/Clay.hx",lineNumber:160,className:"clay.Clay",methodName:"init"}),this.io.init(),clay_Immediate.flush(),this.audio.init(),clay_Immediate.flush(),this.input.init(),clay_Immediate.flush(),this.runtime.init(),clay_Immediate.flush(),clay_Log.debug("Clay / ready",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/Clay.hx",lineNumber:174,className:"clay.Clay",methodName:"init"}),this.runtime.ready(),clay_Immediate.flush(),this.audio.ready(),clay_Immediate.flush(),this.timestamp=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,this.ready=!0,this.nextTick=this.timestamp,this.updateScreen(),this.events.ready(),!this.runtime.run()||this.hasShutdown||this.shuttingDown||this.shutdown()},shutdown:function(){if(this.shuttingDown)clay_Log.debug("Clay / shutdown() called again, already shutting down - ignoring",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/Clay.hx",lineNumber:199,className:"clay.Clay",methodName:"shutdown"});else{if(this.hasShutdown)throw haxe_Exception.thrown("Clay / calling shutdown() more than once is disallowed");this.shuttingDown=!0,this.io.shutdown(),this.audio.shutdown(),this.input.shutdown(),this.runtime.shutdown(this.immediateShutdown),clay_Log.debug("Clay / shutdown",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/Clay.hx",lineNumber:215,className:"clay.Clay",methodName:"shutdown"}),this.hasShutdown=!0}},emitQuit:function(){this.shutdown()},shouldUpdate:function(n){if(this.config.updateRate>0){if(n<this.nextTick)return!1;for(;this.nextTick<=n;)this.nextTick+=this.config.updateRate}else this.nextTick=n;return!0},emitTick:function(n){if(!this.freeze&&(clay_Runner.tick(),clay_Immediate.flush(),this.updateScreen(),!this.shuttingDown&&this.ready)){var e=n-this.timestamp;this.timestamp=n,this.audio.tick(e),this.events.tick(e)}},emitWindowEvent:function(n,e,t,i,r){this.events.windowEvent(n,e,t,i,r)},emitAppEvent:function(n){this.events.appEvent(n)},extractAppId:function(){var n='"ld49"';StringTools.startsWith(n,'"')?this.appId=JSON.parse(n):this.appId=n},defaultConfig:function(){var n=clay_web_WebRuntime.defaultConfig();return new clay_Config(this.defaultWindowConfig(),this.defaultRenderConfig(),n,null)},defaultWindowConfig:function(){return new clay_WindowConfig(!1,!1,!0,!1,536805376,536805376,960,640,"clay app",!1,.06666666666666667)},defaultRenderConfig:function(){return new clay_RenderConfig(0,0,0,8,8,8,8,new clay_graphics_Color(0,0,0,1),new clay_RenderConfigWebGL(1,null,null,null,null,null,null,null,null))},defaultRuntimeConfig:function(){return new clay_web_WebConfig(null,null,null,null,null,null,null)},copyWindowConfig:function(n){return new clay_WindowConfig(n.fullscreen,n.trueFullscreen,n.resizable,n.borderless,n.x,n.y,n.width,n.height,""+n.title,n.noInput,n.backgroundSleep)},copyRenderConfig:function(n){return new clay_RenderConfig(n.depth,n.stencil,n.antialiasing,n.redBits,n.greenBits,n.blueBits,n.alphaBits,new clay_graphics_Color(n.defaultClear.r,n.defaultClear.g,n.defaultClear.b,n.defaultClear.a),new clay_RenderConfigWebGL(n.webgl.version,null,null,null,null,null,null,null,null))},updateScreen:function(){this.screenDensity=clay_Clay.app.runtime.windowDevicePixelRatio();var n=clay_Clay.app.runtime;this.screenWidth=Math.round(Math.round(n.windowW*n.windowDevicePixelRatio())/this.screenDensity);n=clay_Clay.app.runtime;this.screenHeight=Math.round(Math.round(n.windowH*n.windowDevicePixelRatio())/this.screenDensity)},__class__:clay_Clay,__properties__:{set_freeze:"set_freeze"}};var clay_RenderConfig=function(n,e,t,i,r,l,s,a,o){this.webgl=null,this.defaultClear=new clay_graphics_Color(0,0,0,1),this.alphaBits=8,this.blueBits=8,this.greenBits=8,this.redBits=8,this.antialiasing=0,this.stencil=0,this.depth=0,null!=n&&(this.depth=n),null!=e&&(this.stencil=e),null!=t&&(this.antialiasing=t),null!=i&&(this.redBits=i),null!=r&&(this.greenBits=r),null!=l&&(this.blueBits=l),null!=s&&(this.alphaBits=s),null!=a&&(this.defaultClear=a),null!=o&&(this.webgl=o)};t["clay.RenderConfig"]=clay_RenderConfig,clay_RenderConfig.__name__="clay.RenderConfig",clay_RenderConfig.prototype={__class__:clay_RenderConfig};var clay_RenderConfigWebGL=function(n,e,t,i,r,l,s,a,o){this.failIfMajorPerformanceCaveat=!1,this.preferLowPowerToHighPerformance=!1,this.preserveDrawingBuffer=!1,this.premultipliedAlpha=!1,this.antialias=!0,this.stencil=!1,this.depth=!0,this.alpha=!1,this.version=1,null!=n&&(this.version=n),null!=e&&(this.alpha=e),null!=t&&(this.depth=t),null!=i&&(this.stencil=i),null!=r&&(this.antialias=r),null!=l&&(this.premultipliedAlpha=l),null!=s&&(this.preserveDrawingBuffer=s),null!=a&&(this.preferLowPowerToHighPerformance=a),null!=o&&(this.failIfMajorPerformanceCaveat=o)};t["clay.RenderConfigWebGL"]=clay_RenderConfigWebGL,clay_RenderConfigWebGL.__name__="clay.RenderConfigWebGL",clay_RenderConfigWebGL.prototype={__class__:clay_RenderConfigWebGL};var clay_WindowConfig=function(n,e,t,i,r,l,s,a,o,p,h){this.backgroundSleep=.06666666666666667,this.noInput=!1,this.title=null,this.height=640,this.width=960,this.y=0,this.x=0,this.borderless=!1,this.resizable=!0,this.trueFullscreen=!1,this.fullscreen=!1,null!=n&&(this.fullscreen=n),null!=e&&(this.trueFullscreen=e),null!=t&&(this.resizable=t),null!=i&&(this.borderless=i),null!=r&&(this.x=r),null!=l&&(this.y=l),null!=s&&(this.width=s),null!=a&&(this.height=a),null!=o&&(this.title=o),null!=p&&(this.noInput=p),null!=h&&(this.backgroundSleep=h)};t["clay.WindowConfig"]=clay_WindowConfig,clay_WindowConfig.__name__="clay.WindowConfig",clay_WindowConfig.prototype={__class__:clay_WindowConfig};var clay_Config=function(n,e,t,i){this.updateRate=0,this.runtime=null,this.render=null,this.window=null,null!=n&&(this.window=n),null!=e&&(this.render=e),null!=t&&(this.runtime=t),null!=i&&(this.updateRate=i)};t["clay.Config"]=clay_Config,clay_Config.__name__="clay.Config",clay_Config.prototype={__class__:clay_Config};var clay_Extensions=function(){};t["clay.Extensions"]=clay_Extensions,clay_Extensions.__name__="clay.Extensions",clay_Extensions.unsafeGet=function(n,e){return n[e]},clay_Extensions.unsafeSet=function(n,e,t){n[e]=t};var clay_Image=function(n,e,t,i,r,l,s){this.pixels=null,this.sourceBitsPerPixel=4,this.bitsPerPixel=4,this.heightActual=0,this.widthActual=0,this.height=0,this.width=0,null!=n&&(this.width=n),null!=e&&(this.height=e),null!=t&&(this.widthActual=t),null!=i&&(this.heightActual=i),null!=r&&(this.bitsPerPixel=r),null!=l&&(this.sourceBitsPerPixel=l),null!=s&&(this.pixels=s)};t["clay.Image"]=clay_Image,clay_Image.__name__="clay.Image",clay_Image.prototype={premultiplyAlpha:function(){4==this.bitsPerPixel?clay_PremultiplyAlpha.premultiplyAlpha(this.pixels):clay_Log.warning("Can only premultiply alpha on images with 4 bits per pixels (RGBA)",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/Image.hx",lineNumber:29,className:"clay.Image",methodName:"premultiplyAlpha"})},reversePremultiplyAlpha:function(){4==this.bitsPerPixel?clay_PremultiplyAlpha.reversePremultiplyAlpha(this.pixels):clay_Log.warning("Can only reverse premultiply alpha on images with 4 bits per pixels (RGBA)",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/Image.hx",lineNumber:40,className:"clay.Image",methodName:"reversePremultiplyAlpha"})},__class__:clay_Image};var clay_Immediate=function(){};t["clay.Immediate"]=clay_Immediate,clay_Immediate.__name__="clay.Immediate",clay_Immediate.push=function(n){if(null==n)throw haxe_Exception.thrown("Immediate callback should not be null!");clay_Immediate.immediateCallbacksLen<clay_Immediate.immediateCallbacksCapacity?(clay_Immediate.immediateCallbacks[clay_Immediate.immediateCallbacksLen]=n,clay_Immediate.immediateCallbacksLen++):(clay_Immediate.immediateCallbacks[clay_Immediate.immediateCallbacksLen++]=n,clay_Immediate.immediateCallbacksCapacity++)},clay_Immediate.flush=function(){for(var n=!1;clay_Immediate.immediateCallbacksLen>0;){n=!0;var e=ceramic_ArrayPool.pool(clay_Immediate.immediateCallbacksLen),t=e.get(),i=clay_Immediate.immediateCallbacksLen;clay_Immediate.immediateCallbacksLen=0;for(var r=0,l=i;r<l;){var s=r++;t.vector[s]=clay_Immediate.immediateCallbacks[s],clay_Immediate.immediateCallbacks[s]=null}for(var a=0,o=i;a<o;){var p=a++;(0,t.vector[p])()}e.release(t)}return n};var clay_Input=function(n){this.app=n,this.modState=new clay_ModState,this.modState.none=!0};t["clay.Input"]=clay_Input,clay_Input.__name__="clay.Input",clay_Input.prototype={init:function(){},shutdown:function(){},emitKeyDown:function(n,e,t,i,r,l){this.app.events.keyDown(n,e,t,i,r,l)},emitKeyUp:function(n,e,t,i,r,l){this.app.events.keyUp(n,e,t,i,r,l)},emitText:function(n,e,t,i,r,l){this.app.events.text(n,e,t,i,r,l)},emitMouseMove:function(n,e,t,i,r,l){this.app.events.mouseMove(n,e,t,i,r,l)},emitMouseDown:function(n,e,t,i,r){this.app.events.mouseDown(n,e,t,i,r)},emitMouseUp:function(n,e,t,i,r){this.app.events.mouseUp(n,e,t,i,r)},emitMouseWheel:function(n,e,t,i){this.app.events.mouseWheel(n,e,t,i)},emitTouchDown:function(n,e,t,i,r,l){this.app.events.touchDown(n,e,t,i,r,l)},emitTouchUp:function(n,e,t,i,r,l){this.app.events.touchUp(n,e,t,i,r,l)},emitTouchMove:function(n,e,t,i,r,l){this.app.events.touchMove(n,e,t,i,r,l)},emitGamepadAxis:function(n,e,t,i){this.app.events.gamepadAxis(n,e,t,i)},emitGamepadDown:function(n,e,t,i){this.app.events.gamepadDown(n,e,t,i)},emitGamepadUp:function(n,e,t,i){this.app.events.gamepadUp(n,e,t,i)},emitGamepadGyro:function(n,e,t,i,r){this.app.events.gamepadGyro(n,e,t,i,r)},emitGamepadDevice:function(n,e,t,i){this.app.events.gamepadDevice(n,e,t,i)},__class__:clay_Input};var z={$name:function(n){if(0!=(n&w.MASK))return w.$name(n&~w.MASK);switch(n){case 8:return w.$name(42);case 9:return w.$name(43);case 13:return w.$name(40);case 27:return w.$name(41);case 32:return w.$name(44);case 97:return w.$name(4);case 98:return w.$name(5);case 99:return w.$name(6);case 100:return w.$name(7);case 101:return w.$name(8);case 102:return w.$name(9);case 103:return w.$name(10);case 104:return w.$name(11);case 105:return w.$name(12);case 106:return w.$name(13);case 107:return w.$name(14);case 108:return w.$name(15);case 109:return w.$name(16);case 110:return w.$name(17);case 111:return w.$name(18);case 112:return w.$name(19);case 113:return w.$name(20);case 114:return w.$name(21);case 115:return w.$name(22);case 116:return w.$name(23);case 117:return w.$name(24);case 118:return w.$name(25);case 119:return w.$name(26);case 120:return w.$name(27);case 121:return w.$name(28);case 122:return w.$name(29);case 127:return w.$name(76);default:return String.fromCodePoint(n)}},toScanCode:function(n){if(0!=(n&w.MASK))return n&~w.MASK;switch(n){case 8:return 42;case 9:return 43;case 13:return 40;case 27:return 41;case 32:return 44;case 47:return 56;case 48:return 39;case 49:return 30;case 50:return 31;case 51:return 32;case 52:return 33;case 53:return 34;case 54:return 35;case 55:return 36;case 56:return 37;case 57:return 38;case 59:return 51;case 61:return 46;case 91:return 47;case 92:return 49;case 93:return 48;case 96:return 53;case 97:return 4;case 98:return 5;case 99:return 6;case 100:return 7;case 101:return 8;case 102:return 9;case 103:return 10;case 104:return 11;case 105:return 12;case 106:return 13;case 107:return 14;case 108:return 15;case 109:return 16;case 110:return 17;case 111:return 18;case 112:return 19;case 113:return 20;case 114:return 21;case 115:return 22;case 116:return 23;case 117:return 24;case 118:return 25;case 119:return 26;case 120:return 27;case 121:return 28;case 122:return 29}return 0},toString:function(n){return"KeyCode("+n+" "+z.$name(n)+")"}},clay_Log=function(){};t["clay.Log"]=clay_Log,clay_Log.__name__="clay.Log",clay_Log.debug=function(n,e){},clay_Log.info=function(n,e){haxe_Log.trace("[info] "+n,e)},clay_Log.warning=function(n,e){haxe_Log.trace("[warning] "+n,e)},clay_Log.error=function(n,e){haxe_Log.trace("[error] "+n,e)},clay_Log.success=function(n,e){haxe_Log.trace("[success] "+n,e)};var clay_Macros=function(){};t["clay.Macros"]=clay_Macros,clay_Macros.__name__="clay.Macros";var clay_PremultiplyAlpha=function(){};t["clay.PremultiplyAlpha"]=clay_PremultiplyAlpha,clay_PremultiplyAlpha.__name__="clay.PremultiplyAlpha",clay_PremultiplyAlpha.premultiplyAlpha=function(n){for(var e=n.length,t=0;t<e;){var i=n[t],r=n[t+1],l=n[t+2],s=n[t+3]/255;n[t]=i*s|0,n[t+1]=r*s|0,n[t+2]=l*s|0,t+=4}},clay_PremultiplyAlpha.reversePremultiplyAlpha=function(n){for(var e=n.length,t=0;t<e;){var i=n[t],r=n[t+1],l=n[t+2],s=n[t+3]/255;s>0&&(n[t]=i/s|0,n[t+1]=r/s|0,n[t+2]=l/s|0),t+=4}};var clay_Runner=function(){};t["clay.Runner"]=clay_Runner,clay_Runner.__name__="clay.Runner",clay_Runner.currentIsMainThread=function(){return!0},clay_Runner.init=function(){},clay_Runner.tick=function(){},clay_Runner.isEmulatingBackgroundWithMain=function(){return!0},clay_Runner.runInMain=function(n){clay_Immediate.push(n)},clay_Runner.runInBackground=function(n){clay_Immediate.push(n)};var w={$name:function(n){var e=null;return n>=0&&n<w.scanCodeNames.length&&(e=w.scanCodeNames[n]),null!=e?e:""},toString:function(n){return"ScanCode("+n+" "+w.$name(n)+")"}},O={toString:function(n){switch(n){case 0:return"UNKNOWN";case 1:return"DEVICE_ADDED";case 2:return"DEVICE_REMOVED";case 3:return"DEVICE_REMAPPED";default:return""+n}}},clay_ModState=function(){this.meta=!1,this.alt=!1,this.shift=!1,this.ctrl=!1,this.mode=!1,this.caps=!1,this.num=!1,this.rmeta=!1,this.lmeta=!1,this.ralt=!1,this.lalt=!1,this.rctrl=!1,this.lctrl=!1,this.rshift=!1,this.lshift=!1,this.none=!1};t["clay.ModState"]=clay_ModState,clay_ModState.__name__="clay.ModState",clay_ModState.prototype={toString:function(){var n='{ "ModState":true ';return this.none?n+', "none":true }':(this.lshift&&(n+=', "lshift":true'),this.rshift&&(n+=', "rshift":true'),this.lctrl&&(n+=', "lctrl":true'),this.rctrl&&(n+=', "rctrl":true'),this.lalt&&(n+=', "lalt":true'),this.ralt&&(n+=', "ralt":true'),this.lmeta&&(n+=', "lmeta":true'),this.rmeta&&(n+=', "rmeta":true'),this.num&&(n+=', "num":true'),this.caps&&(n+=', "caps":true'),this.mode&&(n+=', "mode":true'),this.ctrl&&(n+=', "ctrl":true'),this.shift&&(n+=', "shift":true'),this.alt&&(n+=', "alt":true'),this.meta&&(n+=', "meta":true'),n+="}")},__class__:clay_ModState};var C={toString:function(n){switch(n){case 0:return"UNKNOWN";case 1:return"EDIT";case 2:return"INPUT";default:return""+n}}},E={toString:function(n){switch(n){case 0:return"UNKNOWN";case 1:return"SHOWN";case 2:return"HIDDEN";case 3:return"EXPOSED";case 4:return"MOVED";case 5:return"RESIZED";case 6:return"SIZE_CHANGED";case 7:return"MINIMIZED";case 8:return"MAXIMIZED";case 9:return"RESTORED";case 10:return"ENTER";case 11:return"LEAVE";case 12:return"FOCUS_GAINED";case 13:return"FOCUS_LOST";case 14:return"CLOSE";case 15:return"ENTER_FULLSCREEN";case 16:return"EXIT_FULLSCREEN";default:return""+n}}},U={toString:function(n){switch(n){case 0:return"UNKNOWN";case 11:return"TERMINATING";case 12:return"LOW_MEMORY";case 13:return"WILL_ENTER_BACKGROUND";case 14:return"DID_ENTER_BACKGROUND";case 15:return"WILL_ENTER_FOREGROUND";case 16:return"DID_ENTER_FOREGROUND";default:return""+n}}},clay_Utils=function(){};t["clay.Utils"]=clay_Utils,clay_Utils.__name__="clay.Utils",clay_Utils.uniqueId=function(){switch(clay_Utils._nextUniqueIntCursor){case 0:clay_Utils._nextUniqueInt0=(clay_Utils._nextUniqueInt0+1)%2147483647;break;case 1:clay_Utils._nextUniqueInt1=(clay_Utils._nextUniqueInt1+1)%2147483647;break;case 2:clay_Utils._nextUniqueInt2=(clay_Utils._nextUniqueInt2+1)%2147483647;break;case 3:clay_Utils._nextUniqueInt3=(clay_Utils._nextUniqueInt3+1)%2147483647}clay_Utils._nextUniqueIntCursor=(clay_Utils._nextUniqueIntCursor+1)%4,null==(h=clay_Utils._nextUniqueInt0)&&(h=2147483646*Math.random()|0);var n,e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);var t=h%62|0;if((u=h/62|0)>0){var i=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(t).charAt(0);r=i+l}else{if(t>9)(d=t-10+65)>90&&(d+=6),i=String.fromCodePoint(d);else i=Std.string(t).charAt(0);r=Std.string(i)}if(e>9)(d=e-10+65)>90&&(d+=6),i=String.fromCodePoint(d);else i=Std.string(e).charAt(0);n=r+i}else{if(e>9)(d=e-10+65)>90&&(d+=6),r=String.fromCodePoint(d);else r=Std.string(e).charAt(0);n=Std.string(r)}null==(h=null)&&(h=2147483646*Math.random()|0);var r;e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var l=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(t).charAt(0);i=l+s}else{if(t>9)(d=t-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(t).charAt(0);i=Std.string(l)}if(e>9)(d=e-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(e).charAt(0);r=i+l}else{if(e>9)(d=e-10+65)>90&&(d+=6),i=String.fromCodePoint(d);else i=Std.string(e).charAt(0);r=Std.string(i)}null==(h=clay_Utils._nextUniqueInt1)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var s=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(t).charAt(0);l=s+a}else{if(t>9)(d=t-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(t).charAt(0);l=Std.string(s)}if(e>9)(d=e-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(e).charAt(0);i=l+s}else{if(e>9)(d=e-10+65)>90&&(d+=6),l=String.fromCodePoint(d);else l=Std.string(e).charAt(0);i=Std.string(l)}null==(h=null)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var a=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(t).charAt(0);s=a+o}else{if(t>9)(d=t-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(t).charAt(0);s=Std.string(a)}if(e>9)(d=e-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(e).charAt(0);l=s+a}else{if(e>9)(d=e-10+65)>90&&(d+=6),s=String.fromCodePoint(d);else s=Std.string(e).charAt(0);l=Std.string(s)}null==(h=clay_Utils._nextUniqueInt2)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var o=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(t).charAt(0);a=o+p}else{if(t>9)(d=t-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(t).charAt(0);a=Std.string(o)}if(e>9)(d=e-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(e).charAt(0);s=a+o}else{if(e>9)(d=e-10+65)>90&&(d+=6),a=String.fromCodePoint(d);else a=Std.string(e).charAt(0);s=Std.string(a)}null==(h=null)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){null==(h=u)&&(h=2147483646*Math.random()|0);t=h%62|0;if((u=h/62|0)>0){var p=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),c=String.fromCodePoint(d);else c=Std.string(t).charAt(0);o=p+c}else{if(t>9)(d=t-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(t).charAt(0);o=Std.string(p)}if(e>9)(d=e-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(e).charAt(0);a=o+p}else{if(e>9)(d=e-10+65)>90&&(d+=6),o=String.fromCodePoint(d);else o=Std.string(e).charAt(0);a=Std.string(o)}null==(h=clay_Utils._nextUniqueInt3)&&(h=2147483646*Math.random()|0);e=h%62|0;if((u=h/62|0)>0){var h;null==(h=u)&&(h=2147483646*Math.random()|0);var u;t=h%62|0;if((u=h/62|0)>0){var _,c=clay_Utils.base62Id(u);if(t>9)(d=t-10+65)>90&&(d+=6),_=String.fromCodePoint(d);else _=Std.string(t).charAt(0);p=c+_}else{if(t>9)(d=t-10+65)>90&&(d+=6),c=String.fromCodePoint(d);else c=Std.string(t).charAt(0);p=Std.string(c)}if(e>9)(d=e-10+65)>90&&(d+=6),c=String.fromCodePoint(d);else c=Std.string(e).charAt(0);o=p+c}else{var d;if(e>9)(d=e-10+65)>90&&(d+=6),p=String.fromCodePoint(d);else p=Std.string(e).charAt(0);o=Std.string(p)}return p=n+"-"+r+"-"+i+"-"+l+"-"+s+"-"+a+"-"+o},clay_Utils.base62Id=function(n){null==n&&(n=2147483646*Math.random()|0);var e=n%62|0,t=n/62|0;if(t>0){var i,r,l=clay_Utils.base62Id(t);if(e>9)(r=e-10+65)>90&&(r+=6),i=String.fromCodePoint(r);else i=(null==e?"null":""+e).charAt(0);return l+i}return e>9?((r=e-10+65)>90&&(r+=6),l=String.fromCodePoint(r)):l=(null==e?"null":""+e).charAt(0),Std.string(l)};var clay_audio_AudioDataOptions=function(n,e,t,i,r,l,s,a,o){this.isStream=null,this.samples=null,this.format=null,this.bitsPerSample=null,this.channels=null,this.duration=null,this.length=null,this.rate=null,this.id=null,null!=n&&(this.id=n),null!=e&&(this.rate=e),null!=t&&(this.length=t),null!=i&&(this.duration=i),null!=r&&(this.channels=r),null!=l&&(this.bitsPerSample=l),null!=s&&(this.format=s),null!=a&&(this.samples=a),null!=o&&(this.isStream=o)};t["clay.audio.AudioDataOptions"]=clay_audio_AudioDataOptions,clay_audio_AudioDataOptions.__name__="clay.audio.AudioDataOptions",clay_audio_AudioDataOptions.prototype={__class__:clay_audio_AudioDataOptions};var clay_audio_AudioData=function(n,e){this.destroyed=!1,this.isStream=!1,this.format=0,this.bitsPerSample=16,this.channels=1,this.duration=0,this.length=0,this.rate=44100,this.id="AudioData",this.app=n,null!=e.id&&(this.id=e.id),null!=e.rate&&(this.rate=e.rate),null!=e.length&&(this.length=e.length),null!=e.format&&(this.format=e.format),null!=e.channels&&(this.channels=e.channels),null!=e.bitsPerSample&&(this.bitsPerSample=e.bitsPerSample),null!=e.isStream&&(this.isStream=e.isStream),null!=e.samples&&(this.samples=e.samples),null!=e.duration&&(this.duration=e.duration),e=null};t["clay.audio.AudioData"]=clay_audio_AudioData,clay_audio_AudioData.__name__="clay.audio.AudioData",clay_audio_AudioData.prototype={destroy:function(){this.destroyed||(clay_Log.debug("Audio / destroy AudioData `"+this.id+"`",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/audio/AudioData.hx",lineNumber:102,className:"clay.audio.AudioData",methodName:"destroy"}),this.destroyed=!0,this.id=null,this.samples=null)},seek:function(n){return!1},portion:function(n,e,t,i){return i},toString:function(){var n,e='{ "AudioData":true, "id":'+this.id+', "rate":'+this.rate+', "length":'+this.length+', "channels":'+this.channels+', "format":"';if(null==this.format)n="null";else{var t=this.format;if(null==t)n=""+t;else switch(t){case 0:n="UNKNOWN";break;case 1:n="CUSTOM";break;case 2:n="OGG";break;case 3:n="WAV";break;case 4:n="PCM";break;case 5:n="MP3";break;case 6:n="FLAC";break;default:n=""+t}}return e+n+'", "isStream":'+Std.string(this.isStream)+" }"},__class__:clay_audio_AudioData};var M={toString:function(n){switch(n){case 0:return"END";case 1:return"DESTROYED";case 2:return"DESTROYED_SOURCE";default:return""+n}}},T={toString:function(n){if(null==n)return""+n;switch(n){case 0:return"UNKNOWN";case 1:return"CUSTOM";case 2:return"OGG";case 3:return"WAV";case 4:return"PCM";case 5:return"MP3";case 6:return"FLAC";default:return""+n}},fromPath:function(n){switch(ceramic_Path.extension(n).toLowerCase()){case"flac":return 6;case"mp3":return 5;case"ogg":return 2;case"pcm":return 4;case"wav":return 3;default:return 0}}},clay_audio_AudioInstance=function(n,e){this.destroyed=!1,this.source=n,this.handle=e};t["clay.audio.AudioInstance"]=clay_audio_AudioInstance,clay_audio_AudioInstance.__name__="clay.audio.AudioInstance",clay_audio_AudioInstance.prototype={hasEnded:function(){if(this.destroyed)throw haxe_Exception.thrown("Audio / Instance hasEnded queried after being destroyed");return 2==this.source.app.audio.stateOf(this.handle)},destroy:function(){if(this.destroyed)throw haxe_Exception.thrown("Audio / Instance being destroyed more than once");this.source.app.audio.handleInstanceDestroyed(this.handle),this.source.instanceKilled(this),this.destroyed=!0,this.source=null,this.handle=-1},dataGet:function(n,e,t,i){if(this.destroyed)throw haxe_Exception.thrown("Audio / Instance dataGet queried after being destroyed");return this.source.data.portion(n,e,t,i)},dataSeek:function(n){if(this.destroyed)throw haxe_Exception.thrown("Audio / Instance dataSeek queried after being destroyed");return this.source.data.seek(n)},__class__:clay_audio_AudioInstance};var clay_audio_AudioSource=function(n,e){this.destroyed=!1,this.streamBufferCount=2,this.streamBufferLength=176400,this.app=n,this.data=e,this.sourceId=clay_Utils.uniqueId(),clay_Log.debug("AudioSource / `"+this.sourceId+"` / "+this.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/audio/AudioSource.hx",lineNumber:34,className:"clay.audio.AudioSource",methodName:"new"}),this.instances=[],e.duration<=0&&(e.duration=this.bytesToSeconds(e.length))};t["clay.audio.AudioSource"]=clay_audio_AudioSource,clay_audio_AudioSource.__name__="clay.audio.AudioSource",clay_audio_AudioSource.prototype={instance:function(n){var e=new clay_audio_AudioInstance(this,n);return-1==this.instances.indexOf(e)&&this.instances.push(e),e},bytesToSeconds:function(n){var e=16==this.data.bitsPerSample?2:1;return n/(this.data.rate*this.data.channels*e)},secondsToBytes:function(n){var e=16==this.data.bitsPerSample?2:1;return n*(this.data.rate*this.data.channels*e)|0},getDuration:function(){return this.data.duration},destroy:function(){if(this.destroyed)clay_Log.debug("AudioSource / destroying already destroyed source!",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/audio/AudioSource.hx",lineNumber:85,className:"clay.audio.AudioSource",methodName:"destroy"});else{this.destroyed=!0;var n=this.instances.length,e=0;for(clay_Log.debug("AudioSource / destroy / "+this.sourceId+" / "+this.data.id+", stream="+Std.string(this.data.isStream)+", instances="+n,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/audio/AudioSource.hx",lineNumber:94,className:"clay.audio.AudioSource",methodName:"destroy"});e<n;){var t=this.instances.pop();t.destroy(),t=null,++e}this.app.audio.handleSourceDestroyed(this),this.data.destroy(),this.data=null,this.instances=null,this.app=null}},instanceKilled:function(n){HxOverrides.remove(this.instances,n)},__class__:clay_audio_AudioSource};var k={toString:function(n){switch(n){case-1:return"INVALID";case 0:return"PAUSED";case 1:return"PLAYING";case 2:return"STOPPED";default:return""+n}}},clay_base_BaseAssets=function(n){this.app=n};t["clay.base.BaseAssets"]=clay_base_BaseAssets,clay_base_BaseAssets.__name__="clay.base.BaseAssets",clay_base_BaseAssets.prototype={isSynchronous:function(){return!1},fullPath:function(n){return ceramic_Path.isAbsolute(n)?n:ceramic_Path.join([this.app.io.appPath(),n])},loadImage:function(n,e,t,i){return null==t&&(t=!1),null==e&&(e=4),null!=i&&clay_Immediate.push((function(){i(null)})),null},__class__:clay_base_BaseAssets};var clay_base_BaseAudio=function(n){this.app=n};t["clay.base.BaseAudio"]=clay_base_BaseAudio,clay_base_BaseAudio.__name__="clay.base.BaseAudio",clay_base_BaseAudio.prototype={isSynchronous:function(){return!1},init:function(){},ready:function(){},tick:function(n){},shutdown:function(){},loadData:function(n,e,t,i,r){return null==i&&(i=!1),null!=r&&clay_Immediate.push((function(){r(null)})),null},emitAudioEvent:function(n,e){this.app.events.audioEvent(n,e)},__class__:clay_base_BaseAudio};var clay_base_BaseIO=function(n){this.app=n};t["clay.base.BaseIO"]=clay_base_BaseIO,clay_base_BaseIO.__name__="clay.base.BaseIO",clay_base_BaseIO.prototype={init:function(){},shutdown:function(){},isSynchronous:function(){return!1},appPath:function(){return null},appPathPrefs:function(){return null},loadData:function(n,e,t,i){return null==t&&(t=!1),null==e&&(e=!1),null!=i&&clay_Immediate.push((function(){i(null)})),null},__class__:clay_base_BaseIO};var clay_base_BaseRuntime=function(n){this.name=null,this.app=n};t["clay.base.BaseRuntime"]=clay_base_BaseRuntime,clay_base_BaseRuntime.__name__="clay.base.BaseRuntime",clay_base_BaseRuntime.prototype={init:function(){},shutdown:function(n){null==n&&(n=!1)},ready:function(){},run:function(){return!0},windowDevicePixelRatio:function(){return 1},windowWidth:function(){return 0},windowHeight:function(){return 0},__class__:clay_base_BaseRuntime};var D={_new:function(n){return new Float32Array(n)},fromArray:function(n){return new Float32Array(n)},fromView:function(n){return new Float32Array(n)},fromBuffer:function(n,e,t){return new Float32Array(n,e,t/4|0)},fromBytes:function(n,e,t){return null==e&&(e=0),null==e?new Float32Array(n.b.bufferValue):null==t?new Float32Array(n.b.bufferValue,e):new Float32Array(n.b.bufferValue,e,t)},toBytes:function(n){return new haxe_io_Bytes(new Uint8Array(n.buffer))},toString:function(n){return"Float32Array [byteLength:"+n.byteLength+", length:"+n.length+"]"}},S={_new:function(n){return new Int32Array(n)},fromArray:function(n){return new Int32Array(n)},fromView:function(n){return new Int32Array(n)},fromBuffer:function(n,e,t){return new Int32Array(n,e,t/4|0)},fromBytes:function(n,e,t){return null==e&&(e=0),null==e?new Int32Array(n.b.bufferValue):null==t?new Int32Array(n.b.bufferValue,e):new Int32Array(n.b.bufferValue,e,t)},toBytes:function(n){return new haxe_io_Bytes(new Uint8Array(n.buffer))},toString:function(n){return"Int32Array [byteLength:"+n.byteLength+", length:"+n.length+"]"}},A={_new:function(n){return new Uint16Array(n)},fromArray:function(n){return new Uint16Array(n)},fromView:function(n){return new Uint16Array(n)},fromBuffer:function(n,e,t){return new Uint16Array(n,e,t/2|0)},fromBytes:function(n,e,t){return null==e&&(e=0),null==e?new Uint16Array(n.b.bufferValue):null==t?new Uint16Array(n.b.bufferValue,e):new Uint16Array(n.b.bufferValue,e,t)},toBytes:function(n){return new haxe_io_Bytes(new Uint8Array(n.buffer))},toString:function(n){return"Uint16Array [byteLength:"+n.byteLength+", length:"+n.length+"]"}},P={_new:function(n){return new Uint8Array(n)},fromArray:function(n){return new Uint8Array(n)},fromView:function(n){return new Uint8Array(n)},fromBuffer:function(n,e,t){return new Uint8Array(n,e,t)},fromBytes:function(n,e,t){return null==e?new Uint8Array(n.b.bufferValue):null==t?new Uint8Array(n.b.bufferValue,e):new Uint8Array(n.b.bufferValue,e,t)},toBytes:function(n){return new haxe_io_Bytes(new Uint8Array(n.buffer))},toString:function(n){return"Uint8Array [byteLength:"+n.byteLength+", length:"+n.length+"]"}},clay_graphics_Color=function(n,e,t,i){this.a=1,this.b=0,this.g=0,this.r=0,null!=n&&(this.r=n),null!=e&&(this.g=e),null!=t&&(this.b=t),null!=i&&(this.a=i)};t["clay.graphics.Color"]=clay_graphics_Color,clay_graphics_Color.__name__="clay.graphics.Color",clay_graphics_Color.prototype={__class__:clay_graphics_Color};var clay_graphics_Texture=function(){this.wrapT=33071,this.wrapS=33071,this.filterMag=9729,this.filterMin=9729,this.pixels=null,this.heightActual=-1,this.widthActual=-1,this.height=-1,this.width=-1,this.dataType=5121,this.type=3553,this.format=6408,this.compressed=!1,this.textureId=null,clay_Resource.call(this),this.index=clay_graphics_Texture._nextIndex++};t["clay.graphics.Texture"]=clay_graphics_Texture,clay_graphics_Texture.__name__="clay.graphics.Texture",clay_graphics_Texture.fromImage=function(n,e){null==e&&(e=!1);var t=new clay_graphics_Texture;if(t.premultiplyAlpha=e,4!=n.bitsPerPixel)throw haxe_Exception.thrown("Image must have 4 bits per pixels (RGBA format)");return t.width=n.width,t.height=n.height,t.widthActual=n.widthActual,t.heightActual=n.heightActual,t.pixels=n.pixels,t},clay_graphics_Texture.__super__=clay_Resource,clay_graphics_Texture.prototype=$extend(clay_Resource.prototype,{set_filterMin:function(n){return null!=this.textureId&&(this.bind(),clay_opengl_web_GL.gl.texParameteri(3553,10241,n)),this.filterMin=n},set_filterMag:function(n){return null!=this.textureId&&(this.bind(),clay_opengl_web_GL.gl.texParameteri(3553,10240,n)),this.filterMag=n},set_wrapS:function(n){return null!=this.textureId&&(this.bind(),clay_opengl_web_GL.gl.texParameteri(3553,10242,n)),this.wrapS=n},set_wrapT:function(n){return null!=this.textureId&&(this.bind(),clay_opengl_web_GL.gl.texParameteri(3553,10243,n)),this.wrapT=n},init:function(){if(this.textureId=clay_opengl_web_GL.gl.createTexture(),this.width>0&&this.widthActual<=0&&(this.widthActual=this.width),this.height>0&&this.heightActual<=0&&(this.heightActual=this.height),this.bind(),clay_opengl_web_GL.gl.texParameteri(3553,10241,this.filterMin),clay_opengl_web_GL.gl.texParameteri(3553,10240,this.filterMag),clay_opengl_web_GL.gl.texParameteri(3553,10243,this.wrapT),clay_opengl_web_GL.gl.texParameteri(3553,10242,this.wrapS),null!=this.pixels){if(this.width<=0||this.height<=0)throw haxe_Exception.thrown("Provided texture pixels with invalid size (width="+this.width+" height="+this.height+")");this.submit(this.pixels)}},destroy:function(){if(null!=this.textureId){var n=this.textureId;clay_opengl_web_GL.gl.deleteTexture(n);for(var e=0,t=clay_opengl_GLGraphics._boundTexture2D.length;e<t;){var i=e++;clay_opengl_GLGraphics._boundTexture2D[i]==n&&(clay_opengl_GLGraphics._boundTexture2D[i]=null)}this.textureId=null}},bind:function(n){if(null==n&&(n=0),-1!=n&&clay_opengl_GLGraphics._activeTextureSlot!=n){for(clay_opengl_GLGraphics._activeTextureSlot=n;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+n)}if(3553==this.type){var e=this.textureId;clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=e&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=e,clay_opengl_web_GL.gl.bindTexture(3553,e))}},submit:function(n){var e=clay_opengl_web_GL.gl.getParameter(3379);e<=0&&(e=4096);var t=e;if(null==n&&(n=this.pixels),null==n)throw haxe_Exception.thrown("Cannot submit texture pixels: pixels is null");if(this.widthActual>t)throw haxe_Exception.thrown("Texture actual width bigger than maximum hardware size (width="+this.widthActual+" max="+t+")");if(this.heightActual>t)throw haxe_Exception.thrown("Texture actual height bigger than maximum hardware size (height="+this.heightActual+" max="+t+")");if(this.bind(),3553==this.type)if(this.compressed){var i=this.format,r=this.widthActual,l=this.heightActual;clay_opengl_web_GL.gl.pixelStorei(37441,this.premultiplyAlpha?1:0),clay_opengl_web_GL.gl.compressedTexImage2D(3553,0,i,r,l,0,n)}else{i=this.format,r=this.widthActual,l=this.heightActual;var s=this.dataType;clay_opengl_web_GL.gl.pixelStorei(37441,this.premultiplyAlpha?1:0),clay_opengl_web_GL.gl.texImage2D(3553,0,i,r,l,0,i,s,n)}},fetch:function(n,e,t,i,r){return null==r&&(r=-1),null==i&&(i=-1),null==t&&(t=0),null==e&&(e=0),i<=0&&(i=this.width),r<=0&&(r=this.height),this.bind(),3553==this.type&&clay_opengl_GLGraphics.fetchTexture2dPixels(n,e,t,i,r),n},__class__:clay_graphics_Texture,__properties__:{set_wrapT:"set_wrapT",set_wrapS:"set_wrapS",set_filterMag:"set_filterMag",set_filterMin:"set_filterMin"}});var clay_graphics_RenderTexture=function(){this.antialiasing=0,this.stencil=!1,clay_graphics_Texture.call(this)};t["clay.graphics.RenderTexture"]=clay_graphics_RenderTexture,clay_graphics_RenderTexture.__name__="clay.graphics.RenderTexture",clay_graphics_RenderTexture.__super__=clay_graphics_Texture,clay_graphics_RenderTexture.prototype=$extend(clay_graphics_Texture.prototype,{init:function(){clay_graphics_Texture.prototype.init.call(this);var n=clay_opengl_web_GL.gl.getParameter(3379);n<=0&&(n=4096);var e=n;if(this.widthActual>e)throw haxe_Exception.thrown("RenderTexture actual width bigger than maximum hardware size (width="+this.widthActual+" max="+e+")");if(this.heightActual>e)throw haxe_Exception.thrown("RenderTexture actual height bigger than maximum hardware size (height="+this.heightActual+" max="+e+")");this.bind(),this.renderTarget=clay_opengl_GLGraphics.createRenderTarget(this.textureId,this.width,this.height,this.stencil,this.antialiasing,0,this.format,this.dataType)},destroy:function(){clay_graphics_Texture.prototype.destroy.call(this),null!=this.renderTarget&&(clay_opengl_GLGraphics.deleteRenderTarget(this.renderTarget),this.renderTarget=null)},__class__:clay_graphics_RenderTexture});var clay_graphics_TextureAndSlot=function(n,e){this.texture=n,this.slot=e};t["clay.graphics.TextureAndSlot"]=clay_graphics_TextureAndSlot,clay_graphics_TextureAndSlot.__name__="clay.graphics.TextureAndSlot",clay_graphics_TextureAndSlot.prototype={__class__:clay_graphics_TextureAndSlot};var clay_graphics_Uniforms=function(n){this.dirtyTextures=[],this.dirtyColors=[],this.dirtyMatrix4s=[],this.dirtyVector4s=[],this.dirtyVector3s=[],this.dirtyVector2s=[],this.dirtyFloatArrays=[],this.dirtyFloats=[],this.dirtyIntArrays=[],this.dirtyInts=[],this.textures=new haxe_ds_StringMap,this.colors=new haxe_ds_StringMap,this.matrix4s=new haxe_ds_StringMap,this.vector4s=new haxe_ds_StringMap,this.vector3s=new haxe_ds_StringMap,this.vector2s=new haxe_ds_StringMap,this.floatArrays=new haxe_ds_StringMap,this.floats=new haxe_ds_StringMap,this.intArrays=new haxe_ds_StringMap,this.ints=new haxe_ds_StringMap,this.gpuShader=n};t["clay.graphics.Uniforms"]=clay_graphics_Uniforms,clay_graphics_Uniforms.__name__="clay.graphics.Uniforms",clay_graphics_Uniforms.prototype={setInt:function(n,e){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);this.ints.h[n]=e,this.dirtyInts.push(n)},setIntArray:function(n,e){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);this.intArrays.h[n]=e,this.dirtyIntArrays.push(n)},setFloat:function(n,e){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);this.floats.h[n]=e,this.dirtyFloats.push(n)},setFloatArray:function(n,e){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);this.floatArrays.h[n]=e,this.dirtyFloatArrays.push(n)},setVector2:function(n,e,t){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);var i=this.vector2s.h[n];if(null!=i)i.x=e,i.y=t;else{var r=this.vector2s,l=new clay_graphics_Vector2(e,t);r.h[n]=l}this.dirtyVector2s.push(n)},setVector3:function(n,e,t,i){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);var r=this.vector3s.h[n];if(null!=r)r.x=e,r.y=t,r.z=i;else{var l=this.vector3s,s=new clay_graphics_Vector3(e,t,i);l.h[n]=s}this.dirtyVector3s.push(n)},setVector4:function(n,e,t,i,r){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);var l=this.vector4s.h[n];if(null!=l)l.x=e,l.y=t,l.z=i,l.w=r;else{var s=this.vector4s,a=new clay_graphics_Vector4(e,t,i,r);s.h[n]=a}this.dirtyVector4s.push(n)},setMatrix4:function(n,e){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);var t=this.matrix4s.h[n];null==t&&(t=new Float32Array(16),this.matrix4s.h[n]=t);t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this.dirtyMatrix4s.push(n)},setColor:function(n,e,t,i,r){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);var l=this.colors.h[n];if(null!=l)l.r=e,l.g=t,l.b=i,l.a=r;else{var s=this.colors,a=new clay_graphics_Color(e,t,i,r);s.h[n]=a}this.dirtyColors.push(n)},setTexture:function(n,e,t){clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,n);var i=this.textures.h[n];if(null!=i)i.texture=t,i.slot=e;else{var r=this.textures,l=new clay_graphics_TextureAndSlot(t,e);r.h[n]=l}-1==this.dirtyTextures.indexOf(n)&&this.dirtyTextures.push(n)},apply:function(){var n=this.gpuShader;for(clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program));this.dirtyInts.length>0;){var e=this.dirtyInts.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),i=(n=this.gpuShader,this.ints.h[e]);clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1i(t,i)}for(;this.dirtyIntArrays.length>0;){e=this.dirtyIntArrays.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),n=this.gpuShader,i=this.intArrays.h[e];clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1iv(t,i)}for(;this.dirtyFloats.length>0;){e=this.dirtyFloats.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),n=this.gpuShader,i=this.floats.h[e];clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1f(t,i)}for(;this.dirtyFloatArrays.length>0;){e=this.dirtyFloatArrays.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),n=this.gpuShader,i=this.floatArrays.h[e];clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1fv(t,i)}for(;this.dirtyVector2s.length>0;){e=this.dirtyVector2s.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),i=this.vector2s.h[e],n=this.gpuShader;var r=i.x,l=i.y;clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform2f(t,r,l)}for(;this.dirtyVector3s.length>0;){e=this.dirtyVector3s.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),i=this.vector3s.h[e],n=this.gpuShader,r=i.x,l=i.y;var s=i.z;clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform3f(t,r,l,s)}for(;this.dirtyVector4s.length>0;){e=this.dirtyVector4s.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),i=this.vector4s.h[e],n=this.gpuShader,r=i.x,l=i.y,s=i.z;var a=i.w;clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform4f(t,r,l,s,a)}for(;this.dirtyMatrix4s.length>0;){e=this.dirtyMatrix4s.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),n=this.gpuShader,i=this.matrix4s.h[e];clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniformMatrix4fv(t,!1,i)}for(;this.dirtyColors.length>0;){e=this.dirtyColors.pop(),t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e),i=this.colors.h[e],n=this.gpuShader;var o=i.r,p=i.g,h=i.b,u=i.a;clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform4f(t,o,p,h,u)}for(var _=0,c=this.dirtyTextures.length;_<c;){var d=_++;e=this.dirtyTextures[d],t=clay_opengl_web_GL.gl.getUniformLocation(this.gpuShader.program,e);3553==(i=this.textures.h[e]).texture.type&&clay_opengl_GLGraphics.setTexture2dUniform(this.gpuShader,t,i.slot,i.texture.textureId)}},clone:function(){return new clay_graphics_Uniforms(this.gpuShader)},__class__:clay_graphics_Uniforms};var clay_graphics_Vector2=function(n,e){this.y=0,this.x=0,null!=n&&(this.x=n),null!=e&&(this.y=e)};t["clay.graphics.Vector2"]=clay_graphics_Vector2,clay_graphics_Vector2.__name__="clay.graphics.Vector2",clay_graphics_Vector2.prototype={__class__:clay_graphics_Vector2};var clay_graphics_Vector3=function(n,e,t){this.z=0,this.y=0,this.x=0,null!=n&&(this.x=n),null!=e&&(this.y=e),null!=t&&(this.z=t)};t["clay.graphics.Vector3"]=clay_graphics_Vector3,clay_graphics_Vector3.__name__="clay.graphics.Vector3",clay_graphics_Vector3.prototype={__class__:clay_graphics_Vector3};var clay_graphics_Vector4=function(n,e,t,i){this.w=0,this.z=0,this.y=0,this.x=0,null!=n&&(this.x=n),null!=e&&(this.y=e),null!=t&&(this.z=t),null!=i&&(this.w=i)};t["clay.graphics.Vector4"]=clay_graphics_Vector4,clay_graphics_Vector4.__name__="clay.graphics.Vector4",clay_graphics_Vector4.prototype={__class__:clay_graphics_Vector4};var clay_opengl_GLGraphics=function(){};t["clay.opengl.GLGraphics"]=clay_opengl_GLGraphics,clay_opengl_GLGraphics.__name__="clay.opengl.GLGraphics",clay_opengl_GLGraphics.setup=function(){clay_opengl_GLGraphics._defaultFramebuffer=clay_opengl_web_GL.gl.getParameter(36006),clay_opengl_GLGraphics._defaultRenderbuffer=clay_opengl_web_GL.gl.getParameter(36007),clay_opengl_GLGraphics._didFetchDefaultBuffers=!0},clay_opengl_GLGraphics.clear=function(n,e,t,i,r){null==r&&(r=!0),clay_opengl_web_GL.gl.clearColor(n,e,t,i),r&&clay_Clay.app.config.render.depth>0?(clay_opengl_web_GL.gl.clear(16640),clay_opengl_web_GL.gl.clearDepth(1)):clay_opengl_web_GL.gl.clear(16384)},clay_opengl_GLGraphics.createTextureId=function(){return clay_opengl_web_GL.gl.createTexture()},clay_opengl_GLGraphics.setActiveTexture=function(n){if(clay_opengl_GLGraphics._activeTextureSlot!=n){for(clay_opengl_GLGraphics._activeTextureSlot=n;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+n)}},clay_opengl_GLGraphics.deleteTexture=function(n){clay_opengl_web_GL.gl.deleteTexture(n);for(var e=0,t=clay_opengl_GLGraphics._boundTexture2D.length;e<t;){var i=e++;clay_opengl_GLGraphics._boundTexture2D[i]==n&&(clay_opengl_GLGraphics._boundTexture2D[i]=null)}},clay_opengl_GLGraphics.setViewport=function(n,e,t,i){clay_opengl_web_GL.gl.viewport(n,e,t,i)},clay_opengl_GLGraphics.bindTexture2d=function(n){clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=n&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=n,clay_opengl_web_GL.gl.bindTexture(3553,n))},clay_opengl_GLGraphics.maxTextureSize=function(){var n=clay_opengl_web_GL.gl.getParameter(3379);return n<=0&&(n=4096),n},clay_opengl_GLGraphics.needsPreprocessedPremultipliedAlpha=function(){return!1},clay_opengl_GLGraphics.submitCompressedTexture2dPixels=function(n,e,t,i,r,l){clay_opengl_web_GL.gl.pixelStorei(37441,l?1:0),clay_opengl_web_GL.gl.compressedTexImage2D(3553,n,e,t,i,0,r)},clay_opengl_GLGraphics.submitTexture2dPixels=function(n,e,t,i,r,l,s){clay_opengl_web_GL.gl.pixelStorei(37441,s?1:0),clay_opengl_web_GL.gl.texImage2D(3553,n,e,t,i,0,e,r,l)},clay_opengl_GLGraphics.fetchTexture2dPixels=function(n,e,t,i,r){if(null==n)throw haxe_Exception.thrown("Texture fetch requires a valid buffer to store the pixels.");var l=clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot],s=i*r*4;if(n.length<s)throw haxe_Exception.thrown("Texture fetch requires at least "+s+" (w * h * 4) bytes for the pixels, you have "+n.length+"!");var a=clay_opengl_web_GL.gl.createFramebuffer();if(clay_opengl_web_GL.gl.bindFramebuffer(36160,a),clay_opengl_web_GL.gl.framebufferTexture2D(36160,36064,3553,l,0),36053!=clay_opengl_web_GL.gl.checkFramebufferStatus(36160))throw haxe_Exception.thrown("Incomplete framebuffer");clay_opengl_web_GL.gl.readPixels(e,t,i,r,6408,5121,n),clay_opengl_web_GL.gl.bindFramebuffer(36160,null),clay_opengl_web_GL.gl.deleteFramebuffer(a),a=null},clay_opengl_GLGraphics.createFramebuffer=function(){return clay_opengl_web_GL.gl.createFramebuffer()},clay_opengl_GLGraphics.bindFramebuffer=function(n){clay_opengl_GLGraphics._boundFramebuffer!=n&&(clay_opengl_GLGraphics._boundFramebuffer=n,null==n&&(n=clay_opengl_GLGraphics._defaultFramebuffer),clay_opengl_web_GL.gl.bindFramebuffer(36160,n))},clay_opengl_GLGraphics.createRenderbuffer=function(){return clay_opengl_web_GL.gl.createRenderbuffer()},clay_opengl_GLGraphics.bindRenderbuffer=function(n){clay_opengl_GLGraphics._boundRenderbuffer!=n&&(clay_opengl_GLGraphics._boundRenderbuffer=n,null==n&&(n=clay_opengl_GLGraphics._defaultRenderbuffer),clay_opengl_web_GL.gl.bindRenderbuffer(36161,n))},clay_opengl_GLGraphics.setTexture2dMinFilter=function(n){clay_opengl_web_GL.gl.texParameteri(3553,10241,n)},clay_opengl_GLGraphics.setTexture2dMagFilter=function(n){clay_opengl_web_GL.gl.texParameteri(3553,10240,n)},clay_opengl_GLGraphics.setTexture2dWrapS=function(n){clay_opengl_web_GL.gl.texParameteri(3553,10242,n)},clay_opengl_GLGraphics.setTexture2dWrapT=function(n){clay_opengl_web_GL.gl.texParameteri(3553,10243,n)},clay_opengl_GLGraphics.configureRenderTargetBuffersStorage=function(n,e,t,i,r,l){var s=n.framebuffer,a=n.renderbuffer;clay_opengl_GLGraphics.bindFramebuffer(s),clay_opengl_GLGraphics.bindRenderbuffer(a),r?clay_opengl_web_GL.gl.renderbufferStorage(36161,34041,t,i):clay_opengl_web_GL.gl.renderbufferStorage(36161,33189,t,i),clay_opengl_web_GL.gl.framebufferTexture2D(36160,36064,3553,e,0),r?clay_opengl_web_GL.gl.framebufferRenderbuffer(36160,33306,36161,a):clay_opengl_web_GL.gl.framebufferRenderbuffer(36160,36096,36161,a);var o=clay_opengl_web_GL.gl.checkFramebufferStatus(36160);switch(o){case 36053:break;case 36054:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case 36055:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case 36057:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case 36059:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER");case 36060:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_READ_BUFFER");case 36061:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");default:throw haxe_Exception.thrown("Incomplete framebuffer: "+o)}clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null)},clay_opengl_GLGraphics.createRenderTarget=function(n,e,t,i,r,l,s,a){var o=new clay_opengl_GLGraphics_$RenderTarget;clay_opengl_web_GL.gl.texImage2D(3553,l,s,e,t,0,s,a,null),o.framebuffer=clay_opengl_web_GL.gl.createFramebuffer(),o.renderbuffer=clay_opengl_web_GL.gl.createRenderbuffer();var p=o.framebuffer,h=o.renderbuffer;clay_opengl_GLGraphics.bindFramebuffer(p),clay_opengl_GLGraphics.bindRenderbuffer(h),i?clay_opengl_web_GL.gl.renderbufferStorage(36161,34041,e,t):clay_opengl_web_GL.gl.renderbufferStorage(36161,33189,e,t),clay_opengl_web_GL.gl.framebufferTexture2D(36160,36064,3553,n,0),i?clay_opengl_web_GL.gl.framebufferRenderbuffer(36160,33306,36161,h):clay_opengl_web_GL.gl.framebufferRenderbuffer(36160,36096,36161,h);var u=clay_opengl_web_GL.gl.checkFramebufferStatus(36160);switch(u){case 36053:break;case 36054:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case 36055:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case 36057:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case 36059:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER");case 36060:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_READ_BUFFER");case 36061:throw haxe_Exception.thrown("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");default:throw haxe_Exception.thrown("Incomplete framebuffer: "+u)}return clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null),o},clay_opengl_GLGraphics.deleteRenderTarget=function(n){null!=n.framebuffer&&(clay_opengl_GLGraphics._boundFramebuffer==n.framebuffer&&(clay_opengl_GLGraphics._boundFramebuffer=null),clay_opengl_web_GL.gl.deleteFramebuffer(n.framebuffer),n.framebuffer=null),null!=n.renderbuffer&&(clay_opengl_GLGraphics._boundRenderbuffer==n.renderbuffer&&(clay_opengl_GLGraphics._boundRenderbuffer=null),clay_opengl_web_GL.gl.deleteRenderbuffer(n.renderbuffer),n.renderbuffer=null)},clay_opengl_GLGraphics.setRenderTarget=function(n){null!=n?(clay_opengl_GLGraphics.bindFramebuffer(n.framebuffer),clay_opengl_GLGraphics.bindRenderbuffer(n.renderbuffer)):(clay_opengl_GLGraphics.bindFramebuffer(null),clay_opengl_GLGraphics.bindRenderbuffer(null))},clay_opengl_GLGraphics.enableBlending=function(){clay_opengl_web_GL.gl.enable(3042)},clay_opengl_GLGraphics.disableBlending=function(){clay_opengl_web_GL.gl.disable(3042)},clay_opengl_GLGraphics.createShader=function(n,e,t,i){if(null==n)throw haxe_Exception.thrown("Cannot create shader: vertSource is null!");if(null==e)throw haxe_Exception.thrown("Cannot create shader: fragSource is null!");var r=new clay_opengl_GLGraphics_$GpuShader;return r.vertShader=clay_opengl_GLGraphics.compileGLShader(35633,n),null==r.vertShader?(clay_opengl_GLGraphics.deleteShader(r),null):(r.fragShader=clay_opengl_GLGraphics.compileGLShader(35632,e),null==r.fragShader?(clay_opengl_GLGraphics.deleteShader(r),null):clay_opengl_GLGraphics.linkShader(r,t)?(null!=i&&clay_opengl_GLGraphics.configureShaderTextureSlots(r,i),r):(clay_opengl_GLGraphics.deleteShader(r),null))},clay_opengl_GLGraphics.linkShader=function(n,e){var t=clay_opengl_web_GL.gl.createProgram();if(clay_opengl_web_GL.gl.attachShader(t,n.vertShader),clay_opengl_web_GL.gl.attachShader(t,n.fragShader),null!=e)for(var i=0,r=e.length;i<r;){var l=i++;clay_opengl_web_GL.gl.bindAttribLocation(t,l,e[l])}if(clay_opengl_web_GL.gl.linkProgram(t),0==clay_opengl_web_GL.gl.getProgramParameter(t,35714)){clay_Log.error("\tFailed to link shader program:",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/opengl/GLGraphics.hx",lineNumber:571,className:"clay.opengl.GLGraphics",methodName:"linkShader"});for(var s=clay_opengl_web_GL.gl.getProgramInfoLog(t).split("\n"),a=(i=[],r=0,s);r<a.length;){var o=a[r];++r,""!=StringTools.trim(o)&&i.push(o)}s=i;var p=new Array(s.length);for(i=0,r=s.length;i<r;){p[l=i++]="\t\t"+StringTools.trim(s[l])}return s=p,clay_Log.error(s.join("\n"),{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/opengl/GLGraphics.hx",lineNumber:572,className:"clay.opengl.GLGraphics",methodName:"linkShader"}),clay_opengl_web_GL.gl.deleteProgram(t),!1}return n.program=t,!0},clay_opengl_GLGraphics.configureShaderTextureSlots=function(n,e){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program));for(var t=0,i=e.length;t<i;){var r=t++,l=e[r],s=clay_opengl_web_GL.gl.getUniformLocation(n.program,l);null!=s&&(clay_opengl_web_GL.gl.uniform1i(s,r),n.textures[r]=l)}},clay_opengl_GLGraphics.useShader=function(n){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program))},clay_opengl_GLGraphics.deleteShader=function(n){clay_opengl_GLGraphics._boundProgram==n.program&&(clay_opengl_GLGraphics._boundProgram=null),null!=n.vertShader&&(clay_opengl_web_GL.gl.deleteShader(n.vertShader),n.vertShader=null),null!=n.fragShader&&(clay_opengl_web_GL.gl.deleteShader(n.fragShader),n.fragShader=null),null!=n.program&&(clay_opengl_web_GL.gl.deleteProgram(n.program),n.program=null)},clay_opengl_GLGraphics.compileGLShader=function(n,e){var t=clay_opengl_web_GL.gl.createShader(n);clay_opengl_web_GL.gl.shaderSource(t,e),clay_opengl_web_GL.gl.compileShader(t);var i=clay_opengl_web_GL.gl.getShaderInfoLog(t),r="";if(null!=i&&i.length>0){r+="\n\t// start -- ("+(35632==n?"frag":"vert")+") compile log --\n";for(var l=[],s=0,a=u=i.split("\n");s<a.length;){var o=a[s];++s,""!=StringTools.trim(o)&&l.push(o)}u=l;var p=new Array(u.length);for(l=0,s=u.length;l<s;){p[_=l++]="\t\t"+StringTools.trim(u[_])}r+=(u=p).join("\n"),r+="\n\t// end --\n"}if(0==clay_opengl_web_GL.gl.getShaderParameter(t,35713)){var h;if(clay_Log.error("GL / Failed to compile shader:",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/opengl/GLGraphics.hx",lineNumber:659,className:"clay.opengl.GLGraphics",methodName:"compileGLShader"}),0==r.length){var u;for(l=[],s=0,a=u=clay_opengl_web_GL.gl.getShaderInfoLog(t).split("\n");s<a.length;){o=a[s];++s,""!=StringTools.trim(o)&&l.push(o)}u=l;for(p=new Array(u.length),l=0,s=u.length;l<s;){var _;p[_=l++]="\t\t"+StringTools.trim(u[_])}h=(u=p).join("\n")}else h=r;clay_Log.error(h,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/opengl/GLGraphics.hx",lineNumber:660,className:"clay.opengl.GLGraphics",methodName:"compileGLShader"}),clay_opengl_web_GL.gl.deleteShader(t),t=null}return t},clay_opengl_GLGraphics.getUniformLocation=function(n,e){return clay_opengl_web_GL.gl.getUniformLocation(n.program,e)},clay_opengl_GLGraphics.setIntUniform=function(n,e,t){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1i(e,t)},clay_opengl_GLGraphics.setIntArrayUniform=function(n,e,t){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1iv(e,t)},clay_opengl_GLGraphics.setFloatUniform=function(n,e,t){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1f(e,t)},clay_opengl_GLGraphics.setFloatArrayUniform=function(n,e,t){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1fv(e,t)},clay_opengl_GLGraphics.setVector2Uniform=function(n,e,t,i){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform2f(e,t,i)},clay_opengl_GLGraphics.setVector3Uniform=function(n,e,t,i,r){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform3f(e,t,i,r)},clay_opengl_GLGraphics.setVector4Uniform=function(n,e,t,i,r,l){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform4f(e,t,i,r,l)},clay_opengl_GLGraphics.setColorUniform=function(n,e,t,i,r,l){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform4f(e,t,i,r,l)},clay_opengl_GLGraphics.setMatrix4Uniform=function(n,e,t){clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniformMatrix4fv(e,!1,t)},clay_opengl_GLGraphics.setTexture2dUniform=function(n,e,t,i){if(clay_opengl_GLGraphics._boundProgram!=n.program&&(clay_opengl_GLGraphics._boundProgram=n.program,clay_opengl_web_GL.gl.useProgram(n.program)),clay_opengl_web_GL.gl.uniform1i(e,t),clay_opengl_GLGraphics._activeTextureSlot!=t){for(clay_opengl_GLGraphics._activeTextureSlot=t;clay_opengl_GLGraphics._boundTexture2D.length<=clay_opengl_GLGraphics._activeTextureSlot;)clay_opengl_GLGraphics._boundTexture2D.push(null);clay_opengl_web_GL.gl.activeTexture(33984+t)}clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]!=i&&(clay_opengl_GLGraphics._boundTexture2D[clay_opengl_GLGraphics._activeTextureSlot]=i,clay_opengl_web_GL.gl.bindTexture(3553,i))},clay_opengl_GLGraphics.setBlendFuncSeparate=function(n,e,t,i){clay_opengl_web_GL.gl.blendFuncSeparate(n,e,t,i)},clay_opengl_GLGraphics.ensureNoError=function(){var n=clay_opengl_web_GL.gl.getError();if(0!=n)throw haxe_Exception.thrown("Failed with GL error: "+n)};var clay_opengl_GLGraphics_$RenderTarget=function(){};t["clay.opengl.GLGraphics_RenderTarget"]=clay_opengl_GLGraphics_$RenderTarget,clay_opengl_GLGraphics_$RenderTarget.__name__="clay.opengl.GLGraphics_RenderTarget",clay_opengl_GLGraphics_$RenderTarget.prototype={__class__:clay_opengl_GLGraphics_$RenderTarget};var clay_opengl_GLGraphics_$GpuShader=function(){this.textures=[]};t["clay.opengl.GLGraphics_GpuShader"]=clay_opengl_GLGraphics_$GpuShader,clay_opengl_GLGraphics_$GpuShader.__name__="clay.opengl.GLGraphics_GpuShader",clay_opengl_GLGraphics_$GpuShader.prototype={__class__:clay_opengl_GLGraphics_$GpuShader};var clay_opengl_web_GL=function(){};t["clay.opengl.web.GL"]=clay_opengl_web_GL,clay_opengl_web_GL.__name__="clay.opengl.web.GL",clay_opengl_web_GL.__properties__={get_version:"get_version"},clay_opengl_web_GL.versionString=function(){return"/ "+clay_opengl_web_GL.gl.getParameter(7938)+" / "+clay_opengl_web_GL.gl.getParameter(35724)+" / "+clay_opengl_web_GL.gl.getParameter(7937)+" / "+clay_opengl_web_GL.gl.getParameter(7936)+" /"},clay_opengl_web_GL.activeTexture=function(n){clay_opengl_web_GL.gl.activeTexture(n)},clay_opengl_web_GL.attachShader=function(n,e){clay_opengl_web_GL.gl.attachShader(n,e)},clay_opengl_web_GL.bindAttribLocation=function(n,e,t){clay_opengl_web_GL.gl.bindAttribLocation(n,e,t)},clay_opengl_web_GL.bindBuffer=function(n,e){clay_opengl_web_GL.gl.bindBuffer(n,e)},clay_opengl_web_GL.bindFramebuffer=function(n,e){clay_opengl_web_GL.gl.bindFramebuffer(n,e)},clay_opengl_web_GL.bindRenderbuffer=function(n,e){clay_opengl_web_GL.gl.bindRenderbuffer(n,e)},clay_opengl_web_GL.bindTexture=function(n,e){clay_opengl_web_GL.gl.bindTexture(n,e)},clay_opengl_web_GL.blendColor=function(n,e,t,i){clay_opengl_web_GL.gl.blendColor(n,e,t,i)},clay_opengl_web_GL.blendEquation=function(n){clay_opengl_web_GL.gl.blendEquation(n)},clay_opengl_web_GL.blendEquationSeparate=function(n,e){clay_opengl_web_GL.gl.blendEquationSeparate(n,e)},clay_opengl_web_GL.blendFunc=function(n,e){clay_opengl_web_GL.gl.blendFunc(n,e)},clay_opengl_web_GL.blendFuncSeparate=function(n,e,t,i){clay_opengl_web_GL.gl.blendFuncSeparate(n,e,t,i)},clay_opengl_web_GL.bufferData=function(n,e,t){clay_opengl_web_GL.gl.bufferData(n,e,t)},clay_opengl_web_GL.bufferSubData=function(n,e,t){clay_opengl_web_GL.gl.bufferSubData(n,e,t)},clay_opengl_web_GL.checkFramebufferStatus=function(n){return clay_opengl_web_GL.gl.checkFramebufferStatus(n)},clay_opengl_web_GL.clear=function(n){clay_opengl_web_GL.gl.clear(n)},clay_opengl_web_GL.clearColor=function(n,e,t,i){clay_opengl_web_GL.gl.clearColor(n,e,t,i)},clay_opengl_web_GL.clearDepth=function(n){clay_opengl_web_GL.gl.clearDepth(n)},clay_opengl_web_GL.clearStencil=function(n){clay_opengl_web_GL.gl.clearStencil(n)},clay_opengl_web_GL.colorMask=function(n,e,t,i){clay_opengl_web_GL.gl.colorMask(n,e,t,i)},clay_opengl_web_GL.compileShader=function(n){clay_opengl_web_GL.gl.compileShader(n)},clay_opengl_web_GL.compressedTexImage2D=function(n,e,t,i,r,l,s){clay_opengl_web_GL.gl.compressedTexImage2D(n,e,t,i,r,l,s)},clay_opengl_web_GL.compressedTexSubImage2D=function(n,e,t,i,r,l,s,a){clay_opengl_web_GL.gl.compressedTexSubImage2D(n,e,t,i,r,l,s,a)},clay_opengl_web_GL.copyTexImage2D=function(n,e,t,i,r,l,s,a){clay_opengl_web_GL.gl.copyTexImage2D(n,e,t,i,r,l,s,a)},clay_opengl_web_GL.copyTexSubImage2D=function(n,e,t,i,r,l,s,a){clay_opengl_web_GL.gl.copyTexSubImage2D(n,e,t,i,r,l,s,a)},clay_opengl_web_GL.createBuffer=function(){return clay_opengl_web_GL.gl.createBuffer()},clay_opengl_web_GL.createFramebuffer=function(){return clay_opengl_web_GL.gl.createFramebuffer()},clay_opengl_web_GL.createProgram=function(){return clay_opengl_web_GL.gl.createProgram()},clay_opengl_web_GL.createRenderbuffer=function(){return clay_opengl_web_GL.gl.createRenderbuffer()},clay_opengl_web_GL.createShader=function(n){return clay_opengl_web_GL.gl.createShader(n)},clay_opengl_web_GL.createTexture=function(){return clay_opengl_web_GL.gl.createTexture()},clay_opengl_web_GL.cullFace=function(n){clay_opengl_web_GL.gl.cullFace(n)},clay_opengl_web_GL.deleteBuffer=function(n){clay_opengl_web_GL.gl.deleteBuffer(n)},clay_opengl_web_GL.deleteFramebuffer=function(n){clay_opengl_web_GL.gl.deleteFramebuffer(n)},clay_opengl_web_GL.deleteProgram=function(n){clay_opengl_web_GL.gl.deleteProgram(n)},clay_opengl_web_GL.deleteRenderbuffer=function(n){clay_opengl_web_GL.gl.deleteRenderbuffer(n)},clay_opengl_web_GL.deleteShader=function(n){clay_opengl_web_GL.gl.deleteShader(n)},clay_opengl_web_GL.deleteTexture=function(n){clay_opengl_web_GL.gl.deleteTexture(n)},clay_opengl_web_GL.depthFunc=function(n){clay_opengl_web_GL.gl.depthFunc(n)},clay_opengl_web_GL.depthMask=function(n){clay_opengl_web_GL.gl.depthMask(n)},clay_opengl_web_GL.depthRange=function(n,e){clay_opengl_web_GL.gl.depthRange(n,e)},clay_opengl_web_GL.detachShader=function(n,e){clay_opengl_web_GL.gl.detachShader(n,e)},clay_opengl_web_GL.disable=function(n){clay_opengl_web_GL.gl.disable(n)},clay_opengl_web_GL.disableVertexAttribArray=function(n){clay_opengl_web_GL.gl.disableVertexAttribArray(n)},clay_opengl_web_GL.drawArrays=function(n,e,t){clay_opengl_web_GL.gl.drawArrays(n,e,t)},clay_opengl_web_GL.drawElements=function(n,e,t,i){clay_opengl_web_GL.gl.drawElements(n,e,t,i)},clay_opengl_web_GL.enable=function(n){clay_opengl_web_GL.gl.enable(n)},clay_opengl_web_GL.enableVertexAttribArray=function(n){clay_opengl_web_GL.gl.enableVertexAttribArray(n)},clay_opengl_web_GL.finish=function(){clay_opengl_web_GL.gl.finish()},clay_opengl_web_GL.flush=function(){clay_opengl_web_GL.gl.flush()},clay_opengl_web_GL.framebufferRenderbuffer=function(n,e,t,i){clay_opengl_web_GL.gl.framebufferRenderbuffer(n,e,t,i)},clay_opengl_web_GL.framebufferTexture2D=function(n,e,t,i,r){clay_opengl_web_GL.gl.framebufferTexture2D(n,e,t,i,r)},clay_opengl_web_GL.frontFace=function(n){clay_opengl_web_GL.gl.frontFace(n)},clay_opengl_web_GL.generateMipmap=function(n){clay_opengl_web_GL.gl.generateMipmap(n)},clay_opengl_web_GL.getActiveAttrib=function(n,e){return clay_opengl_web_GL.gl.getActiveAttrib(n,e)},clay_opengl_web_GL.getActiveUniform=function(n,e){return clay_opengl_web_GL.gl.getActiveUniform(n,e)},clay_opengl_web_GL.getAttachedShaders=function(n){return clay_opengl_web_GL.gl.getAttachedShaders(n)},clay_opengl_web_GL.getAttribLocation=function(n,e){return clay_opengl_web_GL.gl.getAttribLocation(n,e)},clay_opengl_web_GL.getBufferParameter=function(n,e){return clay_opengl_web_GL.gl.getBufferParameter(n,e)},clay_opengl_web_GL.getContextAttributes=function(){return clay_opengl_web_GL.gl.getContextAttributes()},clay_opengl_web_GL.getError=function(){return clay_opengl_web_GL.gl.getError()},clay_opengl_web_GL.getExtension=function(n){return clay_opengl_web_GL.gl.getExtension(n)},clay_opengl_web_GL.getFramebufferAttachmentParameter=function(n,e,t){return clay_opengl_web_GL.gl.getFramebufferAttachmentParameter(n,e,t)},clay_opengl_web_GL.getParameter=function(n){return clay_opengl_web_GL.gl.getParameter(n)},clay_opengl_web_GL.getProgramInfoLog=function(n){return clay_opengl_web_GL.gl.getProgramInfoLog(n)},clay_opengl_web_GL.getProgramParameter=function(n,e){return clay_opengl_web_GL.gl.getProgramParameter(n,e)},clay_opengl_web_GL.getRenderbufferParameter=function(n,e){return clay_opengl_web_GL.gl.getRenderbufferParameter(n,e)},clay_opengl_web_GL.getShaderInfoLog=function(n){return clay_opengl_web_GL.gl.getShaderInfoLog(n)},clay_opengl_web_GL.getShaderParameter=function(n,e){return clay_opengl_web_GL.gl.getShaderParameter(n,e)},clay_opengl_web_GL.getShaderPrecisionFormat=function(n,e){return clay_opengl_web_GL.gl.getShaderPrecisionFormat(n,e)},clay_opengl_web_GL.getShaderSource=function(n){return clay_opengl_web_GL.gl.getShaderSource(n)},clay_opengl_web_GL.getSupportedExtensions=function(){return clay_opengl_web_GL.gl.getSupportedExtensions()},clay_opengl_web_GL.getTexParameter=function(n,e){return clay_opengl_web_GL.gl.getTexParameter(n,e)},clay_opengl_web_GL.getUniform=function(n,e){return clay_opengl_web_GL.gl.getUniform(n,e)},clay_opengl_web_GL.getUniformLocation=function(n,e){return clay_opengl_web_GL.gl.getUniformLocation(n,e)},clay_opengl_web_GL.getVertexAttrib=function(n,e){return clay_opengl_web_GL.gl.getVertexAttrib(n,e)},clay_opengl_web_GL.getVertexAttribOffset=function(n,e){return clay_opengl_web_GL.gl.getVertexAttribOffset(n,e)},clay_opengl_web_GL.hint=function(n,e){clay_opengl_web_GL.gl.hint(n,e)},clay_opengl_web_GL.isBuffer=function(n){return clay_opengl_web_GL.gl.isBuffer(n)},clay_opengl_web_GL.isEnabled=function(n){return clay_opengl_web_GL.gl.isEnabled(n)},clay_opengl_web_GL.isFramebuffer=function(n){return clay_opengl_web_GL.gl.isFramebuffer(n)},clay_opengl_web_GL.isProgram=function(n){return clay_opengl_web_GL.gl.isProgram(n)},clay_opengl_web_GL.isRenderbuffer=function(n){return clay_opengl_web_GL.gl.isRenderbuffer(n)},clay_opengl_web_GL.isShader=function(n){return clay_opengl_web_GL.gl.isShader(n)},clay_opengl_web_GL.isTexture=function(n){return clay_opengl_web_GL.gl.isTexture(n)},clay_opengl_web_GL.lineWidth=function(n){clay_opengl_web_GL.gl.lineWidth(n)},clay_opengl_web_GL.linkProgram=function(n){clay_opengl_web_GL.gl.linkProgram(n)},clay_opengl_web_GL.pixelStorei=function(n,e){clay_opengl_web_GL.gl.pixelStorei(n,e)},clay_opengl_web_GL.polygonOffset=function(n,e){clay_opengl_web_GL.gl.polygonOffset(n,e)},clay_opengl_web_GL.readPixels=function(n,e,t,i,r,l,s){clay_opengl_web_GL.gl.readPixels(n,e,t,i,r,l,s)},clay_opengl_web_GL.renderbufferStorage=function(n,e,t,i){clay_opengl_web_GL.gl.renderbufferStorage(n,e,t,i)},clay_opengl_web_GL.sampleCoverage=function(n,e){clay_opengl_web_GL.gl.sampleCoverage(n,e)},clay_opengl_web_GL.scissor=function(n,e,t,i){clay_opengl_web_GL.gl.scissor(n,e,t,i)},clay_opengl_web_GL.shaderSource=function(n,e){clay_opengl_web_GL.gl.shaderSource(n,e)},clay_opengl_web_GL.stencilFunc=function(n,e,t){clay_opengl_web_GL.gl.stencilFunc(n,e,t)},clay_opengl_web_GL.stencilFuncSeparate=function(n,e,t,i){clay_opengl_web_GL.gl.stencilFuncSeparate(n,e,t,i)},clay_opengl_web_GL.stencilMask=function(n){clay_opengl_web_GL.gl.stencilMask(n)},clay_opengl_web_GL.stencilMaskSeparate=function(n,e){clay_opengl_web_GL.gl.stencilMaskSeparate(n,e)},clay_opengl_web_GL.stencilOp=function(n,e,t){clay_opengl_web_GL.gl.stencilOp(n,e,t)},clay_opengl_web_GL.stencilOpSeparate=function(n,e,t,i){clay_opengl_web_GL.gl.stencilOpSeparate(n,e,t,i)},clay_opengl_web_GL.texImage2D=function(n,e,t,i,r,l,s,a,o){clay_opengl_web_GL.gl.texImage2D(n,e,t,i,r,l,s,a,o)},clay_opengl_web_GL.texParameterf=function(n,e,t){clay_opengl_web_GL.gl.texParameterf(n,e,t)},clay_opengl_web_GL.texParameteri=function(n,e,t){clay_opengl_web_GL.gl.texParameteri(n,e,t)},clay_opengl_web_GL.texSubImage2D=function(n,e,t,i,r,l,s,a,o){clay_opengl_web_GL.gl.texSubImage2D(n,e,t,i,r,l,s,a,o)},clay_opengl_web_GL.uniform1f=function(n,e){clay_opengl_web_GL.gl.uniform1f(n,e)},clay_opengl_web_GL.uniform1fv=function(n,e){clay_opengl_web_GL.gl.uniform1fv(n,e)},clay_opengl_web_GL.uniform1i=function(n,e){clay_opengl_web_GL.gl.uniform1i(n,e)},clay_opengl_web_GL.uniform1iv=function(n,e){clay_opengl_web_GL.gl.uniform1iv(n,e)},clay_opengl_web_GL.uniform2f=function(n,e,t){clay_opengl_web_GL.gl.uniform2f(n,e,t)},clay_opengl_web_GL.uniform2fv=function(n,e){clay_opengl_web_GL.gl.uniform2fv(n,e)},clay_opengl_web_GL.uniform2i=function(n,e,t){clay_opengl_web_GL.gl.uniform2i(n,e,t)},clay_opengl_web_GL.uniform2iv=function(n,e){clay_opengl_web_GL.gl.uniform2iv(n,e)},clay_opengl_web_GL.uniform3f=function(n,e,t,i){clay_opengl_web_GL.gl.uniform3f(n,e,t,i)},clay_opengl_web_GL.uniform3fv=function(n,e){clay_opengl_web_GL.gl.uniform3fv(n,e)},clay_opengl_web_GL.uniform3i=function(n,e,t,i){clay_opengl_web_GL.gl.uniform3i(n,e,t,i)},clay_opengl_web_GL.uniform3iv=function(n,e){clay_opengl_web_GL.gl.uniform3iv(n,e)},clay_opengl_web_GL.uniform4f=function(n,e,t,i,r){clay_opengl_web_GL.gl.uniform4f(n,e,t,i,r)},clay_opengl_web_GL.uniform4fv=function(n,e){clay_opengl_web_GL.gl.uniform4fv(n,e)},clay_opengl_web_GL.uniform4i=function(n,e,t,i,r){clay_opengl_web_GL.gl.uniform4i(n,e,t,i,r)},clay_opengl_web_GL.uniform4iv=function(n,e){clay_opengl_web_GL.gl.uniform4iv(n,e)},clay_opengl_web_GL.uniformMatrix2fv=function(n,e,t){clay_opengl_web_GL.gl.uniformMatrix2fv(n,e,t)},clay_opengl_web_GL.uniformMatrix3fv=function(n,e,t){clay_opengl_web_GL.gl.uniformMatrix3fv(n,e,t)},clay_opengl_web_GL.uniformMatrix4fv=function(n,e,t){clay_opengl_web_GL.gl.uniformMatrix4fv(n,e,t)},clay_opengl_web_GL.useProgram=function(n){clay_opengl_web_GL.gl.useProgram(n)},clay_opengl_web_GL.validateProgram=function(n){clay_opengl_web_GL.gl.validateProgram(n)},clay_opengl_web_GL.vertexAttrib1f=function(n,e){clay_opengl_web_GL.gl.vertexAttrib1f(n,e)},clay_opengl_web_GL.vertexAttrib1fv=function(n,e){clay_opengl_web_GL.gl.vertexAttrib1fv(n,e)},clay_opengl_web_GL.vertexAttrib2f=function(n,e,t){clay_opengl_web_GL.gl.vertexAttrib2f(n,e,t)},clay_opengl_web_GL.vertexAttrib2fv=function(n,e){clay_opengl_web_GL.gl.vertexAttrib2fv(n,e)},clay_opengl_web_GL.vertexAttrib3f=function(n,e,t,i){clay_opengl_web_GL.gl.vertexAttrib3f(n,e,t,i)},clay_opengl_web_GL.vertexAttrib3fv=function(n,e){clay_opengl_web_GL.gl.vertexAttrib3fv(n,e)},clay_opengl_web_GL.vertexAttrib4f=function(n,e,t,i,r){clay_opengl_web_GL.gl.vertexAttrib4f(n,e,t,i,r)},clay_opengl_web_GL.vertexAttrib4fv=function(n,e){clay_opengl_web_GL.gl.vertexAttrib4fv(n,e)},clay_opengl_web_GL.vertexAttribPointer=function(n,e,t,i,r,l){clay_opengl_web_GL.gl.vertexAttribPointer(n,e,t,i,r,l)},clay_opengl_web_GL.viewport=function(n,e,t,i){clay_opengl_web_GL.gl.viewport(n,e,t,i)},clay_opengl_web_GL.get_version=function(){return 7938};var clay_web_WebAssets=function(n){clay_base_BaseAssets.call(this,n)};t["clay.web.WebAssets"]=clay_web_WebAssets,clay_web_WebAssets.__name__="clay.web.WebAssets",clay_web_WebAssets.__super__=clay_base_BaseAssets,clay_web_WebAssets.prototype=$extend(clay_base_BaseAssets.prototype,{isSynchronous:function(){return!1},loadImage:function(n,e,t,i){null==t&&(t=!1),null==e&&(e=4);var r=this;if(null==n)throw haxe_Exception.thrown("Image path is null!");var l=ceramic_Path.extension(n);return this.app.io.loadData(n,!0,null,(function(n){null!=n?r.imageFromBytesUsingImageElement(n,l,4,null,(function(n){null!=i&&clay_Immediate.push((function(){i(n)}))})):null!=i&&clay_Immediate.push((function(){i(null)}))})),null},decodeImageFromElement:function(n,e){null==e&&(e=!0);var t=e?this.nearestPowerOfTwo(n.width):n.width,i=e?this.nearestPowerOfTwo(n.height):n.height,r=this.paddedBytesFromElement(n.width,n.height,t,i,n),l=new clay_Image(n.width,n.height,t,i,4,4,r);return r=null,l},imageFromBytes:function(n,e,t,i,r){return null==i&&(i=!0),null==t&&(t=4),this.imageFromBytesUsingImageElement(n,e,t,i,r)},imageFromBytesUsingImageElement:function(n,e,t,i,r){null==i&&(i=!0),null==t&&(t=4);var l=this;if(null==n)throw haxe_Exception.thrown("Image bytes are null!");for(var s="",a=0,o=n.length;a<o;){var p=255&n[a++];s+=String.fromCodePoint(p)}var h="data:image/"+e+";base64,"+window.btoa(s),u=new Image;return u.onload=function(n){var e=l.decodeImageFromElement(u,i);null!=r&&clay_Immediate.push((function(){r(e)}))},u.onerror=function(n){clay_Log.error("failed to load image from bytes, on error: "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAssets.hx",lineNumber:216,className:"clay.web.WebAssets",methodName:"imageFromBytesUsingImageElement"})},u.src=h,null},pixelsToPngData:function(n,e,t,i){var r=window.document.createElement("canvas");r.width=n,r.height=e;var l=r.getContext("2d",null);l.clearRect(0,0,r.width,r.height);var s=new Uint8ClampedArray(t.buffer),a=l.createImageData(n,e);a.data.set(s);try{l.putImageData(a,0,0),r.toBlob((function(n){n.arrayBuffer().then((function(n){var e=new Uint8Array(n,0,n.byteLength);i(e),r=null,l=null,a=null}))}),"image/png")}catch(n){var o=haxe_Exception.caught(n).unwrap();throw haxe_Exception.thrown(o)}},paddedBytesFromPixels:function(n,e,t,i,r){var l=window.document.createElement("canvas");l.width=t,l.height=i;var s=l.getContext("2d",null);s.clearRect(0,0,l.width,l.height);var a=null,o=new Uint8ClampedArray(r.buffer),p=s.createImageData(n,e);p.data.set(o);try{s.putImageData(p,0,0),a=s.getImageData(0,0,l.width,l.height)}catch(n){var h=haxe_Exception.caught(n).unwrap();throw haxe_Exception.thrown(h)}return l=null,s=null,p=null,new Uint8Array(a.data)},paddedBytesFromElement:function(n,e,t,i,r){var l=window.document.createElement("canvas");l.width=t,l.height=i;var s=l.getContext("2d",null);s.clearRect(0,0,l.width,l.height),s.drawImage(r,0,0,n,e);var a=null;try{a=s.getImageData(0,0,l.width,l.height)}catch(n){var o=haxe_Exception.caught(n).unwrap();throw"- textures served over http:// work for cross origin byte requests",clay_Log.info("- textures served from file:/// throw security errors\n- textures served over http:// work for cross origin byte requests",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAssets.hx",lineNumber:333,className:"clay.web.WebAssets",methodName:"paddedBytesFromElement"}),haxe_Exception.thrown(o)}return l=null,s=null,new Uint8Array(a.data)},nearestPowerOfTwo:function(n){return clay_web_WebAssets.POT?(--n,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,++n):n},__class__:clay_web_WebAssets});var clay_web_WebAudio=function(n){this.active=!1,this.ignoreEndedSoundsTick1=[],this.ignoreEndedSoundsTick0=[],this.handleSeq=0,this.suspended=!1,clay_base_BaseAudio.call(this,n),this.instances=new haxe_ds_IntMap};t["clay.web.WebAudio"]=clay_web_WebAudio,clay_web_WebAudio.__name__="clay.web.WebAudio",clay_web_WebAudio.__super__=clay_base_BaseAudio,clay_web_WebAudio.prototype=$extend(clay_base_BaseAudio.prototype,{init:function(){this.initWebAudio()},tick:function(n){for(var e=this.instances,t=e,i=e.keys();i.hasNext();){var r=i.next(),l={value:t.get(r),key:r},s=l.key;if((p=l.value).loop&&1==p.state){var a=1==p.state?p.timeResume+(this.app.timestamp-p.timeResumeAppTime)*p.pitch:0,o=p.source.getDuration();if(o>0&&a>=o)for(this.app.events.audioEvent(0,s);a>=o;)a-=o,p.timeResumeAppTime+=o/p.pitch}}for(;this.ignoreEndedSoundsTick1.length>0;){(p=this.ignoreEndedSoundsTick1.shift()).ignoreNextEnded>0&&p.ignoreNextEnded--}for(;this.ignoreEndedSoundsTick0.length>0;){var p=this.ignoreEndedSoundsTick0.shift();this.ignoreEndedSoundsTick1.push(p)}},initWebAudio:function(){try{this.context=new AudioContext}catch(n){try{this.context=new window.webkitAudioContext}catch(n){return void clay_Log.debug("Audio / webaudio / no AudioContext could be created! No audio loading or playback will be available.",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:119,className:"clay.web.WebAudio",methodName:"initWebAudio"})}}if(null==this.context)throw haxe_Exception.thrown("Audio / webaudio / no AudioContext could be created, is the Web Audio API supported?");var n="channelCount: "+this.context.destination.channelCount+', channelCountMode: "'+this.context.destination.channelCountMode+'", channelInterpretation: "'+this.context.destination.channelInterpretation+'", maxChannelCount: '+this.context.destination.maxChannelCount+", numberOfInputs: "+this.context.destination.numberOfInputs+", numberOfOutputs: "+this.context.destination.numberOfOutputs;clay_Log.debug("Audio / webaudio: "+Std.string(this.context)+" / sampleRate: "+this.context.sampleRate+" / destination: "+n,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:135,className:"clay.web.WebAudio",methodName:"initWebAudio"}),this.active=!0},shutdown:function(){this.context.close()},soundOf:function(n){return this.instances.h[n]},playBuffer:function(n){var e=this.context.createBufferSource();return e.buffer=n.buffer,e},playBufferAgain:function(n,e,t){var i=this;e.bufferNode=this.playBuffer(e.source.data),e.bufferNode.playbackRate.value=e.pitch,e.bufferNode.connect(e.panNode),e.bufferNode.loop=e.loop,e.panNode.connect(e.gainNode),e.gainNode.connect(this.context.destination),e.bufferNode.start(0,t),e.bufferNode.onended=function(){i.soundEnded(e)}},playInstance:function(n,e,t,i,r,l,s){var a=this,o=this.context.createGain(),p=this.context.createPanner(),h=null;o.gain.value=l,p.panningModel="equalpower",p.setPosition(Math.cos(-1.5707),0,Math.sin(1.5707)),null!=r&&(h=r,r.loop=s),null!=i.mediaNode&&(h=i.mediaNode,i.mediaElem.loop=s),h.connect(p),p.connect(o),o.connect(this.context.destination);var u={handle:n,source:e,instance:t,bufferNode:r,mediaNode:i.mediaNode,mediaElem:i.mediaElem,gainNode:o,panNode:p,state:1,loop:s,pan:0,pitch:1,ignoreNextEnded:0,timeResumeAppTime:this.app.timestamp,timeResume:0,timePause:null};this.instances.h[n]=u,null!=r&&(r.start(0),r.onended=function(){a.soundEnded(u)}),null!=i.mediaNode&&(i.mediaElem.play(),i.mediaElem.onended=function(){a.soundEnded(u)})},play:function(n,e,t){var i=n.data,r=this.handleSeq,l=n.instance(r);return n.data.isStream?(i.mediaElem.play(),i.mediaElem.volume=1,this.playInstance(r,n,l,i,null,e,!1)):this.playInstance(r,n,l,i,this.playBuffer(i),e,!1),this.handleSeq++,t&&this.pause(r),r},loop:function(n,e,t){var i=n.data,r=this.handleSeq,l=n.instance(r);return n.data.isStream?(i.mediaElem.play(),i.mediaElem.volume=1,this.playInstance(r,n,l,i,null,e,!0)):this.playInstance(r,n,l,i,this.playBuffer(i),e,!0),this.handleSeq++,t&&this.pause(r),r},stopBuffer:function(n){n.bufferNode.stop(),n.bufferNode.disconnect(),n.gainNode.disconnect(),n.panNode.disconnect(),n.bufferNode=null},pause:function(n){var e=this.instances.h[n];if(null!=e&&1==e.state){clay_Log.debug("Audio / pause handle="+n+", "+e.source.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:319,className:"clay.web.WebAudio",methodName:"pause"});var t=this.positionOf(n);e.timePause=t,e.state=0,null!=e.bufferNode?this.stopBuffer(e):null!=e.mediaNode&&e.mediaElem.pause()}},unPause:function(n){var e=this.instances.h[n];null!=e&&0==e.state&&(clay_Log.debug("Audio / unpause handle="+n+", "+e.source.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:342,className:"clay.web.WebAudio",methodName:"unPause"}),e.timeResume=null!=e.timePause?e.timePause:0,e.timeResumeAppTime=this.app.timestamp,null==e.mediaNode?this.playBufferAgain(n,e,e.timePause):e.mediaElem.play(),e.state=1)},soundEnded:function(n){n.ignoreNextEnded>0?n.ignoreNextEnded--:0!=n.state&&(1!=n.state||this.positionOf(n.handle)+.1>=n.source.getDuration())&&this.destroySound(n)},destroySound:function(n){null!=n.source&&this.instances.h.hasOwnProperty(n.handle)&&this.positionOf(n.handle)+.1>=n.source.getDuration()&&this.app.events.audioEvent(0,n.handle),null!=n.bufferNode&&(n.bufferNode.stop(),n.bufferNode.disconnect(),n.gainNode.disconnect(),n.panNode.disconnect(),n.bufferNode=null),null!=n.mediaNode&&(n.mediaElem.pause(),n.mediaElem.currentTime=0,n.mediaNode.disconnect(),n.mediaElem=null,n.mediaNode=null),null!=n.gainNode&&(n.gainNode.disconnect(),n.gainNode=null),null!=n.panNode&&(n.panNode.disconnect(),n.panNode=null),this.instances.h.hasOwnProperty(n.handle)&&(this.instances.remove(n.handle),this.app.events.audioEvent(1,n.handle)),n=null},stop:function(n){var e=this.instances.h[n];null!=e&&(2!=e.state&&clay_Log.debug("Audio / stop handle="+n+(null!=e.source&&null!=e.source.data?", "+e.source.data.id:""),{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:416,className:"clay.web.WebAudio",methodName:"stop"}),this.destroySound(e),e.state=2)},volume:function(n,e){var t=this.instances.h[n];null!=t&&(clay_Log.debug("Audio / volume="+e+" handle="+n+", "+t.source.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:429,className:"clay.web.WebAudio",methodName:"volume"}),t.gainNode.gain.value=e)},pan:function(n,e){var t=this.instances.h[n];null!=t&&(clay_Log.debug("Audio / pan="+e+" handle="+n+", "+t.source.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:441,className:"clay.web.WebAudio",methodName:"pan"}),t.pan=e,t.panNode.setPosition(Math.cos(1.5707*(e-1)),0,Math.sin(1.5707*(e+1))))},pitch:function(n,e){var t=this.instances.h[n];if(null!=t){if(clay_Log.debug("Audio / pitch="+e+" handle="+n+", "+t.source.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:457,className:"clay.web.WebAudio",methodName:"pitch"}),null==t.mediaNode){var i=this.positionOf(n);t.pitch=e,1==t.state&&(t.timeResumeAppTime=t.timeResume+this.app.timestamp-i/t.pitch)}if(null!=t.bufferNode)t.bufferNode.playbackRate.value=e;else t.mediaNode}},position:function(n,e){var t=this.instances.h[n];null!=t&&(clay_Log.debug("Audio / position="+e+" handle="+n+", "+t.source.data.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:482,className:"clay.web.WebAudio",methodName:"position"}),0==t.state?t.timePause=e:(t.timeResume=e,t.timeResumeAppTime=this.app.timestamp,null!=t.bufferNode?(t.ignoreNextEnded++,this.ignoreEndedSoundsTick0.push(t),this.stopBuffer(t),this.playBufferAgain(n,t,e)):t.mediaElem.currentTime=e))},volumeOf:function(n){var e=this.instances.h[n];return null==e?0:e.gainNode.gain.value},panOf:function(n){var e=this.instances.h[n];return null==e?0:e.pan},pitchOf:function(n){var e=this.instances.h[n];return null==e?1:e.pitch},positionOf:function(n){var e=this.instances.h[n];if(null==e)return 0;if(null!=e.mediaElem)return e.mediaElem.currentTime;switch(e.state){case-1:case 2:return 0;case 0:case 1:var t;switch(e.state){case 0:t=e.timePause;break;case 1:t=e.timeResume+(this.app.timestamp-e.timeResumeAppTime)*e.pitch;break;default:t=0}var i=e.source.getDuration();return i>0&&(e.loop?t%=i:t>i&&(t=i)),t}},stateOf:function(n){var e=this.instances.h[n];return null==e?-1:e.state},loopOf:function(n){var e=this.instances.h[n];return null!=e&&e.loop},instanceOf:function(n){var e=this.instances.h[n];return null==e?null:e.instance},suspend:function(){this.active&&(this.suspended||(this.suspended=!0,this.active=!1,this.context.suspend()))},resume:function(){this.active||this.suspended&&(this.suspended=!1,this.active=!0,this.context.resume())},loadData:function(n,e,t,i,r){if(null==i&&(i=!1),null==n)throw haxe_Exception.thrown("path is null!");return this.active?e?(this.loadDataFromStream(n,t,r),null):(this.loadDataFromSound(n,t,r),null):(clay_Log.error("Audio / WebAudio context unavailable",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:628,className:"clay.web.WebAudio",methodName:"loadData"}),null!=r&&clay_Immediate.push((function(){r(null)})),null)},dataFromBytes:function(n,e,t,i){var r=this;if(this.active){if(null==n)throw haxe_Exception.thrown("id is null!");if(null==e)throw haxe_Exception.thrown("bytes is null!");this.context.decodeAudioData(e.buffer,(function(e){var l=new clay_web__$WebAudio_WebAudioData(r.app,e,null,null,new clay_audio_AudioDataOptions(n,0|e.sampleRate,e.length,e.duration,e.numberOfChannels,null,t,null,!1));null!=i&&clay_Immediate.push((function(){i(l)}))}),(function(){clay_Log.error("Audio / failed to decode audio for `"+n+"`",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:685,className:"clay.web.WebAudio",methodName:"dataFromBytes"}),null!=i&&clay_Immediate.push((function(){i(null)}))}))}else null!=i&&clay_Immediate.push((function(){i(null)}))},handleSourceDestroyed:function(n){},handleInstanceDestroyed:function(n){this.stop(n)},loadDataFromSound:function(n,e,t){var i=this;this.app.io.loadData(n,!0,null,(function(r){null!=r?i.dataFromBytes(n,r,e,t):null!=t&&clay_Immediate.push((function(){t(null)}))}))},loadDataFromStream:function(n,e,t){var i=this,r=new Audio(n);r.autoplay=!1,r.controls=!1,r.preload="auto",r.onerror=function(e){var i;switch(r.error.code){case 1:i="MEDIA_ERR_ABORTED";break;case 2:i="MEDIA_ERR_NETWORK";break;case 3:i="MEDIA_ERR_DECODE";break;case 4:i="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:i="MEDIA_ERR_ENCRYPTED";break;default:i="unknown error"}clay_Log.error("Audio / failed to load `"+n+"` as stream : `"+i+"`",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebAudio.hx",lineNumber:748,className:"clay.web.WebAudio",methodName:"loadDataFromStream"}),null!=t&&clay_Immediate.push((function(){t(null)}))},r.onloadedmetadata=function(l){var s=i.context.createMediaElementSource(r),a=0|i.context.sampleRate,o=s.channelCount,p=a*o*2,h=r.duration*p|0,u=new clay_web__$WebAudio_WebAudioData(i.app,null,s,r,new clay_audio_AudioDataOptions(n,a,h,r.duration,o,null,e,null,!0));null!=t&&clay_Immediate.push((function(){t(u)}))}},__class__:clay_web_WebAudio});var clay_web__$WebAudio_WebAudioData=function(n,e,t,i,r){this.buffer=e,this.mediaNode=t,this.mediaElem=i,clay_audio_AudioData.call(this,n,r)};t["clay.web._WebAudio.WebAudioData"]=clay_web__$WebAudio_WebAudioData,clay_web__$WebAudio_WebAudioData.__name__="clay.web._WebAudio.WebAudioData",clay_web__$WebAudio_WebAudioData.__super__=clay_audio_AudioData,clay_web__$WebAudio_WebAudioData.prototype=$extend(clay_audio_AudioData.prototype,{destroy:function(){this.buffer=null,this.mediaNode=null,this.mediaElem=null,clay_audio_AudioData.prototype.destroy.call(this)},__class__:clay_web__$WebAudio_WebAudioData});var clay_web_WebConfig=function(n,e,t,i,r,l,s){this.mouseUseBrowserWindowEvents=!0,this.preventDefaultKeys=[1073741904,1073741903,1073741906,1073741905,8,9,127,32],this.preventDefaultTouches=!0,this.preventDefaultMouseWheel=!0,this.preventDefaultContextMenu=!0,this.windowParent=window.document.body,this.windowId="app",null!=n&&(this.windowId=n),null!=e&&(this.windowParent=e),null!=t&&(this.preventDefaultContextMenu=t),null!=i&&(this.preventDefaultMouseWheel=i),null!=r&&(this.preventDefaultTouches=r),null!=l&&(this.preventDefaultKeys=l),null!=s&&(this.mouseUseBrowserWindowEvents=s)};t["clay.web.WebConfig"]=clay_web_WebConfig,clay_web_WebConfig.__name__="clay.web.WebConfig",clay_web_WebConfig.prototype={__class__:clay_web_WebConfig};var clay_web_WebIO=function(n){clay_base_BaseIO.call(this,n)};t["clay.web.WebIO"]=clay_web_WebIO,clay_web_WebIO.__name__="clay.web.WebIO",clay_web_WebIO.__super__=clay_base_BaseIO,clay_web_WebIO.prototype=$extend(clay_base_BaseIO.prototype,{isSynchronous:function(){return!1},loadData:function(n,e,t,i){if(null==t&&(t=!1),null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Path is null!");var r=new XMLHttpRequest;return r.open("GET",n,true),e?r.overrideMimeType("text/plain; charset=x-user-defined"):r.overrideMimeType("text/plain; charset=UTF-8"),r.responseType="arraybuffer",r.onload=function(n){if(200==r.status){var e=new Uint8Array(r.response);null!=i&&clay_Immediate.push((function(){i(e)}))}else clay_Log.error("Request status was "+r.status+" / "+r.statusText,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebIO.hx",lineNumber:102,className:"clay.web.WebIO",methodName:"loadData"}),null!=i&&clay_Immediate.push((function(){i(n)}))},r.send(),null},__class__:clay_web_WebIO});var clay_web_WebRuntime=function(n){this.keyDownStates=new ceramic_IntMap,this.pendingKeyUps=[],this.touches=new ceramic_IntMap,this.windowDpr=1,this.windowY=0,this.windowX=0,this.skipKeyboardEvents=!1,this.skipMouseEvents=!1,this.gamepadsSupported=!1,clay_base_BaseRuntime.call(this,n)};t["clay.web.WebRuntime"]=clay_web_WebRuntime,clay_web_WebRuntime.__name__="clay.web.WebRuntime",clay_web_WebRuntime.timestamp=function(){return window.performance.now()/1e3-clay_web_WebRuntime.timestampStart},clay_web_WebRuntime.defaultConfig=function(){return new clay_web_WebConfig("app",window.document.body,!0,!0,!0,[1073741904,1073741903,1073741906,1073741905,8,9,127,32],!0)},clay_web_WebRuntime.__super__=clay_base_BaseRuntime,clay_web_WebRuntime.prototype=$extend(clay_base_BaseRuntime.prototype,{init:function(){clay_web_WebRuntime.timestampStart=window.performance.now()/1e3,this.name="web",this.initGamepads()},ready:function(){this.createWindow(),clay_Log.debug("Web / ready",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:78,className:"clay.web.WebRuntime",methodName:"ready"})},run:function(){return clay_Log.debug("Web / run",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:84,className:"clay.web.WebRuntime",methodName:"run"}),this.loop(0),!1},loop:function(n){if(null==n&&(n=.016),this.app.hasShutdown)return!1;this.app.ready&&(this.gamepadsSupported&&this.pollGamepads(),this.updateWindowBounds());var e=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;return this.app.shouldUpdate(e)&&this.app.emitTick(e),this.clearPendingKeyUps(),this.app.shuttingDown||window.requestAnimationFrame($bind(this,this.loop)),!0},createWindow:function(){var n=this.app.config.window;this.window=window.document.createElement("canvas"),this.windowDpr=this.windowDevicePixelRatio(),this.window.width=Math.floor(n.width*this.windowDpr),this.window.height=Math.floor(n.height*this.windowDpr),this.windowW=n.width,this.windowH=n.height,this.window.style.width=n.width+"px",this.window.style.height=n.height+"px",this.window.style.background="#000000",clay_Log.debug("Web / Created window at "+this.windowX+","+this.windowY+" - "+this.window.width+"x"+this.window.height+" pixels ("+n.width+"x"+n.height+"@"+this.windowDpr+"x)",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:145,className:"clay.web.WebRuntime",methodName:"createWindow"}),this.window.id=this.app.config.runtime.windowId,this.app.config.runtime.windowParent.appendChild(this.window),null!=n.title&&(window.document.title=n.title),this.createRenderContext(this.window)?(this.postRenderContext(this.window),this.setupEvents()):this.createRenderContextFailed()},createRenderContext:function(n){var e=this.app.config.render,t=this.applyGLAttributes(e),i=null;return 1!=e.webgl.version&&null==(i=n.getContext("webgl"+e.webgl.version,t))&&(i=n.getContext("experimental-webgl"+e.webgl.version,t)),null==i&&(i=js_html__$CanvasElement_CanvasUtil.getContextWebGL(n,t)),clay_opengl_web_GL.gl=i,clay_Log.debug("GL / context: "+Std.string(null!=i),{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:187,className:"clay.web.WebRuntime",methodName:"createRenderContext"}),null!=i},createRenderContextFailed:function(){var n=window.document.createElement("div"),e=window.document.createElement("div");throw n.style.marginLeft="auto",n.style.marginRight="auto",n.style.color="#d3d3d3",n.style.marginTop="5em",n.style.fontSize="1.4em",n.style.fontFamily="Helvetica, sans-serif",n.innerHTML='WebGL is required to run this!<br/><br/>visit <a style="color:#06b4fb; text-decoration:none;" href="http://get.webgl.org/">get.webgl.com</a> for info<br/>and contact the developer of this app',e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.display="block",e.style.minWidth="100%",e.style.minHeight="100%",e.style.textAlign="center",e.style.position="absolute",e.style.background="rgba(1,1,1,0.90)",e.appendChild(n),window.document.body.appendChild(e),haxe_Exception.thrown("Web / Failed to create render context")},applyGLAttributes:function(n){var e={alpha:n.webgl.alpha,antialias:n.webgl.antialias,depth:n.webgl.depth,stencil:n.webgl.stencil,failIfMajorPerformanceCaveat:n.webgl.failIfMajorPerformanceCaveat,premultipliedAlpha:n.webgl.premultipliedAlpha,preserveDrawingBuffer:n.webgl.preserveDrawingBuffer};return n.antialiasing>0&&(e.antialias=!0),n.depth>0&&(e.depth=!0),n.stencil>0&&(e.stencil=!0),e},postRenderContext:function(n){var e=this.app.config.render.defaultClear;clay_opengl_web_GL.gl.clearDepth(1),clay_opengl_web_GL.gl.clearStencil(0),clay_opengl_web_GL.gl.clearColor(e.r,e.g,e.b,e.a),clay_opengl_web_GL.gl.clear(17664)},setupEvents:function(){window.document.addEventListener("fullscreenchange",$bind(this,this.handleFullscreenChange)),window.document.addEventListener("fullscreenerror",$bind(this,this.handleFullscreenError)),this.window.addEventListener("mouseenter",$bind(this,this.handleMouseEnter)),this.window.addEventListener("mouseleave",$bind(this,this.handleMouseLeave)),window.document.addEventListener("visibilitychange",$bind(this,this.handleVisibilityChange)),window.document.addEventListener("keydown",$bind(this,this.handleKeyDown)),window.document.addEventListener("keyup",$bind(this,this.handleKeyUp)),window.document.addEventListener("keypress",$bind(this,this.handleKeyPress)),this.window.addEventListener("contextmenu",$bind(this,this.handleContextMenu));var n=this.app.config.runtime.mouseUseBrowserWindowEvents?window:this.window;n.addEventListener("mousedown",$bind(this,this.handleMouseDown)),n.addEventListener("mouseup",$bind(this,this.handleMouseUp)),n.addEventListener("mousemove",$bind(this,this.handleMouseMove)),this.window.addEventListener("wheel",$bind(this,this.handleWheel)),this.window.addEventListener("touchstart",$bind(this,this.handleTouchStart)),this.window.addEventListener("touchend",$bind(this,this.handleTouchEnd)),this.window.addEventListener("touchmove",$bind(this,this.handleTouchMove)),window.addEventListener("gamepadconnected",$bind(this,this.handleGamepadConnected)),window.addEventListener("gamepaddisconnected",$bind(this,this.handleGamepadDisconnected))},handleVisibilityChange:function(n){window.document.hidden?(this.app.emitWindowEvent(2,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0),this.app.emitWindowEvent(7,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0),this.app.emitWindowEvent(13,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0)):(this.app.emitWindowEvent(1,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0),this.app.emitWindowEvent(9,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0),this.app.emitWindowEvent(12,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0))},handleContextMenu:function(n){this.app.config.runtime.preventDefaultContextMenu&&n.preventDefault()},handleFullscreenChange:function(n){var e=window.document.fullscreenElement;null!=e?(clay_Log.debug("Web / Entering fullscreen (id="+e.id+")",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:351,className:"clay.web.WebRuntime",methodName:"handleFullscreenChange"}),this.app.config.window.fullscreen=!0,this.app.emitWindowEvent(15,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0)):(clay_Log.debug("Web / Leaving fullscreen",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:356,className:"clay.web.WebRuntime",methodName:"handleFullscreenChange"}),this.app.config.window.fullscreen=!1,this.app.emitWindowEvent(16,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0))},handleFullscreenError:function(n){clay_Log.warning("Web / Failed to change fullscreen setting: "+Std.string(n),{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:365,className:"clay.web.WebRuntime",methodName:"handleFullscreenError"})},handleMouseEnter:function(n){this.app.emitWindowEvent(10,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0)},handleMouseLeave:function(n){this.app.emitWindowEvent(11,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,0,0)},handleMouseDown:function(n){if(!this.skipMouseEvents){var e=this.app.input,t=Math.floor(this.windowDpr*(n.pageX-this.windowX)),i=Math.floor(this.windowDpr*(n.pageY-this.windowY)),r=n.button,l=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;e.app.events.mouseDown(t,i,r,l,1)}},handleMouseUp:function(n){if(!this.skipMouseEvents){var e=this.app.input,t=Math.floor(this.windowDpr*(n.pageX-this.windowX)),i=Math.floor(this.windowDpr*(n.pageY-this.windowY)),r=n.button,l=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;e.app.events.mouseUp(t,i,r,l,1)}},handleMouseMove:function(n){if(!this.skipMouseEvents){var e=null==n.movementX?0:n.movementX,t=null==n.movementY?0:n.movementY;e=Math.floor(e*this.windowDpr),t=Math.floor(t*this.windowDpr);var i=this.app.input,r=Math.floor(this.windowDpr*(n.pageX-this.windowX)),l=Math.floor(this.windowDpr*(n.pageY-this.windowY)),s=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;i.app.events.mouseMove(r,l,e,t,s,1)}},handleWheel:function(n){if(this.app.config.runtime.preventDefaultMouseWheel&&n.preventDefault(),!this.skipMouseEvents){var e=this.app.input,t=Math.round(.1*n.deltaX),i=Math.round(.1*n.deltaY),r=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;e.app.events.mouseWheel(t,i,r,1)}},handleTouchStart:function(n){this.app.config.runtime.preventDefaultTouches&&n.preventDefault();for(var e=this.window.getBoundingClientRect(),t=0,i=n.changedTouches;t<i.length;){var r=i[t];++t;var l=r.clientX-e.left,s=r.clientY-e.top;l/=e.width,s/=e.height;var a=this.touches.get(r.identifier);null==a?(a={x:l,y:s},this.touches.set(r.identifier,a)):(a.x=l,a.y=s);var o=this.app.input,p=r.identifier,h=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;o.app.events.touchDown(l,s,0,0,p,h)}},handleTouchEnd:function(n){this.app.config.runtime.preventDefaultTouches&&n.preventDefault();for(var e=this.window.getBoundingClientRect(),t=0,i=n.changedTouches;t<i.length;){var r=i[t];++t;var l=r.clientX-e.left,s=r.clientY-e.top;l/=e.width,s/=e.height;var a=this.touches.get(r.identifier);null==a&&(a={x:l,y:s},this.touches.set(r.identifier,a));var o=this.app.input,p=l-a.x,h=s-a.y,u=r.identifier,_=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;o.app.events.touchUp(l,s,p,h,u,_),a.x=l,a.y=s}},handleTouchMove:function(n){this.app.config.runtime.preventDefaultTouches&&n.preventDefault();for(var e=this.window.getBoundingClientRect(),t=0,i=n.changedTouches;t<i.length;){var r=i[t];++t;var l=r.clientX-e.left,s=r.clientY-e.top;l/=e.width,s/=e.height;var a=this.touches.get(r.identifier);null==a&&(a={x:l,y:s},this.touches.set(r.identifier,a));var o=this.app.input,p=l-a.x,h=s-a.y,u=r.identifier,_=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;o.app.events.touchMove(l,s,p,h,u,_),a.x=l,a.y=s}},clearPendingKeyUps:function(){for(;this.pendingKeyUps.length>0;){var n=this.pendingKeyUps.shift();if(1==this.keyDownStates.get(n.keyCode)){this.keyDownStates.set(n.keyCode,!1);var e=this.app.input,t=n.keyCode,i=n.scanCode,r=n.repeat,l=n.modState,s=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;e.app.events.keyUp(t,i,r,l,s,n.windowId)}}},handleKeyDown:function(n){if(!this.skipKeyboardEvents){var e=this.convertKeyCode(n.keyCode),t=this.convertScanCode(n.code,e),i=this.modStateFromEvent(n);if(!i.none)switch(e){case 1073742048:case 1073742049:case 1073742050:case 1073742051:case 1073742052:case 1073742053:case 1073742054:case 1073742055:break;default:(i.lctrl||i.rctrl||i.lalt||i.ralt||i.lmeta||i.rmeta)&&this.pendingKeyUps.push({keyCode:e,scanCode:t,repeat:n.repeat,modState:i,windowId:1})}-1!=this.app.config.runtime.preventDefaultKeys.indexOf(e)&&n.preventDefault(),this.keyDownStates.set(e,!0);var r=this.app.input,l=n.repeat,s=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;r.app.events.keyDown(e,t,l,i,s,1)}},handleKeyUp:function(n){if(!this.skipKeyboardEvents){var e=this.convertKeyCode(n.keyCode),t=this.convertScanCode(n.code,e),i=this.modStateFromEvent(n);if(-1!=this.app.config.runtime.preventDefaultKeys.indexOf(e)&&n.preventDefault(),1==this.keyDownStates.get(e)){this.keyDownStates.set(e,!1);var r=this.app.input,l=n.repeat,s=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;r.app.events.keyUp(e,t,l,i,s,1)}}},handleKeyPress:function(n){if(!this.skipKeyboardEvents&&0!=n.which&&8!=n.keyCode&&13!=n.keyCode){var e=n.charCode,t=String.fromCodePoint(e),i=this.app.input,r=t.length,l=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;i.app.events.text(t,0,r,2,l,1)}},handleGamepadConnected:function(n){clay_Log.debug("Gamepad connected at index "+n.gamepad.index+": "+n.gamepad.id+". "+n.gamepad.buttons.length+" buttons, "+n.gamepad.axes.length+" axes",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:680,className:"clay.web.WebRuntime",methodName:"handleGamepadConnected"});var e=n.gamepad;if(null==this.gamepadButtonCache[e.index]){this.gamepadButtonCache[e.index]=[];for(var t=0,i=e.buttons.length;t<i;){t++;this.gamepadButtonCache[e.index].push(0)}this.gamepadAxisCache[e.index]=[];for(t=0,i=e.axes.length;t<i;){t++;this.gamepadAxisCache[e.index].push(0)}}var r=this.app.input,l=(e=n.gamepad.index,n.gamepad.id),s=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;r.app.events.gamepadDevice(e,l,1,s)},handleGamepadDisconnected:function(n){clay_Log.debug("Gamepad disconnected at index "+n.gamepad.index+": "+n.gamepad.id,{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:695,className:"clay.web.WebRuntime",methodName:"handleGamepadDisconnected"});var e=n.gamepad;this.gamepadButtonCache[e.index]=null,this.gamepadAxisCache[e.index]=null;var t=this.app.input,i=(e=n.gamepad.index,n.gamepad.id),r=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;t.app.events.gamepadDevice(e,i,2,r)},convertKeyCode:function(n){return n>=65&&n<=90?n+32:clay_web__$WebRuntime_DOMKeys.domKeyToKeyCode(n)},convertScanCode:function(n,e){if(null==n)return z.toScanCode(e);switch(n){case"AltLeft":return 226;case"AltRight":return 230;case"ArrowDown":return 81;case"ArrowLeft":return 80;case"ArrowRight":return 79;case"ArrowUp":return 82;case"AudioVolumeMute":return 262;case"Backquote":return 53;case"Backslash":return 49;case"Backspace":return 42;case"BracketLeft":return 47;case"BracketRight":return 48;case"BrowserBack":return 270;case"BrowserFavorites":return 274;case"BrowserForward":return 271;case"BrowserHome":return 269;case"BrowserRefresh":return 273;case"BrowserSearch":return 268;case"BrowserStop":return 272;case"Cancel":return 155;case"CapsLock":return 57;case"Comma":return 54;case"ContextMenu":return 118;case"ControlLeft":return 224;case"ControlRight":return 228;case"Delete":return 76;case"Digit0":return 39;case"Digit1":return 30;case"Digit2":return 31;case"Digit3":return 32;case"Digit4":return 33;case"Digit5":return 34;case"Digit6":return 35;case"Digit7":return 36;case"Digit8":return 37;case"Digit9":return 38;case"End":return 77;case"Enter":return 40;case"Equal":return 46;case"Escape":return 41;case"F1":return 58;case"F10":return 67;case"F11":return 68;case"F12":return 69;case"F2":return 59;case"F3":return 60;case"F4":return 61;case"F5":return 62;case"F6":return 63;case"F7":return 64;case"F8":return 65;case"F9":return 66;case"Home":return 74;case"Help":case"Insert":return 73;case"IntlBackslash":return 100;case"KanaMode":case"Lang1":return 144;case"KeyA":return 4;case"KeyB":return 5;case"KeyC":return 6;case"KeyD":return 7;case"KeyE":return 8;case"KeyF":return 9;case"KeyG":return 10;case"KeyH":return 11;case"KeyI":return 12;case"KeyJ":return 13;case"KeyK":return 14;case"KeyL":return 15;case"KeyM":return 16;case"KeyN":return 17;case"KeyO":return 18;case"KeyP":return 19;case"KeyQ":return 20;case"KeyR":return 21;case"KeyS":return 22;case"KeyT":return 23;case"KeyU":return 24;case"KeyV":return 25;case"KeyW":return 26;case"KeyX":return 27;case"KeyY":return 28;case"KeyZ":return 29;case"Lang2":return 145;case"Lang3":return 146;case"Lang4":return 147;case"Lang5":return 148;case"Lang6":return 149;case"Lang7":return 150;case"Lang8":return 151;case"Lang9":return 152;case"LaunchApp1":return 283;case"LaunchApp2":return 284;case"LaunchMail":return 265;case"MediaPlayPause":return 261;case"MediaSelect":return 263;case"MediaStop":return 260;case"MediaTrackNext":return 258;case"MediaTrackPrevious":return 259;case"Minus":return 45;case"NumLock":return 83;case"Numpad0":return 98;case"Numpad1":return 89;case"Numpad2":return 90;case"Numpad3":return 91;case"Numpad4":return 92;case"Numpad5":return 93;case"Numpad6":return 94;case"Numpad7":return 95;case"Numpad8":return 96;case"Numpad9":return 97;case"NumpadAdd":return 87;case"NumpadComma":return 133;case"NumpadDecimal":return 220;case"NumpadDivide":return 84;case"NumpadEnter":return 88;case"NumpadEqual":return 103;case"NumpadMultiply":return 85;case"NumpadSubtract":return 86;case"MetaLeft":case"OSLeft":return 227;case"MetaRight":case"OSRight":return 231;case"PageDown":return 78;case"PageUp":return 75;case"Pause":return 72;case"Period":return 55;case"Power":return 102;case"PrintScreen":return 70;case"Quote":return 52;case"ScrollLock":return 71;case"Semicolon":return 51;case"ShiftLeft":return 225;case"ShiftRight":return 229;case"Slash":return 56;case"Space":return 44;case"Tab":return 43;case"AudioVolumeDown":case"VolumeDown":return 129;case"AudioVolumeUp":case"VolumeUp":return 128;default:return z.toScanCode(e)}},modStateFromEvent:function(n){var e=!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey);return this.app.input.modState.none=e,this.app.input.modState.lshift=n.shiftKey,this.app.input.modState.rshift=n.shiftKey,this.app.input.modState.lctrl=n.ctrlKey,this.app.input.modState.rctrl=n.ctrlKey,this.app.input.modState.lalt=n.altKey,this.app.input.modState.ralt=n.altKey,this.app.input.modState.lmeta=n.metaKey,this.app.input.modState.rmeta=n.metaKey,this.app.input.modState.num=!1,this.app.input.modState.caps=!1,this.app.input.modState.mode=!1,this.app.input.modState.ctrl=n.ctrlKey,this.app.input.modState.shift=n.shiftKey,this.app.input.modState.alt=n.altKey,this.app.input.modState.meta=n.metaKey,this.app.input.modState},getWindowX:function(n){return Math.round(n.left+window.pageXOffset-window.document.body.clientTop)},getWindowY:function(n){return Math.round(n.top+window.pageYOffset-window.document.body.clientLeft)},translateMouseX:function(n){return Math.floor(this.windowDpr*(n.pageX-this.windowX))},translateMouseY:function(n){return Math.floor(this.windowDpr*(n.pageY-this.windowY))},updateWindowBounds:function(){var n=this.windowDpr;this.windowDpr=this.windowDevicePixelRatio();var e=this.window.getBoundingClientRect(),t=Math.round(e.left+window.pageXOffset-window.document.body.clientTop),i=Math.round(e.top+window.pageYOffset-window.document.body.clientLeft),r=Math.round(e.width),l=Math.round(e.height);t==this.windowX&&i==this.windowY||(this.windowX=t,this.windowY=i,this.app.emitWindowEvent(4,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,this.windowX,this.windowY)),r==this.windowW&&l==this.windowH&&n==this.windowDpr||(this.windowW=r,this.windowH=l,this.window.width=Math.floor(this.windowW*this.windowDpr),this.window.height=Math.floor(this.windowH*this.windowDpr),this.app.emitWindowEvent(6,window.performance.now()/1e3-clay_web_WebRuntime.timestampStart,1,this.window.width,this.window.height))},initGamepads:function(){var n=this.getGamepadList();if(null!=n){this.gamepadsSupported=!0,this.gamepadButtonCache=[],this.gamepadAxisCache=[];for(var e=0;e<n.length;){var t=n[e];if(++e,null!=t&&null==this.gamepadButtonCache[t.index]){this.gamepadButtonCache[t.index]=[];for(var i=0,r=t.buttons.length;i<r;){i++;this.gamepadButtonCache[t.index].push(0)}this.gamepadAxisCache[t.index]=[];for(var l=0,s=t.axes.length;l<s;){l++;this.gamepadAxisCache[t.index].push(0)}}}}else clay_Log.warning("Gamepads are not supported in this browser :(",{fileName:"/Users/jeremyfa/Developer/ceramic/git/clay/src/clay/web/WebRuntime.hx",lineNumber:963,className:"clay.web.WebRuntime",methodName:"initGamepads"})},getGamepadList:function(){return null!=n.navigator.getGamepads?n.navigator.getGamepads():null!=n.navigator.webkitGetGamepads?n.navigator.webkitGetGamepads():null},initGamepadCacheIfNeeded:function(n){if(null==this.gamepadButtonCache[n.index]){this.gamepadButtonCache[n.index]=[];for(var e=0,t=n.buttons.length;e<t;){e++;this.gamepadButtonCache[n.index].push(0)}this.gamepadAxisCache[n.index]=[];for(e=0,t=n.axes.length;e<t;){e++;this.gamepadAxisCache[n.index].push(0)}}},deleteGamepadCache:function(n){this.gamepadButtonCache[n.index]=null,this.gamepadAxisCache[n.index]=null},pollGamepads:function(){var n=this.getGamepadList();if(null!=n)for(var e=n.length,t=0;t<e;){var i=n[t];if(null!=i){if(null==this.gamepadButtonCache[i.index]){this.gamepadButtonCache[i.index]=[];for(var r=0,l=i.buttons.length;r<l;){r++;this.gamepadButtonCache[i.index].push(0)}this.gamepadAxisCache[i.index]=[];for(var s=0,a=i.axes.length;s<a;){s++;this.gamepadAxisCache[i.index].push(0)}}for(var o=this.gamepadAxisCache[i.index],p=0,h=i.axes.length;p<h;){var u=p++,_=i.axes[u];if(_!=o[u]){o[u]=_;var c=this.app.input,d=i.index,f=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;c.app.events.gamepadAxis(d,u,_,f)}}for(var x=this.gamepadButtonCache[i.index],b=0,y=i.buttons.length;b<y;){var v=b++,m=i.buttons[v];if(m.value!=x[v])if(x[v]=m.value,m.pressed){var g=this.app.input,z=i.index,w=m.value,O=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;g.app.events.gamepadDown(z,v,w,O)}else{var C=this.app.input,E=i.index,U=m.value,M=window.performance.now()/1e3-clay_web_WebRuntime.timestampStart;C.app.events.gamepadUp(E,v,U,M)}}++t}else++t}},windowDevicePixelRatio:function(){return null==window.devicePixelRatio?1:window.devicePixelRatio},windowWidth:function(){return Math.round(this.windowW*this.windowDevicePixelRatio())},windowHeight:function(){return Math.round(this.windowH*this.windowDevicePixelRatio())},setWindowFullscreen:function(n){return n?this.window.requestFullscreen():window.document.exitFullscreen(),!0},setWindowTitle:function(n){this.app.config.window.title=n,window.document.title=n},clamp:function(n){return Math.max(0,Math.min(n,1))},startGamepadRumble:function(n,e,t,i){var r=this.getGamepadList()[n];if(null!=r){var l=r.vibrationActuator;null!=l&&l.playEffect("dual-rumble",{duration:1e3*i,weakMagnitude:Math.max(0,Math.min(e,1)),strongMagnitude:Math.max(0,Math.min(t,1))})}},stopGamepadRumble:function(n){var e=this.getGamepadList()[n];if(null!=e){var t=e.vibrationActuator;null!=t&&t.playEffect("dual-rumble",{duration:1,weakMagnitude:0,strongMagnitude:0})}},getGamepadName:function(n){var e=this.getGamepadList();if(null!=e)for(var t=0;t<e.length;){var i=e[t];if(++t,null!=i&&i.index==n)return i.id}return null},__class__:clay_web_WebRuntime});var clay_web__$WebRuntime_DOMKeys=function(){};t["clay.web._WebRuntime.DOMKeys"]=clay_web__$WebRuntime_DOMKeys,clay_web__$WebRuntime_DOMKeys.__name__="clay.web._WebRuntime.DOMKeys",clay_web__$WebRuntime_DOMKeys.domKeyToKeyCode=function(n){switch(n){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 93:return 1073742055;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 109:return 1073741910;case 110:return 1073742044;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 160:return 94;case 161:return 33;case 162:return 34;case 163:return 35;case 164:return 36;case 165:return 37;case 166:return 38;case 167:return 95;case 168:return 40;case 169:return 41;case 170:return 42;case 171:return 43;case 172:return 92;case 173:return 45;case 174:return 91;case 175:return 93;case 176:return 96;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 188:return 44;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 224:return 1073742051}return n};var earcut_Earcut=function(){};t["earcut.Earcut"]=earcut_Earcut,earcut_Earcut.__name__="earcut.Earcut",earcut_Earcut.earcut=function(n,e,t,i){null==t&&(t=2);var r=null!=e&&e.length>0,l=r?e[0]*t|0:n.length,s=earcut_Earcut.linkedList(n,0,l,t,!0);if(null==i&&(i=[]),i.length>0&&i.splice(0,i.length),null==s||s.next==s.prev)return i;var a=0,o=0,p=0,h=0,u=0,_=0,c=0;if(r&&(s=earcut_Earcut.eliminateHoles(n,e,s,t)),n.length>80*t){a=p=n[0],o=h=n[1];for(var d=t;d<l;)(u=n[d])<a&&(a=u),(_=n[d+1])<o&&(o=_),u>p&&(p=u),_>h&&(h=_),d+=t;c=0!=(c=Math.max(p-a,h-o))?1/c:0}return earcut_Earcut.earcutLinked(s,i,t,a,o,c),earcut_Node.recycleAllNodes(),i},earcut_Earcut.linkedList=function(n,e,t,i,r){var l,s=null;if(r==earcut_Earcut.signedArea(n,e,t,i)>0)for(var a=e;a<t;)s=earcut_Earcut.insertNode(a,n[a],n[a+1],s),a+=i;else for(a=t-i;a>=e;)s=earcut_Earcut.insertNode(a,n[a],n[a+1],s),a-=i;if(null!=s){var o=s.next;l=s.x==o.x&&s.y==o.y}else l=!1;return l&&(earcut_Earcut.removeNode(s),s=s.next),s},earcut_Earcut.filterPoints=function(n,e){if(null==n)return n;null==e&&(e=n);for(var t=n,i=!1;;){var r;if(i=!1,t.steiner)r=!1;else{var l=t.next;if(t.x!=l.x||t.y!=l.y){var s=t.prev,a=t.next;r=(t.y-s.y)*(a.x-t.x)-(t.x-s.x)*(a.y-t.y)==0}else r=!0}if(r){if(earcut_Earcut.removeNode(t),(t=e=t.prev)==t.next)break;i=!0}else t=t.next;if(!i&&t==e)break}return e},earcut_Earcut.earcutLinked=function(n,e,t,i,r,l,s){if(null!=n){null==s&&null!=l&&earcut_Earcut.indexCurve(n,i,r,l);for(var a=n,o=null,p=null;n.prev!=n.next;)if(o=n.prev,p=n.next,null!=l?earcut_Earcut.isEarHashed(n,i,r,l):earcut_Earcut.isEar(n))e.push(o.i/t|0),e.push(n.i/t|0),e.push(p.i/t|0),earcut_Earcut.removeNode(n),n=p.next,a=p.next;else if((n=p)==a){null==s?earcut_Earcut.earcutLinked(earcut_Earcut.filterPoints(n),e,t,i,r,l,1):1==s?(n=earcut_Earcut.cureLocalIntersections(earcut_Earcut.filterPoints(n),e,t),earcut_Earcut.earcutLinked(n,e,t,i,r,l,2)):2==s&&earcut_Earcut.splitEarcut(n,e,t,i,r,l);break}}},earcut_Earcut.isEar=function(n){var e=n.prev,t=n,i=n.next;if((t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)>=0)return!1;for(var r=n.next.next;r!=n.prev;){var l,s=e.x,a=e.y,o=t.x,p=t.y,h=i.x,u=i.y,_=r.x,c=r.y;if((h-_)*(a-c)-(s-_)*(u-c)>=0&&(s-_)*(p-c)-(o-_)*(a-c)>=0&&(o-_)*(u-c)-(h-_)*(p-c)>=0){var d=r.prev,f=r.next;l=(r.y-d.y)*(f.x-r.x)-(r.x-d.x)*(f.y-r.y)>=0}else l=!1;if(l)return!1;r=r.next}return!0},earcut_Earcut.isEarHashed=function(n,e,t,i){var r=n.prev,l=n,s=n.next;if((l.y-r.y)*(s.x-l.x)-(l.x-r.x)*(s.y-l.y)>=0)return!1;for(var a=r.x<l.x?r.x<s.x?r.x:s.x:l.x<s.x?l.x:s.x,o=r.y<l.y?r.y<s.y?r.y:s.y:l.y<s.y?l.y:s.y,p=r.x>l.x?r.x>s.x?r.x:s.x:l.x>s.x?l.x:s.x,h=r.y>l.y?r.y>s.y?r.y:s.y:l.y>s.y?l.y:s.y,u=earcut_Earcut.zOrder(0|a,0|o,0|e,0|t,0|i),_=earcut_Earcut.zOrder(0|p,0|h,0|e,0|t,0|i),c=n.prevZ,d=n.nextZ;null!=c&&c.z>=u&&null!=d&&d.z<=_;){var f,x;if(c!=n.prev&&c!=n.next){var b=r.x,y=r.y,v=l.x,m=l.y,g=s.x,z=s.y;I=(g-(N=c.x))*(y-(F=c.y))-(b-N)*(z-F)>=0&&(b-N)*(m-F)-(v-N)*(y-F)>=0&&(v-N)*(z-F)-(g-N)*(m-F)>=0}else I=!1;if(I){var w=c.prev,O=c.next;V=(c.y-w.y)*(O.x-c.x)-(c.x-w.x)*(O.y-c.y)>=0}else V=!1;if(V)return!1;if(c=c.prevZ,d!=n.prev&&d!=n.next){var C=r.x,E=r.y,U=l.x,M=l.y,T=s.x,k=s.y,D=d.x,S=d.y;x=(T-D)*(E-S)-(C-D)*(k-S)>=0&&(C-D)*(M-S)-(U-D)*(E-S)>=0&&(U-D)*(k-S)-(T-D)*(M-S)>=0}else x=!1;if(x){var A=d.prev,P=d.next;f=(d.y-A.y)*(P.x-d.x)-(d.x-A.x)*(P.y-d.y)>=0}else f=!1;if(f)return!1;d=d.nextZ}for(;null!=c&&c.z>=u;){if(c!=n.prev&&c!=n.next){b=r.x,y=r.y,v=l.x,m=l.y,g=s.x,z=s.y;I=(g-(N=c.x))*(y-(F=c.y))-(b-N)*(z-F)>=0&&(b-N)*(m-F)-(v-N)*(y-F)>=0&&(v-N)*(z-F)-(g-N)*(m-F)>=0}else I=!1;if(I){w=c.prev,O=c.next;V=(c.y-w.y)*(O.x-c.x)-(c.x-w.x)*(O.y-c.y)>=0}else V=!1;if(V)return!1;c=c.prevZ}for(;null!=d&&d.z<=_;){var V,I;if(d!=n.prev&&d!=n.next){var N,F;b=r.x,y=r.y,v=l.x,m=l.y,g=s.x,z=s.y;I=(g-(N=d.x))*(y-(F=d.y))-(b-N)*(z-F)>=0&&(b-N)*(m-F)-(v-N)*(y-F)>=0&&(v-N)*(z-F)-(g-N)*(m-F)>=0}else I=!1;if(I){c=d.prev,O=d.next;V=(d.y-c.y)*(O.x-d.x)-(d.x-c.x)*(O.y-d.y)>=0}else V=!1;if(V)return!1;d=d.nextZ}return!0},earcut_Earcut.cureLocalIntersections=function(n,e,t){for(var i=n;;){var r,l,s,a=i.prev,o=i.next.next;if(a.x!=o.x||a.y!=o.y){var p=i.next,h=(i.y-a.y)*(p.x-i.x)-(i.x-a.x)*(p.y-i.y),u=h>0?1:h<0?-1:0,_=(i.y-a.y)*(o.x-i.x)-(i.x-a.x)*(o.y-i.y),c=_>0?1:_<0?-1:0,d=(o.y-p.y)*(a.x-o.x)-(o.x-p.x)*(a.y-o.y),f=d>0?1:d<0?-1:0,x=(o.y-p.y)*(i.x-o.x)-(o.x-p.x)*(i.y-o.y),b=x>0?1:x<0?-1:0;s=u!=c&&f!=b||(0==u&&p.x<=Math.max(a.x,i.x)&&p.x>=Math.min(a.x,i.x)&&p.y<=Math.max(a.y,i.y)&&p.y>=Math.min(a.y,i.y)||(0==c&&o.x<=Math.max(a.x,i.x)&&o.x>=Math.min(a.x,i.x)&&o.y<=Math.max(a.y,i.y)&&o.y>=Math.min(a.y,i.y)||(0==f&&a.x<=Math.max(p.x,o.x)&&a.x>=Math.min(p.x,o.x)&&a.y<=Math.max(p.y,o.y)&&a.y>=Math.min(p.y,o.y)||0==b&&i.x<=Math.max(p.x,o.x)&&i.x>=Math.min(p.x,o.x)&&i.y<=Math.max(p.y,o.y)&&i.y>=Math.min(p.y,o.y))))}else s=!1;if(s){var y=a.prev,v=a.next;if((a.y-y.y)*(v.x-a.x)-(a.x-y.x)*(v.y-a.y)<0){var m=a.next;if((o.y-a.y)*(m.x-o.x)-(o.x-a.x)*(m.y-o.y)>=0){var g=a.prev;l=(g.y-a.y)*(o.x-g.x)-(g.x-a.x)*(o.y-g.y)>=0}else l=!1}else{var z=a.prev;if((o.y-a.y)*(z.x-o.x)-(o.x-a.x)*(z.y-o.y)<0)l=!0;else{var w=a.next;l=(w.y-a.y)*(o.x-w.x)-(w.x-a.x)*(o.y-w.y)<0}}}else l=!1;if(l){var O=o.prev,C=o.next;if((o.y-O.y)*(C.x-o.x)-(o.x-O.x)*(C.y-o.y)<0){var E=o.next;if((a.y-o.y)*(E.x-a.x)-(a.x-o.x)*(E.y-a.y)>=0){var U=o.prev;r=(U.y-o.y)*(a.x-U.x)-(U.x-o.x)*(a.y-U.y)>=0}else r=!1}else{var M=o.prev;if((a.y-o.y)*(M.x-a.x)-(a.x-o.x)*(M.y-a.y)<0)r=!0;else{var T=o.next;r=(T.y-o.y)*(a.x-T.x)-(T.x-o.x)*(a.y-T.y)<0}}}else r=!1;if(r&&(e.push(a.i/t|0),e.push(i.i/t|0),e.push(o.i/t|0),earcut_Earcut.removeNode(i),earcut_Earcut.removeNode(i.next),i=n=o),(i=i.next)==n)break}return earcut_Earcut.filterPoints(i)},earcut_Earcut.splitEarcut=function(n,e,t,i,r,l){for(var s=n;;){for(var a=s.next.next;a!=s.prev;){var o;if(s.i!=a.i)if(s.next.i==a.i||s.prev.i==a.i||earcut_Earcut.intersectsPolygon(s,a))o=!1;else{var p,h,u,_=s.prev,c=s.next;if((s.y-_.y)*(c.x-s.x)-(s.x-_.x)*(c.y-s.y)<0){var d=s.next;if((a.y-s.y)*(d.x-a.x)-(a.x-s.x)*(d.y-a.y)>=0){var f=s.prev;u=(f.y-s.y)*(a.x-f.x)-(f.x-s.x)*(a.y-f.y)>=0}else u=!1}else{var x=s.prev;if((a.y-s.y)*(x.x-a.x)-(a.x-s.x)*(x.y-a.y)<0)u=!0;else{var b=s.next;u=(b.y-s.y)*(a.x-b.x)-(b.x-s.x)*(a.y-b.y)<0}}if(u){var y=a.prev,v=a.next;if((a.y-y.y)*(v.x-a.x)-(a.x-y.x)*(v.y-a.y)<0){var m=a.next;if((s.y-a.y)*(m.x-s.x)-(s.x-a.x)*(m.y-s.y)>=0){var g=a.prev;h=(g.y-a.y)*(s.x-g.x)-(g.x-a.x)*(s.y-g.y)>=0}else h=!1}else{var z=a.prev;if((s.y-a.y)*(z.x-s.x)-(s.x-a.x)*(z.y-s.y)<0)h=!0;else{var w=a.next;h=(w.y-a.y)*(s.x-w.x)-(w.x-a.x)*(s.y-w.y)<0}}}else h=!1;if(h&&earcut_Earcut.middleInside(s,a)){var O=s.prev,C=a.prev;if((s.y-O.y)*(C.x-s.x)-(s.x-O.x)*(C.y-s.y)==0){var E=a.prev;p=(E.y-s.y)*(a.x-E.x)-(E.x-s.x)*(a.y-E.y)!=0}else p=!0}else p=!1;if(p)o=!0;else{var U;if(s.x==a.x&&s.y==a.y){var M=s.prev,T=s.next;U=(s.y-M.y)*(T.x-s.x)-(s.x-M.x)*(T.y-s.y)>0}else U=!1;if(U){var k=a.prev,D=a.next;o=(a.y-k.y)*(D.x-a.x)-(a.x-k.x)*(D.y-a.y)>0}else o=!1}}else o=!1;if(o){var S=earcut_Earcut.splitPolygon(s,a);return s=earcut_Earcut.filterPoints(s,s.next),S=earcut_Earcut.filterPoints(S,S.next),earcut_Earcut.earcutLinked(s,e,t,i,r,l),void earcut_Earcut.earcutLinked(S,e,t,i,r,l)}a=a.next}if((s=s.next)==n)break}},earcut_Earcut.eliminateHoles=function(n,e,t,i){for(var r=[],l=e.length,s=0,a=0,o=null,p=0,h=l;p<h;){s=e[u=p++]*i|0,a=u<l-1?e[u+1]*i|0:n.length,(o=earcut_Earcut.linkedList(n,s,a,i,!1))==o.next&&(o.steiner=!0),r.push(earcut_Earcut.getLeftmost(o))}r.sort(earcut_Earcut.compareX);for(p=0,h=r.length;p<h;){var u,_=r[u=p++],c=t;if(null!=(c=earcut_Earcut.findHoleBridge(_,c))){var d=earcut_Earcut.splitPolygon(c,_);earcut_Earcut.filterPoints(c,c.next),earcut_Earcut.filterPoints(d,d.next)}t=earcut_Earcut.filterPoints(t,t.next)}return t},earcut_Earcut.compareX=function(n,e){return n.x-e.x|0},earcut_Earcut.eliminateHole=function(n,e){if(null!=(e=earcut_Earcut.findHoleBridge(n,e))){var t=earcut_Earcut.splitPolygon(e,n);earcut_Earcut.filterPoints(e,e.next),earcut_Earcut.filterPoints(t,t.next)}},earcut_Earcut.findHoleBridge=function(n,e){for(var t=e,i=n.x,r=n.y,l=-1/0,s=null;;){if(r<=t.y&&r>=t.next.y&&t.next.y!=t.y){var a=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>l){if(l=a,a==i){if(r==t.y)return t;if(r==t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}if((t=t.next)==e)break}if(null==s)return null;if(i==l)return s.prev;var o=s,p=s.x,h=s.y,u=1/0,_=0;for(t=s;;){var c;if(i>=t.x&&t.x>=p&&i!=t.x){var d=r<h?i:l,f=r<h?l:i,x=t.x,b=t.y;c=(f-x)*(r-b)-(d-x)*(r-b)>=0&&(d-x)*(h-b)-(p-x)*(r-b)>=0&&(p-x)*(r-b)-(f-x)*(h-b)>=0}else c=!1;if(c){var y,v;_=Math.abs(r-t.y)/(i-t.x);var m=t.prev,g=t.next;if((t.y-m.y)*(g.x-t.x)-(t.x-m.x)*(g.y-t.y)<0){var z=t.next;if((n.y-t.y)*(z.x-n.x)-(n.x-t.x)*(z.y-n.y)>=0){var w=t.prev;v=(w.y-t.y)*(n.x-w.x)-(w.x-t.x)*(n.y-w.y)>=0}else v=!1}else{var O=t.prev;if((n.y-t.y)*(O.x-n.x)-(n.x-t.x)*(O.y-n.y)<0)v=!0;else{var C=t.next;v=(C.y-t.y)*(n.x-C.x)-(C.x-t.x)*(n.y-C.y)<0}}if(v)if(_<u)y=!0;else if(_==u)if(t.x>s.x)y=!0;else if(t.x==s.x){var E=s.prev,U=t.prev;if((s.y-E.y)*(U.x-s.x)-(s.x-E.x)*(U.y-s.y)<0){var M=t.next,T=s.next;y=(s.y-M.y)*(T.x-s.x)-(s.x-M.x)*(T.y-s.y)<0}else y=!1}else y=!1;else y=!1;else y=!1;y&&(s=t,u=_)}if((t=t.next)==o)break}return s},earcut_Earcut.sectorContainsSector=function(n,e){var t=n.prev,i=e.prev;if((n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)<0){t=e.next,i=n.next;return(n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)<0}return!1},earcut_Earcut.indexCurve=function(n,e,t,i){for(var r=n;-99999999==r.z&&(r.z=earcut_Earcut.zOrder(0|r.x,0|r.y,0|e,0|t,0|i)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!=n;);r.prevZ.nextZ=null,r.prevZ=null,earcut_Earcut.sortLinked(r)},earcut_Earcut.sortLinked=function(n){for(var e,t=null,i=null,r=null,l=0,s=0,a=0,o=1;;){for(t=n,n=null,e=null,l=0;null!=t;){++l,i=t,s=0;for(var p=0,h=o;p<h;){p++;if(++s,null==(i=i.nextZ))break}for(a=o;s>0||a>0&&null!=i;)0!=s&&(0==a||null==i||t.z<=i.z)?(r=t,t=t.nextZ,--s):(r=i,i=i.nextZ,--a),null!=e?e.nextZ=r:n=r,r.prevZ=e,e=r;t=i}if(e.nextZ=null,o*=2,!(l>1))break}return n},earcut_Earcut.zOrder=function(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1},earcut_Earcut.getLeftmost=function(n){for(var e=n,t=n;(e.x<t.x||e.x==t.x&&e.y<t.y)&&(t=e),(e=e.next)!=n;);return t},earcut_Earcut.pointInTriangle=function(n,e,t,i,r,l,s,a){return(r-s)*(e-a)-(n-s)*(l-a)>=0&&(n-s)*(i-a)-(t-s)*(e-a)>=0&&(t-s)*(l-a)-(r-s)*(i-a)>=0},earcut_Earcut.isValidDiagonal=function(n,e){if(n.next.i==e.i||n.prev.i==e.i||earcut_Earcut.intersectsPolygon(n,e))return!1;var t,i,r,l=n.prev,s=n.next;if((n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)<0){s=n.next;if((e.y-n.y)*(s.x-e.x)-(e.x-n.x)*(s.y-e.y)>=0)i=((a=n.prev).y-n.y)*(e.x-a.x)-(a.x-n.x)*(e.y-a.y)>=0;else i=!1}else{s=n.prev;if((e.y-n.y)*(s.x-e.x)-(e.x-n.x)*(s.y-e.y)<0)i=!0;else i=((a=n.next).y-n.y)*(e.x-a.x)-(a.x-n.x)*(e.y-a.y)<0}if(i){l=e.prev,s=e.next;if((e.y-l.y)*(s.x-e.x)-(e.x-l.x)*(s.y-e.y)<0){s=e.next;if((n.y-e.y)*(s.x-n.x)-(n.x-e.x)*(s.y-n.y)>=0)t=((a=e.prev).y-e.y)*(n.x-a.x)-(a.x-e.x)*(n.y-a.y)>=0;else t=!1}else{s=e.prev;if((n.y-e.y)*(s.x-n.x)-(n.x-e.x)*(s.y-n.y)<0)t=!0;else t=((a=e.next).y-e.y)*(n.x-a.x)-(a.x-e.x)*(n.y-a.y)<0}}else t=!1;if(t&&earcut_Earcut.middleInside(n,e)){var a;l=n.prev,s=e.prev;if((n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)==0)r=((a=e.prev).y-n.y)*(e.x-a.x)-(a.x-n.x)*(e.y-a.y)!=0;else r=!0}else r=!1;if(r)return!0;if(n.x==e.x&&n.y==e.y){l=n.prev,s=n.next;r=(n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)>0}else r=!1;if(r){l=e.prev,s=e.next;return(e.y-l.y)*(s.x-e.x)-(e.x-l.x)*(s.y-e.y)>0}return!1},earcut_Earcut.area=function(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)},earcut_Earcut.equals=function(n,e){return n.x==e.x&&n.y==e.y},earcut_Earcut.intersects=function(n,e,t,i){var r,l=(r=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))>0?1:r<0?-1:0,s=(r=(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y))>0?1:r<0?-1:0,a=(r=(i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y))>0?1:r<0?-1:0,o=(r=(i.y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y))>0?1:r<0?-1:0;return l!=s&&a!=o||(0==l&&t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)||(0==s&&i.x<=Math.max(n.x,e.x)&&i.x>=Math.min(n.x,e.x)&&i.y<=Math.max(n.y,e.y)&&i.y>=Math.min(n.y,e.y)||(0==a&&n.x<=Math.max(t.x,i.x)&&n.x>=Math.min(t.x,i.x)&&n.y<=Math.max(t.y,i.y)&&n.y>=Math.min(t.y,i.y)||0==o&&e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y))))},earcut_Earcut.onSegment=function(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)},earcut_Earcut.sign=function(n){return n>0?1:n<0?-1:0},earcut_Earcut.intersectsPolygon=function(n,e){for(var t=n;;){var i;if(t.i!=n.i&&t.next.i!=n.i&&t.i!=e.i&&t.next.i!=e.i){var r=t.next,l=(r.y-t.y)*(n.x-r.x)-(r.x-t.x)*(n.y-r.y),s=l>0?1:l<0?-1:0,a=(r.y-t.y)*(e.x-r.x)-(r.x-t.x)*(e.y-r.y),o=a>0?1:a<0?-1:0,p=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),h=p>0?1:p<0?-1:0,u=(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y),_=u>0?1:u<0?-1:0;i=s!=o&&h!=_||(0==s&&n.x<=Math.max(t.x,r.x)&&n.x>=Math.min(t.x,r.x)&&n.y<=Math.max(t.y,r.y)&&n.y>=Math.min(t.y,r.y)||(0==o&&e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)||(0==h&&t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)||0==_&&r.x<=Math.max(n.x,e.x)&&r.x>=Math.min(n.x,e.x)&&r.y<=Math.max(n.y,e.y)&&r.y>=Math.min(n.y,e.y))))}else i=!1;if(i)return!0;if((t=t.next)==n)break}return!1},earcut_Earcut.locallyInside=function(n,e){var t=n.prev,i=n.next;if((n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)<0){i=n.next;return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)>=0&&((r=n.prev).y-n.y)*(e.x-r.x)-(r.x-n.x)*(e.y-r.y)>=0}var r;i=n.prev;return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)<0||((r=n.next).y-n.y)*(e.x-r.x)-(r.x-n.x)*(e.y-r.y)<0},earcut_Earcut.middleInside=function(n,e){for(var t=n,i=!1,r=(n.x+e.x)/2,l=(n.y+e.y)/2;t.y>l!=t.next.y>l&&t.next.y!=t.y&&r<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(i=!i),(t=t.next)!=n;);return i},earcut_Earcut.splitPolygon=function(n,e){var t=earcut_Node.get(n.i,n.x,n.y),i=earcut_Node.get(e.i,e.x,e.y),r=n.next,l=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,l.next=i,i.prev=l,i},earcut_Earcut.insertNode=function(n,e,t,i){var r=earcut_Node.get(n,e,t);return null==i?(r.prev=r,r.next=r):(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r),r},earcut_Earcut.removeNode=function(n){n.next.prev=n.prev,n.prev.next=n.next,null!=n.prevZ&&(n.prevZ.nextZ=n.nextZ),null!=n.nextZ&&(n.nextZ.prevZ=n.prevZ)},earcut_Earcut.signedArea=function(n,e,t,i){for(var r=0,l=e,s=t-i;l<t;)r+=(n[s]-n[l])*(n[l+1]+n[s+1]),s=l,l+=i;return r},earcut_Earcut.deviation=function(n,e,t,i){var r=null!=e&&e.length>0,l=r?e[0]*t|0:n.length,s=Math.abs(earcut_Earcut.signedArea(n,0,l,t));if(r)for(var a=e.length,o=0,p=a;o<p;){var h=e[c=o++]*t,u=c<a-1?e[c+1]*t:n.length;s-=Math.abs(earcut_Earcut.signedArea(n,h,u,t))}for(var _=0,c=0;c<i.length;){var d=i[c]*t,f=i[c+1]*t,x=i[c+2]*t;_+=Math.abs((n[d]-n[x])*(n[f+1]-n[d+1])-(n[d]-n[f])*(n[x+1]-n[d+1])),c+=3}return 0==s&&0==_?0:Math.abs((_-s)/s)},earcut_Earcut.flatten=function(n){var e=n[0][0].length,t={vertices:[],holes:[]};t.dimensions=e;for(var i=0,r=0,l=n.length;r<l;){for(var s=r++,a=0,o=n[s].length;a<o;)for(var p=a++,h=0,u=e;h<u;){var _=h++;t.vertices.push(n[s][p][_])}s>0&&(i+=n[s-1].length,t.holes.push(i))}return t};var earcut_Node=function(n,e,t){this.z=-99999999,this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=-99999999,this.prevZ=null,this.nextZ=null,this.steiner=!1};t["earcut.Node"]=earcut_Node,earcut_Node.__name__="earcut.Node",earcut_Node.clearPool=function(){earcut_Node.nextPoolIndex=0,earcut_Node.pool=[]},earcut_Node.recycleAllNodes=function(){earcut_Node.nextPoolIndex=0},earcut_Node.get=function(n,e,t){if(earcut_Node.recyclingEnabled){if(earcut_Node.nextPoolIndex==earcut_Node.pool.length){var i=new earcut_Node(n,e,t);return earcut_Node.nextPoolIndex++,earcut_Node.pool.push(i),i}i=earcut_Node.pool[earcut_Node.nextPoolIndex];return earcut_Node.nextPoolIndex++,i}return new earcut_Node(n,e,t)},earcut_Node.prototype={reset:function(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=-99999999,this.prevZ=null,this.nextZ=null,this.steiner=!1},__class__:earcut_Node};var V=i["haxe.StackItem"]={__ename__:"haxe.StackItem",__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:$estr},Module:(e=function(n){return{_hx_index:1,m:n,__enum__:"haxe.StackItem",toString:$estr}},e._hx_name="Module",e.__params__=["m"],e),FilePos:(e=function(n,e,t,i){return{_hx_index:2,s:n,file:e,line:t,column:i,__enum__:"haxe.StackItem",toString:$estr}},e._hx_name="FilePos",e.__params__=["s","file","line","column"],e),Method:(e=function(n,e){return{_hx_index:3,classname:n,method:e,__enum__:"haxe.StackItem",toString:$estr}},e._hx_name="Method",e.__params__=["classname","method"],e),LocalFunction:(e=function(n){return{_hx_index:4,v:n,__enum__:"haxe.StackItem",toString:$estr}},e._hx_name="LocalFunction",e.__params__=["v"],e)};V.__constructs__=[V.CFunction,V.Module,V.FilePos,V.Method,V.LocalFunction];var haxe_IMap=function(){};t["haxe.IMap"]=haxe_IMap,haxe_IMap.__name__="haxe.IMap",haxe_IMap.__isInterface__=!0,haxe_IMap.prototype={__class__:haxe_IMap};var haxe_Exception=function(n,e,t){Error.call(this,n),this.message=n,this.__previousException=e,this.__nativeException=null!=t?t:this,this.__skipStack=0;var i=Error.prepareStackTrace;if(Error.prepareStackTrace=function(n){return n.stack},t instanceof Error)this.stack=t.stack;else{var r=null;if(Error.captureStackTrace)Error.captureStackTrace(this,haxe_Exception),r=this;else if(void 0===(r=new Error).stack){try{throw r}catch(n){}this.__skipStack++}this.stack=r.stack}Error.prepareStackTrace=i};t["haxe.Exception"]=haxe_Exception,haxe_Exception.__name__="haxe.Exception",haxe_Exception.caught=function(n){return n instanceof haxe_Exception?n:n instanceof Error?new haxe_Exception(n.message,null,n):new haxe_ValueException(n,null,n)},haxe_Exception.thrown=function(n){if(n instanceof haxe_Exception)return n.get_native();if(n instanceof Error)return n;var e=new haxe_ValueException(n);return e.__skipStack++,e},haxe_Exception.__super__=Error,haxe_Exception.prototype=$extend(Error.prototype,{unwrap:function(){return this.__nativeException},__shiftStack:function(){this.__skipStack++},get_native:function(){return this.__nativeException},get_stack:function(){var n=this.__exceptionStack;if(null==n){var e=haxe_NativeStackTrace.toHaxe(haxe_NativeStackTrace.normalize(this.stack),this.__skipStack);return this.setProperty("__exceptionStack",e),e}return n},setProperty:function(n,e){try{Object.defineProperty(this,n,{value:e})}catch(t){this[n]=e}},__class__:haxe_Exception,__properties__:{get_native:"get_native",get_stack:"get_stack"}});var haxe_Log=function(){};t["haxe.Log"]=haxe_Log,haxe_Log.__name__="haxe.Log",haxe_Log.formatOutput=function(n,e){var t=Std.string(n);if(null==e)return t;var i=e.fileName+":"+e.lineNumber;if(null!=e.customParams)for(var r=0,l=e.customParams;r<l.length;){n=l[r];++r,t+=", "+Std.string(n)}return i+": "+t},haxe_Log.trace=function(n,e){var t=haxe_Log.formatOutput(n,e);"undefined"!=typeof console&&null!=console.log&&console.log(t)};var haxe_NativeStackTrace=function(){};t["haxe.NativeStackTrace"]=haxe_NativeStackTrace,haxe_NativeStackTrace.__name__="haxe.NativeStackTrace",haxe_NativeStackTrace.toHaxe=function(n,e){if(null==e&&(e=0),null==n)return[];if("string"==typeof n){var t=n.split("\n");"Error"==t[0]&&t.shift();for(var i=[],r=0,l=t.length;r<l;){var s=r++;if(!(e>s)){var a=t[s],o=a.match(/^    at ([A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);if(null!=o){var p=o[1].split(".");"$hxClasses"==p[0]&&p.shift();var h=p.pop(),u=o[2],_=Std.parseInt(o[3]),c=Std.parseInt(o[4]);i.push(V.FilePos("Anonymous function"==h?V.LocalFunction():"Global code"==h?null:V.Method(p.join("."),h),u,_,c))}else i.push(V.Module(StringTools.trim(a)))}}return i}return e>0&&Array.isArray(n)?n.slice(e):n},haxe_NativeStackTrace.normalize=function(n,e){if(null==e&&(e=0),Array.isArray(n)&&e>0)return n.slice(e);if("string"==typeof n){switch(n.substring(0,6)){case"Error\n":case"Error:":++e}return haxe_NativeStackTrace.skipLines(n,e)}return n},haxe_NativeStackTrace.skipLines=function(n,e,t){return null==t&&(t=0),e>0?(t=n.indexOf("\n",t))<0?"":haxe_NativeStackTrace.skipLines(n,--e,t+1):n.substring(t)};var haxe_Serializer=function(){this.buf=new StringBuf,this.cache=[],this.useCache=haxe_Serializer.USE_CACHE,this.useEnumIndex=haxe_Serializer.USE_ENUM_INDEX,this.shash=new haxe_ds_StringMap,this.scount=0};t["haxe.Serializer"]=haxe_Serializer,haxe_Serializer.__name__="haxe.Serializer",haxe_Serializer.prototype={toString:function(){return this.buf.b},serializeString:function(n){var e=this.shash.h[n];if(null!=e)return this.buf.b+="R",void(this.buf.b+=null==e?"null":""+e);this.shash.h[n]=this.scount++,this.buf.b+="y",n=encodeURIComponent(n),this.buf.b+=Std.string(n.length),this.buf.b+=":",this.buf.b+=null==n?"null":""+n},serializeRef:function(n){for(var e=typeof n,t=0,i=this.cache.length;t<i;){var r=t++,l=this.cache[r];if(typeof l==e&&l==n)return this.buf.b+="r",this.buf.b+=null==r?"null":""+r,!0}return this.cache.push(n),!1},serializeFields:function(n){for(var e=0,t=Reflect.fields(n);e<t.length;){var i=t[e];++e,this.serializeString(i),this.serialize(Reflect.field(n,i))}this.buf.b+="g"},serialize:function(n){switch((U=Type.typeof(n))._hx_index){case 0:this.buf.b+="n";break;case 1:if(0==(e=n))return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==e?"null":""+e;break;case 2:var e=n;isNaN(e)?this.buf.b+="k":isFinite(e)?(this.buf.b+="d",this.buf.b+=null==e?"null":""+e):this.buf.b+=e<0?"m":"p";break;case 3:this.buf.b+=n?"t":"f";break;case 4:if(js_Boot.__instanceof(n,rn)){var t=n.__name__;this.buf.b+="A",this.serializeString(t)}else if(js_Boot.__instanceof(n,ln))this.buf.b+="B",this.serializeString(n.__ename__);else{if(this.useCache&&this.serializeRef(n))return;this.buf.b+="o",this.serializeFields(n)}break;case 5:throw haxe_Exception.thrown("Cannot serialize function");case 6:var r=U.c;if(r==String)return void this.serializeString(n);if(this.useCache&&this.serializeRef(n))return;switch(r){case Array:var l=0;this.buf.b+="a";for(var s=0,a=n.length;s<a;){null==n[c=s++]?++l:(l>0&&(1==l?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==l?"null":""+l),l=0),this.serialize(n[c]))}l>0&&(1==l?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==l?"null":""+l)),this.buf.b+="h";break;case Date:var o=n;this.buf.b+="v",this.buf.b+=Std.string(o.getTime());break;case haxe_ds_IntMap:this.buf.b+="q";for(var p=(e=n).keys();p.hasNext();){var h=p.next();this.buf.b+=":",this.buf.b+=null==h?"null":""+h,this.serialize(e.h[h])}this.buf.b+="h";break;case haxe_ds_List:this.buf.b+="l";for(var u=(e=n).h;null!=u;){var _=u.item;u=u.next;var c=_;this.serialize(c)}this.buf.b+="h";break;case haxe_ds_ObjectMap:this.buf.b+="M";for(p=(e=n).keys();p.hasNext();){h=p.next();var d=Reflect.field(h,"__id__");Reflect.deleteField(h,"__id__"),this.serialize(h),h.__id__=d,this.serialize(e.h[h.__id__])}this.buf.b+="h";break;case haxe_ds_StringMap:this.buf.b+="b";for(var f=(e=n).h,x=Object.keys(f),b=x.length,y=0;y<b;){p=x[y++];this.serializeString(p),this.serialize(e.h[p])}this.buf.b+="h";break;case haxe_io_Bytes:e=n;this.buf.b+="s",this.buf.b+=Std.string(Math.ceil(8*e.length/6)),this.buf.b+=":";c=0;var v=e.length-2,m=haxe_Serializer.BASE64_CODES;if(null==m){m=new Array(haxe_Serializer.BASE64.length);for(s=0,a=haxe_Serializer.BASE64.length;s<a;){var g=s++;m[g]=HxOverrides.cca(haxe_Serializer.BASE64,g)}haxe_Serializer.BASE64_CODES=m}for(;c<v;){var z=e.b[c++],w=e.b[c++],O=e.b[c++];this.buf.b+=String.fromCodePoint(m[z>>2]),this.buf.b+=String.fromCodePoint(m[63&(z<<4|w>>4)]),this.buf.b+=String.fromCodePoint(m[63&(w<<2|O>>6)]),this.buf.b+=String.fromCodePoint(m[63&O])}if(c==v){z=e.b[c++],w=e.b[c++];this.buf.b+=String.fromCodePoint(m[z>>2]),this.buf.b+=String.fromCodePoint(m[63&(z<<4|w>>4)]),this.buf.b+=String.fromCodePoint(m[w<<2&63])}else if(c==v+1){z=e.b[c++];this.buf.b+=String.fromCodePoint(m[z>>2]),this.buf.b+=String.fromCodePoint(m[z<<4&63])}break;default:this.useCache&&this.cache.pop(),null!=n.hxSerialize?(this.buf.b+="C",this.serializeString(r.__name__),this.useCache&&this.cache.push(n),n.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(r.__name__),this.useCache&&this.cache.push(n),this.serializeFields(n))}break;case 7:var C=U.e;if(this.useCache){if(this.serializeRef(n))return;this.cache.pop()}if(this.buf.b+=Std.string(this.useEnumIndex?"j":"w"),this.serializeString(C.__ename__),this.useEnumIndex)this.buf.b+=":",this.buf.b+=Std.string(n._hx_index);else{C=n;this.serializeString(i[C.__enum__].__constructs__[C._hx_index]._hx_name)}this.buf.b+=":";var E=Type.enumParameters(n);this.buf.b+=Std.string(E.length);for(var U=0;U<E.length;){var M=E[U];++U,this.serialize(M)}this.useCache&&this.cache.push(n);break;default:throw haxe_Exception.thrown("Cannot serialize "+Std.string(n))}},__class__:haxe_Serializer};var haxe__$Unserializer_DefaultResolver=function(){};t["haxe._Unserializer.DefaultResolver"]=haxe__$Unserializer_DefaultResolver,haxe__$Unserializer_DefaultResolver.__name__="haxe._Unserializer.DefaultResolver",haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(n){return t[n]},resolveEnum:function(n){return i[n]},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=function(n){this.buf=n,this.length=this.buf.length,this.pos=0,this.scache=[],this.cache=[];var e=haxe_Unserializer.DEFAULT_RESOLVER;null==e&&(e=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.DEFAULT_RESOLVER=e),this.resolver=e};t["haxe.Unserializer"]=haxe_Unserializer,haxe_Unserializer.__name__="haxe.Unserializer",haxe_Unserializer.initCodes=function(){for(var n=[],e=0,t=haxe_Unserializer.BASE64.length;e<t;){var i=e++;n[haxe_Unserializer.BASE64.charCodeAt(i)]=i}return n},haxe_Unserializer.prototype={readDigits:function(){for(var n=0,e=!1,t=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||i>57)break;n=10*n+(i-48),this.pos++}else{if(this.pos!=t)break;e=!0,this.pos++}}return e&&(n*=-1),n},readFloat:function(){for(var n=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(!(e>=43&&e<58||101==e||69==e))break;this.pos++}return parseFloat(HxOverrides.substr(this.buf,n,this.pos-n))},unserializeObject:function(n){for(;;){if(this.pos>=this.length)throw haxe_Exception.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var e=this.unserialize();if("string"!=typeof e)throw haxe_Exception.thrown("Invalid object key");var t=this.unserialize();n[e]=t}this.pos++},unserializeEnum:function(n,e){if(58!=this.buf.charCodeAt(this.pos++))throw haxe_Exception.thrown("Invalid enum format");var t=this.readDigits();if(0==t)return Type.createEnum(n,e);for(var i=[];t-- >0;)i.push(this.unserialize());return Type.createEnum(n,e,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var n=this.unserialize();if(null==(o=this.resolver.resolveClass(n)))throw haxe_Exception.thrown("Class not found "+n);return o;case 66:n=this.unserialize();if(null==(f=this.resolver.resolveEnum(n)))throw haxe_Exception.thrown("Enum not found "+n);return f;case 67:n=this.unserialize();if(null==(o=this.resolver.resolveClass(n)))throw haxe_Exception.thrown("Class not found "+n);var e=Object.create(o.prototype);if(this.cache.push(e),e.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw haxe_Exception.thrown("Invalid custom data");return e;case 77:var t=new haxe_ds_ObjectMap;this.cache.push(t);for(var i=this.buf;104!=this.buf.charCodeAt(this.pos);){var r=this.unserialize();t.set(r,this.unserialize())}return this.pos++,t;case 82:if((s=this.readDigits())<0||s>=this.scache.length)throw haxe_Exception.thrown("Invalid string reference");return this.scache[s];case 97:i=this.buf;var l=[];for(this.cache.push(l);;){if(104==(b=this.buf.charCodeAt(this.pos))){this.pos++;break}if(117==b){this.pos++;var s=this.readDigits();l[l.length+s-1]=null}else l.push(this.unserialize())}return l;case 98:t=new haxe_ds_StringMap;this.cache.push(t);for(i=this.buf;104!=this.buf.charCodeAt(this.pos);){r=this.unserialize();var a=this.unserialize();t.h[r]=a}return this.pos++,t;case 99:var o;n=this.unserialize();if(null==(o=this.resolver.resolveClass(n)))throw haxe_Exception.thrown("Class not found "+n);e=Object.create(o.prototype);return this.cache.push(e),this.unserializeObject(e),e;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:n=this.unserialize();if(null==(k=this.resolver.resolveEnum(n)))throw haxe_Exception.thrown("Enum not found "+n);this.pos++;for(var p=this.readDigits(),h=k.__constructs__,u=new Array(h.length),_=0,c=h.length;_<c;){u[y=_++]=h[y]._hx_name}var d=u[p];if(null==d)throw haxe_Exception.thrown("Unknown enum index "+n+"@"+p);var f=this.unserializeEnum(k,d);return this.cache.push(f),f;case 107:return NaN;case 108:var x=new haxe_ds_List;this.cache.push(x);for(i=this.buf;104!=this.buf.charCodeAt(this.pos);)x.add(this.unserialize());return this.pos++,x;case 109:return-1/0;case 110:return null;case 111:e={};return this.cache.push(e),this.unserializeObject(e),e;case 112:return 1/0;case 113:t=new haxe_ds_IntMap;this.cache.push(t);i=this.buf;for(var b=this.buf.charCodeAt(this.pos++);58==b;){var y=this.readDigits();a=this.unserialize();t.h[y]=a,b=this.buf.charCodeAt(this.pos++)}if(104!=b)throw haxe_Exception.thrown("Invalid IntMap format");return t;case 114:if((s=this.readDigits())<0||s>=this.cache.length)throw haxe_Exception.thrown("Invalid reference");return this.cache[s];case 115:var v=this.readDigits();i=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<v)throw haxe_Exception.thrown("Invalid bytes length");var m=haxe_Unserializer.CODES;null==m&&(m=haxe_Unserializer.initCodes(),haxe_Unserializer.CODES=m);for(var g=3&v,z=(y=this.pos)+(v-g),w=new haxe_io_Bytes(new ArrayBuffer(3*(v>>2)+(g>=2?g-1:0))),O=0;y<z;){var C=m[i.charCodeAt(y++)],E=m[i.charCodeAt(y++)];w.b[O++]=C<<2|E>>4;var U=m[i.charCodeAt(y++)];w.b[O++]=E<<4|U>>2;var M=m[i.charCodeAt(y++)];w.b[O++]=U<<6|M}if(g>=2){C=m[i.charCodeAt(y++)],E=m[i.charCodeAt(y++)];if(w.b[O++]=C<<2|E>>4,3==g){U=m[i.charCodeAt(y++)];w.b[O++]=E<<4|U>>2}}return this.pos+=v,this.cache.push(w),w;case 116:return!0;case 118:var T;return this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(T=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19)),this.pos+=19):T=new Date(this.readFloat()),this.cache.push(T),T;case 119:var k;n=this.unserialize();if(null==(k=this.resolver.resolveEnum(n)))throw haxe_Exception.thrown("Enum not found "+n);f=this.unserializeEnum(k,this.unserialize());return this.cache.push(f),f;case 120:throw haxe_Exception.thrown(this.unserialize());case 121:v=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<v)throw haxe_Exception.thrown("Invalid string length");r=HxOverrides.substr(this.buf,this.pos,v);return this.pos+=v,r=decodeURIComponent(r.split("+").join(" ")),this.scache.push(r),r;case 122:return 0}throw this.pos--,haxe_Exception.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe_ValueException=function(n,e,t){haxe_Exception.call(this,String(n),e,t),this.value=n,this.__skipStack++};t["haxe.ValueException"]=haxe_ValueException,haxe_ValueException.__name__="haxe.ValueException",haxe_ValueException.__super__=haxe_Exception,haxe_ValueException.prototype=$extend(haxe_Exception.prototype,{unwrap:function(){return this.value},__class__:haxe_ValueException});var haxe_crypto_Md5=function(){};t["haxe.crypto.Md5"]=haxe_crypto_Md5,haxe_crypto_Md5.__name__="haxe.crypto.Md5",haxe_crypto_Md5.encode=function(n){var e=new haxe_crypto_Md5,t=e.doEncode(haxe_crypto_Md5.str2blks(n));return e.hex(t)},haxe_crypto_Md5.str2blks=function(n){for(var e=haxe_io_Bytes.ofString(n),t=1+(e.length+8>>6),i=[],r=0,l=16*t;r<l;){i[s=r++]=0}for(var s=0,a=e.length,o=8*a;s<a;)i[s>>2]|=e.b[s]<<(o+s)%4*8,++s;i[s>>2]|=128<<(o+s)%4*8;var p=16*t-2;return i[p]=255&o,i[p]|=(o>>>8&255)<<8,i[p]|=(o>>>16&255)<<16,i[p]|=(o>>>24&255)<<24,i},haxe_crypto_Md5.prototype={bitOR:function(n,e){return(n>>>1|e>>>1)<<1|(1&n|1&e)},bitXOR:function(n,e){return(n>>>1^e>>>1)<<1|1&n^1&e},bitAND:function(n,e){return(n>>>1&e>>>1)<<1|1&n&e},addme:function(n,e){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t},hex:function(n){for(var e="",t="0123456789abcdef",i=0;i<n.length;){var r=n[i];++i,e+=t.charAt(r>>4&15)+t.charAt(15&r),e+=t.charAt(r>>12&15)+t.charAt(r>>8&15),e+=t.charAt(r>>20&15)+t.charAt(r>>16&15),e+=t.charAt(r>>28&15)+t.charAt(r>>24&15)}return e},rol:function(n,e){return n<<e|n>>>32-e},cmn:function(n,e,t,i,r,l){return this.addme(this.rol(this.addme(this.addme(e,n),this.addme(i,l)),r),t)},ff:function(n,e,t,i,r,l,s){return this.cmn(this.bitOR(this.bitAND(e,t),this.bitAND(~e,i)),n,e,r,l,s)},gg:function(n,e,t,i,r,l,s){return this.cmn(this.bitOR(this.bitAND(e,i),this.bitAND(t,~i)),n,e,r,l,s)},hh:function(n,e,t,i,r,l,s){return this.cmn(this.bitXOR(this.bitXOR(e,t),i),n,e,r,l,s)},ii:function(n,e,t,i,r,l,s){return this.cmn(this.bitXOR(t,this.bitOR(e,~i)),n,e,r,l,s)},doEncode:function(n){for(var e=1732584193,t=-271733879,i=-1732584194,r=271733878,l=0;l<n.length;){var s=e,a=t,o=i,p=r;0,e=this.ff(e,t,i,r,n[l],7,-680876936),r=this.ff(r,e,t,i,n[l+1],12,-389564586),i=this.ff(i,r,e,t,n[l+2],17,606105819),t=this.ff(t,i,r,e,n[l+3],22,-1044525330),e=this.ff(e,t,i,r,n[l+4],7,-176418897),r=this.ff(r,e,t,i,n[l+5],12,1200080426),i=this.ff(i,r,e,t,n[l+6],17,-1473231341),t=this.ff(t,i,r,e,n[l+7],22,-45705983),e=this.ff(e,t,i,r,n[l+8],7,1770035416),r=this.ff(r,e,t,i,n[l+9],12,-1958414417),i=this.ff(i,r,e,t,n[l+10],17,-42063),t=this.ff(t,i,r,e,n[l+11],22,-1990404162),e=this.ff(e,t,i,r,n[l+12],7,1804603682),r=this.ff(r,e,t,i,n[l+13],12,-40341101),i=this.ff(i,r,e,t,n[l+14],17,-1502002290),t=this.ff(t,i,r,e,n[l+15],22,1236535329),e=this.gg(e,t,i,r,n[l+1],5,-165796510),r=this.gg(r,e,t,i,n[l+6],9,-1069501632),i=this.gg(i,r,e,t,n[l+11],14,643717713),t=this.gg(t,i,r,e,n[l],20,-373897302),e=this.gg(e,t,i,r,n[l+5],5,-701558691),r=this.gg(r,e,t,i,n[l+10],9,38016083),i=this.gg(i,r,e,t,n[l+15],14,-660478335),t=this.gg(t,i,r,e,n[l+4],20,-405537848),e=this.gg(e,t,i,r,n[l+9],5,568446438),r=this.gg(r,e,t,i,n[l+14],9,-1019803690),i=this.gg(i,r,e,t,n[l+3],14,-187363961),t=this.gg(t,i,r,e,n[l+8],20,1163531501),e=this.gg(e,t,i,r,n[l+13],5,-1444681467),r=this.gg(r,e,t,i,n[l+2],9,-51403784),i=this.gg(i,r,e,t,n[l+7],14,1735328473),t=this.gg(t,i,r,e,n[l+12],20,-1926607734),e=this.hh(e,t,i,r,n[l+5],4,-378558),r=this.hh(r,e,t,i,n[l+8],11,-2022574463),i=this.hh(i,r,e,t,n[l+11],16,1839030562),t=this.hh(t,i,r,e,n[l+14],23,-35309556),e=this.hh(e,t,i,r,n[l+1],4,-1530992060),r=this.hh(r,e,t,i,n[l+4],11,1272893353),i=this.hh(i,r,e,t,n[l+7],16,-155497632),t=this.hh(t,i,r,e,n[l+10],23,-1094730640),e=this.hh(e,t,i,r,n[l+13],4,681279174),r=this.hh(r,e,t,i,n[l],11,-358537222),i=this.hh(i,r,e,t,n[l+3],16,-722521979),t=this.hh(t,i,r,e,n[l+6],23,76029189),e=this.hh(e,t,i,r,n[l+9],4,-640364487),r=this.hh(r,e,t,i,n[l+12],11,-421815835),i=this.hh(i,r,e,t,n[l+15],16,530742520),t=this.hh(t,i,r,e,n[l+2],23,-995338651),e=this.ii(e,t,i,r,n[l],6,-198630844),r=this.ii(r,e,t,i,n[l+7],10,1126891415),i=this.ii(i,r,e,t,n[l+14],15,-1416354905),t=this.ii(t,i,r,e,n[l+5],21,-57434055),e=this.ii(e,t,i,r,n[l+12],6,1700485571),r=this.ii(r,e,t,i,n[l+3],10,-1894986606),i=this.ii(i,r,e,t,n[l+10],15,-1051523),t=this.ii(t,i,r,e,n[l+1],21,-2054922799),e=this.ii(e,t,i,r,n[l+8],6,1873313359),r=this.ii(r,e,t,i,n[l+15],10,-30611744),i=this.ii(i,r,e,t,n[l+6],15,-1560198380),t=this.ii(t,i,r,e,n[l+13],21,1309151649),e=this.ii(e,t,i,r,n[l+4],6,-145523070),r=this.ii(r,e,t,i,n[l+11],10,-1120210379),i=this.ii(i,r,e,t,n[l+2],15,718787259),t=this.ii(t,i,r,e,n[l+9],21,-343485551),e=this.addme(e,s),t=this.addme(t,a),i=this.addme(i,o),r=this.addme(r,p),l+=16}return[e,t,i,r]},__class__:haxe_crypto_Md5};var haxe_ds_ArraySort=function(){};t["haxe.ds.ArraySort"]=haxe_ds_ArraySort,haxe_ds_ArraySort.__name__="haxe.ds.ArraySort",haxe_ds_ArraySort.sort=function(n,e){haxe_ds_ArraySort.rec(n,e,0,n.length)},haxe_ds_ArraySort.rec=function(n,e,t,i){var r=t+i>>1;if(i-t<12){if(i<=t)return;for(var l=t+1,s=i;l<s;)for(var a=l++;a>t&&e(n[a],n[a-1])<0;)haxe_ds_ArraySort.swap(n,a-1,a),--a}else haxe_ds_ArraySort.rec(n,e,t,r),haxe_ds_ArraySort.rec(n,e,r,i),haxe_ds_ArraySort.doMerge(n,e,t,r,i,r-t,i-r)},haxe_ds_ArraySort.doMerge=function(n,e,t,i,r,l,s){var a,o,p,h;if(0!=l&&0!=s)if(l+s!=2){l>s?(a=t+(p=l>>1),h=(o=haxe_ds_ArraySort.lower(n,e,i,r,a))-i):(o=i+(h=s>>1),p=(a=haxe_ds_ArraySort.upper(n,e,t,i,o))-t),haxe_ds_ArraySort.rotate(n,e,a,i,o);var u=a+h;haxe_ds_ArraySort.doMerge(n,e,t,a,u,p,h),haxe_ds_ArraySort.doMerge(n,e,u,o,r,l-p,s-h)}else e(n[i],n[t])<0&&haxe_ds_ArraySort.swap(n,i,t)},haxe_ds_ArraySort.rotate=function(n,e,t,i,r){if(t!=i&&i!=r)for(var l=haxe_ds_ArraySort.gcd(r-t,i-t);0!=l--;){for(var s=n[t+l],a=i-t,o=t+l,p=t+l+a;p!=t+l;)n[o]=n[p],o=p,r-p>a?p+=a:p=t+(a-(r-p));n[o]=s}},haxe_ds_ArraySort.gcd=function(n,e){for(;0!=e;){var t=n%e;n=e,e=t}return n},haxe_ds_ArraySort.upper=function(n,e,t,i,r){for(var l,s,a=i-t;a>0;)s=t+(l=a>>1),e(n[r],n[s])<0?a=l:(t=s+1,a=a-l-1);return t},haxe_ds_ArraySort.lower=function(n,e,t,i,r){for(var l,s,a=i-t;a>0;)e(n[s=t+(l=a>>1)],n[r])<0?(t=s+1,a=a-l-1):a=l;return t},haxe_ds_ArraySort.swap=function(n,e,t){var i=n[e];n[e]=n[t],n[t]=i};var haxe_ds_IntMap=function(){this.h={}};t["haxe.ds.IntMap"]=haxe_ds_IntMap,haxe_ds_IntMap.__name__="haxe.ds.IntMap",haxe_ds_IntMap.__interfaces__=[haxe_IMap],haxe_ds_IntMap.prototype={get:function(n){return this.h[n]},remove:function(n){return!!this.h.hasOwnProperty(n)&&(delete this.h[n],!0)},keys:function(){var n=[];for(var e in this.h)this.h.hasOwnProperty(e)&&n.push(+e);return new haxe_iterators_ArrayIterator(n)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var n=this.it.next();return this.ref[n]}}},keyValueIterator:function(){return new haxe_iterators_MapKeyValueIterator(this)},copy:function(){for(var n=new haxe_ds_IntMap,e=this.keys();e.hasNext();){var t=e.next();n.h[t]=this.h[t]}return n},__class__:haxe_ds_IntMap};var haxe_ds_List=function(){this.length=0};t["haxe.ds.List"]=haxe_ds_List,haxe_ds_List.__name__="haxe.ds.List",haxe_ds_List.prototype={add:function(n){var e=new haxe_ds__$List_ListNode(n,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},__class__:haxe_ds_List};var haxe_ds__$List_ListNode=function(n,e){this.item=n,this.next=e};t["haxe.ds._List.ListNode"]=haxe_ds__$List_ListNode,haxe_ds__$List_ListNode.__name__="haxe.ds._List.ListNode",haxe_ds__$List_ListNode.prototype={__class__:haxe_ds__$List_ListNode};var haxe_ds_ObjectMap=function(){this.h={__keys__:{}}};t["haxe.ds.ObjectMap"]=haxe_ds_ObjectMap,haxe_ds_ObjectMap.__name__="haxe.ds.ObjectMap",haxe_ds_ObjectMap.__interfaces__=[haxe_IMap],haxe_ds_ObjectMap.prototype={set:function(e,t){var i=e.__id__;null==i&&(i=e.__id__=n.$haxeUID++),this.h[i]=t,this.h.__keys__[i]=e},get:function(n){return this.h[n.__id__]},keys:function(){var n=[];for(var e in this.h.__keys__)this.h.hasOwnProperty(e)&&n.push(this.h.__keys__[e]);return new haxe_iterators_ArrayIterator(n)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var n=this.it.next();return this.ref[n.__id__]}}},keyValueIterator:function(){return new haxe_iterators_MapKeyValueIterator(this)},__class__:haxe_ds_ObjectMap};var haxe_ds_StringMap=function(){this.h=Object.create(null)};t["haxe.ds.StringMap"]=haxe_ds_StringMap,haxe_ds_StringMap.__name__="haxe.ds.StringMap",haxe_ds_StringMap.__interfaces__=[haxe_IMap],haxe_ds_StringMap.prototype={get:function(n){return this.h[n]},keys:function(){return new haxe_ds__$StringMap_StringMapKeyIterator(this.h)},iterator:function(){return new haxe_ds__$StringMap_StringMapValueIterator(this.h)},keyValueIterator:function(){return new haxe_ds__$StringMap_StringMapKeyValueIterator(this.h)},__class__:haxe_ds_StringMap};var haxe_ds__$StringMap_StringMapKeyIterator=function(n){this.h=n,this.keys=Object.keys(n),this.length=this.keys.length,this.current=0};t["haxe.ds._StringMap.StringMapKeyIterator"]=haxe_ds__$StringMap_StringMapKeyIterator,haxe_ds__$StringMap_StringMapKeyIterator.__name__="haxe.ds._StringMap.StringMapKeyIterator",haxe_ds__$StringMap_StringMapKeyIterator.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:haxe_ds__$StringMap_StringMapKeyIterator};var haxe_ds__$StringMap_StringMapValueIterator=function(n){this.h=n,this.keys=Object.keys(n),this.length=this.keys.length,this.current=0};t["haxe.ds._StringMap.StringMapValueIterator"]=haxe_ds__$StringMap_StringMapValueIterator,haxe_ds__$StringMap_StringMapValueIterator.__name__="haxe.ds._StringMap.StringMapValueIterator",haxe_ds__$StringMap_StringMapValueIterator.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:haxe_ds__$StringMap_StringMapValueIterator};var haxe_ds__$StringMap_StringMapKeyValueIterator=function(n){this.h=n,this.keys=Object.keys(n),this.length=this.keys.length,this.current=0};t["haxe.ds._StringMap.StringMapKeyValueIterator"]=haxe_ds__$StringMap_StringMapKeyValueIterator,haxe_ds__$StringMap_StringMapKeyValueIterator.__name__="haxe.ds._StringMap.StringMapKeyValueIterator",haxe_ds__$StringMap_StringMapKeyValueIterator.prototype={hasNext:function(){return this.current<this.length},next:function(){var n=this.keys[this.current++];return{key:n,value:this.h[n]}},__class__:haxe_ds__$StringMap_StringMapKeyValueIterator};var I={blit:function(n,e,t,i,r){if(n==t){if(e<i)for(var l=e+r,s=i+r,a=0,o=r;a<o;){a++;--l,n[--s]=n[l]}else if(e>i)for(l=e,s=i,a=0,o=r;a<o;){a++;n[s]=n[l],++l,++s}}else for(a=0,o=r;a<o;){t[i+(l=a++)]=n[e+l]}}},haxe_io_Bytes=function(n){this.length=n.byteLength,this.b=new Uint8Array(n),this.b.bufferValue=n,n.hxBytes=this,n.bytes=this.b};t["haxe.io.Bytes"]=haxe_io_Bytes,haxe_io_Bytes.__name__="haxe.io.Bytes",haxe_io_Bytes.ofString=function(n,e){if(e==N.RawNative){for(var t=new Uint8Array(n.length<<1),i=0,r=n.length;i<r;){var l=i++,s=n.charCodeAt(l);t[l<<1]=255&s,t[l<<1|1]=s>>8}return new haxe_io_Bytes(t.buffer)}var a=[];for(l=0;l<n.length;){55296<=(s=n.charCodeAt(l++))&&s<=56319&&(s=s-55232<<10|1023&n.charCodeAt(l++)),s<=127?a.push(s):s<=2047?(a.push(192|s>>6),a.push(128|63&s)):s<=65535?(a.push(224|s>>12),a.push(128|s>>6&63),a.push(128|63&s)):(a.push(240|s>>18),a.push(128|s>>12&63),a.push(128|s>>6&63),a.push(128|63&s))}return new haxe_io_Bytes(new Uint8Array(a).buffer)},haxe_io_Bytes.prototype={getString:function(n,e,t){if(n<0||e<0||n+e>this.length)throw haxe_Exception.thrown(F.OutsideBounds);null==t&&(t=N.UTF8);var i="",r=this.b,l=n,s=n+e;switch(t._hx_index){case 0:for(;l<s;){if((h=r[l++])<128){if(0==h)break;i+=String.fromCodePoint(h)}else if(h<224){var a=(63&h)<<6|127&r[l++];i+=String.fromCodePoint(a)}else if(h<240){var o=(31&h)<<12|(127&r[l++])<<6|127&r[l++];i+=String.fromCodePoint(o)}else{var p=(15&h)<<18|(127&r[l++])<<12|(127&r[l++])<<6|127&r[l++];i+=String.fromCodePoint(p)}}break;case 1:for(;l<s;){var h=r[l++]|r[l++]<<8;i+=String.fromCodePoint(h)}}return i},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var N=i["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}};N.__constructs__=[N.UTF8,N.RawNative];var F=i["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:(e=function(n){return{_hx_index:3,e:n,__enum__:"haxe.io.Error",toString:$estr}},e._hx_name="Custom",e.__params__=["e"],e)};F.__constructs__=[F.Blocked,F.Overflow,F.OutsideBounds,F.Custom];var haxe_iterators_ArrayIterator=function(n){this.current=0,this.array=n};t["haxe.iterators.ArrayIterator"]=haxe_iterators_ArrayIterator,haxe_iterators_ArrayIterator.__name__="haxe.iterators.ArrayIterator",haxe_iterators_ArrayIterator.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:haxe_iterators_ArrayIterator};var haxe_iterators_MapKeyValueIterator=function(n){this.map=n,this.keys=n.keys()};t["haxe.iterators.MapKeyValueIterator"]=haxe_iterators_MapKeyValueIterator,haxe_iterators_MapKeyValueIterator.__name__="haxe.iterators.MapKeyValueIterator",haxe_iterators_MapKeyValueIterator.prototype={hasNext:function(){return this.keys.hasNext()},next:function(){var n=this.keys.next();return{value:this.map.get(n),key:n}},__class__:haxe_iterators_MapKeyValueIterator};var R=i["haxe.rtti.CType"]={__ename__:"haxe.rtti.CType",__constructs__:null,CUnknown:{_hx_name:"CUnknown",_hx_index:0,__enum__:"haxe.rtti.CType",toString:$estr},CEnum:(e=function(n,e){return{_hx_index:1,name:n,params:e,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CEnum",e.__params__=["name","params"],e),CClass:(e=function(n,e){return{_hx_index:2,name:n,params:e,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CClass",e.__params__=["name","params"],e),CTypedef:(e=function(n,e){return{_hx_index:3,name:n,params:e,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CTypedef",e.__params__=["name","params"],e),CFunction:(e=function(n,e){return{_hx_index:4,args:n,ret:e,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CFunction",e.__params__=["args","ret"],e),CAnonymous:(e=function(n){return{_hx_index:5,fields:n,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CAnonymous",e.__params__=["fields"],e),CDynamic:(e=function(n){return{_hx_index:6,t:n,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CDynamic",e.__params__=["t"],e),CAbstract:(e=function(n,e){return{_hx_index:7,name:n,params:e,__enum__:"haxe.rtti.CType",toString:$estr}},e._hx_name="CAbstract",e.__params__=["name","params"],e)};R.__constructs__=[R.CUnknown,R.CEnum,R.CClass,R.CTypedef,R.CFunction,R.CAnonymous,R.CDynamic,R.CAbstract];var L=i["haxe.rtti.Rights"]={__ename__:"haxe.rtti.Rights",__constructs__:null,RNormal:{_hx_name:"RNormal",_hx_index:0,__enum__:"haxe.rtti.Rights",toString:$estr},RNo:{_hx_name:"RNo",_hx_index:1,__enum__:"haxe.rtti.Rights",toString:$estr},RCall:(e=function(n){return{_hx_index:2,m:n,__enum__:"haxe.rtti.Rights",toString:$estr}},e._hx_name="RCall",e.__params__=["m"],e),RMethod:{_hx_name:"RMethod",_hx_index:3,__enum__:"haxe.rtti.Rights",toString:$estr},RDynamic:{_hx_name:"RDynamic",_hx_index:4,__enum__:"haxe.rtti.Rights",toString:$estr},RInline:{_hx_name:"RInline",_hx_index:5,__enum__:"haxe.rtti.Rights",toString:$estr}};L.__constructs__=[L.RNormal,L.RNo,L.RCall,L.RMethod,L.RDynamic,L.RInline];var B=i["haxe.rtti.TypeTree"]={__ename__:"haxe.rtti.TypeTree",__constructs__:null,TPackage:(e=function(n,e,t){return{_hx_index:0,name:n,full:e,subs:t,__enum__:"haxe.rtti.TypeTree",toString:$estr}},e._hx_name="TPackage",e.__params__=["name","full","subs"],e),TClassdecl:(e=function(n){return{_hx_index:1,c:n,__enum__:"haxe.rtti.TypeTree",toString:$estr}},e._hx_name="TClassdecl",e.__params__=["c"],e),TEnumdecl:(e=function(n){return{_hx_index:2,e:n,__enum__:"haxe.rtti.TypeTree",toString:$estr}},e._hx_name="TEnumdecl",e.__params__=["e"],e),TTypedecl:(e=function(n){return{_hx_index:3,t:n,__enum__:"haxe.rtti.TypeTree",toString:$estr}},e._hx_name="TTypedecl",e.__params__=["t"],e),TAbstractdecl:(e=function(n){return{_hx_index:4,a:n,__enum__:"haxe.rtti.TypeTree",toString:$estr}},e._hx_name="TAbstractdecl",e.__params__=["a"],e)};B.__constructs__=[B.TPackage,B.TClassdecl,B.TEnumdecl,B.TTypedecl,B.TAbstractdecl];var haxe_rtti_Meta=function(){};t["haxe.rtti.Meta"]=haxe_rtti_Meta,haxe_rtti_Meta.__name__="haxe.rtti.Meta",haxe_rtti_Meta.getMeta=function(n){return n.__meta__},haxe_rtti_Meta.getFields=function(n){var e=haxe_rtti_Meta.getMeta(n);return null==e||null==e.fields?{}:e.fields};var haxe_rtti_Rtti=function(){};t["haxe.rtti.Rtti"]=haxe_rtti_Rtti,haxe_rtti_Rtti.__name__="haxe.rtti.Rtti",haxe_rtti_Rtti.getRtti=function(n){var e=Reflect.field(n,"__rtti");if(null==e)throw haxe_Exception.thrown("Class "+n.__name__+" has no RTTI information, consider adding @:rtti");var t=Xml.parse(e).firstElement(),i=(new haxe_rtti_XmlParser).processElement(t);if(1==i._hx_index)return n=i.c;var r=i;throw haxe_Exception.thrown("Enum mismatch: expected TClassDecl but found "+Std.string(r))};var haxe_rtti_XmlParser=function(){this.root=[]};t["haxe.rtti.XmlParser"]=haxe_rtti_XmlParser,haxe_rtti_XmlParser.__name__="haxe.rtti.XmlParser",haxe_rtti_XmlParser.prototype={mkPath:function(n){return n},mkTypeParams:function(n){var e=n.split(":");return""==e[0]?[]:e},mkRights:function(n){switch(n){case"dynamic":return L.RDynamic;case"inline":return L.RInline;case"method":return L.RMethod;case"null":return L.RNo;default:return L.RCall(n)}},xerror:function(n){var e;if(n.nodeType==Xml.Document)e="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));e=n.nodeName}throw haxe_Exception.thrown("Invalid "+e)},processElement:function(n){if(n.nodeType!=Xml.Document&&n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==n.nodeType?"null":l.toString(n.nodeType)));var e,t=n;if(t.nodeType==Xml.Document)e="Document";else{if(t.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":l.toString(t.nodeType)));e=t.nodeName}switch(e){case"abstract":return B.TAbstractdecl(this.xabstract(t));case"class":return B.TClassdecl(this.xclass(t));case"enum":return B.TEnumdecl(this.xenum(t));case"typedef":return B.TTypedecl(this.xtypedef(t));default:return this.xerror(t)}},xmeta:function(n){for(var e=[],t=0,i=Y.resolve(n,"m");t<i.length;){var r=i[t];++t;for(var l=[],s=0,a=Y.resolve(r,"e");s<a.length;){var o=a[s];++s,l.push(X.get_innerHTML(o))}e.push({name:j.resolve(r,"n"),params:l})}return e},xoverloads:function(n){for(var e=[],t=n.elements();t.hasNext();){var i=t.next();e.push(this.xclassfield(i))}return e},xpath:function(n){for(var e=this.mkPath(j.resolve(n,"path")),t=[],i=n.elements();i.hasNext();){var r=i.next();t.push(this.xtype(r))}return{path:e,params:t}},xclass:function(n){for(var e=null,t=null,i=null,r=[],s=[],a=[],o=[],p=n.exists("interface"),h=n.elements();h.hasNext();){var u,_=h.next();if(_.nodeType==Xml.Document)u="Document";else{if(_.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==_.nodeType?"null":l.toString(_.nodeType)));u=_.nodeName}switch(u){case"extends":p?r.push(this.xpath(_)):e=this.xpath(_);break;case"haxe_doc":t=X.get_innerData(_);break;case"haxe_dynamic":var c=_.firstElement();if(c.nodeType!=Xml.Document&&c.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==c.nodeType?"null":l.toString(c.nodeType)));var d=c;i=this.xtype(d);break;case"implements":r.push(this.xpath(_));break;case"meta":o=this.xmeta(_);break;default:_.exists("static")?a.push(this.xclassfield(_)):s.push(this.xclassfield(_))}}return{file:K.resolve(n,"file")?j.resolve(n,"file"):null,path:this.mkPath(j.resolve(n,"path")),module:K.resolve(n,"module")?this.mkPath(j.resolve(n,"module")):null,doc:t,isPrivate:n.exists("private"),isExtern:n.exists("extern"),isFinal:n.exists("final"),isInterface:p,params:this.mkTypeParams(j.resolve(n,"params")),superClass:e,interfaces:r,fields:s,statics:a,tdynamic:i,platforms:this.defplat(),meta:o}},xclassfield:function(n,e){null==e&&(e=!1);for(var t,i=n.elements(),r=this.xtype(i.next()),s=null,a=[],o=null,p=i;p.hasNext();){var h,u=p.next();if(u.nodeType==Xml.Document)h="Document";else{if(u.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==u.nodeType?"null":l.toString(u.nodeType)));h=u.nodeName}switch(h){case"haxe_doc":s=X.get_innerData(u);break;case"meta":a=this.xmeta(u);break;case"overloads":o=this.xoverloads(u);break;default:this.xerror(u)}}if(n.nodeType==Xml.Document)t="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));t=n.nodeName}return{name:t,type:r,isPublic:n.exists("public")||e,isFinal:n.exists("final"),isOverride:n.exists("override"),line:K.resolve(n,"line")?Std.parseInt(j.resolve(n,"line")):null,doc:s,get:K.resolve(n,"get")?this.mkRights(j.resolve(n,"get")):L.RNormal,set:K.resolve(n,"set")?this.mkRights(j.resolve(n,"set")):L.RNormal,params:K.resolve(n,"params")?this.mkTypeParams(j.resolve(n,"params")):[],platforms:this.defplat(),meta:a,overloads:o,expr:K.resolve(n,"expr")?j.resolve(n,"expr"):null}},xenum:function(n){for(var e=[],t=null,i=[],r=n.elements();r.hasNext();){var s,a=r.next();if(a.nodeType==Xml.Document)s="Document";else{if(a.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":l.toString(a.nodeType)));s=a.nodeName}if("haxe_doc"==s)t=X.get_innerData(a);else{var o;if(a.nodeType==Xml.Document)o="Document";else{if(a.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":l.toString(a.nodeType)));o=a.nodeName}"meta"==o?i=this.xmeta(a):e.push(this.xenumfield(a))}}return{file:K.resolve(n,"file")?j.resolve(n,"file"):null,path:this.mkPath(j.resolve(n,"path")),module:K.resolve(n,"module")?this.mkPath(j.resolve(n,"module")):null,doc:t,isPrivate:n.exists("private"),isExtern:n.exists("extern"),params:this.mkTypeParams(j.resolve(n,"params")),constructors:e,platforms:this.defplat(),meta:i}},xenumfield:function(n){var e,t,i=null,r=n.elementsNamed("haxe_doc"),s=r.hasNext()?r.next():null,a=W.resolve(n,"meta")?this.xmeta(G.resolve(n,"meta")):[];if(K.resolve(n,"a")){var o=j.resolve(n,"a").split(":"),p=n.elements();i=[];for(var h=0;h<o.length;){var u=o[h];++h;var _=!1;"?"==u.charAt(0)&&(_=!0,u=HxOverrides.substr(u,1,null)),i.push({name:u,opt:_,t:this.xtype(p.next())})}}if(n.nodeType==Xml.Document)e="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));e=n.nodeName}if(null==s)t=null;else{if(s.nodeType!=Xml.Document&&s.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==s.nodeType?"null":l.toString(s.nodeType)));var c=s;t=X.get_innerData(c)}return{name:e,args:i,doc:t,meta:a,platforms:this.defplat()}},xabstract:function(n){for(var e=null,t=null,i=null,r=[],s=[],a=[],o=n.elements();o.hasNext();){var p,h=o.next();if(h.nodeType==Xml.Document)p="Document";else{if(h.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==h.nodeType?"null":l.toString(h.nodeType)));p=h.nodeName}switch(p){case"from":for(var u=h.elements();u.hasNext();){var _=u.next(),c=_.firstElement();if(c.nodeType!=Xml.Document&&c.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==c.nodeType?"null":l.toString(c.nodeType)));var d=c;a.push({t:this.xtype(d),field:K.resolve(_,"field")?j.resolve(_,"field"):null})}break;case"haxe_doc":e=X.get_innerData(h);break;case"impl":t=this.xclass(G.resolve(h,"class"));break;case"meta":r=this.xmeta(h);break;case"this":var f=h.firstElement();if(f.nodeType!=Xml.Document&&f.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==f.nodeType?"null":l.toString(f.nodeType)));var x=f;i=this.xtype(x);break;case"to":for(var b=h.elements();b.hasNext();){var y=b.next(),v=y.firstElement();if(v.nodeType!=Xml.Document&&v.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==v.nodeType?"null":l.toString(v.nodeType)));var m=v;s.push({t:this.xtype(m),field:K.resolve(y,"field")?j.resolve(y,"field"):null})}break;default:this.xerror(h)}}return{file:K.resolve(n,"file")?j.resolve(n,"file"):null,path:this.mkPath(j.resolve(n,"path")),module:K.resolve(n,"module")?this.mkPath(j.resolve(n,"module")):null,doc:e,isPrivate:n.exists("private"),params:this.mkTypeParams(j.resolve(n,"params")),platforms:this.defplat(),meta:r,athis:i,to:s,from:a,impl:t}},xtypedef:function(n){for(var e=null,t=null,i=[],r=n.elements();r.hasNext();){var s,a=r.next();if(a.nodeType==Xml.Document)s="Document";else{if(a.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":l.toString(a.nodeType)));s=a.nodeName}if("haxe_doc"==s)e=X.get_innerData(a);else{var o;if(a.nodeType==Xml.Document)o="Document";else{if(a.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":l.toString(a.nodeType)));o=a.nodeName}"meta"==o?i=this.xmeta(a):t=this.xtype(a)}}var p=new haxe_ds_StringMap;return null!=this.curplatform&&(p.h[this.curplatform]=t),{file:K.resolve(n,"file")?j.resolve(n,"file"):null,path:this.mkPath(j.resolve(n,"path")),module:K.resolve(n,"module")?this.mkPath(j.resolve(n,"module")):null,doc:e,isPrivate:n.exists("private"),params:this.mkTypeParams(j.resolve(n,"params")),type:t,types:p,platforms:this.defplat(),meta:i}},xtype:function(n){var e;if(n.nodeType==Xml.Document)e="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));e=n.nodeName}switch(e){case"a":for(var t=[],i=n.elements();i.hasNext();){var r=i.next(),s=this.xclassfield(r,!0);s.platforms=[],t.push(s)}return R.CAnonymous(t);case"c":return R.CClass(this.mkPath(j.resolve(n,"path")),this.xtypeparams(n));case"d":var a=null,o=n.firstElement();if(null!=o){if(o.nodeType!=Xml.Document&&o.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==o.nodeType?"null":l.toString(o.nodeType)));var p=o;a=this.xtype(p)}return R.CDynamic(a);case"e":return R.CEnum(this.mkPath(j.resolve(n,"path")),this.xtypeparams(n));case"f":for(var h=[],u=0,_=j.resolve(n,"a").split(":"),c=K.resolve(n,"v")?new haxe_iterators_ArrayIterator(j.resolve(n,"v").split(":")):null,d=n.elements();d.hasNext();){var f=d.next(),x=!1,b=u<_.length?_[u++]:null;null==b&&(b=""),"?"==b.charAt(0)&&(x=!0,b=HxOverrides.substr(b,1,null));var y=null==c||c.current>=c.array.length?null:c.array[c.current++];h.push({name:b,opt:x,t:this.xtype(f),value:""==y?null:y})}var v=h[h.length-1];return HxOverrides.remove(h,v),R.CFunction(h,v.t);case"t":return R.CTypedef(this.mkPath(j.resolve(n,"path")),this.xtypeparams(n));case"unknown":return R.CUnknown;case"x":return R.CAbstract(this.mkPath(j.resolve(n,"path")),this.xtypeparams(n));default:return this.xerror(n)}},xtypeparams:function(n){for(var e=[],t=n.elements();t.hasNext();){var i=t.next();e.push(this.xtype(i))}return e},defplat:function(){var n=[];return null!=this.curplatform&&n.push(this.curplatform),n},__class__:haxe_rtti_XmlParser};var G={resolve:function(n,e){var t=n.elementsNamed(e).next();if(null==t){var i;if(n.nodeType==Xml.Document)i="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));i=n.nodeName}throw haxe_Exception.thrown(i+" is missing element "+e)}if(t.nodeType!=Xml.Document&&t.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==t.nodeType?"null":l.toString(t.nodeType)));return n=t}},j={resolve:function(n,e){if(n.nodeType==Xml.Document)throw haxe_Exception.thrown("Cannot access document attribute "+e);var t=n.get(e);if(null==t){if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));throw haxe_Exception.thrown(n.nodeName+" is missing attribute "+e)}return t}},K={resolve:function(n,e){if(n.nodeType==Xml.Document)throw haxe_Exception.thrown("Cannot access document attribute "+e);return n.exists(e)}},W={resolve:function(n,e){return n.elementsNamed(e).hasNext()}},Y={resolve:function(n,e){for(var t=[],i=n.elementsNamed(e);i.hasNext();){var r=i.next();if(r.nodeType!=Xml.Document&&r.nodeType!=Xml.Element)throw haxe_Exception.thrown("Invalid nodeType "+(null==r.nodeType?"null":l.toString(r.nodeType)));n=r;t.push(n)}return t}},X={__properties__:{get_innerHTML:"get_innerHTML",get_innerData:"get_innerData"},get_innerData:function(n){if(n.nodeType!=Xml.Document&&n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));var e=0,t=n.children;if(e>=t.length){if(n.nodeType==Xml.Document)a="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));a=n.nodeName}throw haxe_Exception.thrown(a+" does not have data")}var i=t[e++];if(e<t.length){var r=t[e++];if(i.nodeType==Xml.PCData&&r.nodeType==Xml.CData){if(i.nodeType==Xml.Document||i.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":l.toString(i.nodeType)));a=""==StringTools.trim(i.nodeValue)}else a=!1;if(a){if(e>=t.length){if(r.nodeType==Xml.Document||r.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==r.nodeType?"null":l.toString(r.nodeType)));return r.nodeValue}var s=t[e++];if(s.nodeType==Xml.PCData){if(s.nodeType==Xml.Document||s.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==s.nodeType?"null":l.toString(s.nodeType)));a=""==StringTools.trim(s.nodeValue)}else a=!1;if(a&&e>=t.length){if(r.nodeType==Xml.Document||r.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==r.nodeType?"null":l.toString(r.nodeType)));return r.nodeValue}}if(n.nodeType==Xml.Document)a="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));a=n.nodeName}throw haxe_Exception.thrown(a+" does not only have data")}if(i.nodeType!=Xml.PCData&&i.nodeType!=Xml.CData){var a;if(n.nodeType==Xml.Document)a="Document";else{if(n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));a=n.nodeName}throw haxe_Exception.thrown(a+" does not have data")}if(i.nodeType==Xml.Document||i.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":l.toString(i.nodeType)));return i.nodeValue},get_innerHTML:function(n){var e="";if(n.nodeType!=Xml.Document&&n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));for(var t=0,i=n.children;t<i.length;){var r=i[t++];e+=Std.string(haxe_xml_Printer.print(r))}return e}},haxe_xml_XmlParserException=function(n,e,t){this.xml=e,this.message=n,this.position=t,this.lineNumber=1,this.positionAtLine=0;for(var i=0,r=t;i<r;){var l=i++,s=e.charCodeAt(l);10==s?(this.lineNumber++,this.positionAtLine=0):13!=s&&this.positionAtLine++}};t["haxe.xml.XmlParserException"]=haxe_xml_XmlParserException,haxe_xml_XmlParserException.__name__="haxe.xml.XmlParserException",haxe_xml_XmlParserException.prototype={toString:function(){return js_Boot.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:haxe_xml_XmlParserException};var haxe_xml_Parser=function(){};t["haxe.xml.Parser"]=haxe_xml_Parser,haxe_xml_Parser.__name__="haxe.xml.Parser",haxe_xml_Parser.parse=function(n,e){null==e&&(e=!1);var t=Xml.createDocument();return haxe_xml_Parser.doParse(n,e,0,t),t},haxe_xml_Parser.doParse=function(n,e,t,i){null==t&&(t=0);for(var r=null,s=1,a=1,o=null,p=0,h=0,u=0,_=new StringBuf,c=1,d=-1;t<n.length;){var f=n.charCodeAt(t);switch(s){case 0:switch(f){case 9:case 10:case 13:case 32:break;default:s=a;continue}break;case 1:if(60!=f){p=t,s=13;continue}s=0,a=2;break;case 2:switch(f){case 33:if(91==n.charCodeAt(t+1)){if("CDATA["!=HxOverrides.substr(n,t+=2,6).toUpperCase())throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected <![CDATA[",n,t));s=17,p=(t+=5)+1}else if(68==n.charCodeAt(t+1)||100==n.charCodeAt(t+1)){if("OCTYPE"!=HxOverrides.substr(n,t+2,6).toUpperCase())throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected <!DOCTYPE",n,t));s=16,p=(t+=8)+1}else{if(45!=n.charCodeAt(t+1)||45!=n.charCodeAt(t+2))throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected \x3c!--",n,t));s=15,p=(t+=2)+1}break;case 47:if(null==i)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected node name",n,t));p=t+1,s=0,a=10;break;case 63:s=14,p=t;break;default:s=3,p=t;continue}break;case 3:if(!(f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||58==f||46==f||95==f||45==f)){if(t==p)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected node name",n,t));r=Xml.createElement(HxOverrides.substr(n,p,t-p)),i.addChild(r),++h,s=0,a=4;continue}break;case 4:switch(f){case 47:s=11;break;case 62:s=9;break;default:s=5,p=t;continue}break;case 5:if(!(f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||58==f||46==f||95==f||45==f)){if(p==t)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected attribute name",n,t));if(o=HxOverrides.substr(n,p,t-p),r.exists(o))throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Duplicate attribute ["+o+"]",n,t));s=0,a=6;continue}break;case 6:if(61!=f)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected =",n,t));s=0,a=7;break;case 7:switch(f){case 34:case 39:_=new StringBuf,s=8,p=t+1,d=f;break;default:throw haxe_Exception.thrown(new haxe_xml_XmlParserException('Expected "',n,t))}break;case 8:switch(f){case 38:var x=t-p;_.b+=HxOverrides.substr(n,p,null==x?null:x),s=18,c=8,p=t+1;break;case 60:case 62:if(e)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Invalid unescaped "+String.fromCodePoint(f)+" in attribute value",n,t));if(f==d){var b=t-p;_.b+=HxOverrides.substr(n,p,null==b?null:b);var y=_.b;_=new StringBuf,r.set(o,y),s=0,a=4}break;default:if(f==d){var v=t-p;_.b+=HxOverrides.substr(n,p,null==v?null:v);var m=_.b;_=new StringBuf,r.set(o,m),s=0,a=4}}break;case 9:p=t=haxe_xml_Parser.doParse(n,e,t,r),s=1;break;case 10:if(!(f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||58==f||46==f||95==f||45==f)){if(p==t)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected node name",n,t));var g=HxOverrides.substr(n,p,t-p);if(null==i||0!=i.nodeType)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Unexpected </"+g+">, tag is not open",n,t));if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));if(g!=i.nodeName){if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected </"+i.nodeName+">",n,t))}s=0,a=12;continue}break;case 11:if(62!=f)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected >",n,t));s=1;break;case 12:if(62==f)return 0==h&&i.addChild(Xml.createPCData("")),t;throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Expected >",n,t));case 13:if(60==f){var z=t-p;_.b+=HxOverrides.substr(n,p,null==z?null:z);var w=Xml.createPCData(_.b);_=new StringBuf,i.addChild(w),++h,s=0,a=2}else if(38==f){var O=t-p;_.b+=HxOverrides.substr(n,p,null==O?null:O),s=18,c=13,p=t+1}break;case 14:if(63==f&&62==n.charCodeAt(t+1)){++t;var C=HxOverrides.substr(n,p+1,t-p-2);i.addChild(Xml.createProcessingInstruction(C)),++h,s=1}break;case 15:45==f&&45==n.charCodeAt(t+1)&&62==n.charCodeAt(t+2)&&(i.addChild(Xml.createComment(HxOverrides.substr(n,p,t-p))),++h,t+=2,s=1);break;case 16:91==f?++u:93==f?--u:62==f&&0==u&&(i.addChild(Xml.createDocType(HxOverrides.substr(n,p,t-p))),++h,s=1);break;case 17:if(93==f&&93==n.charCodeAt(t+1)&&62==n.charCodeAt(t+2)){var E=Xml.createCData(HxOverrides.substr(n,p,t-p));i.addChild(E),++h,t+=2,s=1}break;case 18:if(59==f){var U=HxOverrides.substr(n,p,t-p);if(35==U.charCodeAt(0)){var M=120==U.charCodeAt(1)?Std.parseInt("0"+HxOverrides.substr(U,1,U.length-1)):Std.parseInt(HxOverrides.substr(U,1,U.length-1));_.b+=String.fromCodePoint(M)}else if(Object.prototype.hasOwnProperty.call(haxe_xml_Parser.escapes.h,U))_.b+=Std.string(haxe_xml_Parser.escapes.h[U]);else{if(e)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Undefined entity: "+U,n,t));_.b+=Std.string("&"+U+";")}p=t+1,s=c}else if(!(f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||58==f||46==f||95==f||45==f)&&35!=f){if(e)throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Invalid character in entity: "+String.fromCodePoint(f),n,t));_.b+=String.fromCodePoint(38);var T=t-p;_.b+=HxOverrides.substr(n,p,null==T?null:T),p=--t+1,s=c}}++t}if(1==s&&(p=t,s=13),13==s){if(0==i.nodeType){if(i.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":l.toString(i.nodeType)));throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Unclosed node <"+i.nodeName+">",n,t))}if(t!=p||0==h){x=t-p;_.b+=HxOverrides.substr(n,p,null==x?null:x),i.addChild(Xml.createPCData(_.b)),++h}return t}if(!e&&18==s&&13==c){_.b+=String.fromCodePoint(38);x=t-p;return _.b+=HxOverrides.substr(n,p,null==x?null:x),i.addChild(Xml.createPCData(_.b)),++h,t}throw haxe_Exception.thrown(new haxe_xml_XmlParserException("Unexpected end",n,t))};var haxe_xml_Printer=function(n){this.output=new StringBuf,this.pretty=n};t["haxe.xml.Printer"]=haxe_xml_Printer,haxe_xml_Printer.__name__="haxe.xml.Printer",haxe_xml_Printer.print=function(n,e){null==e&&(e=!1);var t=new haxe_xml_Printer(e);return t.writeNode(n,""),t.output.b},haxe_xml_Printer.prototype={writeNode:function(n,e){switch(n.nodeType){case 0:if(this.output.b+=Std.string(e+"<"),n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));this.output.b+=Std.string(n.nodeName);for(var t=n.attributes();t.hasNext();){var i=t.next();this.output.b+=Std.string(" "+i+'="');var r=StringTools.htmlEscape(n.get(i),!0);this.output.b+=Std.string(r),this.output.b+='"'}if(this.hasChildren(n)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),n.nodeType!=Xml.Document&&n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));for(var s=0,a=n.children;s<a.length;){var o=a[s++];this.writeNode(o,this.pretty?e+"\t":e)}if(this.output.b+=Std.string(e+"</"),n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));this.output.b+=Std.string(n.nodeName),this.output.b+=">",this.pretty&&(this.output.b+="\n")}else this.output.b+="/>",this.pretty&&(this.output.b+="\n");break;case 1:if(n.nodeType==Xml.Document||n.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":l.toString(n.nodeType)));var p=n.nodeValue;if(0!=p.length){r=e+StringTools.htmlEscape(p);this.output.b+=Std.string(r),this.pretty&&(this.output.b+="\n")}break;case 2:if(this.output.b+=Std.string(e+"<![CDATA["),n.nodeType==Xml.Document||n.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":l.toString(n.nodeType)));this.output.b+=Std.string(n.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(n.nodeType==Xml.Document||n.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":l.toString(n.nodeType)));var h=n.nodeValue,u=new RegExp("[\n\r\t]+","g".split("u").join(""));h="\x3c!--"+(h=h.replace(u,""))+"--\x3e",this.output.b+=null==e?"null":""+e;r=StringTools.trim(h);this.output.b+=Std.string(r),this.pretty&&(this.output.b+="\n");break;case 4:if(n.nodeType==Xml.Document||n.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":l.toString(n.nodeType)));this.output.b+=Std.string("<!DOCTYPE "+n.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(n.nodeType==Xml.Document||n.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==n.nodeType?"null":l.toString(n.nodeType)));this.output.b+=Std.string("<?"+n.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(n.nodeType!=Xml.Document&&n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));for(s=0,a=n.children;s<a.length;){o=a[s++];this.writeNode(o,e)}}},hasChildren:function(n){if(n.nodeType!=Xml.Document&&n.nodeType!=Xml.Element)throw haxe_Exception.thrown("Bad node type, expected Element or Document but found "+(null==n.nodeType?"null":l.toString(n.nodeType)));for(var e=0,t=n.children;e<t.length;){var i=t[e++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==Xml.Document||i.nodeType==Xml.Element)throw haxe_Exception.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":l.toString(i.nodeType)));if(0!=StringTools.ltrim(i.nodeValue).length)return!0}}return!1},__class__:haxe_xml_Printer};var hsluv_Geometry=function(){};t["hsluv.Geometry"]=hsluv_Geometry,hsluv_Geometry.__name__="hsluv.Geometry",hsluv_Geometry.intersectLineLine=function(n,e){var t=(n.intercept-e.intercept)/(e.slope-n.slope);return{x:t,y:n.slope*t+n.intercept}},hsluv_Geometry.distanceFromOrigin=function(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))},hsluv_Geometry.distanceLineFromOrigin=function(n){return Math.abs(n.intercept)/Math.sqrt(Math.pow(n.slope,2)+1)},hsluv_Geometry.perpendicularThroughPoint=function(n,e){var t=-1/n.slope;return{slope:t,intercept:e.y-t*e.x}},hsluv_Geometry.angleFromOrigin=function(n){return Math.atan2(n.y,n.x)},hsluv_Geometry.normalizeAngle=function(n){var e=2*Math.PI;return(n%e+e)%e},hsluv_Geometry.lengthOfRayUntilIntersect=function(n,e){return e.intercept/(Math.sin(n)-e.slope*Math.cos(n))};var hsluv_Hsluv=function(){};t["hsluv.Hsluv"]=hsluv_Hsluv,hsluv_Hsluv.__name__="hsluv.Hsluv",hsluv_Hsluv.getBounds=function(n){for(var e=[],t=Math.pow(n+16,3)/1560896,i=t>hsluv_Hsluv.epsilon?t:n/hsluv_Hsluv.kappa,r=0;r<3;){var l=r++,s=hsluv_Hsluv.m[l][0],a=hsluv_Hsluv.m[l][1],o=hsluv_Hsluv.m[l][2],p=(284517*s-94839*o)*i,h=(838422*o+769860*a+731718*s)*n*i-0*n,u=(632260*o-126452*a)*i;e.push({slope:p/u,intercept:h/u});var _=(284517*s-94839*o)*i,c=(838422*o+769860*a+731718*s)*n*i-769860*n,d=(632260*o-126452*a)*i+126452;e.push({slope:_/d,intercept:c/d})}return e},hsluv_Hsluv.maxSafeChromaForL=function(n){for(var e=hsluv_Hsluv.getBounds(n),t=1/0,i=0;i<e.length;){var r=e[i];++i;var l=hsluv_Geometry.distanceLineFromOrigin(r);t=Math.min(t,l)}return t},hsluv_Hsluv.maxChromaForLH=function(n,e){for(var t=e/360*Math.PI*2,i=hsluv_Hsluv.getBounds(n),r=1/0,l=0;l<i.length;){var s=i[l];++l;var a=hsluv_Geometry.lengthOfRayUntilIntersect(t,s);a>=0&&(r=Math.min(r,a))}return r},hsluv_Hsluv.dotProduct=function(n,e){for(var t=0,i=0,r=n.length;i<r;){var l=i++;t+=n[l]*e[l]}return t},hsluv_Hsluv.fromLinear=function(n){return n<=.0031308?12.92*n:1.055*Math.pow(n,.4166666666666667)-.055},hsluv_Hsluv.toLinear=function(n){return n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92},hsluv_Hsluv.xyzToRgb=function(n,e){var t=hsluv_Hsluv.fromLinear(hsluv_Hsluv.dotProduct(hsluv_Hsluv.m[0],n)),i=hsluv_Hsluv.fromLinear(hsluv_Hsluv.dotProduct(hsluv_Hsluv.m[1],n)),r=hsluv_Hsluv.fromLinear(hsluv_Hsluv.dotProduct(hsluv_Hsluv.m[2],n));return null==e&&(e=[0,0,0]),e[0]=t,e[1]=i,e[2]=r,e},hsluv_Hsluv.rgbToXyz=function(n,e){var t=n[0],i=n[1],r=n[2];null==e&&(e=[0,0,0]),e[0]=hsluv_Hsluv.toLinear(t),e[1]=hsluv_Hsluv.toLinear(i),e[2]=hsluv_Hsluv.toLinear(r);var l=hsluv_Hsluv.dotProduct(hsluv_Hsluv.minv[0],e),s=hsluv_Hsluv.dotProduct(hsluv_Hsluv.minv[1],e),a=hsluv_Hsluv.dotProduct(hsluv_Hsluv.minv[2],e);return e[0]=l,e[1]=s,e[2]=a,e},hsluv_Hsluv.yToL=function(n){return n<=hsluv_Hsluv.epsilon?n/hsluv_Hsluv.refY*hsluv_Hsluv.kappa:116*Math.pow(n/hsluv_Hsluv.refY,.3333333333333333)-16},hsluv_Hsluv.lToY=function(n){return n<=8?hsluv_Hsluv.refY*n/hsluv_Hsluv.kappa:hsluv_Hsluv.refY*Math.pow((n+16)/116,3)},hsluv_Hsluv.xyzToLuv=function(n,e){var t=n[0],i=n[1];null==e&&(e=[0,0,0]);var r=t+15*i+3*n[2],l=4*t,s=9*i;0!=r?(l/=r,s/=r):(l=NaN,s=NaN);var a=hsluv_Hsluv.yToL(i);if(0==a)return e[0]=0,e[1]=0,e[2]=0,e;var o=13*a*(l-hsluv_Hsluv.refU),p=13*a*(s-hsluv_Hsluv.refV);return e[0]=a,e[1]=o,e[2]=p,e},hsluv_Hsluv.luvToXyz=function(n,e){null==e&&(e=[0,0,0]);var t=n[0],i=n[1],r=n[2];if(0==t)return e[0]=0,e[1]=1,e[2]=2,e;var l=i/(13*t)+hsluv_Hsluv.refU,s=r/(13*t)+hsluv_Hsluv.refV,a=hsluv_Hsluv.lToY(t),o=0-9*a*l/((l-4)*s-l*s),p=(9*a-15*s*a-s*o)/(3*s);return e[0]=o,e[1]=a,e[2]=p,e},hsluv_Hsluv.luvToLch=function(n,e){var t=n[0],i=n[1],r=n[2];null==e&&(e=[0,0,0]);var l,s=Math.sqrt(i*i+r*r);s<1e-8?l=0:(l=180*Math.atan2(r,i)/Math.PI)<0&&(l=360+l);return e[0]=t,e[1]=s,e[2]=l,e},hsluv_Hsluv.lchToLuv=function(n,e){var t=n[0],i=n[1];null==e&&(e=[0,0,0]);var r=n[2]/360*2*Math.PI,l=Math.cos(r)*i,s=Math.sin(r)*i;return e[0]=t,e[1]=l,e[2]=s,e},hsluv_Hsluv.hsluvToLch=function(n,e){var t=n[0],i=n[1],r=n[2];if(null==e&&(e=[0,0,0]),r>99.9999999)return e[0]=100,e[1]=0,e[2]=t,e;if(r<1e-8)return e[0]=0,e[1]=0,e[2]=t,e;var l=hsluv_Hsluv.maxChromaForLH(r,t)/100*i;return e[0]=r,e[1]=l,e[2]=t,e},hsluv_Hsluv.lchToHsluv=function(n,e){var t=n[0],i=n[1],r=n[2];if(null==e&&(e=[0,0,0]),t>99.9999999)return e[0]=r,e[1]=0,e[2]=100,e;if(t<1e-8)return e[0]=r,e[1]=0,e[2]=0,e;var l=i/hsluv_Hsluv.maxChromaForLH(t,r)*100;return e[0]=r,e[1]=l,e[2]=t,e},hsluv_Hsluv.hpluvToLch=function(n){var e=n[0],t=n[1],i=n[2];return i>99.9999999?[100,0,e]:i<1e-8?[0,0,e]:[i,hsluv_Hsluv.maxSafeChromaForL(i)/100*t,e]},hsluv_Hsluv.lchToHpluv=function(n){var e=n[0],t=n[1],i=n[2];return e>99.9999999?[i,0,100]:e<1e-8?[i,0,0]:[i,t/hsluv_Hsluv.maxSafeChromaForL(e)*100,e]},hsluv_Hsluv.rgbToHex=function(n){var e="#",t=n[0],i=((r=Math.round(255*t))-(l=r%16))/16|0;e+=hsluv_Hsluv.hexChars.charAt(i)+hsluv_Hsluv.hexChars.charAt(l);t=n[1],i=((r=Math.round(255*t))-(l=r%16))/16|0;e+=hsluv_Hsluv.hexChars.charAt(i)+hsluv_Hsluv.hexChars.charAt(l);var r,l;t=n[2],i=((r=Math.round(255*t))-(l=r%16))/16|0;return e+=hsluv_Hsluv.hexChars.charAt(i)+hsluv_Hsluv.hexChars.charAt(l)},hsluv_Hsluv.hexToRgb=function(n){n=n.toLowerCase();var e=[],t=16*hsluv_Hsluv.hexChars.indexOf(n.charAt(1))+hsluv_Hsluv.hexChars.indexOf(n.charAt(2));e.push(t/255);t=16*hsluv_Hsluv.hexChars.indexOf(n.charAt(3))+hsluv_Hsluv.hexChars.indexOf(n.charAt(4));e.push(t/255);t=16*hsluv_Hsluv.hexChars.indexOf(n.charAt(5))+hsluv_Hsluv.hexChars.indexOf(n.charAt(6));return e.push(t/255),e},hsluv_Hsluv.lchToRgb=function(n,e){return null==e&&(e=[0,0,0]),hsluv_Hsluv.lchToLuv(n,e),hsluv_Hsluv.luvToXyz(e,e),hsluv_Hsluv.xyzToRgb(e,e),e},hsluv_Hsluv.rgbToLch=function(n,e){return null==e&&(e=[0,0,0]),hsluv_Hsluv.rgbToXyz(n,e),hsluv_Hsluv.xyzToLuv(e,e),hsluv_Hsluv.luvToLch(e,e),e},hsluv_Hsluv.hsluvToRgb=function(n,e){return null==e&&(e=[0,0,0]),hsluv_Hsluv.hsluvToLch(n,e),hsluv_Hsluv.lchToRgb(e,e),e},hsluv_Hsluv.rgbToHsluv=function(n,e){return null==e&&(e=[0,0,0]),hsluv_Hsluv.rgbToLch(n,e),hsluv_Hsluv.lchToHsluv(e,e),e},hsluv_Hsluv.hpluvToRgb=function(n){return hsluv_Hsluv.lchToRgb(hsluv_Hsluv.hpluvToLch(n))},hsluv_Hsluv.rgbToHpluv=function(n){return hsluv_Hsluv.lchToHpluv(hsluv_Hsluv.rgbToLch(n))},hsluv_Hsluv.hsluvToHex=function(n){return hsluv_Hsluv.rgbToHex(hsluv_Hsluv.hsluvToRgb(n))},hsluv_Hsluv.hpluvToHex=function(n){return hsluv_Hsluv.rgbToHex(hsluv_Hsluv.hpluvToRgb(n))},hsluv_Hsluv.hexToHsluv=function(n){return hsluv_Hsluv.rgbToHsluv(hsluv_Hsluv.hexToRgb(n))},hsluv_Hsluv.hexToHpluv=function(n){return hsluv_Hsluv.rgbToHpluv(hsluv_Hsluv.hexToRgb(n))};var js_Boot=function(){};t["js.Boot"]=js_Boot,js_Boot.__name__="js.Boot",js_Boot.getClass=function(n){if(null==n)return null;if(n instanceof Array)return Array;var e=n.__class__;if(null!=e)return e;var t=js_Boot.__nativeClassName(n);return null!=t?js_Boot.__resolveNativeClass(t):null},js_Boot.__string_rec=function(n,e){if(null==n)return"null";if(e.length>=5)return"<...>";var t=typeof n;switch("function"==t&&(n.__name__||n.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(n.__enum__){var r=i[n.__enum__].__constructs__[n._hx_index],l=r._hx_name;return r.__params__?(e+="\t",l+"("+function(t){for(var i=[],l=0,s=r.__params__;l<s.length;){var a=s[l];l+=1,i.push(js_Boot.__string_rec(n[a],e))}return i}().join(",")+")"):l}if(n instanceof Array){var s="[";e+="\t";for(var a=0,o=n.length;a<o;){var p=a++;s+=(p>0?",":"")+js_Boot.__string_rec(n[p],e)}return s+="]"}var h;try{h=n.toString}catch(a){return"???"}if(null!=h&&h!=Object.toString&&"function"==typeof h){var u=n.toString();if("[object Object]"!=u)return u}s="{\n";e+="\t";var _=null!=n.hasOwnProperty,c=null;for(c in n)_&&!n.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=s.length&&(s+=", \n"),s+=e+c+" : "+js_Boot.__string_rec(n[c],e));return s+="\n"+(e=e.substring(1))+"}";case"string":return n;default:return String(n)}},js_Boot.__interfLoop=function(n,e){if(null==n)return!1;if(n==e)return!0;var t=n.__interfaces__;if(null!=t)for(var i=0,r=t.length;i<r;){var l=t[i++];if(l==e||js_Boot.__interfLoop(l,e))return!0}return js_Boot.__interfLoop(n.__super__,e)},js_Boot.__instanceof=function(n,e){if(null==e)return!1;switch(e){case Array:return n instanceof Array;case tn:return"boolean"==typeof n;case nn:return null!=n;case en:return"number"==typeof n;case J:return"number"==typeof n&&(0|n)===n;case String:return"string"==typeof n;default:if(null==n)return!1;if("function"==typeof e){if(js_Boot.__downcastCheck(n,e))return!0}else if("object"==typeof e&&js_Boot.__isNativeObj(e)&&n instanceof e)return!0;return e==rn&&null!=n.__name__||(e==ln&&null!=n.__ename__||null!=n.__enum__&&i[n.__enum__]==e)}},js_Boot.__downcastCheck=function(n,e){return n instanceof e||!!e.__isInterface__&&js_Boot.__interfLoop(js_Boot.getClass(n),e)},js_Boot.__nativeClassName=function(n){var e=js_Boot.__toStr.call(n).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},js_Boot.__isNativeObj=function(n){return null!=js_Boot.__nativeClassName(n)},js_Boot.__resolveNativeClass=function(e){return n[e]};var js_html__$CanvasElement_CanvasUtil=function(){};t["js.html._CanvasElement.CanvasUtil"]=js_html__$CanvasElement_CanvasUtil,js_html__$CanvasElement_CanvasUtil.__name__="js.html._CanvasElement.CanvasUtil",js_html__$CanvasElement_CanvasUtil.getContextWebGL=function(n,e){var t="webgl";if(null!=(i=n.getContext(t,e)))return i;var i;t="experimental-webgl";return null!=(i=n.getContext(t,e))?i:null};var ld49_Background=function(){this.bgTransform=new ceramic_Transform,this.allShapes=[];var n=.2;null==n&&(n=.5);var e=-59*n+59|0,t=-24*n+24|0,i=-95*n+95|0,r=p._new();r&=65535,r|=(e>255?255:e<0?0:e)<<16,r&=16711935,r|=(t>255?255:t<0?0:t)<<8,r&=16776960,r|=i>255?255:i<0?0:i,this.itemColor=r,ceramic_Layer.call(this),this.flags&=-17,this.color=2754884};t["ld49.Background"]=ld49_Background,ld49_Background.__name__="ld49.Background",ld49_Background.__super__=ceramic_Layer,ld49_Background.prototype=$extend(ceramic_Layer.prototype,{update:function(n){this.bgTransform.tx=(this.bgTransform.tx+20*n)%48,this.bgTransform.ty=(this.bgTransform.ty+20*n)%48,this.bgTransform.changedDirty=!0},createShapes:function(){for(;this.allShapes.length>0;)this.allShapes.pop().destroy();for(var n=-48;n<=this.get_height()+48;){for(var e=-48;e<=this.get_width()+48;){var t=new ceramic_Quad;t.set_width(48),t.set_height(48),t.set_rotation(45),t.color=this.itemColor,t.set_anchorX(.5),t.set_anchorY(.5),t.set_x(e),t.set_y(n),t.set_scaleX(.75),t.set_scaleY(.75),t.set_transform(this.bgTransform),this.add(t),e+=48}n+=48}},__class__:ld49_Background});var ld49_Floating=function(n,e,t){null==t&&(t=2),null==e&&(e=11),null==n&&(n=8),this.initializerName=null,ceramic_Entity.call(this),this.amplitude=n,this.rotation=e,this.duration=t};t["ld49.Floating"]=ld49_Floating,ld49_Floating.__name__="ld49.Floating",ld49_Floating.__interfaces__=[ceramic_Component],ld49_Floating.__super__=ceramic_Entity,ld49_Floating.prototype=$extend(ceramic_Entity.prototype,{bindAsComponent:function(){var n=this;this.entity.set_transform(new ceramic_Transform),this.tween(h.SINE_EASE_OUT,.5*this.duration,0,-1,(function(e,t){n.applyRotation(e)})).onComplete(this,(function(){n.loopRotation()})),this.tween(h.SINE_EASE_OUT,.25*this.duration,0,-1,(function(e,t){n.applyY(e)})).onComplete(this,(function(){n.loopY()}))},loopY:function(){var n=this;this.tween(h.SINE_EASE_IN_OUT,.5*this.duration,-1,1,(function(e,t){n.applyY(e)})).onComplete(this,(function(){n.tween(h.SINE_EASE_IN_OUT,.5*n.duration,1,-1,(function(e,t){n.applyY(e)})).onComplete(n,(function(){n.loopY()}))}))},applyY:function(n){this.entity.transform.ty=n*this.amplitude,this.entity.transform.changedDirty=!0},loopRotation:function(){var n=this;this.tween(h.SINE_EASE_IN_OUT,this.duration,-1,1,(function(e,t){n.applyRotation(e)})).onComplete(this,(function(){n.tween(h.SINE_EASE_IN_OUT,n.duration,1,-1,(function(e,t){n.applyRotation(e)})).onComplete(n,(function(){n.loopRotation()}))}))},applyRotation:function(n){this.entity.set_rotation(n*this.rotation)},setEntity:function(n){this.entity=n instanceof ceramic_Visual?n:null},getEntity:function(){return this.entity},__class__:ld49_Floating});var H=i["ld49.GameState"]={__ename__:"ld49.GameState",__constructs__:null,TITLE:{_hx_name:"TITLE",_hx_index:0,__enum__:"ld49.GameState",toString:$estr},PLAY:{_hx_name:"PLAY",_hx_index:1,__enum__:"ld49.GameState",toString:$estr},GAME_OVER:{_hx_name:"GAME_OVER",_hx_index:2,__enum__:"ld49.GameState",toString:$estr}};H.__constructs__=[H.TITLE,H.PLAY,H.GAME_OVER];var ld49_MainScene=function(){this.aColor=16695904,this.musicPlaying=!1,this.floating=null,this.score=0,this.colors=[65280,16776960,16711680,16761035],this.shapeConfigs=[[1,0,16695904],[1,1,16695904],[2,0,16695904],[2,1,16695904],[4,0,16695904],[4,1,16695904],[4,2,16561718],[3,2,16561718],[3,3,16561718],[4,3,16561718]],this.teethCollisionType=new nape_callbacks_CbType,this.ySpeed=400,this.xSpeed=200,this.mainShape=null,this.allShapes=[],ceramic_Scene.call(this),this.set_machine(new ceramic_StateMachine_$GameState_$MainScene)};t["ld49.MainScene"]=ld49_MainScene,ld49_MainScene.__name__="ld49.MainScene",ld49_MainScene.__super__=ceramic_Scene,ld49_MainScene.prototype=$extend(ceramic_Scene.prototype,{set_machine:function(n){return this.machine==n?this.machine:(null!=this.machine&&this.machine.destroy(),this.machine=n,null!=this.machine?(this.component("machine",this.machine),this.machine):(this.removeComponent("machine"),null))},preload:function(){this.get_assets().add(assets_Fonts.ROBOTO_BOLD),this.get_assets().add(assets_Sounds.ITWILLFALL_MUSIC)},create:function(){if(this.clip!=this&&(this.clip=this,this.clipDirty=!0,null!=this.children))for(var n=0,e=this.children.length;n<e;){var t=n++,i=this.children[t];if(i.clipDirty=!0,null!=i.children)for(var r=0,l=i.children.length;r<l;){var s=r++;i.children[s].set_clipDirty(!0)}}null==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var a=zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN;null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1);var o=new nape_callbacks_InteractionListener(a,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,this.teethCollisionType,this.teethCollisionType,$bind(this,this.teethCollision));(p=ceramic_App.app.nape.space.zpp_inner.wrap_listeners).zpp_inner.reverse_flag?p.push(o):p.unshift(o),this.background=new ld49_Background;var p=this.background,h=this.get_width(),u=this.get_height();p.set_width(h),p.set_height(u);p=this.background;var _=.5*this.get_width(),c=.5*this.get_height();p.set_x(_),p.set_y(c),(p=this.background).set_anchorX(.5),p.set_anchorY(.5),this.background.createShapes(),this.background.set_depth(1),this.add(this.background),this.copyrightText=new ceramic_Text,this.copyrightText.set_pointSize(10),(p=this.copyrightText).set_anchorX(.5),p.set_anchorY(1),this.copyrightText.set_depth(20),this.copyrightText.set_align(y.CENTER),this.copyrightText.set_content("JAM GAME CREATED IN 48 HOURS 24 HOURS BY JRMY FAIVRE\ndidn't have much time this WE :')");p=this.copyrightText,_=.5*this.get_width(),c=this.get_height()-15;p.set_x(_),p.set_y(c),this.add(this.copyrightText);var d=new ceramic_Quad;d.set_width(50),d.set_height(1),d.set_anchorX(0),d.set_anchorY(.5),d.set_x(110),d.set_y(5),this.copyrightText.add(d),this.machine.set_state(H.TITLE)},update:function(n){this.background.update(n)},TITLE_enter:function(){var n=this;haxe_Log.trace("press SPACE to start",{fileName:"/Users/jeremyfa/Developer/ld49/src/ld49/MainScene.hx",lineNumber:138,className:"ld49.MainScene",methodName:"TITLE_enter"}),null!=this.mainTitleText&&this.mainTitleText.destroy(),null!=this.mainTitleTextShadow&&this.mainTitleTextShadow.destroy(),this.mainTitleText=new ceramic_Text,this.mainTitleText.set_align(y.CENTER),(e=this.mainTitleText).set_anchorX(.5),e.set_anchorY(.5),this.mainTitleText.set_pointSize(80),this.mainTitleText.set_active(!1),this.mainTitleText.set_depth(20),this.mainTitleText.set_font(this.get_assets().font(assets_Fonts.ROBOTO_BOLD)),this.add(this.mainTitleText),this.mainTitleTextShadow=new ceramic_Text,this.mainTitleTextShadow.set_align(y.CENTER),(e=this.mainTitleTextShadow).set_anchorX(.5),e.set_anchorY(.5),this.mainTitleTextShadow.set_pointSize(80),this.mainTitleTextShadow.set_active(!1),this.mainTitleTextShadow.set_depth(19.9),this.mainTitleTextShadow.set_font(this.get_assets().font(assets_Fonts.ROBOTO_BOLD)),this.mainTitleTextShadow.set_color(0),this.mainTitleTextShadow.set_alpha(.5),this.add(this.mainTitleTextShadow),this.mainTitleText.set_active(!0);var e=this.mainTitleText,t=.5*this.get_width(),i=.4*this.get_height();e.set_x(t),e.set_y(i),this.mainTitleText.set_content("IT WILL FALL"),this.mainTitleTextShadow.set_active(!0);e=this.mainTitleTextShadow,t=.5*this.get_width(),i=.4*this.get_height()+8;e.set_x(t),e.set_y(i),this.mainTitleTextShadow.set_content("IT WILL FALL"),this.mainTitleText.component(null,new ld49_Floating),this.mainTitleTextShadow.component(null,new ld49_Floating),this.descText=new ceramic_Text,this.descText.set_align(y.CENTER),(e=this.descText).set_anchorX(.5),e.set_anchorY(.5),this.descText.set_pointSize(20),this.descText.set_depth(20),this.add(this.descText);e=this.descText,t=.5*this.get_width(),i=.7*this.get_height();e.set_x(t),e.set_y(i),this.descText.set_content("PRESS SPACE TO START GAME"),ceramic_Timer.schedule(this.descText,.5,(function(){n.descText.set_visible(!n.descText.visible)}),.5),this.add(this.descText)},TITLE_update:function(n){var e=this;ceramic_App.app.input._keyJustPressed(32)&&(this.machine.set_state(H.PLAY),this.musicPlaying||(this.musicPlaying=!0,ceramic_App.app.backend.audio.resumeAudioContext((function(n){e.get_assets().sound(assets_Sounds.ITWILLFALL_MUSIC).play(0,!0)}))))},TITLE_exit:function(){null!=this.mainTitleText&&this.mainTitleText.destroy(),null!=this.mainTitleTextShadow&&this.mainTitleTextShadow.destroy(),null!=this.descText&&this.descText.destroy()},cleanPreviousGame:function(){for(null!=this.pillar&&(this.pillar.destroy(),this.pillar=null),null!=this.platform&&(this.platform.destroy(),this.platform=null);this.allShapes.length>0;)this.allShapes.pop().destroy();this.mainShape=null},PLAY_enter:function(){ceramic_App.app.logger.info("PLAY!",{fileName:"/Users/jeremyfa/Developer/ld49/src/ld49/MainScene.hx",lineNumber:247,className:"ld49.MainScene",methodName:"PLAY_enter"}),this.cleanPreviousGame(),this.score=0,this.addScore(0),this.copyrightText.set_active(!1),this.pillar=new ld49_PillarShape;var n=this.pillar,e=.5*this.get_width(),t=.9*this.get_height();n.set_x(e),n.set_y(t),this.pillar.set_depth(10),this.add(this.pillar),this.platform=new ld49_PlatformShape,this.platform.set_depthRange(-1);n=this.platform,e=.5*this.get_width(),t=this.pillar.y-.49*this.platform.get_height();if(n.set_x(e),n.set_y(t),this.platform.set_depth(10),this.add(this.platform),null==(n=ceramic_App.app.nape.space).zpp_inner.wrap_gravity&&n.zpp_inner.getgravity(),null!=(i=n.zpp_inner.wrap_gravity)&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((n=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=n._isimmutable&&n._isimmutable(),null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");(null!=(n=i.zpp_inner)._validate&&n._validate(),200!=i.zpp_inner.y)&&(i.zpp_inner.y=200,null!=(n=i.zpp_inner)._invalidate&&n._invalidate(n));if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(n=i.zpp_inner)._validate&&n._validate(),this.platform.initNapePhysics(d.DYNAMIC),this.pillar.initNapePhysics(d.STATIC),null==(n=this.platform.nape.body).zpp_inner_i.wrap_cbTypes&&n.zpp_inner_i.setupcbTypes();var i=n.zpp_inner_i.wrap_cbTypes,r=this.teethCollisionType;(i.zpp_inner.reverse_flag?i.push(r):i.unshift(r),null==this.scoreTitleText)&&(this.scoreTitleText=new ceramic_Text,this.scoreTitleText.set_color(16777215),this.scoreTitleText.set_pointSize(20),this.scoreTitleText.set_content("SCORE"),(n=this.scoreTitleText).set_anchorX(.5),n.set_anchorY(1),this.scoreTitleText.set_depth(20));null==this.scoreValueText&&(this.scoreValueText=new ceramic_Text,this.scoreValueText.set_color(16777215),this.scoreValueText.set_pointSize(32),this.scoreValueText.set_content(""+this.score),(n=this.scoreValueText).set_anchorX(.5),n.set_anchorY(0),this.scoreValueText.set_depth(20));this.platform.add(this.scoreTitleText),this.platform.add(this.scoreValueText),(n=this.scoreTitleText).set_scaleX(1),n.set_scaleY(1),(n=this.scoreValueText).set_scaleX(1),n.set_scaleY(1),(n=this.scoreTitleText).set_x(60),n.set_y(40),(n=this.scoreValueText).set_x(60),n.set_y(50),this.addShape()},PLAY_exit:function(){this.copyrightText.set_active(!0)},teethCollision:function(n){if(this.machine.get_state()==H.PLAY&&null!=this.mainShape){var e,t=!1,i=!1;if((null!=(e=n.zpp_inner.int1.outer_i).zpp_inner_i.ibody?e.zpp_inner_i.ibody.outer:null)==this.mainShape.nape.body)(null!=(e=n.zpp_inner.int2.outer_i).zpp_inner_i.ibody?e.zpp_inner_i.ibody.outer:null)==this.platform.nape.body&&(i=!0),t=!0;else if((null!=(e=n.zpp_inner.int2.outer_i).zpp_inner_i.ibody?e.zpp_inner_i.ibody.outer:null)==this.mainShape.nape.body)(null!=(e=n.zpp_inner.int1.outer_i).zpp_inner_i.ibody?e.zpp_inner_i.ibody.outer:null)==this.platform.nape.body&&(i=!0),t=!0;t&&(this.updatePointFromPlatform(),Math.abs(this.mainShape.x-ld49_MainScene._point.x)<16&&Math.abs(this.mainShape.y-ld49_MainScene._point.y)<16&&!i?(this.mainShape=null,this.machine.set_state(H.GAME_OVER)):(this.addScore(this.mainShape.steps+Math.round(this.mainShape.thickness/16)+this.allShapes.length),this.mainShape=null,this.addShape()))}},addScore:function(n){if(this.score+=n,null!=this.scoreValueText){this.scoreValueText.set_content(""+this.score);var e=this.scoreValueText;e.set_scaleX(1.25),e.set_scaleY(1.25),ceramic_VisualTransition.transition(this.scoreValueText,null,.2,(function(n){g.scale(n,1)}))}},updatePointFromPlatform:function(){this.platform.visualToScreen(.5*this.platform.get_width(),60,ld49_MainScene._point),this.screenToVisual(ld49_MainScene._point.x,ld49_MainScene._point.y,ld49_MainScene._point)},addShape:function(){var n=this.shapeConfigs,e=n[Math.floor(.99999*Math.random()*n.length)],t=e[0],i=e[1],r=e[2];this.updatePointFromPlatform();var l=new ld49_TeethShape(t,32,16,16*i);l.set_depth(10),this.allShapes.push(l),this.mainShape=l;var s=ld49_MainScene._point.y;l.set_x(ld49_MainScene._point.x),l.set_y(s),this.add(l),l.set_color(r),l.initNapePhysics(d.DYNAMIC);var a=l.nape.body;null==a.zpp_inner_i.wrap_cbTypes&&a.zpp_inner_i.setupcbTypes();var o=a.zpp_inner_i.wrap_cbTypes,p=this.teethCollisionType;o.zpp_inner.reverse_flag?o.push(p):o.unshift(p)},PLAY_update:function(n){if(this.platform.y>2*this.get_height()&&this.machine.set_state(H.GAME_OVER),null!=this.mainShape){if(ceramic_App.app.input._keyPressed(1073741903)&&!ceramic_App.app.input._keyPressed(1073741904)){null==(l=this.mainShape.nape.body).zpp_inner.wrap_vel&&l.zpp_inner.setupVelocity();var e=l.zpp_inner.wrap_vel,t=this.xSpeed;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),e.zpp_inner.x!=t){if(t!=t)throw haxe_Exception.thrown("Error: Vec2::x cannot be NaN");e.zpp_inner.x=t,null!=(l=e.zpp_inner)._invalidate&&l._invalidate(l)}if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}else if(ceramic_App.app.input._keyPressed(1073741904)&&!ceramic_App.app.input._keyPressed(1073741903)){null==(l=this.mainShape.nape.body).zpp_inner.wrap_vel&&l.zpp_inner.setupVelocity();e=l.zpp_inner.wrap_vel,t=-this.xSpeed;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),e.zpp_inner.x!=t){if(t!=t)throw haxe_Exception.thrown("Error: Vec2::x cannot be NaN");e.zpp_inner.x=t,null!=(l=e.zpp_inner)._invalidate&&l._invalidate(l)}if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}else{if(null==(l=this.mainShape.nape.body).zpp_inner.wrap_vel&&l.zpp_inner.setupVelocity(),null!=(e=l.zpp_inner.wrap_vel)&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),0!=e.zpp_inner.x)e.zpp_inner.x=0,null!=(l=e.zpp_inner)._invalidate&&l._invalidate(l);if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}if(ceramic_App.app.input._keyPressed(1073741905)){null==(l=this.mainShape.nape.body).zpp_inner.wrap_vel&&l.zpp_inner.setupVelocity();e=l.zpp_inner.wrap_vel;null==(l=this.mainShape.nape.body).zpp_inner.wrap_vel&&l.zpp_inner.setupVelocity();var i=l.zpp_inner.wrap_vel;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=i.zpp_inner)._validate&&l._validate();var r=Math.max(i.zpp_inner.y,this.ySpeed);if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),e.zpp_inner.y!=r){if(r!=r)throw haxe_Exception.thrown("Error: Vec2::y cannot be NaN");var l;e.zpp_inner.y=r,null!=(l=e.zpp_inner)._invalidate&&l._invalidate(l)}if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}}for(var s=null,a=0,o=this.allShapes.length;a<o;){var p=a++,h=this.allShapes[p];h!=this.mainShape&&h.y>1.25*this.get_height()&&(null==s&&(s=[]),s.push(h),this.allShapes[p]=null)}if(null!=s){ceramic_Extensions.removeNullElements(this.allShapes);for(a=0,o=s.length;a<o;){s[p=a++].destroy()}}},GAME_OVER_enter:function(){var n=this;if(ceramic_App.app.logger.info("GAME OVER",{fileName:"/Users/jeremyfa/Developer/ld49/src/ld49/MainScene.hx",lineNumber:454,className:"ld49.MainScene",methodName:"GAME_OVER_enter"}),null!=this.mainShape){var e;if(null==(t=this.mainShape.nape.body).zpp_inner.wrap_vel&&t.zpp_inner.setupVelocity(),null!=(e=t.zpp_inner.wrap_vel)&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((t=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(t=e.zpp_inner)._validate&&t._validate(),0!=e.zpp_inner.x)e.zpp_inner.x=0,null!=(t=e.zpp_inner)._invalidate&&t._invalidate(t);if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(t=e.zpp_inner)._validate&&t._validate(),null==(t=this.mainShape.nape.body).zpp_inner.wrap_vel&&t.zpp_inner.setupVelocity(),null!=(e=t.zpp_inner.wrap_vel)&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((t=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(t=e.zpp_inner)._validate&&t._validate(),0!=e.zpp_inner.y)e.zpp_inner.y=0,null!=(t=e.zpp_inner)._invalidate&&t._invalidate(t);if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=e.zpp_inner)._validate&&t._validate()}haxe_Log.trace("press SPACE to try again",{fileName:"/Users/jeremyfa/Developer/ld49/src/ld49/MainScene.hx",lineNumber:459,className:"ld49.MainScene",methodName:"GAME_OVER_enter"}),this.add(this.scoreTitleText),this.add(this.scoreValueText);var t=this.scoreTitleText,i=.5*this.get_width(),r=.46*this.get_height();t.set_x(i),t.set_y(r);t=this.scoreValueText,i=.5*this.get_width(),r=.46*this.get_height()+10;t.set_x(i),t.set_y(r),(t=this.scoreTitleText).set_scaleX(2),t.set_scaleY(2),(t=this.scoreTitleText).set_scaleX(2.5),t.set_scaleY(2.5),ceramic_VisualTransition.transition(this.scoreTitleText,null,.2,(function(e){var t=n.scoreTitleText;t.set_scaleX(2),t.set_scaleY(2)})),(t=this.scoreValueText).set_scaleX(2.5),t.set_scaleY(2.5),ceramic_VisualTransition.transition(this.scoreValueText,null,.2,(function(n){g.scale(n,2)})),this.descText=new ceramic_Text,this.descText.set_align(y.CENTER),(t=this.descText).set_anchorX(.5),t.set_anchorY(.5),this.descText.set_pointSize(20),this.descText.set_depth(20),this.add(this.descText);t=this.descText,i=.5*this.get_width(),r=.7*this.get_height();t.set_x(i),t.set_y(r),this.descText.set_content("PRESS SPACE TO TRY AGAIN"),ceramic_Timer.schedule(this.descText,.5,(function(){n.descText.set_visible(!n.descText.visible)}),.5),this.add(this.descText)},GAME_OVER_update:function(n){ceramic_App.app.input._keyJustPressed(32)&&this.machine.set_state(H.PLAY)},GAME_OVER_exit:function(){null!=this.descText&&(this.descText.destroy(),this.descText=null)},resize:function(n,e){},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this._lifecycleState=-1,ceramic_Scene.prototype.destroy.call(this))},__class__:ld49_MainScene,__properties__:$extend(ceramic_Scene.prototype.__properties__,{set_machine:"set_machine"})});var ld49_PillarShape=function(n,e){null==e&&(e=32),null==n&&(n=32),ceramic_Quad.call(this),this.color=10560872,this.set_anchorX(.5),this.set_anchorY(0),this.set_width(n),this.set_height(e);var t=new ceramic_Quad,i=.25;null==i&&(i=.5);var r=-161*i+161|0,l=-37*i+37|0,s=-104*i+104|0,a=p._new();a&=65535,a|=(r>255?255:r<0?0:r)<<16,a&=16711935,a|=(l>255?255:l<0?0:l)<<8,a&=16776960,a|=s>255?255:s<0?0:s,t.color=a,t.set_depth(1),t.set_width(.5*this.get_width()),t.set_height(.5*e),t.set_anchorX(.5),t.set_anchorY(.5),t.set_x(.5*this.get_width()),t.set_y(.5*e),t.set_rotation(45),this.add(t)};t["ld49.PillarShape"]=ld49_PillarShape,ld49_PillarShape.__name__="ld49.PillarShape",ld49_PillarShape.__super__=ceramic_Quad,ld49_PillarShape.prototype=$extend(ceramic_Quad.prototype,{__class__:ld49_PillarShape});var ld49_PlatformShape=function(n,e,t,i,r,l){null==l&&(l=5),null==r&&(r=600),null==i&&(i=24),null==t&&(t=16),null==e&&(e=32),null==n&&(n=24),ceramic_Shape.call(this),this.set_anchorX(.5),this.set_anchorY(.5),this.set_color(16777215),this.steps=n,this.stepSize=e,this.teeth=t,this.thickness=i,this.walls=r,this.wallThickness=l;var s=[],a=0;s[a++]=0,s[a++]=0,s[a++]=l,s[a++]=0;for(var o=0,p=n;o<p;){var h=o++;s[a++]=l+h*e,s[a++]=r,s[a++]=l+h*e+.5*e,s[a++]=r+t}s[a++]=l+n*e,s[a++]=r,s[a++]=l+n*e,s[a++]=0,s[a++]=l+n*e+l,s[a++]=0,s[a++]=l+n*e+l,s[a++]=r+t+i,s[a++]=0,s[a++]=r+t+i,this.vertices=s,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0;var u=new ceramic_Quad;u.color=16777215,u.set_width(this.get_width()),u.set_height(5),u.set_depth(10),u.set_anchorX(0),u.set_anchorY(1),this.add(u)};t["ld49.PlatformShape"]=ld49_PlatformShape,ld49_PlatformShape.__name__="ld49.PlatformShape",ld49_PlatformShape.__super__=ceramic_Shape,ld49_PlatformShape.prototype=$extend(ceramic_Shape.prototype,{initNapePhysics:function(n,e,t,i,r){var l=this;if(null!=this.nape&&(this.nape.destroy(),this.set_nape(null)),this.contentDirty&&this.computeContent(),null==t&&(null==i||0==i.length)){i=[];var s=0;(b=[])[s++]=0,b[s++]=0,b[s++]=this.wallThickness,b[s++]=0,b[s++]=this.wallThickness,b[s++]=this.walls+this.teeth+this.thickness,b[s++]=0,b[s++]=this.walls+this.teeth+this.thickness;for(var a=new nape_geom_Vec2List,o=b.length,p=0,h=.5*l.get_width(),u=.5*l.get_height();p<o-1;){var _=p+1,c=b[p]-h;if(null==(y=b[_]-u)&&(y=0),null==c&&(c=0),null==(g=!0)&&(g=!1),null==(m=y)&&(m=0),null==(v=c)&&(v=0),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?z=new nape_geom_Vec2:(z=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=z.zpp_pool,z.zpp_pool=null,z.zpp_disp=!1,z==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==z.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=v,w.y=m,z.zpp_inner=w,z.zpp_inner.outer=z}else{if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=z.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=z.zpp_inner)._validate&&E._validate(),z.zpp_inner.x==v){if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(M=z.zpp_inner)._validate&&M._validate(),C=z.zpp_inner.y==m}else C=!1;if(!C)z.zpp_inner.x=v,z.zpp_inner.y=m,null!=(U=z.zpp_inner)._invalidate&&U._invalidate(U)}z.zpp_inner.weak=g,a.push(z),p+=2}t=new nape_shape_Polygon(a),i.push(t);s=0;(b=[])[s++]=this.wallThickness,b[s++]=this.walls,b[s++]=this.wallThickness+.5*this.stepSize,b[s++]=this.walls+this.teeth,b[s++]=this.wallThickness+.5*this.stepSize,b[s++]=this.walls+this.teeth+this.thickness,b[s++]=this.wallThickness,b[s++]=this.walls+this.teeth+this.thickness;for(a=new nape_geom_Vec2List,o=b.length,p=0,h=.5*l.get_width(),u=.5*l.get_height();p<o-1;){_=p+1,c=b[p]-h;if(null==(y=b[_]-u)&&(y=0),null==c&&(c=0),null==(g=!0)&&(g=!1),null==(m=y)&&(m=0),null==(v=c)&&(v=0),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?z=new nape_geom_Vec2:(z=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=z.zpp_pool,z.zpp_pool=null,z.zpp_disp=!1,z==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==z.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=v,w.y=m,z.zpp_inner=w,z.zpp_inner.outer=z}else{if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=z.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=z.zpp_inner)._validate&&E._validate(),z.zpp_inner.x==v){if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(M=z.zpp_inner)._validate&&M._validate(),C=z.zpp_inner.y==m}else C=!1;if(!C)z.zpp_inner.x=v,z.zpp_inner.y=m,null!=(U=z.zpp_inner)._invalidate&&U._invalidate(U)}z.zpp_inner.weak=g,a.push(z),p+=2}t=new nape_shape_Polygon(a),i.push(t);for(var d=0,f=this.steps-1;d<f;){var x=d++;s=0;(b=[])[s++]=this.wallThickness+x*this.stepSize+.5*this.stepSize,b[s++]=this.walls+this.teeth,b[s++]=this.wallThickness+x*this.stepSize+this.stepSize,b[s++]=this.walls,b[s++]=this.wallThickness+x*this.stepSize+1.5*this.stepSize,b[s++]=this.walls+this.teeth,b[s++]=this.wallThickness+x*this.stepSize+1.5*this.stepSize,b[s++]=this.walls+this.teeth+this.thickness,b[s++]=this.wallThickness+x*this.stepSize+.5*this.stepSize,b[s++]=this.walls+this.teeth+this.thickness;for(a=new nape_geom_Vec2List,o=b.length,p=0,h=.5*l.get_width(),u=.5*l.get_height();p<o-1;){_=p+1,c=b[p]-h;if(null==(y=b[_]-u)&&(y=0),null==c&&(c=0),null==(g=!0)&&(g=!1),null==(m=y)&&(m=0),null==(v=c)&&(v=0),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?z=new nape_geom_Vec2:(z=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=z.zpp_pool,z.zpp_pool=null,z.zpp_disp=!1,z==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==z.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=v,w.y=m,z.zpp_inner=w,z.zpp_inner.outer=z}else{if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=z.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=z.zpp_inner)._validate&&E._validate(),z.zpp_inner.x==v){if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(M=z.zpp_inner)._validate&&M._validate(),C=z.zpp_inner.y==m}else C=!1;if(!C)z.zpp_inner.x=v,z.zpp_inner.y=m,null!=(U=z.zpp_inner)._invalidate&&U._invalidate(U)}z.zpp_inner.weak=g,a.push(z),p+=2}t=new nape_shape_Polygon(a),i.push(t)}s=0;(b=[])[s++]=this.wallThickness+this.steps*this.stepSize-.5*this.stepSize,b[s++]=this.walls+this.teeth,b[s++]=this.wallThickness+this.steps*this.stepSize,b[s++]=this.walls,b[s++]=this.wallThickness+this.steps*this.stepSize,b[s++]=this.walls+this.teeth+this.thickness,b[s++]=this.wallThickness+this.steps*this.stepSize-.5*this.stepSize,b[s++]=this.walls+this.teeth+this.thickness;for(a=new nape_geom_Vec2List,o=b.length,p=0,h=.5*l.get_width(),u=.5*l.get_height();p<o-1;){_=p+1,c=b[p]-h;if(null==(y=b[_]-u)&&(y=0),null==c&&(c=0),null==(g=!0)&&(g=!1),null==(m=y)&&(m=0),null==(v=c)&&(v=0),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?z=new nape_geom_Vec2:(z=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=z.zpp_pool,z.zpp_pool=null,z.zpp_disp=!1,z==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==z.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=v,w.y=m,z.zpp_inner=w,z.zpp_inner.outer=z}else{if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=z.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=z.zpp_inner)._validate&&E._validate(),z.zpp_inner.x==v){if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(M=z.zpp_inner)._validate&&M._validate(),C=z.zpp_inner.y==m}else C=!1;if(!C)z.zpp_inner.x=v,z.zpp_inner.y=m,null!=(U=z.zpp_inner)._invalidate&&U._invalidate(U)}z.zpp_inner.weak=g,a.push(z),p+=2}t=new nape_shape_Polygon(a),i.push(t);var b;s=0;(b=[])[s++]=this.wallThickness+this.steps*this.stepSize,b[s++]=0,b[s++]=this.wallThickness+this.steps*this.stepSize+this.wallThickness,b[s++]=0,b[s++]=this.wallThickness+this.steps*this.stepSize+this.wallThickness,b[s++]=this.walls+this.teeth+this.thickness,b[s++]=this.wallThickness+this.steps*this.stepSize,b[s++]=this.walls+this.teeth+this.thickness;for(a=new nape_geom_Vec2List,o=b.length,p=0,h=.5*l.get_width(),u=.5*l.get_height();p<o-1;){var y,v,m,g,z;_=p+1,c=b[p]-h;if(null==(y=b[_]-u)&&(y=0),null==c&&(c=0),null==(g=!0)&&(g=!1),null==(m=y)&&(m=0),null==(v=c)&&(v=0),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?z=new nape_geom_Vec2:(z=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=z.zpp_pool,z.zpp_pool=null,z.zpp_disp=!1,z==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==z.zpp_inner){var w;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=v,w.y=m,z.zpp_inner=w,z.zpp_inner.outer=z}else{if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var O,C,E,U;if((O=z.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=z.zpp_inner)._validate&&E._validate(),z.zpp_inner.x==v){if(null!=z&&z.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var M;null!=(M=z.zpp_inner)._validate&&M._validate(),C=z.zpp_inner.y==m}else C=!1;if(!C)z.zpp_inner.x=v,z.zpp_inner.y=m,null!=(U=z.zpp_inner)._invalidate&&U._invalidate(U)}z.zpp_inner.weak=g,a.push(z),p+=2}t=new nape_shape_Polygon(a),i.push(t)}return 0!=(r=nape_phys_Material.steel()).zpp_inner.elasticity&&(r.zpp_inner.elasticity=0,r.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)),ceramic_Shape.prototype.initNapePhysics.call(this,n,e,t,i,r)},__class__:ld49_PlatformShape});var nape_phys_Material=function(n,e,t,i,r){if(null==r&&(r=.001),null==i&&(i=1),null==t&&(t=2),null==e&&(e=1),null==n&&(n=0),this.zpp_inner=null,null==zpp_$nape_phys_ZPP_$Material.zpp_pool?this.zpp_inner=new zpp_$nape_phys_ZPP_$Material:(this.zpp_inner=zpp_$nape_phys_ZPP_$Material.zpp_pool,zpp_$nape_phys_ZPP_$Material.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),this.zpp_inner.outer=this,n!=this.zpp_inner.elasticity){if(n!=n)throw haxe_Exception.thrown("Error: Material::elasticity cannot be NaN");this.zpp_inner.elasticity=n/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(e!=this.zpp_inner.dynamicFriction){if(e!=e)throw haxe_Exception.thrown("Error: Material::dynamicFriction cannot be NaN");if(e<0)throw haxe_Exception.thrown("Error: Material::dynamicFriction cannot be negative");this.zpp_inner.dynamicFriction=e/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ANGDRAG|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(t!=this.zpp_inner.staticFriction){if(t!=t)throw haxe_Exception.thrown("Error: Material::staticFriction cannot be NaN");if(t<0)throw haxe_Exception.thrown("Error: Material::staticFriction cannot be negative");this.zpp_inner.staticFriction=t/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(i!=1e3*this.zpp_inner.density){if(i!=i)throw haxe_Exception.thrown("Error: Material::density cannot be NaN");if(i<0)throw haxe_Exception.thrown("Error: Material::density must be positive");if(i<0)throw haxe_Exception.thrown("Error: Material::density cannot be negative");this.zpp_inner.density=i/1e3,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.PROPS)}if(r!=this.zpp_inner.rollingFriction){if(r!=r)throw haxe_Exception.thrown("Error: Material::rollingFriction cannot be NaN");if(r<0)throw haxe_Exception.thrown("Error: Material::rollingFriction cannot be negative");this.zpp_inner.rollingFriction=r/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}};t["nape.phys.Material"]=nape_phys_Material,nape_phys_Material.__name__="nape.phys.Material",nape_phys_Material.wood=function(){return new nape_phys_Material(.4,.2,.38,.7,.005)},nape_phys_Material.steel=function(){return new nape_phys_Material(.2,.57,.74,7.8,.001)},nape_phys_Material.ice=function(){return new nape_phys_Material(.3,.03,.1,.9,1e-4)},nape_phys_Material.rubber=function(){return new nape_phys_Material(.8,1,1.4,1.5,.01)},nape_phys_Material.glass=function(){return new nape_phys_Material(.4,.4,.94,2.6,.002)},nape_phys_Material.sand=function(){return new nape_phys_Material(-1,.45,.6,1.6,16)},nape_phys_Material.prototype={get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_shapes:function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=zpp_$nape_util_ZPP_$ShapeList.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},copy:function(){var n=new nape_phys_Material(this.zpp_inner.elasticity,this.zpp_inner.dynamicFriction,this.zpp_inner.staticFriction,1e3*this.zpp_inner.density,this.zpp_inner.rollingFriction);return null!=this.zpp_inner.userData&&(n.zpp_inner.userData=Reflect.copy(this.zpp_inner.userData)),n},get_elasticity:function(){return this.zpp_inner.elasticity},set_elasticity:function(n){if(n!=this.zpp_inner.elasticity){if(n!=n)throw haxe_Exception.thrown("Error: Material::elasticity cannot be NaN");this.zpp_inner.elasticity=n/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}return this.zpp_inner.elasticity},get_dynamicFriction:function(){return this.zpp_inner.dynamicFriction},set_dynamicFriction:function(n){if(n!=this.zpp_inner.dynamicFriction){if(n!=n)throw haxe_Exception.thrown("Error: Material::dynamicFriction cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: Material::dynamicFriction cannot be negative");this.zpp_inner.dynamicFriction=n/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ANGDRAG|zpp_$nape_phys_ZPP_$Material.ARBITERS)}return this.zpp_inner.dynamicFriction},get_staticFriction:function(){return this.zpp_inner.staticFriction},set_staticFriction:function(n){if(n!=this.zpp_inner.staticFriction){if(n!=n)throw haxe_Exception.thrown("Error: Material::staticFriction cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: Material::staticFriction cannot be negative");this.zpp_inner.staticFriction=n/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}return this.zpp_inner.staticFriction},get_density:function(){return 1e3*this.zpp_inner.density},set_density:function(n){if(n!=1e3*this.zpp_inner.density){if(n!=n)throw haxe_Exception.thrown("Error: Material::density cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: Material::density must be positive");if(n<0)throw haxe_Exception.thrown("Error: Material::density cannot be negative");this.zpp_inner.density=n/1e3,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.PROPS)}return 1e3*this.zpp_inner.density},get_rollingFriction:function(){return this.zpp_inner.rollingFriction},set_rollingFriction:function(n){if(n!=this.zpp_inner.rollingFriction){if(n!=n)throw haxe_Exception.thrown("Error: Material::rollingFriction cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: Material::rollingFriction cannot be negative");this.zpp_inner.rollingFriction=n/1,this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}return this.zpp_inner.rollingFriction},toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1e3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:nape_phys_Material,__properties__:{set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_density:"set_density",get_density:"get_density",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",get_dynamicFriction:"get_dynamicFriction",set_elasticity:"set_elasticity",get_elasticity:"get_elasticity",get_shapes:"get_shapes",get_userData:"get_userData"}};var zpp_$nape_phys_ZPP_$Material=function(){this.rollingFriction=0,this.elasticity=0,this.density=0,this.staticFriction=0,this.dynamicFriction=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape,this.elasticity=0,this.dynamicFriction=1,this.staticFriction=2,this.density=.001,this.rollingFriction=.01};t["zpp_nape.phys.ZPP_Material"]=zpp_$nape_phys_ZPP_$Material,zpp_$nape_phys_ZPP_$Material.__name__="zpp_nape.phys.ZPP_Material",zpp_$nape_phys_ZPP_$Material.prototype={wrapper:function(){if(null==this.outer){this.outer=new nape_phys_Material;var n=this.outer.zpp_inner;n.outer=null,n.next=zpp_$nape_phys_ZPP_$Material.zpp_pool,zpp_$nape_phys_ZPP_$Material.zpp_pool=n,this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},feature_cons:function(){this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape},addShape:function(n){this.shapes.add(n)},remShape:function(n){this.shapes.remove(n)},copy:function(){var n=new zpp_$nape_phys_ZPP_$Material;return n.dynamicFriction=this.dynamicFriction,n.staticFriction=this.staticFriction,n.density=this.density,n.elasticity=this.elasticity,n.rollingFriction=this.rollingFriction,n},set:function(n){this.dynamicFriction=n.dynamicFriction,this.staticFriction=n.staticFriction,this.density=n.density,this.elasticity=n.elasticity,this.rollingFriction=n.rollingFriction},invalidate:function(n){for(var e=this.shapes.head;null!=e;){e.elt.invalidate_material(n),e=e.next}},__class__:zpp_$nape_phys_ZPP_$Material};var zpp_$nape_util_ZNPList_$ZPP_$Shape=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Shape"]=zpp_$nape_util_ZNPList_$ZPP_$Shape,zpp_$nape_util_ZNPList_$ZPP_$Shape.__name__="zpp_nape.util.ZNPList_ZPP_Shape",zpp_$nape_util_ZNPList_$ZPP_$Shape.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Shape:(e=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Shape:(e=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Shape:(t=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Shape:(t=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Shape};var ld49_TeethShape=function(n,e,t,i){null==i&&(i=0),null==t&&(t=16),null==e&&(e=32),null==n&&(n=4),ceramic_Shape.call(this),this.set_anchorX(.5),this.set_anchorY(.5),i<=0&&(i=1e-4),this.set_color(16777215),this.steps=n,this.stepSize=e,this.teeth=t,this.thickness=i;for(var r=[],l=0,s=0;s<n;)r[l++]=s*e,r[l++]=t,r[l++]=s*e+.5*e,r[l++]=0,++s;for(r[l++]=n*e,r[l++]=t,r[l++]=n*e,r[l++]=t+i,s=n-1;s>=0;)r[l++]=s*e+.5*e,r[l++]=t+i+t,r[l++]=s*e,r[l++]=t+i,--s;this.vertices=r,this.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,this.line=new ceramic_Line,this.line.set_color(16777215),2!=(a=this.line).thickness&&(a.thickness=2,a.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0);var a=this.line,o=r.concat([r[0],r[1]]);a.points=o,a.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0,1!=(a=this.line).loop&&(a.loop=!0,a.contentDirty=!0,ceramic_App.app.visualsContentDirty=!0),this.line.set_depth(2),this.add(this.line)};t["ld49.TeethShape"]=ld49_TeethShape,ld49_TeethShape.__name__="ld49.TeethShape",ld49_TeethShape.__super__=ceramic_Shape,ld49_TeethShape.prototype=$extend(ceramic_Shape.prototype,{set_color:function(n){if(ceramic_Shape.prototype.set_color.call(this,n),null!=this.line){var e=this.line,t=.5;null==t&&(t=.5);var i=(255-(n>>16&255))*t+(n>>16&255)|0,r=(255-(n>>8&255))*t+(n>>8&255)|0,l=(255-(255&n))*t+(255&n)|0,s=p._new();s&=65535,s|=(i>255?255:i<0?0:i)<<16,s&=16711935,s|=(r>255?255:r<0?0:r)<<8,s&=16776960,s|=l>255?255:l<0?0:l,e.set_color(s)}return n},initNapePhysics:function(n,e,t,i,r){if(null!=this.nape&&(this.nape.destroy(),this.set_nape(null)),this.contentDirty&&this.computeContent(),null==t&&(null==i||0==i.length)){i=[];for(var l=0,s=this.steps;l<s;){var a=l++,o=[],p=0;o[p++]=a*this.stepSize,o[p++]=this.teeth,o[p++]=a*this.stepSize+.5*this.stepSize,o[p++]=0,o[p++]=a*this.stepSize+this.stepSize,o[p++]=this.teeth,o[p++]=a*this.stepSize+this.stepSize,o[p++]=this.teeth+this.thickness,o[p++]=a*this.stepSize+.5*this.stepSize,o[p++]=this.teeth+this.thickness+this.teeth,o[p++]=a*this.stepSize,o[p++]=this.teeth+this.thickness;for(var h=new nape_geom_Vec2List,u=o.length,_=0,c=.5*this.get_width(),d=.5*this.get_height();_<u-1;){var f=_+1,x=o[_]-c,b=o[f]-d;null==b&&(b=0),null==x&&(x=0);var y,v=x,m=b,g=!0;if(null==g&&(g=!1),null==m&&(m=0),null==v&&(v=0),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?y=new nape_geom_Vec2:(y=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=y.zpp_pool,y.zpp_pool=null,y.zpp_disp=!1,y==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==y.zpp_inner){var z;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?z=new zpp_$nape_geom_ZPP_$Vec2:(z=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=z.next,z.next=null),z.weak=!1,z._immutable=!1,z.x=v,z.y=m,y.zpp_inner=z,y.zpp_inner.outer=y}else{if(null!=y&&y.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var w,O=y.zpp_inner;if(O._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),v!=v||m!=m)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=y&&y.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var C=y.zpp_inner;if(null!=C._validate&&C._validate(),y.zpp_inner.x==v){if(null!=y&&y.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var E=y.zpp_inner;null!=E._validate&&E._validate(),w=y.zpp_inner.y==m}else w=!1;if(!w){y.zpp_inner.x=v,y.zpp_inner.y=m;var U=y.zpp_inner;null!=U._invalidate&&U._invalidate(U)}}y.zpp_inner.weak=g,h.push(y),_+=2}t=new nape_shape_Polygon(h),i.push(t)}}return r=ld49_TeethShape._material,ceramic_Shape.prototype.initNapePhysics.call(this,n,e,t,i,r)},__class__:ld49_TeethShape});var nape_Config=function(){};t["nape.Config"]=nape_Config,nape_Config.__name__="nape.Config",nape_Config.prototype={__class__:nape_Config};var nape_callbacks_Callback=function(){if(this.zpp_inner=null,!zpp_$nape_callbacks_ZPP_$Callback.internal)throw haxe_Exception.thrown("Error: Callback cannot be instantiated derp!")};t["nape.callbacks.Callback"]=nape_callbacks_Callback,nape_callbacks_Callback.__name__="nape.callbacks.Callback",nape_callbacks_Callback.prototype={get_event:function(){return zpp_$nape_callbacks_ZPP_$Listener.events[this.zpp_inner.event]},get_listener:function(){return this.zpp_inner.listener.outer},toString:function(){return""},__class__:nape_callbacks_Callback,__properties__:{get_listener:"get_listener",get_event:"get_event"}};var nape_callbacks_BodyCallback=function(){nape_callbacks_Callback.call(this)};t["nape.callbacks.BodyCallback"]=nape_callbacks_BodyCallback,nape_callbacks_BodyCallback.__name__="nape.callbacks.BodyCallback",nape_callbacks_BodyCallback.__super__=nape_callbacks_Callback,nape_callbacks_BodyCallback.prototype=$extend(nape_callbacks_Callback.prototype,{get_body:function(){return this.zpp_inner.body.outer},toString:function(){var n="Cb:";return n+=["WAKE","SLEEP"][this.zpp_inner.event-2],n+=":"+this.zpp_inner.body.outer.toString(),n+=" : listener: "+Std.string(this.zpp_inner.listener.outer)},__class__:nape_callbacks_BodyCallback,__properties__:$extend(nape_callbacks_Callback.prototype.__properties__,{get_body:"get_body"})});var nape_callbacks_Listener=function(){if(this.zpp_inner=null,!zpp_$nape_callbacks_ZPP_$Listener.internal)throw haxe_Exception.thrown("Error: Cannot instantiate Listener derp!")};t["nape.callbacks.Listener"]=nape_callbacks_Listener,nape_callbacks_Listener.__name__="nape.callbacks.Listener",nape_callbacks_Listener.prototype={get_type:function(){return zpp_$nape_callbacks_ZPP_$Listener.types[this.zpp_inner.type]},get_event:function(){return zpp_$nape_callbacks_ZPP_$Listener.events[this.zpp_inner.event]},set_event:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot set listener event type to null");var e;zpp_$nape_callbacks_ZPP_$Listener.events[this.zpp_inner.event]!=n&&(null==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN?e=0:(null==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING?e=6:(null==zpp_$nape_util_ZPP_$Flags.CbEvent_END&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_END?e=1:(null==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP?e=3:(null==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE?e=2:(null==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_PRE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),e=n==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE?5:4))))),this.zpp_inner.swapEvent(e));return zpp_$nape_callbacks_ZPP_$Listener.events[this.zpp_inner.event]},get_precedence:function(){return this.zpp_inner.precedence},set_precedence:function(n){return this.zpp_inner.precedence!=n&&(this.zpp_inner.precedence=n,this.zpp_inner.invalidate_precedence()),this.zpp_inner.precedence},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(n){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=n)if(null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(this),null!=n){var e=n.zpp_inner.wrap_listeners;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},toString:function(){var n,e=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(0==this.zpp_inner.type){var t=this.zpp_inner.body;return"BodyListener{"+e+"::"+Std.string(t.outer_zn.zpp_inner_zn.options.outer)+"}"}if(1==this.zpp_inner.type){var i=this.zpp_inner.constraint;return"ConstraintListener{"+e+"::"+Std.string(i.outer_zn.zpp_inner_zn.options.outer)+"}"}switch((i=this.zpp_inner.interaction).itype){case 1:n="COLLISION";break;case 2:n="SENSOR";break;case 4:n="FLUID";break;default:n="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+e+"#"+n+"::"+Std.string(i.outer_zni.zpp_inner_zn.options1.outer)+":"+Std.string(i.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+n+"::"+Std.string(i.outer_znp.zpp_inner_zn.options1.outer)+":"+Std.string(i.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:nape_callbacks_Listener,__properties__:{set_space:"set_space",get_space:"get_space",set_precedence:"set_precedence",get_precedence:"get_precedence",set_event:"set_event",get_event:"get_event",get_type:"get_type"}};var nape_callbacks_BodyListener=function(n,e,t,i){if(null==i&&(i=0),this.zpp_inner_zn=null,zpp_$nape_callbacks_ZPP_$Listener.internal=!0,nape_callbacks_Listener.call(this),zpp_$nape_callbacks_ZPP_$Listener.internal=!1,null==t)throw haxe_Exception.thrown("Error: BodyListener::handler cannot be null");var r=-1;if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE)r=2;else{if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n!=zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP)throw haxe_Exception.thrown("Error: cbEvent '"+n.toString()+"' is not a valid event type for a BodyListener");r=3}this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$BodyListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(e),r,t),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner.precedence=i};t["nape.callbacks.BodyListener"]=nape_callbacks_BodyListener,nape_callbacks_BodyListener.__name__="nape.callbacks.BodyListener",nape_callbacks_BodyListener.__super__=nape_callbacks_Listener,nape_callbacks_BodyListener.prototype=$extend(nape_callbacks_Listener.prototype,{get_options:function(){return this.zpp_inner_zn.options.outer},set_options:function(n){return this.zpp_inner_zn.options.set(n.zpp_inner),this.zpp_inner_zn.options.outer},get_handler:function(){return this.zpp_inner_zn.handler},set_handler:function(n){if(null==n)throw haxe_Exception.thrown("Error: BodyListener::handler cannot be null");return this.zpp_inner_zn.handler=n,this.zpp_inner_zn.handler},__class__:nape_callbacks_BodyListener,__properties__:$extend(nape_callbacks_Listener.prototype.__properties__,{set_handler:"set_handler",get_handler:"get_handler",set_options:"set_options",get_options:"get_options"})});var nape_callbacks_CbEvent=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate CbEvent derp!")};t["nape.callbacks.CbEvent"]=nape_callbacks_CbEvent,nape_callbacks_CbEvent.__name__="nape.callbacks.CbEvent",nape_callbacks_CbEvent.__properties__={get_PRE:"get_PRE",get_BREAK:"get_BREAK",get_SLEEP:"get_SLEEP",get_WAKE:"get_WAKE",get_END:"get_END",get_ONGOING:"get_ONGOING",get_BEGIN:"get_BEGIN"},nape_callbacks_CbEvent.get_BEGIN=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN},nape_callbacks_CbEvent.get_ONGOING=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING},nape_callbacks_CbEvent.get_END=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_END&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_END},nape_callbacks_CbEvent.get_WAKE=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE},nape_callbacks_CbEvent.get_SLEEP=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP},nape_callbacks_CbEvent.get_BREAK=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK},nape_callbacks_CbEvent.get_PRE=function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_PRE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.CbEvent_PRE},nape_callbacks_CbEvent.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN?"BEGIN":(null==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING?"ONGOING":(null==zpp_$nape_util_ZPP_$Flags.CbEvent_END&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_END?"END":(null==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE?"WAKE":(null==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP?"SLEEP":(null==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK?"BREAK":(null==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_PRE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE?"PRE":""))))))},__class__:nape_callbacks_CbEvent};var nape_callbacks_CbType=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_callbacks_ZPP_$CbType,this.zpp_inner.outer=this};t["nape.callbacks.CbType"]=nape_callbacks_CbType,nape_callbacks_CbType.__name__="nape.callbacks.CbType",nape_callbacks_CbType.__properties__={get_ANY_COMPOUND:"get_ANY_COMPOUND",get_ANY_SHAPE:"get_ANY_SHAPE",get_ANY_CONSTRAINT:"get_ANY_CONSTRAINT",get_ANY_BODY:"get_ANY_BODY"},nape_callbacks_CbType.get_ANY_BODY=function(){return zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY},nape_callbacks_CbType.get_ANY_CONSTRAINT=function(){return zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT},nape_callbacks_CbType.get_ANY_SHAPE=function(){return zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE},nape_callbacks_CbType.get_ANY_COMPOUND=function(){return zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND},nape_callbacks_CbType.prototype={get_id:function(){return this.zpp_inner.id},including:function(n){return new nape_callbacks_OptionType(this).including(n)},excluding:function(n){return new nape_callbacks_OptionType(this).excluding(n)},get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_interactors:function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=zpp_$nape_util_ZPP_$InteractorList.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},get_constraints:function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},toString:function(){return this==zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY?"ANY_BODY":this==zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE?"ANY_SHAPE":this==zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND?"ANY_COMPOUND":this==zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:nape_callbacks_CbType,__properties__:{get_constraints:"get_constraints",get_interactors:"get_interactors",get_userData:"get_userData",get_id:"get_id"}};var nape_callbacks_CbTypeIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$CbTypeList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate CbTypeIterator derp!")};t["nape.callbacks.CbTypeIterator"]=nape_callbacks_CbTypeIterator,nape_callbacks_CbTypeIterator.__name__="nape.callbacks.CbTypeIterator",nape_callbacks_CbTypeIterator.get=function(n){var e;if(null==nape_callbacks_CbTypeIterator.zpp_pool){zpp_$nape_util_ZPP_$CbTypeList.internal=!0;var t=new nape_callbacks_CbTypeIterator;zpp_$nape_util_ZPP_$CbTypeList.internal=!1,e=t}else{var i=nape_callbacks_CbTypeIterator.zpp_pool;nape_callbacks_CbTypeIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_callbacks_CbTypeIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_callbacks_CbTypeIterator};var nape_callbacks_CbTypeList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$CbTypeList,this.zpp_inner.outer=this};t["nape.callbacks.CbTypeList"]=nape_callbacks_CbTypeList,nape_callbacks_CbTypeList.__name__="nape.callbacks.CbTypeList",nape_callbacks_CbTypeList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_callbacks_CbTypeList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_callbacks_CbTypeList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CbTypeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CbTypeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CbTypeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CbTypeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CbTypeList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CbTypeList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_callbacks_CbTypeIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_callbacks_CbTypeList;this.zpp_inner.valmod();for(var t=nape_callbacks_CbTypeIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: CbType is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_callbacks_CbTypeIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_callbacks_CbTypeIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_callbacks_CbTypeIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_callbacks_CbTypeList,__properties__:{get_length:"get_length"}};var nape_callbacks_ConstraintCallback=function(){nape_callbacks_Callback.call(this)};t["nape.callbacks.ConstraintCallback"]=nape_callbacks_ConstraintCallback,nape_callbacks_ConstraintCallback.__name__="nape.callbacks.ConstraintCallback",nape_callbacks_ConstraintCallback.__super__=nape_callbacks_Callback,nape_callbacks_ConstraintCallback.prototype=$extend(nape_callbacks_Callback.prototype,{get_constraint:function(){return this.zpp_inner.constraint.outer},toString:function(){var n="Cb:";return n+=["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2],n+=":"+this.zpp_inner.constraint.outer.toString(),n+=" : listener: "+Std.string(this.zpp_inner.listener.outer)},__class__:nape_callbacks_ConstraintCallback,__properties__:$extend(nape_callbacks_Callback.prototype.__properties__,{get_constraint:"get_constraint"})});var nape_callbacks_ConstraintListener=function(n,e,t,i){if(null==i&&(i=0),this.zpp_inner_zn=null,zpp_$nape_callbacks_ZPP_$Listener.internal=!0,nape_callbacks_Listener.call(this),zpp_$nape_callbacks_ZPP_$Listener.internal=!1,null==t)throw haxe_Exception.thrown("Error: ConstraintListener::handler cannot be null");var r=-1;if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE)r=2;else if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP)r=3;else{if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n!=zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK)throw haxe_Exception.thrown("Error: cbEvent '"+n.toString()+"' is not a valid event type for a ConstraintListener");r=4}this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$ConstraintListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(e),r,t),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner.precedence=i};t["nape.callbacks.ConstraintListener"]=nape_callbacks_ConstraintListener,nape_callbacks_ConstraintListener.__name__="nape.callbacks.ConstraintListener",nape_callbacks_ConstraintListener.__super__=nape_callbacks_Listener,nape_callbacks_ConstraintListener.prototype=$extend(nape_callbacks_Listener.prototype,{get_options:function(){return this.zpp_inner_zn.options.outer},set_options:function(n){return this.zpp_inner_zn.options.set(n.zpp_inner),this.zpp_inner_zn.options.outer},get_handler:function(){return this.zpp_inner_zn.handler},set_handler:function(n){if(null==n)throw haxe_Exception.thrown("Error: ConstraintListener::handler cannot be null");return this.zpp_inner_zn.handler=n,this.zpp_inner_zn.handler},__class__:nape_callbacks_ConstraintListener,__properties__:$extend(nape_callbacks_Listener.prototype.__properties__,{set_handler:"set_handler",get_handler:"get_handler",set_options:"set_options",get_options:"get_options"})});var nape_callbacks_InteractionCallback=function(){nape_callbacks_Callback.call(this)};t["nape.callbacks.InteractionCallback"]=nape_callbacks_InteractionCallback,nape_callbacks_InteractionCallback.__name__="nape.callbacks.InteractionCallback",nape_callbacks_InteractionCallback.__super__=nape_callbacks_Callback,nape_callbacks_InteractionCallback.prototype=$extend(nape_callbacks_Callback.prototype,{get_int1:function(){return this.zpp_inner.int1.outer_i},get_int2:function(){return this.zpp_inner.int2.outer_i},get_arbiters:function(){return this.zpp_inner.wrap_arbiters},toString:function(){var n="Cb:";return n+=["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event],n+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),n+=" : "+this.zpp_inner.wrap_arbiters.toString(),n+=" : listener: "+Std.string(this.zpp_inner.listener.outer)},__class__:nape_callbacks_InteractionCallback,__properties__:$extend(nape_callbacks_Callback.prototype.__properties__,{get_arbiters:"get_arbiters",get_int2:"get_int2",get_int1:"get_int1"})});var nape_callbacks_InteractionListener=function(n,e,t,i,r,l){if(null==l&&(l=0),this.zpp_inner_zn=null,zpp_$nape_callbacks_ZPP_$Listener.internal=!0,nape_callbacks_Listener.call(this),zpp_$nape_callbacks_ZPP_$Listener.internal=!1,null==r)throw haxe_Exception.thrown("Error: InteractionListener::handler cannot be null");if(null==n)throw haxe_Exception.thrown("Error: CbEvent cannot be null for InteractionListener");var s,a,o,p=-1;if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN)p=0;else if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_END&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.CbEvent_END)p=1;else{if(null==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),n!=zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING)throw haxe_Exception.thrown("Error: CbEvent '"+n.toString()+"' is not a valid event type for InteractionListener");p=6}if(this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$InteractionListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(t),zpp_$nape_callbacks_ZPP_$OptionType.argument(i),p,2),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zni=this,this.zpp_inner.precedence=l,this.zpp_inner_zn.handleri=r,null==e)throw haxe_Exception.thrown("Error: Cannot set listener interaction type to null");(1==(o=this.zpp_inner_zn.itype)?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==o?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==o?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==o?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):s=null,s!=e)&&(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION?a=1:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?a=2:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),a=e==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=a);1==(o=this.zpp_inner_zn.itype)?null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1):2==o?null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1):4==o?null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1):7==o&&null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1)};t["nape.callbacks.InteractionListener"]=nape_callbacks_InteractionListener,nape_callbacks_InteractionListener.__name__="nape.callbacks.InteractionListener",nape_callbacks_InteractionListener.__super__=nape_callbacks_Listener,nape_callbacks_InteractionListener.prototype=$extend(nape_callbacks_Listener.prototype,{get_options1:function(){return this.zpp_inner_zn.options1.outer},set_options1:function(n){return this.zpp_inner_zn.options1.set(n.zpp_inner),this.zpp_inner_zn.options1.outer},get_options2:function(){return this.zpp_inner_zn.options2.outer},set_options2:function(n){return this.zpp_inner_zn.options2.set(n.zpp_inner),this.zpp_inner_zn.options2.outer},get_interactionType:function(){var n=this.zpp_inner_zn.itype;return 1==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):null},set_interactionType:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot set listener interaction type to null");var e,t,i;(1==(i=this.zpp_inner_zn.itype)?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):e=null,e!=n)&&(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION?t=1:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?t=2:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),t=n==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=t);return 1==(i=this.zpp_inner_zn.itype)?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):null},get_handler:function(){return this.zpp_inner_zn.handleri},set_handler:function(n){if(null==n)throw haxe_Exception.thrown("Error: InteractionListener::handler cannot be null");return this.zpp_inner_zn.handleri=n,this.zpp_inner_zn.handleri},get_allowSleepingCallbacks:function(){return this.zpp_inner_zn.allowSleepingCallbacks},set_allowSleepingCallbacks:function(n){return this.zpp_inner_zn.allowSleepingCallbacks=n,this.zpp_inner_zn.allowSleepingCallbacks},__class__:nape_callbacks_InteractionListener,__properties__:$extend(nape_callbacks_Listener.prototype.__properties__,{set_allowSleepingCallbacks:"set_allowSleepingCallbacks",get_allowSleepingCallbacks:"get_allowSleepingCallbacks",set_handler:"set_handler",get_handler:"get_handler",set_interactionType:"set_interactionType",get_interactionType:"get_interactionType",set_options2:"set_options2",get_options2:"get_options2",set_options1:"set_options1",get_options1:"get_options1"})});var nape_callbacks_InteractionType=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate InteractionType derp!")};t["nape.callbacks.InteractionType"]=nape_callbacks_InteractionType,nape_callbacks_InteractionType.__name__="nape.callbacks.InteractionType",nape_callbacks_InteractionType.__properties__={get_ANY:"get_ANY",get_FLUID:"get_FLUID",get_SENSOR:"get_SENSOR",get_COLLISION:"get_COLLISION"},nape_callbacks_InteractionType.get_COLLISION=function(){return null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION},nape_callbacks_InteractionType.get_SENSOR=function(){return null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR},nape_callbacks_InteractionType.get_FLUID=function(){return null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID},nape_callbacks_InteractionType.get_ANY=function(){return null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_ANY},nape_callbacks_InteractionType.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION?"COLLISION":(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?"SENSOR":(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?"FLUID":(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY?"ANY":"")))},__class__:nape_callbacks_InteractionType};var nape_callbacks_ListenerIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$ListenerList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ListenerIterator derp!")};t["nape.callbacks.ListenerIterator"]=nape_callbacks_ListenerIterator,nape_callbacks_ListenerIterator.__name__="nape.callbacks.ListenerIterator",nape_callbacks_ListenerIterator.get=function(n){var e;if(null==nape_callbacks_ListenerIterator.zpp_pool){zpp_$nape_util_ZPP_$ListenerList.internal=!0;var t=new nape_callbacks_ListenerIterator;zpp_$nape_util_ZPP_$ListenerList.internal=!1,e=t}else{var i=nape_callbacks_ListenerIterator.zpp_pool;nape_callbacks_ListenerIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_callbacks_ListenerIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_callbacks_ListenerIterator.zpp_pool,nape_callbacks_ListenerIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_callbacks_ListenerIterator};var nape_callbacks_ListenerList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$ListenerList,this.zpp_inner.outer=this};t["nape.callbacks.ListenerList"]=nape_callbacks_ListenerList,nape_callbacks_ListenerList.__name__="nape.callbacks.ListenerList",nape_callbacks_ListenerList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_callbacks_ListenerList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_callbacks_ListenerList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ListenerList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ListenerList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ListenerList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ListenerList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ListenerList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ListenerList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_callbacks_ListenerIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_callbacks_ListenerList;this.zpp_inner.valmod();for(var t=nape_callbacks_ListenerIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_callbacks_ListenerIterator.zpp_pool,nape_callbacks_ListenerIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Listener is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_callbacks_ListenerIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_callbacks_ListenerIterator.zpp_pool,nape_callbacks_ListenerIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_callbacks_ListenerIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_callbacks_ListenerIterator.zpp_pool,nape_callbacks_ListenerIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_callbacks_ListenerIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_callbacks_ListenerIterator.zpp_pool,nape_callbacks_ListenerIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_callbacks_ListenerIterator.zpp_pool,nape_callbacks_ListenerIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_callbacks_ListenerList,__properties__:{get_length:"get_length"}};var nape_callbacks_ListenerType=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ListenerType derp!")};t["nape.callbacks.ListenerType"]=nape_callbacks_ListenerType,nape_callbacks_ListenerType.__name__="nape.callbacks.ListenerType",nape_callbacks_ListenerType.__properties__={get_PRE:"get_PRE",get_INTERACTION:"get_INTERACTION",get_CONSTRAINT:"get_CONSTRAINT",get_BODY:"get_BODY"},nape_callbacks_ListenerType.get_BODY=function(){return null==zpp_$nape_util_ZPP_$Flags.ListenerType_BODY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_BODY=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ListenerType_BODY},nape_callbacks_ListenerType.get_CONSTRAINT=function(){return null==zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT},nape_callbacks_ListenerType.get_INTERACTION=function(){return null==zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION},nape_callbacks_ListenerType.get_PRE=function(){return null==zpp_$nape_util_ZPP_$Flags.ListenerType_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_PRE=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ListenerType_PRE},nape_callbacks_ListenerType.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.ListenerType_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_PRE=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ListenerType_PRE?"PRE":(null==zpp_$nape_util_ZPP_$Flags.ListenerType_BODY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_BODY=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ListenerType_BODY?"BODY":(null==zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT?"CONSTRAINT":(null==zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION?"INTERACTION":"")))},__class__:nape_callbacks_ListenerType};var nape_callbacks_OptionType=function(n,e){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_callbacks_ZPP_$OptionType,this.zpp_inner.outer=this,null!=n&&this.including(n),null!=e&&this.excluding(e)};t["nape.callbacks.OptionType"]=nape_callbacks_OptionType,nape_callbacks_OptionType.__name__="nape.callbacks.OptionType",nape_callbacks_OptionType.prototype={get_includes:function(){return null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes(),this.zpp_inner.wrap_includes},get_excludes:function(){return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),this.zpp_inner.wrap_excludes},including:function(n){return this.zpp_inner.append(this.zpp_inner.includes,n),this},excluding:function(n){return this.zpp_inner.append(this.zpp_inner.excludes,n),this},toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var n=this.zpp_inner.wrap_includes.toString();return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),"@{"+n+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:nape_callbacks_OptionType,__properties__:{get_excludes:"get_excludes",get_includes:"get_includes"}};var nape_callbacks_PreCallback=function(){nape_callbacks_Callback.call(this)};t["nape.callbacks.PreCallback"]=nape_callbacks_PreCallback,nape_callbacks_PreCallback.__name__="nape.callbacks.PreCallback",nape_callbacks_PreCallback.__super__=nape_callbacks_Callback,nape_callbacks_PreCallback.prototype=$extend(nape_callbacks_Callback.prototype,{get_arbiter:function(){return this.zpp_inner.pre_arbiter.wrapper()},get_int1:function(){return this.zpp_inner.int1.outer_i},get_int2:function(){return this.zpp_inner.int2.outer_i},get_swapped:function(){return this.zpp_inner.pre_swapped},toString:function(){var n="Cb:PRE:";return n+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),n+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString(),n+=" : listnener: "+Std.string(this.zpp_inner.listener.outer)},__class__:nape_callbacks_PreCallback,__properties__:$extend(nape_callbacks_Callback.prototype.__properties__,{get_swapped:"get_swapped",get_int2:"get_int2",get_int1:"get_int1",get_arbiter:"get_arbiter"})});var nape_callbacks_PreFlag=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate PreFlag derp!")};t["nape.callbacks.PreFlag"]=nape_callbacks_PreFlag,nape_callbacks_PreFlag.__name__="nape.callbacks.PreFlag",nape_callbacks_PreFlag.__properties__={get_IGNORE_ONCE:"get_IGNORE_ONCE",get_ACCEPT_ONCE:"get_ACCEPT_ONCE",get_IGNORE:"get_IGNORE",get_ACCEPT:"get_ACCEPT"},nape_callbacks_PreFlag.get_ACCEPT=function(){return null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT},nape_callbacks_PreFlag.get_IGNORE=function(){return null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE},nape_callbacks_PreFlag.get_ACCEPT_ONCE=function(){return null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE},nape_callbacks_PreFlag.get_IGNORE_ONCE=function(){return null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE},nape_callbacks_PreFlag.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT?"ACCEPT":(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?"IGNORE":(null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE?"ACCEPT_ONCE":(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")))},__class__:nape_callbacks_PreFlag};var nape_callbacks_PreListener=function(n,e,t,i,r,l){if(null==l&&(l=!1),null==r&&(r=0),this.zpp_inner_zn=null,zpp_$nape_callbacks_ZPP_$Listener.internal=!0,nape_callbacks_Listener.call(this),zpp_$nape_callbacks_ZPP_$Listener.internal=!1,null==i)throw haxe_Exception.thrown("Error: PreListener must take a handler!");if(this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$InteractionListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(e),zpp_$nape_callbacks_ZPP_$OptionType.argument(t),5,3),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_znp=this,this.zpp_inner.precedence=r,this.zpp_inner_zn.pure=l,this.zpp_inner_zn.handlerp=i,null==n)throw haxe_Exception.thrown("Error: Cannot set listener interaction type to null");var s,a,o;(1==(o=this.zpp_inner_zn.itype)?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==o?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==o?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==o?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),s=zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):s=null,s!=n)&&(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION?a=1:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?a=2:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),a=n==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=a);1==(o=this.zpp_inner_zn.itype)?null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1):2==o?null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1):4==o?null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1):7==o&&null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1)};t["nape.callbacks.PreListener"]=nape_callbacks_PreListener,nape_callbacks_PreListener.__name__="nape.callbacks.PreListener",nape_callbacks_PreListener.__super__=nape_callbacks_Listener,nape_callbacks_PreListener.prototype=$extend(nape_callbacks_Listener.prototype,{get_options1:function(){return this.zpp_inner_zn.options1.outer},set_options1:function(n){return this.zpp_inner_zn.options1.set(n.zpp_inner),this.zpp_inner_zn.options1.outer},get_options2:function(){return this.zpp_inner_zn.options2.outer},set_options2:function(n){return this.zpp_inner_zn.options2.set(n.zpp_inner),this.zpp_inner_zn.options2.outer},get_handler:function(){return this.zpp_inner_zn.handlerp},set_handler:function(n){if(null==n)throw haxe_Exception.thrown("Error: PreListener must take a non-null handler!");return this.zpp_inner_zn.handlerp=n,this.zpp_inner_zn.wake(),this.zpp_inner_zn.handlerp},get_pure:function(){return this.zpp_inner_zn.pure},set_pure:function(n){return n||this.zpp_inner_zn.wake(),this.zpp_inner_zn.pure=n,this.zpp_inner_zn.pure},get_interactionType:function(){var n=this.zpp_inner_zn.itype;return 1==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==n?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):null},set_interactionType:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot set listener interaction type to null");var e,t,i;(1==(i=this.zpp_inner_zn.itype)?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):e=null,e!=n)&&(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION?t=1:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?t=2:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),t=n==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=t);return 1==(i=this.zpp_inner_zn.itype)?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION):2==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR):4==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID):7==i?(null==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_ANY):null},__class__:nape_callbacks_PreListener,__properties__:$extend(nape_callbacks_Listener.prototype.__properties__,{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType",set_pure:"set_pure",get_pure:"get_pure",set_handler:"set_handler",get_handler:"get_handler",set_options2:"set_options2",get_options2:"get_options2",set_options1:"set_options1",get_options1:"get_options1"})});var nape_constraint_Constraint=function(){if(this.debugDraw=!0,this.zpp_inner.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT.zpp_inner),!nape_constraint_Constraint.zpp_internalAlloc)throw haxe_Exception.thrown("Error: Constraint cannot be instantiated derp!")};t["nape.constraint.Constraint"]=nape_constraint_Constraint,nape_constraint_Constraint.__name__="nape.constraint.Constraint",nape_constraint_Constraint.prototype={get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_compound:function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},set_compound:function(n){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=n&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(this),null!=n)){var e=n.zpp_inner.wrap_constraints;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(n){if(null!=this.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=n)if(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(this),null!=n){var e=n.zpp_inner.wrap_constraints;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_isSleeping:function(){if(null==this.zpp_inner.space||!this.zpp_inner.active)throw haxe_Exception.thrown("Error: isSleeping only makes sense if constraint is active and inside a space");return this.zpp_inner.component.sleeping},get_active:function(){return this.zpp_inner.active},set_active:function(n){return this.zpp_inner.active!=n&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),n?(this.zpp_inner.active=n,this.zpp_inner.activate(),null!=this.zpp_inner.space&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.sleeping=!0),this.zpp_inner.space.wake_constraint(this.zpp_inner,!0))):(null!=this.zpp_inner.space&&(this.zpp_inner.wake(),this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),this.zpp_inner.active=n,this.zpp_inner.deactivate())),this.zpp_inner.active},get_ignore:function(){return this.zpp_inner.ignore},set_ignore:function(n){return this.zpp_inner.ignore!=n&&(this.zpp_inner.ignore=n,this.zpp_inner.wake()),this.zpp_inner.ignore},get_stiff:function(){return this.zpp_inner.stiff},set_stiff:function(n){return this.zpp_inner.stiff!=n&&(this.zpp_inner.stiff=n,this.zpp_inner.wake()),this.zpp_inner.stiff},get_frequency:function(){return this.zpp_inner.frequency},set_frequency:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Constraint::Frequency cannot be NaN");if(n<=0)throw haxe_Exception.thrown("Error: Constraint::Frequency must be >0");return this.zpp_inner.frequency!=n&&(this.zpp_inner.frequency=n,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.frequency},get_damping:function(){return this.zpp_inner.damping},set_damping:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Constraint::Damping cannot be Nan");if(n<0)throw haxe_Exception.thrown("Error: Constraint::Damping must be >=0");return this.zpp_inner.damping!=n&&(this.zpp_inner.damping=n,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.damping},get_maxForce:function(){return this.zpp_inner.maxForce},set_maxForce:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Constraint::maxForce cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: Constraint::maxForce must be >=0");return this.zpp_inner.maxForce!=n&&(this.zpp_inner.maxForce=n,this.zpp_inner.wake()),this.zpp_inner.maxForce},get_maxError:function(){return this.zpp_inner.maxError},set_maxError:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Constraint::maxError cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: Constraint::maxError must be >=0");return this.zpp_inner.maxError!=n&&(this.zpp_inner.maxError=n,this.zpp_inner.wake()),this.zpp_inner.maxError},get_breakUnderForce:function(){return this.zpp_inner.breakUnderForce},set_breakUnderForce:function(n){return this.zpp_inner.breakUnderForce!=n&&(this.zpp_inner.breakUnderForce=n,this.zpp_inner.wake()),this.zpp_inner.breakUnderForce},get_breakUnderError:function(){return this.zpp_inner.breakUnderError},set_breakUnderError:function(n){return this.zpp_inner.breakUnderError!=n&&(this.zpp_inner.breakUnderError=n,this.zpp_inner.wake()),this.zpp_inner.breakUnderError},get_removeOnBreak:function(){return this.zpp_inner.removeOnBreak},set_removeOnBreak:function(n){return this.zpp_inner.removeOnBreak=n,this.zpp_inner.removeOnBreak},impulse:function(){return null},bodyImpulse:function(n){return null},visitBodies:function(n){},get_cbTypes:function(){return null==this.zpp_inner.wrap_cbTypes&&this.zpp_inner.setupcbTypes(),this.zpp_inner.wrap_cbTypes},toString:function(){return"{Constraint}"},copy:function(){return this.zpp_inner.copy()},__class__:nape_constraint_Constraint,__properties__:{get_cbTypes:"get_cbTypes",set_removeOnBreak:"set_removeOnBreak",get_removeOnBreak:"get_removeOnBreak",set_breakUnderError:"set_breakUnderError",get_breakUnderError:"get_breakUnderError",set_breakUnderForce:"set_breakUnderForce",get_breakUnderForce:"get_breakUnderForce",set_maxError:"set_maxError",get_maxError:"get_maxError",set_maxForce:"set_maxForce",get_maxForce:"get_maxForce",set_damping:"set_damping",get_damping:"get_damping",set_frequency:"set_frequency",get_frequency:"get_frequency",set_stiff:"set_stiff",get_stiff:"get_stiff",set_ignore:"set_ignore",get_ignore:"get_ignore",set_active:"set_active",get_active:"get_active",get_isSleeping:"get_isSleeping",set_space:"set_space",get_space:"get_space",set_compound:"set_compound",get_compound:"get_compound",get_userData:"get_userData"}};var nape_constraint_AngleJoint=function(n,e,t,i,r){null==r&&(r=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$AngleJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var l=null==n?null:n.zpp_inner;l!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=l,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=l&&this.zpp_inner_zn.b2!=l&&null!=l&&l.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=l&&l.wake()));this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var s=null==e?null:e.zpp_inner;s!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b1!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake()));this.zpp_inner_zn.b2;if(this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),t!=t)throw haxe_Exception.thrown("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=t&&(this.zpp_inner_zn.jointMin=t,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),i!=i)throw haxe_Exception.thrown("Error: AngleJoint::jointMax cannot be NaN");if(this.zpp_inner_zn.jointMax!=i&&(this.zpp_inner_zn.jointMax=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::ratio"),r!=r)throw haxe_Exception.thrown("Error: AngleJoint::ratio cannot be NaN");this.zpp_inner_zn.ratio!=r&&(this.zpp_inner_zn.ratio=r,this.zpp_inner.wake())};t["nape.constraint.AngleJoint"]=nape_constraint_AngleJoint,nape_constraint_AngleJoint.__name__="nape.constraint.AngleJoint",nape_constraint_AngleJoint.__super__=nape_constraint_Constraint,nape_constraint_AngleJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(n){if(this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),n!=n)throw haxe_Exception.thrown("Error: AngleJoint::jointMin cannot be NaN");return this.zpp_inner_zn.jointMin!=n&&(this.zpp_inner_zn.jointMin=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(n){if(this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),n!=n)throw haxe_Exception.thrown("Error: AngleJoint::jointMax cannot be NaN");return this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(n){if(this.zpp_inner.immutable_midstep("AngleJoint::ratio"),n!=n)throw haxe_Exception.thrown("Error: AngleJoint::ratio cannot be NaN");return this.zpp_inner_zn.ratio!=n&&(this.zpp_inner_zn.ratio=n,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},isSlack:function(){if(null==(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)||null==(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Cannot compute slack for AngleJoint if either body is null.");var n,e=this.zpp_inner_zn,t=e.ratio*e.b2.rot-e.b1.rot;return e.equal?(t-=e.jointMax,n=!1,e.scale=1):t<e.jointMin?(t=e.jointMin-t,e.scale=-1,n=!1):t>e.jointMax?(t-=e.jointMax,e.scale=1,n=!1):(e.scale=0,t=0,n=!0),n},impulse:function(){var n=new nape_geom_MatMN(1,1),e=this.zpp_inner_zn.jAcc;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[0*n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get(0,0,0)},visitBodies:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot apply null lambda to bodies");null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},__class__:nape_constraint_AngleJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_ratio:"set_ratio",get_ratio:"get_ratio",set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_constraint_ConstraintIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$ConstraintList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ConstraintIterator derp!")};t["nape.constraint.ConstraintIterator"]=nape_constraint_ConstraintIterator,nape_constraint_ConstraintIterator.__name__="nape.constraint.ConstraintIterator",nape_constraint_ConstraintIterator.get=function(n){var e;if(null==nape_constraint_ConstraintIterator.zpp_pool){zpp_$nape_util_ZPP_$ConstraintList.internal=!0;var t=new nape_constraint_ConstraintIterator;zpp_$nape_util_ZPP_$ConstraintList.internal=!1,e=t}else{var i=nape_constraint_ConstraintIterator.zpp_pool;nape_constraint_ConstraintIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_constraint_ConstraintIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_constraint_ConstraintIterator};var nape_constraint_ConstraintList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$ConstraintList,this.zpp_inner.outer=this};t["nape.constraint.ConstraintList"]=nape_constraint_ConstraintList,nape_constraint_ConstraintList.__name__="nape.constraint.ConstraintList",nape_constraint_ConstraintList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_constraint_ConstraintList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_constraint_ConstraintList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConstraintList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConstraintList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConstraintList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConstraintList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConstraintList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConstraintList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_constraint_ConstraintIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_constraint_ConstraintList;this.zpp_inner.valmod();for(var t=nape_constraint_ConstraintIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Constraint is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_constraint_ConstraintIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_constraint_ConstraintIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_constraint_ConstraintIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_constraint_ConstraintList,__properties__:{get_length:"get_length"}};var nape_constraint_DistanceJoint=function(n,e,t,i,r,l){this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$DistanceJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var s=null==n?null:n.zpp_inner;s!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b2!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake()));var a=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake()));a=null==this.zpp_inner_zn.b2;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==t)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(c=this.zpp_inner_zn.wrap_a1)&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((_=c.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=_._isimmutable&&_._isimmutable(),null==t)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=t.zpp_inner)._validate&&_._validate();var p=t.zpp_inner.x;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=t.zpp_inner)._validate&&_._validate();var h=t.zpp_inner.y;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((_=c.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=_._isimmutable&&_._isimmutable(),p!=p||h!=h)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(_=c.zpp_inner)._validate&&_._validate(),c.zpp_inner.x==p){if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=c.zpp_inner)._validate&&_._validate(),a=c.zpp_inner.y==h}else a=!1;a||(c.zpp_inner.x=p,c.zpp_inner.y=h,null!=(_=c.zpp_inner)._invalidate&&_._invalidate(_));if(t.zpp_inner.weak){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),t.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,(d=t).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=d:zpp_$nape_util_ZPP_$PubPool.poolVec2=d,zpp_$nape_util_ZPP_$PubPool.nextVec2=d,d.zpp_disp=!0,null!=(d=u).outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==i)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(c=this.zpp_inner_zn.wrap_a2)&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((_=c.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=_._isimmutable&&_._isimmutable(),null==i)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=i.zpp_inner)._validate&&_._validate();p=i.zpp_inner.x;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=i.zpp_inner)._validate&&_._validate();h=i.zpp_inner.y;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((_=c.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=_._isimmutable&&_._isimmutable(),p!=p||h!=h)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(_=c.zpp_inner)._validate&&_._validate(),c.zpp_inner.x==p){if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var _;null!=(_=c.zpp_inner)._validate&&_._validate(),a=c.zpp_inner.y==h}else a=!1;a||(c.zpp_inner.x=p,c.zpp_inner.y=h,null!=(_=c.zpp_inner)._invalidate&&_._invalidate(_));if(i.zpp_inner.weak){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;if((c=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),i.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var d;u=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,(d=i).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=d:zpp_$nape_util_ZPP_$PubPool.poolVec2=d,zpp_$nape_util_ZPP_$PubPool.nextVec2=d,d.zpp_disp=!0,null!=(d=u).outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),r!=r)throw haxe_Exception.thrown("Error: DistanceJoint::jointMin cannot be NaN");if(r<0)throw haxe_Exception.thrown("Error: DistanceJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=r&&(this.zpp_inner_zn.jointMin=r,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),l!=l)throw haxe_Exception.thrown("Error: DistanceJoint::jointMax cannot be NaN");if(l<0)throw haxe_Exception.thrown("Error: DistanceJoint::jointMax must be >= 0");this.zpp_inner_zn.jointMax!=l&&(this.zpp_inner_zn.jointMax=l,this.zpp_inner.wake())};t["nape.constraint.DistanceJoint"]=nape_constraint_DistanceJoint,nape_constraint_DistanceJoint.__name__="nape.constraint.DistanceJoint",nape_constraint_DistanceJoint.__super__=nape_constraint_Constraint,nape_constraint_DistanceJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_anchor1:function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},set_anchor1:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(l=this.zpp_inner_zn.wrap_a1)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},get_anchor2:function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},set_anchor2:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(l=this.zpp_inner_zn.wrap_a2)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(n){if(this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),n!=n)throw haxe_Exception.thrown("Error: DistanceJoint::jointMin cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: DistanceJoint::jointMin must be >= 0");return this.zpp_inner_zn.jointMin!=n&&(this.zpp_inner_zn.jointMin=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(n){if(this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),n!=n)throw haxe_Exception.thrown("Error: DistanceJoint::jointMax cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: DistanceJoint::jointMax must be >= 0");return this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},isSlack:function(){if(null==(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)||null==(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Cannot compute slack for DistanceJoint if either body is null.");return this.zpp_inner_zn.slack},impulse:function(){var n=new nape_geom_MatMN(1,1),e=this.zpp_inner_zn.jAcc;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[0*n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},__class__:nape_constraint_DistanceJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_constraint_LineJoint=function(n,e,t,i,r,l,s){this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$LineJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var a=null==n?null:n.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake()));var o=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var p=null==e?null:e.zpp_inner;p!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=p,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=p&&this.zpp_inner_zn.b1!=p&&null!=p&&p.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=p&&p.wake()));o=null==this.zpp_inner_zn.b2;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==t)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(d=this.zpp_inner_zn.wrap_a1)&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=d.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),null==t)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=t.zpp_inner)._validate&&c._validate();var h=t.zpp_inner.x;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=t.zpp_inner)._validate&&c._validate();var u=t.zpp_inner.y;if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=d.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(c=d.zpp_inner)._validate&&c._validate(),d.zpp_inner.x==h){if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=d.zpp_inner)._validate&&c._validate(),o=d.zpp_inner.y==u}else o=!1;o||(d.zpp_inner.x=h,d.zpp_inner.y=u,null!=(c=d.zpp_inner)._invalidate&&c._invalidate(c));if(t.zpp_inner.weak){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),t.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,(f=t).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=f:zpp_$nape_util_ZPP_$PubPool.poolVec2=f,zpp_$nape_util_ZPP_$PubPool.nextVec2=f,f.zpp_disp=!0,null!=(f=_).outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=f}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==i)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(d=this.zpp_inner_zn.wrap_a2)&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=d.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),null==i)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=i.zpp_inner)._validate&&c._validate();h=i.zpp_inner.x;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=i.zpp_inner)._validate&&c._validate();u=i.zpp_inner.y;if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=d.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(c=d.zpp_inner)._validate&&c._validate(),d.zpp_inner.x==h){if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=d.zpp_inner)._validate&&c._validate(),o=d.zpp_inner.y==u}else o=!1;o||(d.zpp_inner.x=h,d.zpp_inner.y=u,null!=(c=d.zpp_inner)._invalidate&&c._invalidate(c));if(i.zpp_inner.weak){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),i.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");_=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,(f=i).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=f:zpp_$nape_util_ZPP_$PubPool.poolVec2=f,zpp_$nape_util_ZPP_$PubPool.nextVec2=f,f.zpp_disp=!0,null!=(f=_).outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=f}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==r)throw haxe_Exception.thrown("Error: Constraint::direction cannot be null");if(null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),null!=(d=this.zpp_inner_zn.wrap_n)&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=d.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),null==r)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=r.zpp_inner)._validate&&c._validate();h=r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=r.zpp_inner)._validate&&c._validate();u=r.zpp_inner.y;if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=d.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(c=d.zpp_inner)._validate&&c._validate(),d.zpp_inner.x==h){if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;null!=(c=d.zpp_inner)._validate&&c._validate(),o=d.zpp_inner.y==u}else o=!1;o||(d.zpp_inner.x=h,d.zpp_inner.y=u,null!=(c=d.zpp_inner)._invalidate&&c._invalidate(c));if(r.zpp_inner.weak){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;if((d=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var f;_=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(f=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=f:zpp_$nape_util_ZPP_$PubPool.poolVec2=f,zpp_$nape_util_ZPP_$PubPool.nextVec2=f,f.zpp_disp=!0,null!=(f=_).outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=f}if(null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner.immutable_midstep("LineJoint::jointMin"),l!=l)throw haxe_Exception.thrown("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=l&&(this.zpp_inner_zn.jointMin=l,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("LineJoint::jointMax"),s!=s)throw haxe_Exception.thrown("Error: AngleJoint::jointMax cannot be NaN");this.zpp_inner_zn.jointMax!=s&&(this.zpp_inner_zn.jointMax=s,this.zpp_inner.wake())};t["nape.constraint.LineJoint"]=nape_constraint_LineJoint,nape_constraint_LineJoint.__name__="nape.constraint.LineJoint",nape_constraint_LineJoint.__super__=nape_constraint_Constraint,nape_constraint_LineJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_anchor1:function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},set_anchor1:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(l=this.zpp_inner_zn.wrap_a1)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},get_anchor2:function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},set_anchor2:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(l=this.zpp_inner_zn.wrap_a2)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},get_direction:function(){return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},set_direction:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::direction cannot be null");if(null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),null!=(l=this.zpp_inner_zn.wrap_n)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(n){if(this.zpp_inner.immutable_midstep("LineJoint::jointMin"),n!=n)throw haxe_Exception.thrown("Error: AngleJoint::jointMin cannot be NaN");return this.zpp_inner_zn.jointMin!=n&&(this.zpp_inner_zn.jointMin=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(n){if(this.zpp_inner.immutable_midstep("LineJoint::jointMax"),n!=n)throw haxe_Exception.thrown("Error: AngleJoint::jointMax cannot be NaN");return this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},impulse:function(){var n=new nape_geom_MatMN(2,1),e=this.zpp_inner_zn.jAccx;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n.zpp_inner.x[0*n.zpp_inner.n]=e;e=this.zpp_inner_zn.jAccy;if(1>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},__class__:nape_constraint_LineJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_direction:"set_direction",get_direction:"get_direction",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_constraint_MotorJoint=function(n,e,t,i){null==i&&(i=1),null==t&&(t=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$MotorJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==n?null:n.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake()));this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var l=null==e?null:e.zpp_inner;l!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=l,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=l&&this.zpp_inner_zn.b1!=l&&null!=l&&l.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=l&&l.wake()));this.zpp_inner_zn.b2;if(this.zpp_inner.immutable_midstep("MotorJoint::rate"),t!=t)throw haxe_Exception.thrown("Error: MotorJoint::rate cannot be NaN");if(this.zpp_inner_zn.rate!=t&&(this.zpp_inner_zn.rate=t,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("MotorJoint::ratio"),i!=i)throw haxe_Exception.thrown("Error: MotorJoint::ratio cannot be NaN");this.zpp_inner_zn.ratio!=i&&(this.zpp_inner_zn.ratio=i,this.zpp_inner.wake())};t["nape.constraint.MotorJoint"]=nape_constraint_MotorJoint,nape_constraint_MotorJoint.__name__="nape.constraint.MotorJoint",nape_constraint_MotorJoint.__super__=nape_constraint_Constraint,nape_constraint_MotorJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(n){if(this.zpp_inner.immutable_midstep("MotorJoint::ratio"),n!=n)throw haxe_Exception.thrown("Error: MotorJoint::ratio cannot be NaN");return this.zpp_inner_zn.ratio!=n&&(this.zpp_inner_zn.ratio=n,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},get_rate:function(){return this.zpp_inner_zn.rate},set_rate:function(n){if(this.zpp_inner.immutable_midstep("MotorJoint::rate"),n!=n)throw haxe_Exception.thrown("Error: MotorJoint::rate cannot be NaN");return this.zpp_inner_zn.rate!=n&&(this.zpp_inner_zn.rate=n,this.zpp_inner.wake()),this.zpp_inner_zn.rate},impulse:function(){var n=new nape_geom_MatMN(1,1),e=this.zpp_inner_zn.jAcc;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[0*n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},__class__:nape_constraint_MotorJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_rate:"set_rate",get_rate:"get_rate",set_ratio:"set_ratio",get_ratio:"get_ratio",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_constraint_PivotJoint=function(n,e,t,i){this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$PivotJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==n?null:n.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake()));var l=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var s=null==e?null:e.zpp_inner;s!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b1!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake()));l=null==this.zpp_inner_zn.b2;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==t)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(u=this.zpp_inner_zn.wrap_a1)&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),null==t)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=t.zpp_inner)._validate&&h._validate();var a=t.zpp_inner.x;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=t.zpp_inner)._validate&&h._validate();var o=t.zpp_inner.y;if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),a!=a||o!=o)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=u.zpp_inner)._validate&&h._validate(),u.zpp_inner.x==a){if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=u.zpp_inner)._validate&&h._validate(),l=u.zpp_inner.y==o}else l=!1;l||(u.zpp_inner.x=a,u.zpp_inner.y=o,null!=(h=u.zpp_inner)._invalidate&&h._invalidate(h));if(t.zpp_inner.weak){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),t.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var p=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,(_=t).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=p).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==i)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(u=this.zpp_inner_zn.wrap_a2)&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),null==i)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=i.zpp_inner)._validate&&h._validate();a=i.zpp_inner.x;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=i.zpp_inner)._validate&&h._validate();o=i.zpp_inner.y;if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),a!=a||o!=o)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=u.zpp_inner)._validate&&h._validate(),u.zpp_inner.x==a){if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;null!=(h=u.zpp_inner)._validate&&h._validate(),l=u.zpp_inner.y==o}else l=!1;l||(u.zpp_inner.x=a,u.zpp_inner.y=o,null!=(h=u.zpp_inner)._invalidate&&h._invalidate(h));if(i.zpp_inner.weak){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u;if((u=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),i.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _;p=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,(_=i).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=p).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2()};t["nape.constraint.PivotJoint"]=nape_constraint_PivotJoint,nape_constraint_PivotJoint.__name__="nape.constraint.PivotJoint",nape_constraint_PivotJoint.__super__=nape_constraint_Constraint,nape_constraint_PivotJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_anchor1:function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},set_anchor1:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(l=this.zpp_inner_zn.wrap_a1)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},get_anchor2:function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},set_anchor2:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(l=this.zpp_inner_zn.wrap_a2)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},impulse:function(){var n=new nape_geom_MatMN(2,1),e=this.zpp_inner_zn.jAccx;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n.zpp_inner.x[0*n.zpp_inner.n]=e;e=this.zpp_inner_zn.jAccy;if(1>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},__class__:nape_constraint_PivotJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_constraint_PulleyJoint=function(n,e,t,i,r,l,s,a,o,p,h){null==h&&(h=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$PulleyJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var u=null==n?null:n.zpp_inner;u!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=u,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=u&&this.zpp_inner_zn.b2!=u&&this.zpp_inner_zn.b3!=u&&this.zpp_inner_zn.b4!=u&&null!=u&&u.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=u&&u.wake()));var _=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var c=null==e?null:e.zpp_inner;c!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=c,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=c&&this.zpp_inner_zn.b1!=c&&this.zpp_inner_zn.b3!=c&&this.zpp_inner_zn.b4!=c&&null!=c&&c.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=c&&c.wake()));_=null==this.zpp_inner_zn.b2;this.zpp_inner.immutable_midstep("Constraint::body3");var d=null==t?null:t.zpp_inner;d!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=d,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=d&&this.zpp_inner_zn.b1!=d&&this.zpp_inner_zn.b2!=d&&this.zpp_inner_zn.b4!=d&&null!=d&&d.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=d&&d.wake()));_=null==this.zpp_inner_zn.b3;this.zpp_inner.immutable_midstep("Constraint::body4");var f=null==i?null:i.zpp_inner;f!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=f,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=f&&this.zpp_inner_zn.b1!=f&&this.zpp_inner_zn.b2!=f&&this.zpp_inner_zn.b3!=f&&null!=f&&f.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=f&&f.wake()));_=null==this.zpp_inner_zn.b4;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==r)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(m=this.zpp_inner_zn.wrap_a1)&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),null==r)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=r.zpp_inner)._validate&&v._validate();var x=r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=r.zpp_inner)._validate&&v._validate();var b=r.zpp_inner.y;if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),x!=x||b!=b)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(v=m.zpp_inner)._validate&&v._validate(),m.zpp_inner.x==x){if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=m.zpp_inner)._validate&&v._validate(),_=m.zpp_inner.y==b}else _=!1;_||(m.zpp_inner.x=x,m.zpp_inner.y=b,null!=(v=m.zpp_inner)._invalidate&&v._invalidate(v));if(r.zpp_inner.weak){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((m=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var y=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(g=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(g=y).outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=g}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==l)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(m=this.zpp_inner_zn.wrap_a2)&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),null==l)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=l.zpp_inner)._validate&&v._validate();x=l.zpp_inner.x;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=l.zpp_inner)._validate&&v._validate();b=l.zpp_inner.y;if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),x!=x||b!=b)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(v=m.zpp_inner)._validate&&v._validate(),m.zpp_inner.x==x){if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=m.zpp_inner)._validate&&v._validate(),_=m.zpp_inner.y==b}else _=!1;_||(m.zpp_inner.x=x,m.zpp_inner.y=b,null!=(v=m.zpp_inner)._invalidate&&v._invalidate(v));if(l.zpp_inner.weak){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((m=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),l.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");y=l.zpp_inner;l.zpp_inner.outer=null,l.zpp_inner=null,(g=l).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(g=y).outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=g}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==s)throw haxe_Exception.thrown("Error: Constraint::anchor3 cannot be null");if(null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null!=(m=this.zpp_inner_zn.wrap_a3)&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),null==s)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=s.zpp_inner)._validate&&v._validate();x=s.zpp_inner.x;if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=s.zpp_inner)._validate&&v._validate();b=s.zpp_inner.y;if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),x!=x||b!=b)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(v=m.zpp_inner)._validate&&v._validate(),m.zpp_inner.x==x){if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=m.zpp_inner)._validate&&v._validate(),_=m.zpp_inner.y==b}else _=!1;_||(m.zpp_inner.x=x,m.zpp_inner.y=b,null!=(v=m.zpp_inner)._invalidate&&v._invalidate(v));if(s.zpp_inner.weak){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((m=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),s.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");y=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,(g=s).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(g=y).outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=g}if(null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==a)throw haxe_Exception.thrown("Error: Constraint::anchor4 cannot be null");if(null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),null!=(m=this.zpp_inner_zn.wrap_a4)&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),null==a)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=a.zpp_inner)._validate&&v._validate();x=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(v=a.zpp_inner)._validate&&v._validate();b=a.zpp_inner.y;if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((v=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),x!=x||b!=b)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(v=m.zpp_inner)._validate&&v._validate(),m.zpp_inner.x==x){if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var v;null!=(v=m.zpp_inner)._validate&&v._validate(),_=m.zpp_inner.y==b}else _=!1;_||(m.zpp_inner.x=x,m.zpp_inner.y=b,null!=(v=m.zpp_inner)._invalidate&&v._invalidate(v));if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var m;if((m=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),a.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var g;y=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,(g=a).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(g=y).outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=g}if(null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),h!=h)throw haxe_Exception.thrown("Error: PulleyJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=h&&(this.zpp_inner_zn.ratio=h,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),o!=o)throw haxe_Exception.thrown("Error: PulleyJoint::jointMin cannot be NaN");if(o<0)throw haxe_Exception.thrown("Error: PulleyJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=o&&(this.zpp_inner_zn.jointMin=o,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),p!=p)throw haxe_Exception.thrown("Error: PulleyJoint::jointMax cannot be NaN");if(p<0)throw haxe_Exception.thrown("Error: PulleyJoint::jointMax must be >= 0");this.zpp_inner_zn.jointMax!=p&&(this.zpp_inner_zn.jointMax=p,this.zpp_inner.wake())};t["nape.constraint.PulleyJoint"]=nape_constraint_PulleyJoint,nape_constraint_PulleyJoint.__name__="nape.constraint.PulleyJoint",nape_constraint_PulleyJoint.__super__=nape_constraint_Constraint,nape_constraint_PulleyJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&this.zpp_inner_zn.b3!=e&&this.zpp_inner_zn.b4!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&this.zpp_inner_zn.b3!=e&&this.zpp_inner_zn.b4!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_body3:function(){return null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},set_body3:function(n){this.zpp_inner.immutable_midstep("Constraint::body3");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&this.zpp_inner_zn.b2!=e&&this.zpp_inner_zn.b4!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},get_body4:function(){return null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},set_body4:function(n){this.zpp_inner.immutable_midstep("Constraint::body4");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&this.zpp_inner_zn.b2!=e&&this.zpp_inner_zn.b3!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},get_anchor1:function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},set_anchor1:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(l=this.zpp_inner_zn.wrap_a1)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},get_anchor2:function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},set_anchor2:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(l=this.zpp_inner_zn.wrap_a2)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},get_anchor3:function(){return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},set_anchor3:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor3 cannot be null");if(null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null!=(l=this.zpp_inner_zn.wrap_a3)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},get_anchor4:function(){return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},set_anchor4:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor4 cannot be null");if(null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),null!=(l=this.zpp_inner_zn.wrap_a4)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(n){if(this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),n!=n)throw haxe_Exception.thrown("Error: PulleyJoint::jointMin cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: PulleyJoint::jointMin must be >= 0");return this.zpp_inner_zn.jointMin!=n&&(this.zpp_inner_zn.jointMin=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(n){if(this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),n!=n)throw haxe_Exception.thrown("Error: PulleyJoint::jointMax cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: PulleyJoint::jointMax must be >= 0");return this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(n){if(this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),n!=n)throw haxe_Exception.thrown("Error: PulleyJoint::ratio cannot be NaN");return this.zpp_inner_zn.ratio!=n&&(this.zpp_inner_zn.ratio=n,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},isSlack:function(){if(null==(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)||null==(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)||null==(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)||null==(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer))throw haxe_Exception.thrown("Error: Cannot compute slack for PulleyJoint if either body is null.");return this.zpp_inner_zn.slack},impulse:function(){var n=new nape_geom_MatMN(1,1),e=this.zpp_inner_zn.jAcc;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[0*n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&n!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&n!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer),null!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&n(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer),null!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&n(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)},__class__:nape_constraint_PulleyJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_ratio:"set_ratio",get_ratio:"get_ratio",set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_anchor4:"set_anchor4",get_anchor4:"get_anchor4",set_anchor3:"set_anchor3",get_anchor3:"get_anchor3",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body4:"set_body4",get_body4:"get_body4",set_body3:"set_body3",get_body3:"get_body3",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_constraint_UserConstraint=function(n,e){if(null==e&&(e=!1),this.zpp_inner_zn=null,n<1)throw haxe_Exception.thrown("Error: Constraint dimension must be at least 1");this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$UserConstraint(n,e),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1};t["nape.constraint.UserConstraint"]=nape_constraint_UserConstraint,nape_constraint_UserConstraint.__name__="nape.constraint.UserConstraint",nape_constraint_UserConstraint.__super__=nape_constraint_Constraint,nape_constraint_UserConstraint.prototype=$extend(nape_constraint_Constraint.prototype,{__bindVec2:function(){var n=new nape_geom_Vec2;return n.zpp_inner._inuse=!0,n.zpp_inner._invalidate=$bind(e=this.zpp_inner_zn,e.bindVec2_invalidate),n},__copy:function(){throw haxe_Exception.thrown("Error: UserConstraint::__copy must be overriden")},__broken:function(){},__validate:function(){},__draw:function(n){},__prepare:function(){},__position:function(n){throw haxe_Exception.thrown("Error: UserConstraint::__position must be overriden")},__velocity:function(n){throw haxe_Exception.thrown("Error: Userconstraint::__velocity must be overriden")},__eff_mass:function(n){throw haxe_Exception.thrown("Error: UserConstraint::__eff_mass must be overriden")},__clamp:function(n){},__impulse:function(n,e,t){throw haxe_Exception.thrown("Error: UserConstraint::__impulse must be overriden")},impulse:function(){for(var n=new nape_geom_MatMN(this.zpp_inner_zn.dim,1),e=0,t=this.zpp_inner_zn.dim;e<t;){var i=e++,r=this.zpp_inner_zn.jAcc[i];if(i<0||i>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n.zpp_inner.x[i*n.zpp_inner.n]=r}return n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");for(var e=!1,t=0,i=this.zpp_inner_zn.bodies;t<i.length;){var r=i[t];if(++t,r.body==n.zpp_inner){e=!0;break}}if(!e)throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){for(var e=0,t=this.zpp_inner_zn.bodies.length;e<t;){var i=this.zpp_inner_zn.bodies[e];if(null!=i.body){for(var r=!1,l=e+1,s=t;l<s;){var a=l++;if(this.zpp_inner_zn.bodies[a].body==i.body){r=!0;break}}r||n(i.body.outer)}++e}},__invalidate:function(){this.zpp_inner.immutable_midstep("UserConstraint::invalidate()"),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner.wake()},__registerBody:function(n,e){if(this.zpp_inner.immutable_midstep("UserConstraint::registerBody(..)"),n!=e){if(null!=n){if(!this.zpp_inner_zn.remBody(n.zpp_inner))throw haxe_Exception.thrown("Error: oldBody is not registered to the cosntraint");this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&n.zpp_inner.wake()}null!=e&&this.zpp_inner_zn.addBody(e.zpp_inner),this.zpp_inner.wake(),null!=e&&e.zpp_inner.wake()}return e},__class__:nape_constraint_UserConstraint});var nape_constraint_WeldJoint=function(n,e,t,i,r){null==r&&(r=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$WeldJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape_constraint_Constraint.zpp_internalAlloc=!0,nape_constraint_Constraint.call(this),nape_constraint_Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var l=null==n?null:n.zpp_inner;l!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=l,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=l&&this.zpp_inner_zn.b2!=l&&null!=l&&l.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=l&&l.wake()));var s=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==e?null:e.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake()));s=null==this.zpp_inner_zn.b2;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==t)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(_=this.zpp_inner_zn.wrap_a1)&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),null==t)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=t.zpp_inner)._validate&&u._validate();var o=t.zpp_inner.x;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=t.zpp_inner)._validate&&u._validate();var p=t.zpp_inner.y;if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),o!=o||p!=p)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=_.zpp_inner)._validate&&u._validate(),_.zpp_inner.x==o){if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=_.zpp_inner)._validate&&u._validate(),s=_.zpp_inner.y==p}else s=!1;s||(_.zpp_inner.x=o,_.zpp_inner.y=p,null!=(u=_.zpp_inner)._invalidate&&u._invalidate(u));if(t.zpp_inner.weak){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((_=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=_._isimmutable&&_._isimmutable(),t.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var h=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,(c=t).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=c:zpp_$nape_util_ZPP_$PubPool.poolVec2=c,zpp_$nape_util_ZPP_$PubPool.nextVec2=c,c.zpp_disp=!0,null!=(c=h).outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==i)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(_=this.zpp_inner_zn.wrap_a2)&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),null==i)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=i.zpp_inner)._validate&&u._validate();o=i.zpp_inner.x;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=i.zpp_inner)._validate&&u._validate();p=i.zpp_inner.y;if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),o!=o||p!=p)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=_.zpp_inner)._validate&&u._validate(),_.zpp_inner.x==o){if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u;null!=(u=_.zpp_inner)._validate&&u._validate(),s=_.zpp_inner.y==p}else s=!1;s||(_.zpp_inner.x=o,_.zpp_inner.y=p,null!=(u=_.zpp_inner)._invalidate&&u._invalidate(u));if(i.zpp_inner.weak){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var _;if((_=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=_._isimmutable&&_._isimmutable(),i.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var c;h=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,(c=i).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=c:zpp_$nape_util_ZPP_$PubPool.poolVec2=c,zpp_$nape_util_ZPP_$PubPool.nextVec2=c,c.zpp_disp=!0,null!=(c=h).outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("WeldJoint::phase"),r!=r)throw haxe_Exception.thrown("Error: WeldJoint::phase cannot be NaN");this.zpp_inner_zn.phase!=r&&(this.zpp_inner_zn.phase=r,this.zpp_inner.wake())};t["nape.constraint.WeldJoint"]=nape_constraint_WeldJoint,nape_constraint_WeldJoint.__name__="nape.constraint.WeldJoint",nape_constraint_WeldJoint.__super__=nape_constraint_Constraint,nape_constraint_WeldJoint.prototype=$extend(nape_constraint_Constraint.prototype,{get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(n){this.zpp_inner.immutable_midstep("Constraint::body1");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b2!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(n){this.zpp_inner.immutable_midstep("Constraint::body2");var e=null==n?null:n.zpp_inner;return e!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=e,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=e&&this.zpp_inner_zn.b1!=e&&null!=e&&e.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=e&&e.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},get_anchor1:function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},set_anchor1:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor1 cannot be null");if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=(l=this.zpp_inner_zn.wrap_a1)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},get_anchor2:function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},set_anchor2:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Constraint::anchor2 cannot be null");if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=(l=this.zpp_inner_zn.wrap_a2)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},get_phase:function(){return this.zpp_inner_zn.phase},set_phase:function(n){if(this.zpp_inner.immutable_midstep("WeldJoint::phase"),n!=n)throw haxe_Exception.thrown("Error: WeldJoint::phase cannot be NaN");return this.zpp_inner_zn.phase!=n&&(this.zpp_inner_zn.phase=n,this.zpp_inner.wake()),this.zpp_inner_zn.phase},impulse:function(){var n=new nape_geom_MatMN(3,1),e=this.zpp_inner_zn.jAccx;if(0>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n.zpp_inner.x[0*n.zpp_inner.n]=e;e=this.zpp_inner_zn.jAccy;if(1>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n.zpp_inner.x[n.zpp_inner.n]=e;e=this.zpp_inner_zn.jAccz;if(1>=n.zpp_inner.m||0>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return n.zpp_inner.x[n.zpp_inner.n]=e,n},bodyImpulse:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate impulse on null body");if(n!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw haxe_Exception.thrown("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(n.zpp_inner):nape_geom_Vec3.get()},visitBodies:function(n){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&n(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},__class__:nape_constraint_WeldJoint,__properties__:$extend(nape_constraint_Constraint.prototype.__properties__,{set_phase:"set_phase",get_phase:"get_phase",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var nape_dynamics_Arbiter=function(){if(this.zpp_inner=null,!zpp_$nape_dynamics_ZPP_$Arbiter.internal)throw haxe_Exception.thrown("Error: Cannot instantiate Arbiter derp!")};t["nape.dynamics.Arbiter"]=nape_dynamics_Arbiter,nape_dynamics_Arbiter.__name__="nape.dynamics.Arbiter",nape_dynamics_Arbiter.prototype={get_isSleeping:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.sleeping},get_type:function(){return zpp_$nape_dynamics_ZPP_$Arbiter.types[this.zpp_inner.type]},isCollisionArbiter:function(){return this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL},isFluidArbiter:function(){return this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID},isSensorArbiter:function(){return this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR},get_collisionArbiter:function(){return this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?this.zpp_inner.colarb.outer_zn:null},get_fluidArbiter:function(){return this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?this.zpp_inner.fluidarb.outer_zn:null},get_shape1:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer},get_shape2:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer},get_body1:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer},get_body2:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer},get_state:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n=this.zpp_inner.immState;return 5==n?(null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT):1==n?(null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE):6==n?(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE):(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE)},totalImpulse:function(n,e){if(null==e&&(e=!1),!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t,i;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");i=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else i=!1;if(i){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else t=!1;if(t)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");return nape_geom_Vec3.get(0,0,0)},toString:function(){var n=this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?"CollisionArbiter":this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared)return n+"(object-pooled)";if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var e=n+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|";if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t,i=e+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")";e=this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"";if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var r=this.zpp_inner.immState;if(5==r)null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),t=zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT;else if(1==r)null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),t=zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE;else{6==r?(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),t=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE):(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),t=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE)}return i+e+"<-"+t.toString()},__class__:nape_dynamics_Arbiter,__properties__:{get_state:"get_state",get_body2:"get_body2",get_body1:"get_body1",get_shape2:"get_shape2",get_shape1:"get_shape1",get_fluidArbiter:"get_fluidArbiter",get_collisionArbiter:"get_collisionArbiter",get_type:"get_type",get_isSleeping:"get_isSleeping"}};var nape_dynamics_ArbiterIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$ArbiterList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ArbiterIterator derp!")};t["nape.dynamics.ArbiterIterator"]=nape_dynamics_ArbiterIterator,nape_dynamics_ArbiterIterator.__name__="nape.dynamics.ArbiterIterator",nape_dynamics_ArbiterIterator.get=function(n){var e;if(null==nape_dynamics_ArbiterIterator.zpp_pool){zpp_$nape_util_ZPP_$ArbiterList.internal=!0;var t=new nape_dynamics_ArbiterIterator;zpp_$nape_util_ZPP_$ArbiterList.internal=!1,e=t}else{var i=nape_dynamics_ArbiterIterator.zpp_pool;nape_dynamics_ArbiterIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_dynamics_ArbiterIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<n||(this.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_dynamics_ArbiterIterator};var nape_dynamics_ArbiterList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$ArbiterList,this.zpp_inner.outer=this};t["nape.dynamics.ArbiterList"]=nape_dynamics_ArbiterList,nape_dynamics_ArbiterList.__name__="nape.dynamics.ArbiterList",nape_dynamics_ArbiterList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_dynamics_ArbiterList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_dynamics_ArbiterList.prototype={get_length:function(){return this.zpp_gl()},zpp_gl:function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.head;null!=n;){n.elt.active&&this.zpp_inner.user_length++,n=n.next}}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},has:function(n){return this.zpp_vm(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){if(this.zpp_vm(),n<0||n>=this.zpp_gl())throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(n=this.zpp_gl()-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.head;;){if(this.zpp_inner.at_ite.elt.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=n;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){if(this.zpp_inner.at_ite.elt.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ArbiterList is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ArbiterList is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ArbiterList is immutable");if(this.zpp_inner.modify_test(),this.empty())throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_vm();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.wrapper()},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ArbiterList is immutable");if(this.zpp_inner.modify_test(),this.empty())throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_vm();var n=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var e=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),t=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var t=(n=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),t=n.wrapper()},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ArbiterList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_vm(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ArbiterList is immutable");if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},empty:function(){return 0==this.zpp_gl()},iterator:function(){return this.zpp_vm(),nape_dynamics_ArbiterIterator.get(this)},copy:function(n){null==n&&(n=!1);for(var e=new nape_dynamics_ArbiterList,t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,r=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<r?i=!0:(t.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=t,t.zpp_inner=null,i=!1),!i)break;t.zpp_critical=!1;var l,s=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Arbiter is not a copyable type");l=s,e.push(l)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");for(var e=n.iterator();;){e.zpp_inner.zpp_inner.valmod();var t,i=e.zpp_inner.zpp_gl();if(e.zpp_critical=!0,e.zpp_i<i?t=!0:(e.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=e,e.zpp_inner=null,t=!1),!t)break;e.zpp_critical=!1;var r=e.zpp_inner.at(e.zpp_i++);this.has(r)||this.add(r)}},toString:function(){for(var n="[",e=!0,t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,r=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<r?i=!0:(t.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=t,t.zpp_inner=null,i=!1),!i)break;t.zpp_critical=!1;var l=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==l?"NULL":l.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");for(var e=this.iterator();;){e.zpp_inner.zpp_inner.valmod();var t,i=e.zpp_inner.zpp_gl();if(e.zpp_critical=!0,e.zpp_i<i?t=!0:(e.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=e,e.zpp_inner=null,t=!1),!t)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;e<this.zpp_gl();){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_dynamics_ArbiterList,__properties__:{get_length:"get_length"}};var nape_dynamics_ArbiterType=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ArbiterType derp!")};t["nape.dynamics.ArbiterType"]=nape_dynamics_ArbiterType,nape_dynamics_ArbiterType.__name__="nape.dynamics.ArbiterType",nape_dynamics_ArbiterType.__properties__={get_FLUID:"get_FLUID",get_SENSOR:"get_SENSOR",get_COLLISION:"get_COLLISION"},nape_dynamics_ArbiterType.get_COLLISION=function(){return null==zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION},nape_dynamics_ArbiterType.get_SENSOR=function(){return null==zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR},nape_dynamics_ArbiterType.get_FLUID=function(){return null==zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID},nape_dynamics_ArbiterType.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION?"COLLISION":(null==zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR?"SENSOR":(null==zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID?"FLUID":""))},__class__:nape_dynamics_ArbiterType};var nape_dynamics_CollisionArbiter=function(){if(!zpp_$nape_dynamics_ZPP_$Arbiter.internal)throw haxe_Exception.thrown("Error: Cannot instantiate CollisionArbiter derp!");nape_dynamics_Arbiter.call(this)};t["nape.dynamics.CollisionArbiter"]=nape_dynamics_CollisionArbiter,nape_dynamics_CollisionArbiter.__name__="nape.dynamics.CollisionArbiter",nape_dynamics_CollisionArbiter.__super__=nape_dynamics_Arbiter,nape_dynamics_CollisionArbiter.prototype=$extend(nape_dynamics_Arbiter.prototype,{get_contacts:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return null==this.zpp_inner.colarb.wrap_contacts&&this.zpp_inner.colarb.setupcontacts(),this.zpp_inner.colarb.wrap_contacts},get_normal:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return null==this.zpp_inner.colarb.wrap_normal&&this.zpp_inner.colarb.getnormal(),this.zpp_inner.colarb.wrap_normal},get_radius:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.colarb.radius},get_referenceEdge1:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n,e=this.zpp_inner.colarb.__ref_edge1;if(null!=e){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");if(1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner.type){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");n=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner!=e.polygon}else n=!0}else n=!1;return n&&(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},get_referenceEdge2:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n,e=this.zpp_inner.colarb.__ref_edge1;if(null!=e){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");if(1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner.type){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");n=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner!=e.polygon}else n=!0}else n=!1;return n&&(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},firstVertex:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return!!(null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2))&&-1==this.zpp_inner.colarb.__ref_vertex},secondVertex:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return!!(null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2))&&1==this.zpp_inner.colarb.__ref_vertex},normalImpulse:function(n,e){if(null==e&&(e=!1),!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t,i;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");i=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else i=!1;if(i){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else t=!1;if(t)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var r=0,l=0,s=0,a=this.zpp_inner.colarb;if(!e||a.oc1.fresh){var o=h=1;if(null!=(p=a.oc1.wrapper().normalImpulse(n))&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),r+=p.zpp_inner.x*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),l+=p.zpp_inner.y*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),s+=p.zpp_inner.z*h,p.dispose()}if(a.hc2&&(!e||a.oc2.fresh)){var p,h,u;o=h=1;if(null!=(p=a.oc2.wrapper().normalImpulse(n))&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),r+=p.zpp_inner.x*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),l+=p.zpp_inner.y*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),s+=p.zpp_inner.z*h,p.dispose()}return nape_geom_Vec3.get(r,l,s)},tangentImpulse:function(n,e){if(null==e&&(e=!1),!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t,i;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");i=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else i=!1;if(i){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else t=!1;if(t)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var r=0,l=0,s=0,a=this.zpp_inner.colarb;if(!e||a.oc1.fresh){var o=h=1;if(null!=(p=a.oc1.wrapper().tangentImpulse(n))&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),r+=p.zpp_inner.x*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),l+=p.zpp_inner.y*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),s+=p.zpp_inner.z*h,p.dispose()}if(a.hc2&&(!e||a.oc2.fresh)){var p,h,u;o=h=1;if(null!=(p=a.oc2.wrapper().tangentImpulse(n))&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),r+=p.zpp_inner.x*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),l+=p.zpp_inner.y*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),s+=p.zpp_inner.z*h,p.dispose()}return nape_geom_Vec3.get(r,l,s)},totalImpulse:function(n,e){if(null==e&&(e=!1),!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t,i;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");i=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else i=!1;if(i){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else t=!1;if(t)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var r=0,l=0,s=0,a=this.zpp_inner.colarb;if(!e||a.oc1.fresh){var o=h=1;if(null!=(p=a.oc1.wrapper().totalImpulse(n))&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),r+=p.zpp_inner.x*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),l+=p.zpp_inner.y*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),s+=p.zpp_inner.z*h,p.dispose()}if(a.hc2&&(!e||a.oc2.fresh)){var p,h,u;o=h=1;if(null!=(p=a.oc2.wrapper().totalImpulse(n))&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),r+=p.zpp_inner.x*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),l+=p.zpp_inner.y*o,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),s+=p.zpp_inner.z*h,p.dispose()}return nape_geom_Vec3.get(r,l,s)},rollingImpulse:function(n,e){if(null==e&&(e=!1),!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t,i;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");i=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else i=!1;if(i){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else t=!1;if(t)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var r=this.zpp_inner.colarb;return!e||r.oc1.fresh?r.oc1.wrapper().rollingImpulse(n):0},get_elasticity:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n=this.zpp_inner.colarb;return n.invalidated&&(n.invalidated=!1,n.userdef_restitution||(n.s1.material.elasticity<=-1/0||n.s2.material.elasticity<=-1/0?n.restitution=0:n.s1.material.elasticity>=1/0||n.s2.material.elasticity>=1/0?n.restitution=1:n.restitution=(n.s1.material.elasticity+n.s2.material.elasticity)/2,n.restitution<0&&(n.restitution=0),n.restitution>1&&(n.restitution=1)),n.userdef_dyn_fric||(n.dyn_fric=Math.sqrt(n.s1.material.dynamicFriction*n.s2.material.dynamicFriction)),n.userdef_stat_fric||(n.stat_fric=Math.sqrt(n.s1.material.staticFriction*n.s2.material.staticFriction)),n.userdef_rfric||(n.rfric=Math.sqrt(n.s1.material.rollingFriction*n.s2.material.rollingFriction))),n.restitution},set_elasticity:function(n){if(!this.zpp_inner.colarb.mutable)throw haxe_Exception.thrown("Error: CollisionArbiter::elasticity is only mutable during a pre-handler");if(n!=n)throw haxe_Exception.thrown("Error: CollisionArbiter::elasticity cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: CollisionArbiter::elasticity cannot be negative");var e;if((e=this.zpp_inner.colarb).restitution=n,e.userdef_restitution=!0,!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return(e=this.zpp_inner.colarb).invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),e.restitution>1&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.restitution},get_dynamicFriction:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n=this.zpp_inner.colarb;return n.invalidated&&(n.invalidated=!1,n.userdef_restitution||(n.s1.material.elasticity<=-1/0||n.s2.material.elasticity<=-1/0?n.restitution=0:n.s1.material.elasticity>=1/0||n.s2.material.elasticity>=1/0?n.restitution=1:n.restitution=(n.s1.material.elasticity+n.s2.material.elasticity)/2,n.restitution<0&&(n.restitution=0),n.restitution>1&&(n.restitution=1)),n.userdef_dyn_fric||(n.dyn_fric=Math.sqrt(n.s1.material.dynamicFriction*n.s2.material.dynamicFriction)),n.userdef_stat_fric||(n.stat_fric=Math.sqrt(n.s1.material.staticFriction*n.s2.material.staticFriction)),n.userdef_rfric||(n.rfric=Math.sqrt(n.s1.material.rollingFriction*n.s2.material.rollingFriction))),n.dyn_fric},set_dynamicFriction:function(n){if(!this.zpp_inner.colarb.mutable)throw haxe_Exception.thrown("Error: CollisionArbiter::dynamicFriction is only mutable during a pre-handler");if(n!=n)throw haxe_Exception.thrown("Error: CollisionArbiter::dynamicFriction cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: CollisionArbiter::dynamicFriction cannot be negative");var e;if((e=this.zpp_inner.colarb).dyn_fric=n,e.userdef_dyn_fric=!0,!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return(e=this.zpp_inner.colarb).invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),e.restitution>1&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.dyn_fric},get_staticFriction:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n=this.zpp_inner.colarb;return n.invalidated&&(n.invalidated=!1,n.userdef_restitution||(n.s1.material.elasticity<=-1/0||n.s2.material.elasticity<=-1/0?n.restitution=0:n.s1.material.elasticity>=1/0||n.s2.material.elasticity>=1/0?n.restitution=1:n.restitution=(n.s1.material.elasticity+n.s2.material.elasticity)/2,n.restitution<0&&(n.restitution=0),n.restitution>1&&(n.restitution=1)),n.userdef_dyn_fric||(n.dyn_fric=Math.sqrt(n.s1.material.dynamicFriction*n.s2.material.dynamicFriction)),n.userdef_stat_fric||(n.stat_fric=Math.sqrt(n.s1.material.staticFriction*n.s2.material.staticFriction)),n.userdef_rfric||(n.rfric=Math.sqrt(n.s1.material.rollingFriction*n.s2.material.rollingFriction))),n.stat_fric},set_staticFriction:function(n){if(!this.zpp_inner.colarb.mutable)throw haxe_Exception.thrown("Error: CollisionArbiter::staticFriction is only mutable during a pre-handler");if(n!=n)throw haxe_Exception.thrown("Error: CollisionArbiter::staticFriction cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: CollisionArbiter::staticFriction cannot be negative");var e;if((e=this.zpp_inner.colarb).stat_fric=n,e.userdef_stat_fric=!0,!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return(e=this.zpp_inner.colarb).invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),e.restitution>1&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.stat_fric},get_rollingFriction:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var n=this.zpp_inner.colarb;return n.invalidated&&(n.invalidated=!1,n.userdef_restitution||(n.s1.material.elasticity<=-1/0||n.s2.material.elasticity<=-1/0?n.restitution=0:n.s1.material.elasticity>=1/0||n.s2.material.elasticity>=1/0?n.restitution=1:n.restitution=(n.s1.material.elasticity+n.s2.material.elasticity)/2,n.restitution<0&&(n.restitution=0),n.restitution>1&&(n.restitution=1)),n.userdef_dyn_fric||(n.dyn_fric=Math.sqrt(n.s1.material.dynamicFriction*n.s2.material.dynamicFriction)),n.userdef_stat_fric||(n.stat_fric=Math.sqrt(n.s1.material.staticFriction*n.s2.material.staticFriction)),n.userdef_rfric||(n.rfric=Math.sqrt(n.s1.material.rollingFriction*n.s2.material.rollingFriction))),n.rfric},set_rollingFriction:function(n){if(!this.zpp_inner.colarb.mutable)throw haxe_Exception.thrown("Error: CollisionArbiter::rollingFriction is only mutable during a pre-handler");if(n!=n)throw haxe_Exception.thrown("Error: CollisionArbiter::rollingFriction cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: CollisionArbiter::rollingFriction cannot be negative");var e;if((e=this.zpp_inner.colarb).rfric=n,e.userdef_rfric=!0,!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return(e=this.zpp_inner.colarb).invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),e.restitution>1&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.rfric},__class__:nape_dynamics_CollisionArbiter,__properties__:$extend(nape_dynamics_Arbiter.prototype.__properties__,{set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",get_dynamicFriction:"get_dynamicFriction",set_elasticity:"set_elasticity",get_elasticity:"get_elasticity",get_referenceEdge2:"get_referenceEdge2",get_referenceEdge1:"get_referenceEdge1",get_radius:"get_radius",get_normal:"get_normal",get_contacts:"get_contacts"})});var nape_dynamics_Contact=function(){if(this.zpp_inner=null,!zpp_$nape_dynamics_ZPP_$Contact.internal)throw haxe_Exception.thrown("Error: Cannot instantiate Contact derp!")};t["nape.dynamics.Contact"]=nape_dynamics_Contact,nape_dynamics_Contact.__name__="nape.dynamics.Contact",nape_dynamics_Contact.prototype={get_arbiter:function(){if(null==this.zpp_inner.arbiter)return null;var n=this.zpp_inner.arbiter.outer;return n.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?n.zpp_inner.colarb.outer_zn:null},get_penetration:function(){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");return-this.zpp_inner.dist},get_position:function(){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");return null==this.zpp_inner.wrap_position&&this.zpp_inner.getposition(),this.zpp_inner.wrap_position},get_fresh:function(){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");return this.zpp_inner.fresh},normalImpulse:function(n){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");var e=this.zpp_inner.arbiter.colarb,t=this.zpp_inner.inner,i=t.jnAcc;if(null==n)return nape_geom_Vec3.get(e.nx*i,e.ny*i);if(n!=e.b1.outer&&n!=e.b2.outer)throw haxe_Exception.thrown("Error: Contact does not relate to the given body");return n==e.b1.outer?nape_geom_Vec3.get(e.nx*-i,e.ny*-i,-(e.ny*t.r1x-e.nx*t.r1y)*i):nape_geom_Vec3.get(e.nx*i,e.ny*i,(e.ny*t.r2x-e.nx*t.r2y)*i)},tangentImpulse:function(n){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");var e=this.zpp_inner.arbiter.colarb,t=this.zpp_inner.inner,i=t.jtAcc;if(null==n)return nape_geom_Vec3.get(-e.ny*i,e.nx*i);if(n!=e.b1.outer&&n!=e.b2.outer)throw haxe_Exception.thrown("Error: Contact does not relate to the given body");return n==e.b1.outer?nape_geom_Vec3.get(e.ny*i,-e.nx*i,-(t.r1x*e.nx+t.r1y*e.ny)*i):nape_geom_Vec3.get(-e.ny*i,e.nx*i,(t.r2x*e.nx+t.r2y*e.ny)*i)},rollingImpulse:function(n){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");var e=this.zpp_inner.arbiter.colarb,t=this.zpp_inner.arbiter.colarb.jrAcc;if(null==n)return t;if(n!=e.b1.outer&&n!=e.b2.outer)throw haxe_Exception.thrown("Error: Contact does not relate to the given body");return n==e.b1.outer?-t:t},totalImpulse:function(n){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");var e=this.zpp_inner.arbiter.colarb,t=this.zpp_inner.inner,i=t.jnAcc,r=t.jtAcc,l=e.jrAcc;if(null==n)return nape_geom_Vec3.get(e.nx*i-e.ny*r,e.ny*i+e.nx*r,l);if(n!=e.b1.outer&&n!=e.b2.outer)throw haxe_Exception.thrown("Error: Contact does not relate to the given body");var s=e.nx*i-e.ny*r,a=e.ny*i+e.nx*r;return n==e.b1.outer?nape_geom_Vec3.get(-s,-a,-(a*t.r1x-s*t.r1y)-l):nape_geom_Vec3.get(s,a,a*t.r2x-s*t.r2y+l)},get_friction:function(){if(this.zpp_inner.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");return this.zpp_inner.inner.friction},toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:nape_dynamics_Contact,__properties__:{get_friction:"get_friction",get_fresh:"get_fresh",get_position:"get_position",get_penetration:"get_penetration",get_arbiter:"get_arbiter"}};var nape_dynamics_ContactIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$ContactList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ContactIterator derp!")};t["nape.dynamics.ContactIterator"]=nape_dynamics_ContactIterator,nape_dynamics_ContactIterator.__name__="nape.dynamics.ContactIterator",nape_dynamics_ContactIterator.get=function(n){var e;if(null==nape_dynamics_ContactIterator.zpp_pool){zpp_$nape_util_ZPP_$ContactList.internal=!0;var t=new nape_dynamics_ContactIterator;zpp_$nape_util_ZPP_$ContactList.internal=!1,e=t}else{var i=nape_dynamics_ContactIterator.zpp_pool;nape_dynamics_ContactIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_dynamics_ContactIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var e=n.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&n.zpp_inner.user_length++,e=e.next}}var i=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<i||(this.zpp_next=nape_dynamics_ContactIterator.zpp_pool,nape_dynamics_ContactIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_dynamics_ContactIterator};var nape_dynamics_ContactList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$ContactList,this.zpp_inner.outer=this};t["nape.dynamics.ContactList"]=nape_dynamics_ContactList,nape_dynamics_ContactList.__name__="nape.dynamics.ContactList",nape_dynamics_ContactList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_dynamics_ContactList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_dynamics_ContactList.prototype={get_length:function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var e=n;e.active&&e.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}return this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var t=this.zpp_inner.inner.next;null!=t;){(i=t).active&&i.arbiter.active&&this.zpp_inner.user_length++,t=t.next}}e=n>=this.zpp_inner.user_length}else e=!0;if(e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(t=this.zpp_inner.inner.next;null!=t;){var i;(i=t).active&&i.arbiter.active&&this.zpp_inner.user_length++,t=t.next}}n=this.zpp_inner.user_length-1-n}if(n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){if((r=this.zpp_inner.at_ite).active&&r.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=n;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){var r;if((r=this.zpp_inner.at_ite).active&&r.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.wrapper()},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ContactList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){(l=i).active&&l.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(0==this.zpp_inner.user_length)t=null;else{var r=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(i=this.zpp_inner.inner.next;null!=i;){var l;(l=i).active&&l.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}t=r.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ContactList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){(l=i).active&&l.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(0==this.zpp_inner.user_length)t=null;else{var r=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(i=this.zpp_inner.inner.next;null!=i;){var l;(l=i).active&&l.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}t=r.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ContactList is immutable");if(this.zpp_inner.modify_test(),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){(l=n).active&&l.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(n=this.zpp_inner.inner.next;null!=n;){(l=n).active&&l.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(1==this.zpp_inner.user_length)i=null;else{var r=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(n=this.zpp_inner.inner.next;null!=n;){var l;(l=n).active&&l.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}i=r.iterator_at(this.zpp_inner.user_length-2)}var t=(e=null==i?this.zpp_inner.inner.next:i.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),t=e.wrapper()},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ContactList is immutable");if(this.zpp_inner.modify_test(),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){(r=n).active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(n=this.zpp_inner.inner.next;null!=n;){(r=n).active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(n=this.zpp_inner.inner.next;null!=n;){var r;(r=n).active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}t=i.iterator_at(this.zpp_inner.user_length-2)}var l=(e=null==t?this.zpp_inner.inner.next:t.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(l),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var l=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(l),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),l=e.wrapper()},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ContactList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.next;null!=t;){if(t==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ContactList is immutable");if(this.zpp_inner.reverse_flag)for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){(e=n).active&&e.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)break;this.pop()}else for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(n=this.zpp_inner.inner.next;null!=n;){var e;(e=n).active&&e.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)break;this.shift()}},empty:function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var e=n;e.active&&e.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}return 0==this.zpp_inner.user_length},iterator:function(){return this.zpp_inner.valmod(),nape_dynamics_ContactIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_dynamics_ContactList;this.zpp_inner.valmod();for(var t=nape_dynamics_ContactIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var r=i.zpp_inner.inner.next;null!=r;){var l=r;l.active&&l.arbiter.active&&i.zpp_inner.user_length++,r=r.next}}var s,a=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<a?s=!0:(t.zpp_next=nape_dynamics_ContactIterator.zpp_pool,nape_dynamics_ContactIterator.zpp_pool=t,t.zpp_inner=null,s=!1),!s)break;t.zpp_critical=!1;var o,p=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Contact is not a copyable type");o=p,e.push(o)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_dynamics_ContactIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;if(t.zpp_inner.valmod(),t.zpp_inner.zip_length){t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=0;for(var i=t.zpp_inner.inner.next;null!=i;){var r=i;r.active&&r.arbiter.active&&t.zpp_inner.user_length++,i=i.next}}var l,s=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<s?l=!0:(e.zpp_next=nape_dynamics_ContactIterator.zpp_pool,nape_dynamics_ContactIterator.zpp_pool=e,e.zpp_inner=null,l=!1),!l)break;e.zpp_critical=!1;var a=e.zpp_inner.at(e.zpp_i++);this.has(a)||(this.zpp_inner.reverse_flag?this.push(a):this.unshift(a))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_dynamics_ContactIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var r=i.zpp_inner.inner.next;null!=r;){var l=r;l.active&&l.arbiter.active&&i.zpp_inner.user_length++,r=r.next}}var s,a=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<a?s=!0:(t.zpp_next=nape_dynamics_ContactIterator.zpp_pool,nape_dynamics_ContactIterator.zpp_pool=t,t.zpp_inner=null,s=!1),!s)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==o?"NULL":o.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_dynamics_ContactIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;if(t.zpp_inner.valmod(),t.zpp_inner.zip_length){t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=0;for(var i=t.zpp_inner.inner.next;null!=i;){var r=i;r.active&&r.arbiter.active&&t.zpp_inner.user_length++,i=i.next}}var l,s=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<s?l=!0:(e.zpp_next=nape_dynamics_ContactIterator.zpp_pool,nape_dynamics_ContactIterator.zpp_pool=e,e.zpp_inner=null,l=!1),!l)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_dynamics_ContactIterator.zpp_pool,nape_dynamics_ContactIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var t=this.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,t=t.next}}if(!(e<this.zpp_inner.user_length))break;var r=this.at(e);try{n(r)?++e:this.remove(r)}catch(n){break}}return this},__class__:nape_dynamics_ContactList,__properties__:{get_length:"get_length"}};var nape_dynamics_FluidArbiter=function(){if(!zpp_$nape_dynamics_ZPP_$Arbiter.internal)throw haxe_Exception.thrown("Error: Cannot instantiate FluidArbiter derp!");nape_dynamics_Arbiter.call(this)};t["nape.dynamics.FluidArbiter"]=nape_dynamics_FluidArbiter,nape_dynamics_FluidArbiter.__name__="nape.dynamics.FluidArbiter",nape_dynamics_FluidArbiter.__super__=nape_dynamics_Arbiter,nape_dynamics_FluidArbiter.prototype=$extend(nape_dynamics_Arbiter.prototype,{get_position:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},set_position:function(n){if(!this.zpp_inner.fluidarb.mutable)throw haxe_Exception.thrown("Error: Arbiter is mutable only within a pre-handler");if(null==n)throw haxe_Exception.thrown("Error: FluidArbiter::position cannot be null");if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");if(null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),null!=(l=this.zpp_inner.fluidarb.wrap_position)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},get_overlap:function(){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.fluidarb.overlap},set_overlap:function(n){if(!this.zpp_inner.fluidarb.mutable)throw haxe_Exception.thrown("Error: Arbiter is mutable only within a pre-handler");if(n!=n)throw haxe_Exception.thrown("Error: FluidArbiter::overlap cannot be NaN");if(n<=0||n==1/0)throw haxe_Exception.thrown("Error: FluidArbiter::overlap must be strictly positive and non infinite");if(this.zpp_inner.fluidarb.overlap=n,!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");return this.zpp_inner.fluidarb.overlap},buoyancyImpulse:function(n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var e,t;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else t=!1;if(t){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");e=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else e=!1;if(e)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var i=this.zpp_inner.fluidarb;return null==n?nape_geom_Vec3.get(i.buoyx,i.buoyy,0):n.zpp_inner==this.zpp_inner.b2?nape_geom_Vec3.get(i.buoyx,i.buoyy,i.buoyy*i.r2x-i.buoyx*i.r2y):nape_geom_Vec3.get(-i.buoyx,-i.buoyy,-(i.buoyy*i.r1x-i.buoyx*i.r1y))},dragImpulse:function(n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var e,t;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else t=!1;if(t){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");e=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else e=!1;if(e)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var i=this.zpp_inner.fluidarb,r=null==n||n.zpp_inner==this.zpp_inner.b2?1:-1;return nape_geom_Vec3.get(i.dampx*r,i.dampy*r,i.adamp*r)},totalImpulse:function(n,e){if(null==e&&(e=!1),!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");var t;if(null!=n){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");t=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else t=!1;if(t){if(!this.zpp_inner.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");i=n!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else i=!1;if(i)throw haxe_Exception.thrown("Error: Arbiter does not relate to body");var i=this.buoyancyImpulse(n),r=this.dragImpulse(n);if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=r.zpp_inner)._validate&&h._validate();var l=r.zpp_inner.x;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=i.zpp_inner)._validate&&h._validate();var s=l+i.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(r.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(r.zpp_inner.x=s,null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(h=r.zpp_inner)._validate&&h._validate(),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=r.zpp_inner)._validate&&h._validate();var a=r.zpp_inner.y;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=i.zpp_inner)._validate&&h._validate();var o=a+i.zpp_inner.y;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(r.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(r.zpp_inner.y=o,null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(h=r.zpp_inner)._validate&&h._validate(),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=r.zpp_inner)._validate&&h._validate();var p=r.zpp_inner.z;if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=i.zpp_inner)._validate&&h._validate();var h,u=p+i.zpp_inner.z;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(r.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(r.zpp_inner.z=u,null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(h=r.zpp_inner)._validate&&h._validate(),i.dispose(),r},__class__:nape_dynamics_FluidArbiter,__properties__:$extend(nape_dynamics_Arbiter.prototype.__properties__,{set_overlap:"set_overlap",get_overlap:"get_overlap",set_position:"set_position",get_position:"get_position"})});var nape_dynamics_InteractionFilter=function(n,e,t,i,r,l){null==l&&(l=-1),null==r&&(r=1),null==i&&(i=-1),null==t&&(t=1),null==e&&(e=-1),null==n&&(n=1),this.zpp_inner=null,null==zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool?this.zpp_inner=new zpp_$nape_dynamics_ZPP_$InteractionFilter:(this.zpp_inner=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),this.zpp_inner.outer=this,this.zpp_inner.collisionGroup!=n&&(this.zpp_inner.collisionGroup=n,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask!=e&&(this.zpp_inner.collisionMask=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup!=t&&(this.zpp_inner.sensorGroup=t,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask!=i&&(this.zpp_inner.sensorMask=i,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup!=r&&(this.zpp_inner.fluidGroup=r,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask!=l&&(this.zpp_inner.fluidMask=l,this.zpp_inner.invalidate())};t["nape.dynamics.InteractionFilter"]=nape_dynamics_InteractionFilter,nape_dynamics_InteractionFilter.__name__="nape.dynamics.InteractionFilter",nape_dynamics_InteractionFilter.prototype={get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_shapes:function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=zpp_$nape_util_ZPP_$ShapeList.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},get_collisionGroup:function(){return this.zpp_inner.collisionGroup},set_collisionGroup:function(n){return this.zpp_inner.collisionGroup!=n&&(this.zpp_inner.collisionGroup=n,this.zpp_inner.invalidate()),this.zpp_inner.collisionGroup},get_collisionMask:function(){return this.zpp_inner.collisionMask},set_collisionMask:function(n){return this.zpp_inner.collisionMask!=n&&(this.zpp_inner.collisionMask=n,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask},get_sensorGroup:function(){return this.zpp_inner.sensorGroup},set_sensorGroup:function(n){return this.zpp_inner.sensorGroup!=n&&(this.zpp_inner.sensorGroup=n,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup},get_sensorMask:function(){return this.zpp_inner.sensorMask},set_sensorMask:function(n){return this.zpp_inner.sensorMask!=n&&(this.zpp_inner.sensorMask=n,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask},get_fluidGroup:function(){return this.zpp_inner.fluidGroup},set_fluidGroup:function(n){return this.zpp_inner.fluidGroup!=n&&(this.zpp_inner.fluidGroup=n,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup},get_fluidMask:function(){return this.zpp_inner.fluidMask},set_fluidMask:function(n){return this.zpp_inner.fluidMask!=n&&(this.zpp_inner.fluidMask=n,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask},shouldCollide:function(n){if(null==n)throw haxe_Exception.thrown("Error: filter argument cannot be null for shouldCollide");var e=this.zpp_inner,t=n.zpp_inner;return 0!=(e.collisionMask&t.collisionGroup)&&0!=(t.collisionMask&e.collisionGroup)},shouldSense:function(n){if(null==n)throw haxe_Exception.thrown("Error: filter argument cannot be null for shouldSense");var e=this.zpp_inner,t=n.zpp_inner;return 0!=(e.sensorMask&t.sensorGroup)&&0!=(t.sensorMask&e.sensorGroup)},shouldFlow:function(n){if(null==n)throw haxe_Exception.thrown("Error: filter argument cannot be null for shouldFlow");var e=this.zpp_inner,t=n.zpp_inner;return 0!=(e.fluidMask&t.fluidGroup)&&0!=(t.fluidMask&e.fluidGroup)},copy:function(){return new nape_dynamics_InteractionFilter(this.zpp_inner.collisionGroup,this.zpp_inner.collisionMask,this.zpp_inner.sensorGroup,this.zpp_inner.sensorMask,this.zpp_inner.fluidGroup,this.zpp_inner.fluidMask)},toString:function(){return"{ collision: "+StringTools.hex(this.zpp_inner.collisionGroup,8)+"~"+StringTools.hex(this.zpp_inner.collisionMask,8)+" sensor: "+StringTools.hex(this.zpp_inner.sensorGroup,8)+"~"+StringTools.hex(this.zpp_inner.sensorMask,8)+" fluid: "+StringTools.hex(this.zpp_inner.fluidGroup,8)+"~"+StringTools.hex(this.zpp_inner.fluidMask,8)+" }"},__class__:nape_dynamics_InteractionFilter,__properties__:{set_fluidMask:"set_fluidMask",get_fluidMask:"get_fluidMask",set_fluidGroup:"set_fluidGroup",get_fluidGroup:"get_fluidGroup",set_sensorMask:"set_sensorMask",get_sensorMask:"get_sensorMask",set_sensorGroup:"set_sensorGroup",get_sensorGroup:"get_sensorGroup",set_collisionMask:"set_collisionMask",get_collisionMask:"get_collisionMask",set_collisionGroup:"set_collisionGroup",get_collisionGroup:"get_collisionGroup",get_shapes:"get_shapes",get_userData:"get_userData"}};var nape_dynamics_InteractionGroup=function(n){null==n&&(n=!1),this.zpp_inner=null,this.zpp_inner=new zpp_$nape_dynamics_ZPP_$InteractionGroup,this.zpp_inner.outer=this,this.zpp_inner.ignore!=n&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=n)};t["nape.dynamics.InteractionGroup"]=nape_dynamics_InteractionGroup,nape_dynamics_InteractionGroup.__name__="nape.dynamics.InteractionGroup",nape_dynamics_InteractionGroup.prototype={get_group:function(){return null==this.zpp_inner.group?null:this.zpp_inner.group.outer},set_group:function(n){if(n==this)throw haxe_Exception.thrown("Error: Cannot assign InteractionGroup to itself");return this.zpp_inner.setGroup(null==n?null:n.zpp_inner),null==this.zpp_inner.group?null:this.zpp_inner.group.outer},get_ignore:function(){return this.zpp_inner.ignore},set_ignore:function(n){return this.zpp_inner.ignore!=n&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=n),this.zpp_inner.ignore},get_interactors:function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=zpp_$nape_util_ZPP_$InteractorList.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},get_groups:function(){return null==this.zpp_inner.wrap_groups&&(this.zpp_inner.wrap_groups=zpp_$nape_util_ZPP_$InteractionGroupList.get(this.zpp_inner.groups,!0)),this.zpp_inner.wrap_groups},toString:function(){var n="InteractionGroup";return this.zpp_inner.ignore&&(n+=":ignore"),n},__class__:nape_dynamics_InteractionGroup,__properties__:{get_groups:"get_groups",get_interactors:"get_interactors",set_ignore:"set_ignore",get_ignore:"get_ignore",set_group:"set_group",get_group:"get_group"}};var nape_dynamics_InteractionGroupIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$InteractionGroupList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate InteractionGroupIterator derp!")};t["nape.dynamics.InteractionGroupIterator"]=nape_dynamics_InteractionGroupIterator,nape_dynamics_InteractionGroupIterator.__name__="nape.dynamics.InteractionGroupIterator",nape_dynamics_InteractionGroupIterator.get=function(n){var e;if(null==nape_dynamics_InteractionGroupIterator.zpp_pool){zpp_$nape_util_ZPP_$InteractionGroupList.internal=!0;var t=new nape_dynamics_InteractionGroupIterator;zpp_$nape_util_ZPP_$InteractionGroupList.internal=!1,e=t}else{var i=nape_dynamics_InteractionGroupIterator.zpp_pool;nape_dynamics_InteractionGroupIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_dynamics_InteractionGroupIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool,nape_dynamics_InteractionGroupIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_dynamics_InteractionGroupIterator};var nape_dynamics_InteractionGroupList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$InteractionGroupList,this.zpp_inner.outer=this};t["nape.dynamics.InteractionGroupList"]=nape_dynamics_InteractionGroupList,nape_dynamics_InteractionGroupList.__name__="nape.dynamics.InteractionGroupList",nape_dynamics_InteractionGroupList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_dynamics_InteractionGroupList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_dynamics_InteractionGroupList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractionGroupList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractionGroupList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractionGroupList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractionGroupList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractionGroupList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractionGroupList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_dynamics_InteractionGroupIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_dynamics_InteractionGroupList;this.zpp_inner.valmod();for(var t=nape_dynamics_InteractionGroupIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool,nape_dynamics_InteractionGroupIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: InteractionGroup is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_dynamics_InteractionGroupIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool,nape_dynamics_InteractionGroupIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_dynamics_InteractionGroupIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool,nape_dynamics_InteractionGroupIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_dynamics_InteractionGroupIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool,nape_dynamics_InteractionGroupIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool,nape_dynamics_InteractionGroupIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_dynamics_InteractionGroupList,__properties__:{get_length:"get_length"}};var nape_geom_AABB=function(n,e,t,i){if(null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),this.zpp_inner=null,n!=n||e!=e)throw haxe_Exception.thrown("Error: AABB position cannot be NaN");if(t!=t||i!=i)throw haxe_Exception.thrown("Error: AABB dimensions cannot be NaN");var r;null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?r=new zpp_$nape_geom_ZPP_$AABB:(r=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=r.next,r.next=null),r.minx=n,r.miny=e,r.maxx=n+t,r.maxy=e+i,this.zpp_inner=r,this.zpp_inner.outer=this};t["nape.geom.AABB"]=nape_geom_AABB,nape_geom_AABB.__name__="nape.geom.AABB",nape_geom_AABB.prototype={copy:function(){null!=(n=this.zpp_inner)._validate&&n._validate();var n,e,t=(n=this.zpp_inner).minx,i=n.miny,r=n.maxx,l=n.maxy;return null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?e=new zpp_$nape_geom_ZPP_$AABB:(e=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=i,e.maxx=r,e.maxy=l,e.wrapper()},get_min:function(){return this.zpp_inner.getmin()},set_min:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner._immutable)throw haxe_Exception.thrown("Error: AABB is immutable");if(null==n)throw haxe_Exception.thrown("Error: Cannot assign null to AABB::min");null!=(s=this.zpp_inner)._validate&&s._validate();var e=this.zpp_inner.minx;if(null!=(s=this.zpp_inner)._validate&&s._validate(),e==this.zpp_inner.minx){null!=(s=this.zpp_inner)._validate&&s._validate();e=this.zpp_inner.miny;null!=(s=this.zpp_inner)._validate&&s._validate(),t=e!=this.zpp_inner.miny}else t=!0;if(t)throw haxe_Exception.thrown("Error: AABB::min components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var t=n.zpp_inner.x;if(null!=(s=this.zpp_inner.getmax())&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),t>s.zpp_inner.x)throw haxe_Exception.thrown("Error: Assignment would cause negative width");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();t=n.zpp_inner.y;if(null!=(s=this.zpp_inner.getmax())&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),t>s.zpp_inner.y)throw haxe_Exception.thrown("Error: Assignment would cause negative height");if(null!=(s=this.zpp_inner.getmin())&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var i=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var r=n.zpp_inner.y;if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),i!=i||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),s.zpp_inner.x==i){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=s.zpp_inner)._validate&&l._validate(),t=s.zpp_inner.y==r}else t=!1;t||(s.zpp_inner.x=i,s.zpp_inner.y=r,null!=(l=s.zpp_inner)._invalidate&&l._invalidate(l));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return this.zpp_inner.getmin()},get_max:function(){return this.zpp_inner.getmax()},set_max:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner._immutable)throw haxe_Exception.thrown("Error: AABB is immutable");if(null==n)throw haxe_Exception.thrown("Error: Cannot assign null to AABB::max");null!=(s=this.zpp_inner)._validate&&s._validate();var e=this.zpp_inner.minx;if(null!=(s=this.zpp_inner)._validate&&s._validate(),e==this.zpp_inner.minx){null!=(s=this.zpp_inner)._validate&&s._validate();e=this.zpp_inner.miny;null!=(s=this.zpp_inner)._validate&&s._validate(),t=e!=this.zpp_inner.miny}else t=!0;if(t)throw haxe_Exception.thrown("Error: AABB::max components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var t=n.zpp_inner.x;if(null!=(s=this.zpp_inner.getmin())&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),t<s.zpp_inner.x)throw haxe_Exception.thrown("Error: Assignment would cause negative width");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();t=n.zpp_inner.y;if(null!=(s=this.zpp_inner.getmin())&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),t<s.zpp_inner.y)throw haxe_Exception.thrown("Error: Assignment would cause negative height");if(null!=(s=this.zpp_inner.getmax())&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var i=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var r=n.zpp_inner.y;if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),i!=i||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),s.zpp_inner.x==i){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=s.zpp_inner)._validate&&l._validate(),t=s.zpp_inner.y==r}else t=!1;t||(s.zpp_inner.x=i,s.zpp_inner.y=r,null!=(l=s.zpp_inner)._invalidate&&l._invalidate(l));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return this.zpp_inner.getmax()},get_x:function(){var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.minx},set_x:function(n){if(this.zpp_inner._immutable)throw haxe_Exception.thrown("Error: AABB is immutable");if(null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.minx!=n){if(n!=n)throw haxe_Exception.thrown("Error: AABB::x cannot be NaN");var e;this.zpp_inner.maxx+=n-this.zpp_inner.minx,this.zpp_inner.minx=n,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}return null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.minx},get_y:function(){var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.miny},set_y:function(n){if(this.zpp_inner._immutable)throw haxe_Exception.thrown("Error: AABB is immutable");if(null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.miny!=n){if(n!=n)throw haxe_Exception.thrown("Error: AABB::y cannot be NaN");var e;this.zpp_inner.maxy+=n-this.zpp_inner.miny,this.zpp_inner.miny=n,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}return null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.miny},get_width:function(){var n;return null!=(n=this.zpp_inner)._validate&&n._validate(),(n=this.zpp_inner).maxx-n.minx},set_width:function(n){if(this.zpp_inner._immutable)throw haxe_Exception.thrown("Error: AABB is immutable");if(null!=(e=this.zpp_inner)._validate&&e._validate(),(e=this.zpp_inner).maxx-e.minx!=n){if(n!=n)throw haxe_Exception.thrown("Error: AABB::width cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: AABB::width ("+n+") must be >= 0");var e;null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.maxx=this.zpp_inner.minx+n,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}return null!=(e=this.zpp_inner)._validate&&e._validate(),(e=this.zpp_inner).maxx-e.minx},get_height:function(){var n;return null!=(n=this.zpp_inner)._validate&&n._validate(),(n=this.zpp_inner).maxy-n.miny},set_height:function(n){if(this.zpp_inner._immutable)throw haxe_Exception.thrown("Error: AABB is immutable");if(null!=(e=this.zpp_inner)._validate&&e._validate(),(e=this.zpp_inner).maxy-e.miny!=n){if(n!=n)throw haxe_Exception.thrown("Error: AABB::height cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: AABB::height ("+n+") must be >= 0");var e;null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.maxy=this.zpp_inner.miny+n,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}return null!=(e=this.zpp_inner)._validate&&e._validate(),(e=this.zpp_inner).maxy-e.miny},toString:function(){var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.toString()},__class__:nape_geom_AABB,__properties__:{set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_max:"set_max",get_max:"get_max",set_min:"set_min",get_min:"get_min"}};var nape_geom_ConvexResult=function(){if(this.zpp_inner=null,!zpp_$nape_geom_ZPP_$ConvexRayResult.internal)throw haxe_Exception.thrown("Error: ConvexResult cannot be instantiated derp!")};t["nape.geom.ConvexResult"]=nape_geom_ConvexResult,nape_geom_ConvexResult.__name__="nape.geom.ConvexResult",nape_geom_ConvexResult.prototype={get_normal:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.normal},get_position:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.position},get_toi:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.toiDistance},get_shape:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.shape},dispose:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");this.zpp_inner.free()},toString:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");var n="{ shape: "+Std.string(this.zpp_inner.shape)+" toi: ";if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return n+this.zpp_inner.toiDistance+" }"},__class__:nape_geom_ConvexResult,__properties__:{get_shape:"get_shape",get_toi:"get_toi",get_position:"get_position",get_normal:"get_normal"}};var nape_geom_ConvexResultIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$ConvexResultList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ConvexResultIterator derp!")};t["nape.geom.ConvexResultIterator"]=nape_geom_ConvexResultIterator,nape_geom_ConvexResultIterator.__name__="nape.geom.ConvexResultIterator",nape_geom_ConvexResultIterator.get=function(n){var e;if(null==nape_geom_ConvexResultIterator.zpp_pool){zpp_$nape_util_ZPP_$ConvexResultList.internal=!0;var t=new nape_geom_ConvexResultIterator;zpp_$nape_util_ZPP_$ConvexResultList.internal=!1,e=t}else{var i=nape_geom_ConvexResultIterator.zpp_pool;nape_geom_ConvexResultIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_geom_ConvexResultIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_geom_ConvexResultIterator.zpp_pool,nape_geom_ConvexResultIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_ConvexResultIterator};var nape_geom_ConvexResultList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$ConvexResultList,this.zpp_inner.outer=this};t["nape.geom.ConvexResultList"]=nape_geom_ConvexResultList,nape_geom_ConvexResultList.__name__="nape.geom.ConvexResultList",nape_geom_ConvexResultList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_geom_ConvexResultList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_geom_ConvexResultList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConvexResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConvexResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n)}else this.zpp_inner.inner.add(n);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConvexResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=n=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=n=null==t?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConvexResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=n=null==e?this.zpp_inner.inner.head.elt:e.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=n=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConvexResultList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ConvexResultList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_geom_ConvexResultIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_geom_ConvexResultList;this.zpp_inner.valmod();for(var t=nape_geom_ConvexResultIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_geom_ConvexResultIterator.zpp_pool,nape_geom_ConvexResultIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: ConvexResult is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_geom_ConvexResultIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_geom_ConvexResultIterator.zpp_pool,nape_geom_ConvexResultIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_geom_ConvexResultIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_geom_ConvexResultIterator.zpp_pool,nape_geom_ConvexResultIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_geom_ConvexResultIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_geom_ConvexResultIterator.zpp_pool,nape_geom_ConvexResultIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_geom_ConvexResultIterator.zpp_pool,nape_geom_ConvexResultIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_geom_ConvexResultList,__properties__:{get_length:"get_length"}};var nape_geom_Geom=function(){};t["nape.geom.Geom"]=nape_geom_Geom,nape_geom_Geom.__name__="nape.geom.Geom",nape_geom_Geom.distanceBody=function(n,e,t,i){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r,l;if((l=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),(l=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");(null!=l._isimmutable&&l._isimmutable(),null!=(l=n.zpp_inner.wrap_shapes).zpp_inner.inner.head)?r=null==(l=e.zpp_inner.wrap_shapes).zpp_inner.inner.head:r=!0;if(r)throw haxe_Exception.thrown("Error: Bodies cannot be empty in calculating distances");for(var s=n.zpp_inner.shapes.head;null!=s;){var a=s.elt;zpp_$nape_geom_ZPP_$Geom.validateShape(a),s=s.next}for(s=e.zpp_inner.shapes.head;null!=s;){a=s.elt;zpp_$nape_geom_ZPP_$Geom.validateShape(a),s=s.next}return zpp_$nape_geom_ZPP_$SweepDistance.distanceBody(n.zpp_inner,e.zpp_inner,t.zpp_inner,i.zpp_inner)},nape_geom_Geom.distance=function(n,e,t,i){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r,l;if((r=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),(r=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null)||null==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Shape must be part of a Body to calculate distances");zpp_$nape_geom_ZPP_$Geom.validateShape(n.zpp_inner),zpp_$nape_geom_ZPP_$Geom.validateShape(e.zpp_inner),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1;var s,a=n.zpp_inner,o=e.zpp_inner,p=t.zpp_inner,h=i.zpp_inner,u=1e100;if(null==u&&(u=1e100),0==a.type&&0==o.type){var _=a.circle,c=o.circle,d=0,f=0;if(d=c.worldCOMx-_.worldCOMx,f=c.worldCOMy-_.worldCOMy,(C=(T=Math.sqrt(d*d+f*f))-(_.radius+c.radius))<u){if(0==T)d=1,f=0;else d*=x=1/T,f*=x;var x=_.radius;p.x=_.worldCOMx+d*x,p.y=_.worldCOMy+f*x;x=-c.radius;h.x=c.worldCOMx+d*x,h.y=c.worldCOMy+f*x,l.x=d,l.y=f}s=C}else{var b=!1;if(0==a.type&&1==o.type){var y=a;a=o,o=y;var v=p;p=h,h=v,b=!0}if(1==a.type&&0==o.type){for(var m=a.polygon,g=o.circle,z=-1e100,w=null,O=m.edges.head;null!=O;){var C;if((C=(V=O.elt).gnormx*g.worldCOMx+V.gnormy*g.worldCOMy-V.gprojection-g.radius)>u){z=C;break}C>0?C>z&&(z=C,w=V):z<0&&C>z&&(z=C,w=V),O=O.next}if(z<u){var E=w.gp0,U=w.gp1,M=g.worldCOMy*w.gnormx-g.worldCOMx*w.gnormy;if(M<=E.y*w.gnormx-E.x*w.gnormy){d=0,f=0;if(d=g.worldCOMx-E.x,f=g.worldCOMy-E.y,(z=(T=Math.sqrt(d*d+f*f))-g.radius)<u){if(0==T)d=1,f=0;else d*=x=1/T,f*=x;x=0;p.x=E.x+d*x,p.y=E.y+f*x;x=-g.radius;h.x=g.worldCOMx+d*x,h.y=g.worldCOMy+f*x,l.x=d,l.y=f}}else if(M>=U.y*w.gnormx-U.x*w.gnormy){var T;d=0,f=0;if(d=g.worldCOMx-U.x,f=g.worldCOMy-U.y,(z=(T=Math.sqrt(d*d+f*f))-g.radius)<u){if(0==T)d=1,f=0;else d*=x=1/T,f*=x;x=0;p.x=U.x+d*x,p.y=U.y+f*x;x=-g.radius;h.x=g.worldCOMx+d*x,h.y=g.worldCOMy+f*x,l.x=d,l.y=f}}else{x=-g.radius;h.x=g.worldCOMx+w.gnormx*x,h.y=g.worldCOMy+w.gnormy*x;x=-z;p.x=h.x+w.gnormx*x,p.y=h.y+w.gnormy*x,l.x=w.gnormx,l.y=w.gnormy}}b&&(l.x=-l.x,l.y=-l.y),s=z}else{var k=a.polygon,D=o.polygon,S=(z=-1e100,null),A=null,P=0;for(O=k.edges.head;null!=O;){for(var V=O.elt,I=1e100,N=D.gverts.next;null!=N;){var F=N;(G=V.gnormx*F.x+V.gnormy*F.y)<I&&(I=G),N=N.next}if((I-=V.gprojection)>u){z=I;break}I>0?I>z&&(z=I,S=V,P=1):z<0&&I>z&&(z=I,S=V,P=1),O=O.next}if(z<u){for(O=D.edges.head;null!=O;){for(V=O.elt,I=1e100,N=k.gverts.next;null!=N;){F=N;(G=V.gnormx*F.x+V.gnormy*F.y)<I&&(I=G),N=N.next}if((I-=V.gprojection)>u){z=I;break}I>0?I>z&&(z=I,A=V,P=2):z<0&&I>z&&(z=I,A=V,P=2),O=O.next}if(z<u){var R,L;if(1==P)H=k,R=D,L=S;else{H=D,R=k,L=A;y=p;p=h,h=y,b=!b}var B=null;for(I=1e100,O=R.edges.head;null!=O;){var G;V=O.elt;(G=L.gnormx*V.gnormx+L.gnormy*V.gnormy)<I&&(I=G,B=V),O=O.next}if(b?(l.x=-L.gnormx,l.y=-L.gnormy):(l.x=L.gnormx,l.y=L.gnormy),z>=0){E=L.gp0,U=L.gp1;var j,K,W,Y,X=B.gp0,H=B.gp1,Z=1/((j=U.x-E.x)*j+(K=U.y-E.y)*K),q=1/((W=H.x-X.x)*W+(Y=H.y-X.y)*Y),$=-(j*(E.x-X.x)+K*(E.y-X.y))*Z,Q=-(j*(E.x-H.x)+K*(E.y-H.y))*Z;$<0?$=0:$>1&&($=1),Q<0?Q=0:Q>1&&(Q=1),(a=-(W*(X.x-E.x)+Y*(X.y-E.y))*q)<0?a=0:a>1&&(a=1),(o=-(W*(X.x-U.x)+Y*(X.y-U.y))*q)<0?o=0:o>1&&(o=1);var J,nn;x=$;J=E.x+j*x,nn=E.y+K*x;var en,tn;x=Q;en=E.x+j*x,tn=E.y+K*x;var rn,ln;x=a;rn=X.x+W*x,ln=X.y+Y*x;var sn,an;x=o;sn=X.x+W*x,an=X.y+Y*x;var on=0,pn=0,hn=(on=J-X.x)*on+(pn=nn-X.y)*pn,un=(on=0,pn=0,(on=en-H.x)*on+(pn=tn-H.y)*pn),_n=(on=0,pn=0,(on=rn-E.x)*on+(pn=ln-E.y)*pn),cn=(on=0,pn=0,(on=sn-U.x)*on+(pn=an-U.y)*pn),dn=0,xn=0,bn=null;hn<un?(dn=J,xn=nn,bn=X):(dn=en,xn=tn,bn=H,hn=un);var yn=0,vn=0,mn=null;if(_n<cn?(yn=rn,vn=ln,mn=E):(yn=sn,vn=an,mn=U,_n=cn),hn<_n?(p.x=dn,p.y=xn,h.x=bn.x,h.y=bn.y,z=Math.sqrt(hn)):(h.x=yn,h.y=vn,p.x=mn.x,p.y=mn.y,z=Math.sqrt(_n)),0!=z){l.x=h.x-p.x,l.y=h.y-p.y;x=1/z;l.x*=x,l.y*=x,b&&(l.x=-l.x,l.y=-l.y)}s=z}else{var gn=0,zn=0;gn=B.gp0.x,zn=B.gp0.y;var wn,On,Cn=0,En=0;wn=(Cn=B.gp1.x)-gn,On=(En=B.gp1.y)-zn;var Un=L.gnormy*gn-L.gnormx*zn,Mn=1/((hn=L.gnormy*Cn-L.gnormx*En)-Un);if((x=(-L.tp1-Un)*Mn)>nape_Config.epsilon)gn+=wn*($=x),zn+=On*$;if((x=(-L.tp0-hn)*Mn)<-nape_Config.epsilon)Cn+=wn*($=x),En+=On*$;var Tn=gn*L.gnormx+zn*L.gnormy-L.gprojection,kn=Cn*L.gnormx+En*L.gnormy-L.gprojection;if(Tn<kn){h.x=gn,h.y=zn;x=-Tn;p.x=h.x+L.gnormx*x,p.y=h.y+L.gnormy*x,s=Tn}else{h.x=Cn,h.y=En;x=-kn;p.x=h.x+L.gnormx*x,p.y=h.y+L.gnormy*x,s=kn}}}else s=u}else s=u}}var Dn=l;return null!=Dn.outer&&(Dn.outer.zpp_inner=null,Dn.outer=null),Dn._isimmutable=null,Dn._validate=null,Dn._invalidate=null,Dn.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Dn,s},nape_geom_Geom.intersectsBody=function(n,e){var t;null!=(l=n.zpp_inner.wrap_shapes).zpp_inner.inner.head?t=null==(l=e.zpp_inner.wrap_shapes).zpp_inner.inner.head:t=!0;if(t)throw haxe_Exception.thrown("Error: Bodies must have shapes to test for intersection.");for(var i=n.zpp_inner.shapes.head;null!=i;){var r=i.elt;zpp_$nape_geom_ZPP_$Geom.validateShape(r),i=i.next}for(i=e.zpp_inner.shapes.head;null!=i;){r=i.elt;zpp_$nape_geom_ZPP_$Geom.validateShape(r),i=i.next}var l=n.zpp_inner.aabb,s=e.zpp_inner.aabb;if(s.miny<=l.maxy&&l.miny<=s.maxy&&s.minx<=l.maxx&&l.minx<=s.maxx){for(i=n.zpp_inner.shapes.head;null!=i;){for(var a=i.elt,o=e.zpp_inner.shapes.head;null!=o;){var p=o.elt;if(zpp_$nape_geom_ZPP_$Collide.testCollide_safe(a,p))return!0;o=o.next}i=i.next}return!1}return!1},nape_geom_Geom.intersects=function(n,e){if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null)||null==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Shape must be part of a Body to calculate intersection");zpp_$nape_geom_ZPP_$Geom.validateShape(n.zpp_inner),zpp_$nape_geom_ZPP_$Geom.validateShape(e.zpp_inner);var t=n.zpp_inner.aabb,i=e.zpp_inner.aabb;return i.miny<=t.maxy&&t.miny<=i.maxy&&i.minx<=t.maxx&&t.minx<=i.maxx&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(n.zpp_inner,e.zpp_inner)},nape_geom_Geom.contains=function(n,e){if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null)||null==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Shape must be part of a Body to calculate containment");return zpp_$nape_geom_ZPP_$Geom.validateShape(n.zpp_inner),zpp_$nape_geom_ZPP_$Geom.validateShape(e.zpp_inner),zpp_$nape_geom_ZPP_$Collide.containTest(n.zpp_inner,e.zpp_inner)};var nape_geom_GeomPoly=function(n){if(this.zpp_inner=null,this.zpp_pool=null,this.zpp_inner=new zpp_$nape_geom_ZPP_$GeomPoly(this),null!=n){if(n instanceof Array)for(var e=n,t=0;t<e.length;){var i=e[t];if(++t,null==i)throw haxe_Exception.thrown("Error: Array<Vec2> contains null objects");if(!(i instanceof nape_geom_Vec2))throw haxe_Exception.thrown("Error: Array<Vec2> contains non Vec2 objects");if(null!=(c=i)&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(E=c.zpp_inner)._validate&&E._validate();var r=c.zpp_inner.x;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(U=c.zpp_inner)._validate&&U._validate();var l=c.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?p=new zpp_$nape_geom_ZPP_$GeomVert:(p=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=p.next,p.next=null),p.forced=!1,p.x=r,p.y=l;var s=p;null==this.zpp_inner.vertices?this.zpp_inner.vertices=s.prev=s.next=s:(s.prev=this.zpp_inner.vertices,s.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=s,this.zpp_inner.vertices.next=s),this.zpp_inner.vertices=s}else if(n instanceof nape_geom_Vec2List)for(t=(e=n).iterator();;){t.zpp_inner.zpp_inner.valmod();var a=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<a?z=!0:(t.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=t,t.zpp_inner=null,z=!1),!z)break;if(t.zpp_critical=!1,null==(c=t.zpp_inner.at(t.zpp_i++)))throw haxe_Exception.thrown("Error: Vec2List contains null objects");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(E=c.zpp_inner)._validate&&E._validate();r=c.zpp_inner.x;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(U=c.zpp_inner)._validate&&U._validate();l=c.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?p=new zpp_$nape_geom_ZPP_$GeomVert:(p=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=p.next,p.next=null),p.forced=!1,p.x=r,p.y=l;s=p;null==this.zpp_inner.vertices?this.zpp_inner.vertices=s.prev=s.next=s:(s.prev=this.zpp_inner.vertices,s.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=s,this.zpp_inner.vertices.next=s),this.zpp_inner.vertices=s}else{if(!(n instanceof nape_geom_GeomPoly))throw haxe_Exception.thrown("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");if(null!=(e=n)&&e.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");var o=e.zpp_inner.vertices;if(null!=o)for(i=o;;){var p;r=i.x;if(null==(l=i.y)&&(l=0),null==r&&(r=0),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){var h;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?h=new zpp_$nape_geom_ZPP_$Vec2:(h=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h.next,h.next=null),h.weak=!1,h._immutable=!1,h.x=r,h.y=l,p.zpp_inner=h,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((E=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=E._isimmutable&&E._isimmutable(),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(U=p.zpp_inner)._validate&&U._validate(),p.zpp_inner.x==r){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u=p.zpp_inner;null!=u._validate&&u._validate(),z=p.zpp_inner.y==l}else z=!1;if(!z){p.zpp_inner.x=r,p.zpp_inner.y=l;var _=p.zpp_inner;null!=_._invalidate&&_._invalidate(_)}}p.zpp_inner.weak=!1;var c=p;if(i=i.next,null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d=c.zpp_inner;null!=d._validate&&d._validate();var f=c.zpp_inner.x;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var x=c.zpp_inner;null!=x._validate&&x._validate();var b,y=c.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?b=new zpp_$nape_geom_ZPP_$GeomVert:(b=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=b.next,b.next=null),b.forced=!1,b.x=f,b.y=y;s=b;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=s.prev=s.next=s:(s.prev=this.zpp_inner.vertices,s.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=s,this.zpp_inner.vertices.next=s),this.zpp_inner.vertices=s,null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var v=c.zpp_inner;if(v._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=v._isimmutable&&v._isimmutable(),c.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var m=c.zpp_inner;if(c.zpp_inner.outer=null,c.zpp_inner=null,(M=c).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=M:zpp_$nape_util_ZPP_$PubPool.poolVec2=M,zpp_$nape_util_ZPP_$PubPool.nextVec2=M,M.zpp_disp=!0,null!=(T=m).outer&&(T.outer.zpp_inner=null,T.outer=null),T._isimmutable=null,T._validate=null,T._invalidate=null,T.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=T,i==o)break}}if(this.skipForward(1),n instanceof Array){e=n;for(var g=0;g<e.length;){var z;if((C=e[g]).zpp_inner.weak){if(null!=C&&C.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((E=C.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=E._isimmutable&&E._isimmutable(),C.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");m=C.zpp_inner;C.zpp_inner.outer=null,C.zpp_inner=null,(M=C).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=M:zpp_$nape_util_ZPP_$PubPool.poolVec2=M,zpp_$nape_util_ZPP_$PubPool.nextVec2=M,M.zpp_disp=!0,null!=(T=m).outer&&(T.outer.zpp_inner=null,T.outer=null),T._isimmutable=null,T._validate=null,T._invalidate=null,T.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=T,z=!0}else z=!1;z?e.splice(g,1):++g}}else if(n instanceof nape_geom_Vec2List){null!=(e=n).zpp_inner._validate&&e.zpp_inner._validate();for(var w=e.zpp_inner.inner,O=null,C=w.head;null!=C;){if((r=C.elt).outer.zpp_inner.weak){if(C=w.erase(O),r.outer.zpp_inner.weak){var E,U;if(null!=(E=r.outer)&&E.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((U=E.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=U._isimmutable&&U._isimmutable(),E.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var M,T;m=E.zpp_inner;E.zpp_inner.outer=null,E.zpp_inner=null,(M=E).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=M:zpp_$nape_util_ZPP_$PubPool.poolVec2=M,zpp_$nape_util_ZPP_$PubPool.nextVec2=M,M.zpp_disp=!0,null!=(T=m).outer&&(T.outer.zpp_inner=null,T.outer=null),T._isimmutable=null,T._validate=null,T._invalidate=null,T.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=T}}else O=C,C=C.next}}}};t["nape.geom.GeomPoly"]=nape_geom_GeomPoly,nape_geom_GeomPoly.__name__="nape.geom.GeomPoly",nape_geom_GeomPoly.get=function(n){var e;if(null==zpp_$nape_util_ZPP_$PubPool.poolGeomPoly?e=new nape_geom_GeomPoly:(e=zpp_$nape_util_ZPP_$PubPool.poolGeomPoly,zpp_$nape_util_ZPP_$PubPool.poolGeomPoly=e.zpp_pool,e.zpp_pool=null,e.zpp_disp=!1,e==zpp_$nape_util_ZPP_$PubPool.nextGeomPoly&&(zpp_$nape_util_ZPP_$PubPool.nextGeomPoly=null)),null!=n){if(n instanceof Array)for(var t=n,i=0;i<t.length;){var r=t[i];if(++i,null==r)throw haxe_Exception.thrown("Error: Array<Vec2> contains null objects");if(!(r instanceof nape_geom_Vec2))throw haxe_Exception.thrown("Error: Array<Vec2> contains non Vec2 objects");if(null!=(d=r)&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(U=d.zpp_inner)._validate&&U._validate();var l=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(M=d.zpp_inner)._validate&&M._validate();var s=d.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?h=new zpp_$nape_geom_ZPP_$GeomVert:(h=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=h.next,h.next=null),h.forced=!1,h.x=l,h.y=s;var a=h;null==e.zpp_inner.vertices?e.zpp_inner.vertices=a.prev=a.next=a:(a.prev=e.zpp_inner.vertices,a.next=e.zpp_inner.vertices.next,e.zpp_inner.vertices.next.prev=a,e.zpp_inner.vertices.next=a),e.zpp_inner.vertices=a}else if(n instanceof nape_geom_Vec2List)for(i=(t=n).iterator();;){i.zpp_inner.zpp_inner.valmod();var o=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,i.zpp_i<o?w=!0:(i.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=i,i.zpp_inner=null,w=!1),!w)break;if(i.zpp_critical=!1,null==(d=i.zpp_inner.at(i.zpp_i++)))throw haxe_Exception.thrown("Error: Vec2List contains null objects");if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(U=d.zpp_inner)._validate&&U._validate();l=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(M=d.zpp_inner)._validate&&M._validate();s=d.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?h=new zpp_$nape_geom_ZPP_$GeomVert:(h=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=h.next,h.next=null),h.forced=!1,h.x=l,h.y=s;a=h;null==e.zpp_inner.vertices?e.zpp_inner.vertices=a.prev=a.next=a:(a.prev=e.zpp_inner.vertices,a.next=e.zpp_inner.vertices.next,e.zpp_inner.vertices.next.prev=a,e.zpp_inner.vertices.next=a),e.zpp_inner.vertices=a}else{if(!(n instanceof nape_geom_GeomPoly))throw haxe_Exception.thrown("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");if(null!=(t=n)&&t.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");var p=t.zpp_inner.vertices;if(null!=p)for(r=p;;){var h;l=r.x;if(null==(s=r.y)&&(s=0),null==l&&(l=0),l!=l||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?h=new nape_geom_Vec2:(h=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=h.zpp_pool,h.zpp_pool=null,h.zpp_disp=!1,h==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==h.zpp_inner){var u;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?u=new zpp_$nape_geom_ZPP_$Vec2:(u=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=l,u.y=s,h.zpp_inner=u,h.zpp_inner.outer=h}else{if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((U=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=U._isimmutable&&U._isimmutable(),l!=l||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(M=h.zpp_inner)._validate&&M._validate(),h.zpp_inner.x==l){if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var _=h.zpp_inner;null!=_._validate&&_._validate(),w=h.zpp_inner.y==s}else w=!1;if(!w){h.zpp_inner.x=l,h.zpp_inner.y=s;var c=h.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}h.zpp_inner.weak=!1;var d=h;if(r=r.next,null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f=d.zpp_inner;null!=f._validate&&f._validate();var x=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var b=d.zpp_inner;null!=b._validate&&b._validate();var y,v=d.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?y=new zpp_$nape_geom_ZPP_$GeomVert:(y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=y.next,y.next=null),y.forced=!1,y.x=x,y.y=v;a=y;if(null==e.zpp_inner.vertices?e.zpp_inner.vertices=a.prev=a.next=a:(a.prev=e.zpp_inner.vertices,a.next=e.zpp_inner.vertices.next,e.zpp_inner.vertices.next.prev=a,e.zpp_inner.vertices.next=a),e.zpp_inner.vertices=a,null!=d&&d.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var m=d.zpp_inner;if(m._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),d.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var g=d.zpp_inner;if(d.zpp_inner.outer=null,d.zpp_inner=null,(T=d).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=T:zpp_$nape_util_ZPP_$PubPool.poolVec2=T,zpp_$nape_util_ZPP_$PubPool.nextVec2=T,T.zpp_disp=!0,null!=(k=g).outer&&(k.outer.zpp_inner=null,k.outer=null),k._isimmutable=null,k._validate=null,k._invalidate=null,k.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=k,r==p)break}}if(e.skipForward(1),n instanceof Array){t=n;for(var z=0;z<t.length;){var w;if((E=t[z]).zpp_inner.weak){if(null!=E&&E.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((U=E.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=U._isimmutable&&U._isimmutable(),E.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");g=E.zpp_inner;E.zpp_inner.outer=null,E.zpp_inner=null,(T=E).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=T:zpp_$nape_util_ZPP_$PubPool.poolVec2=T,zpp_$nape_util_ZPP_$PubPool.nextVec2=T,T.zpp_disp=!0,null!=(k=g).outer&&(k.outer.zpp_inner=null,k.outer=null),k._isimmutable=null,k._validate=null,k._invalidate=null,k.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=k,w=!0}else w=!1;w?t.splice(z,1):++z}}else if(n instanceof nape_geom_Vec2List){null!=(t=n).zpp_inner._validate&&t.zpp_inner._validate();for(var O=t.zpp_inner.inner,C=null,E=O.head;null!=E;){if((l=E.elt).outer.zpp_inner.weak){if(E=O.erase(C),l.outer.zpp_inner.weak){var U,M;if(null!=(U=l.outer)&&U.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((M=U.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=M._isimmutable&&M._isimmutable(),U.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var T,k;g=U.zpp_inner;U.zpp_inner.outer=null,U.zpp_inner=null,(T=U).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=T:zpp_$nape_util_ZPP_$PubPool.poolVec2=T,zpp_$nape_util_ZPP_$PubPool.nextVec2=T,T.zpp_disp=!0,null!=(k=g).outer&&(k.outer.zpp_inner=null,k.outer=null),k._isimmutable=null,k._validate=null,k._invalidate=null,k.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=k}}else C=E,E=E.next}}}return e},nape_geom_GeomPoly.prototype={empty:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices},size:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");var n=0,e=this.zpp_inner.vertices,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){if(++n,(i=i.next)==t)break}return n},iterator:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return zpp_$nape_geom_ZPP_$GeomVertexIterator.get(this.zpp_inner.vertices,!0)},forwardIterator:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return zpp_$nape_geom_ZPP_$GeomVertexIterator.get(this.zpp_inner.vertices,!0)},backwardsIterator:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return zpp_$nape_geom_ZPP_$GeomVertexIterator.get(this.zpp_inner.vertices,!1)},current:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: GeomPoly is empty");var n=this.zpp_inner.vertices;if(null==n.wrap){var e,t=n.x,i=n.y;if(null==i&&(i=0),null==t&&(t=0),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?e=new nape_geom_Vec2:(e=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=e.zpp_pool,e.zpp_pool=null,e.zpp_disp=!1,e==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==e.zpp_inner){var r;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=t,r.y=i,e.zpp_inner=r,e.zpp_inner.outer=e}else{if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((s=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=e.zpp_inner)._validate&&s._validate(),e.zpp_inner.x==t){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=e.zpp_inner)._validate&&s._validate(),l=e.zpp_inner.y==i}else l=!1;if(!l)e.zpp_inner.x=t,e.zpp_inner.y=i,null!=(s=e.zpp_inner)._invalidate&&s._invalidate(s)}e.zpp_inner.weak=!1,n.wrap=e,n.wrap.zpp_inner._inuse=!0,n.wrap.zpp_inner._invalidate=$bind(n,n.modwrap),n.wrap.zpp_inner._validate=$bind(n,n.getwrap)}return n.wrap},push:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot push null vertex");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var t,i=n.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?t=new zpp_$nape_geom_ZPP_$GeomVert:(t=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=t.next,t.next=null),t.forced=!1,t.x=e,t.y=i;var r=t;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=r.prev=r.next=r:(r.prev=this.zpp_inner.vertices,r.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=r,this.zpp_inner.vertices.next=r),this.zpp_inner.vertices=r,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return this},pop:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: Cannot pop from empty polygon");var n,e=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,n=null;else{var t=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,n=t}this.zpp_inner.vertices=n;var i=e;if(null!=i.wrap){i.wrap.zpp_inner._inuse=!1;var r=i.wrap;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l=r.zpp_inner;if(l._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(s=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s,i.wrap=null}return i.prev=i.next=null,i.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=i,this},unshift:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot unshift null vertex");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var t,i=n.zpp_inner.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?t=new zpp_$nape_geom_ZPP_$GeomVert:(t=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=t.next,t.next=null),t.forced=!1,t.x=e,t.y=i;var r=t;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=r.prev=r.next=r:(r.next=this.zpp_inner.vertices,r.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.prev.next=r,this.zpp_inner.vertices.prev=r),this.zpp_inner.vertices=r,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return this},shift:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: Cannot shift from empty polygon");var n,e=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,n=this.zpp_inner.vertices=null;else{var t=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,n=t}this.zpp_inner.vertices=n;var i=e;if(null!=i.wrap){i.wrap.zpp_inner._inuse=!1;var r=i.wrap;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l=r.zpp_inner;if(l._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(s=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s,i.wrap=null}return i.prev=i.next=null,i.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=i,this},skipForward:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null!=this.zpp_inner.vertices)if(n>0)for(;n-- >0;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(n<0)for(;n++<0;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},skipBackwards:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return this.skipForward(-n)},erase:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");for(;0!=n&&null!=this.zpp_inner.vertices;){var e=this.zpp_inner.vertices;if(n>0){var t;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,t=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,t=i}this.zpp_inner.vertices=t,--n}else if(n<0){var r;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,r=null;else{var l=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,r=l}this.zpp_inner.vertices=r,++n}var s=e;if(null!=s.wrap){s.wrap.zpp_inner._inuse=!1;var a=s.wrap;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o=a.zpp_inner;if(o._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),a.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var p=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null;var h=a;h.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=h:zpp_$nape_util_ZPP_$PubPool.poolVec2=h,zpp_$nape_util_ZPP_$PubPool.nextVec2=h,h.zpp_disp=!0;var u=p;null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,s.wrap=null}s.prev=s.next=null,s.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=s}return this},clear:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");for(;null!=this.zpp_inner.vertices;){var n,e=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,n=this.zpp_inner.vertices=null;else{var t=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,n=t}this.zpp_inner.vertices=n;var i=e;if(null!=i.wrap){i.wrap.zpp_inner._inuse=!1;var r=i.wrap;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l=r.zpp_inner;if(l._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null;var a=r;a.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0;var o=s;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o,i.wrap=null}i.prev=i.next=null,i.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=i}return this},copy:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");var n=nape_geom_GeomPoly.get(),e=this.zpp_inner.vertices,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r,l=i,s=l.x,a=l.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?r=new zpp_$nape_geom_ZPP_$GeomVert:(r=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=s,r.y=a;var o=r;if(null==n.zpp_inner.vertices?n.zpp_inner.vertices=o.prev=o.next=o:(o.prev=n.zpp_inner.vertices,o.next=n.zpp_inner.vertices.next,n.zpp_inner.vertices.next.prev=o,n.zpp_inner.vertices.next=o),n.zpp_inner.vertices=o,(i=i.next)==t)break}return n.skipForward(1)},dispose:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");this.clear();var n=this;n.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextGeomPoly?zpp_$nape_util_ZPP_$PubPool.nextGeomPoly.zpp_pool=n:zpp_$nape_util_ZPP_$PubPool.poolGeomPoly=n,zpp_$nape_util_ZPP_$PubPool.nextGeomPoly=n,n.zpp_disp=!0},toString:function(){var n="GeomPoly[",e=this.zpp_inner.vertices,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(r!=this.zpp_inner.vertices&&(n+=","),n+="{"+r.x+","+r.y+"}",(i=i.next)==t)break}return n+"]"},area:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return 0;var n=0,e=this.zpp_inner.vertices,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(n+=r.x*(r.next.y-r.prev.y),(i=i.next)==t)break}var l=.5*n;return l<0?-l:l},winding:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return null==zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED;var n=0,e=this.zpp_inner.vertices,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(n+=r.x*(r.next.y-r.prev.y),(i=i.next)==t)break}var l=.5*n;return l>0?(null==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE):0==l?(null==zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED):(null==zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE)},contains:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: GeomPoly::contains point cannot be null");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var t=n.zpp_inner.y,i=!1,r=this.zpp_inner.vertices,l=this.zpp_inner.vertices;if(null!=r)for(var s=r;;){var a=s,o=a.prev;if((a.y<t&&o.y>=t||o.y<t&&a.y>=t)&&(a.x<=e||o.x<=e)&&a.x+(t-a.y)/(o.y-a.y)*(o.x-a.x)<e&&(i=!i),(s=s.next)==l)break}var p=i;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;if((h=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u,_=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(u=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=_).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}return p},isClockwise:function(){var n=this.winding();return null==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE},isConvex:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return!0;var n=!1,e=!1,t=!0,i=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=i)for(var l=i;;){var s,a,o=l,p=o.prev,h=o.next;s=h.x-o.x,a=h.y-o.y;var u;u=o.x-p.x;var _=(o.y-p.y)*s-u*a;if(_>0?e=!0:_<0&&(n=!0),e&&n){t=!1;break}if((l=l.next)==r)break}return t},isSimple:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||zpp_$nape_geom_ZPP_$Simple.isSimple(this.zpp_inner.vertices)},isMonotone:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||zpp_$nape_geom_ZPP_$Monotone.isMonotone(this.zpp_inner.vertices)},isDegenerate:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||this.area()<nape_Config.epsilon},simplify:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(n<=0)throw haxe_Exception.thrown("Error: Epsilon should be > 0 for simplifying a GeomPoly");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return this.copy();var e=zpp_$nape_geom_ZPP_$Simplify.simplify(this.zpp_inner.vertices,n),t=nape_geom_GeomPoly.get();return t.zpp_inner.vertices=e,t},simpleDecomposition:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw haxe_Exception.thrown("Error: Cannot decompose a degenerate polygon");var e=this.zpp_inner.vertices;null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert);for(var t=zpp_$nape_geom_ZPP_$Simple.decompose(e,zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList),i=null==n?new nape_geom_GeomPolyList:n;null!=t.head;){var r=t.pop_unsafe(),l=nape_geom_GeomPoly.get();l.zpp_inner.vertices=r,i.zpp_inner.reverse_flag?i.push(l):i.unshift(l)}return i},monotoneDecomposition:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw haxe_Exception.thrown("Error: Cannot decompose a degenerate polygon");var e=this.zpp_inner.vertices;null==zpp_$nape_geom_ZPP_$Monotone.sharedPPoly&&(zpp_$nape_geom_ZPP_$Monotone.sharedPPoly=new zpp_$nape_geom_ZPP_$PartitionedPoly);var t=zpp_$nape_geom_ZPP_$Monotone.decompose(e,zpp_$nape_geom_ZPP_$Monotone.sharedPPoly);null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert);for(var i=t.extract(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList),r=null==n?new nape_geom_GeomPolyList:n;null!=i.head;){var l=i.pop_unsafe(),s=nape_geom_GeomPoly.get();s.zpp_inner.vertices=l,r.zpp_inner.reverse_flag?r.push(s):r.unshift(s)}return r},convexDecomposition:function(n,e){if(null==n&&(n=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw haxe_Exception.thrown("Error: Cannot decompose a degenerate polygon");var t=this.zpp_inner.vertices;null==zpp_$nape_geom_ZPP_$Monotone.sharedPPoly&&(zpp_$nape_geom_ZPP_$Monotone.sharedPPoly=new zpp_$nape_geom_ZPP_$PartitionedPoly);var i=zpp_$nape_geom_ZPP_$Monotone.decompose(t,zpp_$nape_geom_ZPP_$Monotone.sharedPPoly);null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList=new zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly);for(var r=i.extract_partitions(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList),l=null==e?new nape_geom_GeomPolyList:e;null!=r.head;){var s=r.pop_unsafe();zpp_$nape_geom_ZPP_$Triangular.triangulate(s),n&&zpp_$nape_geom_ZPP_$Triangular.optimise(s),zpp_$nape_geom_ZPP_$Convex.optimise(s),null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert);var a=s.extract(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList),o=s;for(o.next=zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool=o;null!=a.head;){var p=a.pop_unsafe(),h=nape_geom_GeomPoly.get();h.zpp_inner.vertices=p,l.zpp_inner.reverse_flag?l.push(h):l.unshift(h)}}return l},triangularDecomposition:function(n,e){if(null==n&&(n=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw haxe_Exception.thrown("Error: Cannot decompose a degenerate polygon");var t=this.zpp_inner.vertices;null==zpp_$nape_geom_ZPP_$Monotone.sharedPPoly&&(zpp_$nape_geom_ZPP_$Monotone.sharedPPoly=new zpp_$nape_geom_ZPP_$PartitionedPoly);var i=zpp_$nape_geom_ZPP_$Monotone.decompose(t,zpp_$nape_geom_ZPP_$Monotone.sharedPPoly);null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList=new zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly);for(var r=i.extract_partitions(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList),l=null==e?new nape_geom_GeomPolyList:e;null!=r.head;){var s=r.pop_unsafe();zpp_$nape_geom_ZPP_$Triangular.triangulate(s),n&&zpp_$nape_geom_ZPP_$Triangular.optimise(s),null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert);var a=s.extract(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList),o=s;for(o.next=zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool=o;null!=a.head;){var p=a.pop_unsafe(),h=nape_geom_GeomPoly.get();h.zpp_inner.vertices=p,l.zpp_inner.reverse_flag?l.push(h):l.unshift(h)}}return l},inflate:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");var e=nape_geom_GeomPoly.get(),t=this.winding();null==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),t==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE&&(n=-n);var i=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=i)for(var l=i;;){var s,a,o,p,h=l,u=h.prev,_=h.next;s=h.x-u.x,a=h.y-u.y,o=_.x-h.x,p=_.y-h.y;var c=0,d=0,f=0,x=0,b=(c=s)*c+(d=a)*d,y=1/Math.sqrt(b),v=c*=y;c=-(d*=y),d=v;c*=n,d*=n;var m=(f=o)*f+(x=p)*x,g=1/Math.sqrt(m),z=f*=g;f=-(x*=g),x=z;var w=p*((f*=n)-c)-o*((x*=n)-d),O=0==w?0:w/(p*s-o*a),C=0,E=0;C=h.x+c,E=h.y+d;var U,M=C+=s*O,T=E+=a*O;if(null==T&&(T=0),null==M&&(M=0),M!=M||T!=T)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?U=new nape_geom_Vec2:(U=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=U.zpp_pool,U.zpp_pool=null,U.zpp_disp=!1,U==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==U.zpp_inner){var k;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?k=new zpp_$nape_geom_ZPP_$Vec2:(k=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=k.next,k.next=null),k.weak=!1,k._immutable=!1,k.x=M,k.y=T,U.zpp_inner=k,U.zpp_inner.outer=U}else{if(null!=U&&U.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var D=U.zpp_inner;if(D._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=D._isimmutable&&D._isimmutable(),M!=M||T!=T)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=U&&U.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var S=U.zpp_inner;if(null!=S._validate&&S._validate(),U.zpp_inner.x==M){if(null!=U&&U.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var A=U.zpp_inner;null!=A._validate&&A._validate(),t=U.zpp_inner.y==T}else t=!1;if(!t){U.zpp_inner.x=M,U.zpp_inner.y=T;var P=U.zpp_inner;null!=P._invalidate&&P._invalidate(P)}}if(U.zpp_inner.weak=!1,e.push(U),(l=l.next)==r)break}return e.skipForward(1)},cut:function(n,e,t,i,r){if(null==i&&(i=!1),null==t&&(t=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null!=this.zpp_inner.vertices&&null!=this.zpp_inner.vertices.next&&this.zpp_inner.vertices.prev!=this.zpp_inner.vertices.next&&!zpp_$nape_geom_ZPP_$Simple.isSimple(this.zpp_inner.vertices))throw haxe_Exception.thrown("Error: Cut requires a truly simple polygon");if(null==n||null==e)throw haxe_Exception.thrown("Error: Cannot cut with null start/end's");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l=zpp_$nape_geom_ZPP_$Cutter.run(this.zpp_inner.vertices,n,e,t,i,r);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((a=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(o=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=o:zpp_$nape_util_ZPP_$PubPool.poolVec2=o,zpp_$nape_util_ZPP_$PubPool.nextVec2=o,o.zpp_disp=!0,null!=(o=s).outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o}if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;if((a=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o;s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(o=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=o:zpp_$nape_util_ZPP_$PubPool.poolVec2=o,zpp_$nape_util_ZPP_$PubPool.nextVec2=o,o.zpp_disp=!0,null!=(o=s).outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o}return l},transform:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform by null matrix");var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i,l=n.zpp_inner.a*r.x+n.zpp_inner.b*r.y+n.zpp_inner.tx;if(r.y=n.zpp_inner.c*r.x+n.zpp_inner.d*r.y+n.zpp_inner.ty,r.x=l,(i=i.next)==t)break}return this},bounds:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: empty GeomPoly has no defineable bounds");var n=1e100,e=1e100,t=-1e100,i=-1e100,r=this.zpp_inner.vertices,l=this.zpp_inner.vertices;if(null!=r)for(var s=r;;){var a=s;if(a.x<n&&(n=a.x),a.y<e&&(e=a.y),a.x>t&&(t=a.x),a.y>i&&(i=a.y),(s=s.next)==l)break}return new nape_geom_AABB(n,e,t-n,i-e)},top:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: empty GeomPoly has no defineable topmost vertex");var n=this.zpp_inner.vertices,e=this.zpp_inner.vertices.next,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(r.y<n.y&&(n=r),(i=i.next)==t)break}if(null==n.wrap){var l,s=n.x,a=n.y;if(null==a&&(a=0),null==s&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){var o;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?o=new zpp_$nape_geom_ZPP_$Vec2:(o=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=s,o.y=a,l.zpp_inner=o,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((h=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=l.zpp_inner)._validate&&h._validate(),l.zpp_inner.x==s){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;null!=(h=l.zpp_inner)._validate&&h._validate(),p=l.zpp_inner.y==a}else p=!1;if(!p)l.zpp_inner.x=s,l.zpp_inner.y=a,null!=(h=l.zpp_inner)._invalidate&&h._invalidate(h)}l.zpp_inner.weak=!1,n.wrap=l,n.wrap.zpp_inner._inuse=!0,n.wrap.zpp_inner._invalidate=$bind(n,n.modwrap),n.wrap.zpp_inner._validate=$bind(n,n.getwrap)}return n.wrap},bottom:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: empty GeomPoly has no defineable bottommost vertex");var n=this.zpp_inner.vertices,e=this.zpp_inner.vertices.next,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(r.y>n.y&&(n=r),(i=i.next)==t)break}if(null==n.wrap){var l,s=n.x,a=n.y;if(null==a&&(a=0),null==s&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){var o;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?o=new zpp_$nape_geom_ZPP_$Vec2:(o=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=s,o.y=a,l.zpp_inner=o,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((h=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=l.zpp_inner)._validate&&h._validate(),l.zpp_inner.x==s){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;null!=(h=l.zpp_inner)._validate&&h._validate(),p=l.zpp_inner.y==a}else p=!1;if(!p)l.zpp_inner.x=s,l.zpp_inner.y=a,null!=(h=l.zpp_inner)._invalidate&&h._invalidate(h)}l.zpp_inner.weak=!1,n.wrap=l,n.wrap.zpp_inner._inuse=!0,n.wrap.zpp_inner._invalidate=$bind(n,n.modwrap),n.wrap.zpp_inner._validate=$bind(n,n.getwrap)}return n.wrap},left:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: empty GeomPoly has no defineable leftmost vertex");var n=this.zpp_inner.vertices,e=this.zpp_inner.vertices.next,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(r.x<n.x&&(n=r),(i=i.next)==t)break}if(null==n.wrap){var l,s=n.x,a=n.y;if(null==a&&(a=0),null==s&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){var o;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?o=new zpp_$nape_geom_ZPP_$Vec2:(o=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=s,o.y=a,l.zpp_inner=o,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((h=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=l.zpp_inner)._validate&&h._validate(),l.zpp_inner.x==s){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;null!=(h=l.zpp_inner)._validate&&h._validate(),p=l.zpp_inner.y==a}else p=!1;if(!p)l.zpp_inner.x=s,l.zpp_inner.y=a,null!=(h=l.zpp_inner)._invalidate&&h._invalidate(h)}l.zpp_inner.weak=!1,n.wrap=l,n.wrap.zpp_inner._inuse=!0,n.wrap.zpp_inner._invalidate=$bind(n,n.modwrap),n.wrap.zpp_inner._validate=$bind(n,n.getwrap)}return n.wrap},right:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw haxe_Exception.thrown("Error: empty GeomPoly has no defineable rightmmost vertex");var n=this.zpp_inner.vertices,e=this.zpp_inner.vertices.next,t=this.zpp_inner.vertices;if(null!=e)for(var i=e;;){var r=i;if(r.x>n.x&&(n=r),(i=i.next)==t)break}if(null==n.wrap){var l,s=n.x,a=n.y;if(null==a&&(a=0),null==s&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){var o;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?o=new zpp_$nape_geom_ZPP_$Vec2:(o=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=s,o.y=a,l.zpp_inner=o,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((h=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=l.zpp_inner)._validate&&h._validate(),l.zpp_inner.x==s){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;null!=(h=l.zpp_inner)._validate&&h._validate(),p=l.zpp_inner.y==a}else p=!1;if(!p)l.zpp_inner.x=s,l.zpp_inner.y=a,null!=(h=l.zpp_inner)._invalidate&&h._invalidate(h)}l.zpp_inner.weak=!1,n.wrap=l,n.wrap.zpp_inner._inuse=!0,n.wrap.zpp_inner._invalidate=$bind(n,n.modwrap),n.wrap.zpp_inner._validate=$bind(n,n.getwrap)}return n.wrap},__class__:nape_geom_GeomPoly};var nape_geom_GeomPolyIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$GeomPolyList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate GeomPolyIterator derp!")};t["nape.geom.GeomPolyIterator"]=nape_geom_GeomPolyIterator,nape_geom_GeomPolyIterator.__name__="nape.geom.GeomPolyIterator",nape_geom_GeomPolyIterator.get=function(n){var e;if(null==nape_geom_GeomPolyIterator.zpp_pool){zpp_$nape_util_ZPP_$GeomPolyList.internal=!0;var t=new nape_geom_GeomPolyIterator;zpp_$nape_util_ZPP_$GeomPolyList.internal=!1,e=t}else{var i=nape_geom_GeomPolyIterator.zpp_pool;nape_geom_GeomPolyIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_geom_GeomPolyIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_geom_GeomPolyIterator.zpp_pool,nape_geom_GeomPolyIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_GeomPolyIterator};var nape_geom_GeomPolyList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$GeomPolyList,this.zpp_inner.outer=this};t["nape.geom.GeomPolyList"]=nape_geom_GeomPolyList,nape_geom_GeomPolyList.__name__="nape.geom.GeomPolyList",nape_geom_GeomPolyList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_geom_GeomPolyList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_geom_GeomPolyList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: GeomPolyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: GeomPolyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: GeomPolyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: GeomPolyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: GeomPolyList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: GeomPolyList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_geom_GeomPolyIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_geom_GeomPolyList;this.zpp_inner.valmod();for(var t=nape_geom_GeomPolyIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_geom_GeomPolyIterator.zpp_pool,nape_geom_GeomPolyIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: GeomPoly is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_geom_GeomPolyIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_geom_GeomPolyIterator.zpp_pool,nape_geom_GeomPolyIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_geom_GeomPolyIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_geom_GeomPolyIterator.zpp_pool,nape_geom_GeomPolyIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_geom_GeomPolyIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_geom_GeomPolyIterator.zpp_pool,nape_geom_GeomPolyIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_geom_GeomPolyIterator.zpp_pool,nape_geom_GeomPolyIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_geom_GeomPolyList,__properties__:{get_length:"get_length"}};var nape_geom_GeomVertexIterator=function(){if(!zpp_$nape_geom_ZPP_$GeomVertexIterator.internal)throw haxe_Exception.thrown("Error: Cannot instantiate GeomVertexIterator")};t["nape.geom.GeomVertexIterator"]=nape_geom_GeomVertexIterator,nape_geom_GeomVertexIterator.__name__="nape.geom.GeomVertexIterator",nape_geom_GeomVertexIterator.prototype={hasNext:function(){if(null==this.zpp_inner)throw haxe_Exception.thrown("Error: Iterator has been disposed");var n=this.zpp_inner.ptr!=this.zpp_inner.start||this.zpp_inner.first;if(this.zpp_inner.first=!1,!n){var e=this.zpp_inner;e.outer.zpp_inner=null,e.ptr=e.start=null,e.next=zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool,zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool=e}return n},next:function(){if(null==this.zpp_inner)throw haxe_Exception.thrown("Error: Iterator has been disposed");var n=this.zpp_inner.ptr;if(null==n.wrap){var e=n.x,t=n.y;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?s=new nape_geom_Vec2:(s=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=s.zpp_pool,s.zpp_pool=null,s.zpp_disp=!1,s==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==s.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,s.zpp_inner=i,s.zpp_inner.outer=s}else{if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),s.zpp_inner.x==e){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=s.zpp_inner)._validate&&l._validate(),r=s.zpp_inner.y==t}else r=!1;if(!r)s.zpp_inner.x=e,s.zpp_inner.y=t,null!=(l=s.zpp_inner)._invalidate&&l._invalidate(l)}s.zpp_inner.weak=!1,n.wrap=s,n.wrap.zpp_inner._inuse=!0,n.wrap.zpp_inner._invalidate=$bind(n,n.modwrap),n.wrap.zpp_inner._validate=$bind(n,n.getwrap)}var s=n.wrap;return this.zpp_inner.ptr=this.zpp_inner.forward?this.zpp_inner.ptr.next:this.zpp_inner.ptr.prev,s},__class__:nape_geom_GeomVertexIterator};var nape_geom_MarchingSquares=function(){};t["nape.geom.MarchingSquares"]=nape_geom_MarchingSquares,nape_geom_MarchingSquares.__name__="nape.geom.MarchingSquares",nape_geom_MarchingSquares.run=function(n,e,t,i,r,l,s){if(null==l&&(l=!0),null==i&&(i=2),null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: MarchingSquares requires an iso function to operate");if(null==e)throw haxe_Exception.thrown("Error: MarchingSquares requires an AABB to define bounds of surface extraction");if(null==t)throw haxe_Exception.thrown("Error: MarchingSquares requires a Vec2 to define cell size for surface extraction");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(R=t.zpp_inner)._validate&&R._validate(),t.zpp_inner.x<=0)o=!0;else{if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(R=t.zpp_inner)._validate&&R._validate(),o=t.zpp_inner.y<=0}if(o)throw haxe_Exception.thrown("Error: MarchingSquares cannot operate with non-positive cell dimensions");if(i<0)throw haxe_Exception.thrown("Error: MarchingSquares cannot use a negative quality value for interpolation");if(null!=r){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(R=r.zpp_inner)._validate&&R._validate(),r.zpp_inner.x<=0)o=!0;else{if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(R=r.zpp_inner)._validate&&R._validate(),o=r.zpp_inner.y<=0}}else o=!1;if(o)throw haxe_Exception.thrown("Error: MarchingSquares cannot with non-positive sub-grid dimensions");var a=null!=s?s:new nape_geom_GeomPolyList;if(null==r){null!=(R=e.zpp_inner)._validate&&R._validate();var o=e.zpp_inner.minx;null!=(R=e.zpp_inner)._validate&&R._validate();var p=e.zpp_inner.miny;if(null!=(R=e.zpp_inner.getmax())&&R.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=R.zpp_inner)._validate&&m._validate();var h=R.zpp_inner.x;if(null!=(R=e.zpp_inner.getmax())&&R.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=R.zpp_inner)._validate&&m._validate(),zpp_$nape_geom_ZPP_$MarchingSquares.run(n,o,p,h,R.zpp_inner.y,t,i,l,a)}else{null!=(R=e.zpp_inner)._validate&&R._validate();var u=(R=e.zpp_inner).maxx-R.minx;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(R=r.zpp_inner)._validate&&R._validate();var _=u/r.zpp_inner.x;null!=(R=e.zpp_inner)._validate&&R._validate();var c=(R=e.zpp_inner).maxy-R.miny;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(R=r.zpp_inner)._validate&&R._validate();var d=c/r.zpp_inner.y,f=0|_,x=0|d;f!=_&&++f,x!=d&&++x;for(var b=0,y=f;b<y;){var v=b++;null!=(R=e.zpp_inner)._validate&&R._validate();var m,g=e.zpp_inner.minx;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=r.zpp_inner)._validate&&m._validate();var z,w=g+r.zpp_inner.x*v;if(v==f-1){var O=e.zpp_inner.getmax();if(null!=O&&O.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var C=O.zpp_inner;null!=C._validate&&C._validate(),z=O.zpp_inner.x}else{if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var E=r.zpp_inner;null!=E._validate&&E._validate(),z=w+r.zpp_inner.x}for(var U=0,M=x;U<M;){var T=U++,k=e.zpp_inner;null!=k._validate&&k._validate();var D=e.zpp_inner.miny;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var S=r.zpp_inner;null!=S._validate&&S._validate();var A,P=D+r.zpp_inner.y*T;if(T==x-1){var V=e.zpp_inner.getmax();if(null!=V&&V.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var I=V.zpp_inner;null!=I._validate&&I._validate(),A=V.zpp_inner.y}else{if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var N=r.zpp_inner;null!=N._validate&&N._validate(),A=P+r.zpp_inner.y}zpp_$nape_geom_ZPP_$MarchingSquares.run(n,w,P,z,A,t,i,l,a)}}}if(t.zpp_inner.weak){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((R=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=R._isimmutable&&R._isimmutable(),t.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var F=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,(L=t).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=L:zpp_$nape_util_ZPP_$PubPool.poolVec2=L,zpp_$nape_util_ZPP_$PubPool.nextVec2=L,L.zpp_disp=!0,null!=(L=F).outer&&(L.outer.zpp_inner=null,L.outer=null),L._isimmutable=null,L._validate=null,L._invalidate=null,L.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=L}if(null!=r&&r.zpp_inner.weak){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var R;if((R=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=R._isimmutable&&R._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var L;F=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(L=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=L:zpp_$nape_util_ZPP_$PubPool.poolVec2=L,zpp_$nape_util_ZPP_$PubPool.nextVec2=L,L.zpp_disp=!0,null!=(L=F).outer&&(L.outer.zpp_inner=null,L.outer=null),L._isimmutable=null,L._validate=null,L._invalidate=null,L.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=L}return a};var nape_geom_Mat23=function(n,e,t,i,r,l){if(null==l&&(l=0),null==r&&(r=0),null==i&&(i=1),null==t&&(t=0),null==e&&(e=0),null==n&&(n=1),this.zpp_inner=null,this.zpp_inner=zpp_$nape_geom_ZPP_$Mat23.get(),this.zpp_inner.outer=this,n!=n)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");var s;if(this.zpp_inner.a=n,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(),e!=e)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");if(this.zpp_inner.b=e,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(),r!=r)throw haxe_Exception.thrown("Error: Mat23::tx cannot be NaN");if(this.zpp_inner.tx=r,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(),t!=t)throw haxe_Exception.thrown("Error: Mat23::c cannot be NaN");if(this.zpp_inner.c=t,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(),i!=i)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");if(this.zpp_inner.d=i,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(),l!=l)throw haxe_Exception.thrown("Error: Mat23::ty cannot be NaN");this.zpp_inner.ty=l,null!=(s=this.zpp_inner)._invalidate&&s._invalidate()};t["nape.geom.Mat23"]=nape_geom_Mat23,nape_geom_Mat23.__name__="nape.geom.Mat23",nape_geom_Mat23.rotation=function(n){if(n!=n)throw haxe_Exception.thrown("Error: Cannot create rotation matrix with NaN angle");var e=Math.cos(n),t=Math.sin(n);return new nape_geom_Mat23(e,-t,t,e,0,0)},nape_geom_Mat23.translation=function(n,e){return new nape_geom_Mat23(1,0,0,1,n,e)},nape_geom_Mat23.scale=function(n,e){return new nape_geom_Mat23(n,0,0,e,0,0)},nape_geom_Mat23.prototype={get_a:function(){return this.zpp_inner.a},set_a:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");this.zpp_inner.a=n;var e=this.zpp_inner;return null!=e._invalidate&&e._invalidate(),this.zpp_inner.a},get_b:function(){return this.zpp_inner.b},set_b:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");this.zpp_inner.b=n;var e=this.zpp_inner;return null!=e._invalidate&&e._invalidate(),this.zpp_inner.b},get_c:function(){return this.zpp_inner.c},set_c:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Mat23::c cannot be NaN");this.zpp_inner.c=n;var e=this.zpp_inner;return null!=e._invalidate&&e._invalidate(),this.zpp_inner.c},get_d:function(){return this.zpp_inner.d},set_d:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");this.zpp_inner.d=n;var e=this.zpp_inner;return null!=e._invalidate&&e._invalidate(),this.zpp_inner.d},get_tx:function(){return this.zpp_inner.tx},set_tx:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Mat23::tx cannot be NaN");this.zpp_inner.tx=n;var e=this.zpp_inner;return null!=e._invalidate&&e._invalidate(),this.zpp_inner.tx},get_ty:function(){return this.zpp_inner.ty},set_ty:function(n){if(n!=n)throw haxe_Exception.thrown("Error: Mat23::ty cannot be NaN");this.zpp_inner.ty=n;var e=this.zpp_inner;return null!=e._invalidate&&e._invalidate(),this.zpp_inner.ty},copy:function(){return new nape_geom_Mat23(this.zpp_inner.a,this.zpp_inner.b,this.zpp_inner.c,this.zpp_inner.d,this.zpp_inner.tx,this.zpp_inner.ty)},set:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot set form null matrix");var e=n.zpp_inner;this.zpp_inner.setas(e.a,e.b,e.c,e.d,e.tx,e.ty);var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this},setAs:function(n,e,t,i,r,l){null==l&&(l=0),null==r&&(r=0),null==i&&(i=1),null==t&&(t=0),null==e&&(e=0),null==n&&(n=1),this.zpp_inner.setas(n,e,t,i,r,l);var s=this.zpp_inner;return null!=s._invalidate&&s._invalidate(),this},reset:function(){return this.setAs()},get_determinant:function(){return this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c},singular:function(){var n=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d,e=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;return e<0&&(e=-e),n>nape_Config.illConditionedThreshold*e},inverse:function(){if(this.singular())throw haxe_Exception.thrown("Error: Matrix is singular and cannot be inverted");var n=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);return new nape_geom_Mat23(this.zpp_inner.d*n,-this.zpp_inner.b*n,-this.zpp_inner.c*n,this.zpp_inner.a*n,(this.zpp_inner.b*this.zpp_inner.ty-this.zpp_inner.d*this.zpp_inner.tx)*n,(this.zpp_inner.c*this.zpp_inner.tx-this.zpp_inner.a*this.zpp_inner.ty)*n)},transpose:function(){return new nape_geom_Mat23(this.zpp_inner.a,this.zpp_inner.c,this.zpp_inner.b,this.zpp_inner.d,-this.zpp_inner.a*this.zpp_inner.tx-this.zpp_inner.c*this.zpp_inner.ty,-this.zpp_inner.b*this.zpp_inner.tx-this.zpp_inner.d*this.zpp_inner.ty)},concat:function(n){var e=n;if(null==e)throw haxe_Exception.thrown("Error: Cannot concatenate with null Mat23");return new nape_geom_Mat23(e.zpp_inner.a*this.zpp_inner.a+e.zpp_inner.b*this.zpp_inner.c,e.zpp_inner.a*this.zpp_inner.b+e.zpp_inner.b*this.zpp_inner.d,e.zpp_inner.c*this.zpp_inner.a+e.zpp_inner.d*this.zpp_inner.c,e.zpp_inner.c*this.zpp_inner.b+e.zpp_inner.d*this.zpp_inner.d,e.zpp_inner.a*this.zpp_inner.tx+e.zpp_inner.b*this.zpp_inner.ty+e.zpp_inner.tx,e.zpp_inner.c*this.zpp_inner.tx+e.zpp_inner.d*this.zpp_inner.ty+e.zpp_inner.ty)},transform:function(n,e,t){if(null==t&&(t=!1),null==e&&(e=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform null Vec2");var i;if(e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var r=n.zpp_inner.x*this.zpp_inner.a;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var l=r+n.zpp_inner.y*this.zpp_inner.b;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var s=n.zpp_inner.x*this.zpp_inner.c;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=n.zpp_inner)._validate&&u._validate(),null==(o=t)&&(o=!1),null==(a=s+n.zpp_inner.y*this.zpp_inner.d)&&(a=0),null==l&&(l=0),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?h=new zpp_$nape_geom_ZPP_$Vec2:(h=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h.next,h.next=null),h.weak=!1,h._immutable=!1,h.x=l,h.y=a,p.zpp_inner=h,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),p.zpp_inner.x==l){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),h=p.zpp_inner.y==a}else h=!1;if(!h)p.zpp_inner.x=l,p.zpp_inner.y=a,null!=(u=p.zpp_inner)._invalidate&&u._invalidate(u)}p.zpp_inner.weak=o,i=p}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();r=n.zpp_inner.x*this.zpp_inner.a;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();l=r+n.zpp_inner.y*this.zpp_inner.b+this.zpp_inner.tx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var a,o,p;s=n.zpp_inner.x*this.zpp_inner.c;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=n.zpp_inner)._validate&&u._validate(),null==(o=t)&&(o=!1),null==(a=s+n.zpp_inner.y*this.zpp_inner.d+this.zpp_inner.ty)&&(a=0),null==l&&(l=0),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?h=new zpp_$nape_geom_ZPP_$Vec2:(h=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h.next,h.next=null),h.weak=!1,h._immutable=!1,h.x=l,h.y=a,p.zpp_inner=h,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;if((u=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=p.zpp_inner)._validate&&u._validate(),p.zpp_inner.x==l){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=p.zpp_inner)._validate&&u._validate(),h=p.zpp_inner.y==a}else h=!1;if(!h)p.zpp_inner.x=l,p.zpp_inner.y=a,null!=(u=p.zpp_inner)._invalidate&&u._invalidate(u)}p.zpp_inner.weak=o,i=p}if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u;if((u=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _,c=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(_=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=c).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}return i},inverseTransform:function(n,e,t){if(null==t&&(t=!1),null==e&&(e=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform null Vec2");if(this.singular())throw haxe_Exception.thrown("Error: Matrix is singular and inverse transformation cannot be performed");var i,r=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);if(e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var l=n.zpp_inner.x*this.zpp_inner.d;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var s=(l-n.zpp_inner.y*this.zpp_inner.b)*r;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var a=n.zpp_inner.y*this.zpp_inner.a;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var o=(a-n.zpp_inner.x*this.zpp_inner.c)*r;if(null==(h=t)&&(h=!1),null==o&&(o=0),null==s&&(s=0),s!=s||o!=o)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?u=new nape_geom_Vec2:(u=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=u.zpp_pool,u.zpp_pool=null,u.zpp_disp=!1,u==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==u.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?c=new zpp_$nape_geom_ZPP_$Vec2:(c=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=s,c.y=o,u.zpp_inner=c,u.zpp_inner.outer=u}else{if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),s!=s||o!=o)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=u.zpp_inner)._validate&&d._validate(),u.zpp_inner.x==s){if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=u.zpp_inner)._validate&&d._validate(),c=u.zpp_inner.y==o}else c=!1;if(!c)u.zpp_inner.x=s,u.zpp_inner.y=o,null!=(d=u.zpp_inner)._invalidate&&d._invalidate(d)}u.zpp_inner.weak=h,i=u}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var p=n.zpp_inner.x-this.zpp_inner.tx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var h,u,_=n.zpp_inner.y-this.zpp_inner.ty;l=(p*this.zpp_inner.d-_*this.zpp_inner.b)*r;if(null==(h=t)&&(h=!1),null==(a=(_*this.zpp_inner.a-p*this.zpp_inner.c)*r)&&(a=0),null==l&&(l=0),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?u=new nape_geom_Vec2:(u=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=u.zpp_pool,u.zpp_pool=null,u.zpp_disp=!1,u==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==u.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?c=new zpp_$nape_geom_ZPP_$Vec2:(c=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=l,c.y=a,u.zpp_inner=c,u.zpp_inner.outer=u}else{if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;if((d=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=u.zpp_inner)._validate&&d._validate(),u.zpp_inner.x==l){if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=u.zpp_inner)._validate&&d._validate(),c=u.zpp_inner.y==a}else c=!1;if(!c)u.zpp_inner.x=l,u.zpp_inner.y=a,null!=(d=u.zpp_inner)._invalidate&&d._invalidate(d)}u.zpp_inner.weak=h,i=u}if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;if((d=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var f,x=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(f=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=f:zpp_$nape_util_ZPP_$PubPool.poolVec2=f,zpp_$nape_util_ZPP_$PubPool.nextVec2=f,f.zpp_disp=!0,null!=(f=x).outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=f}return i},toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},equiorthogonal:function(){if(this.singular())return!1;var n=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(n*n<nape_Config.epsilon){var e=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d;return e*e<nape_Config.epsilon}return!1},orthogonal:function(){var n=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(n*n<nape_Config.epsilon){var e=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-1,t=this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d-1;return e*e<nape_Config.epsilon&&t*t<nape_Config.epsilon}return!1},equiorthogonalise:function(){if(!this.equiorthogonal()){var n=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),e=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);if(n*n<nape_Config.epsilon||e*e<nape_Config.epsilon)throw haxe_Exception.thrown("Error: Matrix is singular and cannot be equiorthogonalised");var t=(n+e)/2;n=t/n,e=t/e;var i=this.zpp_inner.a*n;if(i!=i)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");if(this.zpp_inner.a=i,null!=(p=this.zpp_inner)._invalidate&&p._invalidate(),(a=this.zpp_inner.c*n)!=a)throw haxe_Exception.thrown("Error: Mat23::c cannot be NaN");this.zpp_inner.c=a,null!=(p=this.zpp_inner)._invalidate&&p._invalidate();var r=this.zpp_inner.b*e;if(r!=r)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");if(this.zpp_inner.b=r,null!=(p=this.zpp_inner)._invalidate&&p._invalidate(),(o=this.zpp_inner.d*e)!=o)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");this.zpp_inner.d=o,null!=(p=this.zpp_inner)._invalidate&&p._invalidate();var l=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d,s=.25*Math.PI-.5*Math.acos(l/(t*t));this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c>0&&(s=-s);var a,o,p,h=Math.sin(s),u=Math.cos(s),_=this.zpp_inner.a*u-this.zpp_inner.c*h,c=this.zpp_inner.b*u+this.zpp_inner.d*h;if((a=this.zpp_inner.c*u+this.zpp_inner.a*h)!=a)throw haxe_Exception.thrown("Error: Mat23::c cannot be NaN");if(this.zpp_inner.c=a,null!=(p=this.zpp_inner)._invalidate&&p._invalidate(),_!=_)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");if(this.zpp_inner.a=_,null!=(p=this.zpp_inner)._invalidate&&p._invalidate(),(o=this.zpp_inner.d*u-this.zpp_inner.b*h)!=o)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");if(this.zpp_inner.d=o,null!=(p=this.zpp_inner)._invalidate&&p._invalidate(),c!=c)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");this.zpp_inner.b=c,null!=(p=this.zpp_inner)._invalidate&&p._invalidate(),null!=(p=this.zpp_inner)._invalidate&&p._invalidate()}return this},orthogonalise:function(){if(!this.orthogonal()){var n=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),e=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);if(n*n<nape_Config.epsilon||e*e<nape_Config.epsilon)throw haxe_Exception.thrown("Error: Matrix is singular and cannot be orthogonalised");n=1/n,e=1/e;var t=this.zpp_inner.a*n;if(t!=t)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");if(this.zpp_inner.a=t,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(),(s=this.zpp_inner.c*n)!=s)throw haxe_Exception.thrown("Error: Mat23::c cannot be NaN");this.zpp_inner.c=s,null!=(o=this.zpp_inner)._invalidate&&o._invalidate();var i=this.zpp_inner.b*e;if(i!=i)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");if(this.zpp_inner.b=i,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(),(a=this.zpp_inner.d*e)!=a)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");this.zpp_inner.d=a,null!=(o=this.zpp_inner)._invalidate&&o._invalidate();var r=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d,l=.25*Math.PI-.5*Math.acos(r/1);this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c>0&&(l=-l);var s,a,o,p=Math.sin(l),h=Math.cos(l),u=this.zpp_inner.a*h-this.zpp_inner.c*p,_=this.zpp_inner.b*h+this.zpp_inner.d*p;if((s=this.zpp_inner.c*h+this.zpp_inner.a*p)!=s)throw haxe_Exception.thrown("Error: Mat23::c cannot be NaN");if(this.zpp_inner.c=s,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(),u!=u)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");if(this.zpp_inner.a=u,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(),(a=this.zpp_inner.d*h-this.zpp_inner.b*p)!=a)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");if(this.zpp_inner.d=a,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(),_!=_)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");this.zpp_inner.b=_,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(),null!=(o=this.zpp_inner)._invalidate&&o._invalidate()}return this},__class__:nape_geom_Mat23,__properties__:{get_determinant:"get_determinant",set_ty:"set_ty",get_ty:"get_ty",set_tx:"set_tx",get_tx:"get_tx",set_d:"set_d",get_d:"get_d",set_c:"set_c",get_c:"get_c",set_b:"set_b",get_b:"get_b",set_a:"set_a",get_a:"get_a"}};var nape_geom_MatMN=function(n,e){if(this.zpp_inner=null,n<=0||e<=0)throw haxe_Exception.thrown("Error: MatMN::dimensions cannot be < 1");this.zpp_inner=new zpp_$nape_geom_ZPP_$MatMN(n,e),this.zpp_inner.outer=this};t["nape.geom.MatMN"]=nape_geom_MatMN,nape_geom_MatMN.__name__="nape.geom.MatMN",nape_geom_MatMN.prototype={get_rows:function(){return this.zpp_inner.m},get_cols:function(){return this.zpp_inner.n},x:function(n,e){if(n<0||e<0||n>=this.zpp_inner.m||e>=this.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return this.zpp_inner.x[n*this.zpp_inner.n+e]},setx:function(n,e,t){if(n<0||e<0||n>=this.zpp_inner.m||e>=this.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");return this.zpp_inner.x[n*this.zpp_inner.n+e]=t},toString:function(){for(var n="{ ",e=!0,t=0,i=this.zpp_inner.m;t<i;){var r=t++;e||(n+="; "),e=!1;for(var l=0,s=this.zpp_inner.n;l<s;){var a=l++;if(r<0||a<0||r>=this.zpp_inner.m||a>=this.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n+=this.zpp_inner.x[r*this.zpp_inner.n+a]+" "}}return n+="}"},transpose:function(){for(var n=new nape_geom_MatMN(this.zpp_inner.n,this.zpp_inner.m),e=0,t=this.zpp_inner.m;e<t;)for(var i=e++,r=0,l=this.zpp_inner.n;r<l;){var s=r++;if(i<0||s<0||i>=this.zpp_inner.m||s>=this.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");var a=this.zpp_inner.x[i*this.zpp_inner.n+s];if(s<0||i<0||s>=n.zpp_inner.m||i>=n.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");n.zpp_inner.x[s*n.zpp_inner.n+i]=a}return n},mul:function(n){var e=n;if(this.zpp_inner.n!=e.zpp_inner.m)throw haxe_Exception.thrown("Error: Matrix dimensions aren't compatible");for(var t=new nape_geom_MatMN(this.zpp_inner.m,e.zpp_inner.n),i=0,r=this.zpp_inner.m;i<r;)for(var l=i++,s=0,a=e.zpp_inner.n;s<a;){for(var o=s++,p=0,h=0,u=this.zpp_inner.n;h<u;){var _=h++;if(l<0||_<0||l>=this.zpp_inner.m||_>=this.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");var c=this.zpp_inner.x[l*this.zpp_inner.n+_];if(_<0||o<0||_>=e.zpp_inner.m||o>=e.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");p+=c*e.zpp_inner.x[_*e.zpp_inner.n+o]}if(l<0||o<0||l>=t.zpp_inner.m||o>=t.zpp_inner.n)throw haxe_Exception.thrown("Error: MatMN indices out of range");t.zpp_inner.x[l*t.zpp_inner.n+o]=p}return t},__class__:nape_geom_MatMN,__properties__:{get_cols:"get_cols",get_rows:"get_rows"}};var nape_geom_Ray=function(n,e){if(this.zpp_inner=null,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner=new zpp_$nape_geom_ZPP_$Ray,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Ray::origin cannot be null");if(null!=(a=this.zpp_inner.origin)&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var t=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var i=n.zpp_inner.y;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=a.zpp_inner)._validate&&s._validate(),a.zpp_inner.x==t){if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=a.zpp_inner)._validate&&s._validate(),l=a.zpp_inner.y==i}else l=!1;l||(a.zpp_inner.x=t,a.zpp_inner.y=i,null!=(s=a.zpp_inner)._invalidate&&s._invalidate(s));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((a=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(o=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=o:zpp_$nape_util_ZPP_$PubPool.poolVec2=o,zpp_$nape_util_ZPP_$PubPool.nextVec2=o,o.zpp_disp=!0,null!=(o=r).outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o}if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==e)throw haxe_Exception.thrown("Error: Ray::direction cannot be null");if(null!=(a=this.zpp_inner.direction)&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),null==e)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=e.zpp_inner)._validate&&s._validate();t=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=e.zpp_inner)._validate&&s._validate();var l;i=e.zpp_inner.y;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=a.zpp_inner)._validate&&s._validate(),a.zpp_inner.x==t){if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=a.zpp_inner)._validate&&s._validate(),l=a.zpp_inner.y==i}else l=!1;l||(a.zpp_inner.x=t,a.zpp_inner.y=i,null!=(s=a.zpp_inner)._invalidate&&s._invalidate(s));if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;if((a=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o;r=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(o=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=o:zpp_$nape_util_ZPP_$PubPool.poolVec2=o,zpp_$nape_util_ZPP_$PubPool.nextVec2=o,o.zpp_disp=!0,null!=(o=r).outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o}this.zpp_inner.zip_dir=!0,this.zpp_inner.maxdist=1/0};t["nape.geom.Ray"]=nape_geom_Ray,nape_geom_Ray.__name__="nape.geom.Ray",nape_geom_Ray.fromSegment=function(n,e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Ray::fromSegment::start is null");if(null==e)throw haxe_Exception.thrown("Error: Ray::fromSegment::end is null");var t=e.sub(n,!0),i=new nape_geom_Ray(n,t);if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var r=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var l=n.zpp_inner.y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=e.zpp_inner)._validate&&u._validate();var s=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=e.zpp_inner)._validate&&u._validate();var a,o;a=r-s,o=l-e.zpp_inner.y;var p=Math.sqrt(a*a+o*o);if(p!=p)throw haxe_Exception.thrown("Error: maxDistance cannot be NaN");if(i.zpp_inner.maxdist=p,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var h=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(_=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=h).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u;if((u=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _;h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(_=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=h).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}return i},nape_geom_Ray.prototype={get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_origin:function(){return this.zpp_inner.origin},set_origin:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Ray::origin cannot be null");if(null!=(l=this.zpp_inner.origin)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return this.zpp_inner.origin},get_direction:function(){return this.zpp_inner.direction},set_direction:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Ray::direction cannot be null");if(null!=(l=this.zpp_inner.direction)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return this.zpp_inner.zip_dir=!0,this.zpp_inner.direction},get_maxDistance:function(){return this.zpp_inner.maxdist},set_maxDistance:function(n){if(n!=n)throw haxe_Exception.thrown("Error: maxDistance cannot be NaN");return this.zpp_inner.maxdist=n,this.zpp_inner.maxdist},aabb:function(){return this.zpp_inner.rayAABB().wrapper()},at:function(n,e){if(null==e&&(e=!1),this.zpp_inner.validate_dir(),null!=(p=this.zpp_inner.origin)&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=p.zpp_inner)._validate&&t._validate();var t,i=p.zpp_inner.x+n*this.zpp_inner.dirx;if(null!=(p=this.zpp_inner.origin)&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=p.zpp_inner)._validate&&t._validate();var r,l=p.zpp_inner.y+n*this.zpp_inner.diry,s=e;if(null==s&&(s=!1),null==l&&(l=0),null==i&&(i=0),i!=i||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?r=new nape_geom_Vec2:(r=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=r.zpp_pool,r.zpp_pool=null,r.zpp_disp=!1,r==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==r.zpp_inner){var a;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?a=new zpp_$nape_geom_ZPP_$Vec2:(a=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=l,r.zpp_inner=a,r.zpp_inner.outer=r}else{if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;if((p=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),i!=i||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(p=r.zpp_inner)._validate&&p._validate(),r.zpp_inner.x==i){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;null!=(p=r.zpp_inner)._validate&&p._validate(),o=r.zpp_inner.y==l}else o=!1;if(!o)r.zpp_inner.x=i,r.zpp_inner.y=l,null!=(p=r.zpp_inner)._invalidate&&p._invalidate(p)}return r.zpp_inner.weak=s,r},copy:function(){var n=new nape_geom_Ray(this.zpp_inner.origin,this.zpp_inner.direction),e=this.zpp_inner.maxdist;if(e!=e)throw haxe_Exception.thrown("Error: maxDistance cannot be NaN");return n.zpp_inner.maxdist=e,n},__class__:nape_geom_Ray,__properties__:{set_maxDistance:"set_maxDistance",get_maxDistance:"get_maxDistance",set_direction:"set_direction",get_direction:"get_direction",set_origin:"set_origin",get_origin:"get_origin",get_userData:"get_userData"}};var nape_geom_RayResult=function(){if(this.zpp_inner=null,!zpp_$nape_geom_ZPP_$ConvexRayResult.internal)throw haxe_Exception.thrown("Error: RayResult cannot be instantiated derp!")};t["nape.geom.RayResult"]=nape_geom_RayResult,nape_geom_RayResult.__name__="nape.geom.RayResult",nape_geom_RayResult.prototype={get_normal:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.normal},get_distance:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.toiDistance},get_inner:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.inner},get_shape:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return this.zpp_inner.shape},dispose:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");this.zpp_inner.free()},toString:function(){if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");var n="{ shape: "+Std.string(this.zpp_inner.shape)+" distance: ";if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");var e=n+this.zpp_inner.toiDistance+" ?inner: ";if(null!=this.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");return e+Std.string(this.zpp_inner.inner)+" }"},__class__:nape_geom_RayResult,__properties__:{get_shape:"get_shape",get_inner:"get_inner",get_distance:"get_distance",get_normal:"get_normal"}};var nape_geom_RayResultIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$RayResultList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate RayResultIterator derp!")};t["nape.geom.RayResultIterator"]=nape_geom_RayResultIterator,nape_geom_RayResultIterator.__name__="nape.geom.RayResultIterator",nape_geom_RayResultIterator.get=function(n){var e;if(null==nape_geom_RayResultIterator.zpp_pool){zpp_$nape_util_ZPP_$RayResultList.internal=!0;var t=new nape_geom_RayResultIterator;zpp_$nape_util_ZPP_$RayResultList.internal=!1,e=t}else{var i=nape_geom_RayResultIterator.zpp_pool;nape_geom_RayResultIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_geom_RayResultIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_geom_RayResultIterator.zpp_pool,nape_geom_RayResultIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_RayResultIterator};var nape_geom_RayResultList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$RayResultList,this.zpp_inner.outer=this};t["nape.geom.RayResultList"]=nape_geom_RayResultList,nape_geom_RayResultList.__name__="nape.geom.RayResultList",nape_geom_RayResultList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_geom_RayResultList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_geom_RayResultList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: RayResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: RayResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n)}else this.zpp_inner.inner.add(n);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: RayResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=n=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=n=null==t?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: RayResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=n=null==e?this.zpp_inner.inner.head.elt:e.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=n=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: RayResultList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: RayResultList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_geom_RayResultIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_geom_RayResultList;this.zpp_inner.valmod();for(var t=nape_geom_RayResultIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_geom_RayResultIterator.zpp_pool,nape_geom_RayResultIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: RayResult is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_geom_RayResultIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_geom_RayResultIterator.zpp_pool,nape_geom_RayResultIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_geom_RayResultIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_geom_RayResultIterator.zpp_pool,nape_geom_RayResultIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_geom_RayResultIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_geom_RayResultIterator.zpp_pool,nape_geom_RayResultIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_geom_RayResultIterator.zpp_pool,nape_geom_RayResultIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_geom_RayResultList,__properties__:{get_length:"get_length"}};var nape_geom_Vec2=function(n,e){if(null==e&&(e=0),null==n&&(n=0),this.zpp_pool=null,this.zpp_inner=null,n!=n||e!=e)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");var t;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?t=new zpp_$nape_geom_ZPP_$Vec2:(t=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=n,t.y=e,this.zpp_inner=t,this.zpp_inner.outer=this};t["nape.geom.Vec2"]=nape_geom_Vec2,nape_geom_Vec2.__name__="nape.geom.Vec2",nape_geom_Vec2.weak=function(n,e){null==e&&(e=0),null==n&&(n=0);var t,i=n,r=e,l=!0;if(null==l&&(l=!1),null==r&&(r=0),null==i&&(i=0),i!=i||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?t=new nape_geom_Vec2:(t=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=t.zpp_pool,t.zpp_pool=null,t.zpp_disp=!1,t==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==t.zpp_inner){var s;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?s=new zpp_$nape_geom_ZPP_$Vec2:(s=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=i,s.y=r,t.zpp_inner=s,t.zpp_inner.outer=t}else{if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;if((o=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),i!=i||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=t.zpp_inner)._validate&&o._validate(),t.zpp_inner.x==i){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;null!=(o=t.zpp_inner)._validate&&o._validate(),a=t.zpp_inner.y==r}else a=!1;if(!a)t.zpp_inner.x=i,t.zpp_inner.y=r,null!=(o=t.zpp_inner)._invalidate&&o._invalidate(o)}return t.zpp_inner.weak=l,t},nape_geom_Vec2.get=function(n,e,t){if(null==t&&(t=!1),null==e&&(e=0),null==n&&(n=0),n!=n||e!=e)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");var i;if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?i=new nape_geom_Vec2:(i=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=i.zpp_pool,i.zpp_pool=null,i.zpp_disp=!1,i==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==i.zpp_inner){var r;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=n,r.y=e,i.zpp_inner=r,i.zpp_inner.outer=i}else{if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((s=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n!=n||e!=e)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=i.zpp_inner)._validate&&s._validate(),i.zpp_inner.x==n){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=i.zpp_inner)._validate&&s._validate(),l=i.zpp_inner.y==e}else l=!1;if(!l)i.zpp_inner.x=n,i.zpp_inner.y=e,null!=(s=i.zpp_inner)._invalidate&&s._invalidate(s)}return i.zpp_inner.weak=t,i},nape_geom_Vec2.fromPolar=function(n,e,t){if(null==t&&(t=!1),n!=n)throw haxe_Exception.thrown("Error: Vec2::length cannot be NaN");if(e!=e)throw haxe_Exception.thrown("Error: Vec2::angle cannot be NaN");var i,r=n*Math.cos(e),l=n*Math.sin(e),s=t;if(null==s&&(s=!1),null==l&&(l=0),null==r&&(r=0),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?i=new nape_geom_Vec2:(i=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=i.zpp_pool,i.zpp_pool=null,i.zpp_disp=!1,i==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==i.zpp_inner){var a;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?a=new zpp_$nape_geom_ZPP_$Vec2:(a=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=r,a.y=l,i.zpp_inner=a,i.zpp_inner.outer=i}else{if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;if((p=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(p=i.zpp_inner)._validate&&p._validate(),i.zpp_inner.x==r){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;null!=(p=i.zpp_inner)._validate&&p._validate(),o=i.zpp_inner.y==l}else o=!1;if(!o)i.zpp_inner.x=r,i.zpp_inner.y=l,null!=(p=i.zpp_inner)._invalidate&&p._invalidate(p)}return i.zpp_inner.weak=s,i},nape_geom_Vec2.dsq=function(n,e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n||null==e)throw haxe_Exception.thrown("Error: Cannot compute squared distance between null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=n.zpp_inner)._validate&&p._validate();var t=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=n.zpp_inner)._validate&&p._validate();var i=n.zpp_inner.y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=e.zpp_inner)._validate&&p._validate();var r=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=e.zpp_inner)._validate&&p._validate();var l,s,a=(l=t-r)*l+(s=i-e.zpp_inner.y)*s;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((p=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(h=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=h:zpp_$nape_util_ZPP_$PubPool.poolVec2=h,zpp_$nape_util_ZPP_$PubPool.nextVec2=h,h.zpp_disp=!0,null!=(h=o).outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h}if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((p=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var h;o=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(h=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=h:zpp_$nape_util_ZPP_$PubPool.poolVec2=h,zpp_$nape_util_ZPP_$PubPool.nextVec2=h,h.zpp_disp=!0,null!=(h=o).outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h}return a},nape_geom_Vec2.distance=function(n,e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n||null==e)throw haxe_Exception.thrown("Error: Cannot compute squared distance between null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=n.zpp_inner)._validate&&p._validate();var t=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=n.zpp_inner)._validate&&p._validate();var i=n.zpp_inner.y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=e.zpp_inner)._validate&&p._validate();var r=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=e.zpp_inner)._validate&&p._validate();var l,s;l=t-r,s=i-e.zpp_inner.y;var a=Math.sqrt(l*l+s*s);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((p=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(h=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=h:zpp_$nape_util_ZPP_$PubPool.poolVec2=h,zpp_$nape_util_ZPP_$PubPool.nextVec2=h,h.zpp_disp=!0,null!=(h=o).outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h}if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((p=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var h;o=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(h=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=h:zpp_$nape_util_ZPP_$PubPool.poolVec2=h,zpp_$nape_util_ZPP_$PubPool.nextVec2=h,h.zpp_disp=!0,null!=(h=o).outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h}return a},nape_geom_Vec2.prototype={dispose:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var n=this.zpp_inner;if(n._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=n._isimmutable&&n._isimmutable(),this.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var e,t=this.zpp_inner;this.zpp_inner.outer=null,this.zpp_inner=null,(e=this).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=e:zpp_$nape_util_ZPP_$PubPool.poolVec2=e,zpp_$nape_util_ZPP_$PubPool.nextVec2=e,e.zpp_disp=!0,null!=(e=t).outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e},copy:function(n){if(null==n&&(n=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var t,i=this.zpp_inner.y,r=n;if(null==r&&(r=!1),null==i&&(i=0),null==e&&(e=0),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?t=new nape_geom_Vec2:(t=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=t.zpp_pool,t.zpp_pool=null,t.zpp_disp=!1,t==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==t.zpp_inner){var l;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=e,l.y=i,t.zpp_inner=l,t.zpp_inner.outer=t}else{if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((a=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=t.zpp_inner)._validate&&a._validate(),t.zpp_inner.x==e){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;null!=(a=t.zpp_inner)._validate&&a._validate(),s=t.zpp_inner.y==i}else s=!1;if(!s)t.zpp_inner.x=e,t.zpp_inner.y=i,null!=(a=t.zpp_inner)._invalidate&&a._invalidate(a)}return t.zpp_inner.weak=r,t},get_x:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.x},set_x:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((e=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=e._isimmutable&&e._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.x!=n){if(n!=n)throw haxe_Exception.thrown("Error: Vec2::x cannot be NaN");var e;this.zpp_inner.x=n,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.x},get_y:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.y},set_y:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((e=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=e._isimmutable&&e._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.y!=n){if(n!=n)throw haxe_Exception.thrown("Error: Vec2::y cannot be NaN");var e;this.zpp_inner.y=n,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(e=this.zpp_inner)._validate&&e._validate(),this.zpp_inner.y},get_length:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=this.zpp_inner)._validate&&t._validate();var n=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=this.zpp_inner)._validate&&t._validate();var e=n*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=this.zpp_inner)._validate&&t._validate();var t;n=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(t=this.zpp_inner)._validate&&t._validate(),Math.sqrt(e+n*this.zpp_inner.y)},set_length:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),n!=n)throw haxe_Exception.thrown("Error: Vec2::length cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var t=e*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();e=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),t+e*this.zpp_inner.y==0)throw haxe_Exception.thrown("Error: Cannot set length of a zero vector");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var i=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var r=i*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();i=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var l=n/Math.sqrt(r+i*this.zpp_inner.y);if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var s=this.zpp_inner.x*l;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),this.zpp_inner.x!=s){if(s!=s)throw haxe_Exception.thrown("Error: Vec2::x cannot be NaN");this.zpp_inner.x=s,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(o)}if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var a=this.zpp_inner.y*l;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),this.zpp_inner.y!=a){if(a!=a)throw haxe_Exception.thrown("Error: Vec2::y cannot be NaN");this.zpp_inner.y=a,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(o)}if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),null!=(o=this.zpp_inner)._invalidate&&o._invalidate(o),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();t=e*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var o;e=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(o=this.zpp_inner)._validate&&o._validate(),Math.sqrt(t+e*this.zpp_inner.y)},lsq:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=this.zpp_inner)._validate&&t._validate();var n=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=this.zpp_inner)._validate&&t._validate();var e=n*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(t=this.zpp_inner)._validate&&t._validate();var t;n=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(t=this.zpp_inner)._validate&&t._validate(),e+n*this.zpp_inner.y},set:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=this.zpp_inner)._validate&&r._validate(),this.zpp_inner.x==e){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate(),t=this.zpp_inner.y==i}else t=!1;t||(this.zpp_inner.x=e,this.zpp_inner.y=i,null!=(r=this.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((r=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var l,s=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(l=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=l:zpp_$nape_util_ZPP_$PubPool.poolVec2=l,zpp_$nape_util_ZPP_$PubPool.nextVec2=l,l.zpp_disp=!0,null!=(l=s).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l}return this},setxy:function(n,e){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t;if((i=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),n!=n||e!=e)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(i=this.zpp_inner)._validate&&i._validate(),this.zpp_inner.x==n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i;null!=(i=this.zpp_inner)._validate&&i._validate(),t=this.zpp_inner.y==e}else t=!1;t||(this.zpp_inner.x=n,this.zpp_inner.y=e,null!=(i=this.zpp_inner)._invalidate&&i._invalidate(i));return this},get_angle:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(e=this.zpp_inner)._validate&&e._validate();var n=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(e=this.zpp_inner)._validate&&e._validate(),n==this.zpp_inner.y){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(e=this.zpp_inner)._validate&&e._validate(),t=0==this.zpp_inner.x}else t=!1;if(t)return 0;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(e=this.zpp_inner)._validate&&e._validate();var e,t=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(e=this.zpp_inner)._validate&&e._validate(),Math.atan2(t,this.zpp_inner.x)},set_angle:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((a=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),n!=n)throw haxe_Exception.thrown("Error: Vec2::angle cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var t=e*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();e=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var i=Math.sqrt(t+e*this.zpp_inner.y),r=i*Math.cos(n),l=i*Math.sin(n);if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((a=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=this.zpp_inner)._validate&&a._validate(),this.zpp_inner.x==r){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate(),o=this.zpp_inner.y==l}else o=!1;o||(this.zpp_inner.x=r,this.zpp_inner.y=l,null!=(a=this.zpp_inner)._invalidate&&a._invalidate(a));if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var s=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=this.zpp_inner)._validate&&a._validate(),s==this.zpp_inner.y){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate(),o=0==this.zpp_inner.x}else o=!1;if(o)return 0;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var a,o=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(a=this.zpp_inner)._validate&&a._validate(),Math.atan2(o,this.zpp_inner.x)},rotate:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((e=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=e._isimmutable&&e._isimmutable(),n!=n)throw haxe_Exception.thrown("Error: Cannot rotate Vec2 by NaN");if(n%(2*Math.PI)!=0){var e,t=Math.sin(n),i=Math.cos(n),r=i*this.zpp_inner.x-t*this.zpp_inner.y;this.zpp_inner.y=this.zpp_inner.x*t+this.zpp_inner.y*i,this.zpp_inner.x=r,null!=(e=this.zpp_inner)._invalidate&&e._invalidate(e)}return this},reflect:function(n,e){if(null==e&&(e=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();var t=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();var i=t*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();t=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=this.zpp_inner)._validate&&u._validate(),0==Math.sqrt(i+t*this.zpp_inner.y))throw haxe_Exception.thrown("Error: Cannot reflect in zero vector");var r=!0;if(null==r&&(r=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();var l=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();var s=this.zpp_inner.y,a=r;if(null==a&&(a=!1),null==s&&(s=0),null==l&&(l=0),l!=l||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?h=new nape_geom_Vec2:(h=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=h.zpp_pool,h.zpp_pool=null,h.zpp_disp=!1,h==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==h.zpp_inner){var o;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?o=new zpp_$nape_geom_ZPP_$Vec2:(o=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=l,o.y=s,h.zpp_inner=o,h.zpp_inner.outer=h}else{if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),l!=l||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=h.zpp_inner)._validate&&u._validate(),h.zpp_inner.x==l){if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=h.zpp_inner)._validate&&u._validate(),p=h.zpp_inner.y==s}else p=!1;if(!p)h.zpp_inner.x=l,h.zpp_inner.y=s,null!=(u=h.zpp_inner)._invalidate&&u._invalidate(u)}h.zpp_inner.weak=a;var p=h.normalise(),h=n.sub(p.muleq(2*p.dot(n)),e);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u;if((u=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _,c=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(_=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=c).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}return h},normalise:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var n=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var e=n*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();n=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),0==Math.sqrt(e+n*this.zpp_inner.y))throw haxe_Exception.thrown("Error: Cannot normalise vector of length 0");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var t=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var i=t*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();t=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var r=i+t*this.zpp_inner.y,l=1/Math.sqrt(r);if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var s=this.zpp_inner.x*l;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),this.zpp_inner.x!=s){if(s!=s)throw haxe_Exception.thrown("Error: Vec2::x cannot be NaN");this.zpp_inner.x=s,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(o)}if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var a=this.zpp_inner.y*l;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=this.zpp_inner)._validate&&o._validate(),this.zpp_inner.y!=a){if(a!=a)throw haxe_Exception.thrown("Error: Vec2::y cannot be NaN");var o;this.zpp_inner.y=a,null!=(o=this.zpp_inner)._invalidate&&o._invalidate(o)}if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(o=this.zpp_inner)._validate&&o._validate(),null!=(o=this.zpp_inner)._invalidate&&o._invalidate(o),this},unit:function(n){if(null==n&&(n=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var t=e*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();e=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=this.zpp_inner)._validate&&h._validate(),0==Math.sqrt(t+e*this.zpp_inner.y))throw haxe_Exception.thrown("Error: Cannot normalise vector of length 0");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var i=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var r=i*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();i=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var l=1/Math.sqrt(r+i*this.zpp_inner.y);if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();i=this.zpp_inner.x*l;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var s,a=this.zpp_inner.y*l,o=n;if(null==o&&(o=!1),null==a&&(a=0),null==i&&(i=0),i!=i||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?s=new nape_geom_Vec2:(s=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=s.zpp_pool,s.zpp_pool=null,s.zpp_disp=!1,s==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==s.zpp_inner){var p;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?p=new zpp_$nape_geom_ZPP_$Vec2:(p=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=i,p.y=a,s.zpp_inner=p,s.zpp_inner.outer=s}else{if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),i!=i||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=s.zpp_inner)._validate&&h._validate(),s.zpp_inner.x==i){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;null!=(h=s.zpp_inner)._validate&&h._validate(),e=s.zpp_inner.y==a}else e=!1;if(!e)s.zpp_inner.x=i,s.zpp_inner.y=a,null!=(h=s.zpp_inner)._invalidate&&h._invalidate(h)}return s.zpp_inner.weak=o,s},add:function(n,e){if(null==e&&(e=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot add null vectors");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var t=this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var i=t+n.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var r=this.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var l,s=r+n.zpp_inner.y,a=e;if(null==a&&(a=!1),null==s&&(s=0),null==i&&(i=0),i!=i||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?p=new zpp_$nape_geom_ZPP_$Vec2:(p=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=i,p.y=s,l.zpp_inner=p,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;if((h=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),i!=i||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=l.zpp_inner)._validate&&h._validate(),l.zpp_inner.x==i){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=l.zpp_inner)._validate&&h._validate(),o=l.zpp_inner.y==s}else o=!1;if(!o)l.zpp_inner.x=i,l.zpp_inner.y=s,null!=(h=l.zpp_inner)._invalidate&&h._invalidate(h)}l.zpp_inner.weak=a;var p=l;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;if((h=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u,_=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(u=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=_).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}return p},addMul:function(n,e,t){if(null==t&&(t=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot add null vectors");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();var i=this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var r=i+n.zpp_inner.x*e;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=this.zpp_inner)._validate&&u._validate();var l=this.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=n.zpp_inner)._validate&&u._validate();var s,a=l+n.zpp_inner.y*e,o=t;if(null==o&&(o=!1),null==a&&(a=0),null==r&&(r=0),r!=r||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?s=new nape_geom_Vec2:(s=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=s.zpp_pool,s.zpp_pool=null,s.zpp_disp=!1,s==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==s.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?h=new zpp_$nape_geom_ZPP_$Vec2:(h=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h.next,h.next=null),h.weak=!1,h._immutable=!1,h.x=r,h.y=a,s.zpp_inner=h,s.zpp_inner.outer=s}else{if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;if((u=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),r!=r||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=s.zpp_inner)._validate&&u._validate(),s.zpp_inner.x==r){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=s.zpp_inner)._validate&&u._validate(),p=s.zpp_inner.y==a}else p=!1;if(!p)s.zpp_inner.x=r,s.zpp_inner.y=a,null!=(u=s.zpp_inner)._invalidate&&u._invalidate(u)}s.zpp_inner.weak=o;var h=s;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var u;if((u=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _,c=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(_=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=c).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}return h},sub:function(n,e){if(null==e&&(e=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot subtract null vectors");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var t=this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var i=t-n.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var r=this.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var l,s=r-n.zpp_inner.y,a=e;if(null==a&&(a=!1),null==s&&(s=0),null==i&&(i=0),i!=i||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?p=new zpp_$nape_geom_ZPP_$Vec2:(p=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=i,p.y=s,l.zpp_inner=p,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;if((h=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),i!=i||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=l.zpp_inner)._validate&&h._validate(),l.zpp_inner.x==i){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=l.zpp_inner)._validate&&h._validate(),o=l.zpp_inner.y==s}else o=!1;if(!o)l.zpp_inner.x=i,l.zpp_inner.y=s,null!=(h=l.zpp_inner)._invalidate&&h._invalidate(h)}l.zpp_inner.weak=a;var p=l;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;if((h=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u,_=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(u=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=_).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}return p},mul:function(n,e){if(null==e&&(e=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(n!=n)throw haxe_Exception.thrown("Error: Cannot multiply with NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var t=this.zpp_inner.x*n;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=this.zpp_inner)._validate&&o._validate();var i,r=this.zpp_inner.y*n,l=e;if(null==l&&(l=!1),null==r&&(r=0),null==t&&(t=0),t!=t||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?i=new nape_geom_Vec2:(i=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=i.zpp_pool,i.zpp_pool=null,i.zpp_disp=!1,i==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==i.zpp_inner){var s;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?s=new zpp_$nape_geom_ZPP_$Vec2:(s=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=t,s.y=r,i.zpp_inner=s,i.zpp_inner.outer=i}else{if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;if((o=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),t!=t||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=i.zpp_inner)._validate&&o._validate(),i.zpp_inner.x==t){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;null!=(o=i.zpp_inner)._validate&&o._validate(),a=i.zpp_inner.y==r}else a=!1;if(!a)i.zpp_inner.x=t,i.zpp_inner.y=r,null!=(o=i.zpp_inner)._invalidate&&o._invalidate(o)}return i.zpp_inner.weak=l,i},addeq:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot add null vectors");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=this.zpp_inner)._validate&&s._validate();var e=this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var t=e+n.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=this.zpp_inner)._validate&&s._validate();var i=this.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var r,l=i+n.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=this.zpp_inner)._validate&&s._validate(),this.zpp_inner.x==t){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=this.zpp_inner)._validate&&s._validate(),r=this.zpp_inner.y==l}else r=!1;r||(this.zpp_inner.x=t,this.zpp_inner.y=l,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(s));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return this},subeq:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot subtract null vectors");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=this.zpp_inner)._validate&&s._validate();var e=this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var t=e-n.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=this.zpp_inner)._validate&&s._validate();var i=this.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var r,l=i-n.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=this.zpp_inner)._validate&&s._validate(),this.zpp_inner.x==t){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=this.zpp_inner)._validate&&s._validate(),r=this.zpp_inner.y==l}else r=!1;r||(this.zpp_inner.x=t,this.zpp_inner.y=l,null!=(s=this.zpp_inner)._invalidate&&s._invalidate(s));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return this},muleq:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),n!=n)throw haxe_Exception.thrown("Error: Cannot multiply with NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate();var e=this.zpp_inner.x*n;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate();var t,i=this.zpp_inner.y*n;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=this.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=this.zpp_inner)._validate&&r._validate(),this.zpp_inner.x==e){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=this.zpp_inner)._validate&&r._validate(),t=this.zpp_inner.y==i}else t=!1;t||(this.zpp_inner.x=e,this.zpp_inner.y=i,null!=(r=this.zpp_inner)._invalidate&&r._invalidate(r));return this},dot:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot take dot product with null vector");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate();var e=this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t=e*n.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate();e=this.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var i=t+e*n.zpp_inner.y;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((r=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var l,s=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(l=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=l:zpp_$nape_util_ZPP_$PubPool.poolVec2=l,zpp_$nape_util_ZPP_$PubPool.nextVec2=l,l.zpp_disp=!0,null!=(l=s).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l}return i},cross:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot take cross product with null vector");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate();var t=e*this.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();e=n.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=this.zpp_inner)._validate&&r._validate();var i=t-e*this.zpp_inner.y;if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((r=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var l,s=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(l=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=l:zpp_$nape_util_ZPP_$PubPool.poolVec2=l,zpp_$nape_util_ZPP_$PubPool.nextVec2=l,l.zpp_disp=!0,null!=(l=s).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l}return i},perp:function(n){if(null==n&&(n=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var e=-this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var t,i=this.zpp_inner.x,r=n;if(null==r&&(r=!1),null==i&&(i=0),null==e&&(e=0),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?t=new nape_geom_Vec2:(t=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=t.zpp_pool,t.zpp_pool=null,t.zpp_disp=!1,t==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==t.zpp_inner){var l;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=e,l.y=i,t.zpp_inner=l,t.zpp_inner.outer=t}else{if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((a=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=t.zpp_inner)._validate&&a._validate(),t.zpp_inner.x==e){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;null!=(a=t.zpp_inner)._validate&&a._validate(),s=t.zpp_inner.y==i}else s=!1;if(!s)t.zpp_inner.x=e,t.zpp_inner.y=i,null!=(a=t.zpp_inner)._invalidate&&a._invalidate(a)}return t.zpp_inner.weak=r,t},toString:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.toString()},__class__:nape_geom_Vec2,__properties__:{set_angle:"set_angle",get_angle:"get_angle",set_length:"set_length",get_length:"get_length",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var nape_geom_Vec2Iterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$Vec2List.internal)throw haxe_Exception.thrown("Error: Cannot instantiate Vec2Iterator derp!")};t["nape.geom.Vec2Iterator"]=nape_geom_Vec2Iterator,nape_geom_Vec2Iterator.__name__="nape.geom.Vec2Iterator",nape_geom_Vec2Iterator.get=function(n){var e;if(null==nape_geom_Vec2Iterator.zpp_pool){zpp_$nape_util_ZPP_$Vec2List.internal=!0;var t=new nape_geom_Vec2Iterator;zpp_$nape_util_ZPP_$Vec2List.internal=!1,e=t}else{var i=nape_geom_Vec2Iterator.zpp_pool;nape_geom_Vec2Iterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_geom_Vec2Iterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<n||(this.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_Vec2Iterator};var nape_geom_Vec2List=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$Vec2List,this.zpp_inner.outer=this};t["nape.geom.Vec2List"]=nape_geom_Vec2List,nape_geom_Vec2List.__name__="nape.geom.Vec2List",nape_geom_Vec2List.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_geom_Vec2List,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_geom_Vec2List.prototype={get_length:function(){return this.zpp_gl()},zpp_gl:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},has:function(n){return this.zpp_vm(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){if(this.zpp_vm(),n<0||n>=this.zpp_gl())throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(n=this.zpp_gl()-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;var e=this.zpp_inner.at_ite.elt;if(null==e.outer){e.outer=new nape_geom_Vec2;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_vm();var n=null;if(this.zpp_inner.reverse_flag){if(null==(n=this.zpp_inner.inner.head.elt).outer)n.outer=new nape_geom_Vec2,null!=(t=n.outer.zpp_inner).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,n.outer.zpp_inner=n;var e=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t,i=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(n=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer)n.outer=new nape_geom_Vec2,null!=(t=n.outer.zpp_inner).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,n.outer.zpp_inner=n;var e=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}(this.zpp_inner.invalidate(),null==n.outer)&&(n.outer=new nape_geom_Vec2,null!=(t=n.outer.zpp_inner).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,n.outer.zpp_inner=n);return e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_vm();var n=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var e=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer)n.outer=new nape_geom_Vec2,null!=(i=n.outer.zpp_inner).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,n.outer.zpp_inner=n;var t=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i;if(null==(n=this.zpp_inner.inner.head.elt).outer)n.outer=new nape_geom_Vec2,null!=(i=n.outer.zpp_inner).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,n.outer.zpp_inner=n;var t=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}(this.zpp_inner.invalidate(),null==n.outer)&&(n.outer=new nape_geom_Vec2,null!=(i=n.outer.zpp_inner).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,n.outer.zpp_inner=n);return t=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");var e;this.zpp_inner.modify_test(),this.zpp_vm(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},empty:function(){return 0==this.zpp_gl()},iterator:function(){return this.zpp_vm(),nape_geom_Vec2Iterator.get(this)},copy:function(n){null==n&&(n=!1);for(var e=new nape_geom_Vec2List,t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,r=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<r?i=!0:(t.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=t,t.zpp_inner=null,i=!1),!i)break;t.zpp_critical=!1;var l,s=t.zpp_inner.at(t.zpp_i++);if(n){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a=s.zpp_inner;null!=a._validate&&a._validate();var o=s.zpp_inner.x;if(s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p=s.zpp_inner;null!=p._validate&&p._validate();var h,u=s.zpp_inner.y,_=!1;if(null==_&&(_=!1),null==u&&(u=0),null==o&&(o=0),o!=o||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?h=new nape_geom_Vec2:(h=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=h.zpp_pool,h.zpp_pool=null,h.zpp_disp=!1,h==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==h.zpp_inner){var c;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?c=new zpp_$nape_geom_ZPP_$Vec2:(c=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=o,c.y=u,h.zpp_inner=c,h.zpp_inner.outer=h}else{if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d,f=h.zpp_inner;if(f._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=f._isimmutable&&f._isimmutable(),o!=o||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var x=h.zpp_inner;if(null!=x._validate&&x._validate(),h.zpp_inner.x==o){if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var b=h.zpp_inner;null!=b._validate&&b._validate(),d=h.zpp_inner.y==u}else d=!1;if(!d){h.zpp_inner.x=o,h.zpp_inner.y=u;var y=h.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}h.zpp_inner.weak=_,l=h}else l=s;e.push(l)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");for(var e=n.iterator();;){e.zpp_inner.zpp_inner.valmod();var t,i=e.zpp_inner.zpp_gl();if(e.zpp_critical=!0,e.zpp_i<i?t=!0:(e.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=e,e.zpp_inner=null,t=!1),!t)break;e.zpp_critical=!1;var r=e.zpp_inner.at(e.zpp_i++);this.has(r)||this.add(r)}},toString:function(){for(var n="[",e=!0,t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,r=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<r?i=!0:(t.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=t,t.zpp_inner=null,i=!1),!i)break;t.zpp_critical=!1;var l=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==l?"NULL":l.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");for(var e=this.iterator();;){e.zpp_inner.zpp_inner.valmod();var t,i=e.zpp_inner.zpp_gl();if(e.zpp_critical=!0,e.zpp_i<i?t=!0:(e.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=e,e.zpp_inner=null,t=!1),!t)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;e<this.zpp_gl();){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_geom_Vec2List,__properties__:{get_length:"get_length"}};var nape_geom_Vec3=function(n,e,t){if(null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),this.zpp_pool=null,this.zpp_inner=null,this.zpp_inner=new zpp_$nape_geom_ZPP_$Vec3,this.zpp_inner.outer=this,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.x=n,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var i;if(null!=(i=this.zpp_inner)._validate&&i._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.y=e,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(i=this.zpp_inner)._validate&&i._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.z=t,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate()};t["nape.geom.Vec3"]=nape_geom_Vec3,nape_geom_Vec3.__name__="nape.geom.Vec3",nape_geom_Vec3.get=function(n,e,t){var i;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),null==zpp_$nape_util_ZPP_$PubPool.poolVec3?i=new nape_geom_Vec3:(i=zpp_$nape_util_ZPP_$PubPool.poolVec3,zpp_$nape_util_ZPP_$PubPool.poolVec3=i.zpp_pool,i.zpp_pool=null,i.zpp_disp=!1,i==zpp_$nape_util_ZPP_$PubPool.nextVec3&&(zpp_$nape_util_ZPP_$PubPool.nextVec3=null)),i.setxyz(n,e,t),i.zpp_inner.immutable=!1,i.zpp_inner._validate=null,i},nape_geom_Vec3.prototype={get_x:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.x},set_x:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.x=n,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},get_y:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.y},set_y:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.y=n,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},get_z:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.z},set_z:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.z=n,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.z},dispose:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: This Vec3 is not disposable");var n=this;n.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec3?zpp_$nape_util_ZPP_$PubPool.nextVec3.zpp_pool=n:zpp_$nape_util_ZPP_$PubPool.poolVec3=n,zpp_$nape_util_ZPP_$PubPool.nextVec3=n,n.zpp_disp=!0},get_length:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var n=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var e=n*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();n=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var t=e+n*this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var i;n=this.zpp_inner.z;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(i=this.zpp_inner)._validate&&i._validate(),Math.sqrt(t+n*this.zpp_inner.z)},set_length:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(n!=n)throw haxe_Exception.thrown("Error: Vec3::length cannot be NaN");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var t=e*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();e=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var i=t+e*this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();e=this.zpp_inner.z;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(h=this.zpp_inner)._validate&&h._validate(),i+e*this.zpp_inner.z==0)throw haxe_Exception.thrown("Error: Cannot set length of a zero vector");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var r=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var l=r*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();r=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var s=l+r*this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();r=this.zpp_inner.z;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();r=l=n/Math.sqrt(s+r*this.zpp_inner.z);if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var a=this.zpp_inner.x*r;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.x=a,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(h=this.zpp_inner)._validate&&h._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var o=this.zpp_inner.y*r;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.y=o,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(h=this.zpp_inner)._validate&&h._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var p=this.zpp_inner.z*l;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.z=p,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(h=this.zpp_inner)._validate&&h._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();t=e*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();e=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();i=t+e*this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(h=this.zpp_inner)._validate&&h._validate();var h;e=this.zpp_inner.z;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(h=this.zpp_inner)._validate&&h._validate(),Math.sqrt(i+e*this.zpp_inner.z)},lsq:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var n=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var e=n*this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();n=this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var t=e+n*this.zpp_inner.y;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(i=this.zpp_inner)._validate&&i._validate();var i;n=this.zpp_inner.z;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(i=this.zpp_inner)._validate&&i._validate(),t+n*this.zpp_inner.z},set:function(n){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec3");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(t=n.zpp_inner)._validate&&t._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(t=n.zpp_inner)._validate&&t._validate();var t,i=n.zpp_inner.y;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(t=n.zpp_inner)._validate&&t._validate(),this.setxyz(e,i,n.zpp_inner.z)},setxyz:function(n,e,t){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.x=n,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var i;if(null!=(i=this.zpp_inner)._validate&&i._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.y=e,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(i=this.zpp_inner)._validate&&i._validate(),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(this.zpp_inner.z=t,this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(i=this.zpp_inner)._validate&&i._validate(),this},xy:function(n){if(null==n&&(n=!1),this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var e=this.zpp_inner.x;if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(a=this.zpp_inner)._validate&&a._validate();var t,i=this.zpp_inner.y,r=n;if(null==r&&(r=!1),null==i&&(i=0),null==e&&(e=0),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?t=new nape_geom_Vec2:(t=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=t.zpp_pool,t.zpp_pool=null,t.zpp_disp=!1,t==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==t.zpp_inner){var l;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=e,l.y=i,t.zpp_inner=l,t.zpp_inner.outer=t}else{if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((a=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=t.zpp_inner)._validate&&a._validate(),t.zpp_inner.x==e){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;null!=(a=t.zpp_inner)._validate&&a._validate(),s=t.zpp_inner.y==i}else s=!1;if(!s)t.zpp_inner.x=e,t.zpp_inner.y=i,null!=(a=t.zpp_inner)._invalidate&&a._invalidate(a)}return t.zpp_inner.weak=r,t},toString:function(){if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(e=this.zpp_inner)._validate&&e._validate();var n="{ x: "+this.zpp_inner.x+" y: ";if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(e=this.zpp_inner)._validate&&e._validate();var e,t=n+this.zpp_inner.y+" z: ";if(this.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");return null!=(e=this.zpp_inner)._validate&&e._validate(),t+this.zpp_inner.z+" }"},__class__:nape_geom_Vec3,__properties__:{set_length:"set_length",get_length:"get_length",set_z:"set_z",get_z:"get_z",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var nape_geom_Winding=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate Winding derp!")};t["nape.geom.Winding"]=nape_geom_Winding,nape_geom_Winding.__name__="nape.geom.Winding",nape_geom_Winding.__properties__={get_ANTICLOCKWISE:"get_ANTICLOCKWISE",get_CLOCKWISE:"get_CLOCKWISE",get_UNDEFINED:"get_UNDEFINED"},nape_geom_Winding.get_UNDEFINED=function(){return null==zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED},nape_geom_Winding.get_CLOCKWISE=function(){return null==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE},nape_geom_Winding.get_ANTICLOCKWISE=function(){return null==zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE},nape_geom_Winding.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED?"UNDEFINED":(null==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE?"CLOCKWISE":(null==zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE=new nape_geom_Winding,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""))},__class__:nape_geom_Winding};var nape_phys_Interactor=function(){if(this.zpp_inner_i=null,!nape_phys_Interactor.zpp_internalAlloc)throw haxe_Exception.thrown("Error: Cannot instantiate an Interactor, only Shape/Body/Compound")};t["nape.phys.Interactor"]=nape_phys_Interactor,nape_phys_Interactor.__name__="nape.phys.Interactor",nape_phys_Interactor.prototype={get_id:function(){return this.zpp_inner_i.id},get_userData:function(){return null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={}),this.zpp_inner_i.userData},isShape:function(){return null!=this.zpp_inner_i.ishape},isBody:function(){return null!=this.zpp_inner_i.ibody},isCompound:function(){return null!=this.zpp_inner_i.icompound},get_castShape:function(){return null!=this.zpp_inner_i.ishape?this.zpp_inner_i.ishape.outer:null},get_castBody:function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},get_castCompound:function(){return null!=this.zpp_inner_i.icompound?this.zpp_inner_i.icompound.outer:null},get_group:function(){return null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},set_group:function(n){return this.zpp_inner_i.immutable_midstep("Interactor::group"),this.zpp_inner_i.setGroup(null==n?null:n.zpp_inner),null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},get_cbTypes:function(){return null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes(),this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:nape_phys_Interactor,__properties__:{get_cbTypes:"get_cbTypes",set_group:"set_group",get_group:"get_group",get_castCompound:"get_castCompound",get_castBody:"get_castBody",get_castShape:"get_castShape",get_userData:"get_userData",get_id:"get_id"}};var nape_phys_Body=function(n,e){if(this.debugDraw=!0,this.zpp_inner=null,nape_phys_Interactor.zpp_internalAlloc=!0,nape_phys_Interactor.call(this),nape_phys_Interactor.zpp_internalAlloc=!1,this.zpp_inner=new zpp_$nape_phys_ZPP_$Body,this.zpp_inner.outer=this,this.zpp_inner.outer_i=this,this.zpp_inner_i=this.zpp_inner,null!=e){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=e.zpp_inner)._validate&&r._validate(),this.zpp_inner.posx=e.zpp_inner.x,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=e.zpp_inner)._validate&&r._validate(),this.zpp_inner.posy=e.zpp_inner.y}else this.zpp_inner.posx=0,this.zpp_inner.posy=0;var t;if(null==n?(null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),t=zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC):t=n,this.zpp_inner.immutable_midstep("Body::type"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(zpp_$nape_phys_ZPP_$Body.types[this.zpp_inner.type]!=t){if(null==t)throw haxe_Exception.thrown("Error: Cannot use null BodyType");var i;null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),t==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC?i=2:(null==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),i=t==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC?3:1),1==i&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,i):this.zpp_inner.type=i}if(null!=e&&e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((r=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var l,s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(l=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=l:zpp_$nape_util_ZPP_$PubPool.poolVec2=l,zpp_$nape_util_ZPP_$PubPool.nextVec2=l,l.zpp_disp=!0,null!=(l=s).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l}this.zpp_inner_i.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY.zpp_inner)};t["nape.phys.Body"]=nape_phys_Body,nape_phys_Body.__name__="nape.phys.Body",nape_phys_Body.__super__=nape_phys_Interactor,nape_phys_Body.prototype=$extend(nape_phys_Interactor.prototype,{get_type:function(){return zpp_$nape_phys_ZPP_$Body.types[this.zpp_inner.type]},set_type:function(n){if(this.zpp_inner.immutable_midstep("Body::type"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(zpp_$nape_phys_ZPP_$Body.types[this.zpp_inner.type]!=n){if(null==n)throw haxe_Exception.thrown("Error: Cannot use null BodyType");var e;null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC?e=2:(null==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),e=n==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC?3:1),1==e&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,e):this.zpp_inner.type=e}return zpp_$nape_phys_ZPP_$Body.types[this.zpp_inner.type]},get_isBullet:function(){return this.zpp_inner.bulletEnabled},set_isBullet:function(n){return this.zpp_inner.bulletEnabled=n,this.zpp_inner.bulletEnabled},get_disableCCD:function(){return this.zpp_inner.disableCCD},set_disableCCD:function(n){return this.zpp_inner.disableCCD=n,this.zpp_inner.disableCCD},integrate:function(n){if(n!=n)throw haxe_Exception.thrown("Cannot integrate by NaN time");if(this.zpp_inner.immutable_midstep("Body::space"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(0==n)return this;var e=this.zpp_inner;e.sweepTime=0,e.sweep_angvel=e.angvel;var t=n-e.sweepTime;if(0!=t){e.sweepTime=n;var i=t;if(e.posx+=e.velx*i,e.posy+=e.vely*i,0!=e.angvel){var r=e.sweep_angvel*t;if(e.rot+=r,r*r>1e-4)e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot);else{var l=r*r,s=1-.5*l,a=1-l*l/8,o=(s*e.axisx+r*e.axisy)*a;e.axisy=(s*e.axisy-r*e.axisx)*a,e.axisx=o}}}for(var p=e.shapes.head;null!=p;){1==(h=p.elt).type&&(h.polygon.invalidate_gverts(),h.polygon.invalidate_gaxi()),h.invalidate_worldCOM(),p=p.next}e.zip_worldCOM=!0,e.zip_axis=!0;for(p=e.shapes.head;null!=p;){var h;1==(h=p.elt).type&&(h.polygon.invalidate_gverts(),h.polygon.invalidate_gaxi()),h.invalidate_worldCOM(),p=p.next}return e.zip_worldCOM=!0,e.sweepTime=0,this},isStatic:function(){return 1==this.zpp_inner.type},isDynamic:function(){return 2==this.zpp_inner.type},isKinematic:function(){return 3==this.zpp_inner.type},get_shapes:function(){return this.zpp_inner.wrap_shapes},get_compound:function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},set_compound:function(n){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=n&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(this),null!=n)){var e=n.zpp_inner.wrap_bodies;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(n){if(null!=this.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");if(this.zpp_inner.immutable_midstep("Body::space"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=n&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.component.woken=!1),null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this),null!=n)){var e=n.zpp_inner.wrap_bodies;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_arbiters:function(){return null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0)),this.zpp_inner.wrap_arbiters},get_isSleeping:function(){if(null==this.zpp_inner.space)throw haxe_Exception.thrown("Error: isSleeping makes no sense if the object is not contained within a Space");return this.zpp_inner.component.sleeping},get_constraints:function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},copy:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world cannot be copied");return this.zpp_inner.copy()},get_position:function(){return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},set_position:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Body::position cannot be null");if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),null!=(l=this.zpp_inner.wrap_pos)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},get_velocity:function(){return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},set_velocity:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Body::velocity cannot be null");if(null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),null!=(l=this.zpp_inner.wrap_vel)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},setVelocityFromTarget:function(n,e,t){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Cannot set velocity for null target position");if(0==t)throw haxe_Exception.thrown("deltaTime cannot be 0 for setVelocityFromTarget");var i=1/t;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var r=this.zpp_inner.wrap_vel;null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var l=n.sub(this.zpp_inner.wrap_pos,!0).muleq(i);if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((p=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),null==l)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=l.zpp_inner)._validate&&p._validate();var s=l.zpp_inner.x;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=l.zpp_inner)._validate&&p._validate();var a,o=l.zpp_inner.y;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((p=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),s!=s||o!=o)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(p=r.zpp_inner)._validate&&p._validate(),r.zpp_inner.x==s){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var p;null!=(p=r.zpp_inner)._validate&&p._validate(),a=r.zpp_inner.y==o}else a=!1;a||(r.zpp_inner.x=s,r.zpp_inner.y=o,null!=(p=r.zpp_inner)._invalidate&&p._invalidate(p));if(l.zpp_inner.weak){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),l.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var h=l.zpp_inner;l.zpp_inner.outer=null,l.zpp_inner=null,(_=l).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=h).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}var u=(e-this.zpp_inner.rot)*i;if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(this.zpp_inner.angvel!=u){if(u!=u)throw haxe_Exception.thrown("Error: Body::angularVel cannot be NaN");if(1==this.zpp_inner.type)throw haxe_Exception.thrown("Error: A static object cannot be given a velocity");this.zpp_inner.angvel=u,this.zpp_inner.wake()}if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _;h=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(_=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=h).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_}return this},get_kinematicVel:function(){return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},set_kinematicVel:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Body::kinematicVel cannot be null");if(null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),null!=(l=this.zpp_inner.wrap_kinvel)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},get_surfaceVel:function(){return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},set_surfaceVel:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Body::surfaceVel cannot be null");if(null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),null!=(l=this.zpp_inner.wrap_svel)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},get_force:function(){return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},set_force:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Body::force cannot be null");if(null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),null!=(l=this.zpp_inner.wrap_force)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},get_constraintVelocity:function(){return null==this.zpp_inner.wrapcvel&&this.zpp_inner.setup_cvel(),this.zpp_inner.wrapcvel},get_rotation:function(){return this.zpp_inner.rot},set_rotation:function(n){if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(1==this.zpp_inner.type&&null!=this.zpp_inner.space)throw haxe_Exception.thrown("Error: Static objects cannot be rotated once inside a Space");if(this.zpp_inner.rot!=n){if(n!=n)throw haxe_Exception.thrown("Error: Body::rotation cannot be NaN");this.zpp_inner.rot=n;var e=this.zpp_inner;e.zip_axis=!0;for(var t=e.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}e.zip_worldCOM=!0,this.zpp_inner.wake()}return this.zpp_inner.rot},get_angularVel:function(){return this.zpp_inner.angvel},set_angularVel:function(n){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(this.zpp_inner.angvel!=n){if(n!=n)throw haxe_Exception.thrown("Error: Body::angularVel cannot be NaN");if(1==this.zpp_inner.type)throw haxe_Exception.thrown("Error: A static object cannot be given a velocity");this.zpp_inner.angvel=n,this.zpp_inner.wake()}return this.zpp_inner.angvel},get_kinAngVel:function(){return this.zpp_inner.kinangvel},set_kinAngVel:function(n){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(this.zpp_inner.kinangvel!=n){if(n!=n)throw haxe_Exception.thrown("Error: Body::kinAngVel cannot be NaN");this.zpp_inner.kinangvel=n,this.zpp_inner.wake()}return this.zpp_inner.kinangvel},get_torque:function(){return this.zpp_inner.torque},set_torque:function(n){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(2!=this.zpp_inner.type)throw haxe_Exception.thrown("Error: Non-dynamic body cannot have torque applied.");if(n!=n)throw haxe_Exception.thrown("Error: Body::torque cannot be NaN");return this.zpp_inner.torque!=n&&(this.zpp_inner.torque=n,this.zpp_inner.wake()),this.zpp_inner.torque},get_bounds:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no bounds");return this.zpp_inner.aabb.wrapper()},get_allowMovement:function(){return!this.zpp_inner.nomove},set_allowMovement:function(n){return this.zpp_inner.immutable_midstep("Body::"+(null==n?"null":""+n)),!this.zpp_inner.nomove!=n&&(this.zpp_inner.nomove=!n,this.zpp_inner.invalidate_mass()),!this.zpp_inner.nomove},get_allowRotation:function(){return!this.zpp_inner.norotate},set_allowRotation:function(n){return this.zpp_inner.immutable_midstep("Body::"+(null==n?"null":""+n)),!this.zpp_inner.norotate!=n&&(this.zpp_inner.norotate=!n,this.zpp_inner.invalidate_inertia()),!this.zpp_inner.norotate},get_massMode:function(){null==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var n=zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT;return null==zpp_$nape_util_ZPP_$Flags.MassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_FIXED=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),[n,zpp_$nape_util_ZPP_$Flags.MassMode_FIXED][this.zpp_inner.massMode]},set_massMode:function(n){if(this.zpp_inner.immutable_midstep("Body::massMode"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(null==n)throw haxe_Exception.thrown("Error: cannot use null massMode");null==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this.zpp_inner.massMode=n==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT?0:1,this.zpp_inner.invalidate_mass(),null==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT;return null==zpp_$nape_util_ZPP_$Flags.MassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_FIXED=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),[e,zpp_$nape_util_ZPP_$Flags.MassMode_FIXED][this.zpp_inner.massMode]},get_constraintMass:function(){return this.zpp_inner.world||this.zpp_inner.validate_mass(),this.zpp_inner.smass},get_mass:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no mass");if(this.zpp_inner.validate_mass(),0==this.zpp_inner.massMode&&null==this.zpp_inner.shapes.head)throw haxe_Exception.thrown("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");return this.zpp_inner.cmass},set_mass:function(n){if(this.zpp_inner.immutable_midstep("Body::mass"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(n!=n)throw haxe_Exception.thrown("Error: Mass cannot be NaN");if(n<=0)throw haxe_Exception.thrown("Error: Mass must be strictly positive");if(n>=1/0)throw haxe_Exception.thrown("Error: Mass cannot be infinite, use allowMovement = false instead");if(this.zpp_inner.massMode=1,this.zpp_inner.cmass=n,this.zpp_inner.invalidate_mass(),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no mass");if(this.zpp_inner.validate_mass(),0==this.zpp_inner.massMode&&null==this.zpp_inner.shapes.head)throw haxe_Exception.thrown("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");return this.zpp_inner.cmass},get_gravMassMode:function(){null==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var n=zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT;null==zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED;return null==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),[n,e,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED][this.zpp_inner.massMode]},set_gravMassMode:function(n){if(this.zpp_inner.immutable_midstep("Body::gravMassMode"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(null==n)throw haxe_Exception.thrown("Error: Cannot use null gravMassMode");null==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED?e=2:(null==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),e=n==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT?0:1),this.zpp_inner.gravMassMode=e,this.zpp_inner.invalidate_gravMass(),null==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT;null==zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var t=zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED;return null==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),[e,t,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED][this.zpp_inner.massMode]},get_gravMass:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no gravMass");if(this.zpp_inner.validate_gravMass(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&1!=this.zpp_inner.gravMassMode)throw haxe_Exception.thrown("Error: Given current mass/gravMass modes; Body::gravMass only makes sense if it contains Shapes");return this.zpp_inner.gravMass},set_gravMass:function(n){if(this.zpp_inner.immutable_midstep("Body::gravMass"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(n!=n)throw haxe_Exception.thrown("Error: gravMass cannot be NaN");if(this.zpp_inner.gravMassMode=1,this.zpp_inner.gravMass=n,this.zpp_inner.invalidate_gravMass(),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no gravMass");if(this.zpp_inner.validate_gravMass(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&1!=this.zpp_inner.gravMassMode)throw haxe_Exception.thrown("Error: Given current mass/gravMass modes; Body::gravMass only makes sense if it contains Shapes");return this.zpp_inner.gravMass},get_gravMassScale:function(){if(this.zpp_inner.validate_gravMassScale(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&2!=this.zpp_inner.gravMassMode)throw haxe_Exception.thrown("Error: Given current mass/gravMass modes; Body::gravMassScale only makes sense if it contains Shapes");return this.zpp_inner.gravMassScale},set_gravMassScale:function(n){if(this.zpp_inner.immutable_midstep("Body::gravMassScale"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(n!=n)throw haxe_Exception.thrown("Error: gravMassScale cannot be NaN");if(this.zpp_inner.gravMassMode=2,this.zpp_inner.gravMassScale=n,this.zpp_inner.invalidate_gravMassScale(),this.zpp_inner.validate_gravMassScale(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&2!=this.zpp_inner.gravMassMode)throw haxe_Exception.thrown("Error: Given current mass/gravMass modes; Body::gravMassScale only makes sense if it contains Shapes");return this.zpp_inner.gravMassScale},get_inertiaMode:function(){null==zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var n=zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT;return null==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),[n,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},set_inertiaMode:function(n){if(this.zpp_inner.immutable_midstep("Body::inertiaMode"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(null==n)throw haxe_Exception.thrown("Error: Cannot use null InertiaMode");null==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this.zpp_inner.inertiaMode=n==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED?1:0,this.zpp_inner.invalidate_inertia(),null==zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT;return null==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),[e,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},get_constraintInertia:function(){return this.zpp_inner.world||this.zpp_inner.validate_inertia(),this.zpp_inner.sinertia},get_inertia:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no inertia");var n;(this.zpp_inner.validate_inertia(),0==this.zpp_inner.inertiaMode)?n=null==this.zpp_inner.wrap_shapes.zpp_inner.inner.head:n=!1;if(n)throw haxe_Exception.thrown("Error: Given current inertia mode flag, Body::inertia only makes sense if Body contains Shapes");return this.zpp_inner.cinertia},set_inertia:function(n){if(this.zpp_inner.immutable_midstep("Body::inertia"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(n!=n)throw haxe_Exception.thrown("Error: Inertia cannot be NaN");if(n<=0)throw haxe_Exception.thrown("Error: Inertia must be strictly positive");if(n>=1/0)throw haxe_Exception.thrown("Error: Inertia cannot be infinite, use allowRotation = false instead");if(this.zpp_inner.inertiaMode=1,this.zpp_inner.cinertia=n,this.zpp_inner.invalidate_inertia(),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no inertia");var e;(this.zpp_inner.validate_inertia(),0==this.zpp_inner.inertiaMode)?e=null==this.zpp_inner.wrap_shapes.zpp_inner.inner.head:e=!1;if(e)throw haxe_Exception.thrown("Error: Given current inertia mode flag, Body::inertia only makes sense if Body contains Shapes");return this.zpp_inner.cinertia},connectedBodies:function(n,e){return null==n&&(n=-1),this.zpp_inner.connectedBodies(n,e)},interactingBodies:function(n,e,t){var i;return null==e&&(e=-1),null==n?i=zpp_$nape_dynamics_ZPP_$Arbiter.COL|zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR|zpp_$nape_dynamics_ZPP_$Arbiter.FLUID:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),n==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION?i=zpp_$nape_dynamics_ZPP_$Arbiter.COL:(null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),i=n==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR:zpp_$nape_dynamics_ZPP_$Arbiter.FLUID)),this.zpp_inner.interactingBodies(i,e,t)},crushFactor:function(){if(null==(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))throw haxe_Exception.thrown("Error: Makes no sense to see how much an object not taking part in a simulation is being crushed");var n=0;if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?b=new nape_geom_Vec2:(b=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=b.zpp_pool,b.zpp_pool=null,b.zpp_disp=!1,b==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==b.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?y=new zpp_$nape_geom_ZPP_$Vec2:(y=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=y.next,y.next=null),y.weak=!1,y._immutable=!1,y.x=0,y.y=0,b.zpp_inner=y,b.zpp_inner.outer=b}else{if(null!=b&&b.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((m=b.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),null!=b&&b.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(m=b.zpp_inner)._validate&&m._validate(),0==b.zpp_inner.x){if(null!=b&&b.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=b.zpp_inner)._validate&&m._validate(),p=0==b.zpp_inner.y}else p=!1;if(!p)b.zpp_inner.x=0,b.zpp_inner.y=0,null!=(m=b.zpp_inner)._invalidate&&m._invalidate(m)}b.zpp_inner.weak=!1;var e=b;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var t=this.zpp_inner.wrap_arbiters.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<i?p=!0:(t.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=t,t.zpp_inner=null,p=!1),!p)break;t.zpp_critical=!1;var r=(h=t.zpp_inner.at(t.zpp_i++).totalImpulse(this)).xy();if(e.addeq(r),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=r.zpp_inner)._validate&&m._validate();var l=r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=r.zpp_inner)._validate&&u._validate();var s=l*r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=r.zpp_inner)._validate&&_._validate();var a=r.zpp_inner.y;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(c=r.zpp_inner)._validate&&c._validate(),n+=Math.sqrt(s+a*r.zpp_inner.y),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(g=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(x=o).outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=x,h.dispose()}null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.zpp_inner.constraints,!0)),(m=this.zpp_inner.wrap_constraints).zpp_inner.valmod();for(t=nape_constraint_ConstraintIterator.get(m);;){t.zpp_inner.zpp_inner.valmod(),(m=t.zpp_inner).zpp_inner.valmod(),m.zpp_inner.zip_length&&(m.zpp_inner.zip_length=!1,m.zpp_inner.user_length=m.zpp_inner.inner.length);var p;i=m.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<i?p=!0:(t.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=t,t.zpp_inner=null,p=!1),!p)break;t.zpp_critical=!1;var h,u;r=(h=t.zpp_inner.at(t.zpp_i++).bodyImpulse(this)).xy();if(e.addeq(r),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=r.zpp_inner)._validate&&u._validate();var _;l=r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(_=r.zpp_inner)._validate&&_._validate();var c;s=l*r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(c=r.zpp_inner)._validate&&c._validate();var d;a=r.zpp_inner.y;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=r.zpp_inner)._validate&&d._validate(),n+=Math.sqrt(s+a*r.zpp_inner.y),null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f=r.zpp_inner;if(f._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=f._isimmutable&&f._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var x;o=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(g=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(x=o).outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=x,h.dispose()}if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=e.zpp_inner)._validate&&m._validate();var b=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=e.zpp_inner)._validate&&m._validate();var y=b*e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=e.zpp_inner)._validate&&m._validate();b=e.zpp_inner.y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(m=e.zpp_inner)._validate&&m._validate();var v=n-Math.sqrt(y+b*e.zpp_inner.y);if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no mass");if(this.zpp_inner.validate_mass(),0==this.zpp_inner.massMode&&null==this.zpp_inner.shapes.head)throw haxe_Exception.thrown("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");var m;b=v/(this.zpp_inner.cmass*(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.pre_dt);if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((m=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=m._isimmutable&&m._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var g;o=e.zpp_inner;return e.zpp_inner.outer=null,e.zpp_inner=null,(g=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=g:zpp_$nape_util_ZPP_$PubPool.poolVec2=g,zpp_$nape_util_ZPP_$PubPool.nextVec2=g,g.zpp_disp=!0,null!=(g=o).outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=g,b},localPointToWorld:function(n,e){if(null==e&&(e=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform null Vec2");(f=this.zpp_inner).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));var t,i,r=this.zpp_inner.axisy;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(f=n.zpp_inner)._validate&&f._validate();var l=r*n.zpp_inner.x;r=this.zpp_inner.axisx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=n.zpp_inner)._validate&&f._validate(),t=l-r*n.zpp_inner.y,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(f=n.zpp_inner)._validate&&f._validate();var s=n.zpp_inner.x*this.zpp_inner.axisx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=n.zpp_inner)._validate&&f._validate(),i=s+n.zpp_inner.y*this.zpp_inner.axisy,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((f=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=f._isimmutable&&f._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}var p,h=t+this.zpp_inner.posx,u=i+this.zpp_inner.posy,_=e;if(null==_&&(_=!1),null==u&&(u=0),null==h&&(h=0),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){var c;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?c=new zpp_$nape_geom_ZPP_$Vec2:(c=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=h,c.y=u,p.zpp_inner=c,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;if((f=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=f._isimmutable&&f._isimmutable(),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=p.zpp_inner)._validate&&f._validate(),p.zpp_inner.x==h){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f;null!=(f=p.zpp_inner)._validate&&f._validate(),d=p.zpp_inner.y==u}else d=!1;if(!d)p.zpp_inner.x=h,p.zpp_inner.y=u,null!=(f=p.zpp_inner)._invalidate&&f._invalidate(f)}return p.zpp_inner.weak=_,p},worldPointToLocal:function(n,e){if(null==e&&(e=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform null Vec2");(d=this.zpp_inner).zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));var t,i,r,l;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=n.zpp_inner)._validate&&d._validate(),r=n.zpp_inner.x-this.zpp_inner.posx,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=n.zpp_inner)._validate&&d._validate(),l=n.zpp_inner.y-this.zpp_inner.posy,t=r*this.zpp_inner.axisy+l*this.zpp_inner.axisx,i=l*this.zpp_inner.axisy-r*this.zpp_inner.axisx,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}var o,p=t,h=i,u=e;if(null==u&&(u=!1),null==h&&(h=0),null==p&&(p=0),p!=p||h!=h)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?o=new nape_geom_Vec2:(o=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=o.zpp_pool,o.zpp_pool=null,o.zpp_disp=!1,o==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==o.zpp_inner){var _;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?_=new zpp_$nape_geom_ZPP_$Vec2:(_=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=p,_.y=h,o.zpp_inner=_,o.zpp_inner.outer=o}else{if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;if((d=o.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),p!=p||h!=h)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=o.zpp_inner)._validate&&d._validate(),o.zpp_inner.x==p){if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;null!=(d=o.zpp_inner)._validate&&d._validate(),c=o.zpp_inner.y==h}else c=!1;if(!c)o.zpp_inner.x=p,o.zpp_inner.y=h,null!=(d=o.zpp_inner)._invalidate&&d._invalidate(d)}return o.zpp_inner.weak=u,o},localVectorToWorld:function(n,e){if(null==e&&(e=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform null Vec2");(f=this.zpp_inner).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));var t,i,r=this.zpp_inner.axisy;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(f=n.zpp_inner)._validate&&f._validate();var l=r*n.zpp_inner.x;r=this.zpp_inner.axisx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=n.zpp_inner)._validate&&f._validate(),t=l-r*n.zpp_inner.y,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(f=n.zpp_inner)._validate&&f._validate();var s=n.zpp_inner.x*this.zpp_inner.axisx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=n.zpp_inner)._validate&&f._validate(),i=s+n.zpp_inner.y*this.zpp_inner.axisy,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((f=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=f._isimmutable&&f._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}var p,h=t,u=i,_=e;if(null==_&&(_=!1),null==u&&(u=0),null==h&&(h=0),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){var c;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?c=new zpp_$nape_geom_ZPP_$Vec2:(c=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=h,c.y=u,p.zpp_inner=c,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;if((f=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=f._isimmutable&&f._isimmutable(),h!=h||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=p.zpp_inner)._validate&&f._validate(),p.zpp_inner.x==h){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f;null!=(f=p.zpp_inner)._validate&&f._validate(),d=p.zpp_inner.y==u}else d=!1;if(!d)p.zpp_inner.x=h,p.zpp_inner.y=u,null!=(f=p.zpp_inner)._invalidate&&f._invalidate(f)}return p.zpp_inner.weak=_,p},worldVectorToLocal:function(n,e){if(null==e&&(e=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform null Vec2");(d=this.zpp_inner).zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));var t,i;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var r=n.zpp_inner.x*this.zpp_inner.axisy;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=n.zpp_inner)._validate&&d._validate(),t=r+n.zpp_inner.y*this.zpp_inner.axisx,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=n.zpp_inner)._validate&&d._validate();var l=n.zpp_inner.y*this.zpp_inner.axisy;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=n.zpp_inner)._validate&&d._validate(),i=l-n.zpp_inner.x*this.zpp_inner.axisx,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}var o,p=t,h=i,u=e;if(null==u&&(u=!1),null==h&&(h=0),null==p&&(p=0),p!=p||h!=h)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?o=new nape_geom_Vec2:(o=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=o.zpp_pool,o.zpp_pool=null,o.zpp_disp=!1,o==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==o.zpp_inner){var _;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?_=new zpp_$nape_geom_ZPP_$Vec2:(_=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=p,_.y=h,o.zpp_inner=_,o.zpp_inner.outer=o}else{if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;if((d=o.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),p!=p||h!=h)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=o.zpp_inner)._validate&&d._validate(),o.zpp_inner.x==p){if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;null!=(d=o.zpp_inner)._validate&&d._validate(),c=o.zpp_inner.y==h}else c=!1;if(!c)o.zpp_inner.x=p,o.zpp_inner.y=h,null!=(d=o.zpp_inner)._invalidate&&d._invalidate(d)}return o.zpp_inner.weak=u,o},applyImpulse:function(n,e,t){if(null==t&&(t=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(null==n)throw haxe_Exception.thrown("Error: Cannot apply null impulse to Body");if(t){if(null==this.zpp_inner.space)throw haxe_Exception.thrown("Error: isSleeping makes no sense if the object is not contained within a Space");p=this.zpp_inner.component.sleeping}else p=!1;if(p){if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var i=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(u=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=i).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}if(null!=e&&e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");i=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(u=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=i).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}return this}this.zpp_inner.validate_mass();var r=this.zpp_inner.imass,l=(o=this.zpp_inner).velx;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate(),o.velx=l+n.zpp_inner.x*r;l=(o=this.zpp_inner).vely;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=n.zpp_inner)._validate&&h._validate(),o.vely=l+n.zpp_inner.y*r,null!=e){var s,a;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=e.zpp_inner)._validate&&h._validate(),s=e.zpp_inner.x-this.zpp_inner.posx,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=e.zpp_inner)._validate&&h._validate(),a=e.zpp_inner.y-this.zpp_inner.posy,this.zpp_inner.validate_inertia();var o;l=(o=this.zpp_inner).angvel;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(h=n.zpp_inner)._validate&&h._validate();var p=n.zpp_inner.y*s;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(h=n.zpp_inner)._validate&&h._validate(),o.angvel=l+(p-n.zpp_inner.x*a)*this.zpp_inner.iinertia,e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");i=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(u=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=i).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}}if(t||2==this.zpp_inner.type&&this.zpp_inner.wake(),n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var h;if((h=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u;i=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(u=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=i).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u}return this},applyAngularImpulse:function(n,e){if(null==e&&(e=!1),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");var t;if(e){if(null==this.zpp_inner.space)throw haxe_Exception.thrown("Error: isSleeping makes no sense if the object is not contained within a Space");t=this.zpp_inner.component.sleeping}else t=!1;return t||(this.zpp_inner.validate_inertia(),this.zpp_inner.angvel+=n*this.zpp_inner.iinertia,e||2==this.zpp_inner.type&&this.zpp_inner.wake()),this},translateShapes:function(n){if(this.zpp_inner.immutable_midstep("Body::translateShapes()"),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(null==n)throw haxe_Exception.thrown("Error: Cannot displace by null Vec2");var e=n.zpp_inner.weak;n.zpp_inner.weak=!1;for(var t=this.zpp_inner.shapes.head;null!=t;){t.elt.outer.translate(n),t=t.next}if(n.zpp_inner.weak=e,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i=n.zpp_inner;if(i._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var r,l=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(r=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=r:zpp_$nape_util_ZPP_$PubPool.poolVec2=r,zpp_$nape_util_ZPP_$PubPool.nextVec2=r,r.zpp_disp=!0,null!=(r=l).outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r}return this},rotateShapes:function(n){if(this.zpp_inner.immutable_midstep("Body::rotateShapes()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");for(var e=this.zpp_inner.shapes.head;null!=e;){e.elt.outer.rotate(n),e=e.next}return this},scaleShapes:function(n,e){if(this.zpp_inner.immutable_midstep("Body::scaleShapes()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");for(var t=this.zpp_inner.shapes.head;null!=t;){t.elt.outer.scale(n,e),t=t.next}return this},transformShapes:function(n){if(this.zpp_inner.immutable_midstep("Body::transformShapes()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");for(var e=this.zpp_inner.shapes.head;null!=e;){e.elt.outer.transform(n),e=e.next}return this},align:function(){if(this.zpp_inner.immutable_midstep("Body::align()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(null==this.zpp_inner.shapes.head)throw haxe_Exception.thrown("Error: Cannot align empty Body");this.zpp_inner.validate_localCOM();var n,e=-this.zpp_inner.localCOMx,t=-this.zpp_inner.localCOMy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((p=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(p=n.zpp_inner)._validate&&p._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=n.zpp_inner)._validate&&p._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(p=n.zpp_inner)._invalidate&&p._invalidate(p)}n.zpp_inner.weak=!1;var l=n;this.translateShapes(l);var s=this.localVectorToWorld(l);if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos.subeq(s),this.zpp_inner.pre_posx<1/0){var a=(o=this.zpp_inner).pre_posx;if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=s.zpp_inner)._validate&&p._validate(),o.pre_posx=a-1*s.zpp_inner.x;var o;a=(o=this.zpp_inner).pre_posy;if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(p=s.zpp_inner)._validate&&p._validate(),o.pre_posy=a-1*s.zpp_inner.y}if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((p=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),l.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var p,h=l.zpp_inner;if(l.zpp_inner.outer=null,l.zpp_inner=null,(u=l).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=h).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((p=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=p._isimmutable&&p._isimmutable(),s.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u;h=s.zpp_inner;return s.zpp_inner.outer=null,s.zpp_inner=null,(u=s).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=h).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,this},rotate:function(n,e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot rotate about a null Vec2");if(e!=e)throw haxe_Exception.thrown("Error: Cannot rotate by NaN radians");var t=n.zpp_inner.weak;n.zpp_inner.weak=!1,null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var i=this.zpp_inner.wrap_pos.sub(n);i.rotate(e);var r=n.add(i,!0);if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==r)throw haxe_Exception.thrown("Error: Body::position cannot be null");if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),null!=(c=this.zpp_inner.wrap_pos)&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=c.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),null==r)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=r.zpp_inner)._validate&&o._validate();var l=r.zpp_inner.x;if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(o=r.zpp_inner)._validate&&o._validate();var s,a=r.zpp_inner.y;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((o=c.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=o._isimmutable&&o._isimmutable(),l!=l||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(o=c.zpp_inner)._validate&&o._validate(),c.zpp_inner.x==l){if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var o;null!=(o=c.zpp_inner)._validate&&o._validate(),s=c.zpp_inner.y==a}else s=!1;s||(c.zpp_inner.x=l,c.zpp_inner.y=a,null!=(o=c.zpp_inner)._invalidate&&o._invalidate(o));if(r.zpp_inner.weak){if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=r.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),r.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var p=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,(d=r).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=d:zpp_$nape_util_ZPP_$PubPool.poolVec2=d,zpp_$nape_util_ZPP_$PubPool.nextVec2=d,d.zpp_disp=!0,null!=(d=p).outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d}if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((c=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),i.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");p=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,(d=i).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=d:zpp_$nape_util_ZPP_$PubPool.poolVec2=d,zpp_$nape_util_ZPP_$PubPool.nextVec2=d,d.zpp_disp=!0,null!=(d=p).outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d;var h=this.zpp_inner.rot+e;if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");if(1==this.zpp_inner.type&&null!=this.zpp_inner.space)throw haxe_Exception.thrown("Error: Static objects cannot be rotated once inside a Space");if(this.zpp_inner.rot!=h){if(h!=h)throw haxe_Exception.thrown("Error: Body::rotation cannot be NaN");this.zpp_inner.rot=h,(c=this.zpp_inner).zip_axis=!0;for(var u=c.shapes.head;null!=u;){var _=u.elt;1==_.type&&(_.polygon.invalidate_gverts(),_.polygon.invalidate_gaxi()),_.invalidate_worldCOM(),u=u.next}c.zip_worldCOM=!0,this.zpp_inner.wake()}if(n.zpp_inner.weak=t,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;if((c=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=c._isimmutable&&c._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var d;p=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(d=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=d:zpp_$nape_util_ZPP_$PubPool.poolVec2=d,zpp_$nape_util_ZPP_$PubPool.nextVec2=d,d.zpp_disp=!0,null!=(d=p).outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d}return this},setShapeMaterials:function(n){if(this.zpp_inner.immutable_midstep("Body::setShapeMaterials()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");for(var e=this.zpp_inner.shapes.head;null!=e;){var t=e.elt.outer;if(t.zpp_inner.immutable_midstep("Shape::material"),null==n)throw haxe_Exception.thrown("Error: Cannot assign null as Shape material");t.zpp_inner.setMaterial(n.zpp_inner),t.zpp_inner.material.wrapper(),e=e.next}return this},setShapeFilters:function(n){if(this.zpp_inner.immutable_midstep("Body::setShapeFilters()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");for(var e=this.zpp_inner.shapes.head;null!=e;){var t=e.elt.outer;if(t.zpp_inner.immutable_midstep("Shape::filter"),null==n)throw haxe_Exception.thrown("Error: Cannot assign null as Shape filter");t.zpp_inner.setFilter(n.zpp_inner),t.zpp_inner.filter.wrapper(),e=e.next}return this},setShapeFluidProperties:function(n){if(this.zpp_inner.immutable_midstep("Body::setShapeFluidProperties()"),this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world is immutable");for(var e=this.zpp_inner.shapes.head;null!=e;){var t=e.elt.outer;if(null==n)throw haxe_Exception.thrown("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");t.zpp_inner.setFluid(n.zpp_inner),t.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==t.zpp_inner.fluidProperties&&t.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner),t.zpp_inner.fluidProperties.wrapper(),e=e.next}return this},get_localCOM:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no localCOM");if(null==this.zpp_inner.wrap_localCOM){var n,t=this.zpp_inner.localCOMx,i=this.zpp_inner.localCOMy;if(null==i&&(i=0),null==t&&(t=0),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var r;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=t,r.y=i,n.zpp_inner=r,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=n.zpp_inner)._validate&&s._validate(),n.zpp_inner.x==t){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=n.zpp_inner)._validate&&s._validate(),l=n.zpp_inner.y==i}else l=!1;if(!l)n.zpp_inner.x=t,n.zpp_inner.y=i,null!=(s=n.zpp_inner)._invalidate&&s._invalidate(s)}n.zpp_inner.weak=!1,this.zpp_inner.wrap_localCOM=n,this.zpp_inner.wrap_localCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_localCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_localCOM.zpp_inner._validate=$bind(e=this.zpp_inner,e.getlocalCOM)}return this.zpp_inner.wrap_localCOM},get_worldCOM:function(){if(this.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no worldCOM");if(null==this.zpp_inner.wrap_worldCOM){var n,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==i&&(i=0),null==t&&(t=0),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var r;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=t,r.y=i,n.zpp_inner=r,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=n.zpp_inner)._validate&&s._validate(),n.zpp_inner.x==t){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=n.zpp_inner)._validate&&s._validate(),l=n.zpp_inner.y==i}else l=!1;if(!l)n.zpp_inner.x=t,n.zpp_inner.y=i,null!=(s=n.zpp_inner)._invalidate&&s._invalidate(s)}n.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=n,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$bind(e=this.zpp_inner,e.getworldCOM)}return this.zpp_inner.wrap_worldCOM},normalImpulse:function(n,e){null==e&&(e=!1);var t=0,i=0,r=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var l=this.zpp_inner.wrap_arbiters.iterator();;){l.zpp_inner.zpp_inner.valmod();var s,a=l.zpp_inner.zpp_gl();if(l.zpp_critical=!0,l.zpp_i<a?s=!0:(l.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=l,l.zpp_inner=null,s=!1),!s)break;l.zpp_critical=!1;var o=l.zpp_inner.at(l.zpp_i++).zpp_inner;if(o.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL&&(null==n||o.b2==n.zpp_inner||o.b1==n.zpp_inner)){var p=o.wrapper(),h=(p.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?p.zpp_inner.colarb.outer_zn:null).normalImpulse(this,e);if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var u=h.zpp_inner;if(null!=u._validate&&u._validate(),t+=1*h.zpp_inner.x,null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=h.zpp_inner;if(null!=_._validate&&_._validate(),i+=1*h.zpp_inner.y,null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=1*h.zpp_inner.z,h.dispose()}}return nape_geom_Vec3.get(t,i,r)},tangentImpulse:function(n,e){null==e&&(e=!1);var t=0,i=0,r=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var l=this.zpp_inner.wrap_arbiters.iterator();;){l.zpp_inner.zpp_inner.valmod();var s,a=l.zpp_inner.zpp_gl();if(l.zpp_critical=!0,l.zpp_i<a?s=!0:(l.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=l,l.zpp_inner=null,s=!1),!s)break;l.zpp_critical=!1;var o=l.zpp_inner.at(l.zpp_i++).zpp_inner;if(o.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL&&(null==n||o.b2==n.zpp_inner||o.b1==n.zpp_inner)){var p=o.wrapper(),h=(p.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?p.zpp_inner.colarb.outer_zn:null).tangentImpulse(this,e);if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var u=h.zpp_inner;if(null!=u._validate&&u._validate(),t+=1*h.zpp_inner.x,null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=h.zpp_inner;if(null!=_._validate&&_._validate(),i+=1*h.zpp_inner.y,null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=1*h.zpp_inner.z,h.dispose()}}return nape_geom_Vec3.get(t,i,r)},totalContactsImpulse:function(n,e){null==e&&(e=!1);var t=0,i=0,r=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var l=this.zpp_inner.wrap_arbiters.iterator();;){l.zpp_inner.zpp_inner.valmod();var s,a=l.zpp_inner.zpp_gl();if(l.zpp_critical=!0,l.zpp_i<a?s=!0:(l.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=l,l.zpp_inner=null,s=!1),!s)break;l.zpp_critical=!1;var o=l.zpp_inner.at(l.zpp_i++).zpp_inner;if(o.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL&&(null==n||o.b2==n.zpp_inner||o.b1==n.zpp_inner)){var p=o.wrapper(),h=(p.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?p.zpp_inner.colarb.outer_zn:null).totalImpulse(this,e);if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var u=h.zpp_inner;if(null!=u._validate&&u._validate(),t+=1*h.zpp_inner.x,null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=h.zpp_inner;if(null!=_._validate&&_._validate(),i+=1*h.zpp_inner.y,null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=1*h.zpp_inner.z,h.dispose()}}return nape_geom_Vec3.get(t,i,r)},rollingImpulse:function(n,e){null==e&&(e=!1);var t=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var i=this.zpp_inner.wrap_arbiters.iterator();;){i.zpp_inner.zpp_inner.valmod();var r,l=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,i.zpp_i<l?r=!0:(i.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=i,i.zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var s=i.zpp_inner.at(i.zpp_i++).zpp_inner;if(s.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL&&(null==n||s.b2==n.zpp_inner||s.b1==n.zpp_inner)){var a=s.wrapper();t+=(a.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?a.zpp_inner.colarb.outer_zn:null).rollingImpulse(this,e)}}return t},buoyancyImpulse:function(n){var e=0,t=0,i=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var l,s=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<s?l=!0:(r.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=r,r.zpp_inner=null,l=!1),!l)break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID&&(null==n||a.b2==n.zpp_inner||a.b1==n.zpp_inner)){var o=a.wrapper(),p=(o.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?o.zpp_inner.fluidarb.outer_zn:null).buoyancyImpulse(this);if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var h=p.zpp_inner;if(null!=h._validate&&h._validate(),e+=1*p.zpp_inner.x,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var u=p.zpp_inner;if(null!=u._validate&&u._validate(),t+=1*p.zpp_inner.y,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=p.zpp_inner;null!=_._validate&&_._validate(),i+=1*p.zpp_inner.z,p.dispose()}}return nape_geom_Vec3.get(e,t,i)},dragImpulse:function(n){var e=0,t=0,i=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var l,s=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<s?l=!0:(r.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=r,r.zpp_inner=null,l=!1),!l)break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID&&(null==n||a.b2==n.zpp_inner||a.b1==n.zpp_inner)){var o=a.wrapper(),p=(o.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?o.zpp_inner.fluidarb.outer_zn:null).dragImpulse(this);if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var h=p.zpp_inner;if(null!=h._validate&&h._validate(),e+=1*p.zpp_inner.x,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var u=p.zpp_inner;if(null!=u._validate&&u._validate(),t+=1*p.zpp_inner.y,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=p.zpp_inner;null!=_._validate&&_._validate(),i+=1*p.zpp_inner.z,p.dispose()}}return nape_geom_Vec3.get(e,t,i)},totalFluidImpulse:function(n){var e=0,t=0,i=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var l,s=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<s?l=!0:(r.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=r,r.zpp_inner=null,l=!1),!l)break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID&&(null==n||a.b2==n.zpp_inner||a.b1==n.zpp_inner)){var o=a.wrapper(),p=(o.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?o.zpp_inner.fluidarb.outer_zn:null).totalImpulse(this);if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var h=p.zpp_inner;if(null!=h._validate&&h._validate(),e+=1*p.zpp_inner.x,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var u=p.zpp_inner;if(null!=u._validate&&u._validate(),t+=1*p.zpp_inner.y,null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=p.zpp_inner;null!=_._validate&&_._validate(),i+=1*p.zpp_inner.z,p.dispose()}}return nape_geom_Vec3.get(e,t,i)},constraintsImpulse:function(){for(var n=0,e=0,t=0,i=this.zpp_inner.constraints.head;null!=i;){var r=i.elt.outer.bodyImpulse(this);if(null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var l=r.zpp_inner;if(null!=l._validate&&l._validate(),n+=1*r.zpp_inner.x,null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var s=r.zpp_inner;if(null!=s._validate&&s._validate(),e+=1*r.zpp_inner.y,null!=r&&r.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var a=r.zpp_inner;null!=a._validate&&a._validate(),t+=1*r.zpp_inner.z,r.dispose(),i=i.next}return nape_geom_Vec3.get(n,e,t)},totalImpulse:function(n,e){null==e&&(e=!1);var t=0,i=0,r=0;this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.zpp_inner.arbiters,!0));for(var l=this.zpp_inner.wrap_arbiters.iterator();;){l.zpp_inner.zpp_inner.valmod();var s,a=l.zpp_inner.zpp_gl();if(l.zpp_critical=!0,l.zpp_i<a?s=!0:(l.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool,nape_dynamics_ArbiterIterator.zpp_pool=l,l.zpp_inner=null,s=!1),!s)break;l.zpp_critical=!1;var o=l.zpp_inner.at(l.zpp_i++).zpp_inner;if(o.type!=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR&&(null==n||o.b2==n.zpp_inner||o.b1==n.zpp_inner)){var p=c=1;if(null!=(_=o.wrapper().totalImpulse(this,e))&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(d=_.zpp_inner)._validate&&d._validate(),t+=_.zpp_inner.x*p,null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(f=_.zpp_inner)._validate&&f._validate(),i+=_.zpp_inner.y*p,null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(x=_.zpp_inner)._validate&&x._validate(),r+=_.zpp_inner.z*c,_.dispose()}}for(var h=this.zpp_inner.constraints.head;null!=h;){var u=h.elt;if(u.active){var _,c,d,f,x;p=c=1;if(null!=(_=u.outer.bodyImpulse(this))&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(d=_.zpp_inner)._validate&&d._validate(),t+=_.zpp_inner.x*p,null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(f=_.zpp_inner)._validate&&f._validate(),i+=_.zpp_inner.y*p,null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(x=_.zpp_inner)._validate&&x._validate(),r+=_.zpp_inner.z*c,_.dispose()}h=h.next}return nape_geom_Vec3.get(t,i,r)},contains:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot check containment of null point");var e,t=n.zpp_inner.weak;n.zpp_inner.weak=!1,e=!1;for(var i=this.zpp_inner.shapes.head;null!=i;){if(i.elt.outer.contains(n)){e=!0;break}i=i.next}if(n.zpp_inner.weak=t,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r=n.zpp_inner;if(r._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var l,s=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(l=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=l:zpp_$nape_util_ZPP_$PubPool.poolVec2=l,zpp_$nape_util_ZPP_$PubPool.nextVec2=l,l.zpp_disp=!0,null!=(l=s).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l}return e},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(2==this.zpp_inner.type?"dynamic":1==this.zpp_inner.type?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:nape_phys_Body,__properties__:$extend(nape_phys_Interactor.prototype.__properties__,{get_worldCOM:"get_worldCOM",get_localCOM:"get_localCOM",set_inertia:"set_inertia",get_inertia:"get_inertia",get_constraintInertia:"get_constraintInertia",set_inertiaMode:"set_inertiaMode",get_inertiaMode:"get_inertiaMode",set_gravMassScale:"set_gravMassScale",get_gravMassScale:"get_gravMassScale",set_gravMass:"set_gravMass",get_gravMass:"get_gravMass",set_gravMassMode:"set_gravMassMode",get_gravMassMode:"get_gravMassMode",set_mass:"set_mass",get_mass:"get_mass",get_constraintMass:"get_constraintMass",set_massMode:"set_massMode",get_massMode:"get_massMode",set_allowRotation:"set_allowRotation",get_allowRotation:"get_allowRotation",set_allowMovement:"set_allowMovement",get_allowMovement:"get_allowMovement",get_bounds:"get_bounds",set_torque:"set_torque",get_torque:"get_torque",set_kinAngVel:"set_kinAngVel",get_kinAngVel:"get_kinAngVel",set_angularVel:"set_angularVel",get_angularVel:"get_angularVel",set_rotation:"set_rotation",get_rotation:"get_rotation",get_constraintVelocity:"get_constraintVelocity",set_force:"set_force",get_force:"get_force",set_surfaceVel:"set_surfaceVel",get_surfaceVel:"get_surfaceVel",set_kinematicVel:"set_kinematicVel",get_kinematicVel:"get_kinematicVel",set_velocity:"set_velocity",get_velocity:"get_velocity",set_position:"set_position",get_position:"get_position",get_constraints:"get_constraints",get_isSleeping:"get_isSleeping",get_arbiters:"get_arbiters",set_space:"set_space",get_space:"get_space",set_compound:"set_compound",get_compound:"get_compound",get_shapes:"get_shapes",set_disableCCD:"set_disableCCD",get_disableCCD:"get_disableCCD",set_isBullet:"set_isBullet",get_isBullet:"get_isBullet",set_type:"set_type",get_type:"get_type"})});var nape_phys_BodyIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$BodyList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate BodyIterator derp!")};t["nape.phys.BodyIterator"]=nape_phys_BodyIterator,nape_phys_BodyIterator.__name__="nape.phys.BodyIterator",nape_phys_BodyIterator.get=function(n){var e;if(null==nape_phys_BodyIterator.zpp_pool){zpp_$nape_util_ZPP_$BodyList.internal=!0;var t=new nape_phys_BodyIterator;zpp_$nape_util_ZPP_$BodyList.internal=!1,e=t}else{var i=nape_phys_BodyIterator.zpp_pool;nape_phys_BodyIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_phys_BodyIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_phys_BodyIterator};var nape_phys_BodyList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$BodyList,this.zpp_inner.outer=this};t["nape.phys.BodyList"]=nape_phys_BodyList,nape_phys_BodyList.__name__="nape.phys.BodyList",nape_phys_BodyList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_phys_BodyList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_phys_BodyList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: BodyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: BodyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: BodyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: BodyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: BodyList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: BodyList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_phys_BodyIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_phys_BodyList;this.zpp_inner.valmod();for(var t=nape_phys_BodyIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Body is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_phys_BodyIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_phys_BodyIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_phys_BodyIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_phys_BodyList,__properties__:{get_length:"get_length"}};var nape_phys_BodyType=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate BodyType derp!")};t["nape.phys.BodyType"]=nape_phys_BodyType,nape_phys_BodyType.__name__="nape.phys.BodyType",nape_phys_BodyType.__properties__={get_KINEMATIC:"get_KINEMATIC",get_DYNAMIC:"get_DYNAMIC",get_STATIC:"get_STATIC"},nape_phys_BodyType.get_STATIC=function(){return null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.BodyType_STATIC},nape_phys_BodyType.get_DYNAMIC=function(){return null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC},nape_phys_BodyType.get_KINEMATIC=function(){return null==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC},nape_phys_BodyType.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC?"STATIC":(null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC?"DYNAMIC":(null==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC?"KINEMATIC":""))},__class__:nape_phys_BodyType};var nape_phys_Compound=function(){this.zpp_inner=null,nape_phys_Interactor.zpp_internalAlloc=!0,nape_phys_Interactor.call(this),nape_phys_Interactor.zpp_internalAlloc=!1,this.zpp_inner=new zpp_$nape_phys_ZPP_$Compound,this.zpp_inner.outer=this,this.zpp_inner.outer_i=this,this.zpp_inner_i=this.zpp_inner,this.zpp_inner.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND.zpp_inner)};t["nape.phys.Compound"]=nape_phys_Compound,nape_phys_Compound.__name__="nape.phys.Compound",nape_phys_Compound.__super__=nape_phys_Interactor,nape_phys_Compound.prototype=$extend(nape_phys_Interactor.prototype,{get_bodies:function(){return this.zpp_inner.wrap_bodies},get_constraints:function(){return this.zpp_inner.wrap_constraints},get_compounds:function(){return this.zpp_inner.wrap_compounds},get_compound:function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},set_compound:function(n){if(this.zpp_inner.immutable_midstep("Compound::compound"),(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=n&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(this),null!=n)){var e=n.zpp_inner.wrap_compounds;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(n){if(null!=this.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");if(this.zpp_inner.immutable_midstep("Compound::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=n&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_compounds.remove(this),null!=n)){var e=n.zpp_inner.wrap_compounds;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},toString:function(){return"Compound"+this.zpp_inner_i.id},copy:function(){return this.zpp_inner.copy()},breakApart:function(){this.zpp_inner.breakApart()},visitBodies:function(n){if(null==n)throw haxe_Exception.thrown("Error: lambda cannot be null for Compound::visitBodies");(i=this.zpp_inner.wrap_bodies).zpp_inner.valmod();for(var e=nape_phys_BodyIterator.get(i);;){e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}(i=this.zpp_inner.wrap_compounds).zpp_inner.valmod();for(e=nape_phys_CompoundIterator.get(i);;){var i;e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r;t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,e.zpp_inner.at(e.zpp_i++).visitBodies(n)}},visitConstraints:function(n){if(null==n)throw haxe_Exception.thrown("Error: lambda cannot be null for Compound::visitConstraints");(i=this.zpp_inner.wrap_constraints).zpp_inner.valmod();for(var e=nape_constraint_ConstraintIterator.get(i);;){e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}(i=this.zpp_inner.wrap_compounds).zpp_inner.valmod();for(e=nape_phys_CompoundIterator.get(i);;){var i;e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r;t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,e.zpp_inner.at(e.zpp_i++).visitConstraints(n)}},visitCompounds:function(n){if(null==n)throw haxe_Exception.thrown("Error: lambda cannot be null for Compound::visitConstraints");(t=this.zpp_inner.wrap_compounds).zpp_inner.valmod();for(var e=nape_phys_CompoundIterator.get(t);;){var t;e.zpp_inner.zpp_inner.valmod(),(t=e.zpp_inner).zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);n(l),l.visitCompounds(n)}},COM:function(n){null==n&&(n=!1);var t,i=0,r=0,l=n;if(null==l&&(l=!1),null==r&&(r=0),null==i&&(i=0),i!=i||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?t=new nape_geom_Vec2:(t=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=t.zpp_pool,t.zpp_pool=null,t.zpp_disp=!1,t==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==t.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?o=new zpp_$nape_geom_ZPP_$Vec2:(o=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=i,o.y=r,t.zpp_inner=o,t.zpp_inner.outer=t}else{if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((a=t.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),i!=i||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=t.zpp_inner)._validate&&a._validate(),t.zpp_inner.x==i){if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;null!=(a=t.zpp_inner)._validate&&a._validate(),s=t.zpp_inner.y==r}else s=!1;if(!s)t.zpp_inner.x=i,t.zpp_inner.y=r,null!=(a=t.zpp_inner)._invalidate&&a._invalidate(a)}t.zpp_inner.weak=l;var o=t,p=0;if(this.visitBodies((function(n){if(null!=(a=n.zpp_inner.wrap_shapes).zpp_inner.inner.head){var t=o;if(n.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no worldCOM");if(null==n.zpp_inner.wrap_worldCOM){var i,r=n.zpp_inner.worldCOMx,l=n.zpp_inner.worldCOMy;if(null==l&&(l=0),null==r&&(r=0),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?i=new nape_geom_Vec2:(i=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=i.zpp_pool,i.zpp_pool=null,i.zpp_disp=!1,i==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==i.zpp_inner){var s;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?s=new zpp_$nape_geom_ZPP_$Vec2:(s=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=r,s.y=l,i.zpp_inner=s,i.zpp_inner.outer=i}else{if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((a=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),r!=r||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(a=i.zpp_inner)._validate&&a._validate(),i.zpp_inner.x==r){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;null!=(a=i.zpp_inner)._validate&&a._validate(),h=i.zpp_inner.y==l}else h=!1;if(!h)i.zpp_inner.x=r,i.zpp_inner.y=l,null!=(a=i.zpp_inner)._invalidate&&a._invalidate(a)}i.zpp_inner.weak=!1,n.zpp_inner.wrap_worldCOM=i,n.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,n.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,n.zpp_inner.wrap_worldCOM.zpp_inner._validate=$bind(e=n.zpp_inner,e.getworldCOM)}var h=n.zpp_inner.wrap_worldCOM;if(n.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no mass");if(n.zpp_inner.validate_mass(),0==n.zpp_inner.massMode&&null==n.zpp_inner.shapes.head)throw haxe_Exception.thrown("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");t.addeq(h.mul(n.zpp_inner.cmass,!0));var u=p;if(n.zpp_inner.world)throw haxe_Exception.thrown("Error: Space::world has no mass");if(n.zpp_inner.validate_mass(),0==n.zpp_inner.massMode&&null==n.zpp_inner.shapes.head)throw haxe_Exception.thrown("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");p=u+n.zpp_inner.cmass}})),0==p)throw haxe_Exception.thrown("Error: COM of an empty Compound is undefined silly");return o.muleq(1/p),o},translate:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot translate by null Vec2");var e=n.zpp_inner.weak;if(n.zpp_inner.weak=!1,this.visitBodies((function(e){null==e.zpp_inner.wrap_pos&&e.zpp_inner.setupPosition(),e.zpp_inner.wrap_pos.addeq(n)})),n.zpp_inner.weak=e,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t=n.zpp_inner;if(t._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var i,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(i=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=i:zpp_$nape_util_ZPP_$PubPool.poolVec2=i,zpp_$nape_util_ZPP_$PubPool.nextVec2=i,i.zpp_disp=!0,null!=(i=r).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i}return this},rotate:function(n,e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot rotate about a null Vec2");if(e!=e)throw haxe_Exception.thrown("Error: Cannot rotate by NaN radians");var t=n.zpp_inner.weak;if(n.zpp_inner.weak=!1,this.visitBodies((function(t){t.rotate(n,e)})),n.zpp_inner.weak=t,n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i=n.zpp_inner;if(i._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var r,l=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(r=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=r:zpp_$nape_util_ZPP_$PubPool.poolVec2=r,zpp_$nape_util_ZPP_$PubPool.nextVec2=r,r.zpp_disp=!0,null!=(r=l).outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r}return this},__class__:nape_phys_Compound,__properties__:$extend(nape_phys_Interactor.prototype.__properties__,{set_space:"set_space",get_space:"get_space",set_compound:"set_compound",get_compound:"get_compound",get_compounds:"get_compounds",get_constraints:"get_constraints",get_bodies:"get_bodies"})});var nape_phys_CompoundIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$CompoundList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate CompoundIterator derp!")};t["nape.phys.CompoundIterator"]=nape_phys_CompoundIterator,nape_phys_CompoundIterator.__name__="nape.phys.CompoundIterator",nape_phys_CompoundIterator.get=function(n){var e;if(null==nape_phys_CompoundIterator.zpp_pool){zpp_$nape_util_ZPP_$CompoundList.internal=!0;var t=new nape_phys_CompoundIterator;zpp_$nape_util_ZPP_$CompoundList.internal=!1,e=t}else{var i=nape_phys_CompoundIterator.zpp_pool;nape_phys_CompoundIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_phys_CompoundIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_phys_CompoundIterator};var nape_phys_CompoundList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$CompoundList,this.zpp_inner.outer=this};t["nape.phys.CompoundList"]=nape_phys_CompoundList,nape_phys_CompoundList.__name__="nape.phys.CompoundList",nape_phys_CompoundList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_phys_CompoundList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_phys_CompoundList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CompoundList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CompoundList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CompoundList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CompoundList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CompoundList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: CompoundList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_phys_CompoundIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_phys_CompoundList;this.zpp_inner.valmod();for(var t=nape_phys_CompoundIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Compound is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_phys_CompoundIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_phys_CompoundIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_phys_CompoundIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_phys_CompoundList,__properties__:{get_length:"get_length"}};var nape_phys_FluidProperties=function(n,e){if(null==e&&(e=1),null==n&&(n=1),this.zpp_inner=null,null==zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool?this.zpp_inner=new zpp_$nape_phys_ZPP_$FluidProperties:(this.zpp_inner=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool,zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),this.zpp_inner.outer=this,n!=1e3*this.zpp_inner.density){if(n!=n)throw haxe_Exception.thrown("Error: FluidProperties::density cannot be NaN");this.zpp_inner.density=n/1e3,this.zpp_inner.invalidate()}if(e!=this.zpp_inner.viscosity){if(e!=e)throw haxe_Exception.thrown("Error: FluidProperties::viscosity cannot be NaN");if(e<0)throw haxe_Exception.thrown("Error: FluidProperties::viscosity ("+e+") must be >= 0");this.zpp_inner.viscosity=e/1,this.zpp_inner.invalidate()}};t["nape.phys.FluidProperties"]=nape_phys_FluidProperties,nape_phys_FluidProperties.__name__="nape.phys.FluidProperties",nape_phys_FluidProperties.prototype={get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_shapes:function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=zpp_$nape_util_ZPP_$ShapeList.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},copy:function(){var n=new nape_phys_FluidProperties(1e3*this.zpp_inner.density,this.zpp_inner.viscosity);null!=this.zpp_inner.userData&&(n.zpp_inner.userData=Reflect.copy(this.zpp_inner.userData));var e=this.zpp_inner.wrap_gravity;if(null==e){if(null!=n.zpp_inner.wrap_gravity){if(n.zpp_inner.wrap_gravity.zpp_inner._inuse=!1,null!=(a=n.zpp_inner.wrap_gravity)&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),a.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var t=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,(o=a).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=o:zpp_$nape_util_ZPP_$PubPool.poolVec2=o,zpp_$nape_util_ZPP_$PubPool.nextVec2=o,o.zpp_disp=!0,null!=(o=t).outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o,n.zpp_inner.wrap_gravity=null}}else{if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n.zpp_inner.wrap_gravity&&n.zpp_inner.getgravity(),null!=(a=n.zpp_inner.wrap_gravity)&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),null==e)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=e.zpp_inner)._validate&&s._validate();var i=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=e.zpp_inner)._validate&&s._validate();var r,l=e.zpp_inner.y;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((s=a.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),i!=i||l!=l)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=a.zpp_inner)._validate&&s._validate(),a.zpp_inner.x==i){if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=a.zpp_inner)._validate&&s._validate(),r=a.zpp_inner.y==l}else r=!1;if(!r)a.zpp_inner.x=i,a.zpp_inner.y=l,null!=(s=a.zpp_inner)._invalidate&&s._invalidate(s);if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var a;if((a=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=a._isimmutable&&a._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o;t=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(o=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=o:zpp_$nape_util_ZPP_$PubPool.poolVec2=o,zpp_$nape_util_ZPP_$PubPool.nextVec2=o,o.zpp_disp=!0,null!=(o=t).outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o}}return n},get_density:function(){return 1e3*this.zpp_inner.density},set_density:function(n){if(n!=1e3*this.zpp_inner.density){if(n!=n)throw haxe_Exception.thrown("Error: FluidProperties::density cannot be NaN");this.zpp_inner.density=n/1e3,this.zpp_inner.invalidate()}return 1e3*this.zpp_inner.density},get_viscosity:function(){return this.zpp_inner.viscosity},set_viscosity:function(n){if(n!=this.zpp_inner.viscosity){if(n!=n)throw haxe_Exception.thrown("Error: FluidProperties::viscosity cannot be NaN");if(n<0)throw haxe_Exception.thrown("Error: FluidProperties::viscosity ("+n+") must be >= 0");this.zpp_inner.viscosity=n/1,this.zpp_inner.invalidate()}return this.zpp_inner.viscosity},get_gravity:function(){return this.zpp_inner.wrap_gravity},set_gravity:function(n){if(null==n){if(null!=this.zpp_inner.wrap_gravity){if(this.zpp_inner.wrap_gravity.zpp_inner._inuse=!1,null!=(s=this.zpp_inner.wrap_gravity)&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),s.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var e=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,(a=s).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=e).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a,this.zpp_inner.wrap_gravity=null}}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),null!=(s=this.zpp_inner.wrap_gravity)&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var t=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(l=n.zpp_inner)._validate&&l._validate();var i,r=n.zpp_inner.y;if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((l=s.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),t!=t||r!=r)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=s.zpp_inner)._validate&&l._validate(),s.zpp_inner.x==t){if(null!=s&&s.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=s.zpp_inner)._validate&&l._validate(),i=s.zpp_inner.y==r}else i=!1;if(!i)s.zpp_inner.x=t,s.zpp_inner.y=r,null!=(l=s.zpp_inner)._invalidate&&l._invalidate(l);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a;e=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=e).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}}return this.zpp_inner.wrap_gravity},toString:function(){return"{ density: "+1e3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+Std.string(this.zpp_inner.wrap_gravity)+" }"},__class__:nape_phys_FluidProperties,__properties__:{set_gravity:"set_gravity",get_gravity:"get_gravity",set_viscosity:"set_viscosity",get_viscosity:"get_viscosity",set_density:"set_density",get_density:"get_density",get_shapes:"get_shapes",get_userData:"get_userData"}};var nape_phys_GravMassMode=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate GravMassMode derp!")};t["nape.phys.GravMassMode"]=nape_phys_GravMassMode,nape_phys_GravMassMode.__name__="nape.phys.GravMassMode",nape_phys_GravMassMode.__properties__={get_SCALED:"get_SCALED",get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"},nape_phys_GravMassMode.get_DEFAULT=function(){return null==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT},nape_phys_GravMassMode.get_FIXED=function(){return null==zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED},nape_phys_GravMassMode.get_SCALED=function(){return null==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED},nape_phys_GravMassMode.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT?"DEFAULT":(null==zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED?"FIXED":(null==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED=new nape_phys_GravMassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED?"SCALED":""))},__class__:nape_phys_GravMassMode};var nape_phys_InertiaMode=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate InertiaMode derp!")};t["nape.phys.InertiaMode"]=nape_phys_InertiaMode,nape_phys_InertiaMode.__name__="nape.phys.InertiaMode",nape_phys_InertiaMode.__properties__={get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"},nape_phys_InertiaMode.get_DEFAULT=function(){return null==zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT},nape_phys_InertiaMode.get_FIXED=function(){return null==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED},nape_phys_InertiaMode.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT?"DEFAULT":(null==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED=new nape_phys_InertiaMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED?"FIXED":"")},__class__:nape_phys_InertiaMode};var nape_phys_InteractorIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$InteractorList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate InteractorIterator derp!")};t["nape.phys.InteractorIterator"]=nape_phys_InteractorIterator,nape_phys_InteractorIterator.__name__="nape.phys.InteractorIterator",nape_phys_InteractorIterator.get=function(n){var e;if(null==nape_phys_InteractorIterator.zpp_pool){zpp_$nape_util_ZPP_$InteractorList.internal=!0;var t=new nape_phys_InteractorIterator;zpp_$nape_util_ZPP_$InteractorList.internal=!1,e=t}else{var i=nape_phys_InteractorIterator.zpp_pool;nape_phys_InteractorIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_phys_InteractorIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_phys_InteractorIterator.zpp_pool,nape_phys_InteractorIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_phys_InteractorIterator};var nape_phys_InteractorList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$InteractorList,this.zpp_inner.outer=this};t["nape.phys.InteractorList"]=nape_phys_InteractorList,nape_phys_InteractorList.__name__="nape.phys.InteractorList",nape_phys_InteractorList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_phys_InteractorList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_phys_InteractorList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner_i)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractorList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner_i);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner_i)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractorList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner_i)}else this.zpp_inner.inner.add(n.zpp_inner_i);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractorList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer_i},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractorList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer_i},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractorList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner_i){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner_i),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: InteractorList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_phys_InteractorIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_phys_InteractorList;this.zpp_inner.valmod();for(var t=nape_phys_InteractorIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_phys_InteractorIterator.zpp_pool,nape_phys_InteractorIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Interactor is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_phys_InteractorIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_InteractorIterator.zpp_pool,nape_phys_InteractorIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_phys_InteractorIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_phys_InteractorIterator.zpp_pool,nape_phys_InteractorIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_phys_InteractorIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_InteractorIterator.zpp_pool,nape_phys_InteractorIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_phys_InteractorIterator.zpp_pool,nape_phys_InteractorIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_phys_InteractorList,__properties__:{get_length:"get_length"}};var nape_phys_MassMode=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate MassMode derp!")};t["nape.phys.MassMode"]=nape_phys_MassMode,nape_phys_MassMode.__name__="nape.phys.MassMode",nape_phys_MassMode.__properties__={get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"},nape_phys_MassMode.get_DEFAULT=function(){return null==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT},nape_phys_MassMode.get_FIXED=function(){return null==zpp_$nape_util_ZPP_$Flags.MassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_FIXED=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.MassMode_FIXED},nape_phys_MassMode.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT?"DEFAULT":(null==zpp_$nape_util_ZPP_$Flags.MassMode_FIXED&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.MassMode_FIXED=new nape_phys_MassMode,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.MassMode_FIXED?"FIXED":"")},__class__:nape_phys_MassMode};var nape_shape_Shape=function(){if(this.zpp_inner=null,nape_phys_Interactor.zpp_internalAlloc=!0,nape_phys_Interactor.call(this),nape_phys_Interactor.zpp_internalAlloc=!1,!nape_shape_Shape.zpp_internalAlloc)throw haxe_Exception.thrown("Error: Shape cannot be instantiated derp!")};t["nape.shape.Shape"]=nape_shape_Shape,nape_shape_Shape.__name__="nape.shape.Shape",nape_shape_Shape.__super__=nape_phys_Interactor,nape_shape_Shape.prototype=$extend(nape_phys_Interactor.prototype,{get_type:function(){return zpp_$nape_shape_ZPP_$Shape.types[this.zpp_inner.type]},isCircle:function(){return 0==this.zpp_inner.type},isPolygon:function(){return 1==this.zpp_inner.type},get_body:function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},set_body:function(n){if(this.zpp_inner.immutable_midstep("Shape::body"),(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null)!=n&&(null!=this.zpp_inner.body&&(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(this),null!=n)){var e=n.zpp_inner.wrap_shapes;e.zpp_inner.reverse_flag?e.push(this):e.unshift(this)}return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},get_castCircle:function(){return 0==this.zpp_inner.type?this.zpp_inner.circle.outer_zn:null},get_castPolygon:function(){return 1==this.zpp_inner.type?this.zpp_inner.polygon.outer_zn:null},get_worldCOM:function(){if(null==this.zpp_inner.wrap_worldCOM){var n,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==i&&(i=0),null==t&&(t=0),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var r;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=t,r.y=i,n.zpp_inner=r,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),t!=t||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(s=n.zpp_inner)._validate&&s._validate(),n.zpp_inner.x==t){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;null!=(s=n.zpp_inner)._validate&&s._validate(),l=n.zpp_inner.y==i}else l=!1;if(!l)n.zpp_inner.x=t,n.zpp_inner.y=i,null!=(s=n.zpp_inner)._invalidate&&s._invalidate(s)}n.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=n,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$bind(e=this.zpp_inner,e.getworldCOM)}return this.zpp_inner.wrap_worldCOM},get_localCOM:function(){return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},set_localCOM:function(n){if(this.zpp_inner.immutable_midstep("Body::localCOM"),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw haxe_Exception.thrown("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==n)throw haxe_Exception.thrown("Error: Shape::localCOM cannot be null");if(null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),null!=(l=this.zpp_inner.wrap_localCOM)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},get_area:function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.area},get_inertia:function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.inertia},get_angDrag:function(){return this.zpp_inner.validate_angDrag(),this.zpp_inner.angDrag},get_material:function(){return this.zpp_inner.material.wrapper()},set_material:function(n){if(this.zpp_inner.immutable_midstep("Shape::material"),null==n)throw haxe_Exception.thrown("Error: Cannot assign null as Shape material");return this.zpp_inner.setMaterial(n.zpp_inner),this.zpp_inner.material.wrapper()},get_filter:function(){return this.zpp_inner.filter.wrapper()},set_filter:function(n){if(this.zpp_inner.immutable_midstep("Shape::filter"),null==n)throw haxe_Exception.thrown("Error: Cannot assign null as Shape filter");return this.zpp_inner.setFilter(n.zpp_inner),this.zpp_inner.filter.wrapper()},get_fluidProperties:function(){return this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},set_fluidProperties:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");return this.zpp_inner.setFluid(n.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},get_fluidEnabled:function(){return this.zpp_inner.fluidEnabled},set_fluidEnabled:function(n){if(this.zpp_inner.immutable_midstep("Shape::fluidEnabled"),this.zpp_inner.fluidEnabled=n,n&&null==this.zpp_inner.fluidProperties){var e=new nape_phys_FluidProperties;if(null==e)throw haxe_Exception.thrown("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");this.zpp_inner.setFluid(e.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner),this.zpp_inner.fluidProperties.wrapper()}return this.zpp_inner.wake(),this.zpp_inner.fluidEnabled},get_sensorEnabled:function(){return this.zpp_inner.sensorEnabled},set_sensorEnabled:function(n){return this.zpp_inner.immutable_midstep("Shape::sensorEnabled"),this.zpp_inner.sensorEnabled=n,this.zpp_inner.wake(),this.zpp_inner.sensorEnabled},get_bounds:function(){return this.zpp_inner.aabb.wrapper()},translate:function(n){if(this.zpp_inner.immutable_midstep("Shape::translate()"),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw haxe_Exception.thrown("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==n)throw haxe_Exception.thrown("Error: Cannot displace Shape by null Vec2");if(n.lsq()>0)if(0==this.zpp_inner.type){var e=this.zpp_inner.circle;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(i=n.zpp_inner)._validate&&i._validate();var t=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(i=n.zpp_inner)._validate&&i._validate(),e.__translate(t,n.zpp_inner.y)}else{e=this.zpp_inner.polygon;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(i=n.zpp_inner)._validate&&i._validate();t=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(i=n.zpp_inner)._validate&&i._validate(),e.__translate(t,n.zpp_inner.y)}if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i;if((i=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var r,l=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(r=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=r:zpp_$nape_util_ZPP_$PubPool.poolVec2=r,zpp_$nape_util_ZPP_$PubPool.nextVec2=r,r.zpp_disp=!0,null!=(r=l).outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r}return this},scale:function(n,e){if(this.zpp_inner.immutable_midstep("Shape::scale()"),null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw haxe_Exception.thrown("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(n!=n||e!=e)throw haxe_Exception.thrown("Error: Cannot scale Shape by NaN");if(0==n||0==e)throw haxe_Exception.thrown("Error: Cannot Scale shape by a factor of 0");if(0==this.zpp_inner.type){var t=n*n-e*e;if(!(t*t<nape_Config.epsilon*nape_Config.epsilon))throw haxe_Exception.thrown("Error: Cannot perform a non equal scaling on a Circle");this.zpp_inner.circle.__scale(n,e)}else this.zpp_inner.polygon.__scale(n,e);return this},rotate:function(n){if(this.zpp_inner.immutable_midstep("Shape::rotate()"),null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw haxe_Exception.thrown("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(n!=n)throw haxe_Exception.thrown("Error: Cannot rotate Shape by NaN");if(0!=n%(2*Math.PI)){var e=Math.cos(n),t=Math.sin(n);0==this.zpp_inner.type?this.zpp_inner.circle.__rotate(t,e):this.zpp_inner.polygon.__rotate(t,e)}return this},transform:function(n){if(this.zpp_inner.immutable_midstep("Shape::transform()"),null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw haxe_Exception.thrown("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==n)throw haxe_Exception.thrown("Error: Cannot transform Shape by null matrix");if(n.singular())throw haxe_Exception.thrown("Error: Cannot transform Shape by a singular matrix");if(0==this.zpp_inner.type){if(!n.equiorthogonal())throw haxe_Exception.thrown("Error: Cannot transform Circle by a non equiorthogonal matrix");this.zpp_inner.circle.__transform(n)}else this.zpp_inner.polygon.__transform(n);return this},contains:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Cannot check null point for containment");if(null==(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Shape is not well defined without a Body");zpp_$nape_geom_ZPP_$Geom.validateShape(this.zpp_inner),null!=(t=n.zpp_inner)._validate&&t._validate();var e=zpp_$nape_geom_ZPP_$Collide.shapeContains(this.zpp_inner,n.zpp_inner);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t;if((t=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var i,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(i=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=i:zpp_$nape_util_ZPP_$PubPool.poolVec2=i,zpp_$nape_util_ZPP_$PubPool.nextVec2=i,i.zpp_disp=!0,null!=(i=r).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i}return e},copy:function(){return this.zpp_inner.copy()},toString:function(){return(0==this.zpp_inner.type?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:nape_shape_Shape,__properties__:$extend(nape_phys_Interactor.prototype.__properties__,{get_bounds:"get_bounds",set_sensorEnabled:"set_sensorEnabled",get_sensorEnabled:"get_sensorEnabled",set_fluidEnabled:"set_fluidEnabled",get_fluidEnabled:"get_fluidEnabled",set_fluidProperties:"set_fluidProperties",get_fluidProperties:"get_fluidProperties",set_filter:"set_filter",get_filter:"get_filter",set_material:"set_material",get_material:"get_material",get_angDrag:"get_angDrag",get_inertia:"get_inertia",get_area:"get_area",set_localCOM:"set_localCOM",get_localCOM:"get_localCOM",get_worldCOM:"get_worldCOM",get_castPolygon:"get_castPolygon",get_castCircle:"get_castCircle",set_body:"set_body",get_body:"get_body",get_type:"get_type"})});var nape_shape_Circle=function(n,e,t,i){if(this.zpp_inner_zn=null,nape_shape_Shape.zpp_internalAlloc=!0,nape_shape_Shape.call(this),nape_shape_Shape.zpp_internalAlloc=!1,this.zpp_inner_zn=new zpp_$nape_shape_ZPP_$Circle,this.zpp_inner_zn.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,this.zpp_inner.immutable_midstep("Circle::radius"),null!=this.zpp_inner.body&&1==this.zpp_inner.body.type&&null!=this.zpp_inner.body.space)throw haxe_Exception.thrown("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(n!=this.zpp_inner_zn.radius){if(n!=n)throw haxe_Exception.thrown("Error: Circle::radius cannot be NaN");if(n<nape_Config.epsilon)throw haxe_Exception.thrown("Error: Circle::radius ("+n+") must be > Config.epsilon");if(n>1e100)throw haxe_Exception.thrown("Error: Circle::radius ("+n+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=n,this.zpp_inner_zn.invalidate_radius()}if(null==e)this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0;else{if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=e.zpp_inner)._validate&&r._validate(),this.zpp_inner.localCOMx=e.zpp_inner.x,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=e.zpp_inner)._validate&&r._validate(),this.zpp_inner.localCOMy=e.zpp_inner.y,e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((r=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var l,s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(l=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=l:zpp_$nape_util_ZPP_$PubPool.poolVec2=l,zpp_$nape_util_ZPP_$PubPool.nextVec2=l,l.zpp_disp=!0,null!=(l=s).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l}}if(null==t)null==zpp_$nape_phys_ZPP_$Material.zpp_pool?this.zpp_inner.material=new zpp_$nape_phys_ZPP_$Material:(this.zpp_inner.material=zpp_$nape_phys_ZPP_$Material.zpp_pool,zpp_$nape_phys_ZPP_$Material.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::material"),null==t)throw haxe_Exception.thrown("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(t.zpp_inner),this.zpp_inner.material.wrapper()}if(null==i)null==zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool?this.zpp_inner.filter=new zpp_$nape_dynamics_ZPP_$InteractionFilter:(this.zpp_inner.filter=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::filter"),null==i)throw haxe_Exception.thrown("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(i.zpp_inner),this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE.zpp_inner)};t["nape.shape.Circle"]=nape_shape_Circle,nape_shape_Circle.__name__="nape.shape.Circle",nape_shape_Circle.__super__=nape_shape_Shape,nape_shape_Circle.prototype=$extend(nape_shape_Shape.prototype,{get_radius:function(){return this.zpp_inner_zn.radius},set_radius:function(n){if(this.zpp_inner.immutable_midstep("Circle::radius"),null!=this.zpp_inner.body&&1==this.zpp_inner.body.type&&null!=this.zpp_inner.body.space)throw haxe_Exception.thrown("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(n!=this.zpp_inner_zn.radius){if(n!=n)throw haxe_Exception.thrown("Error: Circle::radius cannot be NaN");if(n<nape_Config.epsilon)throw haxe_Exception.thrown("Error: Circle::radius ("+n+") must be > Config.epsilon");if(n>1e100)throw haxe_Exception.thrown("Error: Circle::radius ("+n+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=n,this.zpp_inner_zn.invalidate_radius()}return this.zpp_inner_zn.radius},__class__:nape_shape_Circle,__properties__:$extend(nape_shape_Shape.prototype.__properties__,{set_radius:"set_radius",get_radius:"get_radius"})});var nape_shape_Edge=function(){if(this.zpp_inner=null,!zpp_$nape_shape_ZPP_$Edge.internal)throw haxe_Exception.thrown("Error: Cannot instantiate an Edge derp!")};t["nape.shape.Edge"]=nape_shape_Edge,nape_shape_Edge.__name__="nape.shape.Edge",nape_shape_Edge.prototype={get_polygon:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");return this.zpp_inner.polygon.outer_zn},get_localNormal:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");return null==this.zpp_inner.wrap_lnorm&&this.zpp_inner.getlnorm(),this.zpp_inner.wrap_lnorm},get_worldNormal:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");return null==this.zpp_inner.wrap_gnorm&&this.zpp_inner.getgnorm(),this.zpp_inner.wrap_gnorm},get_length:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.length},get_localProjection:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.lprojection},get_worldProjection:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");if(null==this.zpp_inner.polygon.body)throw haxe_Exception.thrown("Error: Edge world projection only makes sense for Polygons contained within a rigid body");var n=this.zpp_inner.polygon;if(n.zip_gaxi&&null!=n.body){if(n.zip_gaxi=!1,n.validate_laxi(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),n.zip_gverts&&null!=n.body){var e;n.zip_gverts=!1,n.validate_lverts(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=n.lverts.next,i=n.gverts.next;null!=i;){var r=i,l=t;t=t.next,r.x=n.body.posx+(n.body.axisy*l.x-n.body.axisx*l.y),r.y=n.body.posy+(l.x*n.body.axisx+l.y*n.body.axisy),i=i.next}}var s=n.edges.head,a=i=n.gverts.next;for(i=i.next;null!=i;){var o=i,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy,a=o,i=i.next}o=n.gverts.next,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy}return this.zpp_inner.gprojection},get_localVertex1:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();var n=this.zpp_inner.lp0;if(null==n.outer){n.outer=new nape_geom_Vec2;var e=n.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e,n.outer.zpp_inner=n}return n.outer},get_localVertex2:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();var n=this.zpp_inner.lp1;if(null==n.outer){n.outer=new nape_geom_Vec2;var e=n.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e,n.outer.zpp_inner=n}return n.outer},get_worldVertex1:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");var n;if((n=this.zpp_inner.polygon).zip_gaxi&&null!=n.body){if(n.zip_gaxi=!1,n.validate_laxi(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),n.zip_gverts&&null!=n.body){var e;n.zip_gverts=!1,n.validate_lverts(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=n.lverts.next,i=n.gverts.next;null!=i;){var r=i,l=t;t=t.next,r.x=n.body.posx+(n.body.axisy*l.x-n.body.axisx*l.y),r.y=n.body.posy+(l.x*n.body.axisx+l.y*n.body.axisy),i=i.next}}var s=n.edges.head,a=i=n.gverts.next;for(i=i.next;null!=i;){var o=i,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy,a=o,i=i.next}o=n.gverts.next,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy}if(null==(n=this.zpp_inner.gp0).outer){n.outer=new nape_geom_Vec2;var h=n.outer.zpp_inner;null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h,n.outer.zpp_inner=n}return n.outer},get_worldVertex2:function(){if(null==this.zpp_inner.polygon)throw haxe_Exception.thrown("Error: Edge not current in use");var n;if((n=this.zpp_inner.polygon).zip_gaxi&&null!=n.body){if(n.zip_gaxi=!1,n.validate_laxi(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),n.zip_gverts&&null!=n.body){var e;n.zip_gverts=!1,n.validate_lverts(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=n.lverts.next,i=n.gverts.next;null!=i;){var r=i,l=t;t=t.next,r.x=n.body.posx+(n.body.axisy*l.x-n.body.axisx*l.y),r.y=n.body.posy+(l.x*n.body.axisx+l.y*n.body.axisy),i=i.next}}var s=n.edges.head,a=i=n.gverts.next;for(i=i.next;null!=i;){var o=i,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy,a=o,i=i.next}o=n.gverts.next,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy}if(null==(n=this.zpp_inner.gp1).outer){n.outer=new nape_geom_Vec2;var h=n.outer.zpp_inner;null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h,n.outer.zpp_inner=n}return n.outer},toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } }";var n=this.zpp_inner.polygon;if(n.zip_gaxi&&null!=n.body){if(n.zip_gaxi=!1,n.validate_laxi(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),n.zip_gverts&&null!=n.body){var e;n.zip_gverts=!1,n.validate_lverts(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=n.lverts.next,i=n.gverts.next;null!=i;){var r=i,l=t;t=t.next,r.x=n.body.posx+(n.body.axisy*l.x-n.body.axisx*l.y),r.y=n.body.posy+(l.x*n.body.axisx+l.y*n.body.axisy),i=i.next}}var s=n.edges.head,a=i=n.gverts.next;for(i=i.next;null!=i;){var o=i,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy,a=o,i=i.next}o=n.gverts.next,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy}return"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } worldNormal : { x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" } }"},__class__:nape_shape_Edge,__properties__:{get_worldVertex2:"get_worldVertex2",get_worldVertex1:"get_worldVertex1",get_localVertex2:"get_localVertex2",get_localVertex1:"get_localVertex1",get_worldProjection:"get_worldProjection",get_localProjection:"get_localProjection",get_length:"get_length",get_worldNormal:"get_worldNormal",get_localNormal:"get_localNormal",get_polygon:"get_polygon"}};var nape_shape_EdgeIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$EdgeList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate EdgeIterator derp!")};t["nape.shape.EdgeIterator"]=nape_shape_EdgeIterator,nape_shape_EdgeIterator.__name__="nape.shape.EdgeIterator",nape_shape_EdgeIterator.get=function(n){var e;if(null==nape_shape_EdgeIterator.zpp_pool){zpp_$nape_util_ZPP_$EdgeList.internal=!0;var t=new nape_shape_EdgeIterator;zpp_$nape_util_ZPP_$EdgeList.internal=!1,e=t}else{var i=nape_shape_EdgeIterator.zpp_pool;nape_shape_EdgeIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_shape_EdgeIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_shape_EdgeIterator.zpp_pool,nape_shape_EdgeIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_shape_EdgeIterator};var nape_shape_EdgeList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$EdgeList,this.zpp_inner.outer=this};t["nape.shape.EdgeList"]=nape_shape_EdgeList,nape_shape_EdgeList.__name__="nape.shape.EdgeList",nape_shape_EdgeList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_shape_EdgeList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_shape_EdgeList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n!=this.zpp_inner.user_length-1&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-2-n)),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: EdgeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: EdgeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: EdgeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.wrapper()},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: EdgeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.wrapper()},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: EdgeList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: EdgeList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_shape_EdgeIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_shape_EdgeList;this.zpp_inner.valmod();for(var t=nape_shape_EdgeIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_shape_EdgeIterator.zpp_pool,nape_shape_EdgeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Edge is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_shape_EdgeIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_shape_EdgeIterator.zpp_pool,nape_shape_EdgeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_shape_EdgeIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_shape_EdgeIterator.zpp_pool,nape_shape_EdgeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_shape_EdgeIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_shape_EdgeIterator.zpp_pool,nape_shape_EdgeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_shape_EdgeIterator.zpp_pool,nape_shape_EdgeIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_shape_EdgeList,__properties__:{get_length:"get_length"}};var nape_shape_Polygon=function(n,e,t){if(this.zpp_inner_zn=null,nape_shape_Shape.zpp_internalAlloc=!0,nape_shape_Shape.call(this),nape_shape_Shape.zpp_internalAlloc=!1,null==n)throw haxe_Exception.thrown("Error: localVerts cannot be null");if(this.zpp_inner_zn=new zpp_$nape_shape_ZPP_$Polygon,this.zpp_inner_zn.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,n instanceof Array)for(var i=n,r=0;r<i.length;){var l=i[r];if(++r,null==l)throw haxe_Exception.thrown("Error: Array<Vec2> contains null objects");if(!(l instanceof nape_geom_Vec2))throw haxe_Exception.thrown("Error: Array<Vec2> contains non Vec2 objects");if(null!=(c=l)&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var s=this.zpp_inner_zn.wrap_lverts;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(V=c.zpp_inner)._validate&&V._validate();var a=c.zpp_inner.x;if(c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(I=c.zpp_inner)._validate&&I._validate(),null==(m=!1)&&(m=!1),null==(u=c.zpp_inner.y)&&(u=0),null==a&&(a=0),a!=a||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?_=new nape_geom_Vec2:(_=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=_.zpp_pool,_.zpp_pool=null,_.zpp_disp=!1,_==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==_.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?d=new zpp_$nape_geom_ZPP_$Vec2:(d=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=a,d.y=u,_.zpp_inner=d,_.zpp_inner.outer=_}else{if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((x=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=x._isimmutable&&x._isimmutable(),a!=a||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=_.zpp_inner)._validate&&f._validate(),_.zpp_inner.x==a){if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(b=_.zpp_inner)._validate&&b._validate(),p=_.zpp_inner.y==u}else p=!1;if(!p)_.zpp_inner.x=a,_.zpp_inner.y=u,null!=(y=_.zpp_inner)._invalidate&&y._invalidate(y)}_.zpp_inner.weak=m,s.push(_)}else if(n instanceof nape_geom_Vec2List)for(r=(i=n).iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<o?s=!0:(r.zpp_next=nape_geom_Vec2Iterator.zpp_pool,nape_geom_Vec2Iterator.zpp_pool=r,r.zpp_inner=null,s=!1),!s)break;if(r.zpp_critical=!1,null==(c=r.zpp_inner.at(r.zpp_i++)))throw haxe_Exception.thrown("Error: Vec2List contains null objects");if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var p=this.zpp_inner_zn.wrap_lverts;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(V=c.zpp_inner)._validate&&V._validate();a=c.zpp_inner.x;if(c.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(I=c.zpp_inner)._validate&&I._validate(),null==(m=!1)&&(m=!1),null==(u=c.zpp_inner.y)&&(u=0),null==a&&(a=0),a!=a||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?_=new nape_geom_Vec2:(_=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=_.zpp_pool,_.zpp_pool=null,_.zpp_disp=!1,_==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==_.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?d=new zpp_$nape_geom_ZPP_$Vec2:(d=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=a,d.y=u,_.zpp_inner=d,_.zpp_inner.outer=_}else{if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((x=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=x._isimmutable&&x._isimmutable(),a!=a||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(f=_.zpp_inner)._validate&&f._validate(),_.zpp_inner.x==a){if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(b=_.zpp_inner)._validate&&b._validate(),O=_.zpp_inner.y==u}else O=!1;if(!O)_.zpp_inner.x=a,_.zpp_inner.y=u,null!=(y=_.zpp_inner)._invalidate&&y._invalidate(y)}_.zpp_inner.weak=m,p.push(_)}else{if(!(n instanceof nape_geom_GeomPoly))throw haxe_Exception.thrown("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");if(null!=(i=n)&&i.zpp_disp)throw haxe_Exception.thrown("Error: GeomPoly has been disposed and cannot be used!");var h=i.zpp_inner.vertices;if(null!=h)for(l=h;;){var u,_,c=l.x;if(null==(u=l.y)&&(u=0),null==c&&(c=0),c!=c||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?_=new nape_geom_Vec2:(_=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=_.zpp_pool,_.zpp_pool=null,_.zpp_disp=!1,_==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==_.zpp_inner){var d;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?d=new zpp_$nape_geom_ZPP_$Vec2:(d=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=c,d.y=u,_.zpp_inner=d,_.zpp_inner.outer=_}else{if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f;if((V=_.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=V._isimmutable&&V._isimmutable(),c!=c||u!=u)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(I=_.zpp_inner)._validate&&I._validate(),_.zpp_inner.x==c){if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var x;null!=(x=_.zpp_inner)._validate&&x._validate(),s=_.zpp_inner.y==u}else s=!1;if(!s)_.zpp_inner.x=c,_.zpp_inner.y=u,null!=(f=_.zpp_inner)._invalidate&&f._invalidate(f)}_.zpp_inner.weak=!1;a=_;l=l.next,null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var b;p=this.zpp_inner_zn.wrap_lverts;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(b=a.zpp_inner)._validate&&b._validate();var y,v=a.zpp_inner.x;if(a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(y=a.zpp_inner)._validate&&y._validate();var m,g,z=a.zpp_inner.y;if(null==(m=!1)&&(m=!1),null==z&&(z=0),null==v&&(v=0),v!=v||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?g=new nape_geom_Vec2:(g=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=g.zpp_pool,g.zpp_pool=null,g.zpp_disp=!1,g==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==g.zpp_inner){var w;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=v,w.y=z,g.zpp_inner=w,g.zpp_inner.outer=g}else{if(null!=g&&g.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var O,C=g.zpp_inner;if(C._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=C._isimmutable&&C._isimmutable(),v!=v||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=g&&g.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var E=g.zpp_inner;if(null!=E._validate&&E._validate(),g.zpp_inner.x==v){if(null!=g&&g.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var U=g.zpp_inner;null!=U._validate&&U._validate(),O=g.zpp_inner.y==z}else O=!1;if(!O){g.zpp_inner.x=v,g.zpp_inner.y=z;var M=g.zpp_inner;null!=M._invalidate&&M._invalidate(M)}}if(g.zpp_inner.weak=m,p.push(g),null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var T=a.zpp_inner;if(T._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=T._isimmutable&&T._isimmutable(),a.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var k=a.zpp_inner;if(a.zpp_inner.outer=null,a.zpp_inner=null,(N=a).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=N:zpp_$nape_util_ZPP_$PubPool.poolVec2=N,zpp_$nape_util_ZPP_$PubPool.nextVec2=N,N.zpp_disp=!0,null!=(F=k).outer&&(F.outer.zpp_inner=null,F.outer=null),F._isimmutable=null,F._validate=null,F._invalidate=null,F.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=F,l==h)break}}if(n instanceof Array){i=n;for(var D=0;D<i.length;){if((P=i[D]).zpp_inner.weak){if(null!=P&&P.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((V=P.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=V._isimmutable&&V._isimmutable(),P.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");k=P.zpp_inner;P.zpp_inner.outer=null,P.zpp_inner=null,(N=P).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=N:zpp_$nape_util_ZPP_$PubPool.poolVec2=N,zpp_$nape_util_ZPP_$PubPool.nextVec2=N,N.zpp_disp=!0,null!=(F=k).outer&&(F.outer.zpp_inner=null,F.outer=null),F._isimmutable=null,F._validate=null,F._invalidate=null,F.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=F,s=!0}else s=!1;s?i.splice(D,1):++D}}else if(n instanceof nape_geom_Vec2List){null!=(i=n).zpp_inner._validate&&i.zpp_inner._validate();for(var S=i.zpp_inner.inner,A=null,P=S.head;null!=P;){if((c=P.elt).outer.zpp_inner.weak){if(P=S.erase(A),c.outer.zpp_inner.weak){var V,I;if(null!=(V=c.outer)&&V.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((I=V.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=I._isimmutable&&I._isimmutable(),V.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var N,F;k=V.zpp_inner;V.zpp_inner.outer=null,V.zpp_inner=null,(N=V).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=N:zpp_$nape_util_ZPP_$PubPool.poolVec2=N,zpp_$nape_util_ZPP_$PubPool.nextVec2=N,N.zpp_disp=!0,null!=(F=k).outer&&(F.outer.zpp_inner=null,F.outer=null),F._isimmutable=null,F._validate=null,F._invalidate=null,F.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=F}}else A=P,P=P.next}}if(null==e)null==zpp_$nape_phys_ZPP_$Material.zpp_pool?this.zpp_inner.material=new zpp_$nape_phys_ZPP_$Material:(this.zpp_inner.material=zpp_$nape_phys_ZPP_$Material.zpp_pool,zpp_$nape_phys_ZPP_$Material.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::material"),null==e)throw haxe_Exception.thrown("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(e.zpp_inner),this.zpp_inner.material.wrapper()}if(null==t)null==zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool?this.zpp_inner.filter=new zpp_$nape_dynamics_ZPP_$InteractionFilter:(this.zpp_inner.filter=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::filter"),null==t)throw haxe_Exception.thrown("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(t.zpp_inner),this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE.zpp_inner)};t["nape.shape.Polygon"]=nape_shape_Polygon,nape_shape_Polygon.__name__="nape.shape.Polygon",nape_shape_Polygon.rect=function(n,e,t,i,r){if(null==r&&(r=!1),n!=n||e!=e||t!=t||i!=i)throw haxe_Exception.thrown("Error: Polygon.rect cannot accept NaN arguments");var l,s,a,o;if(null==(o=r)&&(o=!1),null==(a=e)&&(a=0),null==(s=n)&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?l=new nape_geom_Vec2:(l=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=l.zpp_pool,l.zpp_pool=null,l.zpp_disp=!1,l==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==l.zpp_inner){var p;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?p=new zpp_$nape_geom_ZPP_$Vec2:(p=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=s,p.y=a,l.zpp_inner=p,l.zpp_inner.outer=l}else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=l.zpp_inner)._validate&&d._validate(),l.zpp_inner.x==s){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=l.zpp_inner)._validate&&d._validate(),c=l.zpp_inner.y==a}else c=!1;if(!c)l.zpp_inner.x=s,l.zpp_inner.y=a,null!=(d=l.zpp_inner)._invalidate&&d._invalidate(d)}if(l.zpp_inner.weak=o,null==(o=r)&&(o=!1),null==(a=e)&&(a=0),null==(s=n+t)&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){var h;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?h=new zpp_$nape_geom_ZPP_$Vec2:(h=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h.next,h.next=null),h.weak=!1,h._immutable=!1,h.x=s,h.y=a,p.zpp_inner=h,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=p.zpp_inner)._validate&&d._validate(),p.zpp_inner.x==s){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=p.zpp_inner)._validate&&d._validate(),c=p.zpp_inner.y==a}else c=!1;if(!c)p.zpp_inner.x=s,p.zpp_inner.y=a,null!=(d=p.zpp_inner)._invalidate&&d._invalidate(d)}if(p.zpp_inner.weak=o,null==(o=r)&&(o=!1),null==(a=e+i)&&(a=0),null==(s=n+t)&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?h=new nape_geom_Vec2:(h=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=h.zpp_pool,h.zpp_pool=null,h.zpp_disp=!1,h==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==h.zpp_inner){var u;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?u=new zpp_$nape_geom_ZPP_$Vec2:(u=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=s,u.y=a,h.zpp_inner=u,h.zpp_inner.outer=h}else{if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((d=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=h.zpp_inner)._validate&&d._validate(),h.zpp_inner.x==s){if(null!=h&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(d=h.zpp_inner)._validate&&d._validate(),c=h.zpp_inner.y==a}else c=!1;if(!c)h.zpp_inner.x=s,h.zpp_inner.y=a,null!=(d=h.zpp_inner)._invalidate&&d._invalidate(d)}if(h.zpp_inner.weak=o,null==(o=r)&&(o=!1),null==(a=e+i)&&(a=0),null==(s=n)&&(s=0),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?u=new nape_geom_Vec2:(u=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=u.zpp_pool,u.zpp_pool=null,u.zpp_disp=!1,u==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==u.zpp_inner){var _;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?_=new zpp_$nape_geom_ZPP_$Vec2:(_=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=s,_.y=a,u.zpp_inner=_,u.zpp_inner.outer=u}else{if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var c;if((d=u.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=d._isimmutable&&d._isimmutable(),s!=s||a!=a)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(d=u.zpp_inner)._validate&&d._validate(),u.zpp_inner.x==s){if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var d;null!=(d=u.zpp_inner)._validate&&d._validate(),c=u.zpp_inner.y==a}else c=!1;if(!c)u.zpp_inner.x=s,u.zpp_inner.y=a,null!=(d=u.zpp_inner)._invalidate&&d._invalidate(d)}return u.zpp_inner.weak=o,[l,p,h,u]},nape_shape_Polygon.box=function(n,e,t){if(null==t&&(t=!1),n!=n||e!=e)throw haxe_Exception.thrown("Error: Polygon.box cannot accept NaN arguments");return nape_shape_Polygon.rect(-n/2,-e/2,n,e,t)},nape_shape_Polygon.regular=function(n,e,t,i,r){if(null==r&&(r=!1),null==i&&(i=0),n!=n||e!=e||i!=i)throw haxe_Exception.thrown("Error: Polygon.regular cannot accept NaN arguments");for(var l=[],s=2*Math.PI/t,a=0,o=t;a<o;){var p,h=a++*s+i,u=Math.cos(h)*n,_=Math.sin(h)*e,c=r;if(null==c&&(c=!1),null==_&&(_=0),null==u&&(u=0),u!=u||_!=_)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?p=new nape_geom_Vec2:(p=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=p.zpp_pool,p.zpp_pool=null,p.zpp_disp=!1,p==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==p.zpp_inner){var d;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?d=new zpp_$nape_geom_ZPP_$Vec2:(d=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=u,d.y=_,p.zpp_inner=d,p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var f,x=p.zpp_inner;if(x._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=x._isimmutable&&x._isimmutable(),u!=u||_!=_)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var b=p.zpp_inner;if(null!=b._validate&&b._validate(),p.zpp_inner.x==u){if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var y=p.zpp_inner;null!=y._validate&&y._validate(),f=p.zpp_inner.y==_}else f=!1;if(!f){p.zpp_inner.x=u,p.zpp_inner.y=_;var v=p.zpp_inner;null!=v._invalidate&&v._invalidate(v)}}p.zpp_inner.weak=c;var m=p;l.push(m)}return l},nape_shape_Polygon.__super__=nape_shape_Shape,nape_shape_Polygon.prototype=$extend(nape_shape_Shape.prototype,{get_localVerts:function(){return null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts(),this.zpp_inner_zn.wrap_lverts},get_worldVerts:function(){return null==this.zpp_inner_zn.wrap_gverts&&this.zpp_inner_zn.getgverts(),this.zpp_inner_zn.wrap_gverts},get_edges:function(){return null==this.zpp_inner_zn.wrap_edges&&this.zpp_inner_zn.getedges(),this.zpp_inner_zn.wrap_edges},validity:function(){return this.zpp_inner_zn.valid()},__class__:nape_shape_Polygon,__properties__:$extend(nape_shape_Shape.prototype.__properties__,{get_edges:"get_edges",get_worldVerts:"get_worldVerts",get_localVerts:"get_localVerts"})});var nape_shape_ShapeIterator=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_$nape_util_ZPP_$ShapeList.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ShapeIterator derp!")};t["nape.shape.ShapeIterator"]=nape_shape_ShapeIterator,nape_shape_ShapeIterator.__name__="nape.shape.ShapeIterator",nape_shape_ShapeIterator.get=function(n){var e;if(null==nape_shape_ShapeIterator.zpp_pool){zpp_$nape_util_ZPP_$ShapeList.internal=!0;var t=new nape_shape_ShapeIterator;zpp_$nape_util_ZPP_$ShapeList.internal=!1,e=t}else{var i=nape_shape_ShapeIterator.zpp_pool;nape_shape_ShapeIterator.zpp_pool=i.zpp_next,e=i}return e.zpp_i=0,e.zpp_inner=n,e.zpp_critical=!1,e},nape_shape_ShapeIterator.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var n=this.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var e=n.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=this,this.zpp_inner=null,!1)},next:function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},__class__:nape_shape_ShapeIterator};var nape_shape_ShapeList=function(){this.zpp_inner=null,this.zpp_inner=new zpp_$nape_util_ZPP_$ShapeList,this.zpp_inner.outer=this};t["nape.shape.ShapeList"]=nape_shape_ShapeList,nape_shape_ShapeList.__name__="nape.shape.ShapeList",nape_shape_ShapeList.fromArray=function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot convert null Array to Nape list");for(var e=new nape_shape_ShapeList,t=0;t<n.length;){var i=n[t];++t,e.push(i)}return e},nape_shape_ShapeList.prototype={get_length:function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},has:function(n){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(n.zpp_inner)},at:function(n){var e;if(this.zpp_inner.valmod(),n>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=n>=this.zpp_inner.user_length):e=!0,e)throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),n=this.zpp_inner.user_length-1-n),n<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=n,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(n);else for(;this.zpp_inner.at_index!=n;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ShapeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(n.zpp_inner);else{if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ShapeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var t;if(null==this.zpp_inner.inner.head)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=t}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,n.zpp_inner)}else this.zpp_inner.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ShapeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)t=null;else{var i=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=i.iterator_at(this.zpp_inner.user_length-2)}var e=(n=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}return this.zpp_inner.invalidate(),e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ShapeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_inner.valmod();var n=null;if(this.zpp_inner.reverse_flag){var e;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)e=null;else{var t=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=t.iterator_at(this.zpp_inner.user_length-2)}var i=(n=null==e?this.zpp_inner.inner.head.elt:e.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(e)}else{var i=(n=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),i=n.outer},add:function(n){return this.zpp_inner.reverse_flag?this.push(n):this.unshift(n)},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ShapeList is immutable");var e;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),e=!1;for(var t=this.zpp_inner.inner.head;null!=t;){if(t.elt==n.zpp_inner){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: ShapeList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},iterator:function(){return this.zpp_inner.valmod(),nape_shape_ShapeIterator.get(this)},copy:function(n){null==n&&(n=!1);var e=new nape_shape_ShapeList;this.zpp_inner.valmod();for(var t=nape_shape_ShapeIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s,a=t.zpp_inner.at(t.zpp_i++);if(n)throw haxe_Exception.thrown("Error: Shape is not a copyable type");s=a,e.push(s)}return e},merge:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot merge with null list");n.zpp_inner.valmod();for(var e=nape_shape_ShapeIterator.get(n);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);this.has(l)||(this.zpp_inner.reverse_flag?this.push(l):this.unshift(l))}},toString:function(){var n="[",e=!0;this.zpp_inner.valmod();for(var t=nape_shape_ShapeIterator.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);e||(n+=","),n+=null==s?"NULL":s.toString(),e=!1}return n+"]"},foreach:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var e=nape_shape_ShapeIterator.get(this);;){e.zpp_inner.zpp_inner.valmod();var t=e.zpp_inner;t.zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;try{e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}catch(n){e.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=e,e.zpp_inner=null;break}}return this},filter:function(n){if(null==n)throw haxe_Exception.thrown("Error: Cannot select elements of list with null");for(var e=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e<this.zpp_inner.user_length;){var t=this.at(e);try{n(t)?++e:this.remove(t)}catch(n){break}}return this},__class__:nape_shape_ShapeList,__properties__:{get_length:"get_length"}};var nape_shape_ShapeType=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ShapeType derp!")};t["nape.shape.ShapeType"]=nape_shape_ShapeType,nape_shape_ShapeType.__name__="nape.shape.ShapeType",nape_shape_ShapeType.__properties__={get_POLYGON:"get_POLYGON",get_CIRCLE:"get_CIRCLE"},nape_shape_ShapeType.get_CIRCLE=function(){return null==zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE=new nape_shape_ShapeType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE},nape_shape_ShapeType.get_POLYGON=function(){return null==zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON=new nape_shape_ShapeType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON},nape_shape_ShapeType.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE=new nape_shape_ShapeType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE?"CIRCLE":(null==zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON=new nape_shape_ShapeType,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON?"POLYGON":"")},__class__:nape_shape_ShapeType};var nape_shape_ValidationResult=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate ValidationResult derp!")};t["nape.shape.ValidationResult"]=nape_shape_ValidationResult,nape_shape_ValidationResult.__name__="nape.shape.ValidationResult",nape_shape_ValidationResult.__properties__={get_SELF_INTERSECTING:"get_SELF_INTERSECTING",get_CONCAVE:"get_CONCAVE",get_DEGENERATE:"get_DEGENERATE",get_VALID:"get_VALID"},nape_shape_ValidationResult.get_VALID=function(){return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID},nape_shape_ValidationResult.get_DEGENERATE=function(){return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE},nape_shape_ValidationResult.get_CONCAVE=function(){return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE},nape_shape_ValidationResult.get_SELF_INTERSECTING=function(){return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING},nape_shape_ValidationResult.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID?"VALID":(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE?"DEGENERATE":(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE?"CONCAVE":(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")))},__class__:nape_shape_ValidationResult};var nape_space_Broadphase=function(){if(!zpp_$nape_util_ZPP_$Flags.internal)throw haxe_Exception.thrown("Error: Cannot instantiate Broadphase derp!")};t["nape.space.Broadphase"]=nape_space_Broadphase,nape_space_Broadphase.__name__="nape.space.Broadphase",nape_space_Broadphase.__properties__={get_SWEEP_AND_PRUNE:"get_SWEEP_AND_PRUNE",get_DYNAMIC_AABB_TREE:"get_DYNAMIC_AABB_TREE"},nape_space_Broadphase.get_DYNAMIC_AABB_TREE=function(){return null==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE},nape_space_Broadphase.get_SWEEP_AND_PRUNE=function(){return null==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE},nape_space_Broadphase.prototype={toString:function(){return null==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE?"DYNAMIC_AABB_TREE":(null==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),this==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"")},__class__:nape_space_Broadphase};var nape_space_Space=function(n,e){if(this.zpp_inner=null,null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner=new zpp_$nape_space_ZPP_$Space(null==n?null:n.zpp_inner,e),this.zpp_inner.outer=this,null!=n&&n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t=n.zpp_inner;if(t._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var i,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(i=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=i:zpp_$nape_util_ZPP_$PubPool.poolVec2=i,zpp_$nape_util_ZPP_$PubPool.nextVec2=i,i.zpp_disp=!0,null!=(i=r).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i}};t["nape.space.Space"]=nape_space_Space,nape_space_Space.__name__="nape.space.Space",nape_space_Space.prototype={get_userData:function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},get_gravity:function(){return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},set_gravity:function(n){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Space::gravity cannot be null");if(null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),null!=(l=this.zpp_inner.wrap_gravity)&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),null==n)throw haxe_Exception.thrown("Error: Cannot assign null Vec2");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var e=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(r=n.zpp_inner)._validate&&r._validate();var t,i=n.zpp_inner.y;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((r=l.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=r._isimmutable&&r._isimmutable(),e!=e||i!=i)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(r=l.zpp_inner)._validate&&r._validate(),l.zpp_inner.x==e){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;null!=(r=l.zpp_inner)._validate&&r._validate(),t=l.zpp_inner.y==i}else t=!1;t||(l.zpp_inner.x=e,l.zpp_inner.y=i,null!=(r=l.zpp_inner)._invalidate&&r._invalidate(r));if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var s,a=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(s=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=s:zpp_$nape_util_ZPP_$PubPool.poolVec2=s,zpp_$nape_util_ZPP_$PubPool.nextVec2=s,s.zpp_disp=!0,null!=(s=a).outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s}return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},get_broadphase:function(){return this.zpp_inner.bphase.is_sweep?(null==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE):(null==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE)},get_sortContacts:function(){return this.zpp_inner.sortcontacts},set_sortContacts:function(n){return this.zpp_inner.sortcontacts=n,this.zpp_inner.sortcontacts},get_worldAngularDrag:function(){return this.zpp_inner.global_ang_drag},set_worldAngularDrag:function(n){var e=n;if(e!=e)throw haxe_Exception.thrown("Error: Space::worldAngularDrag cannot be NaN");return this.zpp_inner.global_ang_drag=e,this.zpp_inner.global_ang_drag},get_worldLinearDrag:function(){return this.zpp_inner.global_lin_drag},set_worldLinearDrag:function(n){var e=n;if(e!=e)throw haxe_Exception.thrown("Error: Space::worldLinearDrag cannot be NaN");return this.zpp_inner.global_lin_drag=e,this.zpp_inner.global_lin_drag},get_compounds:function(){return this.zpp_inner.wrap_compounds},get_bodies:function(){return this.zpp_inner.wrap_bodies},get_liveBodies:function(){return this.zpp_inner.wrap_live},get_constraints:function(){return this.zpp_inner.wrap_constraints},get_liveConstraints:function(){return this.zpp_inner.wrap_livecon},visitBodies:function(n){if(null==n)throw haxe_Exception.thrown("Error: lambda cannot be null for Space::visitBodies");(i=this.zpp_inner.wrap_bodies).zpp_inner.valmod();for(var e=nape_phys_BodyIterator.get(i);;){e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_phys_BodyIterator.zpp_pool,nape_phys_BodyIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}(i=this.zpp_inner.wrap_compounds).zpp_inner.valmod();for(e=nape_phys_CompoundIterator.get(i);;){var i;e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r;t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,e.zpp_inner.at(e.zpp_i++).visitBodies(n)}},visitConstraints:function(n){if(null==n)throw haxe_Exception.thrown("Error: lambda cannot be null for Space::visitConstraints");(i=this.zpp_inner.wrap_constraints).zpp_inner.valmod();for(var e=nape_constraint_ConstraintIterator.get(i);;){e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_constraint_ConstraintIterator.zpp_pool,nape_constraint_ConstraintIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,n(e.zpp_inner.at(e.zpp_i++))}(i=this.zpp_inner.wrap_compounds).zpp_inner.valmod();for(e=nape_phys_CompoundIterator.get(i);;){var i;e.zpp_inner.zpp_inner.valmod(),(i=e.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r;t=i.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<t?r=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,r=!1),!r)break;e.zpp_critical=!1,e.zpp_inner.at(e.zpp_i++).visitConstraints(n)}},visitCompounds:function(n){if(null==n)throw haxe_Exception.thrown("Error: lambda cannot be null for Space::visitCompounds");(t=this.zpp_inner.wrap_compounds).zpp_inner.valmod();for(var e=nape_phys_CompoundIterator.get(t);;){var t;e.zpp_inner.zpp_inner.valmod(),(t=e.zpp_inner).zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_phys_CompoundIterator.zpp_pool,nape_phys_CompoundIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l=e.zpp_inner.at(e.zpp_i++);n(l),l.visitCompounds(n)}},get_world:function(){return this.zpp_inner.__static},get_arbiters:function(){if(null==this.zpp_inner.wrap_arbiters){var n=new zpp_$nape_dynamics_ZPP_$SpaceArbiterList;n.space=this.zpp_inner,this.zpp_inner.wrap_arbiters=n}return this.zpp_inner.wrap_arbiters},get_listeners:function(){return this.zpp_inner.wrap_listeners},clear:function(){if(this.zpp_inner.midstep)throw haxe_Exception.thrown("Error: Space::clear() cannot be called during space step()");this.zpp_inner.clear()},step:function(n,e,t){if(null==t&&(t=10),null==e&&(e=10),n!=n)throw haxe_Exception.thrown("Error: deltaTime cannot be NaN");if(n<=0)throw haxe_Exception.thrown("Error: deltaTime must be strictly positive");if(e<=0)throw haxe_Exception.thrown("Error: must use atleast one velocity iteration");if(t<=0)throw haxe_Exception.thrown("Error: must use atleast one position iteration");this.zpp_inner.step(n,e,t)},get_timeStamp:function(){return this.zpp_inner.stamp},get_elapsedTime:function(){return this.zpp_inner.time},interactionType:function(n,e){if(null==n||null==e)throw haxe_Exception.thrown("Error: Cannot evaluate interaction type for null shapes");if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null)||null==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Cannot evaluate interaction type for shapes not part of a Body");if(1==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null).zpp_inner.type&&1==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null).zpp_inner.type)return null;if((null!=n.zpp_inner.body?n.zpp_inner.body.outer:null)==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null))return null;var t,i=n.zpp_inner,r=e.zpp_inner,l=this.zpp_inner,s=i.body,a=r.body;t=!1;for(var o,p=s.constraints.head;null!=p;){var h=p.elt;if(h.ignore&&h.pair_exists(s.id,a.id)){t=!0;break}p=p.next}if(t)b=!1;else{for(var u=i;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var _,c=null==u?null:u.group;if(null==c)_=!1;else{for(u=r;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var d=null==u?null:u.group;if(null==d)_=!1;else{for(var f=!1;null!=c&&null!=d;){if(c==d){f=c.ignore;break}c.depth<d.depth?d=d.group:c=c.group}_=f}}b=!_}if(b){if(i.sensorEnabled||r.sensorEnabled){l=i.filter;var x=r.filter;b=0!=(l.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&l.sensorGroup)}else b=!1;if(b)o=2;else{var b;if(i.fluidEnabled||r.fluidEnabled){l=i.filter,x=r.filter;b=0!=(l.fluidMask&x.fluidGroup)&&0!=(x.fluidMask&l.fluidGroup)}else b=!1;if(!b||0==s.imass&&0==a.imass&&0==s.iinertia&&0==a.iinertia){l=i.filter,x=r.filter;o=0==(l.collisionMask&x.collisionGroup)||0==(x.collisionMask&l.collisionGroup)||0==s.imass&&0==a.imass&&0==s.iinertia&&0==a.iinertia?-1:1}else o=0}}else o=-1;switch(o){case 0:return null==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID;case 1:return null==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION;case 2:return null==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType,zpp_$nape_util_ZPP_$Flags.internal=!1),zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR;default:return null}},shapesUnderPoint:function(n,e,t){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate shapes under a null point :)");var i=this.zpp_inner;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var r=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var l=i.shapesUnderPoint(r,n.zpp_inner.y,null==e?null:e.zpp_inner,t);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return l},bodiesUnderPoint:function(n,e,t){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate objects under a null point :)");var i=this.zpp_inner;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var r=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var l=i.bodiesUnderPoint(r,n.zpp_inner.y,null==e?null:e.zpp_inner,t);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s;if((s=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return l},shapesInAABB:function(n,e,t,i,r){if(null==t&&(t=!0),null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Error: Cannot evaluate shapes in a null AABB :)");var l,s;(null!=(s=n.zpp_inner)._validate&&s._validate(),(s=n.zpp_inner).maxx-s.minx!=0)?(null!=(s=n.zpp_inner)._validate&&s._validate(),l=(s=n.zpp_inner).maxy-s.miny==0):l=!0;if(l)throw haxe_Exception.thrown("Error: Cannot evaluate shapes in degenerate AABB :/");return this.zpp_inner.shapesInAABB(n,t,e,null==i?null:i.zpp_inner,r)},bodiesInAABB:function(n,e,t,i,r){if(null==t&&(t=!0),null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Error: Cannot evaluate objects in a null AABB :)");var l,s;(null!=(s=n.zpp_inner)._validate&&s._validate(),(s=n.zpp_inner).maxx-s.minx!=0)?(null!=(s=n.zpp_inner)._validate&&s._validate(),l=(s=n.zpp_inner).maxy-s.miny==0):l=!0;if(l)throw haxe_Exception.thrown("Error: Cannot evaluate objects in degenerate AABB :/");return this.zpp_inner.bodiesInAABB(n,t,e,null==i?null:i.zpp_inner,r)},shapesInCircle:function(n,e,t,i,r){if(null==t&&(t=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate shapes at null circle :)");if(e!=e)throw haxe_Exception.thrown("Error: Circle radius cannot be NaN");if(e<=0)throw haxe_Exception.thrown("Error: Circle radius must be strictly positive");var l=this.zpp_inner.shapesInCircle(n,e,t,null==i?null:i.zpp_inner,r);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s=n.zpp_inner;if(s._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return l},bodiesInCircle:function(n,e,t,i,r){if(null==t&&(t=!1),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate objects at null circle :)");if(e!=e)throw haxe_Exception.thrown("Error: Circle radius cannot be NaN");if(e<=0)throw haxe_Exception.thrown("Error: Circle radius must be strictly positive");var l=this.zpp_inner.bodiesInCircle(n,e,t,null==i?null:i.zpp_inner,r);if(n.zpp_inner.weak){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var s=n.zpp_inner;if(s._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=s._isimmutable&&s._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var a,o=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(a=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=a:zpp_$nape_util_ZPP_$PubPool.poolVec2=a,zpp_$nape_util_ZPP_$PubPool.nextVec2=a,a.zpp_disp=!0,null!=(a=o).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a}return l},shapesInShape:function(n,e,t,i){if(null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Error: Cannot evaluate shapes in a null shapes :)");if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Query shape needs to be inside a Body to be well defined :)");if(1==n.zpp_inner.type){var r=n.zpp_inner.polygon.valid();if(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),r!=zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID)throw haxe_Exception.thrown("Error: Polygon query shape is invalid : "+r.toString())}return this.zpp_inner.shapesInShape(n.zpp_inner,e,null==t?null:t.zpp_inner,i)},bodiesInShape:function(n,e,t,i){if(null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Error: Cannot evaluate bodies in a null shapes :)");if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Query shape needs to be inside a Body to be well defined :)");if(1==n.zpp_inner.type){var r=n.zpp_inner.polygon.valid();if(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),r!=zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID)throw haxe_Exception.thrown("Error: Polygon query shape is invalid : "+r.toString())}return this.zpp_inner.bodiesInShape(n.zpp_inner,e,null==t?null:t.zpp_inner,i)},shapesInBody:function(n,e,t){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate shapes in null body");var i=null==t?new nape_shape_ShapeList:t;(l=n.zpp_inner.wrap_shapes).zpp_inner.valmod();for(var r=nape_shape_ShapeIterator.get(l);;){var l;r.zpp_inner.zpp_inner.valmod(),(l=r.zpp_inner).zpp_inner.valmod(),l.zpp_inner.zip_length&&(l.zpp_inner.zip_length=!1,l.zpp_inner.user_length=l.zpp_inner.inner.length);var s,a=l.zpp_inner.user_length;if(r.zpp_critical=!0,r.zpp_i<a?s=!0:(r.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=r,r.zpp_inner=null,s=!1),!s)break;r.zpp_critical=!1;var o=r.zpp_inner.at(r.zpp_i++);this.shapesInShape(o,!1,e,i)}return i},bodiesInBody:function(n,e,t){if(null==n)throw haxe_Exception.thrown("Error: Cannot evaluate shapes in null body");var i=null==t?new nape_phys_BodyList:t;(l=n.zpp_inner.wrap_shapes).zpp_inner.valmod();for(var r=nape_shape_ShapeIterator.get(l);;){var l;r.zpp_inner.zpp_inner.valmod(),(l=r.zpp_inner).zpp_inner.valmod(),l.zpp_inner.zip_length&&(l.zpp_inner.zip_length=!1,l.zpp_inner.user_length=l.zpp_inner.inner.length);var s,a=l.zpp_inner.user_length;if(r.zpp_critical=!0,r.zpp_i<a?s=!0:(r.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=r,r.zpp_inner=null,s=!1),!s)break;r.zpp_critical=!1;var o=r.zpp_inner.at(r.zpp_i++);this.bodiesInShape(o,!1,e,i)}return i},convexCast:function(n,e,t,i){if(null==t&&(t=!1),null==n)throw haxe_Exception.thrown("Error: Cannot cast null shape :)");if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Shape must belong to a body to be cast.");if(e<0||e!=e)throw haxe_Exception.thrown("Error: deltaTime must be positive");return this.zpp_inner.convexCast(n.zpp_inner,e,i,t)},convexMultiCast:function(n,e,t,i,r){if(null==t&&(t=!1),null==n)throw haxe_Exception.thrown("Error: Cannot cast null shape :)");if(null==(null!=n.zpp_inner.body?n.zpp_inner.body.outer:null))throw haxe_Exception.thrown("Error: Shape must belong to a body to be cast.");if(e<0||e!=e)throw haxe_Exception.thrown("Error: deltaTime must be positive");return this.zpp_inner.convexMultiCast(n.zpp_inner,e,i,t,r)},rayCast:function(n,e,t){if(null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Error: Cannot cast null ray :)");return this.zpp_inner.rayCast(n,e,t)},rayMultiCast:function(n,e,t,i){if(null==e&&(e=!1),null==n)throw haxe_Exception.thrown("Error: Cannot cast null ray :)");return this.zpp_inner.rayMultiCast(n,e,t,i)},__class__:nape_space_Space,__properties__:{get_elapsedTime:"get_elapsedTime",get_timeStamp:"get_timeStamp",get_listeners:"get_listeners",get_arbiters:"get_arbiters",get_world:"get_world",get_liveConstraints:"get_liveConstraints",get_constraints:"get_constraints",get_liveBodies:"get_liveBodies",get_bodies:"get_bodies",get_compounds:"get_compounds",set_worldLinearDrag:"set_worldLinearDrag",get_worldLinearDrag:"get_worldLinearDrag",set_worldAngularDrag:"set_worldAngularDrag",get_worldAngularDrag:"get_worldAngularDrag",set_sortContacts:"set_sortContacts",get_sortContacts:"get_sortContacts",get_broadphase:"get_broadphase",set_gravity:"set_gravity",get_gravity:"get_gravity",get_userData:"get_userData"}};var nape_util_Debug=function(){};t["nape.util.Debug"]=nape_util_Debug,nape_util_Debug.__name__="nape.util.Debug",nape_util_Debug.version=function(){return"Nape 2.0.19"},nape_util_Debug.clearObjectPools=function(){for(;null!=nape_shape_EdgeIterator.zpp_pool;){var n=nape_shape_EdgeIterator.zpp_pool.zpp_next;nape_shape_EdgeIterator.zpp_pool.zpp_next=null,nape_shape_EdgeIterator.zpp_pool=n}for(;null!=nape_shape_ShapeIterator.zpp_pool;){n=nape_shape_ShapeIterator.zpp_pool.zpp_next;nape_shape_ShapeIterator.zpp_pool.zpp_next=null,nape_shape_ShapeIterator.zpp_pool=n}for(;null!=nape_phys_BodyIterator.zpp_pool;){n=nape_phys_BodyIterator.zpp_pool.zpp_next;nape_phys_BodyIterator.zpp_pool.zpp_next=null,nape_phys_BodyIterator.zpp_pool=n}for(;null!=nape_phys_CompoundIterator.zpp_pool;){n=nape_phys_CompoundIterator.zpp_pool.zpp_next;nape_phys_CompoundIterator.zpp_pool.zpp_next=null,nape_phys_CompoundIterator.zpp_pool=n}for(;null!=nape_phys_InteractorIterator.zpp_pool;){n=nape_phys_InteractorIterator.zpp_pool.zpp_next;nape_phys_InteractorIterator.zpp_pool.zpp_next=null,nape_phys_InteractorIterator.zpp_pool=n}for(;null!=nape_geom_ConvexResultIterator.zpp_pool;){n=nape_geom_ConvexResultIterator.zpp_pool.zpp_next;nape_geom_ConvexResultIterator.zpp_pool.zpp_next=null,nape_geom_ConvexResultIterator.zpp_pool=n}for(;null!=nape_geom_GeomPolyIterator.zpp_pool;){n=nape_geom_GeomPolyIterator.zpp_pool.zpp_next;nape_geom_GeomPolyIterator.zpp_pool.zpp_next=null,nape_geom_GeomPolyIterator.zpp_pool=n}for(;null!=nape_geom_RayResultIterator.zpp_pool;){n=nape_geom_RayResultIterator.zpp_pool.zpp_next;nape_geom_RayResultIterator.zpp_pool.zpp_next=null,nape_geom_RayResultIterator.zpp_pool=n}for(;null!=nape_geom_Vec2Iterator.zpp_pool;){n=nape_geom_Vec2Iterator.zpp_pool.zpp_next;nape_geom_Vec2Iterator.zpp_pool.zpp_next=null,nape_geom_Vec2Iterator.zpp_pool=n}for(;null!=nape_dynamics_ArbiterIterator.zpp_pool;){n=nape_dynamics_ArbiterIterator.zpp_pool.zpp_next;nape_dynamics_ArbiterIterator.zpp_pool.zpp_next=null,nape_dynamics_ArbiterIterator.zpp_pool=n}for(;null!=nape_dynamics_ContactIterator.zpp_pool;){n=nape_dynamics_ContactIterator.zpp_pool.zpp_next;nape_dynamics_ContactIterator.zpp_pool.zpp_next=null,nape_dynamics_ContactIterator.zpp_pool=n}for(;null!=nape_dynamics_InteractionGroupIterator.zpp_pool;){n=nape_dynamics_InteractionGroupIterator.zpp_pool.zpp_next;nape_dynamics_InteractionGroupIterator.zpp_pool.zpp_next=null,nape_dynamics_InteractionGroupIterator.zpp_pool=n}for(;null!=nape_constraint_ConstraintIterator.zpp_pool;){n=nape_constraint_ConstraintIterator.zpp_pool.zpp_next;nape_constraint_ConstraintIterator.zpp_pool.zpp_next=null,nape_constraint_ConstraintIterator.zpp_pool=n}for(;null!=nape_callbacks_CbTypeIterator.zpp_pool;){n=nape_callbacks_CbTypeIterator.zpp_pool.zpp_next;nape_callbacks_CbTypeIterator.zpp_pool.zpp_next=null,nape_callbacks_CbTypeIterator.zpp_pool=n}for(;null!=nape_callbacks_ListenerIterator.zpp_pool;){n=nape_callbacks_ListenerIterator.zpp_pool.zpp_next;nape_callbacks_ListenerIterator.zpp_pool.zpp_next=null,nape_callbacks_ListenerIterator.zpp_pool=n}for(;null!=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;){n=zpp_$nape_space_ZPP_$AABBNode.zpp_pool.next;zpp_$nape_space_ZPP_$AABBNode.zpp_pool.next=null,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=n}for(;null!=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;){n=zpp_$nape_space_ZPP_$AABBPair.zpp_pool.next;zpp_$nape_space_ZPP_$AABBPair.zpp_pool.next=null,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=n}for(;null!=zpp_$nape_space_ZPP_$SweepData.zpp_pool;){n=zpp_$nape_space_ZPP_$SweepData.zpp_pool.next;zpp_$nape_space_ZPP_$SweepData.zpp_pool.next=null,zpp_$nape_space_ZPP_$SweepData.zpp_pool=n}for(;null!=zpp_$nape_shape_ZPP_$Edge.zpp_pool;){n=zpp_$nape_shape_ZPP_$Edge.zpp_pool.next;zpp_$nape_shape_ZPP_$Edge.zpp_pool.next=null,zpp_$nape_shape_ZPP_$Edge.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=n}for(;null!=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool;){n=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool.next;zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool.next=null,zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=n}for(;null!=zpp_$nape_phys_ZPP_$Material.zpp_pool;){n=zpp_$nape_phys_ZPP_$Material.zpp_pool.next;zpp_$nape_phys_ZPP_$Material.zpp_pool.next=null,zpp_$nape_phys_ZPP_$Material.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$AABB.zpp_pool;){n=zpp_$nape_geom_ZPP_$AABB.zpp_pool.next;zpp_$nape_geom_ZPP_$AABB.zpp_pool.next=null,zpp_$nape_geom_ZPP_$AABB.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=n}for(;null!=zpp_$nape_space_ZPP_$Island.zpp_pool;){n=zpp_$nape_space_ZPP_$Island.zpp_pool.next;zpp_$nape_space_ZPP_$Island.zpp_pool.next=null,zpp_$nape_space_ZPP_$Island.zpp_pool=n}for(;null!=zpp_$nape_space_ZPP_$Component.zpp_pool;){n=zpp_$nape_space_ZPP_$Component.zpp_pool.next;zpp_$nape_space_ZPP_$Component.zpp_pool.next=null,zpp_$nape_space_ZPP_$Component.zpp_pool=n}for(;null!=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool;){n=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool.next;zpp_$nape_space_ZPP_$CallbackSet.zpp_pool.next=null,zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$CutVert.zpp_pool;){n=zpp_$nape_geom_ZPP_$CutVert.zpp_pool.next;zpp_$nape_geom_ZPP_$CutVert.zpp_pool.next=null,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$CutInt.zpp_pool;){n=zpp_$nape_geom_ZPP_$CutInt.zpp_pool.next;zpp_$nape_geom_ZPP_$CutInt.zpp_pool.next=null,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool;){n=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool.next;zpp_$nape_geom_ZPP_$GeomVert.zpp_pool.next=null,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool;){n=zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool.next;zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool.next=null,zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$Mat23.zpp_pool;){n=zpp_$nape_geom_ZPP_$Mat23.zpp_pool.next;zpp_$nape_geom_ZPP_$Mat23.zpp_pool.next=null,zpp_$nape_geom_ZPP_$Mat23.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool;){n=zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool.next;zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool.next=null,zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$MarchPair.zpp_pool;){n=zpp_$nape_geom_ZPP_$MarchPair.zpp_pool.next;zpp_$nape_geom_ZPP_$MarchPair.zpp_pool.next=null,zpp_$nape_geom_ZPP_$MarchPair.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool;){n=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool.next;zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool.next=null,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool;){n=zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool.next;zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool.next=null,zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool;){n=zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool.next;zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool.next=null,zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool;){n=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool.next;zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool.next=null,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool;){n=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool.next;zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool.next=null,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool;){n=zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool.next;zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool.next=null,zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool;){n=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool.next;zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool.next=null,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=n}for(;null!=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool;){n=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool.next;zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool.next=null,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;){n=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool.next;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool.next=null,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;){n=zpp_$nape_geom_ZPP_$Vec2.zpp_pool.next;zpp_$nape_geom_ZPP_$Vec2.zpp_pool.next=null,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=n}for(;null!=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool;){n=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool.next;zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool.next=null,zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool=n}for(;null!=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;){n=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool.next;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool.next=null,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=n}for(;null!=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;){n=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool.next;zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool.next=null,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=n}for(;null!=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;){n=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool.next;zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool.next=null,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=n}for(;null!=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;){n=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool.next;zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool.next=null,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=n}for(;null!=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;){n=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool.next;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool.next=null,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=n}for(;null!=zpp_$nape_callbacks_ZPP_$Callback.zpp_pool;){n=zpp_$nape_callbacks_ZPP_$Callback.zpp_pool.next;zpp_$nape_callbacks_ZPP_$Callback.zpp_pool.next=null,zpp_$nape_callbacks_ZPP_$Callback.zpp_pool=n}for(;null!=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;){n=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool.next;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool.next=null,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=n}for(;null!=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;){n=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool.next;zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool.next=null,zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;){n=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool.next;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool.next=null,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool.next;zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool;){n=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool.next;zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=n}for(;null!=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool;){n=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool.next;zpp_$nape_util_ZNPNode_$RayResult.zpp_pool.next=null,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=n}for(;null!=zpp_$nape_util_ZPP_$PubPool.poolGeomPoly;){n=zpp_$nape_util_ZPP_$PubPool.poolGeomPoly.zpp_pool;zpp_$nape_util_ZPP_$PubPool.poolGeomPoly.zpp_pool=null,zpp_$nape_util_ZPP_$PubPool.poolGeomPoly=n}for(;null!=zpp_$nape_util_ZPP_$PubPool.poolVec3;){n=zpp_$nape_util_ZPP_$PubPool.poolVec3.zpp_pool;zpp_$nape_util_ZPP_$PubPool.poolVec3.zpp_pool=null,zpp_$nape_util_ZPP_$PubPool.poolVec3=n}for(;null!=zpp_$nape_util_ZPP_$PubPool.poolVec2;){n=zpp_$nape_util_ZPP_$PubPool.poolVec2.zpp_pool;zpp_$nape_util_ZPP_$PubPool.poolVec2.zpp_pool=null,zpp_$nape_util_ZPP_$PubPool.poolVec2=n}};var poly2tri_AdvancingFront=function(n,e){this.search_node=this.head=n,this.tail=e};t["poly2tri.AdvancingFront"]=poly2tri_AdvancingFront,poly2tri_AdvancingFront.__name__="poly2tri.AdvancingFront",poly2tri_AdvancingFront.prototype={reset:function(n,e){this.search_node=this.head=n,this.tail=e},locateNode:function(n){var e=this.search_node,t=null;if(n<e.value){for(;null!=(e=e.prev);)if(n>=e.value){this.search_node=e,t=e;break}}else for(;null!=(e=e.next);)if(n<e.value){this.search_node=e.prev,t=e.prev;break}return t},locatePoint:function(n){var e=n.x,t=this.search_node,i=t.point.x;if(e==i){var r=t.point;if(n.x!=r.x||n.y!=r.y){r=t.prev.point;if(n.x==r.x&&n.y==r.y)t=t.prev;else{r=t.next.point;if(n.x!=r.x||n.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(e<i)for(;null!=(t=t.prev);){r=t.point;if(n.x==r.x&&n.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(n.x==r.x&&n.y==r.y)break}return null!=t&&(this.search_node=t),t},__class__:poly2tri_AdvancingFront};var poly2tri_Basin=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};t["poly2tri.Basin"]=poly2tri_Basin,poly2tri_Basin.__name__="poly2tri.Basin",poly2tri_Basin.prototype={clear:function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1},__class__:poly2tri_Basin};var poly2tri_Constants=function(){};t["poly2tri.Constants"]=poly2tri_Constants,poly2tri_Constants.__name__="poly2tri.Constants";var poly2tri_Edge=function(n,e){if(null==n||null==e)throw haxe_Exception.thrown("Edge::new p1 or p2 is null");var t=!1;if(n.y>e.y)t=!0;else if(n.y==e.y){if(n.x==e.x)throw haxe_Exception.thrown("Edge::repeat points "+Std.string(n));t=n.x>e.x}t?(this.q=n,this.p=e):(this.p=n,this.q=e);var i=this.q;null==i.edge_list&&(i.edge_list=poly2tri_Pool.getEdgeArray()),i.edge_list.push(this)};t["poly2tri.Edge"]=poly2tri_Edge,poly2tri_Edge.__name__="poly2tri.Edge",poly2tri_Edge.prototype={reset:function(n,e){if(null==n||null==e)throw haxe_Exception.thrown("Edge::new p1 or p2 is null");var t=!1;if(n.y>e.y)t=!0;else if(n.y==e.y){if(n.x==e.x)throw haxe_Exception.thrown("Edge::repeat points "+Std.string(n));t=n.x>e.x}t?(this.q=n,this.p=e):(this.p=n,this.q=e);var i=this.q;null==i.edge_list&&(i.edge_list=poly2tri_Pool.getEdgeArray()),i.edge_list.push(this)},toString:function(){return"Edge("+Std.string(this.p)+", "+Std.string(this.q)+")"},__class__:poly2tri_Edge};var poly2tri_EdgeEvent=function(){this.right=!1,this.constrained_edge=null};t["poly2tri.EdgeEvent"]=poly2tri_EdgeEvent,poly2tri_EdgeEvent.__name__="poly2tri.EdgeEvent",poly2tri_EdgeEvent.prototype={clear:function(){this.constrained_edge=null,this.right=!1},__class__:poly2tri_EdgeEvent};var poly2tri_Node=function(n,e){this.point=n,this.triangle=e,this.value=this.point.x};t["poly2tri.Node"]=poly2tri_Node,poly2tri_Node.__name__="poly2tri.Node",poly2tri_Node.prototype={reset:function(n,e){this.point=n,this.triangle=e,this.value=this.point.x,this.next=null,this.prev=null},getHoleAngle:function(){var n=this.next.point.x-this.point.x,e=this.next.point.y-this.point.y,t=this.prev.point.x-this.point.x,i=this.prev.point.y-this.point.y;return Math.atan2(n*i-e*t,n*t+e*i)},getBasinAngle:function(){return Math.atan2(this.point.y-this.next.next.point.y,this.point.x-this.next.next.point.x)},__class__:poly2tri_Node};var poly2tri_Orientation=function(){};t["poly2tri.Orientation"]=poly2tri_Orientation,poly2tri_Orientation.__name__="poly2tri.Orientation",poly2tri_Orientation.orient2d=function(n,e,t){var i=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x);return i>-poly2tri_Constants.EPSILON&&i<poly2tri_Constants.EPSILON?0:i>0?-1:1};var poly2tri_Point=function(n,e){this.x=n,this.y=e,this.id=poly2tri_Point.C_ID,poly2tri_Point.C_ID++};t["poly2tri.Point"]=poly2tri_Point,poly2tri_Point.__name__="poly2tri.Point",poly2tri_Point.sortPoints=function(n){poly2tri_SortPoints.rec(n,0,n.length)},poly2tri_Point.cmpPoints=function(n,e){var t=0,i=n.y-e.y;return 0==i&&(i=n.x-e.x),i<0?t=-1:i>0&&(t=1),t},poly2tri_Point.prototype={reset:function(n,e){this.x=n,this.y=e,null==this.edge_list&&(this.edge_list=poly2tri_Pool.getEdgeArray());var t=this.edge_list;t.length>0&&(0!=t.length&&(t.length>0?t.splice(0,t.length):t[-1]=null))},get_edge_list:function(){return null==this.edge_list&&(this.edge_list=poly2tri_Pool.getEdgeArray()),this.edge_list},equals:function(n){return this.x==n.x&&this.y==n.y},toString:function(){return"Point("+this.x+", "+this.y+")"},__class__:poly2tri_Point,__properties__:{get_edge_list:"get_edge_list"}};var poly2tri_Pool=function(){};t["poly2tri.Pool"]=poly2tri_Pool,poly2tri_Pool.__name__="poly2tri.Pool",poly2tri_Pool.recycleAll=function(){poly2tri_Pool.pointArrayIndex=0},poly2tri_Pool.clearAll=function(){poly2tri_Pool.pointArrayIndex=0,poly2tri_Pool.pointArrayPool=[]},poly2tri_Pool.getPointArray=function(){if(poly2tri_Pool.enabled){if(poly2tri_Pool.pointArrayIndex==poly2tri_Pool.pointArrayPool.length){var n=[];return poly2tri_Pool.pointArrayIndex++,poly2tri_Pool.pointArrayPool.push(n),n}return(n=poly2tri_Pool.pointArrayPool[poly2tri_Pool.pointArrayIndex]).length>0&&0!=n.length&&(n.length>0?n.splice(0,n.length):n[-1]=null),poly2tri_Pool.pointArrayIndex++,n}return[]},poly2tri_Pool.getTriangleArray=function(){if(poly2tri_Pool.enabled){if(poly2tri_Pool.triangleArrayIndex==poly2tri_Pool.triangleArrayPool.length){var n=[];return poly2tri_Pool.triangleArrayIndex++,poly2tri_Pool.triangleArrayPool.push(n),n}return(n=poly2tri_Pool.triangleArrayPool[poly2tri_Pool.triangleArrayIndex]).length>0&&0!=n.length&&(n.length>0?n.splice(0,n.length):n[-1]=null),poly2tri_Pool.triangleArrayIndex++,n}return[]},poly2tri_Pool.getEdgeArray=function(){if(poly2tri_Pool.enabled){if(poly2tri_Pool.edgeArrayIndex==poly2tri_Pool.edgeArrayPool.length){var n=[];return poly2tri_Pool.edgeArrayIndex++,poly2tri_Pool.edgeArrayPool.push(n),n}return(n=poly2tri_Pool.edgeArrayPool[poly2tri_Pool.edgeArrayIndex]).length>0&&0!=n.length&&(n.length>0?n.splice(0,n.length):n[-1]=null),poly2tri_Pool.edgeArrayIndex++,n}return[]},poly2tri_Pool.getEdge=function(n,e){if(poly2tri_Pool.enabled){if(poly2tri_Pool.edgeIndex==poly2tri_Pool.edgePool.length){var t=new poly2tri_Edge(n,e);return poly2tri_Pool.edgeIndex++,poly2tri_Pool.edgePool.push(t),t}t=poly2tri_Pool.edgePool[poly2tri_Pool.edgeIndex];if(null==n||null==e)throw haxe_Exception.thrown("Edge::new p1 or p2 is null");var i=!1;if(n.y>e.y)i=!0;else if(n.y==e.y){if(n.x==e.x)throw haxe_Exception.thrown("Edge::repeat points "+Std.string(n));i=n.x>e.x}i?(t.q=n,t.p=e):(t.p=n,t.q=e);var r=t.q;return null==r.edge_list&&(r.edge_list=poly2tri_Pool.getEdgeArray()),r.edge_list.push(t),poly2tri_Pool.edgeIndex++,t}return new poly2tri_Edge(n,e)},poly2tri_Pool.getPoint=function(n,e){if(poly2tri_Pool.enabled){if(poly2tri_Pool.pointIndex==poly2tri_Pool.pointPool.length){var t=new poly2tri_Point(n,e);return poly2tri_Pool.pointIndex++,poly2tri_Pool.pointPool.push(t),t}(t=poly2tri_Pool.pointPool[poly2tri_Pool.pointIndex]).x=n,t.y=e,null==t.edge_list&&(t.edge_list=poly2tri_Pool.getEdgeArray());var i=t.edge_list;return i.length>0&&0!=i.length&&(i.length>0?i.splice(0,i.length):i[-1]=null),poly2tri_Pool.pointIndex++,t}return new poly2tri_Point(n,e)},poly2tri_Pool.getTriangle=function(n,e,t,i,r){if(null==r&&(r=!0),null==i&&(i=!1),poly2tri_Pool.enabled){if(poly2tri_Pool.triangleIndex==poly2tri_Pool.trianglePool.length){var l=new poly2tri_Triangle(n,e,t,i,r);return poly2tri_Pool.triangleIndex++,poly2tri_Pool.trianglePool.push(l),l}l=poly2tri_Pool.trianglePool[poly2tri_Pool.triangleIndex];var s,a=e,o=t,p=i,h=r;if(null==h&&(h=!0),null==p&&(p=!1),p&&1==((s=(n.x-o.x)*(a.y-o.y)-(n.y-o.y)*(a.x-o.x))>-poly2tri_Constants.EPSILON&&s<poly2tri_Constants.EPSILON?0:s>0?-1:1)){var u=o;o=a,a=u}if(!!h&&1!=((s=(o.x-n.x)*(a.y-n.y)-(o.y-n.y)*(a.x-n.x))>-poly2tri_Constants.EPSILON&&s<poly2tri_Constants.EPSILON?0:s>0?-1:1))throw haxe_Exception.thrown("Triangle::Triangle must defined with Orientation.CW");return null==l.points?l.points=[n,a,o]:(l.points[0]=n,l.points[1]=n,l.points[2]=n),null==l.neighbors?l.neighbors=[null,null,null]:(l.neighbors[0]=null,l.neighbors[1]=null,l.neighbors[2]=null),null==l.constrained_edge?l.constrained_edge=[!1,!1,!1]:(l.constrained_edge[0]=!1,l.constrained_edge[1]=!1,l.constrained_edge[2]=!1),null==l.delaunay_edge?l.delaunay_edge=[!1,!1,!1]:(l.delaunay_edge[0]=!1,l.delaunay_edge[1]=!1,l.delaunay_edge[2]=!1),poly2tri_Pool.triangleIndex++,l}return new poly2tri_Triangle(n,e,t,i,r)},poly2tri_Pool.getNode=function(n,e){if(poly2tri_Pool.enabled){if(poly2tri_Pool.nodeIndex==poly2tri_Pool.nodePool.length){var t=new poly2tri_Node(n,e);return poly2tri_Pool.nodeIndex++,poly2tri_Pool.nodePool.push(t),t}return(t=poly2tri_Pool.nodePool[poly2tri_Pool.nodeIndex]).point=n,t.triangle=e,t.value=t.point.x,t.next=null,t.prev=null,poly2tri_Pool.nodeIndex++,t}return new poly2tri_Node(n,e)},poly2tri_Pool.setArrayLength=function(n,e){n.length!=e&&(n.length>e?n.splice(e,n.length-e):n[e-1]=null)};var poly2tri_SortPoints=function(){};t["poly2tri.SortPoints"]=poly2tri_SortPoints,poly2tri_SortPoints.__name__="poly2tri.SortPoints",poly2tri_SortPoints.cmp=function(n,e){var t=0,i=n.y-e.y;return 0==i&&(i=n.x-e.x),i<0?t=-1:i>0&&(t=1),t},poly2tri_SortPoints.sort=function(n){poly2tri_SortPoints.rec(n,0,n.length)},poly2tri_SortPoints.rec=function(n,e,t){var i=e+t>>1;if(t-e<12){if(t<=e)return;for(var r=e+1,l=t;r<l;)for(var s=r++;s>e;){var a=n[s],o=n[s-1],p=0,h=a.y-o.y;if(0==h&&(h=a.x-o.x),h<0?p=-1:h>0&&(p=1),!(p<0))break;var u=s-1,_=n[u];n[u]=n[s],n[s]=_,--s}}else poly2tri_SortPoints.rec(n,e,i),poly2tri_SortPoints.rec(n,i,t),poly2tri_SortPoints.doMerge(n,e,i,t,i-e,t-i)},poly2tri_SortPoints.doMerge=function(n,e,t,i,r,l){var s,a,o,p;if(0!=r&&0!=l)if(r+l!=2){if(r>l){s=e+(o=r>>1);for(var h=i-(u=t);h>0;){O=n[c=u+(_=h>>1)],C=n[s],E=0;0==(w=O.y-C.y)&&(w=O.x-C.x),w<0?E=-1:w>0&&(E=1),E<0?(u=c+1,h=h-_-1):h=_}p=(a=u)-t}else{a=t+(p=l>>1);var u,_,c;for(h=t-(u=e);h>0;){c=u+(_=h>>1);O=n[a],C=n[c],E=0;0==(w=O.y-C.y)&&(w=O.x-C.x),w<0?E=-1:w>0&&(E=1),E<0?h=_:(u=c+1,h=h-_-1)}o=(s=u)-e}var d;if(s!=t&&t!=a){for(var f=a-s,x=t-s;0!=x;){var b=f%x;f=x,x=b}for(d=f;0!=d--;){for(var y=n[s+d],v=t-s,m=s+d,g=s+d+v;g!=s+d;)n[m]=n[g],m=g,a-g>v?g+=v:g=s+(v-(a-g));n[m]=y}}var z=s+p;poly2tri_SortPoints.doMerge(n,e,s,z,o,p),poly2tri_SortPoints.doMerge(n,z,a,i,r-o,l-p)}else{var w,O=n[t],C=n[e],E=0;if(0==(w=O.y-C.y)&&(w=O.x-C.x),w<0?E=-1:w>0&&(E=1),E<0){var U=n[t];n[t]=n[e],n[e]=U}}},poly2tri_SortPoints.rotate=function(n,e,t,i){if(e!=t&&t!=i){for(var r=i-e,l=t-e;0!=l;){var s=r%l;r=l,l=s}for(l=r;0!=l--;){for(var a=n[e+l],o=t-e,p=e+l,h=e+l+o;h!=e+l;)n[p]=n[h],p=h,i-h>o?h+=o:h=e+(o-(i-h));n[p]=a}}},poly2tri_SortPoints.gcd=function(n,e){for(;0!=e;){var t=n%e;n=e,e=t}return n},poly2tri_SortPoints.upper=function(n,e,t,i){for(var r,l,s=t-e;s>0;){l=e+(r=s>>1);var a=n[i],o=n[l],p=0,h=a.y-o.y;0==h&&(h=a.x-o.x),h<0?p=-1:h>0&&(p=1),p<0?s=r:(e=l+1,s=s-r-1)}return e},poly2tri_SortPoints.lower=function(n,e,t,i){for(var r,l,s=t-e;s>0;){var a=n[l=e+(r=s>>1)],o=n[i],p=0,h=a.y-o.y;0==h&&(h=a.x-o.x),h<0?p=-1:h>0&&(p=1),p<0?(e=l+1,s=s-r-1):s=r}return e},poly2tri_SortPoints.swap=function(n,e,t){var i=n[e];n[e]=n[t],n[t]=i},poly2tri_SortPoints.compare=function(n,e,t){var i=n[e],r=n[t],l=0,s=i.y-r.y;return 0==s&&(s=i.x-r.x),s<0?l=-1:s>0&&(l=1),l};var poly2tri_Sweep=function(n){this.context=n};t["poly2tri.Sweep"]=poly2tri_Sweep,poly2tri_Sweep.__name__="poly2tri.Sweep",poly2tri_Sweep.nextFlipPoint=function(n,e,t,i){var r=(e.x-n.x)*(i.y-n.y)-(e.y-n.y)*(i.x-n.x),l=r>-poly2tri_Constants.EPSILON&&r<poly2tri_Constants.EPSILON?0:r>0?-1:1;if(1==l){var s=t.points;null==(_=1)&&(_=0);for(var a=_,o=!1,p=0;p<3;){for(var h=p++;a<0;)a+=3;for(;a>2;)a-=3;var u=t.points[h];if(i.x==u.x&&i.y==u.y){o=!0;break}++a}if(!o)throw haxe_Exception.thrown("Triangle::Point not in triangle");return s[a]}if(-1==l){var _;s=t.points;null==(_=-1)&&(_=0);for(a=_,o=!1,p=0;p<3;){for(h=p++;a<0;)a+=3;for(;a>2;)a-=3;u=t.points[h];if(i.x==u.x&&i.y==u.y){o=!0;break}++a}if(!o)throw haxe_Exception.thrown("Triangle::Point not in triangle");return s[a]}throw haxe_Exception.thrown("Sweep:: [Unsupported] Sweep.NextFlipPoint: opposing point on constrained edge!")},poly2tri_Sweep.prototype={triangulate:function(){for(var n=(h=this.context).points[0].x,e=h.points[0].x,t=h.points[0].y,i=h.points[0].y,r=0,l=h.points.length;r<l;){var s=r++;(de=h.points[s]).x>e&&(e=de.x),de.x<n&&(n=de.x),de.y>i&&(i=de.y),de.y<t&&(t=de.y)}var a=poly2tri_Constants.kAlpha*(e-n),o=poly2tri_Constants.kAlpha*(i-t);h.head=poly2tri_Pool.getPoint(e+a,t-o),h.tail=poly2tri_Pool.getPoint(n-o,t-o);var p=h.points;poly2tri_SortPoints.rec(p,0,p.length);var h=this.context,u=poly2tri_Pool.getTriangle(h.points[0],h.tail,h.head),_=poly2tri_Pool.getNode(u.points[1],u),c=poly2tri_Pool.getNode(u.points[0],u),d=poly2tri_Pool.getNode(u.points[2]);null==h.front?h.front=new poly2tri_AdvancingFront(_,d):((_e=h.front).search_node=_e.head=_,_e.tail=d);_.next=c,c.next=d,c.prev=_,d.prev=c;for(r=1,l=this.context.points.length;r<l;){s=r++;var f=this.context.points[s],x=(h=this.context.front,f.x),b=h.search_node,y=null;if(x<b.value){for(;null!=(b=b.prev);)if(x>=b.value){h.search_node=b,y=b;break}}else for(;null!=(b=b.next);)if(x<b.value){h.search_node=b.prev,y=b.prev;break}var v,m,g,z=y,w=(u=poly2tri_Pool.getTriangle(f,z.point,z.next.point),z.triangle),O=u.points[1],C=u.points[2],E=w.points[0];if(O.x!=E.x||O.y!=E.y){var U=w.points[1];g=O.x==U.x&&O.y==U.y}else g=!0;if(g)m=!0;else{var M=w.points[2];m=O.x==M.x&&O.y==M.y}if(m){var T,k=w.points[0];if(C.x!=k.x||C.y!=k.y){var D=w.points[1];T=C.x==D.x&&C.y==D.y}else T=!0;if(T)v=!0;else{var S=w.points[2];v=C.x==S.x&&C.y==S.y}}else v=!1;if(v){u.neighbors[0]=w;var A,P,V=u.points[1],I=u.points[2],N=w.points[2];if(V.x==N.x&&V.y==N.y){var F=w.points[1];P=I.x==F.x&&I.y==F.y}else P=!1;if(P)A=!0;else{var R=w.points[1];if(V.x==R.x&&V.y==R.y){var L=w.points[2];A=I.x==L.x&&I.y==L.y}else A=!1}if(A)w.neighbors[0]=u;else{var B,G,j=w.points[0];if(V.x==j.x&&V.y==j.y){var K=w.points[2];G=I.x==K.x&&I.y==K.y}else G=!1;if(G)B=!0;else{var W=w.points[2];if(V.x==W.x&&V.y==W.y){var Y=w.points[0];B=I.x==Y.x&&I.y==Y.y}else B=!1}if(B)w.neighbors[1]=u;else{var X,H,Z=w.points[0];if(V.x==Z.x&&V.y==Z.y){var q=w.points[1];H=I.x==q.x&&I.y==q.y}else H=!1;if(H)X=!0;else{var $=w.points[1];if(V.x==$.x&&V.y==$.y){var Q=w.points[0];X=I.x==Q.x&&I.y==Q.y}else X=!1}if(!X)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");w.neighbors[2]=u}}}else{var J,nn,en,tn=u.points[0],rn=u.points[2],ln=w.points[0];if(tn.x!=ln.x||tn.y!=ln.y){var sn=w.points[1];en=tn.x==sn.x&&tn.y==sn.y}else en=!0;if(en)nn=!0;else{var an=w.points[2];nn=tn.x==an.x&&tn.y==an.y}if(nn){var on,pn=w.points[0];if(rn.x!=pn.x||rn.y!=pn.y){var hn=w.points[1];on=rn.x==hn.x&&rn.y==hn.y}else on=!0;if(on)J=!0;else{var un=w.points[2];J=rn.x==un.x&&rn.y==un.y}}else J=!1;if(J){u.neighbors[1]=w;var _n,cn,dn=u.points[0],xn=u.points[2],bn=w.points[2];if(dn.x==bn.x&&dn.y==bn.y){var yn=w.points[1];cn=xn.x==yn.x&&xn.y==yn.y}else cn=!1;if(cn)_n=!0;else{var vn=w.points[1];if(dn.x==vn.x&&dn.y==vn.y){var mn=w.points[2];_n=xn.x==mn.x&&xn.y==mn.y}else _n=!1}if(_n)w.neighbors[0]=u;else{var gn,zn,wn=w.points[0];if(dn.x==wn.x&&dn.y==wn.y){var On=w.points[2];zn=xn.x==On.x&&xn.y==On.y}else zn=!1;if(zn)gn=!0;else{var Cn=w.points[2];if(dn.x==Cn.x&&dn.y==Cn.y){var En=w.points[0];gn=xn.x==En.x&&xn.y==En.y}else gn=!1}if(gn)w.neighbors[1]=u;else{var Un,Mn,Tn=w.points[0];if(dn.x==Tn.x&&dn.y==Tn.y){var kn=w.points[1];Mn=xn.x==kn.x&&xn.y==kn.y}else Mn=!1;if(Mn)Un=!0;else{var Dn=w.points[1];if(dn.x==Dn.x&&dn.y==Dn.y){var Sn=w.points[0];Un=xn.x==Sn.x&&xn.y==Sn.y}else Un=!1}if(!Un)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");w.neighbors[2]=u}}}else{var An,Pn,Vn,In=u.points[0],Nn=u.points[1],Fn=w.points[0];if(In.x!=Fn.x||In.y!=Fn.y){var Rn=w.points[1];Vn=In.x==Rn.x&&In.y==Rn.y}else Vn=!0;if(Vn)Pn=!0;else{var Ln=w.points[2];Pn=In.x==Ln.x&&In.y==Ln.y}if(Pn){var Bn,Gn=w.points[0];if(Nn.x!=Gn.x||Nn.y!=Gn.y){var jn=w.points[1];Bn=Nn.x==jn.x&&Nn.y==jn.y}else Bn=!0;if(Bn)An=!0;else{var Kn=w.points[2];An=Nn.x==Kn.x&&Nn.y==Kn.y}}else An=!1;if(An){u.neighbors[2]=w;var Wn,Yn,Xn=u.points[0],Hn=u.points[1],Zn=w.points[2];if(Xn.x==Zn.x&&Xn.y==Zn.y){var qn=w.points[1];Yn=Hn.x==qn.x&&Hn.y==qn.y}else Yn=!1;if(Yn)Wn=!0;else{var $n=w.points[1];if(Xn.x==$n.x&&Xn.y==$n.y){var Qn=w.points[2];Wn=Hn.x==Qn.x&&Hn.y==Qn.y}else Wn=!1}if(Wn)w.neighbors[0]=u;else{var Jn,ne,ee=w.points[0];if(Xn.x==ee.x&&Xn.y==ee.y){var te=w.points[2];ne=Hn.x==te.x&&Hn.y==te.y}else ne=!1;if(ne)Jn=!0;else{var ie=w.points[2];if(Xn.x==ie.x&&Xn.y==ie.y){var re=w.points[0];Jn=Hn.x==re.x&&Hn.y==re.y}else Jn=!1}if(Jn)w.neighbors[1]=u;else{var le,se,ae=w.points[0];if(Xn.x==ae.x&&Xn.y==ae.y){var oe=w.points[1];se=Hn.x==oe.x&&Hn.y==oe.y}else se=!1;if(se)le=!0;else{var pe=w.points[1];if(Xn.x==pe.x&&Xn.y==pe.y){var he=w.points[0];le=Hn.x==he.x&&Hn.y==he.y}else le=!1}if(!le)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");w.neighbors[2]=u}}}}}var ue=poly2tri_Pool.getNode(f);if(ue.next=z.next,ue.prev=z,z.next.prev=ue,z.next=ue,!this.legalize(u)){var _e=this.context;if(null==u.neighbors[0]){var ce=_e.front,de=u.points[0],fe=u.points;null==(Vv=-1)&&(Vv=0);for(var xe=Vv,be=!1,ye=0;ye<3;){for(var ve=ye++;xe<0;)xe+=3;for(;xe>2;)xe-=3;var me=u.points[ve];if(de.x==me.x&&de.y==me.y){be=!0;break}++xe}if(!be)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ge=fe[xe],ze=ge.x,we=ce.search_node,Oe=we.point.x;if(ze==Oe){var Ce=we.point;if(ge.x!=Ce.x||ge.y!=Ce.y){var Ee=we.prev.point;if(ge.x==Ee.x&&ge.y==Ee.y)we=we.prev;else{var Ue=we.next.point;if(ge.x!=Ue.x||ge.y!=Ue.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");we=we.next}}}else if(ze<Oe)for(;null!=(we=we.prev);){var Me=we.point;if(ge.x==Me.x&&ge.y==Me.y)break}else for(;null!=(we=we.next);){var Te=we.point;if(ge.x==Te.x&&ge.y==Te.y)break}null!=we&&(ce.search_node=we);null!=we&&(we.triangle=u)}if(null==u.neighbors[1]){var ke=_e.front,De=u.points[1],Se=u.points;null==(Nv=-1)&&(Nv=0);for(var Ae=Nv,Pe=!1,Ve=0;Ve<3;){for(var Ie=Ve++;Ae<0;)Ae+=3;for(;Ae>2;)Ae-=3;var Ne=u.points[Ie];if(De.x==Ne.x&&De.y==Ne.y){Pe=!0;break}++Ae}if(!Pe)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Fe=Se[Ae],Re=Fe.x,Le=ke.search_node,Be=Le.point.x;if(Re==Be){var Ge=Le.point;if(Fe.x!=Ge.x||Fe.y!=Ge.y){var je=Le.prev.point;if(Fe.x==je.x&&Fe.y==je.y)Le=Le.prev;else{var Ke=Le.next.point;if(Fe.x!=Ke.x||Fe.y!=Ke.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Le=Le.next}}}else if(Re<Be)for(;null!=(Le=Le.prev);){var We=Le.point;if(Fe.x==We.x&&Fe.y==We.y)break}else for(;null!=(Le=Le.next);){var Ye=Le.point;if(Fe.x==Ye.x&&Fe.y==Ye.y)break}null!=Le&&(ke.search_node=Le);null!=Le&&(Le.triangle=u)}if(null==u.neighbors[2]){var Xe=_e.front,He=u.points[2],Ze=u.points,qe=-1;null==qe&&(qe=0);for(var $e=qe,Qe=!1,Je=0;Je<3;){for(var nt=Je++;$e<0;)$e+=3;for(;$e>2;)$e-=3;var et=u.points[nt];if(He.x==et.x&&He.y==et.y){Qe=!0;break}++$e}if(!Qe)throw haxe_Exception.thrown("Triangle::Point not in triangle");var tt=Ze[$e],it=tt.x,rt=Xe.search_node,lt=rt.point.x;if(it==lt){var st=rt.point;if(tt.x!=st.x||tt.y!=st.y){var at=rt.prev.point;if(tt.x==at.x&&tt.y==at.y)rt=rt.prev;else{var ot=rt.next.point;if(tt.x!=ot.x||tt.y!=ot.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");rt=rt.next}}}else if(it<lt)for(;null!=(rt=rt.prev);){var pt=rt.point;if(tt.x==pt.x&&tt.y==pt.y)break}else for(;null!=(rt=rt.next);){var ht=rt.point;if(tt.x==ht.x&&tt.y==ht.y)break}null!=rt&&(Xe.search_node=rt);null!=rt&&(rt.triangle=u)}}var ut,_t=ue;if(f.x<=z.point.x+poly2tri_Constants.EPSILON){var ct,dt,ft,xt=poly2tri_Pool.getTriangle(z.prev.point,z.point,z.next.point),bt=z.prev.triangle,yt=xt.points[1],vt=xt.points[2],mt=bt.points[0];if(yt.x!=mt.x||yt.y!=mt.y){var gt=bt.points[1];ft=yt.x==gt.x&&yt.y==gt.y}else ft=!0;if(ft)dt=!0;else{var zt=bt.points[2];dt=yt.x==zt.x&&yt.y==zt.y}if(dt){var wt,Ot=bt.points[0];if(vt.x!=Ot.x||vt.y!=Ot.y){var Ct=bt.points[1];wt=vt.x==Ct.x&&vt.y==Ct.y}else wt=!0;if(wt)ct=!0;else{var Et=bt.points[2];ct=vt.x==Et.x&&vt.y==Et.y}}else ct=!1;if(ct){xt.neighbors[0]=bt;var Ut,Mt,Tt=xt.points[1],kt=xt.points[2],Dt=bt.points[2];if(Tt.x==Dt.x&&Tt.y==Dt.y){var St=bt.points[1];Mt=kt.x==St.x&&kt.y==St.y}else Mt=!1;if(Mt)Ut=!0;else{var At=bt.points[1];if(Tt.x==At.x&&Tt.y==At.y){var Pt=bt.points[2];Ut=kt.x==Pt.x&&kt.y==Pt.y}else Ut=!1}if(Ut)bt.neighbors[0]=xt;else{var Vt,It,Nt=bt.points[0];if(Tt.x==Nt.x&&Tt.y==Nt.y){var Ft=bt.points[2];It=kt.x==Ft.x&&kt.y==Ft.y}else It=!1;if(It)Vt=!0;else{var Rt=bt.points[2];if(Tt.x==Rt.x&&Tt.y==Rt.y){var Lt=bt.points[0];Vt=kt.x==Lt.x&&kt.y==Lt.y}else Vt=!1}if(Vt)bt.neighbors[1]=xt;else{var Bt,Gt,jt=bt.points[0];if(Tt.x==jt.x&&Tt.y==jt.y){var Kt=bt.points[1];Gt=kt.x==Kt.x&&kt.y==Kt.y}else Gt=!1;if(Gt)Bt=!0;else{var Wt=bt.points[1];if(Tt.x==Wt.x&&Tt.y==Wt.y){var Yt=bt.points[0];Bt=kt.x==Yt.x&&kt.y==Yt.y}else Bt=!1}if(!Bt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");bt.neighbors[2]=xt}}}else{var Xt,Ht,Zt,qt=xt.points[0],$t=xt.points[2],Qt=bt.points[0];if(qt.x!=Qt.x||qt.y!=Qt.y){var Jt=bt.points[1];Zt=qt.x==Jt.x&&qt.y==Jt.y}else Zt=!0;if(Zt)Ht=!0;else{var ni=bt.points[2];Ht=qt.x==ni.x&&qt.y==ni.y}if(Ht){var ei,ti=bt.points[0];if($t.x!=ti.x||$t.y!=ti.y){var ii=bt.points[1];ei=$t.x==ii.x&&$t.y==ii.y}else ei=!0;if(ei)Xt=!0;else{var ri=bt.points[2];Xt=$t.x==ri.x&&$t.y==ri.y}}else Xt=!1;if(Xt){xt.neighbors[1]=bt;var li,si,ai=xt.points[0],oi=xt.points[2],pi=bt.points[2];if(ai.x==pi.x&&ai.y==pi.y){var hi=bt.points[1];si=oi.x==hi.x&&oi.y==hi.y}else si=!1;if(si)li=!0;else{var ui=bt.points[1];if(ai.x==ui.x&&ai.y==ui.y){var _i=bt.points[2];li=oi.x==_i.x&&oi.y==_i.y}else li=!1}if(li)bt.neighbors[0]=xt;else{var ci,di,fi=bt.points[0];if(ai.x==fi.x&&ai.y==fi.y){var xi=bt.points[2];di=oi.x==xi.x&&oi.y==xi.y}else di=!1;if(di)ci=!0;else{var bi=bt.points[2];if(ai.x==bi.x&&ai.y==bi.y){var yi=bt.points[0];ci=oi.x==yi.x&&oi.y==yi.y}else ci=!1}if(ci)bt.neighbors[1]=xt;else{var vi,mi,gi=bt.points[0];if(ai.x==gi.x&&ai.y==gi.y){var zi=bt.points[1];mi=oi.x==zi.x&&oi.y==zi.y}else mi=!1;if(mi)vi=!0;else{var wi=bt.points[1];if(ai.x==wi.x&&ai.y==wi.y){var Oi=bt.points[0];vi=oi.x==Oi.x&&oi.y==Oi.y}else vi=!1}if(!vi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");bt.neighbors[2]=xt}}}else{var Ci,Ei,Ui,Mi=xt.points[0],Ti=xt.points[1],ki=bt.points[0];if(Mi.x!=ki.x||Mi.y!=ki.y){var Di=bt.points[1];Ui=Mi.x==Di.x&&Mi.y==Di.y}else Ui=!0;if(Ui)Ei=!0;else{var Si=bt.points[2];Ei=Mi.x==Si.x&&Mi.y==Si.y}if(Ei){var Ai,Pi=bt.points[0];if(Ti.x!=Pi.x||Ti.y!=Pi.y){var Vi=bt.points[1];Ai=Ti.x==Vi.x&&Ti.y==Vi.y}else Ai=!0;if(Ai)Ci=!0;else{var Ii=bt.points[2];Ci=Ti.x==Ii.x&&Ti.y==Ii.y}}else Ci=!1;if(Ci){xt.neighbors[2]=bt;var Ni,Fi,Ri=xt.points[0],Li=xt.points[1],Bi=bt.points[2];if(Ri.x==Bi.x&&Ri.y==Bi.y){var Gi=bt.points[1];Fi=Li.x==Gi.x&&Li.y==Gi.y}else Fi=!1;if(Fi)Ni=!0;else{var ji=bt.points[1];if(Ri.x==ji.x&&Ri.y==ji.y){var Ki=bt.points[2];Ni=Li.x==Ki.x&&Li.y==Ki.y}else Ni=!1}if(Ni)bt.neighbors[0]=xt;else{var Wi,Yi,Xi=bt.points[0];if(Ri.x==Xi.x&&Ri.y==Xi.y){var Hi=bt.points[2];Yi=Li.x==Hi.x&&Li.y==Hi.y}else Yi=!1;if(Yi)Wi=!0;else{var Zi=bt.points[2];if(Ri.x==Zi.x&&Ri.y==Zi.y){var qi=bt.points[0];Wi=Li.x==qi.x&&Li.y==qi.y}else Wi=!1}if(Wi)bt.neighbors[1]=xt;else{var $i,Qi,Ji=bt.points[0];if(Ri.x==Ji.x&&Ri.y==Ji.y){var nr=bt.points[1];Qi=Li.x==nr.x&&Li.y==nr.y}else Qi=!1;if(Qi)$i=!0;else{var er=bt.points[1];if(Ri.x==er.x&&Ri.y==er.y){var tr=bt.points[0];$i=Li.x==tr.x&&Li.y==tr.y}else $i=!1}if(!$i)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");bt.neighbors[2]=xt}}}}}var ir,rr,lr,sr=z.triangle,ar=xt.points[1],or=xt.points[2],pr=sr.points[0];if(ar.x!=pr.x||ar.y!=pr.y){var hr=sr.points[1];lr=ar.x==hr.x&&ar.y==hr.y}else lr=!0;if(lr)rr=!0;else{var ur=sr.points[2];rr=ar.x==ur.x&&ar.y==ur.y}if(rr){var _r,cr=sr.points[0];if(or.x!=cr.x||or.y!=cr.y){var dr=sr.points[1];_r=or.x==dr.x&&or.y==dr.y}else _r=!0;if(_r)ir=!0;else{var fr=sr.points[2];ir=or.x==fr.x&&or.y==fr.y}}else ir=!1;if(ir){xt.neighbors[0]=sr;var xr,br,yr=xt.points[1],vr=xt.points[2],mr=sr.points[2];if(yr.x==mr.x&&yr.y==mr.y){var gr=sr.points[1];br=vr.x==gr.x&&vr.y==gr.y}else br=!1;if(br)xr=!0;else{var zr=sr.points[1];if(yr.x==zr.x&&yr.y==zr.y){var wr=sr.points[2];xr=vr.x==wr.x&&vr.y==wr.y}else xr=!1}if(xr)sr.neighbors[0]=xt;else{var Or,Cr,Er=sr.points[0];if(yr.x==Er.x&&yr.y==Er.y){var Ur=sr.points[2];Cr=vr.x==Ur.x&&vr.y==Ur.y}else Cr=!1;if(Cr)Or=!0;else{var Mr=sr.points[2];if(yr.x==Mr.x&&yr.y==Mr.y){var Tr=sr.points[0];Or=vr.x==Tr.x&&vr.y==Tr.y}else Or=!1}if(Or)sr.neighbors[1]=xt;else{var kr,Dr,Sr=sr.points[0];if(yr.x==Sr.x&&yr.y==Sr.y){var Ar=sr.points[1];Dr=vr.x==Ar.x&&vr.y==Ar.y}else Dr=!1;if(Dr)kr=!0;else{var Pr=sr.points[1];if(yr.x==Pr.x&&yr.y==Pr.y){var Vr=sr.points[0];kr=vr.x==Vr.x&&vr.y==Vr.y}else kr=!1}if(!kr)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");sr.neighbors[2]=xt}}}else{var Ir,Nr,Fr,Rr=xt.points[0],Lr=xt.points[2],Br=sr.points[0];if(Rr.x!=Br.x||Rr.y!=Br.y){var Gr=sr.points[1];Fr=Rr.x==Gr.x&&Rr.y==Gr.y}else Fr=!0;if(Fr)Nr=!0;else{var jr=sr.points[2];Nr=Rr.x==jr.x&&Rr.y==jr.y}if(Nr){var Kr,Wr=sr.points[0];if(Lr.x!=Wr.x||Lr.y!=Wr.y){var Yr=sr.points[1];Kr=Lr.x==Yr.x&&Lr.y==Yr.y}else Kr=!0;if(Kr)Ir=!0;else{var Xr=sr.points[2];Ir=Lr.x==Xr.x&&Lr.y==Xr.y}}else Ir=!1;if(Ir){xt.neighbors[1]=sr;var Hr,Zr,qr=xt.points[0],$r=xt.points[2],Qr=sr.points[2];if(qr.x==Qr.x&&qr.y==Qr.y){var Jr=sr.points[1];Zr=$r.x==Jr.x&&$r.y==Jr.y}else Zr=!1;if(Zr)Hr=!0;else{var nl=sr.points[1];if(qr.x==nl.x&&qr.y==nl.y){var el=sr.points[2];Hr=$r.x==el.x&&$r.y==el.y}else Hr=!1}if(Hr)sr.neighbors[0]=xt;else{var tl,il,rl=sr.points[0];if(qr.x==rl.x&&qr.y==rl.y){var ll=sr.points[2];il=$r.x==ll.x&&$r.y==ll.y}else il=!1;if(il)tl=!0;else{var sl=sr.points[2];if(qr.x==sl.x&&qr.y==sl.y){var al=sr.points[0];tl=$r.x==al.x&&$r.y==al.y}else tl=!1}if(tl)sr.neighbors[1]=xt;else{var ol,pl,hl=sr.points[0];if(qr.x==hl.x&&qr.y==hl.y){var ul=sr.points[1];pl=$r.x==ul.x&&$r.y==ul.y}else pl=!1;if(pl)ol=!0;else{var _l=sr.points[1];if(qr.x==_l.x&&qr.y==_l.y){var cl=sr.points[0];ol=$r.x==cl.x&&$r.y==cl.y}else ol=!1}if(!ol)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");sr.neighbors[2]=xt}}}else{var dl,fl,xl,bl=xt.points[0],yl=xt.points[1],vl=sr.points[0];if(bl.x!=vl.x||bl.y!=vl.y){var ml=sr.points[1];xl=bl.x==ml.x&&bl.y==ml.y}else xl=!0;if(xl)fl=!0;else{var gl=sr.points[2];fl=bl.x==gl.x&&bl.y==gl.y}if(fl){var zl,wl=sr.points[0];if(yl.x!=wl.x||yl.y!=wl.y){var Ol=sr.points[1];zl=yl.x==Ol.x&&yl.y==Ol.y}else zl=!0;if(zl)dl=!0;else{var Cl=sr.points[2];dl=yl.x==Cl.x&&yl.y==Cl.y}}else dl=!1;if(dl){xt.neighbors[2]=sr;var El,Ul,Ml=xt.points[0],Tl=xt.points[1],kl=sr.points[2];if(Ml.x==kl.x&&Ml.y==kl.y){var Dl=sr.points[1];Ul=Tl.x==Dl.x&&Tl.y==Dl.y}else Ul=!1;if(Ul)El=!0;else{var Sl=sr.points[1];if(Ml.x==Sl.x&&Ml.y==Sl.y){var Al=sr.points[2];El=Tl.x==Al.x&&Tl.y==Al.y}else El=!1}if(El)sr.neighbors[0]=xt;else{var Pl,Vl,Il=sr.points[0];if(Ml.x==Il.x&&Ml.y==Il.y){var Nl=sr.points[2];Vl=Tl.x==Nl.x&&Tl.y==Nl.y}else Vl=!1;if(Vl)Pl=!0;else{var Fl=sr.points[2];if(Ml.x==Fl.x&&Ml.y==Fl.y){var Rl=sr.points[0];Pl=Tl.x==Rl.x&&Tl.y==Rl.y}else Pl=!1}if(Pl)sr.neighbors[1]=xt;else{var Ll,Bl,Gl=sr.points[0];if(Ml.x==Gl.x&&Ml.y==Gl.y){var jl=sr.points[1];Bl=Tl.x==jl.x&&Tl.y==jl.y}else Bl=!1;if(Bl)Ll=!0;else{var Kl=sr.points[1];if(Ml.x==Kl.x&&Ml.y==Kl.y){var Wl=sr.points[0];Ll=Tl.x==Wl.x&&Tl.y==Wl.y}else Ll=!1}if(!Ll)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");sr.neighbors[2]=xt}}}}}if(z.prev.next=z.next,z.next.prev=z.prev,!this.legalize(xt)){var Yl=this.context;if(null==xt.neighbors[0]){var Xl=Yl.front,Hl=xt.points[0],Zl=xt.points,ql=-1;null==ql&&(ql=0);for(var $l=ql,Ql=!1,Jl=0;Jl<3;){for(var ns=Jl++;$l<0;)$l+=3;for(;$l>2;)$l-=3;var es=xt.points[ns];if(Hl.x==es.x&&Hl.y==es.y){Ql=!0;break}++$l}if(!Ql)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ts=Zl[$l],is=ts.x,rs=Xl.search_node,ls=rs.point.x;if(is==ls){var ss=rs.point;if(ts.x!=ss.x||ts.y!=ss.y){var as=rs.prev.point;if(ts.x==as.x&&ts.y==as.y)rs=rs.prev;else{var os=rs.next.point;if(ts.x!=os.x||ts.y!=os.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");rs=rs.next}}}else if(is<ls)for(;null!=(rs=rs.prev);){var ps=rs.point;if(ts.x==ps.x&&ts.y==ps.y)break}else for(;null!=(rs=rs.next);){var hs=rs.point;if(ts.x==hs.x&&ts.y==hs.y)break}null!=rs&&(Xl.search_node=rs);null!=rs&&(rs.triangle=xt)}if(null==xt.neighbors[1]){var us=Yl.front,_s=xt.points[1],cs=xt.points,ds=-1;null==ds&&(ds=0);for(var fs=ds,xs=!1,bs=0;bs<3;){for(var ys=bs++;fs<0;)fs+=3;for(;fs>2;)fs-=3;var vs=xt.points[ys];if(_s.x==vs.x&&_s.y==vs.y){xs=!0;break}++fs}if(!xs)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ms=cs[fs],gs=ms.x,zs=us.search_node,ws=zs.point.x;if(gs==ws){var Os=zs.point;if(ms.x!=Os.x||ms.y!=Os.y){var Cs=zs.prev.point;if(ms.x==Cs.x&&ms.y==Cs.y)zs=zs.prev;else{var Es=zs.next.point;if(ms.x!=Es.x||ms.y!=Es.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");zs=zs.next}}}else if(gs<ws)for(;null!=(zs=zs.prev);){var Us=zs.point;if(ms.x==Us.x&&ms.y==Us.y)break}else for(;null!=(zs=zs.next);){var Ms=zs.point;if(ms.x==Ms.x&&ms.y==Ms.y)break}null!=zs&&(us.search_node=zs);null!=zs&&(zs.triangle=xt)}if(null==xt.neighbors[2]){var Ts=Yl.front,ks=xt.points[2],Ds=xt.points,Ss=-1;null==Ss&&(Ss=0);for(var As=Ss,Ps=!1,Vs=0;Vs<3;){for(var Is=Vs++;As<0;)As+=3;for(;As>2;)As-=3;var Ns=xt.points[Is];if(ks.x==Ns.x&&ks.y==Ns.y){Ps=!0;break}++As}if(!Ps)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Fs=Ds[As],Rs=Fs.x,Ls=Ts.search_node,Bs=Ls.point.x;if(Rs==Bs){var Gs=Ls.point;if(Fs.x!=Gs.x||Fs.y!=Gs.y){var js=Ls.prev.point;if(Fs.x==js.x&&Fs.y==js.y)Ls=Ls.prev;else{var Ks=Ls.next.point;if(Fs.x!=Ks.x||Fs.y!=Ks.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Ls=Ls.next}}}else if(Rs<Bs)for(;null!=(Ls=Ls.prev);){var Ws=Ls.point;if(Fs.x==Ws.x&&Fs.y==Ws.y)break}else for(;null!=(Ls=Ls.next);){var Ys=Ls.point;if(Fs.x==Ys.x&&Fs.y==Ys.y)break}null!=Ls&&(Ts.search_node=Ls);null!=Ls&&(Ls.triangle=xt)}}}for(var Xs=_t.next;null!=Xs.next;){var Hs=Xs.next.point.x-Xs.point.x,Zs=Xs.next.point.y-Xs.point.y,qs=Xs.prev.point.x-Xs.point.x,$s=Xs.prev.point.y-Xs.point.y;if((ut=Math.atan2(Hs*$s-Zs*qs,Hs*qs+Zs*$s))>poly2tri_Constants.PI_2||ut<-poly2tri_Constants.PI_2)break;var Qs,Js,na,ea=poly2tri_Pool.getTriangle(Xs.prev.point,Xs.point,Xs.next.point),ta=Xs.prev.triangle,ia=ea.points[1],ra=ea.points[2],la=ta.points[0];if(ia.x!=la.x||ia.y!=la.y){var sa=ta.points[1];na=ia.x==sa.x&&ia.y==sa.y}else na=!0;if(na)Js=!0;else{var aa=ta.points[2];Js=ia.x==aa.x&&ia.y==aa.y}if(Js){var oa,pa=ta.points[0];if(ra.x!=pa.x||ra.y!=pa.y){var ha=ta.points[1];oa=ra.x==ha.x&&ra.y==ha.y}else oa=!0;if(oa)Qs=!0;else{var ua=ta.points[2];Qs=ra.x==ua.x&&ra.y==ua.y}}else Qs=!1;if(Qs){ea.neighbors[0]=ta;var _a,ca,da=ea.points[1],fa=ea.points[2],xa=ta.points[2];if(da.x==xa.x&&da.y==xa.y){var ba=ta.points[1];ca=fa.x==ba.x&&fa.y==ba.y}else ca=!1;if(ca)_a=!0;else{var ya=ta.points[1];if(da.x==ya.x&&da.y==ya.y){var va=ta.points[2];_a=fa.x==va.x&&fa.y==va.y}else _a=!1}if(_a)ta.neighbors[0]=ea;else{var ma,ga,za=ta.points[0];if(da.x==za.x&&da.y==za.y){var wa=ta.points[2];ga=fa.x==wa.x&&fa.y==wa.y}else ga=!1;if(ga)ma=!0;else{var Oa=ta.points[2];if(da.x==Oa.x&&da.y==Oa.y){var Ca=ta.points[0];ma=fa.x==Ca.x&&fa.y==Ca.y}else ma=!1}if(ma)ta.neighbors[1]=ea;else{var Ea,Ua,Ma=ta.points[0];if(da.x==Ma.x&&da.y==Ma.y){var Ta=ta.points[1];Ua=fa.x==Ta.x&&fa.y==Ta.y}else Ua=!1;if(Ua)Ea=!0;else{var ka=ta.points[1];if(da.x==ka.x&&da.y==ka.y){var Da=ta.points[0];Ea=fa.x==Da.x&&fa.y==Da.y}else Ea=!1}if(!Ea)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");ta.neighbors[2]=ea}}}else{var Sa,Aa,Pa,Va=ea.points[0],Ia=ea.points[2],Na=ta.points[0];if(Va.x!=Na.x||Va.y!=Na.y){var Fa=ta.points[1];Pa=Va.x==Fa.x&&Va.y==Fa.y}else Pa=!0;if(Pa)Aa=!0;else{var Ra=ta.points[2];Aa=Va.x==Ra.x&&Va.y==Ra.y}if(Aa){var La,Ba=ta.points[0];if(Ia.x!=Ba.x||Ia.y!=Ba.y){var Ga=ta.points[1];La=Ia.x==Ga.x&&Ia.y==Ga.y}else La=!0;if(La)Sa=!0;else{var ja=ta.points[2];Sa=Ia.x==ja.x&&Ia.y==ja.y}}else Sa=!1;if(Sa){ea.neighbors[1]=ta;var Ka,Wa,Ya=ea.points[0],Xa=ea.points[2],Ha=ta.points[2];if(Ya.x==Ha.x&&Ya.y==Ha.y){var Za=ta.points[1];Wa=Xa.x==Za.x&&Xa.y==Za.y}else Wa=!1;if(Wa)Ka=!0;else{var qa=ta.points[1];if(Ya.x==qa.x&&Ya.y==qa.y){var $a=ta.points[2];Ka=Xa.x==$a.x&&Xa.y==$a.y}else Ka=!1}if(Ka)ta.neighbors[0]=ea;else{var Qa,Ja,no=ta.points[0];if(Ya.x==no.x&&Ya.y==no.y){var eo=ta.points[2];Ja=Xa.x==eo.x&&Xa.y==eo.y}else Ja=!1;if(Ja)Qa=!0;else{var to=ta.points[2];if(Ya.x==to.x&&Ya.y==to.y){var io=ta.points[0];Qa=Xa.x==io.x&&Xa.y==io.y}else Qa=!1}if(Qa)ta.neighbors[1]=ea;else{var ro,lo,so=ta.points[0];if(Ya.x==so.x&&Ya.y==so.y){var ao=ta.points[1];lo=Xa.x==ao.x&&Xa.y==ao.y}else lo=!1;if(lo)ro=!0;else{var oo=ta.points[1];if(Ya.x==oo.x&&Ya.y==oo.y){var po=ta.points[0];ro=Xa.x==po.x&&Xa.y==po.y}else ro=!1}if(!ro)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");ta.neighbors[2]=ea}}}else{var ho,uo,_o,co=ea.points[0],fo=ea.points[1],xo=ta.points[0];if(co.x!=xo.x||co.y!=xo.y){var bo=ta.points[1];_o=co.x==bo.x&&co.y==bo.y}else _o=!0;if(_o)uo=!0;else{var yo=ta.points[2];uo=co.x==yo.x&&co.y==yo.y}if(uo){var vo,mo=ta.points[0];if(fo.x!=mo.x||fo.y!=mo.y){var go=ta.points[1];vo=fo.x==go.x&&fo.y==go.y}else vo=!0;if(vo)ho=!0;else{var zo=ta.points[2];ho=fo.x==zo.x&&fo.y==zo.y}}else ho=!1;if(ho){ea.neighbors[2]=ta;var wo,Oo,Co=ea.points[0],Eo=ea.points[1],Uo=ta.points[2];if(Co.x==Uo.x&&Co.y==Uo.y){var Mo=ta.points[1];Oo=Eo.x==Mo.x&&Eo.y==Mo.y}else Oo=!1;if(Oo)wo=!0;else{var To=ta.points[1];if(Co.x==To.x&&Co.y==To.y){var ko=ta.points[2];wo=Eo.x==ko.x&&Eo.y==ko.y}else wo=!1}if(wo)ta.neighbors[0]=ea;else{var Do,So,Ao=ta.points[0];if(Co.x==Ao.x&&Co.y==Ao.y){var Po=ta.points[2];So=Eo.x==Po.x&&Eo.y==Po.y}else So=!1;if(So)Do=!0;else{var Vo=ta.points[2];if(Co.x==Vo.x&&Co.y==Vo.y){var Io=ta.points[0];Do=Eo.x==Io.x&&Eo.y==Io.y}else Do=!1}if(Do)ta.neighbors[1]=ea;else{var No,Fo,Ro=ta.points[0];if(Co.x==Ro.x&&Co.y==Ro.y){var Lo=ta.points[1];Fo=Eo.x==Lo.x&&Eo.y==Lo.y}else Fo=!1;if(Fo)No=!0;else{var Bo=ta.points[1];if(Co.x==Bo.x&&Co.y==Bo.y){var Go=ta.points[0];No=Eo.x==Go.x&&Eo.y==Go.y}else No=!1}if(!No)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");ta.neighbors[2]=ea}}}}}var jo,Ko,Wo,Yo=Xs.triangle,Xo=ea.points[1],Ho=ea.points[2],Zo=Yo.points[0];if(Xo.x!=Zo.x||Xo.y!=Zo.y){var qo=Yo.points[1];Wo=Xo.x==qo.x&&Xo.y==qo.y}else Wo=!0;if(Wo)Ko=!0;else{var $o=Yo.points[2];Ko=Xo.x==$o.x&&Xo.y==$o.y}if(Ko){var Qo,Jo=Yo.points[0];if(Ho.x!=Jo.x||Ho.y!=Jo.y){var np=Yo.points[1];Qo=Ho.x==np.x&&Ho.y==np.y}else Qo=!0;if(Qo)jo=!0;else{var ep=Yo.points[2];jo=Ho.x==ep.x&&Ho.y==ep.y}}else jo=!1;if(jo){ea.neighbors[0]=Yo;var tp,ip,rp=ea.points[1],lp=ea.points[2],sp=Yo.points[2];if(rp.x==sp.x&&rp.y==sp.y){var ap=Yo.points[1];ip=lp.x==ap.x&&lp.y==ap.y}else ip=!1;if(ip)tp=!0;else{var op=Yo.points[1];if(rp.x==op.x&&rp.y==op.y){var pp=Yo.points[2];tp=lp.x==pp.x&&lp.y==pp.y}else tp=!1}if(tp)Yo.neighbors[0]=ea;else{var hp,up,_p=Yo.points[0];if(rp.x==_p.x&&rp.y==_p.y){var cp=Yo.points[2];up=lp.x==cp.x&&lp.y==cp.y}else up=!1;if(up)hp=!0;else{var dp=Yo.points[2];if(rp.x==dp.x&&rp.y==dp.y){var fp=Yo.points[0];hp=lp.x==fp.x&&lp.y==fp.y}else hp=!1}if(hp)Yo.neighbors[1]=ea;else{var xp,bp,yp=Yo.points[0];if(rp.x==yp.x&&rp.y==yp.y){var vp=Yo.points[1];bp=lp.x==vp.x&&lp.y==vp.y}else bp=!1;if(bp)xp=!0;else{var mp=Yo.points[1];if(rp.x==mp.x&&rp.y==mp.y){var gp=Yo.points[0];xp=lp.x==gp.x&&lp.y==gp.y}else xp=!1}if(!xp)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Yo.neighbors[2]=ea}}}else{var zp,wp,Op,Cp=ea.points[0],Ep=ea.points[2],Up=Yo.points[0];if(Cp.x!=Up.x||Cp.y!=Up.y){var Mp=Yo.points[1];Op=Cp.x==Mp.x&&Cp.y==Mp.y}else Op=!0;if(Op)wp=!0;else{var Tp=Yo.points[2];wp=Cp.x==Tp.x&&Cp.y==Tp.y}if(wp){var kp,Dp=Yo.points[0];if(Ep.x!=Dp.x||Ep.y!=Dp.y){var Sp=Yo.points[1];kp=Ep.x==Sp.x&&Ep.y==Sp.y}else kp=!0;if(kp)zp=!0;else{var Ap=Yo.points[2];zp=Ep.x==Ap.x&&Ep.y==Ap.y}}else zp=!1;if(zp){ea.neighbors[1]=Yo;var Pp,Vp,Ip=ea.points[0],Np=ea.points[2],Fp=Yo.points[2];if(Ip.x==Fp.x&&Ip.y==Fp.y){var Rp=Yo.points[1];Vp=Np.x==Rp.x&&Np.y==Rp.y}else Vp=!1;if(Vp)Pp=!0;else{var Lp=Yo.points[1];if(Ip.x==Lp.x&&Ip.y==Lp.y){var Bp=Yo.points[2];Pp=Np.x==Bp.x&&Np.y==Bp.y}else Pp=!1}if(Pp)Yo.neighbors[0]=ea;else{var Gp,jp,Kp=Yo.points[0];if(Ip.x==Kp.x&&Ip.y==Kp.y){var Wp=Yo.points[2];jp=Np.x==Wp.x&&Np.y==Wp.y}else jp=!1;if(jp)Gp=!0;else{var Yp=Yo.points[2];if(Ip.x==Yp.x&&Ip.y==Yp.y){var Xp=Yo.points[0];Gp=Np.x==Xp.x&&Np.y==Xp.y}else Gp=!1}if(Gp)Yo.neighbors[1]=ea;else{var Hp,Zp,qp=Yo.points[0];if(Ip.x==qp.x&&Ip.y==qp.y){var $p=Yo.points[1];Zp=Np.x==$p.x&&Np.y==$p.y}else Zp=!1;if(Zp)Hp=!0;else{var Qp=Yo.points[1];if(Ip.x==Qp.x&&Ip.y==Qp.y){var Jp=Yo.points[0];Hp=Np.x==Jp.x&&Np.y==Jp.y}else Hp=!1}if(!Hp)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Yo.neighbors[2]=ea}}}else{var nh,eh,th,ih=ea.points[0],rh=ea.points[1],lh=Yo.points[0];if(ih.x!=lh.x||ih.y!=lh.y){var sh=Yo.points[1];th=ih.x==sh.x&&ih.y==sh.y}else th=!0;if(th)eh=!0;else{var ah=Yo.points[2];eh=ih.x==ah.x&&ih.y==ah.y}if(eh){var oh,ph=Yo.points[0];if(rh.x!=ph.x||rh.y!=ph.y){var hh=Yo.points[1];oh=rh.x==hh.x&&rh.y==hh.y}else oh=!0;if(oh)nh=!0;else{var uh=Yo.points[2];nh=rh.x==uh.x&&rh.y==uh.y}}else nh=!1;if(nh){ea.neighbors[2]=Yo;var _h,ch,dh=ea.points[0],fh=ea.points[1],xh=Yo.points[2];if(dh.x==xh.x&&dh.y==xh.y){var bh=Yo.points[1];ch=fh.x==bh.x&&fh.y==bh.y}else ch=!1;if(ch)_h=!0;else{var yh=Yo.points[1];if(dh.x==yh.x&&dh.y==yh.y){var vh=Yo.points[2];_h=fh.x==vh.x&&fh.y==vh.y}else _h=!1}if(_h)Yo.neighbors[0]=ea;else{var mh,gh,zh=Yo.points[0];if(dh.x==zh.x&&dh.y==zh.y){var wh=Yo.points[2];gh=fh.x==wh.x&&fh.y==wh.y}else gh=!1;if(gh)mh=!0;else{var Oh=Yo.points[2];if(dh.x==Oh.x&&dh.y==Oh.y){var Ch=Yo.points[0];mh=fh.x==Ch.x&&fh.y==Ch.y}else mh=!1}if(mh)Yo.neighbors[1]=ea;else{var Eh,Uh,Mh=Yo.points[0];if(dh.x==Mh.x&&dh.y==Mh.y){var Th=Yo.points[1];Uh=fh.x==Th.x&&fh.y==Th.y}else Uh=!1;if(Uh)Eh=!0;else{var kh=Yo.points[1];if(dh.x==kh.x&&dh.y==kh.y){var Dh=Yo.points[0];Eh=fh.x==Dh.x&&fh.y==Dh.y}else Eh=!1}if(!Eh)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Yo.neighbors[2]=ea}}}}}if(Xs.prev.next=Xs.next,Xs.next.prev=Xs.prev,!this.legalize(ea)){var Sh=this.context;if(null==ea.neighbors[0]){var Ah=Sh.front,Ph=ea.points[0],Vh=ea.points,Ih=-1;null==Ih&&(Ih=0);for(var Nh=Ih,Fh=!1,Rh=0;Rh<3;){for(var Lh=Rh++;Nh<0;)Nh+=3;for(;Nh>2;)Nh-=3;var Bh=ea.points[Lh];if(Ph.x==Bh.x&&Ph.y==Bh.y){Fh=!0;break}++Nh}if(!Fh)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Gh=Vh[Nh],jh=Gh.x,Kh=Ah.search_node,Wh=Kh.point.x;if(jh==Wh){var Yh=Kh.point;if(Gh.x!=Yh.x||Gh.y!=Yh.y){var Xh=Kh.prev.point;if(Gh.x==Xh.x&&Gh.y==Xh.y)Kh=Kh.prev;else{var Hh=Kh.next.point;if(Gh.x!=Hh.x||Gh.y!=Hh.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Kh=Kh.next}}}else if(jh<Wh)for(;null!=(Kh=Kh.prev);){var Zh=Kh.point;if(Gh.x==Zh.x&&Gh.y==Zh.y)break}else for(;null!=(Kh=Kh.next);){var qh=Kh.point;if(Gh.x==qh.x&&Gh.y==qh.y)break}null!=Kh&&(Ah.search_node=Kh);null!=Kh&&(Kh.triangle=ea)}if(null==ea.neighbors[1]){var $h=Sh.front,Qh=ea.points[1],Jh=ea.points,nu=-1;null==nu&&(nu=0);for(var eu=nu,tu=!1,iu=0;iu<3;){for(var ru=iu++;eu<0;)eu+=3;for(;eu>2;)eu-=3;var lu=ea.points[ru];if(Qh.x==lu.x&&Qh.y==lu.y){tu=!0;break}++eu}if(!tu)throw haxe_Exception.thrown("Triangle::Point not in triangle");var su=Jh[eu],au=su.x,ou=$h.search_node,pu=ou.point.x;if(au==pu){var hu=ou.point;if(su.x!=hu.x||su.y!=hu.y){var uu=ou.prev.point;if(su.x==uu.x&&su.y==uu.y)ou=ou.prev;else{var _u=ou.next.point;if(su.x!=_u.x||su.y!=_u.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ou=ou.next}}}else if(au<pu)for(;null!=(ou=ou.prev);){var cu=ou.point;if(su.x==cu.x&&su.y==cu.y)break}else for(;null!=(ou=ou.next);){var du=ou.point;if(su.x==du.x&&su.y==du.y)break}null!=ou&&($h.search_node=ou);null!=ou&&(ou.triangle=ea)}if(null==ea.neighbors[2]){var fu=Sh.front,xu=ea.points[2],bu=ea.points,yu=-1;null==yu&&(yu=0);for(var vu=yu,mu=!1,gu=0;gu<3;){for(var zu=gu++;vu<0;)vu+=3;for(;vu>2;)vu-=3;var wu=ea.points[zu];if(xu.x==wu.x&&xu.y==wu.y){mu=!0;break}++vu}if(!mu)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Ou=bu[vu],Cu=Ou.x,Eu=fu.search_node,Uu=Eu.point.x;if(Cu==Uu){var Mu=Eu.point;if(Ou.x!=Mu.x||Ou.y!=Mu.y){var Tu=Eu.prev.point;if(Ou.x==Tu.x&&Ou.y==Tu.y)Eu=Eu.prev;else{var ku=Eu.next.point;if(Ou.x!=ku.x||Ou.y!=ku.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Eu=Eu.next}}}else if(Cu<Uu)for(;null!=(Eu=Eu.prev);){var Du=Eu.point;if(Ou.x==Du.x&&Ou.y==Du.y)break}else for(;null!=(Eu=Eu.next);){var Su=Eu.point;if(Ou.x==Su.x&&Ou.y==Su.y)break}null!=Eu&&(fu.search_node=Eu);null!=Eu&&(Eu.triangle=ea)}}Xs=Xs.next}for(Xs=_t.prev;null!=Xs.prev;){var Au=Xs.next.point.x-Xs.point.x,Pu=Xs.next.point.y-Xs.point.y,Vu=Xs.prev.point.x-Xs.point.x,Iu=Xs.prev.point.y-Xs.point.y;if((ut=Math.atan2(Au*Iu-Pu*Vu,Au*Vu+Pu*Iu))>poly2tri_Constants.PI_2||ut<-poly2tri_Constants.PI_2)break;var Nu,Fu,Ru,Lu=poly2tri_Pool.getTriangle(Xs.prev.point,Xs.point,Xs.next.point),Bu=Xs.prev.triangle,Gu=Lu.points[1],ju=Lu.points[2],Ku=Bu.points[0];if(Gu.x!=Ku.x||Gu.y!=Ku.y){var Wu=Bu.points[1];Ru=Gu.x==Wu.x&&Gu.y==Wu.y}else Ru=!0;if(Ru)Fu=!0;else{var Yu=Bu.points[2];Fu=Gu.x==Yu.x&&Gu.y==Yu.y}if(Fu){var Xu,Hu=Bu.points[0];if(ju.x!=Hu.x||ju.y!=Hu.y){var Zu=Bu.points[1];Xu=ju.x==Zu.x&&ju.y==Zu.y}else Xu=!0;if(Xu)Nu=!0;else{var qu=Bu.points[2];Nu=ju.x==qu.x&&ju.y==qu.y}}else Nu=!1;if(Nu){Lu.neighbors[0]=Bu;var $u,Qu,Ju=Lu.points[1],n_=Lu.points[2],e_=Bu.points[2];if(Ju.x==e_.x&&Ju.y==e_.y){var t_=Bu.points[1];Qu=n_.x==t_.x&&n_.y==t_.y}else Qu=!1;if(Qu)$u=!0;else{var i_=Bu.points[1];if(Ju.x==i_.x&&Ju.y==i_.y){var r_=Bu.points[2];$u=n_.x==r_.x&&n_.y==r_.y}else $u=!1}if($u)Bu.neighbors[0]=Lu;else{var l_,s_,a_=Bu.points[0];if(Ju.x==a_.x&&Ju.y==a_.y){var o_=Bu.points[2];s_=n_.x==o_.x&&n_.y==o_.y}else s_=!1;if(s_)l_=!0;else{var p_=Bu.points[2];if(Ju.x==p_.x&&Ju.y==p_.y){var h_=Bu.points[0];l_=n_.x==h_.x&&n_.y==h_.y}else l_=!1}if(l_)Bu.neighbors[1]=Lu;else{var u_,__,c_=Bu.points[0];if(Ju.x==c_.x&&Ju.y==c_.y){var d_=Bu.points[1];__=n_.x==d_.x&&n_.y==d_.y}else __=!1;if(__)u_=!0;else{var f_=Bu.points[1];if(Ju.x==f_.x&&Ju.y==f_.y){var x_=Bu.points[0];u_=n_.x==x_.x&&n_.y==x_.y}else u_=!1}if(!u_)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Bu.neighbors[2]=Lu}}}else{var b_,y_,v_,m_=Lu.points[0],g_=Lu.points[2],z_=Bu.points[0];if(m_.x!=z_.x||m_.y!=z_.y){var w_=Bu.points[1];v_=m_.x==w_.x&&m_.y==w_.y}else v_=!0;if(v_)y_=!0;else{var O_=Bu.points[2];y_=m_.x==O_.x&&m_.y==O_.y}if(y_){var C_,E_=Bu.points[0];if(g_.x!=E_.x||g_.y!=E_.y){var U_=Bu.points[1];C_=g_.x==U_.x&&g_.y==U_.y}else C_=!0;if(C_)b_=!0;else{var M_=Bu.points[2];b_=g_.x==M_.x&&g_.y==M_.y}}else b_=!1;if(b_){Lu.neighbors[1]=Bu;var T_,k_,D_=Lu.points[0],S_=Lu.points[2],A_=Bu.points[2];if(D_.x==A_.x&&D_.y==A_.y){var P_=Bu.points[1];k_=S_.x==P_.x&&S_.y==P_.y}else k_=!1;if(k_)T_=!0;else{var V_=Bu.points[1];if(D_.x==V_.x&&D_.y==V_.y){var I_=Bu.points[2];T_=S_.x==I_.x&&S_.y==I_.y}else T_=!1}if(T_)Bu.neighbors[0]=Lu;else{var N_,F_,R_=Bu.points[0];if(D_.x==R_.x&&D_.y==R_.y){var L_=Bu.points[2];F_=S_.x==L_.x&&S_.y==L_.y}else F_=!1;if(F_)N_=!0;else{var B_=Bu.points[2];if(D_.x==B_.x&&D_.y==B_.y){var G_=Bu.points[0];N_=S_.x==G_.x&&S_.y==G_.y}else N_=!1}if(N_)Bu.neighbors[1]=Lu;else{var j_,K_,W_=Bu.points[0];if(D_.x==W_.x&&D_.y==W_.y){var Y_=Bu.points[1];K_=S_.x==Y_.x&&S_.y==Y_.y}else K_=!1;if(K_)j_=!0;else{var X_=Bu.points[1];if(D_.x==X_.x&&D_.y==X_.y){var H_=Bu.points[0];j_=S_.x==H_.x&&S_.y==H_.y}else j_=!1}if(!j_)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Bu.neighbors[2]=Lu}}}else{var Z_,q_,$_,Q_=Lu.points[0],J_=Lu.points[1],nc=Bu.points[0];if(Q_.x!=nc.x||Q_.y!=nc.y){var ec=Bu.points[1];$_=Q_.x==ec.x&&Q_.y==ec.y}else $_=!0;if($_)q_=!0;else{var tc=Bu.points[2];q_=Q_.x==tc.x&&Q_.y==tc.y}if(q_){var ic,rc=Bu.points[0];if(J_.x!=rc.x||J_.y!=rc.y){var lc=Bu.points[1];ic=J_.x==lc.x&&J_.y==lc.y}else ic=!0;if(ic)Z_=!0;else{var sc=Bu.points[2];Z_=J_.x==sc.x&&J_.y==sc.y}}else Z_=!1;if(Z_){Lu.neighbors[2]=Bu;var ac,oc,pc=Lu.points[0],hc=Lu.points[1],uc=Bu.points[2];if(pc.x==uc.x&&pc.y==uc.y){var _c=Bu.points[1];oc=hc.x==_c.x&&hc.y==_c.y}else oc=!1;if(oc)ac=!0;else{var cc=Bu.points[1];if(pc.x==cc.x&&pc.y==cc.y){var dc=Bu.points[2];ac=hc.x==dc.x&&hc.y==dc.y}else ac=!1}if(ac)Bu.neighbors[0]=Lu;else{var fc,xc,bc=Bu.points[0];if(pc.x==bc.x&&pc.y==bc.y){var yc=Bu.points[2];xc=hc.x==yc.x&&hc.y==yc.y}else xc=!1;if(xc)fc=!0;else{var vc=Bu.points[2];if(pc.x==vc.x&&pc.y==vc.y){var mc=Bu.points[0];fc=hc.x==mc.x&&hc.y==mc.y}else fc=!1}if(fc)Bu.neighbors[1]=Lu;else{var gc,zc,wc=Bu.points[0];if(pc.x==wc.x&&pc.y==wc.y){var Oc=Bu.points[1];zc=hc.x==Oc.x&&hc.y==Oc.y}else zc=!1;if(zc)gc=!0;else{var Cc=Bu.points[1];if(pc.x==Cc.x&&pc.y==Cc.y){var Ec=Bu.points[0];gc=hc.x==Ec.x&&hc.y==Ec.y}else gc=!1}if(!gc)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Bu.neighbors[2]=Lu}}}}}var Uc,Mc,Tc,kc=Xs.triangle,Dc=Lu.points[1],Sc=Lu.points[2],Ac=kc.points[0];if(Dc.x!=Ac.x||Dc.y!=Ac.y){var Pc=kc.points[1];Tc=Dc.x==Pc.x&&Dc.y==Pc.y}else Tc=!0;if(Tc)Mc=!0;else{var Vc=kc.points[2];Mc=Dc.x==Vc.x&&Dc.y==Vc.y}if(Mc){var Ic,Nc=kc.points[0];if(Sc.x!=Nc.x||Sc.y!=Nc.y){var Fc=kc.points[1];Ic=Sc.x==Fc.x&&Sc.y==Fc.y}else Ic=!0;if(Ic)Uc=!0;else{var Rc=kc.points[2];Uc=Sc.x==Rc.x&&Sc.y==Rc.y}}else Uc=!1;if(Uc){Lu.neighbors[0]=kc;var Lc,Bc,Gc=Lu.points[1],jc=Lu.points[2],Kc=kc.points[2];if(Gc.x==Kc.x&&Gc.y==Kc.y){var Wc=kc.points[1];Bc=jc.x==Wc.x&&jc.y==Wc.y}else Bc=!1;if(Bc)Lc=!0;else{var Yc=kc.points[1];if(Gc.x==Yc.x&&Gc.y==Yc.y){var Xc=kc.points[2];Lc=jc.x==Xc.x&&jc.y==Xc.y}else Lc=!1}if(Lc)kc.neighbors[0]=Lu;else{var Hc,Zc,qc=kc.points[0];if(Gc.x==qc.x&&Gc.y==qc.y){var $c=kc.points[2];Zc=jc.x==$c.x&&jc.y==$c.y}else Zc=!1;if(Zc)Hc=!0;else{var Qc=kc.points[2];if(Gc.x==Qc.x&&Gc.y==Qc.y){var Jc=kc.points[0];Hc=jc.x==Jc.x&&jc.y==Jc.y}else Hc=!1}if(Hc)kc.neighbors[1]=Lu;else{var nd,ed,td=kc.points[0];if(Gc.x==td.x&&Gc.y==td.y){var id=kc.points[1];ed=jc.x==id.x&&jc.y==id.y}else ed=!1;if(ed)nd=!0;else{var rd=kc.points[1];if(Gc.x==rd.x&&Gc.y==rd.y){var ld=kc.points[0];nd=jc.x==ld.x&&jc.y==ld.y}else nd=!1}if(!nd)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");kc.neighbors[2]=Lu}}}else{var sd,ad,od,pd=Lu.points[0],hd=Lu.points[2],ud=kc.points[0];if(pd.x!=ud.x||pd.y!=ud.y){var _d=kc.points[1];od=pd.x==_d.x&&pd.y==_d.y}else od=!0;if(od)ad=!0;else{var cd=kc.points[2];ad=pd.x==cd.x&&pd.y==cd.y}if(ad){var dd,fd=kc.points[0];if(hd.x!=fd.x||hd.y!=fd.y){var xd=kc.points[1];dd=hd.x==xd.x&&hd.y==xd.y}else dd=!0;if(dd)sd=!0;else{var bd=kc.points[2];sd=hd.x==bd.x&&hd.y==bd.y}}else sd=!1;if(sd){Lu.neighbors[1]=kc;var yd,vd,md=Lu.points[0],gd=Lu.points[2],zd=kc.points[2];if(md.x==zd.x&&md.y==zd.y){var wd=kc.points[1];vd=gd.x==wd.x&&gd.y==wd.y}else vd=!1;if(vd)yd=!0;else{var Od=kc.points[1];if(md.x==Od.x&&md.y==Od.y){var Cd=kc.points[2];yd=gd.x==Cd.x&&gd.y==Cd.y}else yd=!1}if(yd)kc.neighbors[0]=Lu;else{var Ed,Ud,Md=kc.points[0];if(md.x==Md.x&&md.y==Md.y){var Td=kc.points[2];Ud=gd.x==Td.x&&gd.y==Td.y}else Ud=!1;if(Ud)Ed=!0;else{var kd=kc.points[2];if(md.x==kd.x&&md.y==kd.y){var Dd=kc.points[0];Ed=gd.x==Dd.x&&gd.y==Dd.y}else Ed=!1}if(Ed)kc.neighbors[1]=Lu;else{var Sd,Ad,Pd=kc.points[0];if(md.x==Pd.x&&md.y==Pd.y){var Vd=kc.points[1];Ad=gd.x==Vd.x&&gd.y==Vd.y}else Ad=!1;if(Ad)Sd=!0;else{var Id=kc.points[1];if(md.x==Id.x&&md.y==Id.y){var Nd=kc.points[0];Sd=gd.x==Nd.x&&gd.y==Nd.y}else Sd=!1}if(!Sd)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");kc.neighbors[2]=Lu}}}else{var Fd,Rd,Ld,Bd=Lu.points[0],Gd=Lu.points[1],jd=kc.points[0];if(Bd.x!=jd.x||Bd.y!=jd.y){var Kd=kc.points[1];Ld=Bd.x==Kd.x&&Bd.y==Kd.y}else Ld=!0;if(Ld)Rd=!0;else{var Wd=kc.points[2];Rd=Bd.x==Wd.x&&Bd.y==Wd.y}if(Rd){var Yd,Xd=kc.points[0];if(Gd.x!=Xd.x||Gd.y!=Xd.y){var Hd=kc.points[1];Yd=Gd.x==Hd.x&&Gd.y==Hd.y}else Yd=!0;if(Yd)Fd=!0;else{var Zd=kc.points[2];Fd=Gd.x==Zd.x&&Gd.y==Zd.y}}else Fd=!1;if(Fd){Lu.neighbors[2]=kc;var qd,$d,Qd=Lu.points[0],Jd=Lu.points[1],nf=kc.points[2];if(Qd.x==nf.x&&Qd.y==nf.y){var ef=kc.points[1];$d=Jd.x==ef.x&&Jd.y==ef.y}else $d=!1;if($d)qd=!0;else{var tf=kc.points[1];if(Qd.x==tf.x&&Qd.y==tf.y){var rf=kc.points[2];qd=Jd.x==rf.x&&Jd.y==rf.y}else qd=!1}if(qd)kc.neighbors[0]=Lu;else{var lf,sf,af=kc.points[0];if(Qd.x==af.x&&Qd.y==af.y){var of=kc.points[2];sf=Jd.x==of.x&&Jd.y==of.y}else sf=!1;if(sf)lf=!0;else{var pf=kc.points[2];if(Qd.x==pf.x&&Qd.y==pf.y){var hf=kc.points[0];lf=Jd.x==hf.x&&Jd.y==hf.y}else lf=!1}if(lf)kc.neighbors[1]=Lu;else{var uf,_f,cf=kc.points[0];if(Qd.x==cf.x&&Qd.y==cf.y){var df=kc.points[1];_f=Jd.x==df.x&&Jd.y==df.y}else _f=!1;if(_f)uf=!0;else{var ff=kc.points[1];if(Qd.x==ff.x&&Qd.y==ff.y){var xf=kc.points[0];uf=Jd.x==xf.x&&Jd.y==xf.y}else uf=!1}if(!uf)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");kc.neighbors[2]=Lu}}}}}if(Xs.prev.next=Xs.next,Xs.next.prev=Xs.prev,!this.legalize(Lu)){var bf=this.context;if(null==Lu.neighbors[0]){var yf=bf.front,vf=Lu.points[0],mf=Lu.points,gf=-1;null==gf&&(gf=0);for(var zf=gf,wf=!1,Of=0;Of<3;){for(var Cf=Of++;zf<0;)zf+=3;for(;zf>2;)zf-=3;var Ef=Lu.points[Cf];if(vf.x==Ef.x&&vf.y==Ef.y){wf=!0;break}++zf}if(!wf)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Uf=mf[zf],Mf=Uf.x,Tf=yf.search_node,kf=Tf.point.x;if(Mf==kf){var Df=Tf.point;if(Uf.x!=Df.x||Uf.y!=Df.y){var Sf=Tf.prev.point;if(Uf.x==Sf.x&&Uf.y==Sf.y)Tf=Tf.prev;else{var Af=Tf.next.point;if(Uf.x!=Af.x||Uf.y!=Af.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Tf=Tf.next}}}else if(Mf<kf)for(;null!=(Tf=Tf.prev);){var Pf=Tf.point;if(Uf.x==Pf.x&&Uf.y==Pf.y)break}else for(;null!=(Tf=Tf.next);){var Vf=Tf.point;if(Uf.x==Vf.x&&Uf.y==Vf.y)break}null!=Tf&&(yf.search_node=Tf);null!=Tf&&(Tf.triangle=Lu)}if(null==Lu.neighbors[1]){var If=bf.front,Nf=Lu.points[1],Ff=Lu.points,Rf=-1;null==Rf&&(Rf=0);for(var Lf=Rf,Bf=!1,Gf=0;Gf<3;){for(var jf=Gf++;Lf<0;)Lf+=3;for(;Lf>2;)Lf-=3;var Kf=Lu.points[jf];if(Nf.x==Kf.x&&Nf.y==Kf.y){Bf=!0;break}++Lf}if(!Bf)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Wf=Ff[Lf],Yf=Wf.x,Xf=If.search_node,Hf=Xf.point.x;if(Yf==Hf){var Zf=Xf.point;if(Wf.x!=Zf.x||Wf.y!=Zf.y){var qf=Xf.prev.point;if(Wf.x==qf.x&&Wf.y==qf.y)Xf=Xf.prev;else{var $f=Xf.next.point;if(Wf.x!=$f.x||Wf.y!=$f.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Xf=Xf.next}}}else if(Yf<Hf)for(;null!=(Xf=Xf.prev);){var Qf=Xf.point;if(Wf.x==Qf.x&&Wf.y==Qf.y)break}else for(;null!=(Xf=Xf.next);){var Jf=Xf.point;if(Wf.x==Jf.x&&Wf.y==Jf.y)break}null!=Xf&&(If.search_node=Xf);null!=Xf&&(Xf.triangle=Lu)}if(null==Lu.neighbors[2]){var nx=bf.front,ex=Lu.points[2],tx=Lu.points,ix=-1;null==ix&&(ix=0);for(var rx=ix,lx=!1,sx=0;sx<3;){for(var ax=sx++;rx<0;)rx+=3;for(;rx>2;)rx-=3;var ox=Lu.points[ax];if(ex.x==ox.x&&ex.y==ox.y){lx=!0;break}++rx}if(!lx)throw haxe_Exception.thrown("Triangle::Point not in triangle");var px=tx[rx],hx=px.x,ux=nx.search_node,_x=ux.point.x;if(hx==_x){var cx=ux.point;if(px.x!=cx.x||px.y!=cx.y){var dx=ux.prev.point;if(px.x==dx.x&&px.y==dx.y)ux=ux.prev;else{var fx=ux.next.point;if(px.x!=fx.x||px.y!=fx.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ux=ux.next}}}else if(hx<_x)for(;null!=(ux=ux.prev);){var xx=ux.point;if(px.x==xx.x&&px.y==xx.y)break}else for(;null!=(ux=ux.next);){var bx=ux.point;if(px.x==bx.x&&px.y==bx.y)break}null!=ux&&(nx.search_node=ux);null!=ux&&(ux.triangle=Lu)}}Xs=Xs.prev}if(null!=_t.next&&null!=_t.next.next&&(ut=Math.atan2(_t.point.y-_t.next.next.point.y,_t.point.x-_t.next.next.point.x))<poly2tri_Constants.PI_3div4){var yx=_t.point,vx=_t.next.point,mx=_t.next.next.point,gx=(yx.x-mx.x)*(vx.y-mx.y)-(yx.y-mx.y)*(vx.x-mx.x);for(this.context.basin.left_node=-1==(gx>-poly2tri_Constants.EPSILON&&gx<poly2tri_Constants.EPSILON?0:gx>0?-1:1)?_t.next.next:_t.next,this.context.basin.bottom_node=this.context.basin.left_node;null!=this.context.basin.bottom_node.next&&this.context.basin.bottom_node.point.y>=this.context.basin.bottom_node.next.point.y;)this.context.basin.bottom_node=this.context.basin.bottom_node.next;if(this.context.basin.bottom_node!=this.context.basin.left_node){for(this.context.basin.right_node=this.context.basin.bottom_node;null!=this.context.basin.right_node.next&&this.context.basin.right_node.point.y<this.context.basin.right_node.next.point.y;)this.context.basin.right_node=this.context.basin.right_node.next;this.context.basin.right_node!=this.context.basin.bottom_node&&(this.context.basin.width=this.context.basin.right_node.point.x-this.context.basin.left_node.point.x,this.context.basin.left_highest=this.context.basin.left_node.point.y>this.context.basin.right_node.point.y,this.fillBasinReq(this.context.basin.bottom_node))}}var zx=_t,wx=0;null==f.edge_list&&(f.edge_list=poly2tri_Pool.getEdgeArray());for(var Ox=f.edge_list.length;wx<Ox;){var Cx=wx++;null==f.edge_list&&(f.edge_list=poly2tri_Pool.getEdgeArray());var Ex=f.edge_list[Cx];this.context.edge_event.constrained_edge=Ex,this.context.edge_event.right=Ex.p.x>Ex.q.x;var Ux=zx.triangle,Mx=Ex.p,Tx=Ex.q,kx=-1,Dx=Ux.points[0];if(Mx.x==Dx.x&&Mx.y==Dx.y){var Sx=Ux.points[1];if(Tx.x==Sx.x&&Tx.y==Sx.y)kx=2;else{var Ax=Ux.points[2];Tx.x==Ax.x&&Tx.y==Ax.y&&(kx=1)}}else{var Px=Ux.points[1];if(Mx.x==Px.x&&Mx.y==Px.y){var Vx=Ux.points[2];if(Tx.x==Vx.x&&Tx.y==Vx.y)kx=0;else{var Ix=Ux.points[0];Tx.x==Ix.x&&Tx.y==Ix.y&&(kx=2)}}else{var Nx=Ux.points[2];if(Mx.x==Nx.x&&Mx.y==Nx.y){var Fx=Ux.points[0];if(Tx.x==Fx.x&&Tx.y==Fx.y)kx=1;else{var Rx=Ux.points[1];Tx.x==Rx.x&&Tx.y==Rx.y&&(kx=0)}}}}var Lx=kx,Bx=!1;if(-1!=Lx){Ux.constrained_edge[Lx]=!0;var Gx=Ux.neighbors[Lx];if(null!=Gx){var jx,Kx,Wx=Gx.points[0];if(Tx.x==Wx.x&&Tx.y==Wx.y){var Yx=Gx.points[1];Kx=Mx.x==Yx.x&&Mx.y==Yx.y}else Kx=!1;if(Kx)jx=!0;else{var Xx=Gx.points[1];if(Tx.x==Xx.x&&Tx.y==Xx.y){var Hx=Gx.points[0];jx=Mx.x==Hx.x&&Mx.y==Hx.y}else jx=!1}if(jx)Gx.constrained_edge[2]=!0;else{var Zx,qx,$x=Gx.points[0];if(Tx.x==$x.x&&Tx.y==$x.y){var Qx=Gx.points[2];qx=Mx.x==Qx.x&&Mx.y==Qx.y}else qx=!1;if(qx)Zx=!0;else{var Jx=Gx.points[2];if(Tx.x==Jx.x&&Tx.y==Jx.y){var nb=Gx.points[0];Zx=Mx.x==nb.x&&Mx.y==nb.y}else Zx=!1}if(Zx)Gx.constrained_edge[1]=!0;else{var eb,tb,ib=Gx.points[1];if(Tx.x==ib.x&&Tx.y==ib.y){var rb=Gx.points[2];tb=Mx.x==rb.x&&Mx.y==rb.y}else tb=!1;if(tb)eb=!0;else{var lb=Gx.points[2];if(Tx.x==lb.x&&Tx.y==lb.y){var sb=Gx.points[1];eb=Mx.x==sb.x&&Mx.y==sb.y}else eb=!1}eb&&(Gx.constrained_edge[0]=!0)}}}Bx=!0}if(!Bx){this.context.edge_event.right?this.fillRightAboveEdgeEvent(Ex,zx):this.fillLeftAboveEdgeEvent(Ex,zx);var ab=Ex.p,ob=Ex.q,pb=zx.triangle,hb=Ex.q,ub=-1,_b=pb.points[0];if(ab.x==_b.x&&ab.y==_b.y){var cb=pb.points[1];if(ob.x==cb.x&&ob.y==cb.y)ub=2;else{var db=pb.points[2];ob.x==db.x&&ob.y==db.y&&(ub=1)}}else{var fb=pb.points[1];if(ab.x==fb.x&&ab.y==fb.y){var xb=pb.points[2];if(ob.x==xb.x&&ob.y==xb.y)ub=0;else{var bb=pb.points[0];ob.x==bb.x&&ob.y==bb.y&&(ub=2)}}else{var yb=pb.points[2];if(ab.x==yb.x&&ab.y==yb.y){var vb=pb.points[0];if(ob.x==vb.x&&ob.y==vb.y)ub=1;else{var mb=pb.points[1];ob.x==mb.x&&ob.y==mb.y&&(ub=0)}}}}var gb=ub,zb=!1;if(-1!=gb){pb.constrained_edge[gb]=!0;var wb=pb.neighbors[gb];if(null!=wb){var Ob,Cb,Eb=wb.points[0];if(ob.x==Eb.x&&ob.y==Eb.y){var Ub=wb.points[1];Cb=ab.x==Ub.x&&ab.y==Ub.y}else Cb=!1;if(Cb)Ob=!0;else{var Mb=wb.points[1];if(ob.x==Mb.x&&ob.y==Mb.y){var Tb=wb.points[0];Ob=ab.x==Tb.x&&ab.y==Tb.y}else Ob=!1}if(Ob)wb.constrained_edge[2]=!0;else{var kb,Db,Sb=wb.points[0];if(ob.x==Sb.x&&ob.y==Sb.y){var Ab=wb.points[2];Db=ab.x==Ab.x&&ab.y==Ab.y}else Db=!1;if(Db)kb=!0;else{var Pb=wb.points[2];if(ob.x==Pb.x&&ob.y==Pb.y){var Vb=wb.points[0];kb=ab.x==Vb.x&&ab.y==Vb.y}else kb=!1}if(kb)wb.constrained_edge[1]=!0;else{var Ib,Nb,Fb=wb.points[1];if(ob.x==Fb.x&&ob.y==Fb.y){var Rb=wb.points[2];Nb=ab.x==Rb.x&&ab.y==Rb.y}else Nb=!1;if(Nb)Ib=!0;else{var Lb=wb.points[2];if(ob.x==Lb.x&&ob.y==Lb.y){var Bb=wb.points[1];Ib=ab.x==Bb.x&&ab.y==Bb.y}else Ib=!1}Ib&&(wb.constrained_edge[0]=!0)}}}zb=!0}if(!zb){var Gb=pb.points,jb=1;null==jb&&(jb=0);for(var Kb=jb,Wb=!1,Yb=0;Yb<3;){for(var Xb=Yb++;Kb<0;)Kb+=3;for(;Kb>2;)Kb-=3;var Hb=pb.points[Xb];if(hb.x==Hb.x&&hb.y==Hb.y){Wb=!0;break}++Kb}if(!Wb)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Zb=Gb[Kb],qb=(ob.x-ab.x)*(Zb.y-ab.y)-(ob.y-ab.y)*(Zb.x-ab.x),$b=qb>-poly2tri_Constants.EPSILON&&qb<poly2tri_Constants.EPSILON?0:qb>0?-1:1;if(0==$b)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");var Qb=pb.points,Jb=-1;null==Jb&&(Jb=0);for(var ny=Jb,ey=!1,ty=0;ty<3;){for(var iy=ty++;ny<0;)ny+=3;for(;ny>2;)ny-=3;var ry=pb.points[iy];if(hb.x==ry.x&&hb.y==ry.y){ey=!0;break}++ny}if(!ey)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ly=Qb[ny],sy=(ob.x-ab.x)*(ly.y-ab.y)-(ob.y-ab.y)*(ly.x-ab.x),ay=sy>-poly2tri_Constants.EPSILON&&sy<poly2tri_Constants.EPSILON?0:sy>0?-1:1;if(0==ay)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if($b==ay){if(1==$b){var oy=pb.neighbors,py=-1;null==py&&(py=0);for(var hy=py,uy=!1,_y=0;_y<3;){for(var cy=_y++;hy<0;)hy+=3;for(;hy>2;)hy-=3;var dy=pb.points[cy];if(hb.x==dy.x&&hb.y==dy.y){uy=!0;break}++hy}if(!uy)throw haxe_Exception.thrown("Triangle::Point not in triangle");pb=oy[hy]}else{var fy=pb.neighbors,xy=1;null==xy&&(xy=0);for(var by=xy,yy=!1,vy=0;vy<3;){for(var my=vy++;by<0;)by+=3;for(;by>2;)by-=3;var gy=pb.points[my];if(hb.x==gy.x&&hb.y==gy.y){yy=!0;break}++by}if(!yy)throw haxe_Exception.thrown("Triangle::Point not in triangle");pb=fy[by]}var zy=pb,wy=-1,Oy=zy.points[0];if(ab.x==Oy.x&&ab.y==Oy.y){var Cy=zy.points[1];if(ob.x==Cy.x&&ob.y==Cy.y)wy=2;else{var Ey=zy.points[2];ob.x==Ey.x&&ob.y==Ey.y&&(wy=1)}}else{var Uy=zy.points[1];if(ab.x==Uy.x&&ab.y==Uy.y){var My=zy.points[2];if(ob.x==My.x&&ob.y==My.y)wy=0;else{var Ty=zy.points[0];ob.x==Ty.x&&ob.y==Ty.y&&(wy=2)}}else{var ky=zy.points[2];if(ab.x==ky.x&&ab.y==ky.y){var Dy=zy.points[0];if(ob.x==Dy.x&&ob.y==Dy.y)wy=1;else{var Sy=zy.points[1];ob.x==Sy.x&&ob.y==Sy.y&&(wy=0)}}}}var Ay=wy,Py=!1;if(-1!=Ay){zy.constrained_edge[Ay]=!0;var Vy=zy.neighbors[Ay];if(null!=Vy){var Iy,Ny,Fy=Vy.points[0];if(ob.x==Fy.x&&ob.y==Fy.y){var Ry=Vy.points[1];Ny=ab.x==Ry.x&&ab.y==Ry.y}else Ny=!1;if(Ny)Iy=!0;else{var Ly=Vy.points[1];if(ob.x==Ly.x&&ob.y==Ly.y){var By=Vy.points[0];Iy=ab.x==By.x&&ab.y==By.y}else Iy=!1}if(Iy)Vy.constrained_edge[2]=!0;else{var Gy,jy,Ky=Vy.points[0];if(ob.x==Ky.x&&ob.y==Ky.y){var Wy=Vy.points[2];jy=ab.x==Wy.x&&ab.y==Wy.y}else jy=!1;if(jy)Gy=!0;else{var Yy=Vy.points[2];if(ob.x==Yy.x&&ob.y==Yy.y){var Xy=Vy.points[0];Gy=ab.x==Xy.x&&ab.y==Xy.y}else Gy=!1}if(Gy)Vy.constrained_edge[1]=!0;else{var Hy,Zy,qy=Vy.points[1];if(ob.x==qy.x&&ob.y==qy.y){var $y=Vy.points[2];Zy=ab.x==$y.x&&ab.y==$y.y}else Zy=!1;if(Zy)Hy=!0;else{var Qy=Vy.points[2];if(ob.x==Qy.x&&ob.y==Qy.y){var Jy=Vy.points[1];Hy=ab.x==Jy.x&&ab.y==Jy.y}else Hy=!1}Hy&&(Vy.constrained_edge[0]=!0)}}}Py=!0}if(!Py){var nv=zy.points,ev=1;null==ev&&(ev=0);for(var tv=ev,iv=!1,rv=0;rv<3;){for(var lv=rv++;tv<0;)tv+=3;for(;tv>2;)tv-=3;var sv=zy.points[lv];if(hb.x==sv.x&&hb.y==sv.y){iv=!0;break}++tv}if(!iv)throw haxe_Exception.thrown("Triangle::Point not in triangle");var av=nv[tv],ov=(ob.x-ab.x)*(av.y-ab.y)-(ob.y-ab.y)*(av.x-ab.x),pv=ov>-poly2tri_Constants.EPSILON&&ov<poly2tri_Constants.EPSILON?0:ov>0?-1:1;if(0==pv)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");var hv=zy.points,uv=-1;null==uv&&(uv=0);for(var _v=uv,cv=!1,dv=0;dv<3;){for(var fv=dv++;_v<0;)_v+=3;for(;_v>2;)_v-=3;var xv=zy.points[fv];if(hb.x==xv.x&&hb.y==xv.y){cv=!0;break}++_v}if(!cv)throw haxe_Exception.thrown("Triangle::Point not in triangle");var bv=hv[_v],yv=(ob.x-ab.x)*(bv.y-ab.y)-(ob.y-ab.y)*(bv.x-ab.x),vv=yv>-poly2tri_Constants.EPSILON&&yv<poly2tri_Constants.EPSILON?0:yv>0?-1:1;if(0==vv)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if(pv==vv){if(1==pv){var mv=zy.neighbors,gv=-1;null==gv&&(gv=0);for(var zv=gv,wv=!1,Ov=0;Ov<3;){for(var Cv=Ov++;zv<0;)zv+=3;for(;zv>2;)zv-=3;var Ev=zy.points[Cv];if(hb.x==Ev.x&&hb.y==Ev.y){wv=!0;break}++zv}if(!wv)throw haxe_Exception.thrown("Triangle::Point not in triangle");zy=mv[zv]}else{var Uv=zy.neighbors,Mv=1;null==Mv&&(Mv=0);for(var Tv=Mv,kv=!1,Dv=0;Dv<3;){for(var Sv=Dv++;Tv<0;)Tv+=3;for(;Tv>2;)Tv-=3;var Av=zy.points[Sv];if(hb.x==Av.x&&hb.y==Av.y){kv=!0;break}++Tv}if(!kv)throw haxe_Exception.thrown("Triangle::Point not in triangle");zy=Uv[Tv]}this.edgeEventByPoints(ab,ob,zy,hb)}else this.flipEdgeEvent(ab,ob,zy,hb)}}else this.flipEdgeEvent(ab,ob,pb,hb)}}}}var Pv=this.context.front.head.next.triangle;for(de=this.context.front.head.next.point;;){var Vv,Iv=Pv.constrained_edge;null==(Vv=1)&&(Vv=0);for(xe=Vv,be=!1,r=0;r<3;){for(ve=r++;xe<0;)xe+=3;for(;xe>2;)xe-=3;w=Pv.points[ve];if(de.x==w.x&&de.y==w.y){be=!0;break}++xe}if(!be)throw haxe_Exception.thrown("Triangle::Point not in triangle");if(Iv[xe])break;var Nv,Fv=Pv.neighbors;null==(Nv=-1)&&(Nv=0);for(Ae=Nv,Pe=!1,l=0;l<3;){for(Ie=l++;Ae<0;)Ae+=3;for(;Ae>2;)Ae-=3;E=Pv.points[Ie];if(de.x==E.x&&de.y==E.y){Pe=!0;break}++Ae}if(!Pe)throw haxe_Exception.thrown("Triangle::Point not in triangle");Pv=Fv[Ae]}this.context.meshClean(Pv)},sweepPoints:function(){for(var n=1,e=this.context.points.length;n<e;){var t=n++,i=this.context.points[t],r=this.context.front,l=i.x,s=r.search_node,a=null;if(l<s.value){for(;null!=(s=s.prev);)if(l>=s.value){r.search_node=s,a=s;break}}else for(;null!=(s=s.next);)if(l<s.value){r.search_node=s.prev,a=s.prev;break}var o,p,h,u=a,_=poly2tri_Pool.getTriangle(i,u.point,u.next.point),c=u.triangle,d=_.points[1],f=_.points[2],x=c.points[0];if(d.x!=x.x||d.y!=x.y){var b=c.points[1];h=d.x==b.x&&d.y==b.y}else h=!0;if(h)p=!0;else{var y=c.points[2];p=d.x==y.x&&d.y==y.y}if(p){var v,m=c.points[0];if(f.x!=m.x||f.y!=m.y){var g=c.points[1];v=f.x==g.x&&f.y==g.y}else v=!0;if(v)o=!0;else{var z=c.points[2];o=f.x==z.x&&f.y==z.y}}else o=!1;if(o){_.neighbors[0]=c;var w,O,C=_.points[1],E=_.points[2],U=c.points[2];if(C.x==U.x&&C.y==U.y){var M=c.points[1];O=E.x==M.x&&E.y==M.y}else O=!1;if(O)w=!0;else{var T=c.points[1];if(C.x==T.x&&C.y==T.y){var k=c.points[2];w=E.x==k.x&&E.y==k.y}else w=!1}if(w)c.neighbors[0]=_;else{var D,S,A=c.points[0];if(C.x==A.x&&C.y==A.y){var P=c.points[2];S=E.x==P.x&&E.y==P.y}else S=!1;if(S)D=!0;else{var V=c.points[2];if(C.x==V.x&&C.y==V.y){var I=c.points[0];D=E.x==I.x&&E.y==I.y}else D=!1}if(D)c.neighbors[1]=_;else{var N,F,R=c.points[0];if(C.x==R.x&&C.y==R.y){var L=c.points[1];F=E.x==L.x&&E.y==L.y}else F=!1;if(F)N=!0;else{var B=c.points[1];if(C.x==B.x&&C.y==B.y){var G=c.points[0];N=E.x==G.x&&E.y==G.y}else N=!1}if(!N)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");c.neighbors[2]=_}}}else{var j,K,W,Y=_.points[0],X=_.points[2],H=c.points[0];if(Y.x!=H.x||Y.y!=H.y){var Z=c.points[1];W=Y.x==Z.x&&Y.y==Z.y}else W=!0;if(W)K=!0;else{var q=c.points[2];K=Y.x==q.x&&Y.y==q.y}if(K){var $,Q=c.points[0];if(X.x!=Q.x||X.y!=Q.y){var J=c.points[1];$=X.x==J.x&&X.y==J.y}else $=!0;if($)j=!0;else{var nn=c.points[2];j=X.x==nn.x&&X.y==nn.y}}else j=!1;if(j){_.neighbors[1]=c;var en,tn,rn=_.points[0],ln=_.points[2],sn=c.points[2];if(rn.x==sn.x&&rn.y==sn.y){var an=c.points[1];tn=ln.x==an.x&&ln.y==an.y}else tn=!1;if(tn)en=!0;else{var on=c.points[1];if(rn.x==on.x&&rn.y==on.y){var pn=c.points[2];en=ln.x==pn.x&&ln.y==pn.y}else en=!1}if(en)c.neighbors[0]=_;else{var hn,un,_n=c.points[0];if(rn.x==_n.x&&rn.y==_n.y){var cn=c.points[2];un=ln.x==cn.x&&ln.y==cn.y}else un=!1;if(un)hn=!0;else{var dn=c.points[2];if(rn.x==dn.x&&rn.y==dn.y){var xn=c.points[0];hn=ln.x==xn.x&&ln.y==xn.y}else hn=!1}if(hn)c.neighbors[1]=_;else{var bn,yn,vn=c.points[0];if(rn.x==vn.x&&rn.y==vn.y){var mn=c.points[1];yn=ln.x==mn.x&&ln.y==mn.y}else yn=!1;if(yn)bn=!0;else{var gn=c.points[1];if(rn.x==gn.x&&rn.y==gn.y){var zn=c.points[0];bn=ln.x==zn.x&&ln.y==zn.y}else bn=!1}if(!bn)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");c.neighbors[2]=_}}}else{var wn,On,Cn,En=_.points[0],Un=_.points[1],Mn=c.points[0];if(En.x!=Mn.x||En.y!=Mn.y){var Tn=c.points[1];Cn=En.x==Tn.x&&En.y==Tn.y}else Cn=!0;if(Cn)On=!0;else{var kn=c.points[2];On=En.x==kn.x&&En.y==kn.y}if(On){var Dn,Sn=c.points[0];if(Un.x!=Sn.x||Un.y!=Sn.y){var An=c.points[1];Dn=Un.x==An.x&&Un.y==An.y}else Dn=!0;if(Dn)wn=!0;else{var Pn=c.points[2];wn=Un.x==Pn.x&&Un.y==Pn.y}}else wn=!1;if(wn){_.neighbors[2]=c;var Vn,In,Nn=_.points[0],Fn=_.points[1],Rn=c.points[2];if(Nn.x==Rn.x&&Nn.y==Rn.y){var Ln=c.points[1];In=Fn.x==Ln.x&&Fn.y==Ln.y}else In=!1;if(In)Vn=!0;else{var Bn=c.points[1];if(Nn.x==Bn.x&&Nn.y==Bn.y){var Gn=c.points[2];Vn=Fn.x==Gn.x&&Fn.y==Gn.y}else Vn=!1}if(Vn)c.neighbors[0]=_;else{var jn,Kn,Wn=c.points[0];if(Nn.x==Wn.x&&Nn.y==Wn.y){var Yn=c.points[2];Kn=Fn.x==Yn.x&&Fn.y==Yn.y}else Kn=!1;if(Kn)jn=!0;else{var Xn=c.points[2];if(Nn.x==Xn.x&&Nn.y==Xn.y){var Hn=c.points[0];jn=Fn.x==Hn.x&&Fn.y==Hn.y}else jn=!1}if(jn)c.neighbors[1]=_;else{var Zn,qn,$n=c.points[0];if(Nn.x==$n.x&&Nn.y==$n.y){var Qn=c.points[1];qn=Fn.x==Qn.x&&Fn.y==Qn.y}else qn=!1;if(qn)Zn=!0;else{var Jn=c.points[1];if(Nn.x==Jn.x&&Nn.y==Jn.y){var ne=c.points[0];Zn=Fn.x==ne.x&&Fn.y==ne.y}else Zn=!1}if(!Zn)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");c.neighbors[2]=_}}}}}var ee=poly2tri_Pool.getNode(i);if(ee.next=u.next,ee.prev=u,u.next.prev=ee,u.next=ee,!this.legalize(_)){var te=this.context;if(null==_.neighbors[0]){var ie=te.front,re=_.points[0],le=_.points,se=-1;null==se&&(se=0);for(var ae=se,oe=!1,pe=0;pe<3;){for(var he=pe++;ae<0;)ae+=3;for(;ae>2;)ae-=3;var ue=_.points[he];if(re.x==ue.x&&re.y==ue.y){oe=!0;break}++ae}if(!oe)throw haxe_Exception.thrown("Triangle::Point not in triangle");var _e=le[ae],ce=_e.x,de=ie.search_node,fe=de.point.x;if(ce==fe){var xe=de.point;if(_e.x!=xe.x||_e.y!=xe.y){var be=de.prev.point;if(_e.x==be.x&&_e.y==be.y)de=de.prev;else{var ye=de.next.point;if(_e.x!=ye.x||_e.y!=ye.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");de=de.next}}}else if(ce<fe)for(;null!=(de=de.prev);){var ve=de.point;if(_e.x==ve.x&&_e.y==ve.y)break}else for(;null!=(de=de.next);){var me=de.point;if(_e.x==me.x&&_e.y==me.y)break}null!=de&&(ie.search_node=de);null!=de&&(de.triangle=_)}if(null==_.neighbors[1]){var ge=te.front,ze=_.points[1],we=_.points,Oe=-1;null==Oe&&(Oe=0);for(var Ce=Oe,Ee=!1,Ue=0;Ue<3;){for(var Me=Ue++;Ce<0;)Ce+=3;for(;Ce>2;)Ce-=3;var Te=_.points[Me];if(ze.x==Te.x&&ze.y==Te.y){Ee=!0;break}++Ce}if(!Ee)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ke=we[Ce],De=ke.x,Se=ge.search_node,Ae=Se.point.x;if(De==Ae){var Pe=Se.point;if(ke.x!=Pe.x||ke.y!=Pe.y){var Ve=Se.prev.point;if(ke.x==Ve.x&&ke.y==Ve.y)Se=Se.prev;else{var Ie=Se.next.point;if(ke.x!=Ie.x||ke.y!=Ie.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Se=Se.next}}}else if(De<Ae)for(;null!=(Se=Se.prev);){var Ne=Se.point;if(ke.x==Ne.x&&ke.y==Ne.y)break}else for(;null!=(Se=Se.next);){var Fe=Se.point;if(ke.x==Fe.x&&ke.y==Fe.y)break}null!=Se&&(ge.search_node=Se);null!=Se&&(Se.triangle=_)}if(null==_.neighbors[2]){var Re=te.front,Le=_.points[2],Be=_.points,Ge=-1;null==Ge&&(Ge=0);for(var je=Ge,Ke=!1,We=0;We<3;){for(var Ye=We++;je<0;)je+=3;for(;je>2;)je-=3;var Xe=_.points[Ye];if(Le.x==Xe.x&&Le.y==Xe.y){Ke=!0;break}++je}if(!Ke)throw haxe_Exception.thrown("Triangle::Point not in triangle");var He=Be[je],Ze=He.x,qe=Re.search_node,$e=qe.point.x;if(Ze==$e){var Qe=qe.point;if(He.x!=Qe.x||He.y!=Qe.y){var Je=qe.prev.point;if(He.x==Je.x&&He.y==Je.y)qe=qe.prev;else{var nt=qe.next.point;if(He.x!=nt.x||He.y!=nt.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");qe=qe.next}}}else if(Ze<$e)for(;null!=(qe=qe.prev);){var et=qe.point;if(He.x==et.x&&He.y==et.y)break}else for(;null!=(qe=qe.next);){var tt=qe.point;if(He.x==tt.x&&He.y==tt.y)break}null!=qe&&(Re.search_node=qe);null!=qe&&(qe.triangle=_)}}var it,rt=ee;if(i.x<=u.point.x+poly2tri_Constants.EPSILON){var lt,st,at,ot=poly2tri_Pool.getTriangle(u.prev.point,u.point,u.next.point),pt=u.prev.triangle,ht=ot.points[1],ut=ot.points[2],_t=pt.points[0];if(ht.x!=_t.x||ht.y!=_t.y){var ct=pt.points[1];at=ht.x==ct.x&&ht.y==ct.y}else at=!0;if(at)st=!0;else{var dt=pt.points[2];st=ht.x==dt.x&&ht.y==dt.y}if(st){var ft,xt=pt.points[0];if(ut.x!=xt.x||ut.y!=xt.y){var bt=pt.points[1];ft=ut.x==bt.x&&ut.y==bt.y}else ft=!0;if(ft)lt=!0;else{var yt=pt.points[2];lt=ut.x==yt.x&&ut.y==yt.y}}else lt=!1;if(lt){ot.neighbors[0]=pt;var vt,mt,gt=ot.points[1],zt=ot.points[2],wt=pt.points[2];if(gt.x==wt.x&&gt.y==wt.y){var Ot=pt.points[1];mt=zt.x==Ot.x&&zt.y==Ot.y}else mt=!1;if(mt)vt=!0;else{var Ct=pt.points[1];if(gt.x==Ct.x&&gt.y==Ct.y){var Et=pt.points[2];vt=zt.x==Et.x&&zt.y==Et.y}else vt=!1}if(vt)pt.neighbors[0]=ot;else{var Ut,Mt,Tt=pt.points[0];if(gt.x==Tt.x&&gt.y==Tt.y){var kt=pt.points[2];Mt=zt.x==kt.x&&zt.y==kt.y}else Mt=!1;if(Mt)Ut=!0;else{var Dt=pt.points[2];if(gt.x==Dt.x&&gt.y==Dt.y){var St=pt.points[0];Ut=zt.x==St.x&&zt.y==St.y}else Ut=!1}if(Ut)pt.neighbors[1]=ot;else{var At,Pt,Vt=pt.points[0];if(gt.x==Vt.x&&gt.y==Vt.y){var It=pt.points[1];Pt=zt.x==It.x&&zt.y==It.y}else Pt=!1;if(Pt)At=!0;else{var Nt=pt.points[1];if(gt.x==Nt.x&&gt.y==Nt.y){var Ft=pt.points[0];At=zt.x==Ft.x&&zt.y==Ft.y}else At=!1}if(!At)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");pt.neighbors[2]=ot}}}else{var Rt,Lt,Bt,Gt=ot.points[0],jt=ot.points[2],Kt=pt.points[0];if(Gt.x!=Kt.x||Gt.y!=Kt.y){var Wt=pt.points[1];Bt=Gt.x==Wt.x&&Gt.y==Wt.y}else Bt=!0;if(Bt)Lt=!0;else{var Yt=pt.points[2];Lt=Gt.x==Yt.x&&Gt.y==Yt.y}if(Lt){var Xt,Ht=pt.points[0];if(jt.x!=Ht.x||jt.y!=Ht.y){var Zt=pt.points[1];Xt=jt.x==Zt.x&&jt.y==Zt.y}else Xt=!0;if(Xt)Rt=!0;else{var qt=pt.points[2];Rt=jt.x==qt.x&&jt.y==qt.y}}else Rt=!1;if(Rt){ot.neighbors[1]=pt;var $t,Qt,Jt=ot.points[0],ni=ot.points[2],ei=pt.points[2];if(Jt.x==ei.x&&Jt.y==ei.y){var ti=pt.points[1];Qt=ni.x==ti.x&&ni.y==ti.y}else Qt=!1;if(Qt)$t=!0;else{var ii=pt.points[1];if(Jt.x==ii.x&&Jt.y==ii.y){var ri=pt.points[2];$t=ni.x==ri.x&&ni.y==ri.y}else $t=!1}if($t)pt.neighbors[0]=ot;else{var li,si,ai=pt.points[0];if(Jt.x==ai.x&&Jt.y==ai.y){var oi=pt.points[2];si=ni.x==oi.x&&ni.y==oi.y}else si=!1;if(si)li=!0;else{var pi=pt.points[2];if(Jt.x==pi.x&&Jt.y==pi.y){var hi=pt.points[0];li=ni.x==hi.x&&ni.y==hi.y}else li=!1}if(li)pt.neighbors[1]=ot;else{var ui,_i,ci=pt.points[0];if(Jt.x==ci.x&&Jt.y==ci.y){var di=pt.points[1];_i=ni.x==di.x&&ni.y==di.y}else _i=!1;if(_i)ui=!0;else{var fi=pt.points[1];if(Jt.x==fi.x&&Jt.y==fi.y){var xi=pt.points[0];ui=ni.x==xi.x&&ni.y==xi.y}else ui=!1}if(!ui)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");pt.neighbors[2]=ot}}}else{var bi,yi,vi,mi=ot.points[0],gi=ot.points[1],zi=pt.points[0];if(mi.x!=zi.x||mi.y!=zi.y){var wi=pt.points[1];vi=mi.x==wi.x&&mi.y==wi.y}else vi=!0;if(vi)yi=!0;else{var Oi=pt.points[2];yi=mi.x==Oi.x&&mi.y==Oi.y}if(yi){var Ci,Ei=pt.points[0];if(gi.x!=Ei.x||gi.y!=Ei.y){var Ui=pt.points[1];Ci=gi.x==Ui.x&&gi.y==Ui.y}else Ci=!0;if(Ci)bi=!0;else{var Mi=pt.points[2];bi=gi.x==Mi.x&&gi.y==Mi.y}}else bi=!1;if(bi){ot.neighbors[2]=pt;var Ti,ki,Di=ot.points[0],Si=ot.points[1],Ai=pt.points[2];if(Di.x==Ai.x&&Di.y==Ai.y){var Pi=pt.points[1];ki=Si.x==Pi.x&&Si.y==Pi.y}else ki=!1;if(ki)Ti=!0;else{var Vi=pt.points[1];if(Di.x==Vi.x&&Di.y==Vi.y){var Ii=pt.points[2];Ti=Si.x==Ii.x&&Si.y==Ii.y}else Ti=!1}if(Ti)pt.neighbors[0]=ot;else{var Ni,Fi,Ri=pt.points[0];if(Di.x==Ri.x&&Di.y==Ri.y){var Li=pt.points[2];Fi=Si.x==Li.x&&Si.y==Li.y}else Fi=!1;if(Fi)Ni=!0;else{var Bi=pt.points[2];if(Di.x==Bi.x&&Di.y==Bi.y){var Gi=pt.points[0];Ni=Si.x==Gi.x&&Si.y==Gi.y}else Ni=!1}if(Ni)pt.neighbors[1]=ot;else{var ji,Ki,Wi=pt.points[0];if(Di.x==Wi.x&&Di.y==Wi.y){var Yi=pt.points[1];Ki=Si.x==Yi.x&&Si.y==Yi.y}else Ki=!1;if(Ki)ji=!0;else{var Xi=pt.points[1];if(Di.x==Xi.x&&Di.y==Xi.y){var Hi=pt.points[0];ji=Si.x==Hi.x&&Si.y==Hi.y}else ji=!1}if(!ji)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");pt.neighbors[2]=ot}}}}}var Zi,qi,$i,Qi=u.triangle,Ji=ot.points[1],nr=ot.points[2],er=Qi.points[0];if(Ji.x!=er.x||Ji.y!=er.y){var tr=Qi.points[1];$i=Ji.x==tr.x&&Ji.y==tr.y}else $i=!0;if($i)qi=!0;else{var ir=Qi.points[2];qi=Ji.x==ir.x&&Ji.y==ir.y}if(qi){var rr,lr=Qi.points[0];if(nr.x!=lr.x||nr.y!=lr.y){var sr=Qi.points[1];rr=nr.x==sr.x&&nr.y==sr.y}else rr=!0;if(rr)Zi=!0;else{var ar=Qi.points[2];Zi=nr.x==ar.x&&nr.y==ar.y}}else Zi=!1;if(Zi){ot.neighbors[0]=Qi;var or,pr,hr=ot.points[1],ur=ot.points[2],_r=Qi.points[2];if(hr.x==_r.x&&hr.y==_r.y){var cr=Qi.points[1];pr=ur.x==cr.x&&ur.y==cr.y}else pr=!1;if(pr)or=!0;else{var dr=Qi.points[1];if(hr.x==dr.x&&hr.y==dr.y){var fr=Qi.points[2];or=ur.x==fr.x&&ur.y==fr.y}else or=!1}if(or)Qi.neighbors[0]=ot;else{var xr,br,yr=Qi.points[0];if(hr.x==yr.x&&hr.y==yr.y){var vr=Qi.points[2];br=ur.x==vr.x&&ur.y==vr.y}else br=!1;if(br)xr=!0;else{var mr=Qi.points[2];if(hr.x==mr.x&&hr.y==mr.y){var gr=Qi.points[0];xr=ur.x==gr.x&&ur.y==gr.y}else xr=!1}if(xr)Qi.neighbors[1]=ot;else{var zr,wr,Or=Qi.points[0];if(hr.x==Or.x&&hr.y==Or.y){var Cr=Qi.points[1];wr=ur.x==Cr.x&&ur.y==Cr.y}else wr=!1;if(wr)zr=!0;else{var Er=Qi.points[1];if(hr.x==Er.x&&hr.y==Er.y){var Ur=Qi.points[0];zr=ur.x==Ur.x&&ur.y==Ur.y}else zr=!1}if(!zr)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Qi.neighbors[2]=ot}}}else{var Mr,Tr,kr,Dr=ot.points[0],Sr=ot.points[2],Ar=Qi.points[0];if(Dr.x!=Ar.x||Dr.y!=Ar.y){var Pr=Qi.points[1];kr=Dr.x==Pr.x&&Dr.y==Pr.y}else kr=!0;if(kr)Tr=!0;else{var Vr=Qi.points[2];Tr=Dr.x==Vr.x&&Dr.y==Vr.y}if(Tr){var Ir,Nr=Qi.points[0];if(Sr.x!=Nr.x||Sr.y!=Nr.y){var Fr=Qi.points[1];Ir=Sr.x==Fr.x&&Sr.y==Fr.y}else Ir=!0;if(Ir)Mr=!0;else{var Rr=Qi.points[2];Mr=Sr.x==Rr.x&&Sr.y==Rr.y}}else Mr=!1;if(Mr){ot.neighbors[1]=Qi;var Lr,Br,Gr=ot.points[0],jr=ot.points[2],Kr=Qi.points[2];if(Gr.x==Kr.x&&Gr.y==Kr.y){var Wr=Qi.points[1];Br=jr.x==Wr.x&&jr.y==Wr.y}else Br=!1;if(Br)Lr=!0;else{var Yr=Qi.points[1];if(Gr.x==Yr.x&&Gr.y==Yr.y){var Xr=Qi.points[2];Lr=jr.x==Xr.x&&jr.y==Xr.y}else Lr=!1}if(Lr)Qi.neighbors[0]=ot;else{var Hr,Zr,qr=Qi.points[0];if(Gr.x==qr.x&&Gr.y==qr.y){var $r=Qi.points[2];Zr=jr.x==$r.x&&jr.y==$r.y}else Zr=!1;if(Zr)Hr=!0;else{var Qr=Qi.points[2];if(Gr.x==Qr.x&&Gr.y==Qr.y){var Jr=Qi.points[0];Hr=jr.x==Jr.x&&jr.y==Jr.y}else Hr=!1}if(Hr)Qi.neighbors[1]=ot;else{var nl,el,tl=Qi.points[0];if(Gr.x==tl.x&&Gr.y==tl.y){var il=Qi.points[1];el=jr.x==il.x&&jr.y==il.y}else el=!1;if(el)nl=!0;else{var rl=Qi.points[1];if(Gr.x==rl.x&&Gr.y==rl.y){var ll=Qi.points[0];nl=jr.x==ll.x&&jr.y==ll.y}else nl=!1}if(!nl)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Qi.neighbors[2]=ot}}}else{var sl,al,ol,pl=ot.points[0],hl=ot.points[1],ul=Qi.points[0];if(pl.x!=ul.x||pl.y!=ul.y){var _l=Qi.points[1];ol=pl.x==_l.x&&pl.y==_l.y}else ol=!0;if(ol)al=!0;else{var cl=Qi.points[2];al=pl.x==cl.x&&pl.y==cl.y}if(al){var dl,fl=Qi.points[0];if(hl.x!=fl.x||hl.y!=fl.y){var xl=Qi.points[1];dl=hl.x==xl.x&&hl.y==xl.y}else dl=!0;if(dl)sl=!0;else{var bl=Qi.points[2];sl=hl.x==bl.x&&hl.y==bl.y}}else sl=!1;if(sl){ot.neighbors[2]=Qi;var yl,vl,ml=ot.points[0],gl=ot.points[1],zl=Qi.points[2];if(ml.x==zl.x&&ml.y==zl.y){var wl=Qi.points[1];vl=gl.x==wl.x&&gl.y==wl.y}else vl=!1;if(vl)yl=!0;else{var Ol=Qi.points[1];if(ml.x==Ol.x&&ml.y==Ol.y){var Cl=Qi.points[2];yl=gl.x==Cl.x&&gl.y==Cl.y}else yl=!1}if(yl)Qi.neighbors[0]=ot;else{var El,Ul,Ml=Qi.points[0];if(ml.x==Ml.x&&ml.y==Ml.y){var Tl=Qi.points[2];Ul=gl.x==Tl.x&&gl.y==Tl.y}else Ul=!1;if(Ul)El=!0;else{var kl=Qi.points[2];if(ml.x==kl.x&&ml.y==kl.y){var Dl=Qi.points[0];El=gl.x==Dl.x&&gl.y==Dl.y}else El=!1}if(El)Qi.neighbors[1]=ot;else{var Sl,Al,Pl=Qi.points[0];if(ml.x==Pl.x&&ml.y==Pl.y){var Vl=Qi.points[1];Al=gl.x==Vl.x&&gl.y==Vl.y}else Al=!1;if(Al)Sl=!0;else{var Il=Qi.points[1];if(ml.x==Il.x&&ml.y==Il.y){var Nl=Qi.points[0];Sl=gl.x==Nl.x&&gl.y==Nl.y}else Sl=!1}if(!Sl)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Qi.neighbors[2]=ot}}}}}if(u.prev.next=u.next,u.next.prev=u.prev,!this.legalize(ot)){var Fl=this.context;if(null==ot.neighbors[0]){var Rl=Fl.front,Ll=ot.points[0],Bl=ot.points,Gl=-1;null==Gl&&(Gl=0);for(var jl=Gl,Kl=!1,Wl=0;Wl<3;){for(var Yl=Wl++;jl<0;)jl+=3;for(;jl>2;)jl-=3;var Xl=ot.points[Yl];if(Ll.x==Xl.x&&Ll.y==Xl.y){Kl=!0;break}++jl}if(!Kl)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Hl=Bl[jl],Zl=Hl.x,ql=Rl.search_node,$l=ql.point.x;if(Zl==$l){var Ql=ql.point;if(Hl.x!=Ql.x||Hl.y!=Ql.y){var Jl=ql.prev.point;if(Hl.x==Jl.x&&Hl.y==Jl.y)ql=ql.prev;else{var ns=ql.next.point;if(Hl.x!=ns.x||Hl.y!=ns.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ql=ql.next}}}else if(Zl<$l)for(;null!=(ql=ql.prev);){var es=ql.point;if(Hl.x==es.x&&Hl.y==es.y)break}else for(;null!=(ql=ql.next);){var ts=ql.point;if(Hl.x==ts.x&&Hl.y==ts.y)break}null!=ql&&(Rl.search_node=ql);null!=ql&&(ql.triangle=ot)}if(null==ot.neighbors[1]){var is=Fl.front,rs=ot.points[1],ls=ot.points,ss=-1;null==ss&&(ss=0);for(var as=ss,os=!1,ps=0;ps<3;){for(var hs=ps++;as<0;)as+=3;for(;as>2;)as-=3;var us=ot.points[hs];if(rs.x==us.x&&rs.y==us.y){os=!0;break}++as}if(!os)throw haxe_Exception.thrown("Triangle::Point not in triangle");var _s=ls[as],cs=_s.x,ds=is.search_node,fs=ds.point.x;if(cs==fs){var xs=ds.point;if(_s.x!=xs.x||_s.y!=xs.y){var bs=ds.prev.point;if(_s.x==bs.x&&_s.y==bs.y)ds=ds.prev;else{var ys=ds.next.point;if(_s.x!=ys.x||_s.y!=ys.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ds=ds.next}}}else if(cs<fs)for(;null!=(ds=ds.prev);){var vs=ds.point;if(_s.x==vs.x&&_s.y==vs.y)break}else for(;null!=(ds=ds.next);){var ms=ds.point;if(_s.x==ms.x&&_s.y==ms.y)break}null!=ds&&(is.search_node=ds);null!=ds&&(ds.triangle=ot)}if(null==ot.neighbors[2]){var gs=Fl.front,zs=ot.points[2],ws=ot.points,Os=-1;null==Os&&(Os=0);for(var Cs=Os,Es=!1,Us=0;Us<3;){for(var Ms=Us++;Cs<0;)Cs+=3;for(;Cs>2;)Cs-=3;var Ts=ot.points[Ms];if(zs.x==Ts.x&&zs.y==Ts.y){Es=!0;break}++Cs}if(!Es)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ks=ws[Cs],Ds=ks.x,Ss=gs.search_node,As=Ss.point.x;if(Ds==As){var Ps=Ss.point;if(ks.x!=Ps.x||ks.y!=Ps.y){var Vs=Ss.prev.point;if(ks.x==Vs.x&&ks.y==Vs.y)Ss=Ss.prev;else{var Is=Ss.next.point;if(ks.x!=Is.x||ks.y!=Is.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Ss=Ss.next}}}else if(Ds<As)for(;null!=(Ss=Ss.prev);){var Ns=Ss.point;if(ks.x==Ns.x&&ks.y==Ns.y)break}else for(;null!=(Ss=Ss.next);){var Fs=Ss.point;if(ks.x==Fs.x&&ks.y==Fs.y)break}null!=Ss&&(gs.search_node=Ss);null!=Ss&&(Ss.triangle=ot)}}}for(var Rs=rt.next;null!=Rs.next;){var Ls=Rs.next.point.x-Rs.point.x,Bs=Rs.next.point.y-Rs.point.y,Gs=Rs.prev.point.x-Rs.point.x,js=Rs.prev.point.y-Rs.point.y;if((it=Math.atan2(Ls*js-Bs*Gs,Ls*Gs+Bs*js))>poly2tri_Constants.PI_2||it<-poly2tri_Constants.PI_2)break;var Ks,Ws,Ys,Xs=poly2tri_Pool.getTriangle(Rs.prev.point,Rs.point,Rs.next.point),Hs=Rs.prev.triangle,Zs=Xs.points[1],qs=Xs.points[2],$s=Hs.points[0];if(Zs.x!=$s.x||Zs.y!=$s.y){var Qs=Hs.points[1];Ys=Zs.x==Qs.x&&Zs.y==Qs.y}else Ys=!0;if(Ys)Ws=!0;else{var Js=Hs.points[2];Ws=Zs.x==Js.x&&Zs.y==Js.y}if(Ws){var na,ea=Hs.points[0];if(qs.x!=ea.x||qs.y!=ea.y){var ta=Hs.points[1];na=qs.x==ta.x&&qs.y==ta.y}else na=!0;if(na)Ks=!0;else{var ia=Hs.points[2];Ks=qs.x==ia.x&&qs.y==ia.y}}else Ks=!1;if(Ks){Xs.neighbors[0]=Hs;var ra,la,sa=Xs.points[1],aa=Xs.points[2],oa=Hs.points[2];if(sa.x==oa.x&&sa.y==oa.y){var pa=Hs.points[1];la=aa.x==pa.x&&aa.y==pa.y}else la=!1;if(la)ra=!0;else{var ha=Hs.points[1];if(sa.x==ha.x&&sa.y==ha.y){var ua=Hs.points[2];ra=aa.x==ua.x&&aa.y==ua.y}else ra=!1}if(ra)Hs.neighbors[0]=Xs;else{var _a,ca,da=Hs.points[0];if(sa.x==da.x&&sa.y==da.y){var fa=Hs.points[2];ca=aa.x==fa.x&&aa.y==fa.y}else ca=!1;if(ca)_a=!0;else{var xa=Hs.points[2];if(sa.x==xa.x&&sa.y==xa.y){var ba=Hs.points[0];_a=aa.x==ba.x&&aa.y==ba.y}else _a=!1}if(_a)Hs.neighbors[1]=Xs;else{var ya,va,ma=Hs.points[0];if(sa.x==ma.x&&sa.y==ma.y){var ga=Hs.points[1];va=aa.x==ga.x&&aa.y==ga.y}else va=!1;if(va)ya=!0;else{var za=Hs.points[1];if(sa.x==za.x&&sa.y==za.y){var wa=Hs.points[0];ya=aa.x==wa.x&&aa.y==wa.y}else ya=!1}if(!ya)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Hs.neighbors[2]=Xs}}}else{var Oa,Ca,Ea,Ua=Xs.points[0],Ma=Xs.points[2],Ta=Hs.points[0];if(Ua.x!=Ta.x||Ua.y!=Ta.y){var ka=Hs.points[1];Ea=Ua.x==ka.x&&Ua.y==ka.y}else Ea=!0;if(Ea)Ca=!0;else{var Da=Hs.points[2];Ca=Ua.x==Da.x&&Ua.y==Da.y}if(Ca){var Sa,Aa=Hs.points[0];if(Ma.x!=Aa.x||Ma.y!=Aa.y){var Pa=Hs.points[1];Sa=Ma.x==Pa.x&&Ma.y==Pa.y}else Sa=!0;if(Sa)Oa=!0;else{var Va=Hs.points[2];Oa=Ma.x==Va.x&&Ma.y==Va.y}}else Oa=!1;if(Oa){Xs.neighbors[1]=Hs;var Ia,Na,Fa=Xs.points[0],Ra=Xs.points[2],La=Hs.points[2];if(Fa.x==La.x&&Fa.y==La.y){var Ba=Hs.points[1];Na=Ra.x==Ba.x&&Ra.y==Ba.y}else Na=!1;if(Na)Ia=!0;else{var Ga=Hs.points[1];if(Fa.x==Ga.x&&Fa.y==Ga.y){var ja=Hs.points[2];Ia=Ra.x==ja.x&&Ra.y==ja.y}else Ia=!1}if(Ia)Hs.neighbors[0]=Xs;else{var Ka,Wa,Ya=Hs.points[0];if(Fa.x==Ya.x&&Fa.y==Ya.y){var Xa=Hs.points[2];Wa=Ra.x==Xa.x&&Ra.y==Xa.y}else Wa=!1;if(Wa)Ka=!0;else{var Ha=Hs.points[2];if(Fa.x==Ha.x&&Fa.y==Ha.y){var Za=Hs.points[0];Ka=Ra.x==Za.x&&Ra.y==Za.y}else Ka=!1}if(Ka)Hs.neighbors[1]=Xs;else{var qa,$a,Qa=Hs.points[0];if(Fa.x==Qa.x&&Fa.y==Qa.y){var Ja=Hs.points[1];$a=Ra.x==Ja.x&&Ra.y==Ja.y}else $a=!1;if($a)qa=!0;else{var no=Hs.points[1];if(Fa.x==no.x&&Fa.y==no.y){var eo=Hs.points[0];qa=Ra.x==eo.x&&Ra.y==eo.y}else qa=!1}if(!qa)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Hs.neighbors[2]=Xs}}}else{var to,io,ro,lo=Xs.points[0],so=Xs.points[1],ao=Hs.points[0];if(lo.x!=ao.x||lo.y!=ao.y){var oo=Hs.points[1];ro=lo.x==oo.x&&lo.y==oo.y}else ro=!0;if(ro)io=!0;else{var po=Hs.points[2];io=lo.x==po.x&&lo.y==po.y}if(io){var ho,uo=Hs.points[0];if(so.x!=uo.x||so.y!=uo.y){var _o=Hs.points[1];ho=so.x==_o.x&&so.y==_o.y}else ho=!0;if(ho)to=!0;else{var co=Hs.points[2];to=so.x==co.x&&so.y==co.y}}else to=!1;if(to){Xs.neighbors[2]=Hs;var fo,xo,bo=Xs.points[0],yo=Xs.points[1],vo=Hs.points[2];if(bo.x==vo.x&&bo.y==vo.y){var mo=Hs.points[1];xo=yo.x==mo.x&&yo.y==mo.y}else xo=!1;if(xo)fo=!0;else{var go=Hs.points[1];if(bo.x==go.x&&bo.y==go.y){var zo=Hs.points[2];fo=yo.x==zo.x&&yo.y==zo.y}else fo=!1}if(fo)Hs.neighbors[0]=Xs;else{var wo,Oo,Co=Hs.points[0];if(bo.x==Co.x&&bo.y==Co.y){var Eo=Hs.points[2];Oo=yo.x==Eo.x&&yo.y==Eo.y}else Oo=!1;if(Oo)wo=!0;else{var Uo=Hs.points[2];if(bo.x==Uo.x&&bo.y==Uo.y){var Mo=Hs.points[0];wo=yo.x==Mo.x&&yo.y==Mo.y}else wo=!1}if(wo)Hs.neighbors[1]=Xs;else{var To,ko,Do=Hs.points[0];if(bo.x==Do.x&&bo.y==Do.y){var So=Hs.points[1];ko=yo.x==So.x&&yo.y==So.y}else ko=!1;if(ko)To=!0;else{var Ao=Hs.points[1];if(bo.x==Ao.x&&bo.y==Ao.y){var Po=Hs.points[0];To=yo.x==Po.x&&yo.y==Po.y}else To=!1}if(!To)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Hs.neighbors[2]=Xs}}}}}var Vo,Io,No,Fo=Rs.triangle,Ro=Xs.points[1],Lo=Xs.points[2],Bo=Fo.points[0];if(Ro.x!=Bo.x||Ro.y!=Bo.y){var Go=Fo.points[1];No=Ro.x==Go.x&&Ro.y==Go.y}else No=!0;if(No)Io=!0;else{var jo=Fo.points[2];Io=Ro.x==jo.x&&Ro.y==jo.y}if(Io){var Ko,Wo=Fo.points[0];if(Lo.x!=Wo.x||Lo.y!=Wo.y){var Yo=Fo.points[1];Ko=Lo.x==Yo.x&&Lo.y==Yo.y}else Ko=!0;if(Ko)Vo=!0;else{var Xo=Fo.points[2];Vo=Lo.x==Xo.x&&Lo.y==Xo.y}}else Vo=!1;if(Vo){Xs.neighbors[0]=Fo;var Ho,Zo,qo=Xs.points[1],$o=Xs.points[2],Qo=Fo.points[2];if(qo.x==Qo.x&&qo.y==Qo.y){var Jo=Fo.points[1];Zo=$o.x==Jo.x&&$o.y==Jo.y}else Zo=!1;if(Zo)Ho=!0;else{var np=Fo.points[1];if(qo.x==np.x&&qo.y==np.y){var ep=Fo.points[2];Ho=$o.x==ep.x&&$o.y==ep.y}else Ho=!1}if(Ho)Fo.neighbors[0]=Xs;else{var tp,ip,rp=Fo.points[0];if(qo.x==rp.x&&qo.y==rp.y){var lp=Fo.points[2];ip=$o.x==lp.x&&$o.y==lp.y}else ip=!1;if(ip)tp=!0;else{var sp=Fo.points[2];if(qo.x==sp.x&&qo.y==sp.y){var ap=Fo.points[0];tp=$o.x==ap.x&&$o.y==ap.y}else tp=!1}if(tp)Fo.neighbors[1]=Xs;else{var op,pp,hp=Fo.points[0];if(qo.x==hp.x&&qo.y==hp.y){var up=Fo.points[1];pp=$o.x==up.x&&$o.y==up.y}else pp=!1;if(pp)op=!0;else{var _p=Fo.points[1];if(qo.x==_p.x&&qo.y==_p.y){var cp=Fo.points[0];op=$o.x==cp.x&&$o.y==cp.y}else op=!1}if(!op)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Fo.neighbors[2]=Xs}}}else{var dp,fp,xp,bp=Xs.points[0],yp=Xs.points[2],vp=Fo.points[0];if(bp.x!=vp.x||bp.y!=vp.y){var mp=Fo.points[1];xp=bp.x==mp.x&&bp.y==mp.y}else xp=!0;if(xp)fp=!0;else{var gp=Fo.points[2];fp=bp.x==gp.x&&bp.y==gp.y}if(fp){var zp,wp=Fo.points[0];if(yp.x!=wp.x||yp.y!=wp.y){var Op=Fo.points[1];zp=yp.x==Op.x&&yp.y==Op.y}else zp=!0;if(zp)dp=!0;else{var Cp=Fo.points[2];dp=yp.x==Cp.x&&yp.y==Cp.y}}else dp=!1;if(dp){Xs.neighbors[1]=Fo;var Ep,Up,Mp=Xs.points[0],Tp=Xs.points[2],kp=Fo.points[2];if(Mp.x==kp.x&&Mp.y==kp.y){var Dp=Fo.points[1];Up=Tp.x==Dp.x&&Tp.y==Dp.y}else Up=!1;if(Up)Ep=!0;else{var Sp=Fo.points[1];if(Mp.x==Sp.x&&Mp.y==Sp.y){var Ap=Fo.points[2];Ep=Tp.x==Ap.x&&Tp.y==Ap.y}else Ep=!1}if(Ep)Fo.neighbors[0]=Xs;else{var Pp,Vp,Ip=Fo.points[0];if(Mp.x==Ip.x&&Mp.y==Ip.y){var Np=Fo.points[2];Vp=Tp.x==Np.x&&Tp.y==Np.y}else Vp=!1;if(Vp)Pp=!0;else{var Fp=Fo.points[2];if(Mp.x==Fp.x&&Mp.y==Fp.y){var Rp=Fo.points[0];Pp=Tp.x==Rp.x&&Tp.y==Rp.y}else Pp=!1}if(Pp)Fo.neighbors[1]=Xs;else{var Lp,Bp,Gp=Fo.points[0];if(Mp.x==Gp.x&&Mp.y==Gp.y){var jp=Fo.points[1];Bp=Tp.x==jp.x&&Tp.y==jp.y}else Bp=!1;if(Bp)Lp=!0;else{var Kp=Fo.points[1];if(Mp.x==Kp.x&&Mp.y==Kp.y){var Wp=Fo.points[0];Lp=Tp.x==Wp.x&&Tp.y==Wp.y}else Lp=!1}if(!Lp)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Fo.neighbors[2]=Xs}}}else{var Yp,Xp,Hp,Zp=Xs.points[0],qp=Xs.points[1],$p=Fo.points[0];if(Zp.x!=$p.x||Zp.y!=$p.y){var Qp=Fo.points[1];Hp=Zp.x==Qp.x&&Zp.y==Qp.y}else Hp=!0;if(Hp)Xp=!0;else{var Jp=Fo.points[2];Xp=Zp.x==Jp.x&&Zp.y==Jp.y}if(Xp){var nh,eh=Fo.points[0];if(qp.x!=eh.x||qp.y!=eh.y){var th=Fo.points[1];nh=qp.x==th.x&&qp.y==th.y}else nh=!0;if(nh)Yp=!0;else{var ih=Fo.points[2];Yp=qp.x==ih.x&&qp.y==ih.y}}else Yp=!1;if(Yp){Xs.neighbors[2]=Fo;var rh,lh,sh=Xs.points[0],ah=Xs.points[1],oh=Fo.points[2];if(sh.x==oh.x&&sh.y==oh.y){var ph=Fo.points[1];lh=ah.x==ph.x&&ah.y==ph.y}else lh=!1;if(lh)rh=!0;else{var hh=Fo.points[1];if(sh.x==hh.x&&sh.y==hh.y){var uh=Fo.points[2];rh=ah.x==uh.x&&ah.y==uh.y}else rh=!1}if(rh)Fo.neighbors[0]=Xs;else{var _h,ch,dh=Fo.points[0];if(sh.x==dh.x&&sh.y==dh.y){var fh=Fo.points[2];ch=ah.x==fh.x&&ah.y==fh.y}else ch=!1;if(ch)_h=!0;else{var xh=Fo.points[2];if(sh.x==xh.x&&sh.y==xh.y){var bh=Fo.points[0];_h=ah.x==bh.x&&ah.y==bh.y}else _h=!1}if(_h)Fo.neighbors[1]=Xs;else{var yh,vh,mh=Fo.points[0];if(sh.x==mh.x&&sh.y==mh.y){var gh=Fo.points[1];vh=ah.x==gh.x&&ah.y==gh.y}else vh=!1;if(vh)yh=!0;else{var zh=Fo.points[1];if(sh.x==zh.x&&sh.y==zh.y){var wh=Fo.points[0];yh=ah.x==wh.x&&ah.y==wh.y}else yh=!1}if(!yh)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Fo.neighbors[2]=Xs}}}}}if(Rs.prev.next=Rs.next,Rs.next.prev=Rs.prev,!this.legalize(Xs)){var Oh=this.context;if(null==Xs.neighbors[0]){var Ch=Oh.front,Eh=Xs.points[0],Uh=Xs.points,Mh=-1;null==Mh&&(Mh=0);for(var Th=Mh,kh=!1,Dh=0;Dh<3;){for(var Sh=Dh++;Th<0;)Th+=3;for(;Th>2;)Th-=3;var Ah=Xs.points[Sh];if(Eh.x==Ah.x&&Eh.y==Ah.y){kh=!0;break}++Th}if(!kh)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Ph=Uh[Th],Vh=Ph.x,Ih=Ch.search_node,Nh=Ih.point.x;if(Vh==Nh){var Fh=Ih.point;if(Ph.x!=Fh.x||Ph.y!=Fh.y){var Rh=Ih.prev.point;if(Ph.x==Rh.x&&Ph.y==Rh.y)Ih=Ih.prev;else{var Lh=Ih.next.point;if(Ph.x!=Lh.x||Ph.y!=Lh.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Ih=Ih.next}}}else if(Vh<Nh)for(;null!=(Ih=Ih.prev);){var Bh=Ih.point;if(Ph.x==Bh.x&&Ph.y==Bh.y)break}else for(;null!=(Ih=Ih.next);){var Gh=Ih.point;if(Ph.x==Gh.x&&Ph.y==Gh.y)break}null!=Ih&&(Ch.search_node=Ih);null!=Ih&&(Ih.triangle=Xs)}if(null==Xs.neighbors[1]){var jh=Oh.front,Kh=Xs.points[1],Wh=Xs.points,Yh=-1;null==Yh&&(Yh=0);for(var Xh=Yh,Hh=!1,Zh=0;Zh<3;){for(var qh=Zh++;Xh<0;)Xh+=3;for(;Xh>2;)Xh-=3;var $h=Xs.points[qh];if(Kh.x==$h.x&&Kh.y==$h.y){Hh=!0;break}++Xh}if(!Hh)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Qh=Wh[Xh],Jh=Qh.x,nu=jh.search_node,eu=nu.point.x;if(Jh==eu){var tu=nu.point;if(Qh.x!=tu.x||Qh.y!=tu.y){var iu=nu.prev.point;if(Qh.x==iu.x&&Qh.y==iu.y)nu=nu.prev;else{var ru=nu.next.point;if(Qh.x!=ru.x||Qh.y!=ru.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");nu=nu.next}}}else if(Jh<eu)for(;null!=(nu=nu.prev);){var lu=nu.point;if(Qh.x==lu.x&&Qh.y==lu.y)break}else for(;null!=(nu=nu.next);){var su=nu.point;if(Qh.x==su.x&&Qh.y==su.y)break}null!=nu&&(jh.search_node=nu);null!=nu&&(nu.triangle=Xs)}if(null==Xs.neighbors[2]){var au=Oh.front,ou=Xs.points[2],pu=Xs.points,hu=-1;null==hu&&(hu=0);for(var uu=hu,_u=!1,cu=0;cu<3;){for(var du=cu++;uu<0;)uu+=3;for(;uu>2;)uu-=3;var fu=Xs.points[du];if(ou.x==fu.x&&ou.y==fu.y){_u=!0;break}++uu}if(!_u)throw haxe_Exception.thrown("Triangle::Point not in triangle");var xu=pu[uu],bu=xu.x,yu=au.search_node,vu=yu.point.x;if(bu==vu){var mu=yu.point;if(xu.x!=mu.x||xu.y!=mu.y){var gu=yu.prev.point;if(xu.x==gu.x&&xu.y==gu.y)yu=yu.prev;else{var zu=yu.next.point;if(xu.x!=zu.x||xu.y!=zu.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");yu=yu.next}}}else if(bu<vu)for(;null!=(yu=yu.prev);){var wu=yu.point;if(xu.x==wu.x&&xu.y==wu.y)break}else for(;null!=(yu=yu.next);){var Ou=yu.point;if(xu.x==Ou.x&&xu.y==Ou.y)break}null!=yu&&(au.search_node=yu);null!=yu&&(yu.triangle=Xs)}}Rs=Rs.next}for(Rs=rt.prev;null!=Rs.prev;){var Cu=Rs.next.point.x-Rs.point.x,Eu=Rs.next.point.y-Rs.point.y,Uu=Rs.prev.point.x-Rs.point.x,Mu=Rs.prev.point.y-Rs.point.y;if((it=Math.atan2(Cu*Mu-Eu*Uu,Cu*Uu+Eu*Mu))>poly2tri_Constants.PI_2||it<-poly2tri_Constants.PI_2)break;var Tu,ku,Du,Su=poly2tri_Pool.getTriangle(Rs.prev.point,Rs.point,Rs.next.point),Au=Rs.prev.triangle,Pu=Su.points[1],Vu=Su.points[2],Iu=Au.points[0];if(Pu.x!=Iu.x||Pu.y!=Iu.y){var Nu=Au.points[1];Du=Pu.x==Nu.x&&Pu.y==Nu.y}else Du=!0;if(Du)ku=!0;else{var Fu=Au.points[2];ku=Pu.x==Fu.x&&Pu.y==Fu.y}if(ku){var Ru,Lu=Au.points[0];if(Vu.x!=Lu.x||Vu.y!=Lu.y){var Bu=Au.points[1];Ru=Vu.x==Bu.x&&Vu.y==Bu.y}else Ru=!0;if(Ru)Tu=!0;else{var Gu=Au.points[2];Tu=Vu.x==Gu.x&&Vu.y==Gu.y}}else Tu=!1;if(Tu){Su.neighbors[0]=Au;var ju,Ku,Wu=Su.points[1],Yu=Su.points[2],Xu=Au.points[2];if(Wu.x==Xu.x&&Wu.y==Xu.y){var Hu=Au.points[1];Ku=Yu.x==Hu.x&&Yu.y==Hu.y}else Ku=!1;if(Ku)ju=!0;else{var Zu=Au.points[1];if(Wu.x==Zu.x&&Wu.y==Zu.y){var qu=Au.points[2];ju=Yu.x==qu.x&&Yu.y==qu.y}else ju=!1}if(ju)Au.neighbors[0]=Su;else{var $u,Qu,Ju=Au.points[0];if(Wu.x==Ju.x&&Wu.y==Ju.y){var n_=Au.points[2];Qu=Yu.x==n_.x&&Yu.y==n_.y}else Qu=!1;if(Qu)$u=!0;else{var e_=Au.points[2];if(Wu.x==e_.x&&Wu.y==e_.y){var t_=Au.points[0];$u=Yu.x==t_.x&&Yu.y==t_.y}else $u=!1}if($u)Au.neighbors[1]=Su;else{var i_,r_,l_=Au.points[0];if(Wu.x==l_.x&&Wu.y==l_.y){var s_=Au.points[1];r_=Yu.x==s_.x&&Yu.y==s_.y}else r_=!1;if(r_)i_=!0;else{var a_=Au.points[1];if(Wu.x==a_.x&&Wu.y==a_.y){var o_=Au.points[0];i_=Yu.x==o_.x&&Yu.y==o_.y}else i_=!1}if(!i_)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Au.neighbors[2]=Su}}}else{var p_,h_,u_,__=Su.points[0],c_=Su.points[2],d_=Au.points[0];if(__.x!=d_.x||__.y!=d_.y){var f_=Au.points[1];u_=__.x==f_.x&&__.y==f_.y}else u_=!0;if(u_)h_=!0;else{var x_=Au.points[2];h_=__.x==x_.x&&__.y==x_.y}if(h_){var b_,y_=Au.points[0];if(c_.x!=y_.x||c_.y!=y_.y){var v_=Au.points[1];b_=c_.x==v_.x&&c_.y==v_.y}else b_=!0;if(b_)p_=!0;else{var m_=Au.points[2];p_=c_.x==m_.x&&c_.y==m_.y}}else p_=!1;if(p_){Su.neighbors[1]=Au;var g_,z_,w_=Su.points[0],O_=Su.points[2],C_=Au.points[2];if(w_.x==C_.x&&w_.y==C_.y){var E_=Au.points[1];z_=O_.x==E_.x&&O_.y==E_.y}else z_=!1;if(z_)g_=!0;else{var U_=Au.points[1];if(w_.x==U_.x&&w_.y==U_.y){var M_=Au.points[2];g_=O_.x==M_.x&&O_.y==M_.y}else g_=!1}if(g_)Au.neighbors[0]=Su;else{var T_,k_,D_=Au.points[0];if(w_.x==D_.x&&w_.y==D_.y){var S_=Au.points[2];k_=O_.x==S_.x&&O_.y==S_.y}else k_=!1;if(k_)T_=!0;else{var A_=Au.points[2];if(w_.x==A_.x&&w_.y==A_.y){var P_=Au.points[0];T_=O_.x==P_.x&&O_.y==P_.y}else T_=!1}if(T_)Au.neighbors[1]=Su;else{var V_,I_,N_=Au.points[0];if(w_.x==N_.x&&w_.y==N_.y){var F_=Au.points[1];I_=O_.x==F_.x&&O_.y==F_.y}else I_=!1;if(I_)V_=!0;else{var R_=Au.points[1];if(w_.x==R_.x&&w_.y==R_.y){var L_=Au.points[0];V_=O_.x==L_.x&&O_.y==L_.y}else V_=!1}if(!V_)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Au.neighbors[2]=Su}}}else{var B_,G_,j_,K_=Su.points[0],W_=Su.points[1],Y_=Au.points[0];if(K_.x!=Y_.x||K_.y!=Y_.y){var X_=Au.points[1];j_=K_.x==X_.x&&K_.y==X_.y}else j_=!0;if(j_)G_=!0;else{var H_=Au.points[2];G_=K_.x==H_.x&&K_.y==H_.y}if(G_){var Z_,q_=Au.points[0];if(W_.x!=q_.x||W_.y!=q_.y){var $_=Au.points[1];Z_=W_.x==$_.x&&W_.y==$_.y}else Z_=!0;if(Z_)B_=!0;else{var Q_=Au.points[2];B_=W_.x==Q_.x&&W_.y==Q_.y}}else B_=!1;if(B_){Su.neighbors[2]=Au;var J_,nc,ec=Su.points[0],tc=Su.points[1],ic=Au.points[2];if(ec.x==ic.x&&ec.y==ic.y){var rc=Au.points[1];nc=tc.x==rc.x&&tc.y==rc.y}else nc=!1;if(nc)J_=!0;else{var lc=Au.points[1];if(ec.x==lc.x&&ec.y==lc.y){var sc=Au.points[2];J_=tc.x==sc.x&&tc.y==sc.y}else J_=!1}if(J_)Au.neighbors[0]=Su;else{var ac,oc,pc=Au.points[0];if(ec.x==pc.x&&ec.y==pc.y){var hc=Au.points[2];oc=tc.x==hc.x&&tc.y==hc.y}else oc=!1;if(oc)ac=!0;else{var uc=Au.points[2];if(ec.x==uc.x&&ec.y==uc.y){var _c=Au.points[0];ac=tc.x==_c.x&&tc.y==_c.y}else ac=!1}if(ac)Au.neighbors[1]=Su;else{var cc,dc,fc=Au.points[0];if(ec.x==fc.x&&ec.y==fc.y){var xc=Au.points[1];dc=tc.x==xc.x&&tc.y==xc.y}else dc=!1;if(dc)cc=!0;else{var bc=Au.points[1];if(ec.x==bc.x&&ec.y==bc.y){var yc=Au.points[0];cc=tc.x==yc.x&&tc.y==yc.y}else cc=!1}if(!cc)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Au.neighbors[2]=Su}}}}}var vc,mc,gc,zc=Rs.triangle,wc=Su.points[1],Oc=Su.points[2],Cc=zc.points[0];if(wc.x!=Cc.x||wc.y!=Cc.y){var Ec=zc.points[1];gc=wc.x==Ec.x&&wc.y==Ec.y}else gc=!0;if(gc)mc=!0;else{var Uc=zc.points[2];mc=wc.x==Uc.x&&wc.y==Uc.y}if(mc){var Mc,Tc=zc.points[0];if(Oc.x!=Tc.x||Oc.y!=Tc.y){var kc=zc.points[1];Mc=Oc.x==kc.x&&Oc.y==kc.y}else Mc=!0;if(Mc)vc=!0;else{var Dc=zc.points[2];vc=Oc.x==Dc.x&&Oc.y==Dc.y}}else vc=!1;if(vc){Su.neighbors[0]=zc;var Sc,Ac,Pc=Su.points[1],Vc=Su.points[2],Ic=zc.points[2];if(Pc.x==Ic.x&&Pc.y==Ic.y){var Nc=zc.points[1];Ac=Vc.x==Nc.x&&Vc.y==Nc.y}else Ac=!1;if(Ac)Sc=!0;else{var Fc=zc.points[1];if(Pc.x==Fc.x&&Pc.y==Fc.y){var Rc=zc.points[2];Sc=Vc.x==Rc.x&&Vc.y==Rc.y}else Sc=!1}if(Sc)zc.neighbors[0]=Su;else{var Lc,Bc,Gc=zc.points[0];if(Pc.x==Gc.x&&Pc.y==Gc.y){var jc=zc.points[2];Bc=Vc.x==jc.x&&Vc.y==jc.y}else Bc=!1;if(Bc)Lc=!0;else{var Kc=zc.points[2];if(Pc.x==Kc.x&&Pc.y==Kc.y){var Wc=zc.points[0];Lc=Vc.x==Wc.x&&Vc.y==Wc.y}else Lc=!1}if(Lc)zc.neighbors[1]=Su;else{var Yc,Xc,Hc=zc.points[0];if(Pc.x==Hc.x&&Pc.y==Hc.y){var Zc=zc.points[1];Xc=Vc.x==Zc.x&&Vc.y==Zc.y}else Xc=!1;if(Xc)Yc=!0;else{var qc=zc.points[1];if(Pc.x==qc.x&&Pc.y==qc.y){var $c=zc.points[0];Yc=Vc.x==$c.x&&Vc.y==$c.y}else Yc=!1}if(!Yc)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");zc.neighbors[2]=Su}}}else{var Qc,Jc,nd,ed=Su.points[0],td=Su.points[2],id=zc.points[0];if(ed.x!=id.x||ed.y!=id.y){var rd=zc.points[1];nd=ed.x==rd.x&&ed.y==rd.y}else nd=!0;if(nd)Jc=!0;else{var ld=zc.points[2];Jc=ed.x==ld.x&&ed.y==ld.y}if(Jc){var sd,ad=zc.points[0];if(td.x!=ad.x||td.y!=ad.y){var od=zc.points[1];sd=td.x==od.x&&td.y==od.y}else sd=!0;if(sd)Qc=!0;else{var pd=zc.points[2];Qc=td.x==pd.x&&td.y==pd.y}}else Qc=!1;if(Qc){Su.neighbors[1]=zc;var hd,ud,_d=Su.points[0],cd=Su.points[2],dd=zc.points[2];if(_d.x==dd.x&&_d.y==dd.y){var fd=zc.points[1];ud=cd.x==fd.x&&cd.y==fd.y}else ud=!1;if(ud)hd=!0;else{var xd=zc.points[1];if(_d.x==xd.x&&_d.y==xd.y){var bd=zc.points[2];hd=cd.x==bd.x&&cd.y==bd.y}else hd=!1}if(hd)zc.neighbors[0]=Su;else{var yd,vd,md=zc.points[0];if(_d.x==md.x&&_d.y==md.y){var gd=zc.points[2];vd=cd.x==gd.x&&cd.y==gd.y}else vd=!1;if(vd)yd=!0;else{var zd=zc.points[2];if(_d.x==zd.x&&_d.y==zd.y){var wd=zc.points[0];yd=cd.x==wd.x&&cd.y==wd.y}else yd=!1}if(yd)zc.neighbors[1]=Su;else{var Od,Cd,Ed=zc.points[0];if(_d.x==Ed.x&&_d.y==Ed.y){var Ud=zc.points[1];Cd=cd.x==Ud.x&&cd.y==Ud.y}else Cd=!1;if(Cd)Od=!0;else{var Md=zc.points[1];if(_d.x==Md.x&&_d.y==Md.y){var Td=zc.points[0];Od=cd.x==Td.x&&cd.y==Td.y}else Od=!1}if(!Od)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");zc.neighbors[2]=Su}}}else{var kd,Dd,Sd,Ad=Su.points[0],Pd=Su.points[1],Vd=zc.points[0];if(Ad.x!=Vd.x||Ad.y!=Vd.y){var Id=zc.points[1];Sd=Ad.x==Id.x&&Ad.y==Id.y}else Sd=!0;if(Sd)Dd=!0;else{var Nd=zc.points[2];Dd=Ad.x==Nd.x&&Ad.y==Nd.y}if(Dd){var Fd,Rd=zc.points[0];if(Pd.x!=Rd.x||Pd.y!=Rd.y){var Ld=zc.points[1];Fd=Pd.x==Ld.x&&Pd.y==Ld.y}else Fd=!0;if(Fd)kd=!0;else{var Bd=zc.points[2];kd=Pd.x==Bd.x&&Pd.y==Bd.y}}else kd=!1;if(kd){Su.neighbors[2]=zc;var Gd,jd,Kd=Su.points[0],Wd=Su.points[1],Yd=zc.points[2];if(Kd.x==Yd.x&&Kd.y==Yd.y){var Xd=zc.points[1];jd=Wd.x==Xd.x&&Wd.y==Xd.y}else jd=!1;if(jd)Gd=!0;else{var Hd=zc.points[1];if(Kd.x==Hd.x&&Kd.y==Hd.y){var Zd=zc.points[2];Gd=Wd.x==Zd.x&&Wd.y==Zd.y}else Gd=!1}if(Gd)zc.neighbors[0]=Su;else{var qd,$d,Qd=zc.points[0];if(Kd.x==Qd.x&&Kd.y==Qd.y){var Jd=zc.points[2];$d=Wd.x==Jd.x&&Wd.y==Jd.y}else $d=!1;if($d)qd=!0;else{var nf=zc.points[2];if(Kd.x==nf.x&&Kd.y==nf.y){var ef=zc.points[0];qd=Wd.x==ef.x&&Wd.y==ef.y}else qd=!1}if(qd)zc.neighbors[1]=Su;else{var tf,rf,lf=zc.points[0];if(Kd.x==lf.x&&Kd.y==lf.y){var sf=zc.points[1];rf=Wd.x==sf.x&&Wd.y==sf.y}else rf=!1;if(rf)tf=!0;else{var af=zc.points[1];if(Kd.x==af.x&&Kd.y==af.y){var of=zc.points[0];tf=Wd.x==of.x&&Wd.y==of.y}else tf=!1}if(!tf)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");zc.neighbors[2]=Su}}}}}if(Rs.prev.next=Rs.next,Rs.next.prev=Rs.prev,!this.legalize(Su)){var pf=this.context;if(null==Su.neighbors[0]){var hf=pf.front,uf=Su.points[0],_f=Su.points,cf=-1;null==cf&&(cf=0);for(var df=cf,ff=!1,xf=0;xf<3;){for(var bf=xf++;df<0;)df+=3;for(;df>2;)df-=3;var yf=Su.points[bf];if(uf.x==yf.x&&uf.y==yf.y){ff=!0;break}++df}if(!ff)throw haxe_Exception.thrown("Triangle::Point not in triangle");var vf=_f[df],mf=vf.x,gf=hf.search_node,zf=gf.point.x;if(mf==zf){var wf=gf.point;if(vf.x!=wf.x||vf.y!=wf.y){var Of=gf.prev.point;if(vf.x==Of.x&&vf.y==Of.y)gf=gf.prev;else{var Cf=gf.next.point;if(vf.x!=Cf.x||vf.y!=Cf.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");gf=gf.next}}}else if(mf<zf)for(;null!=(gf=gf.prev);){var Ef=gf.point;if(vf.x==Ef.x&&vf.y==Ef.y)break}else for(;null!=(gf=gf.next);){var Uf=gf.point;if(vf.x==Uf.x&&vf.y==Uf.y)break}null!=gf&&(hf.search_node=gf);null!=gf&&(gf.triangle=Su)}if(null==Su.neighbors[1]){var Mf=pf.front,Tf=Su.points[1],kf=Su.points,Df=-1;null==Df&&(Df=0);for(var Sf=Df,Af=!1,Pf=0;Pf<3;){for(var Vf=Pf++;Sf<0;)Sf+=3;for(;Sf>2;)Sf-=3;var If=Su.points[Vf];if(Tf.x==If.x&&Tf.y==If.y){Af=!0;break}++Sf}if(!Af)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Nf=kf[Sf],Ff=Nf.x,Rf=Mf.search_node,Lf=Rf.point.x;if(Ff==Lf){var Bf=Rf.point;if(Nf.x!=Bf.x||Nf.y!=Bf.y){var Gf=Rf.prev.point;if(Nf.x==Gf.x&&Nf.y==Gf.y)Rf=Rf.prev;else{var jf=Rf.next.point;if(Nf.x!=jf.x||Nf.y!=jf.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Rf=Rf.next}}}else if(Ff<Lf)for(;null!=(Rf=Rf.prev);){var Kf=Rf.point;if(Nf.x==Kf.x&&Nf.y==Kf.y)break}else for(;null!=(Rf=Rf.next);){var Wf=Rf.point;if(Nf.x==Wf.x&&Nf.y==Wf.y)break}null!=Rf&&(Mf.search_node=Rf);null!=Rf&&(Rf.triangle=Su)}if(null==Su.neighbors[2]){var Yf=pf.front,Xf=Su.points[2],Hf=Su.points,Zf=-1;null==Zf&&(Zf=0);for(var qf=Zf,$f=!1,Qf=0;Qf<3;){for(var Jf=Qf++;qf<0;)qf+=3;for(;qf>2;)qf-=3;var nx=Su.points[Jf];if(Xf.x==nx.x&&Xf.y==nx.y){$f=!0;break}++qf}if(!$f)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ex=Hf[qf],tx=ex.x,ix=Yf.search_node,rx=ix.point.x;if(tx==rx){var lx=ix.point;if(ex.x!=lx.x||ex.y!=lx.y){var sx=ix.prev.point;if(ex.x==sx.x&&ex.y==sx.y)ix=ix.prev;else{var ax=ix.next.point;if(ex.x!=ax.x||ex.y!=ax.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ix=ix.next}}}else if(tx<rx)for(;null!=(ix=ix.prev);){var ox=ix.point;if(ex.x==ox.x&&ex.y==ox.y)break}else for(;null!=(ix=ix.next);){var px=ix.point;if(ex.x==px.x&&ex.y==px.y)break}null!=ix&&(Yf.search_node=ix);null!=ix&&(ix.triangle=Su)}}Rs=Rs.prev}if(null!=rt.next&&null!=rt.next.next&&(it=Math.atan2(rt.point.y-rt.next.next.point.y,rt.point.x-rt.next.next.point.x))<poly2tri_Constants.PI_3div4){var hx=rt.point,ux=rt.next.point,_x=rt.next.next.point,cx=(hx.x-_x.x)*(ux.y-_x.y)-(hx.y-_x.y)*(ux.x-_x.x);for(this.context.basin.left_node=-1==(cx>-poly2tri_Constants.EPSILON&&cx<poly2tri_Constants.EPSILON?0:cx>0?-1:1)?rt.next.next:rt.next,this.context.basin.bottom_node=this.context.basin.left_node;null!=this.context.basin.bottom_node.next&&this.context.basin.bottom_node.point.y>=this.context.basin.bottom_node.next.point.y;)this.context.basin.bottom_node=this.context.basin.bottom_node.next;if(this.context.basin.bottom_node!=this.context.basin.left_node){for(this.context.basin.right_node=this.context.basin.bottom_node;null!=this.context.basin.right_node.next&&this.context.basin.right_node.point.y<this.context.basin.right_node.next.point.y;)this.context.basin.right_node=this.context.basin.right_node.next;this.context.basin.right_node!=this.context.basin.bottom_node&&(this.context.basin.width=this.context.basin.right_node.point.x-this.context.basin.left_node.point.x,this.context.basin.left_highest=this.context.basin.left_node.point.y>this.context.basin.right_node.point.y,this.fillBasinReq(this.context.basin.bottom_node))}}var dx=rt,fx=0;null==i.edge_list&&(i.edge_list=poly2tri_Pool.getEdgeArray());for(var xx=i.edge_list.length;fx<xx;){var bx=fx++;null==i.edge_list&&(i.edge_list=poly2tri_Pool.getEdgeArray());var yx=i.edge_list[bx];this.context.edge_event.constrained_edge=yx,this.context.edge_event.right=yx.p.x>yx.q.x;var vx=dx.triangle,mx=yx.p,gx=yx.q,zx=-1,wx=vx.points[0];if(mx.x==wx.x&&mx.y==wx.y){var Ox=vx.points[1];if(gx.x==Ox.x&&gx.y==Ox.y)zx=2;else{var Cx=vx.points[2];gx.x==Cx.x&&gx.y==Cx.y&&(zx=1)}}else{var Ex=vx.points[1];if(mx.x==Ex.x&&mx.y==Ex.y){var Ux=vx.points[2];if(gx.x==Ux.x&&gx.y==Ux.y)zx=0;else{var Mx=vx.points[0];gx.x==Mx.x&&gx.y==Mx.y&&(zx=2)}}else{var Tx=vx.points[2];if(mx.x==Tx.x&&mx.y==Tx.y){var kx=vx.points[0];if(gx.x==kx.x&&gx.y==kx.y)zx=1;else{var Dx=vx.points[1];gx.x==Dx.x&&gx.y==Dx.y&&(zx=0)}}}}var Sx=zx,Ax=!1;if(-1!=Sx){vx.constrained_edge[Sx]=!0;var Px=vx.neighbors[Sx];if(null!=Px){var Vx,Ix,Nx=Px.points[0];if(gx.x==Nx.x&&gx.y==Nx.y){var Fx=Px.points[1];Ix=mx.x==Fx.x&&mx.y==Fx.y}else Ix=!1;if(Ix)Vx=!0;else{var Rx=Px.points[1];if(gx.x==Rx.x&&gx.y==Rx.y){var Lx=Px.points[0];Vx=mx.x==Lx.x&&mx.y==Lx.y}else Vx=!1}if(Vx)Px.constrained_edge[2]=!0;else{var Bx,Gx,jx=Px.points[0];if(gx.x==jx.x&&gx.y==jx.y){var Kx=Px.points[2];Gx=mx.x==Kx.x&&mx.y==Kx.y}else Gx=!1;if(Gx)Bx=!0;else{var Wx=Px.points[2];if(gx.x==Wx.x&&gx.y==Wx.y){var Yx=Px.points[0];Bx=mx.x==Yx.x&&mx.y==Yx.y}else Bx=!1}if(Bx)Px.constrained_edge[1]=!0;else{var Xx,Hx,Zx=Px.points[1];if(gx.x==Zx.x&&gx.y==Zx.y){var qx=Px.points[2];Hx=mx.x==qx.x&&mx.y==qx.y}else Hx=!1;if(Hx)Xx=!0;else{var $x=Px.points[2];if(gx.x==$x.x&&gx.y==$x.y){var Qx=Px.points[1];Xx=mx.x==Qx.x&&mx.y==Qx.y}else Xx=!1}Xx&&(Px.constrained_edge[0]=!0)}}}Ax=!0}if(!Ax){this.context.edge_event.right?this.fillRightAboveEdgeEvent(yx,dx):this.fillLeftAboveEdgeEvent(yx,dx);var Jx=yx.p,nb=yx.q,eb=dx.triangle,tb=yx.q,ib=-1,rb=eb.points[0];if(Jx.x==rb.x&&Jx.y==rb.y){var lb=eb.points[1];if(nb.x==lb.x&&nb.y==lb.y)ib=2;else{var sb=eb.points[2];nb.x==sb.x&&nb.y==sb.y&&(ib=1)}}else{var ab=eb.points[1];if(Jx.x==ab.x&&Jx.y==ab.y){var ob=eb.points[2];if(nb.x==ob.x&&nb.y==ob.y)ib=0;else{var pb=eb.points[0];nb.x==pb.x&&nb.y==pb.y&&(ib=2)}}else{var hb=eb.points[2];if(Jx.x==hb.x&&Jx.y==hb.y){var ub=eb.points[0];if(nb.x==ub.x&&nb.y==ub.y)ib=1;else{var _b=eb.points[1];nb.x==_b.x&&nb.y==_b.y&&(ib=0)}}}}var cb=ib,db=!1;if(-1!=cb){eb.constrained_edge[cb]=!0;var fb=eb.neighbors[cb];if(null!=fb){var xb,bb,yb=fb.points[0];if(nb.x==yb.x&&nb.y==yb.y){var vb=fb.points[1];bb=Jx.x==vb.x&&Jx.y==vb.y}else bb=!1;if(bb)xb=!0;else{var mb=fb.points[1];if(nb.x==mb.x&&nb.y==mb.y){var gb=fb.points[0];xb=Jx.x==gb.x&&Jx.y==gb.y}else xb=!1}if(xb)fb.constrained_edge[2]=!0;else{var zb,wb,Ob=fb.points[0];if(nb.x==Ob.x&&nb.y==Ob.y){var Cb=fb.points[2];wb=Jx.x==Cb.x&&Jx.y==Cb.y}else wb=!1;if(wb)zb=!0;else{var Eb=fb.points[2];if(nb.x==Eb.x&&nb.y==Eb.y){var Ub=fb.points[0];zb=Jx.x==Ub.x&&Jx.y==Ub.y}else zb=!1}if(zb)fb.constrained_edge[1]=!0;else{var Mb,Tb,kb=fb.points[1];if(nb.x==kb.x&&nb.y==kb.y){var Db=fb.points[2];Tb=Jx.x==Db.x&&Jx.y==Db.y}else Tb=!1;if(Tb)Mb=!0;else{var Sb=fb.points[2];if(nb.x==Sb.x&&nb.y==Sb.y){var Ab=fb.points[1];Mb=Jx.x==Ab.x&&Jx.y==Ab.y}else Mb=!1}Mb&&(fb.constrained_edge[0]=!0)}}}db=!0}if(!db){var Pb=eb.points,Vb=1;null==Vb&&(Vb=0);for(var Ib=Vb,Nb=!1,Fb=0;Fb<3;){for(var Rb=Fb++;Ib<0;)Ib+=3;for(;Ib>2;)Ib-=3;var Lb=eb.points[Rb];if(tb.x==Lb.x&&tb.y==Lb.y){Nb=!0;break}++Ib}if(!Nb)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Bb=Pb[Ib],Gb=(nb.x-Jx.x)*(Bb.y-Jx.y)-(nb.y-Jx.y)*(Bb.x-Jx.x),jb=Gb>-poly2tri_Constants.EPSILON&&Gb<poly2tri_Constants.EPSILON?0:Gb>0?-1:1;if(0==jb)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");var Kb=eb.points,Wb=-1;null==Wb&&(Wb=0);for(var Yb=Wb,Xb=!1,Hb=0;Hb<3;){for(var Zb=Hb++;Yb<0;)Yb+=3;for(;Yb>2;)Yb-=3;var qb=eb.points[Zb];if(tb.x==qb.x&&tb.y==qb.y){Xb=!0;break}++Yb}if(!Xb)throw haxe_Exception.thrown("Triangle::Point not in triangle");var $b=Kb[Yb],Qb=(nb.x-Jx.x)*($b.y-Jx.y)-(nb.y-Jx.y)*($b.x-Jx.x),Jb=Qb>-poly2tri_Constants.EPSILON&&Qb<poly2tri_Constants.EPSILON?0:Qb>0?-1:1;if(0==Jb)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if(jb==Jb){if(1==jb){var ny=eb.neighbors,ey=-1;null==ey&&(ey=0);for(var ty=ey,iy=!1,ry=0;ry<3;){for(var ly=ry++;ty<0;)ty+=3;for(;ty>2;)ty-=3;var sy=eb.points[ly];if(tb.x==sy.x&&tb.y==sy.y){iy=!0;break}++ty}if(!iy)throw haxe_Exception.thrown("Triangle::Point not in triangle");eb=ny[ty]}else{var ay=eb.neighbors,oy=1;null==oy&&(oy=0);for(var py=oy,hy=!1,uy=0;uy<3;){for(var _y=uy++;py<0;)py+=3;for(;py>2;)py-=3;var cy=eb.points[_y];if(tb.x==cy.x&&tb.y==cy.y){hy=!0;break}++py}if(!hy)throw haxe_Exception.thrown("Triangle::Point not in triangle");eb=ay[py]}var dy=eb,fy=-1,xy=dy.points[0];if(Jx.x==xy.x&&Jx.y==xy.y){var by=dy.points[1];if(nb.x==by.x&&nb.y==by.y)fy=2;else{var yy=dy.points[2];nb.x==yy.x&&nb.y==yy.y&&(fy=1)}}else{var vy=dy.points[1];if(Jx.x==vy.x&&Jx.y==vy.y){var my=dy.points[2];if(nb.x==my.x&&nb.y==my.y)fy=0;else{var gy=dy.points[0];nb.x==gy.x&&nb.y==gy.y&&(fy=2)}}else{var zy=dy.points[2];if(Jx.x==zy.x&&Jx.y==zy.y){var wy=dy.points[0];if(nb.x==wy.x&&nb.y==wy.y)fy=1;else{var Oy=dy.points[1];nb.x==Oy.x&&nb.y==Oy.y&&(fy=0)}}}}var Cy=fy,Ey=!1;if(-1!=Cy){dy.constrained_edge[Cy]=!0;var Uy=dy.neighbors[Cy];if(null!=Uy){var My,Ty,ky=Uy.points[0];if(nb.x==ky.x&&nb.y==ky.y){var Dy=Uy.points[1];Ty=Jx.x==Dy.x&&Jx.y==Dy.y}else Ty=!1;if(Ty)My=!0;else{var Sy=Uy.points[1];if(nb.x==Sy.x&&nb.y==Sy.y){var Ay=Uy.points[0];My=Jx.x==Ay.x&&Jx.y==Ay.y}else My=!1}if(My)Uy.constrained_edge[2]=!0;else{var Py,Vy,Iy=Uy.points[0];if(nb.x==Iy.x&&nb.y==Iy.y){var Ny=Uy.points[2];Vy=Jx.x==Ny.x&&Jx.y==Ny.y}else Vy=!1;if(Vy)Py=!0;else{var Fy=Uy.points[2];if(nb.x==Fy.x&&nb.y==Fy.y){var Ry=Uy.points[0];Py=Jx.x==Ry.x&&Jx.y==Ry.y}else Py=!1}if(Py)Uy.constrained_edge[1]=!0;else{var Ly,By,Gy=Uy.points[1];if(nb.x==Gy.x&&nb.y==Gy.y){var jy=Uy.points[2];By=Jx.x==jy.x&&Jx.y==jy.y}else By=!1;if(By)Ly=!0;else{var Ky=Uy.points[2];if(nb.x==Ky.x&&nb.y==Ky.y){var Wy=Uy.points[1];Ly=Jx.x==Wy.x&&Jx.y==Wy.y}else Ly=!1}Ly&&(Uy.constrained_edge[0]=!0)}}}Ey=!0}if(!Ey){var Yy=dy.points,Xy=1;null==Xy&&(Xy=0);for(var Hy=Xy,Zy=!1,qy=0;qy<3;){for(var $y=qy++;Hy<0;)Hy+=3;for(;Hy>2;)Hy-=3;var Qy=dy.points[$y];if(tb.x==Qy.x&&tb.y==Qy.y){Zy=!0;break}++Hy}if(!Zy)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Jy=Yy[Hy],nv=(nb.x-Jx.x)*(Jy.y-Jx.y)-(nb.y-Jx.y)*(Jy.x-Jx.x),ev=nv>-poly2tri_Constants.EPSILON&&nv<poly2tri_Constants.EPSILON?0:nv>0?-1:1;if(0==ev)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");var tv=dy.points,iv=-1;null==iv&&(iv=0);for(var rv=iv,lv=!1,sv=0;sv<3;){for(var av=sv++;rv<0;)rv+=3;for(;rv>2;)rv-=3;var ov=dy.points[av];if(tb.x==ov.x&&tb.y==ov.y){lv=!0;break}++rv}if(!lv)throw haxe_Exception.thrown("Triangle::Point not in triangle");var pv=tv[rv],hv=(nb.x-Jx.x)*(pv.y-Jx.y)-(nb.y-Jx.y)*(pv.x-Jx.x),uv=hv>-poly2tri_Constants.EPSILON&&hv<poly2tri_Constants.EPSILON?0:hv>0?-1:1;if(0==uv)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if(ev==uv){if(1==ev){var _v=dy.neighbors,cv=-1;null==cv&&(cv=0);for(var dv=cv,fv=!1,xv=0;xv<3;){for(var bv=xv++;dv<0;)dv+=3;for(;dv>2;)dv-=3;var yv=dy.points[bv];if(tb.x==yv.x&&tb.y==yv.y){fv=!0;break}++dv}if(!fv)throw haxe_Exception.thrown("Triangle::Point not in triangle");dy=_v[dv]}else{var vv=dy.neighbors,mv=1;null==mv&&(mv=0);for(var gv=mv,zv=!1,wv=0;wv<3;){for(var Ov=wv++;gv<0;)gv+=3;for(;gv>2;)gv-=3;var Cv=dy.points[Ov];if(tb.x==Cv.x&&tb.y==Cv.y){zv=!0;break}++gv}if(!zv)throw haxe_Exception.thrown("Triangle::Point not in triangle");dy=vv[gv]}this.edgeEventByPoints(Jx,nb,dy,tb)}else this.flipEdgeEvent(Jx,nb,dy,tb)}}else this.flipEdgeEvent(Jx,nb,eb,tb)}}}}},finalizationPolygon:function(){for(var n=this.context.front.head.next.triangle,e=this.context.front.head.next.point;;){var t=n.constrained_edge,i=1;null==i&&(i=0);for(var r=i,l=!1,s=0;s<3;){for(var a=s++;r<0;)r+=3;for(;r>2;)r-=3;var o=n.points[a];if(e.x==o.x&&e.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");if(t[r])break;var p=n.neighbors,h=-1;null==h&&(h=0);for(var u=h,_=!1,c=0;c<3;){for(var d=c++;u<0;)u+=3;for(;u>2;)u-=3;var f=n.points[d];if(e.x==f.x&&e.y==f.y){_=!0;break}++u}if(!_)throw haxe_Exception.thrown("Triangle::Point not in triangle");n=p[u]}this.context.meshClean(n)},pointEvent:function(n){var e=this.context.front,t=n.x,i=null;if(t<(r=e.search_node).value){for(;null!=(r=r.prev);)if(t>=r.value){e.search_node=r,i=r;break}}else for(;null!=(r=r.next);)if(t<r.value){e.search_node=r.prev,i=r.prev;break}var r=i,l=poly2tri_Pool.getTriangle(n,r.point,r.next.point),s=r.triangle,a=l.points[1],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[0]=s;a=l.points[1],o=l.points[2],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{a=l.points[0],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[1]=s;a=l.points[0],o=l.points[2],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{a=l.points[0],o=l.points[1],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[2]=s;a=l.points[0],o=l.points[1],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}}}var h=poly2tri_Pool.getNode(n);if(h.next=r.next,h.prev=r,r.next.prev=h,r.next=h,!this.legalize(l)){e=this.context;if(null==l.neighbors[0]){var u=e.front,_=l.points[0],c=l.points;null==(Si=-1)&&(Si=0);for(var d=Si,f=!1,x=0;x<3;){for(var b=x++;d<0;)d+=3;for(;d>2;)d-=3;s=l.points[b];if(_.x==s.x&&_.y==s.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(Fi=c[d]).x)==(Vi=(Pi=u.search_node).point.x)){s=Pi.point;if(Fi.x!=s.x||Fi.y!=s.y){s=Pi.prev.point;if(Fi.x==s.x&&Fi.y==s.y)Pi=Pi.prev;else{s=Pi.next.point;if(Fi.x!=s.x||Fi.y!=s.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Pi=Pi.next}}}else if(Ai<Vi)for(;null!=(Pi=Pi.prev);){s=Pi.point;if(Fi.x==s.x&&Fi.y==s.y)break}else for(;null!=(Pi=Pi.next);){s=Pi.point;if(Fi.x==s.x&&Fi.y==s.y)break}null!=Pi&&(u.search_node=Pi),null!=(Ii=Pi)&&(Ii.triangle=l)}if(null==l.neighbors[1]){u=e.front,_=l.points[1],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;s=l.points[b];if(_.x==s.x&&_.y==s.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(Fi=c[d]).x)==(Vi=(Pi=u.search_node).point.x)){s=Pi.point;if(Fi.x!=s.x||Fi.y!=s.y){s=Pi.prev.point;if(Fi.x==s.x&&Fi.y==s.y)Pi=Pi.prev;else{s=Pi.next.point;if(Fi.x!=s.x||Fi.y!=s.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Pi=Pi.next}}}else if(Ai<Vi)for(;null!=(Pi=Pi.prev);){s=Pi.point;if(Fi.x==s.x&&Fi.y==s.y)break}else for(;null!=(Pi=Pi.next);){s=Pi.point;if(Fi.x==s.x&&Fi.y==s.y)break}null!=Pi&&(u.search_node=Pi),null!=(Ii=Pi)&&(Ii.triangle=l)}if(null==l.neighbors[2]){u=e.front,_=l.points[2],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;s=l.points[b];if(_.x==s.x&&_.y==s.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(Fi=c[d]).x)==(Vi=(Pi=u.search_node).point.x)){s=Pi.point;if(Fi.x!=s.x||Fi.y!=s.y){s=Pi.prev.point;if(Fi.x==s.x&&Fi.y==s.y)Pi=Pi.prev;else{s=Pi.next.point;if(Fi.x!=s.x||Fi.y!=s.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Pi=Pi.next}}}else if(Ai<Vi)for(;null!=(Pi=Pi.prev);){s=Pi.point;if(Fi.x==s.x&&Fi.y==s.y)break}else for(;null!=(Pi=Pi.next);){s=Pi.point;if(Fi.x==s.x&&Fi.y==s.y)break}null!=Pi&&(u.search_node=Pi),null!=(Ii=Pi)&&(Ii.triangle=l)}}var y,v=h;if(n.x<=r.point.x+poly2tri_Constants.EPSILON){l=poly2tri_Pool.getTriangle(r.prev.point,r.point,r.next.point),s=r.prev.triangle,a=l.points[1],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[0]=s;a=l.points[1],o=l.points[2],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{a=l.points[0],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[1]=s;a=l.points[0],o=l.points[2],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{a=l.points[0],o=l.points[1],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[2]=s;a=l.points[0],o=l.points[1],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}}}s=r.triangle,a=l.points[1],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[0]=s;a=l.points[1],o=l.points[2],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{a=l.points[0],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[1]=s;a=l.points[0],o=l.points[2],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{a=l.points[0],o=l.points[1],p=s.points[0];if(a.x!=p.x||a.y!=p.y){p=s.points[1];Mt=a.x==p.x&&a.y==p.y}else Mt=!0;if(Mt)Ut=!0;else{p=s.points[2];Ut=a.x==p.x&&a.y==p.y}if(Ut){p=s.points[0];if(o.x!=p.x||o.y!=p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!0;if(Ut)Et=!0;else{p=s.points[2];Et=o.x==p.x&&o.y==p.y}}else Et=!1;if(Et){l.neighbors[2]=s;a=l.points[0],o=l.points[1],p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[2];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[0]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[2];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[2];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(Et)s.neighbors[1]=l;else{p=s.points[0];if(a.x==p.x&&a.y==p.y){p=s.points[1];Ut=o.x==p.x&&o.y==p.y}else Ut=!1;if(Ut)Et=!0;else{p=s.points[1];if(a.x==p.x&&a.y==p.y){p=s.points[0];Et=o.x==p.x&&o.y==p.y}else Et=!1}if(!Et)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}}}if(r.prev.next=r.next,r.next.prev=r.prev,!this.legalize(l)){e=this.context;if(null==l.neighbors[0]){u=e.front,_=l.points[0],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;s=l.points[b];if(_.x==s.x&&_.y==s.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(n=c[d]).x)==(Vi=(r=u.search_node).point.x)){s=r.point;if(n.x!=s.x||n.y!=s.y){s=r.prev.point;if(n.x==s.x&&n.y==s.y)r=r.prev;else{s=r.next.point;if(n.x!=s.x||n.y!=s.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");r=r.next}}}else if(Ai<Vi)for(;null!=(r=r.prev);){s=r.point;if(n.x==s.x&&n.y==s.y)break}else for(;null!=(r=r.next);){s=r.point;if(n.x==s.x&&n.y==s.y)break}null!=r&&(u.search_node=r),null!=(Ii=r)&&(Ii.triangle=l)}if(null==l.neighbors[1]){u=e.front,_=l.points[1],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;s=l.points[b];if(_.x==s.x&&_.y==s.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(n=c[d]).x)==(Vi=(r=u.search_node).point.x)){s=r.point;if(n.x!=s.x||n.y!=s.y){s=r.prev.point;if(n.x==s.x&&n.y==s.y)r=r.prev;else{s=r.next.point;if(n.x!=s.x||n.y!=s.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");r=r.next}}}else if(Ai<Vi)for(;null!=(r=r.prev);){s=r.point;if(n.x==s.x&&n.y==s.y)break}else for(;null!=(r=r.next);){s=r.point;if(n.x==s.x&&n.y==s.y)break}null!=r&&(u.search_node=r),null!=(Ii=r)&&(Ii.triangle=l)}if(null==l.neighbors[2]){u=e.front,_=l.points[2],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;s=l.points[b];if(_.x==s.x&&_.y==s.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(n=c[d]).x)==(Vi=(r=u.search_node).point.x)){s=r.point;if(n.x!=s.x||n.y!=s.y){s=r.prev.point;if(n.x==s.x&&n.y==s.y)r=r.prev;else{s=r.next.point;if(n.x!=s.x||n.y!=s.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");r=r.next}}}else if(Ai<Vi)for(;null!=(r=r.prev);){s=r.point;if(n.x==s.x&&n.y==s.y)break}else for(;null!=(r=r.next);){s=r.point;if(n.x==s.x&&n.y==s.y)break}null!=r&&(u.search_node=r),null!=(Ii=r)&&(Ii.triangle=l)}}}for(r=v.next;null!=r.next;){var m=r.next.point.x-r.point.x,g=r.next.point.y-r.point.y,z=r.prev.point.x-r.point.x,w=r.prev.point.y-r.point.y;if((y=Math.atan2(m*w-g*z,m*z+g*w))>poly2tri_Constants.PI_2||y<-poly2tri_Constants.PI_2)break;l=poly2tri_Pool.getTriangle(r.prev.point,r.point,r.next.point),s=r.prev.triangle,a=l.points[1],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){var O=s.points[1];Mt=a.x==O.x&&a.y==O.y}else Mt=!0;if(Mt)Ut=!0;else{var C=s.points[2];Ut=a.x==C.x&&a.y==C.y}if(Ut){var E=s.points[0];if(o.x!=E.x||o.y!=E.y){var U=s.points[1];Tt=o.x==U.x&&o.y==U.y}else Tt=!0;if(Tt)Et=!0;else{var M=s.points[2];Et=o.x==M.x&&o.y==M.y}}else Et=!1;if(Et){l.neighbors[0]=s;var T=l.points[1],k=l.points[2],D=s.points[2];if(T.x==D.x&&T.y==D.y){var S=s.points[1];Dt=k.x==S.x&&k.y==S.y}else Dt=!1;if(Dt)kt=!0;else{var A=s.points[1];if(T.x==A.x&&T.y==A.y){var P=s.points[2];kt=k.x==P.x&&k.y==P.y}else kt=!1}if(kt)s.neighbors[0]=l;else{var V=s.points[0];if(T.x==V.x&&T.y==V.y){var I=s.points[2];At=k.x==I.x&&k.y==I.y}else At=!1;if(At)St=!0;else{var N=s.points[2];if(T.x==N.x&&T.y==N.y){var F=s.points[0];St=k.x==F.x&&k.y==F.y}else St=!1}if(St)s.neighbors[1]=l;else{var R=s.points[0];if(T.x==R.x&&T.y==R.y){var L=s.points[1];Vt=k.x==L.x&&k.y==L.y}else Vt=!1;if(Vt)Pt=!0;else{var B=s.points[1];if(T.x==B.x&&T.y==B.y){var G=s.points[0];Pt=k.x==G.x&&k.y==G.y}else Pt=!1}if(!Pt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{var j=l.points[0],K=l.points[2],W=s.points[0];if(j.x!=W.x||j.y!=W.y){var Y=s.points[1];Ft=j.x==Y.x&&j.y==Y.y}else Ft=!0;if(Ft)Nt=!0;else{var X=s.points[2];Nt=j.x==X.x&&j.y==X.y}if(Nt){var H=s.points[0];if(K.x!=H.x||K.y!=H.y){var Z=s.points[1];Rt=K.x==Z.x&&K.y==Z.y}else Rt=!0;if(Rt)It=!0;else{var q=s.points[2];It=K.x==q.x&&K.y==q.y}}else It=!1;if(It){l.neighbors[1]=s;var $=l.points[0],Q=l.points[2],J=s.points[2];if($.x==J.x&&$.y==J.y){var nn=s.points[1];Bt=Q.x==nn.x&&Q.y==nn.y}else Bt=!1;if(Bt)Lt=!0;else{var en=s.points[1];if($.x==en.x&&$.y==en.y){var tn=s.points[2];Lt=Q.x==tn.x&&Q.y==tn.y}else Lt=!1}if(Lt)s.neighbors[0]=l;else{var rn=s.points[0];if($.x==rn.x&&$.y==rn.y){var ln=s.points[2];jt=Q.x==ln.x&&Q.y==ln.y}else jt=!1;if(jt)Gt=!0;else{var sn=s.points[2];if($.x==sn.x&&$.y==sn.y){var an=s.points[0];Gt=Q.x==an.x&&Q.y==an.y}else Gt=!1}if(Gt)s.neighbors[1]=l;else{var on=s.points[0];if($.x==on.x&&$.y==on.y){var pn=s.points[1];Wt=Q.x==pn.x&&Q.y==pn.y}else Wt=!1;if(Wt)Kt=!0;else{var hn=s.points[1];if($.x==hn.x&&$.y==hn.y){var un=s.points[0];Kt=Q.x==un.x&&Q.y==un.y}else Kt=!1}if(!Kt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{var _n=l.points[0],cn=l.points[1],dn=s.points[0];if(_n.x!=dn.x||_n.y!=dn.y){var xn=s.points[1];Ht=_n.x==xn.x&&_n.y==xn.y}else Ht=!0;if(Ht)Xt=!0;else{var bn=s.points[2];Xt=_n.x==bn.x&&_n.y==bn.y}if(Xt){var yn=s.points[0];if(cn.x!=yn.x||cn.y!=yn.y){var vn=s.points[1];Zt=cn.x==vn.x&&cn.y==vn.y}else Zt=!0;if(Zt)Yt=!0;else{var mn=s.points[2];Yt=cn.x==mn.x&&cn.y==mn.y}}else Yt=!1;if(Yt){l.neighbors[2]=s;var gn=l.points[0],zn=l.points[1],wn=s.points[2];if(gn.x==wn.x&&gn.y==wn.y){var On=s.points[1];$t=zn.x==On.x&&zn.y==On.y}else $t=!1;if($t)qt=!0;else{var Cn=s.points[1];if(gn.x==Cn.x&&gn.y==Cn.y){var En=s.points[2];qt=zn.x==En.x&&zn.y==En.y}else qt=!1}if(qt)s.neighbors[0]=l;else{var Un=s.points[0];if(gn.x==Un.x&&gn.y==Un.y){var Mn=s.points[2];Jt=zn.x==Mn.x&&zn.y==Mn.y}else Jt=!1;if(Jt)Qt=!0;else{var Tn=s.points[2];if(gn.x==Tn.x&&gn.y==Tn.y){var kn=s.points[0];Qt=zn.x==kn.x&&zn.y==kn.y}else Qt=!1}if(Qt)s.neighbors[1]=l;else{var Dn=s.points[0];if(gn.x==Dn.x&&gn.y==Dn.y){var Sn=s.points[1];ei=zn.x==Sn.x&&zn.y==Sn.y}else ei=!1;if(ei)ni=!0;else{var An=s.points[1];if(gn.x==An.x&&gn.y==An.y){var Pn=s.points[0];ni=zn.x==Pn.x&&zn.y==Pn.y}else ni=!1}if(!ni)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}}}var Vn=r.triangle,In=l.points[1],Nn=l.points[2],Fn=Vn.points[0];if(In.x!=Fn.x||In.y!=Fn.y){var Rn=Vn.points[1];ri=In.x==Rn.x&&In.y==Rn.y}else ri=!0;if(ri)ii=!0;else{var Ln=Vn.points[2];ii=In.x==Ln.x&&In.y==Ln.y}if(ii){var Bn=Vn.points[0];if(Nn.x!=Bn.x||Nn.y!=Bn.y){var Gn=Vn.points[1];li=Nn.x==Gn.x&&Nn.y==Gn.y}else li=!0;if(li)ti=!0;else{var jn=Vn.points[2];ti=Nn.x==jn.x&&Nn.y==jn.y}}else ti=!1;if(ti){l.neighbors[0]=Vn;var Kn=l.points[1],Wn=l.points[2],Yn=Vn.points[2];if(Kn.x==Yn.x&&Kn.y==Yn.y){var Xn=Vn.points[1];ai=Wn.x==Xn.x&&Wn.y==Xn.y}else ai=!1;if(ai)si=!0;else{var Hn=Vn.points[1];if(Kn.x==Hn.x&&Kn.y==Hn.y){var Zn=Vn.points[2];si=Wn.x==Zn.x&&Wn.y==Zn.y}else si=!1}if(si)Vn.neighbors[0]=l;else{var qn=Vn.points[0];if(Kn.x==qn.x&&Kn.y==qn.y){var $n=Vn.points[2];pi=Wn.x==$n.x&&Wn.y==$n.y}else pi=!1;if(pi)oi=!0;else{var Qn=Vn.points[2];if(Kn.x==Qn.x&&Kn.y==Qn.y){var Jn=Vn.points[0];oi=Wn.x==Jn.x&&Wn.y==Jn.y}else oi=!1}if(oi)Vn.neighbors[1]=l;else{var ne=Vn.points[0];if(Kn.x==ne.x&&Kn.y==ne.y){var ee=Vn.points[1];ui=Wn.x==ee.x&&Wn.y==ee.y}else ui=!1;if(ui)hi=!0;else{var te=Vn.points[1];if(Kn.x==te.x&&Kn.y==te.y){var ie=Vn.points[0];hi=Wn.x==ie.x&&Wn.y==ie.y}else hi=!1}if(!hi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=l}}}else{var re=l.points[0],le=l.points[2],se=Vn.points[0];if(re.x!=se.x||re.y!=se.y){var ae=Vn.points[1];di=re.x==ae.x&&re.y==ae.y}else di=!0;if(di)ci=!0;else{var oe=Vn.points[2];ci=re.x==oe.x&&re.y==oe.y}if(ci){var pe=Vn.points[0];if(le.x!=pe.x||le.y!=pe.y){var he=Vn.points[1];fi=le.x==he.x&&le.y==he.y}else fi=!0;if(fi)_i=!0;else{var ue=Vn.points[2];_i=le.x==ue.x&&le.y==ue.y}}else _i=!1;if(_i){l.neighbors[1]=Vn;var _e=l.points[0],ce=l.points[2],de=Vn.points[2];if(_e.x==de.x&&_e.y==de.y){var fe=Vn.points[1];bi=ce.x==fe.x&&ce.y==fe.y}else bi=!1;if(bi)xi=!0;else{var xe=Vn.points[1];if(_e.x==xe.x&&_e.y==xe.y){var be=Vn.points[2];xi=ce.x==be.x&&ce.y==be.y}else xi=!1}if(xi)Vn.neighbors[0]=l;else{var ye=Vn.points[0];if(_e.x==ye.x&&_e.y==ye.y){var ve=Vn.points[2];vi=ce.x==ve.x&&ce.y==ve.y}else vi=!1;if(vi)yi=!0;else{var me=Vn.points[2];if(_e.x==me.x&&_e.y==me.y){var ge=Vn.points[0];yi=ce.x==ge.x&&ce.y==ge.y}else yi=!1}if(yi)Vn.neighbors[1]=l;else{var ze=Vn.points[0];if(_e.x==ze.x&&_e.y==ze.y){var we=Vn.points[1];gi=ce.x==we.x&&ce.y==we.y}else gi=!1;if(gi)mi=!0;else{var Oe=Vn.points[1];if(_e.x==Oe.x&&_e.y==Oe.y){var Ce=Vn.points[0];mi=ce.x==Ce.x&&ce.y==Ce.y}else mi=!1}if(!mi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=l}}}else{var Ee=l.points[0],Ue=l.points[1],Me=Vn.points[0];if(Ee.x!=Me.x||Ee.y!=Me.y){var Te=Vn.points[1];Oi=Ee.x==Te.x&&Ee.y==Te.y}else Oi=!0;if(Oi)wi=!0;else{var ke=Vn.points[2];wi=Ee.x==ke.x&&Ee.y==ke.y}if(wi){var De=Vn.points[0];if(Ue.x!=De.x||Ue.y!=De.y){var Se=Vn.points[1];Ci=Ue.x==Se.x&&Ue.y==Se.y}else Ci=!0;if(Ci)zi=!0;else{var Ae=Vn.points[2];zi=Ue.x==Ae.x&&Ue.y==Ae.y}}else zi=!1;if(zi){l.neighbors[2]=Vn;var Pe=l.points[0],Ve=l.points[1],Ie=Vn.points[2];if(Pe.x==Ie.x&&Pe.y==Ie.y){var Ne=Vn.points[1];Ui=Ve.x==Ne.x&&Ve.y==Ne.y}else Ui=!1;if(Ui)Ei=!0;else{var Fe=Vn.points[1];if(Pe.x==Fe.x&&Pe.y==Fe.y){var Re=Vn.points[2];Ei=Ve.x==Re.x&&Ve.y==Re.y}else Ei=!1}if(Ei)Vn.neighbors[0]=l;else{var Le=Vn.points[0];if(Pe.x==Le.x&&Pe.y==Le.y){var Be=Vn.points[2];Ti=Ve.x==Be.x&&Ve.y==Be.y}else Ti=!1;if(Ti)Mi=!0;else{var Ge=Vn.points[2];if(Pe.x==Ge.x&&Pe.y==Ge.y){var je=Vn.points[0];Mi=Ve.x==je.x&&Ve.y==je.y}else Mi=!1}if(Mi)Vn.neighbors[1]=l;else{var Ke=Vn.points[0];if(Pe.x==Ke.x&&Pe.y==Ke.y){var We=Vn.points[1];Di=Ve.x==We.x&&Ve.y==We.y}else Di=!1;if(Di)ki=!0;else{var Ye=Vn.points[1];if(Pe.x==Ye.x&&Pe.y==Ye.y){var Xe=Vn.points[0];ki=Ve.x==Xe.x&&Ve.y==Xe.y}else ki=!1}if(!ki)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=l}}}}}if(r.prev.next=r.next,r.next.prev=r.prev,!this.legalize(l)){e=this.context;if(null==l.neighbors[0]){u=e.front,_=l.points[0],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;var He=l.points[b];if(_.x==He.x&&_.y==He.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(n=c[d]).x)==(Vi=(Pi=u.search_node).point.x)){var Ze=Pi.point;if(n.x!=Ze.x||n.y!=Ze.y){var qe=Pi.prev.point;if(n.x==qe.x&&n.y==qe.y)Pi=Pi.prev;else{var $e=Pi.next.point;if(n.x!=$e.x||n.y!=$e.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Pi=Pi.next}}}else if(Ai<Vi)for(;null!=(Pi=Pi.prev);){var Qe=Pi.point;if(n.x==Qe.x&&n.y==Qe.y)break}else for(;null!=(Pi=Pi.next);){var Je=Pi.point;if(n.x==Je.x&&n.y==Je.y)break}null!=Pi&&(u.search_node=Pi),null!=(Ii=Pi)&&(Ii.triangle=l)}if(null==l.neighbors[1]){var nt=e.front,et=l.points[1],tt=l.points;null==(Ni=-1)&&(Ni=0);for(var it=Ni,rt=!1,lt=0;lt<3;){for(var st=lt++;it<0;)it+=3;for(;it>2;)it-=3;var at=l.points[st];if(et.x==at.x&&et.y==at.y){rt=!0;break}++it}if(!rt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ri=(Fi=tt[it]).x)==(Bi=(Li=nt.search_node).point.x)){var ot=Li.point;if(Fi.x!=ot.x||Fi.y!=ot.y){var pt=Li.prev.point;if(Fi.x==pt.x&&Fi.y==pt.y)Li=Li.prev;else{var ht=Li.next.point;if(Fi.x!=ht.x||Fi.y!=ht.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Li=Li.next}}}else if(Ri<Bi)for(;null!=(Li=Li.prev);){var ut=Li.point;if(Fi.x==ut.x&&Fi.y==ut.y)break}else for(;null!=(Li=Li.next);){var _t=Li.point;if(Fi.x==_t.x&&Fi.y==_t.y)break}null!=Li&&(nt.search_node=Li),null!=(Gi=Li)&&(Gi.triangle=l)}if(null==l.neighbors[2]){var ct=e.front,dt=l.points[2],ft=l.points;null==(ji=-1)&&(ji=0);for(var xt=ji,bt=!1,yt=0;yt<3;){for(var vt=yt++;xt<0;)xt+=3;for(;xt>2;)xt-=3;var mt=l.points[vt];if(dt.x==mt.x&&dt.y==mt.y){bt=!0;break}++xt}if(!bt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Wi=(Ki=ft[xt]).x)==(Xi=(Yi=ct.search_node).point.x)){var gt=Yi.point;if(Ki.x!=gt.x||Ki.y!=gt.y){var zt=Yi.prev.point;if(Ki.x==zt.x&&Ki.y==zt.y)Yi=Yi.prev;else{var wt=Yi.next.point;if(Ki.x!=wt.x||Ki.y!=wt.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Yi=Yi.next}}}else if(Wi<Xi)for(;null!=(Yi=Yi.prev);){var Ot=Yi.point;if(Ki.x==Ot.x&&Ki.y==Ot.y)break}else for(;null!=(Yi=Yi.next);){var Ct=Yi.point;if(Ki.x==Ct.x&&Ki.y==Ct.y)break}null!=Yi&&(ct.search_node=Yi),null!=(Hi=Yi)&&(Hi.triangle=l)}}r=r.next}for(r=v.prev;null!=r.prev;){m=r.next.point.x-r.point.x,g=r.next.point.y-r.point.y,z=r.prev.point.x-r.point.x,w=r.prev.point.y-r.point.y;if((y=Math.atan2(m*w-g*z,m*z+g*w))>poly2tri_Constants.PI_2||y<-poly2tri_Constants.PI_2)break;var Et,Ut,Mt;l=poly2tri_Pool.getTriangle(r.prev.point,r.point,r.next.point),s=r.prev.triangle,a=l.points[1],o=l.points[2],p=s.points[0];if(a.x!=p.x||a.y!=p.y){O=s.points[1];Mt=a.x==O.x&&a.y==O.y}else Mt=!0;if(Mt)Ut=!0;else{C=s.points[2];Ut=a.x==C.x&&a.y==C.y}if(Ut){var Tt;E=s.points[0];if(o.x!=E.x||o.y!=E.y){U=s.points[1];Tt=o.x==U.x&&o.y==U.y}else Tt=!0;if(Tt)Et=!0;else{M=s.points[2];Et=o.x==M.x&&o.y==M.y}}else Et=!1;if(Et){l.neighbors[0]=s;var kt,Dt;T=l.points[1],k=l.points[2],D=s.points[2];if(T.x==D.x&&T.y==D.y){S=s.points[1];Dt=k.x==S.x&&k.y==S.y}else Dt=!1;if(Dt)kt=!0;else{A=s.points[1];if(T.x==A.x&&T.y==A.y){P=s.points[2];kt=k.x==P.x&&k.y==P.y}else kt=!1}if(kt)s.neighbors[0]=l;else{var St,At;V=s.points[0];if(T.x==V.x&&T.y==V.y){I=s.points[2];At=k.x==I.x&&k.y==I.y}else At=!1;if(At)St=!0;else{N=s.points[2];if(T.x==N.x&&T.y==N.y){F=s.points[0];St=k.x==F.x&&k.y==F.y}else St=!1}if(St)s.neighbors[1]=l;else{var Pt,Vt;R=s.points[0];if(T.x==R.x&&T.y==R.y){L=s.points[1];Vt=k.x==L.x&&k.y==L.y}else Vt=!1;if(Vt)Pt=!0;else{B=s.points[1];if(T.x==B.x&&T.y==B.y){G=s.points[0];Pt=k.x==G.x&&k.y==G.y}else Pt=!1}if(!Pt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{var It,Nt,Ft;j=l.points[0],K=l.points[2],W=s.points[0];if(j.x!=W.x||j.y!=W.y){Y=s.points[1];Ft=j.x==Y.x&&j.y==Y.y}else Ft=!0;if(Ft)Nt=!0;else{X=s.points[2];Nt=j.x==X.x&&j.y==X.y}if(Nt){var Rt;H=s.points[0];if(K.x!=H.x||K.y!=H.y){Z=s.points[1];Rt=K.x==Z.x&&K.y==Z.y}else Rt=!0;if(Rt)It=!0;else{q=s.points[2];It=K.x==q.x&&K.y==q.y}}else It=!1;if(It){l.neighbors[1]=s;var Lt,Bt;$=l.points[0],Q=l.points[2],J=s.points[2];if($.x==J.x&&$.y==J.y){nn=s.points[1];Bt=Q.x==nn.x&&Q.y==nn.y}else Bt=!1;if(Bt)Lt=!0;else{en=s.points[1];if($.x==en.x&&$.y==en.y){tn=s.points[2];Lt=Q.x==tn.x&&Q.y==tn.y}else Lt=!1}if(Lt)s.neighbors[0]=l;else{var Gt,jt;rn=s.points[0];if($.x==rn.x&&$.y==rn.y){ln=s.points[2];jt=Q.x==ln.x&&Q.y==ln.y}else jt=!1;if(jt)Gt=!0;else{sn=s.points[2];if($.x==sn.x&&$.y==sn.y){an=s.points[0];Gt=Q.x==an.x&&Q.y==an.y}else Gt=!1}if(Gt)s.neighbors[1]=l;else{var Kt,Wt;on=s.points[0];if($.x==on.x&&$.y==on.y){pn=s.points[1];Wt=Q.x==pn.x&&Q.y==pn.y}else Wt=!1;if(Wt)Kt=!0;else{hn=s.points[1];if($.x==hn.x&&$.y==hn.y){un=s.points[0];Kt=Q.x==un.x&&Q.y==un.y}else Kt=!1}if(!Kt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}else{var Yt,Xt,Ht;_n=l.points[0],cn=l.points[1],dn=s.points[0];if(_n.x!=dn.x||_n.y!=dn.y){xn=s.points[1];Ht=_n.x==xn.x&&_n.y==xn.y}else Ht=!0;if(Ht)Xt=!0;else{bn=s.points[2];Xt=_n.x==bn.x&&_n.y==bn.y}if(Xt){var Zt;yn=s.points[0];if(cn.x!=yn.x||cn.y!=yn.y){vn=s.points[1];Zt=cn.x==vn.x&&cn.y==vn.y}else Zt=!0;if(Zt)Yt=!0;else{mn=s.points[2];Yt=cn.x==mn.x&&cn.y==mn.y}}else Yt=!1;if(Yt){l.neighbors[2]=s;var qt,$t;gn=l.points[0],zn=l.points[1],wn=s.points[2];if(gn.x==wn.x&&gn.y==wn.y){On=s.points[1];$t=zn.x==On.x&&zn.y==On.y}else $t=!1;if($t)qt=!0;else{Cn=s.points[1];if(gn.x==Cn.x&&gn.y==Cn.y){En=s.points[2];qt=zn.x==En.x&&zn.y==En.y}else qt=!1}if(qt)s.neighbors[0]=l;else{var Qt,Jt;Un=s.points[0];if(gn.x==Un.x&&gn.y==Un.y){Mn=s.points[2];Jt=zn.x==Mn.x&&zn.y==Mn.y}else Jt=!1;if(Jt)Qt=!0;else{Tn=s.points[2];if(gn.x==Tn.x&&gn.y==Tn.y){kn=s.points[0];Qt=zn.x==kn.x&&zn.y==kn.y}else Qt=!1}if(Qt)s.neighbors[1]=l;else{var ni,ei;Dn=s.points[0];if(gn.x==Dn.x&&gn.y==Dn.y){Sn=s.points[1];ei=zn.x==Sn.x&&zn.y==Sn.y}else ei=!1;if(ei)ni=!0;else{An=s.points[1];if(gn.x==An.x&&gn.y==An.y){Pn=s.points[0];ni=zn.x==Pn.x&&zn.y==Pn.y}else ni=!1}if(!ni)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");s.neighbors[2]=l}}}}}var ti,ii,ri;Vn=r.triangle,In=l.points[1],Nn=l.points[2],Fn=Vn.points[0];if(In.x!=Fn.x||In.y!=Fn.y){Rn=Vn.points[1];ri=In.x==Rn.x&&In.y==Rn.y}else ri=!0;if(ri)ii=!0;else{Ln=Vn.points[2];ii=In.x==Ln.x&&In.y==Ln.y}if(ii){var li;Bn=Vn.points[0];if(Nn.x!=Bn.x||Nn.y!=Bn.y){Gn=Vn.points[1];li=Nn.x==Gn.x&&Nn.y==Gn.y}else li=!0;if(li)ti=!0;else{jn=Vn.points[2];ti=Nn.x==jn.x&&Nn.y==jn.y}}else ti=!1;if(ti){l.neighbors[0]=Vn;var si,ai;Kn=l.points[1],Wn=l.points[2],Yn=Vn.points[2];if(Kn.x==Yn.x&&Kn.y==Yn.y){Xn=Vn.points[1];ai=Wn.x==Xn.x&&Wn.y==Xn.y}else ai=!1;if(ai)si=!0;else{Hn=Vn.points[1];if(Kn.x==Hn.x&&Kn.y==Hn.y){Zn=Vn.points[2];si=Wn.x==Zn.x&&Wn.y==Zn.y}else si=!1}if(si)Vn.neighbors[0]=l;else{var oi,pi;qn=Vn.points[0];if(Kn.x==qn.x&&Kn.y==qn.y){$n=Vn.points[2];pi=Wn.x==$n.x&&Wn.y==$n.y}else pi=!1;if(pi)oi=!0;else{Qn=Vn.points[2];if(Kn.x==Qn.x&&Kn.y==Qn.y){Jn=Vn.points[0];oi=Wn.x==Jn.x&&Wn.y==Jn.y}else oi=!1}if(oi)Vn.neighbors[1]=l;else{var hi,ui;ne=Vn.points[0];if(Kn.x==ne.x&&Kn.y==ne.y){ee=Vn.points[1];ui=Wn.x==ee.x&&Wn.y==ee.y}else ui=!1;if(ui)hi=!0;else{te=Vn.points[1];if(Kn.x==te.x&&Kn.y==te.y){ie=Vn.points[0];hi=Wn.x==ie.x&&Wn.y==ie.y}else hi=!1}if(!hi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=l}}}else{var _i,ci,di;re=l.points[0],le=l.points[2],se=Vn.points[0];if(re.x!=se.x||re.y!=se.y){ae=Vn.points[1];di=re.x==ae.x&&re.y==ae.y}else di=!0;if(di)ci=!0;else{oe=Vn.points[2];ci=re.x==oe.x&&re.y==oe.y}if(ci){var fi;pe=Vn.points[0];if(le.x!=pe.x||le.y!=pe.y){he=Vn.points[1];fi=le.x==he.x&&le.y==he.y}else fi=!0;if(fi)_i=!0;else{ue=Vn.points[2];_i=le.x==ue.x&&le.y==ue.y}}else _i=!1;if(_i){l.neighbors[1]=Vn;var xi,bi;_e=l.points[0],ce=l.points[2],de=Vn.points[2];if(_e.x==de.x&&_e.y==de.y){fe=Vn.points[1];bi=ce.x==fe.x&&ce.y==fe.y}else bi=!1;if(bi)xi=!0;else{xe=Vn.points[1];if(_e.x==xe.x&&_e.y==xe.y){be=Vn.points[2];xi=ce.x==be.x&&ce.y==be.y}else xi=!1}if(xi)Vn.neighbors[0]=l;else{var yi,vi;ye=Vn.points[0];if(_e.x==ye.x&&_e.y==ye.y){ve=Vn.points[2];vi=ce.x==ve.x&&ce.y==ve.y}else vi=!1;if(vi)yi=!0;else{me=Vn.points[2];if(_e.x==me.x&&_e.y==me.y){ge=Vn.points[0];yi=ce.x==ge.x&&ce.y==ge.y}else yi=!1}if(yi)Vn.neighbors[1]=l;else{var mi,gi;ze=Vn.points[0];if(_e.x==ze.x&&_e.y==ze.y){we=Vn.points[1];gi=ce.x==we.x&&ce.y==we.y}else gi=!1;if(gi)mi=!0;else{Oe=Vn.points[1];if(_e.x==Oe.x&&_e.y==Oe.y){Ce=Vn.points[0];mi=ce.x==Ce.x&&ce.y==Ce.y}else mi=!1}if(!mi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=l}}}else{var zi,wi,Oi;Ee=l.points[0],Ue=l.points[1],Me=Vn.points[0];if(Ee.x!=Me.x||Ee.y!=Me.y){Te=Vn.points[1];Oi=Ee.x==Te.x&&Ee.y==Te.y}else Oi=!0;if(Oi)wi=!0;else{ke=Vn.points[2];wi=Ee.x==ke.x&&Ee.y==ke.y}if(wi){var Ci;De=Vn.points[0];if(Ue.x!=De.x||Ue.y!=De.y){Se=Vn.points[1];Ci=Ue.x==Se.x&&Ue.y==Se.y}else Ci=!0;if(Ci)zi=!0;else{Ae=Vn.points[2];zi=Ue.x==Ae.x&&Ue.y==Ae.y}}else zi=!1;if(zi){l.neighbors[2]=Vn;var Ei,Ui;Pe=l.points[0],Ve=l.points[1],Ie=Vn.points[2];if(Pe.x==Ie.x&&Pe.y==Ie.y){Ne=Vn.points[1];Ui=Ve.x==Ne.x&&Ve.y==Ne.y}else Ui=!1;if(Ui)Ei=!0;else{Fe=Vn.points[1];if(Pe.x==Fe.x&&Pe.y==Fe.y){Re=Vn.points[2];Ei=Ve.x==Re.x&&Ve.y==Re.y}else Ei=!1}if(Ei)Vn.neighbors[0]=l;else{var Mi,Ti;Le=Vn.points[0];if(Pe.x==Le.x&&Pe.y==Le.y){Be=Vn.points[2];Ti=Ve.x==Be.x&&Ve.y==Be.y}else Ti=!1;if(Ti)Mi=!0;else{Ge=Vn.points[2];if(Pe.x==Ge.x&&Pe.y==Ge.y){je=Vn.points[0];Mi=Ve.x==je.x&&Ve.y==je.y}else Mi=!1}if(Mi)Vn.neighbors[1]=l;else{var ki,Di;Ke=Vn.points[0];if(Pe.x==Ke.x&&Pe.y==Ke.y){We=Vn.points[1];Di=Ve.x==We.x&&Ve.y==We.y}else Di=!1;if(Di)ki=!0;else{Ye=Vn.points[1];if(Pe.x==Ye.x&&Pe.y==Ye.y){Xe=Vn.points[0];ki=Ve.x==Xe.x&&Ve.y==Xe.y}else ki=!1}if(!ki)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=l}}}}}if(r.prev.next=r.next,r.next.prev=r.prev,!this.legalize(l)){e=this.context;if(null==l.neighbors[0]){var Si,Ai,Pi,Vi,Ii;u=e.front,_=l.points[0],c=l.points;null==(Si=-1)&&(Si=0);for(d=Si,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;He=l.points[b];if(_.x==He.x&&_.y==He.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ai=(n=c[d]).x)==(Vi=(Pi=u.search_node).point.x)){Ze=Pi.point;if(n.x!=Ze.x||n.y!=Ze.y){qe=Pi.prev.point;if(n.x==qe.x&&n.y==qe.y)Pi=Pi.prev;else{$e=Pi.next.point;if(n.x!=$e.x||n.y!=$e.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Pi=Pi.next}}}else if(Ai<Vi)for(;null!=(Pi=Pi.prev);){Qe=Pi.point;if(n.x==Qe.x&&n.y==Qe.y)break}else for(;null!=(Pi=Pi.next);){Je=Pi.point;if(n.x==Je.x&&n.y==Je.y)break}null!=Pi&&(u.search_node=Pi),null!=(Ii=Pi)&&(Ii.triangle=l)}if(null==l.neighbors[1]){var Ni,Fi,Ri,Li,Bi,Gi;nt=e.front,et=l.points[1],tt=l.points;null==(Ni=-1)&&(Ni=0);for(it=Ni,rt=!1,lt=0;lt<3;){for(st=lt++;it<0;)it+=3;for(;it>2;)it-=3;at=l.points[st];if(et.x==at.x&&et.y==at.y){rt=!0;break}++it}if(!rt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ri=(Fi=tt[it]).x)==(Bi=(Li=nt.search_node).point.x)){ot=Li.point;if(Fi.x!=ot.x||Fi.y!=ot.y){pt=Li.prev.point;if(Fi.x==pt.x&&Fi.y==pt.y)Li=Li.prev;else{ht=Li.next.point;if(Fi.x!=ht.x||Fi.y!=ht.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Li=Li.next}}}else if(Ri<Bi)for(;null!=(Li=Li.prev);){ut=Li.point;if(Fi.x==ut.x&&Fi.y==ut.y)break}else for(;null!=(Li=Li.next);){_t=Li.point;if(Fi.x==_t.x&&Fi.y==_t.y)break}null!=Li&&(nt.search_node=Li),null!=(Gi=Li)&&(Gi.triangle=l)}if(null==l.neighbors[2]){var ji,Ki,Wi,Yi,Xi,Hi;ct=e.front,dt=l.points[2],ft=l.points;null==(ji=-1)&&(ji=0);for(xt=ji,bt=!1,yt=0;yt<3;){for(vt=yt++;xt<0;)xt+=3;for(;xt>2;)xt-=3;mt=l.points[vt];if(dt.x==mt.x&&dt.y==mt.y){bt=!0;break}++xt}if(!bt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Wi=(Ki=ft[xt]).x)==(Xi=(Yi=ct.search_node).point.x)){gt=Yi.point;if(Ki.x!=gt.x||Ki.y!=gt.y){zt=Yi.prev.point;if(Ki.x==zt.x&&Ki.y==zt.y)Yi=Yi.prev;else{wt=Yi.next.point;if(Ki.x!=wt.x||Ki.y!=wt.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Yi=Yi.next}}}else if(Wi<Xi)for(;null!=(Yi=Yi.prev);){Ot=Yi.point;if(Ki.x==Ot.x&&Ki.y==Ot.y)break}else for(;null!=(Yi=Yi.next);){Ct=Yi.point;if(Ki.x==Ct.x&&Ki.y==Ct.y)break}null!=Yi&&(ct.search_node=Yi),null!=(Hi=Yi)&&(Hi.triangle=l)}}r=r.prev}if(null!=v.next&&null!=v.next.next&&(y=Math.atan2(v.point.y-v.next.next.point.y,v.point.x-v.next.next.point.x))<poly2tri_Constants.PI_3div4){var Zi=v.point,qi=v.next.point,$i=v.next.next.point,Qi=(Zi.x-$i.x)*(qi.y-$i.y)-(Zi.y-$i.y)*(qi.x-$i.x);for(this.context.basin.left_node=-1==(Qi>-poly2tri_Constants.EPSILON&&Qi<poly2tri_Constants.EPSILON?0:Qi>0?-1:1)?v.next.next:v.next,this.context.basin.bottom_node=this.context.basin.left_node;null!=this.context.basin.bottom_node.next&&this.context.basin.bottom_node.point.y>=this.context.basin.bottom_node.next.point.y;)this.context.basin.bottom_node=this.context.basin.bottom_node.next;if(this.context.basin.bottom_node!=this.context.basin.left_node){for(this.context.basin.right_node=this.context.basin.bottom_node;null!=this.context.basin.right_node.next&&this.context.basin.right_node.point.y<this.context.basin.right_node.next.point.y;)this.context.basin.right_node=this.context.basin.right_node.next;this.context.basin.right_node!=this.context.basin.bottom_node&&(this.context.basin.width=this.context.basin.right_node.point.x-this.context.basin.left_node.point.x,this.context.basin.left_highest=this.context.basin.left_node.point.y>this.context.basin.right_node.point.y,this.fillBasinReq(this.context.basin.bottom_node))}}return v},edgeEventByEdge:function(n,e){this.context.edge_event.constrained_edge=n,this.context.edge_event.right=n.p.x>n.q.x;var t=e.triangle,i=n.p,r=n.q,l=-1,s=t.points[0];if(i.x==s.x&&i.y==s.y){s=t.points[1];if(r.x==s.x&&r.y==s.y)l=2;else{s=t.points[2];r.x==s.x&&r.y==s.y&&(l=1)}}else{s=t.points[1];if(i.x==s.x&&i.y==s.y){s=t.points[2];if(r.x==s.x&&r.y==s.y)l=0;else{s=t.points[0];r.x==s.x&&r.y==s.y&&(l=2)}}else{s=t.points[2];if(i.x==s.x&&i.y==s.y){s=t.points[0];if(r.x==s.x&&r.y==s.y)l=1;else{s=t.points[1];r.x==s.x&&r.y==s.y&&(l=0)}}}}var a=l;l=!1;if(-1!=a){if(t.constrained_edge[a]=!0,null!=(s=t.neighbors[a])){var o=s.points[0];if(r.x==o.x&&r.y==o.y){o=s.points[1];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[1];if(r.x==o.x&&r.y==o.y){o=s.points[0];y=i.x==o.x&&i.y==o.y}else y=!1}if(y)s.constrained_edge[2]=!0;else{o=s.points[0];if(r.x==o.x&&r.y==o.y){o=s.points[2];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[2];if(r.x==o.x&&r.y==o.y){o=s.points[0];y=i.x==o.x&&i.y==o.y}else y=!1}if(y)s.constrained_edge[1]=!0;else{o=s.points[1];if(r.x==o.x&&r.y==o.y){o=s.points[2];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[2];if(r.x==o.x&&r.y==o.y){o=s.points[1];y=i.x==o.x&&i.y==o.y}else y=!1}y&&(s.constrained_edge[0]=!0)}}}l=!0}if(!l){this.context.edge_event.right?this.fillRightAboveEdgeEvent(n,e):this.fillLeftAboveEdgeEvent(n,e);i=n.p,r=n.q;var p=e.triangle,h=n.q;l=-1,s=p.points[0];if(i.x==s.x&&i.y==s.y){s=p.points[1];if(r.x==s.x&&r.y==s.y)l=2;else{s=p.points[2];r.x==s.x&&r.y==s.y&&(l=1)}}else{s=p.points[1];if(i.x==s.x&&i.y==s.y){s=p.points[2];if(r.x==s.x&&r.y==s.y)l=0;else{s=p.points[0];r.x==s.x&&r.y==s.y&&(l=2)}}else{s=p.points[2];if(i.x==s.x&&i.y==s.y){s=p.points[0];if(r.x==s.x&&r.y==s.y)l=1;else{s=p.points[1];r.x==s.x&&r.y==s.y&&(l=0)}}}}a=l,l=!1;if(-1!=a){if(p.constrained_edge[a]=!0,null!=(s=p.neighbors[a])){o=s.points[0];if(r.x==o.x&&r.y==o.y){o=s.points[1];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[1];if(r.x==o.x&&r.y==o.y){o=s.points[0];y=i.x==o.x&&i.y==o.y}else y=!1}if(y)s.constrained_edge[2]=!0;else{o=s.points[0];if(r.x==o.x&&r.y==o.y){o=s.points[2];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[2];if(r.x==o.x&&r.y==o.y){o=s.points[0];y=i.x==o.x&&i.y==o.y}else y=!1}if(y)s.constrained_edge[1]=!0;else{o=s.points[1];if(r.x==o.x&&r.y==o.y){o=s.points[2];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[2];if(r.x==o.x&&r.y==o.y){o=s.points[1];y=i.x==o.x&&i.y==o.y}else y=!1}y&&(s.constrained_edge[0]=!0)}}}l=!0}if(!l){var u=p.points;null==(O=1)&&(O=0);for(var _=O,c=!1,d=0;d<3;){for(var f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=p.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");var x=u[_];if(0==(g=(z=(r.x-i.x)*(x.y-i.y)-(r.y-i.y)*(x.x-i.x))>-poly2tri_Constants.EPSILON&&z<poly2tri_Constants.EPSILON?0:z>0?-1:1))throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");u=p.points;null==(O=-1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=p.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");var b=u[_];if(0==(w=(z=(r.x-i.x)*(b.y-i.y)-(r.y-i.y)*(b.x-i.x))>-poly2tri_Constants.EPSILON&&z<poly2tri_Constants.EPSILON?0:z>0?-1:1))throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if(g==w){if(1==g){u=p.neighbors;null==(O=-1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=p.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");p=u[_]}else{u=p.neighbors;null==(O=1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=p.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");p=u[_]}l=-1,s=(u=p).points[0];if(i.x==s.x&&i.y==s.y){s=u.points[1];if(r.x==s.x&&r.y==s.y)l=2;else{s=u.points[2];r.x==s.x&&r.y==s.y&&(l=1)}}else{s=u.points[1];if(i.x==s.x&&i.y==s.y){s=u.points[2];if(r.x==s.x&&r.y==s.y)l=0;else{s=u.points[0];r.x==s.x&&r.y==s.y&&(l=2)}}else{s=u.points[2];if(i.x==s.x&&i.y==s.y){s=u.points[0];if(r.x==s.x&&r.y==s.y)l=1;else{s=u.points[1];r.x==s.x&&r.y==s.y&&(l=0)}}}}a=l,l=!1;if(-1!=a){if(u.constrained_edge[a]=!0,null!=(s=u.neighbors[a])){o=s.points[0];if(r.x==o.x&&r.y==o.y){o=s.points[1];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[1];if(r.x==o.x&&r.y==o.y){o=s.points[0];y=i.x==o.x&&i.y==o.y}else y=!1}if(y)s.constrained_edge[2]=!0;else{o=s.points[0];if(r.x==o.x&&r.y==o.y){o=s.points[2];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[2];if(r.x==o.x&&r.y==o.y){o=s.points[0];y=i.x==o.x&&i.y==o.y}else y=!1}if(y)s.constrained_edge[1]=!0;else{var y,v;o=s.points[1];if(r.x==o.x&&r.y==o.y){o=s.points[2];v=i.x==o.x&&i.y==o.y}else v=!1;if(v)y=!0;else{o=s.points[2];if(r.x==o.x&&r.y==o.y){o=s.points[1];y=i.x==o.x&&i.y==o.y}else y=!1}y&&(s.constrained_edge[0]=!0)}}}l=!0}if(!l){var m=u.points;null==(O=1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=u.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");var g;x=m[_];if(0==(g=(z=(r.x-i.x)*(x.y-i.y)-(r.y-i.y)*(x.x-i.x))>-poly2tri_Constants.EPSILON&&z<poly2tri_Constants.EPSILON?0:z>0?-1:1))throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");m=u.points;null==(O=-1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=u.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");var z,w;b=m[_];if(0==(w=(z=(r.x-i.x)*(b.y-i.y)-(r.y-i.y)*(b.x-i.x))>-poly2tri_Constants.EPSILON&&z<poly2tri_Constants.EPSILON?0:z>0?-1:1))throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if(g==w){if(1==g){m=u.neighbors;null==(O=-1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=u.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");u=m[_]}else{var O;m=u.neighbors;null==(O=1)&&(O=0);for(_=O,c=!1,d=0;d<3;){for(f=d++;_<0;)_+=3;for(;_>2;)_-=3;s=u.points[f];if(h.x==s.x&&h.y==s.y){c=!0;break}++_}if(!c)throw haxe_Exception.thrown("Triangle::Point not in triangle");u=m[_]}this.edgeEventByPoints(i,r,u,h)}else this.flipEdgeEvent(i,r,u,h)}}else this.flipEdgeEvent(i,r,p,h)}}},edgeEventByPoints:function(n,e,t,i){var r=-1,l=t.points[0];if(n.x==l.x&&n.y==l.y){l=t.points[1];if(e.x==l.x&&e.y==l.y)r=2;else{l=t.points[2];e.x==l.x&&e.y==l.y&&(r=1)}}else{l=t.points[1];if(n.x==l.x&&n.y==l.y){l=t.points[2];if(e.x==l.x&&e.y==l.y)r=0;else{l=t.points[0];e.x==l.x&&e.y==l.y&&(r=2)}}else{l=t.points[2];if(n.x==l.x&&n.y==l.y){l=t.points[0];if(e.x==l.x&&e.y==l.y)r=1;else{l=t.points[1];e.x==l.x&&e.y==l.y&&(r=0)}}}}var s=r;r=!1;if(-1!=s){if(t.constrained_edge[s]=!0,null!=(l=t.neighbors[s])){var a=l.points[0];if(e.x==a.x&&e.y==a.y){a=l.points[1];p=n.x==a.x&&n.y==a.y}else p=!1;if(p)o=!0;else{a=l.points[1];if(e.x==a.x&&e.y==a.y){a=l.points[0];o=n.x==a.x&&n.y==a.y}else o=!1}if(o)l.constrained_edge[2]=!0;else{a=l.points[0];if(e.x==a.x&&e.y==a.y){a=l.points[2];p=n.x==a.x&&n.y==a.y}else p=!1;if(p)o=!0;else{a=l.points[2];if(e.x==a.x&&e.y==a.y){a=l.points[0];o=n.x==a.x&&n.y==a.y}else o=!1}if(o)l.constrained_edge[1]=!0;else{var o,p;a=l.points[1];if(e.x==a.x&&e.y==a.y){a=l.points[2];p=n.x==a.x&&n.y==a.y}else p=!1;if(p)o=!0;else{a=l.points[2];if(e.x==a.x&&e.y==a.y){a=l.points[1];o=n.x==a.x&&n.y==a.y}else o=!1}o&&(l.constrained_edge[0]=!0)}}}r=!0}if(!r){var h=t.points;null==(m=1)&&(m=0);for(var u=m,_=!1,c=0;c<3;){for(var d=c++;u<0;)u+=3;for(;u>2;)u-=3;l=t.points[d];if(i.x==l.x&&i.y==l.y){_=!0;break}++u}if(!_)throw haxe_Exception.thrown("Triangle::Point not in triangle");var f=h[u],x=(b=(e.x-n.x)*(f.y-n.y)-(e.y-n.y)*(f.x-n.x))>-poly2tri_Constants.EPSILON&&b<poly2tri_Constants.EPSILON?0:b>0?-1:1;if(0==x)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");h=t.points;null==(m=-1)&&(m=0);for(u=m,_=!1,c=0;c<3;){for(d=c++;u<0;)u+=3;for(;u>2;)u-=3;l=t.points[d];if(i.x==l.x&&i.y==l.y){_=!0;break}++u}if(!_)throw haxe_Exception.thrown("Triangle::Point not in triangle");var b,y=h[u],v=(b=(e.x-n.x)*(y.y-n.y)-(e.y-n.y)*(y.x-n.x))>-poly2tri_Constants.EPSILON&&b<poly2tri_Constants.EPSILON?0:b>0?-1:1;if(0==v)throw haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!");if(x==v){if(1==x){h=t.neighbors;null==(m=-1)&&(m=0);for(u=m,_=!1,c=0;c<3;){for(d=c++;u<0;)u+=3;for(;u>2;)u-=3;l=t.points[d];if(i.x==l.x&&i.y==l.y){_=!0;break}++u}if(!_)throw haxe_Exception.thrown("Triangle::Point not in triangle");t=h[u]}else{var m;h=t.neighbors;null==(m=1)&&(m=0);for(u=m,_=!1,c=0;c<3;){for(d=c++;u<0;)u+=3;for(;u>2;)u-=3;l=t.points[d];if(i.x==l.x&&i.y==l.y){_=!0;break}++u}if(!_)throw haxe_Exception.thrown("Triangle::Point not in triangle");t=h[u]}this.edgeEventByPoints(n,e,t,i)}else this.flipEdgeEvent(n,e,t,i)}},newFrontTriangle:function(n,e){var t=poly2tri_Pool.getTriangle(n,e.point,e.next.point),i=e.triangle,r=t.points[1],l=t.points[2],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[0]=i;r=t.points[1],l=t.points[2],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}else{r=t.points[0],l=t.points[2],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[1]=i;r=t.points[0],l=t.points[2],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}else{var a;r=t.points[0],l=t.points[1],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[2]=i;r=t.points[0],l=t.points[1],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{var o,p;s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}}}var h=poly2tri_Pool.getNode(n);if(h.next=e.next,h.prev=e,e.next.prev=h,e.next=h,!this.legalize(t)){var u=this.context;if(null==t.neighbors[0]){var _=u.front,c=t.points[0],d=t.points;null==(v=-1)&&(v=0);for(var f=v,x=!1,b=0;b<3;){for(var y=b++;f<0;)f+=3;for(;f>2;)f-=3;i=t.points[y];if(c.x==i.x&&c.y==i.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((m=(n=d[f]).x)==(g=(e=_.search_node).point.x)){i=e.point;if(n.x!=i.x||n.y!=i.y){i=e.prev.point;if(n.x==i.x&&n.y==i.y)e=e.prev;else{i=e.next.point;if(n.x!=i.x||n.y!=i.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");e=e.next}}}else if(m<g)for(;null!=(e=e.prev);){i=e.point;if(n.x==i.x&&n.y==i.y)break}else for(;null!=(e=e.next);){i=e.point;if(n.x==i.x&&n.y==i.y)break}null!=e&&(_.search_node=e),null!=(z=e)&&(z.triangle=t)}if(null==t.neighbors[1]){_=u.front,c=t.points[1],d=t.points;null==(v=-1)&&(v=0);for(f=v,x=!1,b=0;b<3;){for(y=b++;f<0;)f+=3;for(;f>2;)f-=3;i=t.points[y];if(c.x==i.x&&c.y==i.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((m=(n=d[f]).x)==(g=(e=_.search_node).point.x)){i=e.point;if(n.x!=i.x||n.y!=i.y){i=e.prev.point;if(n.x==i.x&&n.y==i.y)e=e.prev;else{i=e.next.point;if(n.x!=i.x||n.y!=i.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");e=e.next}}}else if(m<g)for(;null!=(e=e.prev);){i=e.point;if(n.x==i.x&&n.y==i.y)break}else for(;null!=(e=e.next);){i=e.point;if(n.x==i.x&&n.y==i.y)break}null!=e&&(_.search_node=e),null!=(z=e)&&(z.triangle=t)}if(null==t.neighbors[2]){var v,m,g,z;_=u.front,c=t.points[2],d=t.points;null==(v=-1)&&(v=0);for(f=v,x=!1,b=0;b<3;){for(y=b++;f<0;)f+=3;for(;f>2;)f-=3;i=t.points[y];if(c.x==i.x&&c.y==i.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((m=(n=d[f]).x)==(g=(e=_.search_node).point.x)){i=e.point;if(n.x!=i.x||n.y!=i.y){i=e.prev.point;if(n.x==i.x&&n.y==i.y)e=e.prev;else{i=e.next.point;if(n.x!=i.x||n.y!=i.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");e=e.next}}}else if(m<g)for(;null!=(e=e.prev);){i=e.point;if(n.x==i.x&&n.y==i.y)break}else for(;null!=(e=e.next);){i=e.point;if(n.x==i.x&&n.y==i.y)break}null!=e&&(_.search_node=e),null!=(z=e)&&(z.triangle=t)}}return h},fill:function(n){var e=poly2tri_Pool.getTriangle(n.prev.point,n.point,n.next.point),t=n.prev.triangle,i=e.points[1],r=e.points[2],l=t.points[0];if(i.x!=l.x||i.y!=l.y){l=t.points[1];s=i.x==l.x&&i.y==l.y}else s=!0;if(s)o=!0;else{l=t.points[2];o=i.x==l.x&&i.y==l.y}if(o){l=t.points[0];if(r.x!=l.x||r.y!=l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!0;if(o)a=!0;else{l=t.points[2];a=r.x==l.x&&r.y==l.y}}else a=!1;if(a){e.neighbors[0]=t;i=e.points[1],r=e.points[2],l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[2];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[0]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[2];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[1]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(!a)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=e}}}else{i=e.points[0],r=e.points[2],l=t.points[0];if(i.x!=l.x||i.y!=l.y){l=t.points[1];s=i.x==l.x&&i.y==l.y}else s=!0;if(s)o=!0;else{l=t.points[2];o=i.x==l.x&&i.y==l.y}if(o){l=t.points[0];if(r.x!=l.x||r.y!=l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!0;if(o)a=!0;else{l=t.points[2];a=r.x==l.x&&r.y==l.y}}else a=!1;if(a){e.neighbors[1]=t;i=e.points[0],r=e.points[2],l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[2];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[0]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[2];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[1]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(!a)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=e}}}else{i=e.points[0],r=e.points[1],l=t.points[0];if(i.x!=l.x||i.y!=l.y){l=t.points[1];s=i.x==l.x&&i.y==l.y}else s=!0;if(s)o=!0;else{l=t.points[2];o=i.x==l.x&&i.y==l.y}if(o){l=t.points[0];if(r.x!=l.x||r.y!=l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!0;if(o)a=!0;else{l=t.points[2];a=r.x==l.x&&r.y==l.y}}else a=!1;if(a){e.neighbors[2]=t;i=e.points[0],r=e.points[1],l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[2];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[0]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[2];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[1]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(!a)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=e}}}}}t=n.triangle,i=e.points[1],r=e.points[2],l=t.points[0];if(i.x!=l.x||i.y!=l.y){l=t.points[1];s=i.x==l.x&&i.y==l.y}else s=!0;if(s)o=!0;else{l=t.points[2];o=i.x==l.x&&i.y==l.y}if(o){l=t.points[0];if(r.x!=l.x||r.y!=l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!0;if(o)a=!0;else{l=t.points[2];a=r.x==l.x&&r.y==l.y}}else a=!1;if(a){e.neighbors[0]=t;i=e.points[1],r=e.points[2],l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[2];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[0]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[2];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[1]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(!a)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=e}}}else{i=e.points[0],r=e.points[2],l=t.points[0];if(i.x!=l.x||i.y!=l.y){l=t.points[1];s=i.x==l.x&&i.y==l.y}else s=!0;if(s)o=!0;else{l=t.points[2];o=i.x==l.x&&i.y==l.y}if(o){l=t.points[0];if(r.x!=l.x||r.y!=l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!0;if(o)a=!0;else{l=t.points[2];a=r.x==l.x&&r.y==l.y}}else a=!1;if(a){e.neighbors[1]=t;i=e.points[0],r=e.points[2],l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[2];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[0]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[2];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[1]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(!a)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=e}}}else{var s;i=e.points[0],r=e.points[1],l=t.points[0];if(i.x!=l.x||i.y!=l.y){l=t.points[1];s=i.x==l.x&&i.y==l.y}else s=!0;if(s)o=!0;else{l=t.points[2];o=i.x==l.x&&i.y==l.y}if(o){l=t.points[0];if(r.x!=l.x||r.y!=l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!0;if(o)a=!0;else{l=t.points[2];a=r.x==l.x&&r.y==l.y}}else a=!1;if(a){e.neighbors[2]=t;i=e.points[0],r=e.points[1],l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[2];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[0]=e;else{l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[2];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[2];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(a)t.neighbors[1]=e;else{var a,o;l=t.points[0];if(i.x==l.x&&i.y==l.y){l=t.points[1];o=r.x==l.x&&r.y==l.y}else o=!1;if(o)a=!0;else{l=t.points[1];if(i.x==l.x&&i.y==l.y){l=t.points[0];a=r.x==l.x&&r.y==l.y}else a=!1}if(!a)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=e}}}}}if(n.prev.next=n.next,n.next.prev=n.prev,!this.legalize(e)){var p=this.context;if(null==e.neighbors[0]){var h=p.front,u=e.points[0],_=e.points;null==(b=-1)&&(b=0);for(var c=b,d=!1,f=0;f<3;){for(var x=f++;c<0;)c+=3;for(;c>2;)c-=3;t=e.points[x];if(u.x==t.x&&u.y==t.y){d=!0;break}++c}if(!d)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((v=(y=_[c]).x)==(m=(n=h.search_node).point.x)){t=n.point;if(y.x!=t.x||y.y!=t.y){t=n.prev.point;if(y.x==t.x&&y.y==t.y)n=n.prev;else{t=n.next.point;if(y.x!=t.x||y.y!=t.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");n=n.next}}}else if(v<m)for(;null!=(n=n.prev);){t=n.point;if(y.x==t.x&&y.y==t.y)break}else for(;null!=(n=n.next);){t=n.point;if(y.x==t.x&&y.y==t.y)break}null!=n&&(h.search_node=n),null!=(g=n)&&(g.triangle=e)}if(null==e.neighbors[1]){h=p.front,u=e.points[1],_=e.points;null==(b=-1)&&(b=0);for(c=b,d=!1,f=0;f<3;){for(x=f++;c<0;)c+=3;for(;c>2;)c-=3;t=e.points[x];if(u.x==t.x&&u.y==t.y){d=!0;break}++c}if(!d)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((v=(y=_[c]).x)==(m=(n=h.search_node).point.x)){t=n.point;if(y.x!=t.x||y.y!=t.y){t=n.prev.point;if(y.x==t.x&&y.y==t.y)n=n.prev;else{t=n.next.point;if(y.x!=t.x||y.y!=t.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");n=n.next}}}else if(v<m)for(;null!=(n=n.prev);){t=n.point;if(y.x==t.x&&y.y==t.y)break}else for(;null!=(n=n.next);){t=n.point;if(y.x==t.x&&y.y==t.y)break}null!=n&&(h.search_node=n),null!=(g=n)&&(g.triangle=e)}if(null==e.neighbors[2]){var b,y,v,m,g;h=p.front,u=e.points[2],_=e.points;null==(b=-1)&&(b=0);for(c=b,d=!1,f=0;f<3;){for(x=f++;c<0;)c+=3;for(;c>2;)c-=3;t=e.points[x];if(u.x==t.x&&u.y==t.y){d=!0;break}++c}if(!d)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((v=(y=_[c]).x)==(m=(n=h.search_node).point.x)){t=n.point;if(y.x!=t.x||y.y!=t.y){t=n.prev.point;if(y.x==t.x&&y.y==t.y)n=n.prev;else{t=n.next.point;if(y.x!=t.x||y.y!=t.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");n=n.next}}}else if(v<m)for(;null!=(n=n.prev);){t=n.point;if(y.x==t.x&&y.y==t.y)break}else for(;null!=(n=n.next);){t=n.point;if(y.x==t.x&&y.y==t.y)break}null!=n&&(h.search_node=n),null!=(g=n)&&(g.triangle=e)}}},fillAdvancingFront:function(n){for(var e,t=n.next;null!=t.next;){var i=t.next.point.x-t.point.x,r=t.next.point.y-t.point.y,l=t.prev.point.x-t.point.x,s=t.prev.point.y-t.point.y;if((e=Math.atan2(i*s-r*l,i*l+r*s))>poly2tri_Constants.PI_2||e<-poly2tri_Constants.PI_2)break;var a=poly2tri_Pool.getTriangle(t.prev.point,t.point,t.next.point),o=t.prev.triangle,p=a.points[1],h=a.points[2],u=o.points[0];if(p.x!=u.x||p.y!=u.y){var _=o.points[1];Ot=p.x==_.x&&p.y==_.y}else Ot=!0;if(Ot)wt=!0;else{var c=o.points[2];wt=p.x==c.x&&p.y==c.y}if(wt){var d=o.points[0];if(h.x!=d.x||h.y!=d.y){var f=o.points[1];Ct=h.x==f.x&&h.y==f.y}else Ct=!0;if(Ct)zt=!0;else{var x=o.points[2];zt=h.x==x.x&&h.y==x.y}}else zt=!1;if(zt){a.neighbors[0]=o;var b=a.points[1],y=a.points[2],v=o.points[2];if(b.x==v.x&&b.y==v.y){var m=o.points[1];Ut=y.x==m.x&&y.y==m.y}else Ut=!1;if(Ut)Et=!0;else{var g=o.points[1];if(b.x==g.x&&b.y==g.y){var z=o.points[2];Et=y.x==z.x&&y.y==z.y}else Et=!1}if(Et)o.neighbors[0]=a;else{var w=o.points[0];if(b.x==w.x&&b.y==w.y){var O=o.points[2];Tt=y.x==O.x&&y.y==O.y}else Tt=!1;if(Tt)Mt=!0;else{var C=o.points[2];if(b.x==C.x&&b.y==C.y){var E=o.points[0];Mt=y.x==E.x&&y.y==E.y}else Mt=!1}if(Mt)o.neighbors[1]=a;else{var U=o.points[0];if(b.x==U.x&&b.y==U.y){var M=o.points[1];Dt=y.x==M.x&&y.y==M.y}else Dt=!1;if(Dt)kt=!0;else{var T=o.points[1];if(b.x==T.x&&b.y==T.y){var k=o.points[0];kt=y.x==k.x&&y.y==k.y}else kt=!1}if(!kt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");o.neighbors[2]=a}}}else{var D=a.points[0],S=a.points[2],A=o.points[0];if(D.x!=A.x||D.y!=A.y){var P=o.points[1];Pt=D.x==P.x&&D.y==P.y}else Pt=!0;if(Pt)At=!0;else{var V=o.points[2];At=D.x==V.x&&D.y==V.y}if(At){var I=o.points[0];if(S.x!=I.x||S.y!=I.y){var N=o.points[1];Vt=S.x==N.x&&S.y==N.y}else Vt=!0;if(Vt)St=!0;else{var F=o.points[2];St=S.x==F.x&&S.y==F.y}}else St=!1;if(St){a.neighbors[1]=o;var R=a.points[0],L=a.points[2],B=o.points[2];if(R.x==B.x&&R.y==B.y){var G=o.points[1];Nt=L.x==G.x&&L.y==G.y}else Nt=!1;if(Nt)It=!0;else{var j=o.points[1];if(R.x==j.x&&R.y==j.y){var K=o.points[2];It=L.x==K.x&&L.y==K.y}else It=!1}if(It)o.neighbors[0]=a;else{var W=o.points[0];if(R.x==W.x&&R.y==W.y){var Y=o.points[2];Rt=L.x==Y.x&&L.y==Y.y}else Rt=!1;if(Rt)Ft=!0;else{var X=o.points[2];if(R.x==X.x&&R.y==X.y){var H=o.points[0];Ft=L.x==H.x&&L.y==H.y}else Ft=!1}if(Ft)o.neighbors[1]=a;else{var Z=o.points[0];if(R.x==Z.x&&R.y==Z.y){var q=o.points[1];Bt=L.x==q.x&&L.y==q.y}else Bt=!1;if(Bt)Lt=!0;else{var $=o.points[1];if(R.x==$.x&&R.y==$.y){var Q=o.points[0];Lt=L.x==Q.x&&L.y==Q.y}else Lt=!1}if(!Lt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");o.neighbors[2]=a}}}else{var J=a.points[0],nn=a.points[1],en=o.points[0];if(J.x!=en.x||J.y!=en.y){var tn=o.points[1];Kt=J.x==tn.x&&J.y==tn.y}else Kt=!0;if(Kt)jt=!0;else{var rn=o.points[2];jt=J.x==rn.x&&J.y==rn.y}if(jt){var ln=o.points[0];if(nn.x!=ln.x||nn.y!=ln.y){var sn=o.points[1];Wt=nn.x==sn.x&&nn.y==sn.y}else Wt=!0;if(Wt)Gt=!0;else{var an=o.points[2];Gt=nn.x==an.x&&nn.y==an.y}}else Gt=!1;if(Gt){a.neighbors[2]=o;var on=a.points[0],pn=a.points[1],hn=o.points[2];if(on.x==hn.x&&on.y==hn.y){var un=o.points[1];Xt=pn.x==un.x&&pn.y==un.y}else Xt=!1;if(Xt)Yt=!0;else{var _n=o.points[1];if(on.x==_n.x&&on.y==_n.y){var cn=o.points[2];Yt=pn.x==cn.x&&pn.y==cn.y}else Yt=!1}if(Yt)o.neighbors[0]=a;else{var dn=o.points[0];if(on.x==dn.x&&on.y==dn.y){var xn=o.points[2];Zt=pn.x==xn.x&&pn.y==xn.y}else Zt=!1;if(Zt)Ht=!0;else{var bn=o.points[2];if(on.x==bn.x&&on.y==bn.y){var yn=o.points[0];Ht=pn.x==yn.x&&pn.y==yn.y}else Ht=!1}if(Ht)o.neighbors[1]=a;else{var vn=o.points[0];if(on.x==vn.x&&on.y==vn.y){var mn=o.points[1];$t=pn.x==mn.x&&pn.y==mn.y}else $t=!1;if($t)qt=!0;else{var gn=o.points[1];if(on.x==gn.x&&on.y==gn.y){var zn=o.points[0];qt=pn.x==zn.x&&pn.y==zn.y}else qt=!1}if(!qt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");o.neighbors[2]=a}}}}}var wn=t.triangle,On=a.points[1],Cn=a.points[2],En=wn.points[0];if(On.x!=En.x||On.y!=En.y){var Un=wn.points[1];ni=On.x==Un.x&&On.y==Un.y}else ni=!0;if(ni)Jt=!0;else{var Mn=wn.points[2];Jt=On.x==Mn.x&&On.y==Mn.y}if(Jt){var Tn=wn.points[0];if(Cn.x!=Tn.x||Cn.y!=Tn.y){var kn=wn.points[1];ei=Cn.x==kn.x&&Cn.y==kn.y}else ei=!0;if(ei)Qt=!0;else{var Dn=wn.points[2];Qt=Cn.x==Dn.x&&Cn.y==Dn.y}}else Qt=!1;if(Qt){a.neighbors[0]=wn;var Sn=a.points[1],An=a.points[2],Pn=wn.points[2];if(Sn.x==Pn.x&&Sn.y==Pn.y){var Vn=wn.points[1];ii=An.x==Vn.x&&An.y==Vn.y}else ii=!1;if(ii)ti=!0;else{var In=wn.points[1];if(Sn.x==In.x&&Sn.y==In.y){var Nn=wn.points[2];ti=An.x==Nn.x&&An.y==Nn.y}else ti=!1}if(ti)wn.neighbors[0]=a;else{var Fn=wn.points[0];if(Sn.x==Fn.x&&Sn.y==Fn.y){var Rn=wn.points[2];li=An.x==Rn.x&&An.y==Rn.y}else li=!1;if(li)ri=!0;else{var Ln=wn.points[2];if(Sn.x==Ln.x&&Sn.y==Ln.y){var Bn=wn.points[0];ri=An.x==Bn.x&&An.y==Bn.y}else ri=!1}if(ri)wn.neighbors[1]=a;else{var Gn=wn.points[0];if(Sn.x==Gn.x&&Sn.y==Gn.y){var jn=wn.points[1];ai=An.x==jn.x&&An.y==jn.y}else ai=!1;if(ai)si=!0;else{var Kn=wn.points[1];if(Sn.x==Kn.x&&Sn.y==Kn.y){var Wn=wn.points[0];si=An.x==Wn.x&&An.y==Wn.y}else si=!1}if(!si)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");wn.neighbors[2]=a}}}else{var Yn=a.points[0],Xn=a.points[2],Hn=wn.points[0];if(Yn.x!=Hn.x||Yn.y!=Hn.y){var Zn=wn.points[1];hi=Yn.x==Zn.x&&Yn.y==Zn.y}else hi=!0;if(hi)pi=!0;else{var qn=wn.points[2];pi=Yn.x==qn.x&&Yn.y==qn.y}if(pi){var $n=wn.points[0];if(Xn.x!=$n.x||Xn.y!=$n.y){var Qn=wn.points[1];ui=Xn.x==Qn.x&&Xn.y==Qn.y}else ui=!0;if(ui)oi=!0;else{var Jn=wn.points[2];oi=Xn.x==Jn.x&&Xn.y==Jn.y}}else oi=!1;if(oi){a.neighbors[1]=wn;var ne=a.points[0],ee=a.points[2],te=wn.points[2];if(ne.x==te.x&&ne.y==te.y){var ie=wn.points[1];ci=ee.x==ie.x&&ee.y==ie.y}else ci=!1;if(ci)_i=!0;else{var re=wn.points[1];if(ne.x==re.x&&ne.y==re.y){var le=wn.points[2];_i=ee.x==le.x&&ee.y==le.y}else _i=!1}if(_i)wn.neighbors[0]=a;else{var se=wn.points[0];if(ne.x==se.x&&ne.y==se.y){var ae=wn.points[2];fi=ee.x==ae.x&&ee.y==ae.y}else fi=!1;if(fi)di=!0;else{var oe=wn.points[2];if(ne.x==oe.x&&ne.y==oe.y){var pe=wn.points[0];di=ee.x==pe.x&&ee.y==pe.y}else di=!1}if(di)wn.neighbors[1]=a;else{var he=wn.points[0];if(ne.x==he.x&&ne.y==he.y){var ue=wn.points[1];bi=ee.x==ue.x&&ee.y==ue.y}else bi=!1;if(bi)xi=!0;else{var _e=wn.points[1];if(ne.x==_e.x&&ne.y==_e.y){var ce=wn.points[0];xi=ee.x==ce.x&&ee.y==ce.y}else xi=!1}if(!xi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");wn.neighbors[2]=a}}}else{var de=a.points[0],fe=a.points[1],xe=wn.points[0];if(de.x!=xe.x||de.y!=xe.y){var be=wn.points[1];mi=de.x==be.x&&de.y==be.y}else mi=!0;if(mi)vi=!0;else{var ye=wn.points[2];vi=de.x==ye.x&&de.y==ye.y}if(vi){var ve=wn.points[0];if(fe.x!=ve.x||fe.y!=ve.y){var me=wn.points[1];gi=fe.x==me.x&&fe.y==me.y}else gi=!0;if(gi)yi=!0;else{var ge=wn.points[2];yi=fe.x==ge.x&&fe.y==ge.y}}else yi=!1;if(yi){a.neighbors[2]=wn;var ze=a.points[0],we=a.points[1],Oe=wn.points[2];if(ze.x==Oe.x&&ze.y==Oe.y){var Ce=wn.points[1];wi=we.x==Ce.x&&we.y==Ce.y}else wi=!1;if(wi)zi=!0;else{var Ee=wn.points[1];if(ze.x==Ee.x&&ze.y==Ee.y){var Ue=wn.points[2];zi=we.x==Ue.x&&we.y==Ue.y}else zi=!1}if(zi)wn.neighbors[0]=a;else{var Me=wn.points[0];if(ze.x==Me.x&&ze.y==Me.y){var Te=wn.points[2];Ci=we.x==Te.x&&we.y==Te.y}else Ci=!1;if(Ci)Oi=!0;else{var ke=wn.points[2];if(ze.x==ke.x&&ze.y==ke.y){var De=wn.points[0];Oi=we.x==De.x&&we.y==De.y}else Oi=!1}if(Oi)wn.neighbors[1]=a;else{var Se=wn.points[0];if(ze.x==Se.x&&ze.y==Se.y){var Ae=wn.points[1];Ui=we.x==Ae.x&&we.y==Ae.y}else Ui=!1;if(Ui)Ei=!0;else{var Pe=wn.points[1];if(ze.x==Pe.x&&ze.y==Pe.y){var Ve=wn.points[0];Ei=we.x==Ve.x&&we.y==Ve.y}else Ei=!1}if(!Ei)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");wn.neighbors[2]=a}}}}}if(t.prev.next=t.next,t.next.prev=t.prev,!this.legalize(a)){var Ie=this.context;if(null==a.neighbors[0]){var Ne=Ie.front,Fe=a.points[0],Re=a.points;null==(Mi=-1)&&(Mi=0);for(var Le=Mi,Be=!1,Ge=0;Ge<3;){for(var je=Ge++;Le<0;)Le+=3;for(;Le>2;)Le-=3;var Ke=a.points[je];if(Fe.x==Ke.x&&Fe.y==Ke.y){Be=!0;break}++Le}if(!Be)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((ki=(Ti=Re[Le]).x)==(Si=(Di=Ne.search_node).point.x)){var We=Di.point;if(Ti.x!=We.x||Ti.y!=We.y){var Ye=Di.prev.point;if(Ti.x==Ye.x&&Ti.y==Ye.y)Di=Di.prev;else{var Xe=Di.next.point;if(Ti.x!=Xe.x||Ti.y!=Xe.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Di=Di.next}}}else if(ki<Si)for(;null!=(Di=Di.prev);){var He=Di.point;if(Ti.x==He.x&&Ti.y==He.y)break}else for(;null!=(Di=Di.next);){var Ze=Di.point;if(Ti.x==Ze.x&&Ti.y==Ze.y)break}null!=Di&&(Ne.search_node=Di),null!=(Ai=Di)&&(Ai.triangle=a)}if(null==a.neighbors[1]){var qe=Ie.front,$e=a.points[1],Qe=a.points;null==(Pi=-1)&&(Pi=0);for(var Je=Pi,nt=!1,et=0;et<3;){for(var tt=et++;Je<0;)Je+=3;for(;Je>2;)Je-=3;var it=a.points[tt];if($e.x==it.x&&$e.y==it.y){nt=!0;break}++Je}if(!nt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ii=(Vi=Qe[Je]).x)==(Fi=(Ni=qe.search_node).point.x)){var rt=Ni.point;if(Vi.x!=rt.x||Vi.y!=rt.y){var lt=Ni.prev.point;if(Vi.x==lt.x&&Vi.y==lt.y)Ni=Ni.prev;else{var st=Ni.next.point;if(Vi.x!=st.x||Vi.y!=st.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Ni=Ni.next}}}else if(Ii<Fi)for(;null!=(Ni=Ni.prev);){var at=Ni.point;if(Vi.x==at.x&&Vi.y==at.y)break}else for(;null!=(Ni=Ni.next);){var ot=Ni.point;if(Vi.x==ot.x&&Vi.y==ot.y)break}null!=Ni&&(qe.search_node=Ni),null!=(Ri=Ni)&&(Ri.triangle=a)}if(null==a.neighbors[2]){var pt=Ie.front,ht=a.points[2],ut=a.points;null==(Li=-1)&&(Li=0);for(var _t=Li,ct=!1,dt=0;dt<3;){for(var ft=dt++;_t<0;)_t+=3;for(;_t>2;)_t-=3;var xt=a.points[ft];if(ht.x==xt.x&&ht.y==xt.y){ct=!0;break}++_t}if(!ct)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Gi=(Bi=ut[_t]).x)==(Ki=(ji=pt.search_node).point.x)){var bt=ji.point;if(Bi.x!=bt.x||Bi.y!=bt.y){var yt=ji.prev.point;if(Bi.x==yt.x&&Bi.y==yt.y)ji=ji.prev;else{var vt=ji.next.point;if(Bi.x!=vt.x||Bi.y!=vt.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ji=ji.next}}}else if(Gi<Ki)for(;null!=(ji=ji.prev);){var mt=ji.point;if(Bi.x==mt.x&&Bi.y==mt.y)break}else for(;null!=(ji=ji.next);){var gt=ji.point;if(Bi.x==gt.x&&Bi.y==gt.y)break}null!=ji&&(pt.search_node=ji),null!=(Wi=ji)&&(Wi.triangle=a)}}t=t.next}for(t=n.prev;null!=t.prev;){i=t.next.point.x-t.point.x,r=t.next.point.y-t.point.y,l=t.prev.point.x-t.point.x,s=t.prev.point.y-t.point.y;if((e=Math.atan2(i*s-r*l,i*l+r*s))>poly2tri_Constants.PI_2||e<-poly2tri_Constants.PI_2)break;var zt,wt,Ot;a=poly2tri_Pool.getTriangle(t.prev.point,t.point,t.next.point),o=t.prev.triangle,p=a.points[1],h=a.points[2],u=o.points[0];if(p.x!=u.x||p.y!=u.y){_=o.points[1];Ot=p.x==_.x&&p.y==_.y}else Ot=!0;if(Ot)wt=!0;else{c=o.points[2];wt=p.x==c.x&&p.y==c.y}if(wt){var Ct;d=o.points[0];if(h.x!=d.x||h.y!=d.y){f=o.points[1];Ct=h.x==f.x&&h.y==f.y}else Ct=!0;if(Ct)zt=!0;else{x=o.points[2];zt=h.x==x.x&&h.y==x.y}}else zt=!1;if(zt){a.neighbors[0]=o;var Et,Ut;b=a.points[1],y=a.points[2],v=o.points[2];if(b.x==v.x&&b.y==v.y){m=o.points[1];Ut=y.x==m.x&&y.y==m.y}else Ut=!1;if(Ut)Et=!0;else{g=o.points[1];if(b.x==g.x&&b.y==g.y){z=o.points[2];Et=y.x==z.x&&y.y==z.y}else Et=!1}if(Et)o.neighbors[0]=a;else{var Mt,Tt;w=o.points[0];if(b.x==w.x&&b.y==w.y){O=o.points[2];Tt=y.x==O.x&&y.y==O.y}else Tt=!1;if(Tt)Mt=!0;else{C=o.points[2];if(b.x==C.x&&b.y==C.y){E=o.points[0];Mt=y.x==E.x&&y.y==E.y}else Mt=!1}if(Mt)o.neighbors[1]=a;else{var kt,Dt;U=o.points[0];if(b.x==U.x&&b.y==U.y){M=o.points[1];Dt=y.x==M.x&&y.y==M.y}else Dt=!1;if(Dt)kt=!0;else{T=o.points[1];if(b.x==T.x&&b.y==T.y){k=o.points[0];kt=y.x==k.x&&y.y==k.y}else kt=!1}if(!kt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");o.neighbors[2]=a}}}else{var St,At,Pt;D=a.points[0],S=a.points[2],A=o.points[0];if(D.x!=A.x||D.y!=A.y){P=o.points[1];Pt=D.x==P.x&&D.y==P.y}else Pt=!0;if(Pt)At=!0;else{V=o.points[2];At=D.x==V.x&&D.y==V.y}if(At){var Vt;I=o.points[0];if(S.x!=I.x||S.y!=I.y){N=o.points[1];Vt=S.x==N.x&&S.y==N.y}else Vt=!0;if(Vt)St=!0;else{F=o.points[2];St=S.x==F.x&&S.y==F.y}}else St=!1;if(St){a.neighbors[1]=o;var It,Nt;R=a.points[0],L=a.points[2],B=o.points[2];if(R.x==B.x&&R.y==B.y){G=o.points[1];Nt=L.x==G.x&&L.y==G.y}else Nt=!1;if(Nt)It=!0;else{j=o.points[1];if(R.x==j.x&&R.y==j.y){K=o.points[2];It=L.x==K.x&&L.y==K.y}else It=!1}if(It)o.neighbors[0]=a;else{var Ft,Rt;W=o.points[0];if(R.x==W.x&&R.y==W.y){Y=o.points[2];Rt=L.x==Y.x&&L.y==Y.y}else Rt=!1;if(Rt)Ft=!0;else{X=o.points[2];if(R.x==X.x&&R.y==X.y){H=o.points[0];Ft=L.x==H.x&&L.y==H.y}else Ft=!1}if(Ft)o.neighbors[1]=a;else{var Lt,Bt;Z=o.points[0];if(R.x==Z.x&&R.y==Z.y){q=o.points[1];Bt=L.x==q.x&&L.y==q.y}else Bt=!1;if(Bt)Lt=!0;else{$=o.points[1];if(R.x==$.x&&R.y==$.y){Q=o.points[0];Lt=L.x==Q.x&&L.y==Q.y}else Lt=!1}if(!Lt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");o.neighbors[2]=a}}}else{var Gt,jt,Kt;J=a.points[0],nn=a.points[1],en=o.points[0];if(J.x!=en.x||J.y!=en.y){tn=o.points[1];Kt=J.x==tn.x&&J.y==tn.y}else Kt=!0;if(Kt)jt=!0;else{rn=o.points[2];jt=J.x==rn.x&&J.y==rn.y}if(jt){var Wt;ln=o.points[0];if(nn.x!=ln.x||nn.y!=ln.y){sn=o.points[1];Wt=nn.x==sn.x&&nn.y==sn.y}else Wt=!0;if(Wt)Gt=!0;else{an=o.points[2];Gt=nn.x==an.x&&nn.y==an.y}}else Gt=!1;if(Gt){a.neighbors[2]=o;var Yt,Xt;on=a.points[0],pn=a.points[1],hn=o.points[2];if(on.x==hn.x&&on.y==hn.y){un=o.points[1];Xt=pn.x==un.x&&pn.y==un.y}else Xt=!1;if(Xt)Yt=!0;else{_n=o.points[1];if(on.x==_n.x&&on.y==_n.y){cn=o.points[2];Yt=pn.x==cn.x&&pn.y==cn.y}else Yt=!1}if(Yt)o.neighbors[0]=a;else{var Ht,Zt;dn=o.points[0];if(on.x==dn.x&&on.y==dn.y){xn=o.points[2];Zt=pn.x==xn.x&&pn.y==xn.y}else Zt=!1;if(Zt)Ht=!0;else{bn=o.points[2];if(on.x==bn.x&&on.y==bn.y){yn=o.points[0];Ht=pn.x==yn.x&&pn.y==yn.y}else Ht=!1}if(Ht)o.neighbors[1]=a;else{var qt,$t;vn=o.points[0];if(on.x==vn.x&&on.y==vn.y){mn=o.points[1];$t=pn.x==mn.x&&pn.y==mn.y}else $t=!1;if($t)qt=!0;else{gn=o.points[1];if(on.x==gn.x&&on.y==gn.y){zn=o.points[0];qt=pn.x==zn.x&&pn.y==zn.y}else qt=!1}if(!qt)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");o.neighbors[2]=a}}}}}var Qt,Jt,ni;wn=t.triangle,On=a.points[1],Cn=a.points[2],En=wn.points[0];if(On.x!=En.x||On.y!=En.y){Un=wn.points[1];ni=On.x==Un.x&&On.y==Un.y}else ni=!0;if(ni)Jt=!0;else{Mn=wn.points[2];Jt=On.x==Mn.x&&On.y==Mn.y}if(Jt){var ei;Tn=wn.points[0];if(Cn.x!=Tn.x||Cn.y!=Tn.y){kn=wn.points[1];ei=Cn.x==kn.x&&Cn.y==kn.y}else ei=!0;if(ei)Qt=!0;else{Dn=wn.points[2];Qt=Cn.x==Dn.x&&Cn.y==Dn.y}}else Qt=!1;if(Qt){a.neighbors[0]=wn;var ti,ii;Sn=a.points[1],An=a.points[2],Pn=wn.points[2];if(Sn.x==Pn.x&&Sn.y==Pn.y){Vn=wn.points[1];ii=An.x==Vn.x&&An.y==Vn.y}else ii=!1;if(ii)ti=!0;else{In=wn.points[1];if(Sn.x==In.x&&Sn.y==In.y){Nn=wn.points[2];ti=An.x==Nn.x&&An.y==Nn.y}else ti=!1}if(ti)wn.neighbors[0]=a;else{var ri,li;Fn=wn.points[0];if(Sn.x==Fn.x&&Sn.y==Fn.y){Rn=wn.points[2];li=An.x==Rn.x&&An.y==Rn.y}else li=!1;if(li)ri=!0;else{Ln=wn.points[2];if(Sn.x==Ln.x&&Sn.y==Ln.y){Bn=wn.points[0];ri=An.x==Bn.x&&An.y==Bn.y}else ri=!1}if(ri)wn.neighbors[1]=a;else{var si,ai;Gn=wn.points[0];if(Sn.x==Gn.x&&Sn.y==Gn.y){jn=wn.points[1];ai=An.x==jn.x&&An.y==jn.y}else ai=!1;if(ai)si=!0;else{Kn=wn.points[1];if(Sn.x==Kn.x&&Sn.y==Kn.y){Wn=wn.points[0];si=An.x==Wn.x&&An.y==Wn.y}else si=!1}if(!si)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");wn.neighbors[2]=a}}}else{var oi,pi,hi;Yn=a.points[0],Xn=a.points[2],Hn=wn.points[0];if(Yn.x!=Hn.x||Yn.y!=Hn.y){Zn=wn.points[1];hi=Yn.x==Zn.x&&Yn.y==Zn.y}else hi=!0;if(hi)pi=!0;else{qn=wn.points[2];pi=Yn.x==qn.x&&Yn.y==qn.y}if(pi){var ui;$n=wn.points[0];if(Xn.x!=$n.x||Xn.y!=$n.y){Qn=wn.points[1];ui=Xn.x==Qn.x&&Xn.y==Qn.y}else ui=!0;if(ui)oi=!0;else{Jn=wn.points[2];oi=Xn.x==Jn.x&&Xn.y==Jn.y}}else oi=!1;if(oi){a.neighbors[1]=wn;var _i,ci;ne=a.points[0],ee=a.points[2],te=wn.points[2];if(ne.x==te.x&&ne.y==te.y){ie=wn.points[1];ci=ee.x==ie.x&&ee.y==ie.y}else ci=!1;if(ci)_i=!0;else{re=wn.points[1];if(ne.x==re.x&&ne.y==re.y){le=wn.points[2];_i=ee.x==le.x&&ee.y==le.y}else _i=!1}if(_i)wn.neighbors[0]=a;else{var di,fi;se=wn.points[0];if(ne.x==se.x&&ne.y==se.y){ae=wn.points[2];fi=ee.x==ae.x&&ee.y==ae.y}else fi=!1;if(fi)di=!0;else{oe=wn.points[2];if(ne.x==oe.x&&ne.y==oe.y){pe=wn.points[0];di=ee.x==pe.x&&ee.y==pe.y}else di=!1}if(di)wn.neighbors[1]=a;else{var xi,bi;he=wn.points[0];if(ne.x==he.x&&ne.y==he.y){ue=wn.points[1];bi=ee.x==ue.x&&ee.y==ue.y}else bi=!1;if(bi)xi=!0;else{_e=wn.points[1];if(ne.x==_e.x&&ne.y==_e.y){ce=wn.points[0];xi=ee.x==ce.x&&ee.y==ce.y}else xi=!1}if(!xi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");wn.neighbors[2]=a}}}else{var yi,vi,mi;de=a.points[0],fe=a.points[1],xe=wn.points[0];if(de.x!=xe.x||de.y!=xe.y){be=wn.points[1];mi=de.x==be.x&&de.y==be.y}else mi=!0;if(mi)vi=!0;else{ye=wn.points[2];vi=de.x==ye.x&&de.y==ye.y}if(vi){var gi;ve=wn.points[0];if(fe.x!=ve.x||fe.y!=ve.y){me=wn.points[1];gi=fe.x==me.x&&fe.y==me.y}else gi=!0;if(gi)yi=!0;else{ge=wn.points[2];yi=fe.x==ge.x&&fe.y==ge.y}}else yi=!1;if(yi){a.neighbors[2]=wn;var zi,wi;ze=a.points[0],we=a.points[1],Oe=wn.points[2];if(ze.x==Oe.x&&ze.y==Oe.y){Ce=wn.points[1];wi=we.x==Ce.x&&we.y==Ce.y}else wi=!1;if(wi)zi=!0;else{Ee=wn.points[1];if(ze.x==Ee.x&&ze.y==Ee.y){Ue=wn.points[2];zi=we.x==Ue.x&&we.y==Ue.y}else zi=!1}if(zi)wn.neighbors[0]=a;else{var Oi,Ci;Me=wn.points[0];if(ze.x==Me.x&&ze.y==Me.y){Te=wn.points[2];Ci=we.x==Te.x&&we.y==Te.y}else Ci=!1;if(Ci)Oi=!0;else{ke=wn.points[2];if(ze.x==ke.x&&ze.y==ke.y){De=wn.points[0];Oi=we.x==De.x&&we.y==De.y}else Oi=!1}if(Oi)wn.neighbors[1]=a;else{var Ei,Ui;Se=wn.points[0];if(ze.x==Se.x&&ze.y==Se.y){Ae=wn.points[1];Ui=we.x==Ae.x&&we.y==Ae.y}else Ui=!1;if(Ui)Ei=!0;else{Pe=wn.points[1];if(ze.x==Pe.x&&ze.y==Pe.y){Ve=wn.points[0];Ei=we.x==Ve.x&&we.y==Ve.y}else Ei=!1}if(!Ei)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");wn.neighbors[2]=a}}}}}if(t.prev.next=t.next,t.next.prev=t.prev,!this.legalize(a)){Ie=this.context;if(null==a.neighbors[0]){var Mi,Ti,ki,Di,Si,Ai;Ne=Ie.front,Fe=a.points[0],Re=a.points;null==(Mi=-1)&&(Mi=0);for(Le=Mi,Be=!1,Ge=0;Ge<3;){for(je=Ge++;Le<0;)Le+=3;for(;Le>2;)Le-=3;Ke=a.points[je];if(Fe.x==Ke.x&&Fe.y==Ke.y){Be=!0;break}++Le}if(!Be)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((ki=(Ti=Re[Le]).x)==(Si=(Di=Ne.search_node).point.x)){We=Di.point;if(Ti.x!=We.x||Ti.y!=We.y){Ye=Di.prev.point;if(Ti.x==Ye.x&&Ti.y==Ye.y)Di=Di.prev;else{Xe=Di.next.point;if(Ti.x!=Xe.x||Ti.y!=Xe.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Di=Di.next}}}else if(ki<Si)for(;null!=(Di=Di.prev);){He=Di.point;if(Ti.x==He.x&&Ti.y==He.y)break}else for(;null!=(Di=Di.next);){Ze=Di.point;if(Ti.x==Ze.x&&Ti.y==Ze.y)break}null!=Di&&(Ne.search_node=Di),null!=(Ai=Di)&&(Ai.triangle=a)}if(null==a.neighbors[1]){var Pi,Vi,Ii,Ni,Fi,Ri;qe=Ie.front,$e=a.points[1],Qe=a.points;null==(Pi=-1)&&(Pi=0);for(Je=Pi,nt=!1,et=0;et<3;){for(tt=et++;Je<0;)Je+=3;for(;Je>2;)Je-=3;it=a.points[tt];if($e.x==it.x&&$e.y==it.y){nt=!0;break}++Je}if(!nt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Ii=(Vi=Qe[Je]).x)==(Fi=(Ni=qe.search_node).point.x)){rt=Ni.point;if(Vi.x!=rt.x||Vi.y!=rt.y){lt=Ni.prev.point;if(Vi.x==lt.x&&Vi.y==lt.y)Ni=Ni.prev;else{st=Ni.next.point;if(Vi.x!=st.x||Vi.y!=st.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Ni=Ni.next}}}else if(Ii<Fi)for(;null!=(Ni=Ni.prev);){at=Ni.point;if(Vi.x==at.x&&Vi.y==at.y)break}else for(;null!=(Ni=Ni.next);){ot=Ni.point;if(Vi.x==ot.x&&Vi.y==ot.y)break}null!=Ni&&(qe.search_node=Ni),null!=(Ri=Ni)&&(Ri.triangle=a)}if(null==a.neighbors[2]){var Li,Bi,Gi,ji,Ki,Wi;pt=Ie.front,ht=a.points[2],ut=a.points;null==(Li=-1)&&(Li=0);for(_t=Li,ct=!1,dt=0;dt<3;){for(ft=dt++;_t<0;)_t+=3;for(;_t>2;)_t-=3;xt=a.points[ft];if(ht.x==xt.x&&ht.y==xt.y){ct=!0;break}++_t}if(!ct)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((Gi=(Bi=ut[_t]).x)==(Ki=(ji=pt.search_node).point.x)){bt=ji.point;if(Bi.x!=bt.x||Bi.y!=bt.y){yt=ji.prev.point;if(Bi.x==yt.x&&Bi.y==yt.y)ji=ji.prev;else{vt=ji.next.point;if(Bi.x!=vt.x||Bi.y!=vt.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ji=ji.next}}}else if(Gi<Ki)for(;null!=(ji=ji.prev);){mt=ji.point;if(Bi.x==mt.x&&Bi.y==mt.y)break}else for(;null!=(ji=ji.next);){gt=ji.point;if(Bi.x==gt.x&&Bi.y==gt.y)break}null!=ji&&(pt.search_node=ji),null!=(Wi=ji)&&(Wi.triangle=a)}}t=t.prev}if(null!=n.next&&null!=n.next.next&&(e=Math.atan2(n.point.y-n.next.next.point.y,n.point.x-n.next.next.point.x))<poly2tri_Constants.PI_3div4){var Yi=n.point,Xi=n.next.point,Hi=n.next.next.point,Zi=(Yi.x-Hi.x)*(Xi.y-Hi.y)-(Yi.y-Hi.y)*(Xi.x-Hi.x);for(this.context.basin.left_node=-1==(Zi>-poly2tri_Constants.EPSILON&&Zi<poly2tri_Constants.EPSILON?0:Zi>0?-1:1)?n.next.next:n.next,this.context.basin.bottom_node=this.context.basin.left_node;null!=this.context.basin.bottom_node.next&&this.context.basin.bottom_node.point.y>=this.context.basin.bottom_node.next.point.y;)this.context.basin.bottom_node=this.context.basin.bottom_node.next;if(this.context.basin.bottom_node!=this.context.basin.left_node){for(this.context.basin.right_node=this.context.basin.bottom_node;null!=this.context.basin.right_node.next&&this.context.basin.right_node.point.y<this.context.basin.right_node.next.point.y;)this.context.basin.right_node=this.context.basin.right_node.next;this.context.basin.right_node!=this.context.basin.bottom_node&&(this.context.basin.width=this.context.basin.right_node.point.x-this.context.basin.left_node.point.x,this.context.basin.left_highest=this.context.basin.left_node.point.y>this.context.basin.right_node.point.y,this.fillBasinReq(this.context.basin.bottom_node))}}},legalize:function(n){for(var e=0;e<3;){var t=e++;if(!n.delaunay_edge[t]){var i=n.neighbors[t];if(null!=i){var r=n.points[t],l=n.points,s=-1;null==s&&(s=0);for(var a=s,o=!1,p=0;p<3;){for(var h=p++;a<0;)a+=3;for(;a>2;)a-=3;var u=n.points[h];if(r.x==u.x&&r.y==u.y){o=!0;break}++a}if(!o)throw haxe_Exception.thrown("Triangle::Point not in triangle");var _=l[a],c=i.points,d=-1;null==d&&(d=0);for(var f=d,x=!1,b=0;b<3;){for(var y=b++;f<0;)f+=3;for(;f>2;)f-=3;var v=i.points[y];if(_.x==v.x&&_.y==v.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");var m=c[f],g=-1;try{var z=0;null==z&&(z=0);for(var w=z,O=!1,C=0;C<3;){for(var E=C++;w<0;)w+=3;for(;w>2;)w-=3;var U=i.points[E];if(m.x==U.x&&m.y==U.y){O=!0;break}++w}if(!O)throw haxe_Exception.thrown("Triangle::Point not in triangle");g=w}catch(n){var M=haxe_Exception.caught(n).unwrap();if("string"!=typeof M)throw n;var T=M;haxe_Log.trace(T,{fileName:"/Users/jeremyfa/Developer/ceramic/git/poly2tri/src/poly2tri/Triangle.hx",lineNumber:275,className:"poly2tri.Triangle",methodName:"index"})}var k=g;if(i.constrained_edge[k]||i.delaunay_edge[k]){n.constrained_edge[t]=i.constrained_edge[k];continue}var D=n.points,S=1;null==S&&(S=0);for(var A=S,P=!1,V=0;V<3;){for(var I=V++;A<0;)A+=3;for(;A>2;)A-=3;var N=n.points[I];if(r.x==N.x&&r.y==N.y){P=!0;break}++A}if(!P)throw haxe_Exception.thrown("Triangle::Point not in triangle");var F=D[A],R=n.points,L=-1;null==L&&(L=0);for(var B=L,G=!1,j=0;j<3;){for(var K=j++;B<0;)B+=3;for(;B>2;)B-=3;var W=n.points[K];if(r.x==W.x&&r.y==W.y){G=!0;break}++B}if(!G)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Y=R[B],X=r.x-m.x,H=r.y-m.y,Z=F.x-m.x,q=F.y-m.y,$=X*q-Z*H,Q=!1;if($>0){var J=Y.x-m.x,nn=Y.y-m.y,en=J*H-X*nn;if(en>0)Q=(X*X+H*H)*(Z*nn-J*q)+(Z*Z+q*q)*en+(J*J+nn*nn)*$>0}if(Q){n.delaunay_edge[t]=!0,i.delaunay_edge[k]=!0;var tn=n.neighbors,rn=-1;null==rn&&(rn=0);for(var ln=rn,sn=!1,an=0;an<3;){for(var on=an++;ln<0;)ln+=3;for(;ln>2;)ln-=3;var pn=n.points[on];if(r.x==pn.x&&r.y==pn.y){sn=!0;break}++ln}if(!sn)throw haxe_Exception.thrown("Triangle::Point not in triangle");var hn=tn[ln],un=n.neighbors,_n=1;null==_n&&(_n=0);for(var cn=_n,dn=!1,xn=0;xn<3;){for(var bn=xn++;cn<0;)cn+=3;for(;cn>2;)cn-=3;var yn=n.points[bn];if(r.x==yn.x&&r.y==yn.y){dn=!0;break}++cn}if(!dn)throw haxe_Exception.thrown("Triangle::Point not in triangle");var vn=un[cn],mn=i.neighbors,gn=-1;null==gn&&(gn=0);for(var zn=gn,wn=!1,On=0;On<3;){for(var Cn=On++;zn<0;)zn+=3;for(;zn>2;)zn-=3;var En=i.points[Cn];if(m.x==En.x&&m.y==En.y){wn=!0;break}++zn}if(!wn)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Un=mn[zn],Mn=i.neighbors,Tn=1;null==Tn&&(Tn=0);for(var kn=Tn,Dn=!1,Sn=0;Sn<3;){for(var An=Sn++;kn<0;)kn+=3;for(;kn>2;)kn-=3;var Pn=i.points[An];if(m.x==Pn.x&&m.y==Pn.y){Dn=!0;break}++kn}if(!Dn)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Vn=Mn[kn],In=n.constrained_edge,Nn=-1;null==Nn&&(Nn=0);for(var Fn=Nn,Rn=!1,Ln=0;Ln<3;){for(var Bn=Ln++;Fn<0;)Fn+=3;for(;Fn>2;)Fn-=3;var Gn=n.points[Bn];if(r.x==Gn.x&&r.y==Gn.y){Rn=!0;break}++Fn}if(!Rn)throw haxe_Exception.thrown("Triangle::Point not in triangle");var jn=In[Fn],Kn=n.constrained_edge,Wn=1;null==Wn&&(Wn=0);for(var Yn=Wn,Xn=!1,Hn=0;Hn<3;){for(var Zn=Hn++;Yn<0;)Yn+=3;for(;Yn>2;)Yn-=3;var qn=n.points[Zn];if(r.x==qn.x&&r.y==qn.y){Xn=!0;break}++Yn}if(!Xn)throw haxe_Exception.thrown("Triangle::Point not in triangle");var $n=Kn[Yn],Qn=i.constrained_edge,Jn=-1;null==Jn&&(Jn=0);for(var ne=Jn,ee=!1,te=0;te<3;){for(var ie=te++;ne<0;)ne+=3;for(;ne>2;)ne-=3;var re=i.points[ie];if(m.x==re.x&&m.y==re.y){ee=!0;break}++ne}if(!ee)throw haxe_Exception.thrown("Triangle::Point not in triangle");var le=Qn[ne],se=i.constrained_edge,ae=1;null==ae&&(ae=0);for(var oe=ae,pe=!1,he=0;he<3;){for(var ue=he++;oe<0;)oe+=3;for(;oe>2;)oe-=3;var _e=i.points[ue];if(m.x==_e.x&&m.y==_e.y){pe=!0;break}++oe}if(!pe)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ce=se[oe],de=n.delaunay_edge,fe=-1;null==fe&&(fe=0);for(var xe=fe,be=!1,ye=0;ye<3;){for(var ve=ye++;xe<0;)xe+=3;for(;xe>2;)xe-=3;var me=n.points[ve];if(r.x==me.x&&r.y==me.y){be=!0;break}++xe}if(!be)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ge=de[xe],ze=n.delaunay_edge,we=1;null==we&&(we=0);for(var Oe=we,Ce=!1,Ee=0;Ee<3;){for(var Ue=Ee++;Oe<0;)Oe+=3;for(;Oe>2;)Oe-=3;var Me=n.points[Ue];if(r.x==Me.x&&r.y==Me.y){Ce=!0;break}++Oe}if(!Ce)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Te=ze[Oe],ke=i.delaunay_edge,De=-1;null==De&&(De=0);for(var Se=De,Ae=!1,Pe=0;Pe<3;){for(var Ve=Pe++;Se<0;)Se+=3;for(;Se>2;)Se-=3;var Ie=i.points[Ve];if(m.x==Ie.x&&m.y==Ie.y){Ae=!0;break}++Se}if(!Ae)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Ne=ke[Se],Fe=i.delaunay_edge,Re=1;null==Re&&(Re=0);for(var Le=Re,Be=!1,Ge=0;Ge<3;){for(var je=Ge++;Le<0;)Le+=3;for(;Le>2;)Le-=3;var Ke=i.points[je];if(m.x==Ke.x&&m.y==Ke.y){Be=!0;break}++Le}if(!Be)throw haxe_Exception.thrown("Triangle::Point not in triangle");var We=Fe[Le];n.legalize(r,m),i.legalize(m,r);var Ye=i.delaunay_edge,Xe=-1;null==Xe&&(Xe=0);for(var He=Xe,Ze=!1,qe=0;qe<3;){for(var $e=qe++;He<0;)He+=3;for(;He>2;)He-=3;var Qe=i.points[$e];if(r.x==Qe.x&&r.y==Qe.y){Ze=!0;break}++He}if(!Ze)throw haxe_Exception.thrown("Triangle::Point not in triangle");Ye[He]=ge;var Je=n.delaunay_edge,nt=1;null==nt&&(nt=0);for(var et=nt,tt=!1,it=0;it<3;){for(var rt=it++;et<0;)et+=3;for(;et>2;)et-=3;var lt=n.points[rt];if(r.x==lt.x&&r.y==lt.y){tt=!0;break}++et}if(!tt)throw haxe_Exception.thrown("Triangle::Point not in triangle");Je[et]=Te;var st=n.delaunay_edge,at=-1;null==at&&(at=0);for(var ot=at,pt=!1,ht=0;ht<3;){for(var ut=ht++;ot<0;)ot+=3;for(;ot>2;)ot-=3;var _t=n.points[ut];if(m.x==_t.x&&m.y==_t.y){pt=!0;break}++ot}if(!pt)throw haxe_Exception.thrown("Triangle::Point not in triangle");st[ot]=Ne;var ct=i.delaunay_edge,dt=1;null==dt&&(dt=0);for(var ft=dt,xt=!1,bt=0;bt<3;){for(var yt=bt++;ft<0;)ft+=3;for(;ft>2;)ft-=3;var vt=i.points[yt];if(m.x==vt.x&&m.y==vt.y){xt=!0;break}++ft}if(!xt)throw haxe_Exception.thrown("Triangle::Point not in triangle");ct[ft]=We;var mt=i.constrained_edge,gt=-1;null==gt&&(gt=0);for(var zt=gt,wt=!1,Ot=0;Ot<3;){for(var Ct=Ot++;zt<0;)zt+=3;for(;zt>2;)zt-=3;var Et=i.points[Ct];if(r.x==Et.x&&r.y==Et.y){wt=!0;break}++zt}if(!wt)throw haxe_Exception.thrown("Triangle::Point not in triangle");mt[zt]=jn;var Ut=n.constrained_edge,Mt=1;null==Mt&&(Mt=0);for(var Tt=Mt,kt=!1,Dt=0;Dt<3;){for(var St=Dt++;Tt<0;)Tt+=3;for(;Tt>2;)Tt-=3;var At=n.points[St];if(r.x==At.x&&r.y==At.y){kt=!0;break}++Tt}if(!kt)throw haxe_Exception.thrown("Triangle::Point not in triangle");Ut[Tt]=$n;var Pt=n.constrained_edge,Vt=-1;null==Vt&&(Vt=0);for(var It=Vt,Nt=!1,Ft=0;Ft<3;){for(var Rt=Ft++;It<0;)It+=3;for(;It>2;)It-=3;var Lt=n.points[Rt];if(m.x==Lt.x&&m.y==Lt.y){Nt=!0;break}++It}if(!Nt)throw haxe_Exception.thrown("Triangle::Point not in triangle");Pt[It]=le;var Bt=i.constrained_edge,Gt=1;null==Gt&&(Gt=0);for(var jt=Gt,Kt=!1,Wt=0;Wt<3;){for(var Yt=Wt++;jt<0;)jt+=3;for(;jt>2;)jt-=3;var Xt=i.points[Yt];if(m.x==Xt.x&&m.y==Xt.y){Kt=!0;break}++jt}if(!Kt)throw haxe_Exception.thrown("Triangle::Point not in triangle");if(Bt[jt]=ce,n.neighbors[0]=null,n.neighbors[1]=null,n.neighbors[2]=null,i.neighbors[0]=null,i.neighbors[1]=null,i.neighbors[2]=null,null!=hn){var Ht,Zt,qt,$t=i.points[1],Qt=i.points[2],Jt=hn.points[0];if($t.x!=Jt.x||$t.y!=Jt.y){var ni=hn.points[1];qt=$t.x==ni.x&&$t.y==ni.y}else qt=!0;if(qt)Zt=!0;else{var ei=hn.points[2];Zt=$t.x==ei.x&&$t.y==ei.y}if(Zt){var ti,ii=hn.points[0];if(Qt.x!=ii.x||Qt.y!=ii.y){var ri=hn.points[1];ti=Qt.x==ri.x&&Qt.y==ri.y}else ti=!0;if(ti)Ht=!0;else{var li=hn.points[2];Ht=Qt.x==li.x&&Qt.y==li.y}}else Ht=!1;if(Ht){i.neighbors[0]=hn;var si,ai,oi=i.points[1],pi=i.points[2],hi=hn.points[2];if(oi.x==hi.x&&oi.y==hi.y){var ui=hn.points[1];ai=pi.x==ui.x&&pi.y==ui.y}else ai=!1;if(ai)si=!0;else{var _i=hn.points[1];if(oi.x==_i.x&&oi.y==_i.y){var ci=hn.points[2];si=pi.x==ci.x&&pi.y==ci.y}else si=!1}if(si)hn.neighbors[0]=i;else{var di,fi,xi=hn.points[0];if(oi.x==xi.x&&oi.y==xi.y){var bi=hn.points[2];fi=pi.x==bi.x&&pi.y==bi.y}else fi=!1;if(fi)di=!0;else{var yi=hn.points[2];if(oi.x==yi.x&&oi.y==yi.y){var vi=hn.points[0];di=pi.x==vi.x&&pi.y==vi.y}else di=!1}if(di)hn.neighbors[1]=i;else{var mi,gi,zi=hn.points[0];if(oi.x==zi.x&&oi.y==zi.y){var wi=hn.points[1];gi=pi.x==wi.x&&pi.y==wi.y}else gi=!1;if(gi)mi=!0;else{var Oi=hn.points[1];if(oi.x==Oi.x&&oi.y==Oi.y){var Ci=hn.points[0];mi=pi.x==Ci.x&&pi.y==Ci.y}else mi=!1}if(!mi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");hn.neighbors[2]=i}}}else{var Ei,Ui,Mi,Ti=i.points[0],ki=i.points[2],Di=hn.points[0];if(Ti.x!=Di.x||Ti.y!=Di.y){var Si=hn.points[1];Mi=Ti.x==Si.x&&Ti.y==Si.y}else Mi=!0;if(Mi)Ui=!0;else{var Ai=hn.points[2];Ui=Ti.x==Ai.x&&Ti.y==Ai.y}if(Ui){var Pi,Vi=hn.points[0];if(ki.x!=Vi.x||ki.y!=Vi.y){var Ii=hn.points[1];Pi=ki.x==Ii.x&&ki.y==Ii.y}else Pi=!0;if(Pi)Ei=!0;else{var Ni=hn.points[2];Ei=ki.x==Ni.x&&ki.y==Ni.y}}else Ei=!1;if(Ei){i.neighbors[1]=hn;var Fi,Ri,Li=i.points[0],Bi=i.points[2],Gi=hn.points[2];if(Li.x==Gi.x&&Li.y==Gi.y){var ji=hn.points[1];Ri=Bi.x==ji.x&&Bi.y==ji.y}else Ri=!1;if(Ri)Fi=!0;else{var Ki=hn.points[1];if(Li.x==Ki.x&&Li.y==Ki.y){var Wi=hn.points[2];Fi=Bi.x==Wi.x&&Bi.y==Wi.y}else Fi=!1}if(Fi)hn.neighbors[0]=i;else{var Yi,Xi,Hi=hn.points[0];if(Li.x==Hi.x&&Li.y==Hi.y){var Zi=hn.points[2];Xi=Bi.x==Zi.x&&Bi.y==Zi.y}else Xi=!1;if(Xi)Yi=!0;else{var qi=hn.points[2];if(Li.x==qi.x&&Li.y==qi.y){var $i=hn.points[0];Yi=Bi.x==$i.x&&Bi.y==$i.y}else Yi=!1}if(Yi)hn.neighbors[1]=i;else{var Qi,Ji,nr=hn.points[0];if(Li.x==nr.x&&Li.y==nr.y){var er=hn.points[1];Ji=Bi.x==er.x&&Bi.y==er.y}else Ji=!1;if(Ji)Qi=!0;else{var tr=hn.points[1];if(Li.x==tr.x&&Li.y==tr.y){var ir=hn.points[0];Qi=Bi.x==ir.x&&Bi.y==ir.y}else Qi=!1}if(!Qi)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");hn.neighbors[2]=i}}}else{var rr,lr,sr,ar=i.points[0],or=i.points[1],pr=hn.points[0];if(ar.x!=pr.x||ar.y!=pr.y){var hr=hn.points[1];sr=ar.x==hr.x&&ar.y==hr.y}else sr=!0;if(sr)lr=!0;else{var ur=hn.points[2];lr=ar.x==ur.x&&ar.y==ur.y}if(lr){var _r,cr=hn.points[0];if(or.x!=cr.x||or.y!=cr.y){var dr=hn.points[1];_r=or.x==dr.x&&or.y==dr.y}else _r=!0;if(_r)rr=!0;else{var fr=hn.points[2];rr=or.x==fr.x&&or.y==fr.y}}else rr=!1;if(rr){i.neighbors[2]=hn;var xr,br,yr=i.points[0],vr=i.points[1],mr=hn.points[2];if(yr.x==mr.x&&yr.y==mr.y){var gr=hn.points[1];br=vr.x==gr.x&&vr.y==gr.y}else br=!1;if(br)xr=!0;else{var zr=hn.points[1];if(yr.x==zr.x&&yr.y==zr.y){var wr=hn.points[2];xr=vr.x==wr.x&&vr.y==wr.y}else xr=!1}if(xr)hn.neighbors[0]=i;else{var Or,Cr,Er=hn.points[0];if(yr.x==Er.x&&yr.y==Er.y){var Ur=hn.points[2];Cr=vr.x==Ur.x&&vr.y==Ur.y}else Cr=!1;if(Cr)Or=!0;else{var Mr=hn.points[2];if(yr.x==Mr.x&&yr.y==Mr.y){var Tr=hn.points[0];Or=vr.x==Tr.x&&vr.y==Tr.y}else Or=!1}if(Or)hn.neighbors[1]=i;else{var kr,Dr,Sr=hn.points[0];if(yr.x==Sr.x&&yr.y==Sr.y){var Ar=hn.points[1];Dr=vr.x==Ar.x&&vr.y==Ar.y}else Dr=!1;if(Dr)kr=!0;else{var Pr=hn.points[1];if(yr.x==Pr.x&&yr.y==Pr.y){var Vr=hn.points[0];kr=vr.x==Vr.x&&vr.y==Vr.y}else kr=!1}if(!kr)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");hn.neighbors[2]=i}}}}}}if(null!=vn){var Ir,Nr,Fr,Rr=n.points[1],Lr=n.points[2],Br=vn.points[0];if(Rr.x!=Br.x||Rr.y!=Br.y){var Gr=vn.points[1];Fr=Rr.x==Gr.x&&Rr.y==Gr.y}else Fr=!0;if(Fr)Nr=!0;else{var jr=vn.points[2];Nr=Rr.x==jr.x&&Rr.y==jr.y}if(Nr){var Kr,Wr=vn.points[0];if(Lr.x!=Wr.x||Lr.y!=Wr.y){var Yr=vn.points[1];Kr=Lr.x==Yr.x&&Lr.y==Yr.y}else Kr=!0;if(Kr)Ir=!0;else{var Xr=vn.points[2];Ir=Lr.x==Xr.x&&Lr.y==Xr.y}}else Ir=!1;if(Ir){n.neighbors[0]=vn;var Hr,Zr,qr=n.points[1],$r=n.points[2],Qr=vn.points[2];if(qr.x==Qr.x&&qr.y==Qr.y){var Jr=vn.points[1];Zr=$r.x==Jr.x&&$r.y==Jr.y}else Zr=!1;if(Zr)Hr=!0;else{var nl=vn.points[1];if(qr.x==nl.x&&qr.y==nl.y){var el=vn.points[2];Hr=$r.x==el.x&&$r.y==el.y}else Hr=!1}if(Hr)vn.neighbors[0]=n;else{var tl,il,rl=vn.points[0];if(qr.x==rl.x&&qr.y==rl.y){var ll=vn.points[2];il=$r.x==ll.x&&$r.y==ll.y}else il=!1;if(il)tl=!0;else{var sl=vn.points[2];if(qr.x==sl.x&&qr.y==sl.y){var al=vn.points[0];tl=$r.x==al.x&&$r.y==al.y}else tl=!1}if(tl)vn.neighbors[1]=n;else{var ol,pl,hl=vn.points[0];if(qr.x==hl.x&&qr.y==hl.y){var ul=vn.points[1];pl=$r.x==ul.x&&$r.y==ul.y}else pl=!1;if(pl)ol=!0;else{var _l=vn.points[1];if(qr.x==_l.x&&qr.y==_l.y){var cl=vn.points[0];ol=$r.x==cl.x&&$r.y==cl.y}else ol=!1}if(!ol)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");vn.neighbors[2]=n}}}else{var dl,fl,xl,bl=n.points[0],yl=n.points[2],vl=vn.points[0];if(bl.x!=vl.x||bl.y!=vl.y){var ml=vn.points[1];xl=bl.x==ml.x&&bl.y==ml.y}else xl=!0;if(xl)fl=!0;else{var gl=vn.points[2];fl=bl.x==gl.x&&bl.y==gl.y}if(fl){var zl,wl=vn.points[0];if(yl.x!=wl.x||yl.y!=wl.y){var Ol=vn.points[1];zl=yl.x==Ol.x&&yl.y==Ol.y}else zl=!0;if(zl)dl=!0;else{var Cl=vn.points[2];dl=yl.x==Cl.x&&yl.y==Cl.y}}else dl=!1;if(dl){n.neighbors[1]=vn;var El,Ul,Ml=n.points[0],Tl=n.points[2],kl=vn.points[2];if(Ml.x==kl.x&&Ml.y==kl.y){var Dl=vn.points[1];Ul=Tl.x==Dl.x&&Tl.y==Dl.y}else Ul=!1;if(Ul)El=!0;else{var Sl=vn.points[1];if(Ml.x==Sl.x&&Ml.y==Sl.y){var Al=vn.points[2];El=Tl.x==Al.x&&Tl.y==Al.y}else El=!1}if(El)vn.neighbors[0]=n;else{var Pl,Vl,Il=vn.points[0];if(Ml.x==Il.x&&Ml.y==Il.y){var Nl=vn.points[2];Vl=Tl.x==Nl.x&&Tl.y==Nl.y}else Vl=!1;if(Vl)Pl=!0;else{var Fl=vn.points[2];if(Ml.x==Fl.x&&Ml.y==Fl.y){var Rl=vn.points[0];Pl=Tl.x==Rl.x&&Tl.y==Rl.y}else Pl=!1}if(Pl)vn.neighbors[1]=n;else{var Ll,Bl,Gl=vn.points[0];if(Ml.x==Gl.x&&Ml.y==Gl.y){var jl=vn.points[1];Bl=Tl.x==jl.x&&Tl.y==jl.y}else Bl=!1;if(Bl)Ll=!0;else{var Kl=vn.points[1];if(Ml.x==Kl.x&&Ml.y==Kl.y){var Wl=vn.points[0];Ll=Tl.x==Wl.x&&Tl.y==Wl.y}else Ll=!1}if(!Ll)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");vn.neighbors[2]=n}}}else{var Yl,Xl,Hl,Zl=n.points[0],ql=n.points[1],$l=vn.points[0];if(Zl.x!=$l.x||Zl.y!=$l.y){var Ql=vn.points[1];Hl=Zl.x==Ql.x&&Zl.y==Ql.y}else Hl=!0;if(Hl)Xl=!0;else{var Jl=vn.points[2];Xl=Zl.x==Jl.x&&Zl.y==Jl.y}if(Xl){var ns,es=vn.points[0];if(ql.x!=es.x||ql.y!=es.y){var ts=vn.points[1];ns=ql.x==ts.x&&ql.y==ts.y}else ns=!0;if(ns)Yl=!0;else{var is=vn.points[2];Yl=ql.x==is.x&&ql.y==is.y}}else Yl=!1;if(Yl){n.neighbors[2]=vn;var rs,ls,ss=n.points[0],as=n.points[1],os=vn.points[2];if(ss.x==os.x&&ss.y==os.y){var ps=vn.points[1];ls=as.x==ps.x&&as.y==ps.y}else ls=!1;if(ls)rs=!0;else{var hs=vn.points[1];if(ss.x==hs.x&&ss.y==hs.y){var us=vn.points[2];rs=as.x==us.x&&as.y==us.y}else rs=!1}if(rs)vn.neighbors[0]=n;else{var _s,cs,ds=vn.points[0];if(ss.x==ds.x&&ss.y==ds.y){var fs=vn.points[2];cs=as.x==fs.x&&as.y==fs.y}else cs=!1;if(cs)_s=!0;else{var xs=vn.points[2];if(ss.x==xs.x&&ss.y==xs.y){var bs=vn.points[0];_s=as.x==bs.x&&as.y==bs.y}else _s=!1}if(_s)vn.neighbors[1]=n;else{var ys,vs,ms=vn.points[0];if(ss.x==ms.x&&ss.y==ms.y){var gs=vn.points[1];vs=as.x==gs.x&&as.y==gs.y}else vs=!1;if(vs)ys=!0;else{var zs=vn.points[1];if(ss.x==zs.x&&ss.y==zs.y){var ws=vn.points[0];ys=as.x==ws.x&&as.y==ws.y}else ys=!1}if(!ys)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");vn.neighbors[2]=n}}}}}}if(null!=Un){var Os,Cs,Es,Us=n.points[1],Ms=n.points[2],Ts=Un.points[0];if(Us.x!=Ts.x||Us.y!=Ts.y){var ks=Un.points[1];Es=Us.x==ks.x&&Us.y==ks.y}else Es=!0;if(Es)Cs=!0;else{var Ds=Un.points[2];Cs=Us.x==Ds.x&&Us.y==Ds.y}if(Cs){var Ss,As=Un.points[0];if(Ms.x!=As.x||Ms.y!=As.y){var Ps=Un.points[1];Ss=Ms.x==Ps.x&&Ms.y==Ps.y}else Ss=!0;if(Ss)Os=!0;else{var Vs=Un.points[2];Os=Ms.x==Vs.x&&Ms.y==Vs.y}}else Os=!1;if(Os){n.neighbors[0]=Un;var Is,Ns,Fs=n.points[1],Rs=n.points[2],Ls=Un.points[2];if(Fs.x==Ls.x&&Fs.y==Ls.y){var Bs=Un.points[1];Ns=Rs.x==Bs.x&&Rs.y==Bs.y}else Ns=!1;if(Ns)Is=!0;else{var Gs=Un.points[1];if(Fs.x==Gs.x&&Fs.y==Gs.y){var js=Un.points[2];Is=Rs.x==js.x&&Rs.y==js.y}else Is=!1}if(Is)Un.neighbors[0]=n;else{var Ks,Ws,Ys=Un.points[0];if(Fs.x==Ys.x&&Fs.y==Ys.y){var Xs=Un.points[2];Ws=Rs.x==Xs.x&&Rs.y==Xs.y}else Ws=!1;if(Ws)Ks=!0;else{var Hs=Un.points[2];if(Fs.x==Hs.x&&Fs.y==Hs.y){var Zs=Un.points[0];Ks=Rs.x==Zs.x&&Rs.y==Zs.y}else Ks=!1}if(Ks)Un.neighbors[1]=n;else{var qs,$s,Qs=Un.points[0];if(Fs.x==Qs.x&&Fs.y==Qs.y){var Js=Un.points[1];$s=Rs.x==Js.x&&Rs.y==Js.y}else $s=!1;if($s)qs=!0;else{var na=Un.points[1];if(Fs.x==na.x&&Fs.y==na.y){var ea=Un.points[0];qs=Rs.x==ea.x&&Rs.y==ea.y}else qs=!1}if(!qs)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Un.neighbors[2]=n}}}else{var ta,ia,ra,la=n.points[0],sa=n.points[2],aa=Un.points[0];if(la.x!=aa.x||la.y!=aa.y){var oa=Un.points[1];ra=la.x==oa.x&&la.y==oa.y}else ra=!0;if(ra)ia=!0;else{var pa=Un.points[2];ia=la.x==pa.x&&la.y==pa.y}if(ia){var ha,ua=Un.points[0];if(sa.x!=ua.x||sa.y!=ua.y){var _a=Un.points[1];ha=sa.x==_a.x&&sa.y==_a.y}else ha=!0;if(ha)ta=!0;else{var ca=Un.points[2];ta=sa.x==ca.x&&sa.y==ca.y}}else ta=!1;if(ta){n.neighbors[1]=Un;var da,fa,xa=n.points[0],ba=n.points[2],ya=Un.points[2];if(xa.x==ya.x&&xa.y==ya.y){var va=Un.points[1];fa=ba.x==va.x&&ba.y==va.y}else fa=!1;if(fa)da=!0;else{var ma=Un.points[1];if(xa.x==ma.x&&xa.y==ma.y){var ga=Un.points[2];da=ba.x==ga.x&&ba.y==ga.y}else da=!1}if(da)Un.neighbors[0]=n;else{var za,wa,Oa=Un.points[0];if(xa.x==Oa.x&&xa.y==Oa.y){var Ca=Un.points[2];wa=ba.x==Ca.x&&ba.y==Ca.y}else wa=!1;if(wa)za=!0;else{var Ea=Un.points[2];if(xa.x==Ea.x&&xa.y==Ea.y){var Ua=Un.points[0];za=ba.x==Ua.x&&ba.y==Ua.y}else za=!1}if(za)Un.neighbors[1]=n;else{var Ma,Ta,ka=Un.points[0];if(xa.x==ka.x&&xa.y==ka.y){var Da=Un.points[1];Ta=ba.x==Da.x&&ba.y==Da.y}else Ta=!1;if(Ta)Ma=!0;else{var Sa=Un.points[1];if(xa.x==Sa.x&&xa.y==Sa.y){var Aa=Un.points[0];Ma=ba.x==Aa.x&&ba.y==Aa.y}else Ma=!1}if(!Ma)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Un.neighbors[2]=n}}}else{var Pa,Va,Ia,Na=n.points[0],Fa=n.points[1],Ra=Un.points[0];if(Na.x!=Ra.x||Na.y!=Ra.y){var La=Un.points[1];Ia=Na.x==La.x&&Na.y==La.y}else Ia=!0;if(Ia)Va=!0;else{var Ba=Un.points[2];Va=Na.x==Ba.x&&Na.y==Ba.y}if(Va){var Ga,ja=Un.points[0];if(Fa.x!=ja.x||Fa.y!=ja.y){var Ka=Un.points[1];Ga=Fa.x==Ka.x&&Fa.y==Ka.y}else Ga=!0;if(Ga)Pa=!0;else{var Wa=Un.points[2];Pa=Fa.x==Wa.x&&Fa.y==Wa.y}}else Pa=!1;if(Pa){n.neighbors[2]=Un;var Ya,Xa,Ha=n.points[0],Za=n.points[1],qa=Un.points[2];if(Ha.x==qa.x&&Ha.y==qa.y){var $a=Un.points[1];Xa=Za.x==$a.x&&Za.y==$a.y}else Xa=!1;if(Xa)Ya=!0;else{var Qa=Un.points[1];if(Ha.x==Qa.x&&Ha.y==Qa.y){var Ja=Un.points[2];Ya=Za.x==Ja.x&&Za.y==Ja.y}else Ya=!1}if(Ya)Un.neighbors[0]=n;else{var no,eo,to=Un.points[0];if(Ha.x==to.x&&Ha.y==to.y){var io=Un.points[2];eo=Za.x==io.x&&Za.y==io.y}else eo=!1;if(eo)no=!0;else{var ro=Un.points[2];if(Ha.x==ro.x&&Ha.y==ro.y){var lo=Un.points[0];no=Za.x==lo.x&&Za.y==lo.y}else no=!1}if(no)Un.neighbors[1]=n;else{var so,ao,oo=Un.points[0];if(Ha.x==oo.x&&Ha.y==oo.y){var po=Un.points[1];ao=Za.x==po.x&&Za.y==po.y}else ao=!1;if(ao)so=!0;else{var ho=Un.points[1];if(Ha.x==ho.x&&Ha.y==ho.y){var uo=Un.points[0];so=Za.x==uo.x&&Za.y==uo.y}else so=!1}if(!so)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Un.neighbors[2]=n}}}}}}if(null!=Vn){var _o,co,fo,xo=i.points[1],bo=i.points[2],yo=Vn.points[0];if(xo.x!=yo.x||xo.y!=yo.y){var vo=Vn.points[1];fo=xo.x==vo.x&&xo.y==vo.y}else fo=!0;if(fo)co=!0;else{var mo=Vn.points[2];co=xo.x==mo.x&&xo.y==mo.y}if(co){var go,zo=Vn.points[0];if(bo.x!=zo.x||bo.y!=zo.y){var wo=Vn.points[1];go=bo.x==wo.x&&bo.y==wo.y}else go=!0;if(go)_o=!0;else{var Oo=Vn.points[2];_o=bo.x==Oo.x&&bo.y==Oo.y}}else _o=!1;if(_o){i.neighbors[0]=Vn;var Co,Eo,Uo=i.points[1],Mo=i.points[2],To=Vn.points[2];if(Uo.x==To.x&&Uo.y==To.y){var ko=Vn.points[1];Eo=Mo.x==ko.x&&Mo.y==ko.y}else Eo=!1;if(Eo)Co=!0;else{var Do=Vn.points[1];if(Uo.x==Do.x&&Uo.y==Do.y){var So=Vn.points[2];Co=Mo.x==So.x&&Mo.y==So.y}else Co=!1}if(Co)Vn.neighbors[0]=i;else{var Ao,Po,Vo=Vn.points[0];if(Uo.x==Vo.x&&Uo.y==Vo.y){var Io=Vn.points[2];Po=Mo.x==Io.x&&Mo.y==Io.y}else Po=!1;if(Po)Ao=!0;else{var No=Vn.points[2];if(Uo.x==No.x&&Uo.y==No.y){var Fo=Vn.points[0];Ao=Mo.x==Fo.x&&Mo.y==Fo.y}else Ao=!1}if(Ao)Vn.neighbors[1]=i;else{var Ro,Lo,Bo=Vn.points[0];if(Uo.x==Bo.x&&Uo.y==Bo.y){var Go=Vn.points[1];Lo=Mo.x==Go.x&&Mo.y==Go.y}else Lo=!1;if(Lo)Ro=!0;else{var jo=Vn.points[1];if(Uo.x==jo.x&&Uo.y==jo.y){var Ko=Vn.points[0];Ro=Mo.x==Ko.x&&Mo.y==Ko.y}else Ro=!1}if(!Ro)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=i}}}else{var Wo,Yo,Xo,Ho=i.points[0],Zo=i.points[2],qo=Vn.points[0];if(Ho.x!=qo.x||Ho.y!=qo.y){var $o=Vn.points[1];Xo=Ho.x==$o.x&&Ho.y==$o.y}else Xo=!0;if(Xo)Yo=!0;else{var Qo=Vn.points[2];Yo=Ho.x==Qo.x&&Ho.y==Qo.y}if(Yo){var Jo,np=Vn.points[0];if(Zo.x!=np.x||Zo.y!=np.y){var ep=Vn.points[1];Jo=Zo.x==ep.x&&Zo.y==ep.y}else Jo=!0;if(Jo)Wo=!0;else{var tp=Vn.points[2];Wo=Zo.x==tp.x&&Zo.y==tp.y}}else Wo=!1;if(Wo){i.neighbors[1]=Vn;var ip,rp,lp=i.points[0],sp=i.points[2],ap=Vn.points[2];if(lp.x==ap.x&&lp.y==ap.y){var op=Vn.points[1];rp=sp.x==op.x&&sp.y==op.y}else rp=!1;if(rp)ip=!0;else{var pp=Vn.points[1];if(lp.x==pp.x&&lp.y==pp.y){var hp=Vn.points[2];ip=sp.x==hp.x&&sp.y==hp.y}else ip=!1}if(ip)Vn.neighbors[0]=i;else{var up,_p,cp=Vn.points[0];if(lp.x==cp.x&&lp.y==cp.y){var dp=Vn.points[2];_p=sp.x==dp.x&&sp.y==dp.y}else _p=!1;if(_p)up=!0;else{var fp=Vn.points[2];if(lp.x==fp.x&&lp.y==fp.y){var xp=Vn.points[0];up=sp.x==xp.x&&sp.y==xp.y}else up=!1}if(up)Vn.neighbors[1]=i;else{var bp,yp,vp=Vn.points[0];if(lp.x==vp.x&&lp.y==vp.y){var mp=Vn.points[1];yp=sp.x==mp.x&&sp.y==mp.y}else yp=!1;if(yp)bp=!0;else{var gp=Vn.points[1];if(lp.x==gp.x&&lp.y==gp.y){var zp=Vn.points[0];bp=sp.x==zp.x&&sp.y==zp.y}else bp=!1}if(!bp)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=i}}}else{var wp,Op,Cp,Ep=i.points[0],Up=i.points[1],Mp=Vn.points[0];if(Ep.x!=Mp.x||Ep.y!=Mp.y){var Tp=Vn.points[1];Cp=Ep.x==Tp.x&&Ep.y==Tp.y}else Cp=!0;if(Cp)Op=!0;else{var kp=Vn.points[2];Op=Ep.x==kp.x&&Ep.y==kp.y}if(Op){var Dp,Sp=Vn.points[0];if(Up.x!=Sp.x||Up.y!=Sp.y){var Ap=Vn.points[1];Dp=Up.x==Ap.x&&Up.y==Ap.y}else Dp=!0;if(Dp)wp=!0;else{var Pp=Vn.points[2];wp=Up.x==Pp.x&&Up.y==Pp.y}}else wp=!1;if(wp){i.neighbors[2]=Vn;var Vp,Ip,Np=i.points[0],Fp=i.points[1],Rp=Vn.points[2];if(Np.x==Rp.x&&Np.y==Rp.y){var Lp=Vn.points[1];Ip=Fp.x==Lp.x&&Fp.y==Lp.y}else Ip=!1;if(Ip)Vp=!0;else{var Bp=Vn.points[1];if(Np.x==Bp.x&&Np.y==Bp.y){var Gp=Vn.points[2];Vp=Fp.x==Gp.x&&Fp.y==Gp.y}else Vp=!1}if(Vp)Vn.neighbors[0]=i;else{var jp,Kp,Wp=Vn.points[0];if(Np.x==Wp.x&&Np.y==Wp.y){var Yp=Vn.points[2];Kp=Fp.x==Yp.x&&Fp.y==Yp.y}else Kp=!1;if(Kp)jp=!0;else{var Xp=Vn.points[2];if(Np.x==Xp.x&&Np.y==Xp.y){var Hp=Vn.points[0];jp=Fp.x==Hp.x&&Fp.y==Hp.y}else jp=!1}if(jp)Vn.neighbors[1]=i;else{var Zp,qp,$p=Vn.points[0];if(Np.x==$p.x&&Np.y==$p.y){var Qp=Vn.points[1];qp=Fp.x==Qp.x&&Fp.y==Qp.y}else qp=!1;if(qp)Zp=!0;else{var Jp=Vn.points[1];if(Np.x==Jp.x&&Np.y==Jp.y){var nh=Vn.points[0];Zp=Fp.x==nh.x&&Fp.y==nh.y}else Zp=!1}if(!Zp)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");Vn.neighbors[2]=i}}}}}}var eh,th,ih,rh=n.points[1],lh=n.points[2],sh=i.points[0];if(rh.x!=sh.x||rh.y!=sh.y){var ah=i.points[1];ih=rh.x==ah.x&&rh.y==ah.y}else ih=!0;if(ih)th=!0;else{var oh=i.points[2];th=rh.x==oh.x&&rh.y==oh.y}if(th){var ph,hh=i.points[0];if(lh.x!=hh.x||lh.y!=hh.y){var uh=i.points[1];ph=lh.x==uh.x&&lh.y==uh.y}else ph=!0;if(ph)eh=!0;else{var _h=i.points[2];eh=lh.x==_h.x&&lh.y==_h.y}}else eh=!1;if(eh){n.neighbors[0]=i;var ch,dh,fh=n.points[1],xh=n.points[2],bh=i.points[2];if(fh.x==bh.x&&fh.y==bh.y){var yh=i.points[1];dh=xh.x==yh.x&&xh.y==yh.y}else dh=!1;if(dh)ch=!0;else{var vh=i.points[1];if(fh.x==vh.x&&fh.y==vh.y){var mh=i.points[2];ch=xh.x==mh.x&&xh.y==mh.y}else ch=!1}if(ch)i.neighbors[0]=n;else{var gh,zh,wh=i.points[0];if(fh.x==wh.x&&fh.y==wh.y){var Oh=i.points[2];zh=xh.x==Oh.x&&xh.y==Oh.y}else zh=!1;if(zh)gh=!0;else{var Ch=i.points[2];if(fh.x==Ch.x&&fh.y==Ch.y){var Eh=i.points[0];gh=xh.x==Eh.x&&xh.y==Eh.y}else gh=!1}if(gh)i.neighbors[1]=n;else{var Uh,Mh,Th=i.points[0];if(fh.x==Th.x&&fh.y==Th.y){var kh=i.points[1];Mh=xh.x==kh.x&&xh.y==kh.y}else Mh=!1;if(Mh)Uh=!0;else{var Dh=i.points[1];if(fh.x==Dh.x&&fh.y==Dh.y){var Sh=i.points[0];Uh=xh.x==Sh.x&&xh.y==Sh.y}else Uh=!1}if(!Uh)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=n}}}else{var Ah,Ph,Vh,Ih=n.points[0],Nh=n.points[2],Fh=i.points[0];if(Ih.x!=Fh.x||Ih.y!=Fh.y){var Rh=i.points[1];Vh=Ih.x==Rh.x&&Ih.y==Rh.y}else Vh=!0;if(Vh)Ph=!0;else{var Lh=i.points[2];Ph=Ih.x==Lh.x&&Ih.y==Lh.y}if(Ph){var Bh,Gh=i.points[0];if(Nh.x!=Gh.x||Nh.y!=Gh.y){var jh=i.points[1];Bh=Nh.x==jh.x&&Nh.y==jh.y}else Bh=!0;if(Bh)Ah=!0;else{var Kh=i.points[2];Ah=Nh.x==Kh.x&&Nh.y==Kh.y}}else Ah=!1;if(Ah){n.neighbors[1]=i;var Wh,Yh,Xh=n.points[0],Hh=n.points[2],Zh=i.points[2];if(Xh.x==Zh.x&&Xh.y==Zh.y){var qh=i.points[1];Yh=Hh.x==qh.x&&Hh.y==qh.y}else Yh=!1;if(Yh)Wh=!0;else{var $h=i.points[1];if(Xh.x==$h.x&&Xh.y==$h.y){var Qh=i.points[2];Wh=Hh.x==Qh.x&&Hh.y==Qh.y}else Wh=!1}if(Wh)i.neighbors[0]=n;else{var Jh,nu,eu=i.points[0];if(Xh.x==eu.x&&Xh.y==eu.y){var tu=i.points[2];nu=Hh.x==tu.x&&Hh.y==tu.y}else nu=!1;if(nu)Jh=!0;else{var iu=i.points[2];if(Xh.x==iu.x&&Xh.y==iu.y){var ru=i.points[0];Jh=Hh.x==ru.x&&Hh.y==ru.y}else Jh=!1}if(Jh)i.neighbors[1]=n;else{var lu,su,au=i.points[0];if(Xh.x==au.x&&Xh.y==au.y){var ou=i.points[1];su=Hh.x==ou.x&&Hh.y==ou.y}else su=!1;if(su)lu=!0;else{var pu=i.points[1];if(Xh.x==pu.x&&Xh.y==pu.y){var hu=i.points[0];lu=Hh.x==hu.x&&Hh.y==hu.y}else lu=!1}if(!lu)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=n}}}else{var uu,_u,cu,du=n.points[0],fu=n.points[1],xu=i.points[0];if(du.x!=xu.x||du.y!=xu.y){var bu=i.points[1];cu=du.x==bu.x&&du.y==bu.y}else cu=!0;if(cu)_u=!0;else{var yu=i.points[2];_u=du.x==yu.x&&du.y==yu.y}if(_u){var vu,mu=i.points[0];if(fu.x!=mu.x||fu.y!=mu.y){var gu=i.points[1];vu=fu.x==gu.x&&fu.y==gu.y}else vu=!0;if(vu)uu=!0;else{var zu=i.points[2];uu=fu.x==zu.x&&fu.y==zu.y}}else uu=!1;if(uu){n.neighbors[2]=i;var wu,Ou,Cu=n.points[0],Eu=n.points[1],Uu=i.points[2];if(Cu.x==Uu.x&&Cu.y==Uu.y){var Mu=i.points[1];Ou=Eu.x==Mu.x&&Eu.y==Mu.y}else Ou=!1;if(Ou)wu=!0;else{var Tu=i.points[1];if(Cu.x==Tu.x&&Cu.y==Tu.y){var ku=i.points[2];wu=Eu.x==ku.x&&Eu.y==ku.y}else wu=!1}if(wu)i.neighbors[0]=n;else{var Du,Su,Au=i.points[0];if(Cu.x==Au.x&&Cu.y==Au.y){var Pu=i.points[2];Su=Eu.x==Pu.x&&Eu.y==Pu.y}else Su=!1;if(Su)Du=!0;else{var Vu=i.points[2];if(Cu.x==Vu.x&&Cu.y==Vu.y){var Iu=i.points[0];Du=Eu.x==Iu.x&&Eu.y==Iu.y}else Du=!1}if(Du)i.neighbors[1]=n;else{var Nu,Fu,Ru=i.points[0];if(Cu.x==Ru.x&&Cu.y==Ru.y){var Lu=i.points[1];Fu=Eu.x==Lu.x&&Eu.y==Lu.y}else Fu=!1;if(Fu)Nu=!0;else{var Bu=i.points[1];if(Cu.x==Bu.x&&Cu.y==Bu.y){var Gu=i.points[0];Nu=Eu.x==Gu.x&&Eu.y==Gu.y}else Nu=!1}if(!Nu)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=n}}}}}var ju=!this.legalize(n);if(ju){var Ku=this.context;if(null==n.neighbors[0]){var Wu=Ku.front,Yu=n.points[0],Xu=n.points,Hu=-1;null==Hu&&(Hu=0);for(var Zu=Hu,qu=!1,$u=0;$u<3;){for(var Qu=$u++;Zu<0;)Zu+=3;for(;Zu>2;)Zu-=3;var Ju=n.points[Qu];if(Yu.x==Ju.x&&Yu.y==Ju.y){qu=!0;break}++Zu}if(!qu)throw haxe_Exception.thrown("Triangle::Point not in triangle");var n_=Xu[Zu],e_=n_.x,t_=Wu.search_node,i_=t_.point.x;if(e_==i_){var r_=t_.point;if(n_.x!=r_.x||n_.y!=r_.y){var l_=t_.prev.point;if(n_.x==l_.x&&n_.y==l_.y)t_=t_.prev;else{var s_=t_.next.point;if(n_.x!=s_.x||n_.y!=s_.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t_=t_.next}}}else if(e_<i_)for(;null!=(t_=t_.prev);){var a_=t_.point;if(n_.x==a_.x&&n_.y==a_.y)break}else for(;null!=(t_=t_.next);){var o_=t_.point;if(n_.x==o_.x&&n_.y==o_.y)break}null!=t_&&(Wu.search_node=t_);null!=t_&&(t_.triangle=n)}if(null==n.neighbors[1]){var p_=Ku.front,h_=n.points[1],u_=n.points,__=-1;null==__&&(__=0);for(var c_=__,d_=!1,f_=0;f_<3;){for(var x_=f_++;c_<0;)c_+=3;for(;c_>2;)c_-=3;var b_=n.points[x_];if(h_.x==b_.x&&h_.y==b_.y){d_=!0;break}++c_}if(!d_)throw haxe_Exception.thrown("Triangle::Point not in triangle");var y_=u_[c_],v_=y_.x,m_=p_.search_node,g_=m_.point.x;if(v_==g_){var z_=m_.point;if(y_.x!=z_.x||y_.y!=z_.y){var w_=m_.prev.point;if(y_.x==w_.x&&y_.y==w_.y)m_=m_.prev;else{var O_=m_.next.point;if(y_.x!=O_.x||y_.y!=O_.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");m_=m_.next}}}else if(v_<g_)for(;null!=(m_=m_.prev);){var C_=m_.point;if(y_.x==C_.x&&y_.y==C_.y)break}else for(;null!=(m_=m_.next);){var E_=m_.point;if(y_.x==E_.x&&y_.y==E_.y)break}null!=m_&&(p_.search_node=m_);null!=m_&&(m_.triangle=n)}if(null==n.neighbors[2]){var U_=Ku.front,M_=n.points[2],T_=n.points,k_=-1;null==k_&&(k_=0);for(var D_=k_,S_=!1,A_=0;A_<3;){for(var P_=A_++;D_<0;)D_+=3;for(;D_>2;)D_-=3;var V_=n.points[P_];if(M_.x==V_.x&&M_.y==V_.y){S_=!0;break}++D_}if(!S_)throw haxe_Exception.thrown("Triangle::Point not in triangle");var I_=T_[D_],N_=I_.x,F_=U_.search_node,R_=F_.point.x;if(N_==R_){var L_=F_.point;if(I_.x!=L_.x||I_.y!=L_.y){var B_=F_.prev.point;if(I_.x==B_.x&&I_.y==B_.y)F_=F_.prev;else{var G_=F_.next.point;if(I_.x!=G_.x||I_.y!=G_.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");F_=F_.next}}}else if(N_<R_)for(;null!=(F_=F_.prev);){var j_=F_.point;if(I_.x==j_.x&&I_.y==j_.y)break}else for(;null!=(F_=F_.next);){var K_=F_.point;if(I_.x==K_.x&&I_.y==K_.y)break}null!=F_&&(U_.search_node=F_);null!=F_&&(F_.triangle=n)}}if(ju=!this.legalize(i)){var W_=this.context;if(null==i.neighbors[0]){var Y_=W_.front,X_=i.points[0],H_=i.points,Z_=-1;null==Z_&&(Z_=0);for(var q_=Z_,$_=!1,Q_=0;Q_<3;){for(var J_=Q_++;q_<0;)q_+=3;for(;q_>2;)q_-=3;var nc=i.points[J_];if(X_.x==nc.x&&X_.y==nc.y){$_=!0;break}++q_}if(!$_)throw haxe_Exception.thrown("Triangle::Point not in triangle");var ec=H_[q_],tc=ec.x,ic=Y_.search_node,rc=ic.point.x;if(tc==rc){var lc=ic.point;if(ec.x!=lc.x||ec.y!=lc.y){var sc=ic.prev.point;if(ec.x==sc.x&&ec.y==sc.y)ic=ic.prev;else{var ac=ic.next.point;if(ec.x!=ac.x||ec.y!=ac.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");ic=ic.next}}}else if(tc<rc)for(;null!=(ic=ic.prev);){var oc=ic.point;if(ec.x==oc.x&&ec.y==oc.y)break}else for(;null!=(ic=ic.next);){var pc=ic.point;if(ec.x==pc.x&&ec.y==pc.y)break}null!=ic&&(Y_.search_node=ic);null!=ic&&(ic.triangle=i)}if(null==i.neighbors[1]){var hc=W_.front,uc=i.points[1],_c=i.points,cc=-1;null==cc&&(cc=0);for(var dc=cc,fc=!1,xc=0;xc<3;){for(var bc=xc++;dc<0;)dc+=3;for(;dc>2;)dc-=3;var yc=i.points[bc];if(uc.x==yc.x&&uc.y==yc.y){fc=!0;break}++dc}if(!fc)throw haxe_Exception.thrown("Triangle::Point not in triangle");var vc=_c[dc],mc=vc.x,gc=hc.search_node,zc=gc.point.x;if(mc==zc){var wc=gc.point;if(vc.x!=wc.x||vc.y!=wc.y){var Oc=gc.prev.point;if(vc.x==Oc.x&&vc.y==Oc.y)gc=gc.prev;else{var Cc=gc.next.point;if(vc.x!=Cc.x||vc.y!=Cc.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");gc=gc.next}}}else if(mc<zc)for(;null!=(gc=gc.prev);){var Ec=gc.point;if(vc.x==Ec.x&&vc.y==Ec.y)break}else for(;null!=(gc=gc.next);){var Uc=gc.point;if(vc.x==Uc.x&&vc.y==Uc.y)break}null!=gc&&(hc.search_node=gc);null!=gc&&(gc.triangle=i)}if(null==i.neighbors[2]){var Mc=W_.front,Tc=i.points[2],kc=i.points,Dc=-1;null==Dc&&(Dc=0);for(var Sc=Dc,Ac=!1,Pc=0;Pc<3;){for(var Vc=Pc++;Sc<0;)Sc+=3;for(;Sc>2;)Sc-=3;var Ic=i.points[Vc];if(Tc.x==Ic.x&&Tc.y==Ic.y){Ac=!0;break}++Sc}if(!Ac)throw haxe_Exception.thrown("Triangle::Point not in triangle");var Nc=kc[Sc],Fc=Nc.x,Rc=Mc.search_node,Lc=Rc.point.x;if(Fc==Lc){var Bc=Rc.point;if(Nc.x!=Bc.x||Nc.y!=Bc.y){var Gc=Rc.prev.point;if(Nc.x==Gc.x&&Nc.y==Gc.y)Rc=Rc.prev;else{var jc=Rc.next.point;if(Nc.x!=jc.x||Nc.y!=jc.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");Rc=Rc.next}}}else if(Fc<Lc)for(;null!=(Rc=Rc.prev);){var Kc=Rc.point;if(Nc.x==Kc.x&&Nc.y==Kc.y)break}else for(;null!=(Rc=Rc.next);){var Wc=Rc.point;if(Nc.x==Wc.x&&Nc.y==Wc.y)break}null!=Rc&&(Mc.search_node=Rc);null!=Rc&&(Rc.triangle=i)}}return n.delaunay_edge[t]=!1,i.delaunay_edge[k]=!1,!0}}}}return!1},fillBasin:function(n){var e=n.point,t=n.next.point,i=n.next.next.point,r=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x);for(this.context.basin.left_node=-1==(r>-poly2tri_Constants.EPSILON&&r<poly2tri_Constants.EPSILON?0:r>0?-1:1)?n.next.next:n.next,this.context.basin.bottom_node=this.context.basin.left_node;null!=this.context.basin.bottom_node.next&&this.context.basin.bottom_node.point.y>=this.context.basin.bottom_node.next.point.y;)this.context.basin.bottom_node=this.context.basin.bottom_node.next;if(this.context.basin.bottom_node!=this.context.basin.left_node){for(this.context.basin.right_node=this.context.basin.bottom_node;null!=this.context.basin.right_node.next&&this.context.basin.right_node.point.y<this.context.basin.right_node.next.point.y;)this.context.basin.right_node=this.context.basin.right_node.next;this.context.basin.right_node!=this.context.basin.bottom_node&&(this.context.basin.width=this.context.basin.right_node.point.x-this.context.basin.left_node.point.x,this.context.basin.left_highest=this.context.basin.left_node.point.y>this.context.basin.right_node.point.y,this.fillBasinReq(this.context.basin.bottom_node))}},fillBasinReq:function(n){var e=this.context.basin.left_highest?this.context.basin.left_node.point.y-n.point.y:this.context.basin.right_node.point.y-n.point.y;if(!(this.context.basin.width>e)){var t=poly2tri_Pool.getTriangle(n.prev.point,n.point,n.next.point),i=n.prev.triangle,r=t.points[1],l=t.points[2],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[0]=i;r=t.points[1],l=t.points[2],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}else{r=t.points[0],l=t.points[2],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[1]=i;r=t.points[0],l=t.points[2],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}else{r=t.points[0],l=t.points[1],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[2]=i;r=t.points[0],l=t.points[1],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}}}i=n.triangle,r=t.points[1],l=t.points[2],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[0]=i;r=t.points[1],l=t.points[2],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}else{r=t.points[0],l=t.points[2],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[1]=i;r=t.points[0],l=t.points[2],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}else{var a;r=t.points[0],l=t.points[1],s=i.points[0];if(r.x!=s.x||r.y!=s.y){s=i.points[1];a=r.x==s.x&&r.y==s.y}else a=!0;if(a)p=!0;else{s=i.points[2];p=r.x==s.x&&r.y==s.y}if(p){s=i.points[0];if(l.x!=s.x||l.y!=s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!0;if(p)o=!0;else{s=i.points[2];o=l.x==s.x&&l.y==s.y}}else o=!1;if(o){t.neighbors[2]=i;r=t.points[0],l=t.points[1],s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[2];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[0]=t;else{s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[2];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[2];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(o)i.neighbors[1]=t;else{var o,p;s=i.points[0];if(r.x==s.x&&r.y==s.y){s=i.points[1];p=l.x==s.x&&l.y==s.y}else p=!1;if(p)o=!0;else{s=i.points[1];if(r.x==s.x&&r.y==s.y){s=i.points[0];o=l.x==s.x&&l.y==s.y}else o=!1}if(!o)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");i.neighbors[2]=t}}}}}if(n.prev.next=n.next,n.next.prev=n.prev,!this.legalize(t)){var h=this.context;if(null==t.neighbors[0]){var u=h.front,_=t.points[0],c=t.points;null==(y=-1)&&(y=0);for(var d=y,f=!1,x=0;x<3;){for(var b=x++;d<0;)d+=3;for(;d>2;)d-=3;i=t.points[b];if(_.x==i.x&&_.y==i.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((m=(v=c[d]).x)==(z=(g=u.search_node).point.x)){i=g.point;if(v.x!=i.x||v.y!=i.y){i=g.prev.point;if(v.x==i.x&&v.y==i.y)g=g.prev;else{i=g.next.point;if(v.x!=i.x||v.y!=i.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");g=g.next}}}else if(m<z)for(;null!=(g=g.prev);){i=g.point;if(v.x==i.x&&v.y==i.y)break}else for(;null!=(g=g.next);){i=g.point;if(v.x==i.x&&v.y==i.y)break}null!=g&&(u.search_node=g),null!=(w=g)&&(w.triangle=t)}if(null==t.neighbors[1]){u=h.front,_=t.points[1],c=t.points;null==(y=-1)&&(y=0);for(d=y,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;i=t.points[b];if(_.x==i.x&&_.y==i.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((m=(v=c[d]).x)==(z=(g=u.search_node).point.x)){i=g.point;if(v.x!=i.x||v.y!=i.y){i=g.prev.point;if(v.x==i.x&&v.y==i.y)g=g.prev;else{i=g.next.point;if(v.x!=i.x||v.y!=i.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");g=g.next}}}else if(m<z)for(;null!=(g=g.prev);){i=g.point;if(v.x==i.x&&v.y==i.y)break}else for(;null!=(g=g.next);){i=g.point;if(v.x==i.x&&v.y==i.y)break}null!=g&&(u.search_node=g),null!=(w=g)&&(w.triangle=t)}if(null==t.neighbors[2]){var y,v,m,g,z,w;u=h.front,_=t.points[2],c=t.points;null==(y=-1)&&(y=0);for(d=y,f=!1,x=0;x<3;){for(b=x++;d<0;)d+=3;for(;d>2;)d-=3;i=t.points[b];if(_.x==i.x&&_.y==i.y){f=!0;break}++d}if(!f)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((m=(v=c[d]).x)==(z=(g=u.search_node).point.x)){i=g.point;if(v.x!=i.x||v.y!=i.y){i=g.prev.point;if(v.x==i.x&&v.y==i.y)g=g.prev;else{i=g.next.point;if(v.x!=i.x||v.y!=i.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");g=g.next}}}else if(m<z)for(;null!=(g=g.prev);){i=g.point;if(v.x==i.x&&v.y==i.y)break}else for(;null!=(g=g.next);){i=g.point;if(v.x==i.x&&v.y==i.y)break}null!=g&&(u.search_node=g),null!=(w=g)&&(w.triangle=t)}}if(n.prev!=this.context.basin.left_node||n.next!=this.context.basin.right_node)if(n.prev==this.context.basin.left_node){var O=n.point,C=n.next.point,E=n.next.next.point;if(1==((U=(O.x-E.x)*(C.y-E.y)-(O.y-E.y)*(C.x-E.x))>-poly2tri_Constants.EPSILON&&U<poly2tri_Constants.EPSILON?0:U>0?-1:1))return;n=n.next,this.fillBasinReq(n)}else if(n.next==this.context.basin.right_node){var U;O=n.point,C=n.prev.point,E=n.prev.prev.point;if(-1==((U=(O.x-E.x)*(C.y-E.y)-(O.y-E.y)*(C.x-E.x))>-poly2tri_Constants.EPSILON&&U<poly2tri_Constants.EPSILON?0:U>0?-1:1))return;n=n.prev,this.fillBasinReq(n)}else n=n.prev.point.y<n.next.point.y?n.prev:n.next,this.fillBasinReq(n)}},isShallow:function(n){var e=this.context.basin.left_highest?this.context.basin.left_node.point.y-n.point.y:this.context.basin.right_node.point.y-n.point.y;return this.context.basin.width>e},fillEdgeEvent:function(n,e){this.context.edge_event.right?this.fillRightAboveEdgeEvent(n,e):this.fillLeftAboveEdgeEvent(n,e)},fillRightAboveEdgeEvent:function(n,e){for(;e.next.point.x<n.p.x;){var t=n.q,i=e.next.point,r=n.p,l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x);-1==(l>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1)?this.fillRightBelowEdgeEvent(n,e):e=e.next}},fillRightBelowEdgeEvent:function(n,e){if(!(e.point.x>=n.p.x)){var t=e.point,i=e.next.point,r=e.next.next.point,l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x);-1==(l>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1)?this.fillRightConcaveEdgeEvent(n,e):(this.fillRightConvexEdgeEvent(n,e),this.fillRightBelowEdgeEvent(n,e))}},fillRightConcaveEdgeEvent:function(n,e){var t=e.next,i=poly2tri_Pool.getTriangle(t.prev.point,t.point,t.next.point),r=t.prev.triangle,l=i.points[1],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[0]=r;l=i.points[1],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{l=i.points[0],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[1]=r;l=i.points[0],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{l=i.points[0],s=i.points[1],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[2]=r;l=i.points[0],s=i.points[1],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}}}r=t.triangle,l=i.points[1],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[0]=r;l=i.points[1],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{l=i.points[0],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[1]=r;l=i.points[0],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{var o;l=i.points[0],s=i.points[1],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[2]=r;l=i.points[0],s=i.points[1],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{var p,h;a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}}}if(t.prev.next=t.next,t.next.prev=t.prev,!this.legalize(i)){var u=this.context;if(null==i.neighbors[0]){var _=u.front,c=i.points[0],d=i.points;null==(v=-1)&&(v=0);for(var f=v,x=!1,b=0;b<3;){for(var y=b++;f<0;)f+=3;for(;f>2;)f-=3;r=i.points[y];if(c.x==r.x&&c.y==r.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((g=(m=d[f]).x)==(z=(t=_.search_node).point.x)){r=t.point;if(m.x!=r.x||m.y!=r.y){r=t.prev.point;if(m.x==r.x&&m.y==r.y)t=t.prev;else{r=t.next.point;if(m.x!=r.x||m.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(g<z)for(;null!=(t=t.prev);){r=t.point;if(m.x==r.x&&m.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(m.x==r.x&&m.y==r.y)break}null!=t&&(_.search_node=t),null!=(w=t)&&(w.triangle=i)}if(null==i.neighbors[1]){_=u.front,c=i.points[1],d=i.points;null==(v=-1)&&(v=0);for(f=v,x=!1,b=0;b<3;){for(y=b++;f<0;)f+=3;for(;f>2;)f-=3;r=i.points[y];if(c.x==r.x&&c.y==r.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((g=(m=d[f]).x)==(z=(t=_.search_node).point.x)){r=t.point;if(m.x!=r.x||m.y!=r.y){r=t.prev.point;if(m.x==r.x&&m.y==r.y)t=t.prev;else{r=t.next.point;if(m.x!=r.x||m.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(g<z)for(;null!=(t=t.prev);){r=t.point;if(m.x==r.x&&m.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(m.x==r.x&&m.y==r.y)break}null!=t&&(_.search_node=t),null!=(w=t)&&(w.triangle=i)}if(null==i.neighbors[2]){var v,m,g,z,w;_=u.front,c=i.points[2],d=i.points;null==(v=-1)&&(v=0);for(f=v,x=!1,b=0;b<3;){for(y=b++;f<0;)f+=3;for(;f>2;)f-=3;r=i.points[y];if(c.x==r.x&&c.y==r.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((g=(m=d[f]).x)==(z=(t=_.search_node).point.x)){r=t.point;if(m.x!=r.x||m.y!=r.y){r=t.prev.point;if(m.x==r.x&&m.y==r.y)t=t.prev;else{r=t.next.point;if(m.x!=r.x||m.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(g<z)for(;null!=(t=t.prev);){r=t.point;if(m.x==r.x&&m.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(m.x==r.x&&m.y==r.y)break}null!=t&&(_.search_node=t),null!=(w=t)&&(w.triangle=i)}}if(e.next.point!=n.p){var O=n.q,C=e.next.point,E=n.p;if(-1==((U=(O.x-E.x)*(C.y-E.y)-(O.y-E.y)*(C.x-E.x))>-poly2tri_Constants.EPSILON&&U<poly2tri_Constants.EPSILON?0:U>0?-1:1)){var U;O=e.point,C=e.next.point,E=e.next.next.point;-1==((U=(O.x-E.x)*(C.y-E.y)-(O.y-E.y)*(C.x-E.x))>-poly2tri_Constants.EPSILON&&U<poly2tri_Constants.EPSILON?0:U>0?-1:1)&&this.fillRightConcaveEdgeEvent(n,e)}}},fillRightConvexEdgeEvent:function(n,e){var t=e.next.point,i=e.next.next.point,r=e.next.next.next.point;if(-1==((l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x))>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1))this.fillRightConcaveEdgeEvent(n,e.next);else{var l;t=n.q,i=e.next.next.point,r=n.p;-1==((l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x))>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1)&&this.fillRightConvexEdgeEvent(n,e.next)}},fillLeftAboveEdgeEvent:function(n,e){for(;e.prev.point.x>n.p.x;){var t=n.q,i=e.prev.point,r=n.p,l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x);1==(l>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1)?this.fillLeftBelowEdgeEvent(n,e):e=e.prev}},fillLeftBelowEdgeEvent:function(n,e){if(e.point.x>n.p.x){var t=e.point,i=e.prev.point,r=e.prev.prev.point,l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x);1==(l>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1)?this.fillLeftConcaveEdgeEvent(n,e):(this.fillLeftConvexEdgeEvent(n,e),this.fillLeftBelowEdgeEvent(n,e))}},fillLeftConvexEdgeEvent:function(n,e){var t=e.prev.point,i=e.prev.prev.point,r=e.prev.prev.prev.point;if(1==((l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x))>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1))this.fillLeftConcaveEdgeEvent(n,e.prev);else{var l;t=n.q,i=e.prev.prev.point,r=n.p;1==((l=(t.x-r.x)*(i.y-r.y)-(t.y-r.y)*(i.x-r.x))>-poly2tri_Constants.EPSILON&&l<poly2tri_Constants.EPSILON?0:l>0?-1:1)&&this.fillLeftConvexEdgeEvent(n,e.prev)}},fillLeftConcaveEdgeEvent:function(n,e){var t=e.prev,i=poly2tri_Pool.getTriangle(t.prev.point,t.point,t.next.point),r=t.prev.triangle,l=i.points[1],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[0]=r;l=i.points[1],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{l=i.points[0],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[1]=r;l=i.points[0],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{l=i.points[0],s=i.points[1],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[2]=r;l=i.points[0],s=i.points[1],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}}}r=t.triangle,l=i.points[1],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[0]=r;l=i.points[1],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{l=i.points[0],s=i.points[2],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[1]=r;l=i.points[0],s=i.points[2],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}else{var o;l=i.points[0],s=i.points[1],a=r.points[0];if(l.x!=a.x||l.y!=a.y){a=r.points[1];o=l.x==a.x&&l.y==a.y}else o=!0;if(o)h=!0;else{a=r.points[2];h=l.x==a.x&&l.y==a.y}if(h){a=r.points[0];if(s.x!=a.x||s.y!=a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!0;if(h)p=!0;else{a=r.points[2];p=s.x==a.x&&s.y==a.y}}else p=!1;if(p){i.neighbors[2]=r;l=i.points[0],s=i.points[1],a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[2];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[0]=i;else{a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[2];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[2];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(p)r.neighbors[1]=i;else{var p,h;a=r.points[0];if(l.x==a.x&&l.y==a.y){a=r.points[1];h=s.x==a.x&&s.y==a.y}else h=!1;if(h)p=!0;else{a=r.points[1];if(l.x==a.x&&l.y==a.y){a=r.points[0];p=s.x==a.x&&s.y==a.y}else p=!1}if(!p)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");r.neighbors[2]=i}}}}}if(t.prev.next=t.next,t.next.prev=t.prev,!this.legalize(i)){var u=this.context;if(null==i.neighbors[0]){var _=u.front,c=i.points[0],d=i.points;null==(v=-1)&&(v=0);for(var f=v,x=!1,b=0;b<3;){for(var y=b++;f<0;)f+=3;for(;f>2;)f-=3;r=i.points[y];if(c.x==r.x&&c.y==r.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((g=(m=d[f]).x)==(z=(t=_.search_node).point.x)){r=t.point;if(m.x!=r.x||m.y!=r.y){r=t.prev.point;if(m.x==r.x&&m.y==r.y)t=t.prev;else{r=t.next.point;if(m.x!=r.x||m.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(g<z)for(;null!=(t=t.prev);){r=t.point;if(m.x==r.x&&m.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(m.x==r.x&&m.y==r.y)break}null!=t&&(_.search_node=t),null!=(w=t)&&(w.triangle=i)}if(null==i.neighbors[1]){_=u.front,c=i.points[1],d=i.points;null==(v=-1)&&(v=0);for(f=v,x=!1,b=0;b<3;){for(y=b++;f<0;)f+=3;for(;f>2;)f-=3;r=i.points[y];if(c.x==r.x&&c.y==r.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((g=(m=d[f]).x)==(z=(t=_.search_node).point.x)){r=t.point;if(m.x!=r.x||m.y!=r.y){r=t.prev.point;if(m.x==r.x&&m.y==r.y)t=t.prev;else{r=t.next.point;if(m.x!=r.x||m.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(g<z)for(;null!=(t=t.prev);){r=t.point;if(m.x==r.x&&m.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(m.x==r.x&&m.y==r.y)break}null!=t&&(_.search_node=t),null!=(w=t)&&(w.triangle=i)}if(null==i.neighbors[2]){var v,m,g,z,w;_=u.front,c=i.points[2],d=i.points;null==(v=-1)&&(v=0);for(f=v,x=!1,b=0;b<3;){for(y=b++;f<0;)f+=3;for(;f>2;)f-=3;r=i.points[y];if(c.x==r.x&&c.y==r.y){x=!0;break}++f}if(!x)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((g=(m=d[f]).x)==(z=(t=_.search_node).point.x)){r=t.point;if(m.x!=r.x||m.y!=r.y){r=t.prev.point;if(m.x==r.x&&m.y==r.y)t=t.prev;else{r=t.next.point;if(m.x!=r.x||m.y!=r.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");t=t.next}}}else if(g<z)for(;null!=(t=t.prev);){r=t.point;if(m.x==r.x&&m.y==r.y)break}else for(;null!=(t=t.next);){r=t.point;if(m.x==r.x&&m.y==r.y)break}null!=t&&(_.search_node=t),null!=(w=t)&&(w.triangle=i)}}if(e.prev.point!=n.p){var O=n.q,C=e.prev.point,E=n.p;if(1==((U=(O.x-E.x)*(C.y-E.y)-(O.y-E.y)*(C.x-E.x))>-poly2tri_Constants.EPSILON&&U<poly2tri_Constants.EPSILON?0:U>0?-1:1)){var U;O=e.point,C=e.prev.point,E=e.prev.prev.point;1==((U=(O.x-E.x)*(C.y-E.y)-(O.y-E.y)*(C.x-E.x))>-poly2tri_Constants.EPSILON&&U<poly2tri_Constants.EPSILON?0:U>0?-1:1)&&this.fillLeftConcaveEdgeEvent(n,e)}}},flipEdgeEvent:function(n,e,t,i){var r=t.neighbors;null==(nn=0)&&(nn=0);for(var l=nn,s=!1,a=0;a<3;){for(var o=a++;l<0;)l+=3;for(;l>2;)l-=3;var p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var h=r[l];if(null==h)throw haxe_Exception.thrown("Sweep::[BUG:FIXME] FLIP failed due to missing triangle!");r=t.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var u=r[l],_=h.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var c=_[l];r=t.points;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var d=r[l];r=t.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var f=r[l],x=c.x,b=c.y,y=i.x-x,v=i.y-b,m=d.x-x,g=!1;y*(d.y-b)-m*v>poly2tri_Constants.EPSILON&&(g=(f.x-x)*v-y*(f.y-b)>poly2tri_Constants.EPSILON);if(g){r=t.neighbors;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var z=r[l];r=t.neighbors;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var w=r[l];_=h.neighbors;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var O=_[l];_=h.neighbors;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var C=_[l];r=t.constrained_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var E=r[l];r=t.constrained_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var U=r[l];_=h.constrained_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var M=_[l];_=h.constrained_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var T=_[l];r=t.delaunay_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var k=r[l];r=t.delaunay_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var D=r[l];_=h.delaunay_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var S=_[l];_=h.delaunay_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var A=_[l];t.legalize(i,c),h.legalize(c,i);_=h.delaunay_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");_[l]=k;r=t.delaunay_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=D;r=t.delaunay_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=S;_=h.delaunay_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");_[l]=A;_=h.constrained_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");_[l]=E;r=t.constrained_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=U;r=t.constrained_edge;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=M;_=h.constrained_edge;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(c.x==p.x&&c.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if(_[l]=T,t.neighbors[0]=null,t.neighbors[1]=null,t.neighbors[2]=null,h.neighbors[0]=null,h.neighbors[1]=null,h.neighbors[2]=null,null!=z){u=h.points[1];var P=h.points[2];p=z.points[0];if(u.x!=p.x||u.y!=p.y){p=z.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=z.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=z.points[0];if(P.x!=p.x||P.y!=p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=z.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){h.neighbors[0]=z;u=h.points[1],P=h.points[2],p=z.points[2];if(u.x==p.x&&u.y==p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[1];if(u.x==p.x&&u.y==p.y){p=z.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)z.neighbors[0]=h;else{p=z.points[0];if(u.x==p.x&&u.y==p.y){p=z.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[2];if(u.x==p.x&&u.y==p.y){p=z.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)z.neighbors[1]=h;else{p=z.points[0];if(u.x==p.x&&u.y==p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[1];if(u.x==p.x&&u.y==p.y){p=z.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");z.neighbors[2]=h}}}else{u=h.points[0],P=h.points[2],p=z.points[0];if(u.x!=p.x||u.y!=p.y){p=z.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=z.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=z.points[0];if(P.x!=p.x||P.y!=p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=z.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){h.neighbors[1]=z;u=h.points[0],P=h.points[2],p=z.points[2];if(u.x==p.x&&u.y==p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[1];if(u.x==p.x&&u.y==p.y){p=z.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)z.neighbors[0]=h;else{p=z.points[0];if(u.x==p.x&&u.y==p.y){p=z.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[2];if(u.x==p.x&&u.y==p.y){p=z.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)z.neighbors[1]=h;else{p=z.points[0];if(u.x==p.x&&u.y==p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[1];if(u.x==p.x&&u.y==p.y){p=z.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");z.neighbors[2]=h}}}else{u=h.points[0],P=h.points[1],p=z.points[0];if(u.x!=p.x||u.y!=p.y){p=z.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=z.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=z.points[0];if(P.x!=p.x||P.y!=p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=z.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){h.neighbors[2]=z;u=h.points[0],P=h.points[1],p=z.points[2];if(u.x==p.x&&u.y==p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[1];if(u.x==p.x&&u.y==p.y){p=z.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)z.neighbors[0]=h;else{p=z.points[0];if(u.x==p.x&&u.y==p.y){p=z.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[2];if(u.x==p.x&&u.y==p.y){p=z.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)z.neighbors[1]=h;else{p=z.points[0];if(u.x==p.x&&u.y==p.y){p=z.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=z.points[1];if(u.x==p.x&&u.y==p.y){p=z.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");z.neighbors[2]=h}}}}}}if(null!=w){u=t.points[1],P=t.points[2],p=w.points[0];if(u.x!=p.x||u.y!=p.y){p=w.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=w.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=w.points[0];if(P.x!=p.x||P.y!=p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=w.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[0]=w;u=t.points[1],P=t.points[2],p=w.points[2];if(u.x==p.x&&u.y==p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[1];if(u.x==p.x&&u.y==p.y){p=w.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)w.neighbors[0]=t;else{p=w.points[0];if(u.x==p.x&&u.y==p.y){p=w.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[2];if(u.x==p.x&&u.y==p.y){p=w.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)w.neighbors[1]=t;else{p=w.points[0];if(u.x==p.x&&u.y==p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[1];if(u.x==p.x&&u.y==p.y){p=w.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");w.neighbors[2]=t}}}else{u=t.points[0],P=t.points[2],p=w.points[0];if(u.x!=p.x||u.y!=p.y){p=w.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=w.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=w.points[0];if(P.x!=p.x||P.y!=p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=w.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[1]=w;u=t.points[0],P=t.points[2],p=w.points[2];if(u.x==p.x&&u.y==p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[1];if(u.x==p.x&&u.y==p.y){p=w.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)w.neighbors[0]=t;else{p=w.points[0];if(u.x==p.x&&u.y==p.y){p=w.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[2];if(u.x==p.x&&u.y==p.y){p=w.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)w.neighbors[1]=t;else{p=w.points[0];if(u.x==p.x&&u.y==p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[1];if(u.x==p.x&&u.y==p.y){p=w.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");w.neighbors[2]=t}}}else{u=t.points[0],P=t.points[1],p=w.points[0];if(u.x!=p.x||u.y!=p.y){p=w.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=w.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=w.points[0];if(P.x!=p.x||P.y!=p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=w.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[2]=w;u=t.points[0],P=t.points[1],p=w.points[2];if(u.x==p.x&&u.y==p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[1];if(u.x==p.x&&u.y==p.y){p=w.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)w.neighbors[0]=t;else{p=w.points[0];if(u.x==p.x&&u.y==p.y){p=w.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[2];if(u.x==p.x&&u.y==p.y){p=w.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)w.neighbors[1]=t;else{p=w.points[0];if(u.x==p.x&&u.y==p.y){p=w.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=w.points[1];if(u.x==p.x&&u.y==p.y){p=w.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");w.neighbors[2]=t}}}}}}if(null!=O){u=t.points[1],P=t.points[2],p=O.points[0];if(u.x!=p.x||u.y!=p.y){p=O.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=O.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=O.points[0];if(P.x!=p.x||P.y!=p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=O.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[0]=O;u=t.points[1],P=t.points[2],p=O.points[2];if(u.x==p.x&&u.y==p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[1];if(u.x==p.x&&u.y==p.y){p=O.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)O.neighbors[0]=t;else{p=O.points[0];if(u.x==p.x&&u.y==p.y){p=O.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[2];if(u.x==p.x&&u.y==p.y){p=O.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)O.neighbors[1]=t;else{p=O.points[0];if(u.x==p.x&&u.y==p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[1];if(u.x==p.x&&u.y==p.y){p=O.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");O.neighbors[2]=t}}}else{u=t.points[0],P=t.points[2],p=O.points[0];if(u.x!=p.x||u.y!=p.y){p=O.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=O.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=O.points[0];if(P.x!=p.x||P.y!=p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=O.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[1]=O;u=t.points[0],P=t.points[2],p=O.points[2];if(u.x==p.x&&u.y==p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[1];if(u.x==p.x&&u.y==p.y){p=O.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)O.neighbors[0]=t;else{p=O.points[0];if(u.x==p.x&&u.y==p.y){p=O.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[2];if(u.x==p.x&&u.y==p.y){p=O.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)O.neighbors[1]=t;else{p=O.points[0];if(u.x==p.x&&u.y==p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[1];if(u.x==p.x&&u.y==p.y){p=O.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");O.neighbors[2]=t}}}else{u=t.points[0],P=t.points[1],p=O.points[0];if(u.x!=p.x||u.y!=p.y){p=O.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=O.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=O.points[0];if(P.x!=p.x||P.y!=p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=O.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[2]=O;u=t.points[0],P=t.points[1],p=O.points[2];if(u.x==p.x&&u.y==p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[1];if(u.x==p.x&&u.y==p.y){p=O.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)O.neighbors[0]=t;else{p=O.points[0];if(u.x==p.x&&u.y==p.y){p=O.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[2];if(u.x==p.x&&u.y==p.y){p=O.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)O.neighbors[1]=t;else{p=O.points[0];if(u.x==p.x&&u.y==p.y){p=O.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=O.points[1];if(u.x==p.x&&u.y==p.y){p=O.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");O.neighbors[2]=t}}}}}}if(null!=C){u=h.points[1],P=h.points[2],p=C.points[0];if(u.x!=p.x||u.y!=p.y){p=C.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=C.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=C.points[0];if(P.x!=p.x||P.y!=p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=C.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){h.neighbors[0]=C;u=h.points[1],P=h.points[2],p=C.points[2];if(u.x==p.x&&u.y==p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[1];if(u.x==p.x&&u.y==p.y){p=C.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)C.neighbors[0]=h;else{p=C.points[0];if(u.x==p.x&&u.y==p.y){p=C.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[2];if(u.x==p.x&&u.y==p.y){p=C.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)C.neighbors[1]=h;else{p=C.points[0];if(u.x==p.x&&u.y==p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[1];if(u.x==p.x&&u.y==p.y){p=C.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");C.neighbors[2]=h}}}else{u=h.points[0],P=h.points[2],p=C.points[0];if(u.x!=p.x||u.y!=p.y){p=C.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=C.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=C.points[0];if(P.x!=p.x||P.y!=p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=C.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){h.neighbors[1]=C;u=h.points[0],P=h.points[2],p=C.points[2];if(u.x==p.x&&u.y==p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[1];if(u.x==p.x&&u.y==p.y){p=C.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)C.neighbors[0]=h;else{p=C.points[0];if(u.x==p.x&&u.y==p.y){p=C.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[2];if(u.x==p.x&&u.y==p.y){p=C.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)C.neighbors[1]=h;else{p=C.points[0];if(u.x==p.x&&u.y==p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[1];if(u.x==p.x&&u.y==p.y){p=C.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");C.neighbors[2]=h}}}else{u=h.points[0],P=h.points[1],p=C.points[0];if(u.x!=p.x||u.y!=p.y){p=C.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=C.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=C.points[0];if(P.x!=p.x||P.y!=p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=C.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){h.neighbors[2]=C;u=h.points[0],P=h.points[1],p=C.points[2];if(u.x==p.x&&u.y==p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[1];if(u.x==p.x&&u.y==p.y){p=C.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)C.neighbors[0]=h;else{p=C.points[0];if(u.x==p.x&&u.y==p.y){p=C.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[2];if(u.x==p.x&&u.y==p.y){p=C.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)C.neighbors[1]=h;else{p=C.points[0];if(u.x==p.x&&u.y==p.y){p=C.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=C.points[1];if(u.x==p.x&&u.y==p.y){p=C.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");C.neighbors[2]=h}}}}}}u=t.points[1],P=t.points[2],p=h.points[0];if(u.x!=p.x||u.y!=p.y){p=h.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=h.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=h.points[0];if(P.x!=p.x||P.y!=p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=h.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[0]=h;u=t.points[1],P=t.points[2],p=h.points[2];if(u.x==p.x&&u.y==p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(u.x==p.x&&u.y==p.y){p=h.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)h.neighbors[0]=t;else{p=h.points[0];if(u.x==p.x&&u.y==p.y){p=h.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[2];if(u.x==p.x&&u.y==p.y){p=h.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)h.neighbors[1]=t;else{p=h.points[0];if(u.x==p.x&&u.y==p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(u.x==p.x&&u.y==p.y){p=h.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");h.neighbors[2]=t}}}else{u=t.points[0],P=t.points[2],p=h.points[0];if(u.x!=p.x||u.y!=p.y){p=h.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=h.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=h.points[0];if(P.x!=p.x||P.y!=p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=h.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[1]=h;u=t.points[0],P=t.points[2],p=h.points[2];if(u.x==p.x&&u.y==p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(u.x==p.x&&u.y==p.y){p=h.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)h.neighbors[0]=t;else{p=h.points[0];if(u.x==p.x&&u.y==p.y){p=h.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[2];if(u.x==p.x&&u.y==p.y){p=h.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)h.neighbors[1]=t;else{p=h.points[0];if(u.x==p.x&&u.y==p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(u.x==p.x&&u.y==p.y){p=h.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");h.neighbors[2]=t}}}else{var V;u=t.points[0],P=t.points[1],p=h.points[0];if(u.x!=p.x||u.y!=p.y){p=h.points[1];V=u.x==p.x&&u.y==p.y}else V=!0;if(V)Z=!0;else{p=h.points[2];Z=u.x==p.x&&u.y==p.y}if(Z){p=h.points[0];if(P.x!=p.x||P.y!=p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!0;if(Z)H=!0;else{p=h.points[2];H=P.x==p.x&&P.y==p.y}}else H=!1;if(H){t.neighbors[2]=h;u=t.points[0],P=t.points[1],p=h.points[2];if(u.x==p.x&&u.y==p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(u.x==p.x&&u.y==p.y){p=h.points[2];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)h.neighbors[0]=t;else{p=h.points[0];if(u.x==p.x&&u.y==p.y){p=h.points[2];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[2];if(u.x==p.x&&u.y==p.y){p=h.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(H)h.neighbors[1]=t;else{p=h.points[0];if(u.x==p.x&&u.y==p.y){p=h.points[1];Z=P.x==p.x&&P.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(u.x==p.x&&u.y==p.y){p=h.points[0];H=P.x==p.x&&P.y==p.y}else H=!1}if(!H)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");h.neighbors[2]=t}}}}}var I=this.context;if(null==t.neighbors[0]){var N=I.front;u=t.points[0],r=t.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((R=(F=r[l]).x)==(B=(L=N.search_node).point.x)){p=L.point;if(F.x!=p.x||F.y!=p.y){p=L.prev.point;if(F.x==p.x&&F.y==p.y)L=L.prev;else{p=L.next.point;if(F.x!=p.x||F.y!=p.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");L=L.next}}}else if(R<B)for(;null!=(L=L.prev);){p=L.point;if(F.x==p.x&&F.y==p.y)break}else for(;null!=(L=L.next);){p=L.point;if(F.x==p.x&&F.y==p.y)break}null!=L&&(N.search_node=L),null!=(G=L)&&(G.triangle=t)}if(null==t.neighbors[1]){N=I.front,u=t.points[1],r=t.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((R=(F=r[l]).x)==(B=(L=N.search_node).point.x)){p=L.point;if(F.x!=p.x||F.y!=p.y){p=L.prev.point;if(F.x==p.x&&F.y==p.y)L=L.prev;else{p=L.next.point;if(F.x!=p.x||F.y!=p.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");L=L.next}}}else if(R<B)for(;null!=(L=L.prev);){p=L.point;if(F.x==p.x&&F.y==p.y)break}else for(;null!=(L=L.next);){p=L.point;if(F.x==p.x&&F.y==p.y)break}null!=L&&(N.search_node=L),null!=(G=L)&&(G.triangle=t)}if(null==t.neighbors[2]){N=I.front,u=t.points[2],r=t.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((R=(F=r[l]).x)==(B=(L=N.search_node).point.x)){p=L.point;if(F.x!=p.x||F.y!=p.y){p=L.prev.point;if(F.x==p.x&&F.y==p.y)L=L.prev;else{p=L.next.point;if(F.x!=p.x||F.y!=p.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");L=L.next}}}else if(R<B)for(;null!=(L=L.prev);){p=L.point;if(F.x==p.x&&F.y==p.y)break}else for(;null!=(L=L.next);){p=L.point;if(F.x==p.x&&F.y==p.y)break}null!=L&&(N.search_node=L),null!=(G=L)&&(G.triangle=t)}I=this.context;if(null==h.neighbors[0]){N=I.front,u=h.points[0],_=h.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((R=(F=_[l]).x)==(B=(L=N.search_node).point.x)){p=L.point;if(F.x!=p.x||F.y!=p.y){p=L.prev.point;if(F.x==p.x&&F.y==p.y)L=L.prev;else{p=L.next.point;if(F.x!=p.x||F.y!=p.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");L=L.next}}}else if(R<B)for(;null!=(L=L.prev);){p=L.point;if(F.x==p.x&&F.y==p.y)break}else for(;null!=(L=L.next);){p=L.point;if(F.x==p.x&&F.y==p.y)break}null!=L&&(N.search_node=L),null!=(G=L)&&(G.triangle=h)}if(null==h.neighbors[1]){N=I.front,u=h.points[1],_=h.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((R=(F=_[l]).x)==(B=(L=N.search_node).point.x)){p=L.point;if(F.x!=p.x||F.y!=p.y){p=L.prev.point;if(F.x==p.x&&F.y==p.y)L=L.prev;else{p=L.next.point;if(F.x!=p.x||F.y!=p.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");L=L.next}}}else if(R<B)for(;null!=(L=L.prev);){p=L.point;if(F.x==p.x&&F.y==p.y)break}else for(;null!=(L=L.next);){p=L.point;if(F.x==p.x&&F.y==p.y)break}null!=L&&(N.search_node=L),null!=(G=L)&&(G.triangle=h)}if(null==h.neighbors[2]){var F,R,L,B,G;N=I.front,u=h.points[2],_=h.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=h.points[o];if(u.x==p.x&&u.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((R=(F=_[l]).x)==(B=(L=N.search_node).point.x)){p=L.point;if(F.x!=p.x||F.y!=p.y){p=L.prev.point;if(F.x==p.x&&F.y==p.y)L=L.prev;else{p=L.next.point;if(F.x!=p.x||F.y!=p.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");L=L.next}}}else if(R<B)for(;null!=(L=L.prev);){p=L.point;if(F.x==p.x&&F.y==p.y)break}else for(;null!=(L=L.next);){p=L.point;if(F.x==p.x&&F.y==p.y)break}null!=L&&(N.search_node=L),null!=(G=L)&&(G.triangle=h)}if(i==e&&c==n){if(e==this.context.edge_event.constrained_edge.q&&n==this.context.edge_event.constrained_edge.p){p=t.points[0];if(e.x==p.x&&e.y==p.y){p=t.points[1];Z=n.x==p.x&&n.y==p.y}else Z=!1;if(Z)H=!0;else{p=t.points[1];if(e.x==p.x&&e.y==p.y){p=t.points[0];H=n.x==p.x&&n.y==p.y}else H=!1}if(H)t.constrained_edge[2]=!0;else{p=t.points[0];if(e.x==p.x&&e.y==p.y){p=t.points[2];Z=n.x==p.x&&n.y==p.y}else Z=!1;if(Z)H=!0;else{p=t.points[2];if(e.x==p.x&&e.y==p.y){p=t.points[0];H=n.x==p.x&&n.y==p.y}else H=!1}if(H)t.constrained_edge[1]=!0;else{p=t.points[1];if(e.x==p.x&&e.y==p.y){p=t.points[2];Z=n.x==p.x&&n.y==p.y}else Z=!1;if(Z)H=!0;else{p=t.points[2];if(e.x==p.x&&e.y==p.y){p=t.points[1];H=n.x==p.x&&n.y==p.y}else H=!1}H&&(t.constrained_edge[0]=!0)}}p=h.points[0];if(e.x==p.x&&e.y==p.y){p=h.points[1];Z=n.x==p.x&&n.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[1];if(e.x==p.x&&e.y==p.y){p=h.points[0];H=n.x==p.x&&n.y==p.y}else H=!1}if(H)h.constrained_edge[2]=!0;else{p=h.points[0];if(e.x==p.x&&e.y==p.y){p=h.points[2];Z=n.x==p.x&&n.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[2];if(e.x==p.x&&e.y==p.y){p=h.points[0];H=n.x==p.x&&n.y==p.y}else H=!1}if(H)h.constrained_edge[1]=!0;else{p=h.points[1];if(e.x==p.x&&e.y==p.y){p=h.points[2];Z=n.x==p.x&&n.y==p.y}else Z=!1;if(Z)H=!0;else{p=h.points[2];if(e.x==p.x&&e.y==p.y){p=h.points[1];H=n.x==p.x&&n.y==p.y}else H=!1}H&&(h.constrained_edge[0]=!0)}}this.legalize(t),this.legalize(h)}}else{var j=(Q=(e.x-n.x)*(c.y-n.y)-(e.y-n.y)*(c.x-n.x))>-poly2tri_Constants.EPSILON&&Q<poly2tri_Constants.EPSILON?0:Q>0?-1:1;t=this.nextFlipTriangle(j,t,h,i,c),this.flipEdgeEvent(n,e,t,i)}}else{var K=poly2tri_Sweep.nextFlipPoint(n,e,h,c);this.flipScanEdgeEvent(n,e,t,h,K);var W=t;g=-1,p=W.points[0];if(n.x==p.x&&n.y==p.y){p=W.points[1];if(e.x==p.x&&e.y==p.y)g=2;else{p=W.points[2];e.x==p.x&&e.y==p.y&&(g=1)}}else{p=W.points[1];if(n.x==p.x&&n.y==p.y){p=W.points[2];if(e.x==p.x&&e.y==p.y)g=0;else{p=W.points[0];e.x==p.x&&e.y==p.y&&(g=2)}}else{p=W.points[2];if(n.x==p.x&&n.y==p.y){p=W.points[0];if(e.x==p.x&&e.y==p.y)g=1;else{p=W.points[1];e.x==p.x&&e.y==p.y&&(g=0)}}}}var Y=g;g=!1;if(-1!=Y){if(W.constrained_edge[Y]=!0,null!=(p=W.neighbors[Y])){var X=p.points[0];if(e.x==X.x&&e.y==X.y){X=p.points[1];Z=n.x==X.x&&n.y==X.y}else Z=!1;if(Z)H=!0;else{X=p.points[1];if(e.x==X.x&&e.y==X.y){X=p.points[0];H=n.x==X.x&&n.y==X.y}else H=!1}if(H)p.constrained_edge[2]=!0;else{X=p.points[0];if(e.x==X.x&&e.y==X.y){X=p.points[2];Z=n.x==X.x&&n.y==X.y}else Z=!1;if(Z)H=!0;else{X=p.points[2];if(e.x==X.x&&e.y==X.y){X=p.points[0];H=n.x==X.x&&n.y==X.y}else H=!1}if(H)p.constrained_edge[1]=!0;else{var H,Z;X=p.points[1];if(e.x==X.x&&e.y==X.y){X=p.points[2];Z=n.x==X.x&&n.y==X.y}else Z=!1;if(Z)H=!0;else{X=p.points[2];if(e.x==X.x&&e.y==X.y){X=p.points[1];H=n.x==X.x&&n.y==X.y}else H=!1}H&&(p.constrained_edge[0]=!0)}}}g=!0}if(!g){var q=W.points;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=W.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown(haxe_Exception.thrown("Triangle::Point not in triangle"));u=q[l];var $=(Q=(e.x-n.x)*(u.y-n.y)-(e.y-n.y)*(u.x-n.x))>-poly2tri_Constants.EPSILON&&Q<poly2tri_Constants.EPSILON?0:Q>0?-1:1;if(0==$)throw haxe_Exception.thrown(haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!"));q=W.points;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=W.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown(haxe_Exception.thrown("Triangle::Point not in triangle"));P=q[l];var Q,J=(Q=(e.x-n.x)*(P.y-n.y)-(e.y-n.y)*(P.x-n.x))>-poly2tri_Constants.EPSILON&&Q<poly2tri_Constants.EPSILON?0:Q>0?-1:1;if(0==J)throw haxe_Exception.thrown(haxe_Exception.thrown("Sweep.edgeEvent: Collinear not supported!"));if($==J){if(1==$){q=W.neighbors;null==(nn=-1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=W.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown(haxe_Exception.thrown("Triangle::Point not in triangle"));W=q[l]}else{var nn;q=W.neighbors;null==(nn=1)&&(nn=0);for(l=nn,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=W.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown(haxe_Exception.thrown("Triangle::Point not in triangle"));W=q[l]}this.edgeEventByPoints(n,e,W,i)}else this.flipEdgeEvent(n,e,W,i)}}},nextFlipTriangle:function(n,e,t,i,r){var l;if(-1==n){var s=-1,a=t.points[0];if(i.x==a.x&&i.y==a.y){a=t.points[1];if(r.x==a.x&&r.y==a.y)s=2;else{a=t.points[2];r.x==a.x&&r.y==a.y&&(s=1)}}else{a=t.points[1];if(i.x==a.x&&i.y==a.y){a=t.points[2];if(r.x==a.x&&r.y==a.y)s=0;else{a=t.points[0];r.x==a.x&&r.y==a.y&&(s=2)}}else{a=t.points[2];if(i.x==a.x&&i.y==a.y){a=t.points[0];if(r.x==a.x&&r.y==a.y)s=1;else{a=t.points[1];r.x==a.x&&r.y==a.y&&(s=0)}}}}return l=s,t.delaunay_edge[l]=!0,this.legalize(t),t.delaunay_edge[0]=!1,t.delaunay_edge[1]=!1,t.delaunay_edge[2]=!1,e}s=-1,a=e.points[0];if(i.x==a.x&&i.y==a.y){a=e.points[1];if(r.x==a.x&&r.y==a.y)s=2;else{a=e.points[2];r.x==a.x&&r.y==a.y&&(s=1)}}else{a=e.points[1];if(i.x==a.x&&i.y==a.y){a=e.points[2];if(r.x==a.x&&r.y==a.y)s=0;else{a=e.points[0];r.x==a.x&&r.y==a.y&&(s=2)}}else{a=e.points[2];if(i.x==a.x&&i.y==a.y){a=e.points[0];if(r.x==a.x&&r.y==a.y)s=1;else{a=e.points[1];r.x==a.x&&r.y==a.y&&(s=0)}}}}return l=s,e.delaunay_edge[l]=!0,this.legalize(e),e.delaunay_edge[0]=!1,e.delaunay_edge[1]=!1,e.delaunay_edge[2]=!1,t},flipScanEdgeEvent:function(n,e,t,i,r){var l=i.neighbors;null==(f=0)&&(f=0);for(var s=f,a=!1,o=0;o<3;){for(var p=o++;s<0;)s+=3;for(;s>2;)s-=3;var h=i.points[p];if(r.x==h.x&&r.y==h.y){a=!0;break}++s}if(!a)throw haxe_Exception.thrown("Triangle::Point not in triangle");var u=l[s];if(null==u)throw haxe_Exception.thrown("Sweep::[BUG:FIXME] FLIP failed due to missing triangle");l=i.points;null==(f=-1)&&(f=0);for(s=f,a=!1,o=0;o<3;){for(p=o++;s<0;)s+=3;for(;s>2;)s-=3;h=i.points[p];if(r.x==h.x&&r.y==h.y){a=!0;break}++s}if(!a)throw haxe_Exception.thrown("Triangle::Point not in triangle");r=l[s];var _=u.points;null==(f=-1)&&(f=0);for(s=f,a=!1,o=0;o<3;){for(p=o++;s<0;)s+=3;for(;s>2;)s-=3;h=u.points[p];if(r.x==h.x&&r.y==h.y){a=!0;break}++s}if(!a)throw haxe_Exception.thrown("Triangle::Point not in triangle");var c=_[s],d=t.points;null==(f=1)&&(f=0);for(s=f,a=!1,o=0;o<3;){for(p=o++;s<0;)s+=3;for(;s>2;)s-=3;h=t.points[p];if(e.x==h.x&&e.y==h.y){a=!0;break}++s}if(!a)throw haxe_Exception.thrown("Triangle::Point not in triangle");var f,x=d[s];d=t.points;null==(f=-1)&&(f=0);for(s=f,a=!1,o=0;o<3;){for(p=o++;s<0;)s+=3;for(;s>2;)s-=3;h=t.points[p];if(e.x==h.x&&e.y==h.y){a=!0;break}++s}if(!a)throw haxe_Exception.thrown("Triangle::Point not in triangle");var b=d[s],y=c.x,v=c.y,m=e.x-y,g=e.y-v,z=x.x-y,w=!1;m*(x.y-v)-z*g>poly2tri_Constants.EPSILON&&(w=(b.x-y)*g-m*(b.y-v)>poly2tri_Constants.EPSILON);if(w)this.flipEdgeEvent(e,c,u,c);else{var O=poly2tri_Sweep.nextFlipPoint(n,e,u,c);this.flipScanEdgeEvent(n,e,t,u,O)}},__class__:poly2tri_Sweep};var poly2tri_SweepContext=function(){this.triangles=poly2tri_Pool.getTriangleArray(),this.points=poly2tri_Pool.getPointArray(),this.edge_list=poly2tri_Pool.getEdgeArray(),this.basin=new poly2tri_Basin,this.edge_event=new poly2tri_EdgeEvent};t["poly2tri.SweepContext"]=poly2tri_SweepContext,poly2tri_SweepContext.__name__="poly2tri.SweepContext",poly2tri_SweepContext.prototype={reset:function(){var n;this.triangles=poly2tri_Pool.getTriangleArray(),this.points=poly2tri_Pool.getPointArray(),this.edge_list=poly2tri_Pool.getEdgeArray(),(n=this.basin).left_node=null,n.bottom_node=null,n.right_node=null,n.width=0,n.left_highest=!1,(n=this.edge_event).constrained_edge=null,n.right=!1},addPoints:function(n){for(var e=0,t=n.length;e<t;){var i=e++;this.points.push(n[i])}},addPolyline:function(n){for(var e=0,t=n.length;e<t;){var i=e++,r=n[(i+1)%n.length];this.edge_list.push(poly2tri_Pool.getEdge(n[i],r))}for(e=0,t=n.length;e<t;){var l=e++;this.points.push(n[l])}},initEdges:function(n){for(var e=0,t=n.length;e<t;){var i=e++,r=n[(i+1)%n.length];this.edge_list.push(poly2tri_Pool.getEdge(n[i],r))}},initTriangulation:function(){for(var n=this.points[0].x,e=this.points[0].x,t=this.points[0].y,i=this.points[0].y,r=0,l=this.points.length;r<l;){var s=r++,a=this.points[s];a.x>e&&(e=a.x),a.x<n&&(n=a.x),a.y>i&&(i=a.y),a.y<t&&(t=a.y)}var o=poly2tri_Constants.kAlpha*(e-n),p=poly2tri_Constants.kAlpha*(i-t);this.head=poly2tri_Pool.getPoint(e+o,t-p),this.tail=poly2tri_Pool.getPoint(n-p,t-p);var h=this.points;poly2tri_SortPoints.rec(h,0,h.length)},locateNode:function(n){var e=this.front,t=n.x,i=e.search_node,r=null;if(t<i.value){for(;null!=(i=i.prev);)if(t>=i.value){e.search_node=i,r=i;break}}else for(;null!=(i=i.next);)if(t<i.value){e.search_node=i.prev,r=i.prev;break}return r},createAdvancingFront:function(){var n=poly2tri_Pool.getTriangle(this.points[0],this.tail,this.head),e=poly2tri_Pool.getNode(n.points[1],n),t=poly2tri_Pool.getNode(n.points[0],n),i=poly2tri_Pool.getNode(n.points[2]);if(null==this.front)this.front=new poly2tri_AdvancingFront(e,i);else{var r=this.front;r.search_node=r.head=e,r.tail=i}e.next=t,t.next=i,t.prev=e,i.prev=t},removeNode:function(n){},mapTriangleToNodes:function(n){if(null==n.neighbors[0]){var e=this.front,t=n.points[0],i=n.points;null==(p=-1)&&(p=0);for(var r=p,l=!1,s=0;s<3;){for(var a=s++;r<0;)r+=3;for(;r>2;)r-=3;var o=n.points[a];if(t.x==o.x&&t.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((u=(h=i[r]).x)==(c=(_=e.search_node).point.x)){o=_.point;if(h.x!=o.x||h.y!=o.y){o=_.prev.point;if(h.x==o.x&&h.y==o.y)_=_.prev;else{o=_.next.point;if(h.x!=o.x||h.y!=o.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");_=_.next}}}else if(u<c)for(;null!=(_=_.prev);){o=_.point;if(h.x==o.x&&h.y==o.y)break}else for(;null!=(_=_.next);){o=_.point;if(h.x==o.x&&h.y==o.y)break}null!=_&&(e.search_node=_),null!=(d=_)&&(d.triangle=n)}if(null==n.neighbors[1]){e=this.front,t=n.points[1],i=n.points;null==(p=-1)&&(p=0);for(r=p,l=!1,s=0;s<3;){for(a=s++;r<0;)r+=3;for(;r>2;)r-=3;o=n.points[a];if(t.x==o.x&&t.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((u=(h=i[r]).x)==(c=(_=e.search_node).point.x)){o=_.point;if(h.x!=o.x||h.y!=o.y){o=_.prev.point;if(h.x==o.x&&h.y==o.y)_=_.prev;else{o=_.next.point;if(h.x!=o.x||h.y!=o.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");_=_.next}}}else if(u<c)for(;null!=(_=_.prev);){o=_.point;if(h.x==o.x&&h.y==o.y)break}else for(;null!=(_=_.next);){o=_.point;if(h.x==o.x&&h.y==o.y)break}null!=_&&(e.search_node=_),null!=(d=_)&&(d.triangle=n)}if(null==n.neighbors[2]){var p,h,u,_,c,d;e=this.front,t=n.points[2],i=n.points;null==(p=-1)&&(p=0);for(r=p,l=!1,s=0;s<3;){for(a=s++;r<0;)r+=3;for(;r>2;)r-=3;o=n.points[a];if(t.x==o.x&&t.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");if((u=(h=i[r]).x)==(c=(_=e.search_node).point.x)){o=_.point;if(h.x!=o.x||h.y!=o.y){o=_.prev.point;if(h.x==o.x&&h.y==o.y)_=_.prev;else{o=_.next.point;if(h.x!=o.x||h.y!=o.y)throw haxe_Exception.thrown("Invalid AdvancingFront.locatePoint call!");_=_.next}}}else if(u<c)for(;null!=(_=_.prev);){o=_.point;if(h.x==o.x&&h.y==o.y)break}else for(;null!=(_=_.next);){o=_.point;if(h.x==o.x&&h.y==o.y)break}null!=_&&(e.search_node=_),null!=(d=_)&&(d.triangle=n)}},meshClean:function(n){var e=poly2tri_SweepContext._tmpArray;0!=e.length&&(e.length>0?e.splice(0,e.length):e[-1]=null);for(e.push(n);;){if(null==(n=e.pop()))break;n.interior||(n.interior=!0,this.triangles.push(n),n.constrained_edge[0]||e.push(n.neighbors[0]),n.constrained_edge[1]||e.push(n.neighbors[1]),n.constrained_edge[2]||e.push(n.neighbors[2]))}},__class__:poly2tri_SweepContext};var poly2tri_Triangle=function(n,e,t,i,r){null==r&&(r=!0),null==i&&(i=!1);var l,s,a=e,o=t,p=i,h=r;if((null==h&&(h=!0),null==p&&(p=!1),p)&&1==((s=(n.x-o.x)*(a.y-o.y)-(n.y-o.y)*(a.x-o.x))>-poly2tri_Constants.EPSILON&&s<poly2tri_Constants.EPSILON?0:s>0?-1:1)){var u=o;o=a,a=u}h?l=1!=((s=(o.x-n.x)*(a.y-n.y)-(o.y-n.y)*(a.x-n.x))>-poly2tri_Constants.EPSILON&&s<poly2tri_Constants.EPSILON?0:s>0?-1:1):l=!1;if(l)throw haxe_Exception.thrown("Triangle::Triangle must defined with Orientation.CW");null==this.points?this.points=[n,a,o]:(this.points[0]=n,this.points[1]=n,this.points[2]=n),null==this.neighbors?this.neighbors=[null,null,null]:(this.neighbors[0]=null,this.neighbors[1]=null,this.neighbors[2]=null),null==this.constrained_edge?this.constrained_edge=[!1,!1,!1]:(this.constrained_edge[0]=!1,this.constrained_edge[1]=!1,this.constrained_edge[2]=!1),null==this.delaunay_edge?this.delaunay_edge=[!1,!1,!1]:(this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1)};t["poly2tri.Triangle"]=poly2tri_Triangle,poly2tri_Triangle.__name__="poly2tri.Triangle",poly2tri_Triangle.rotateTrianglePair=function(n,e,t,i){var r=n.neighbors;null==(w=-1)&&(w=0);for(var l=w,s=!1,a=0;a<3;){for(var o=a++;l<0;)l+=3;for(;l>2;)l-=3;var p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var h=r[l];r=n.neighbors;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var u=r[l],_=t.neighbors;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var c=_[l];_=t.neighbors;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var d=_[l];r=n.constrained_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var f=r[l];r=n.constrained_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var x=r[l];_=t.constrained_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var b=_[l];_=t.constrained_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var y=_[l];r=n.delaunay_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var v=r[l];r=n.delaunay_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var m=r[l];_=t.delaunay_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var g=_[l];_=t.delaunay_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");var z=_[l];n.legalize(e,i),t.legalize(i,e);_=t.delaunay_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");_[l]=v;r=n.delaunay_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=m;r=n.delaunay_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=g;_=t.delaunay_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");_[l]=z;_=t.constrained_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");_[l]=f;r=n.constrained_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(e.x==p.x&&e.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=x;r=n.constrained_edge;null==(w=-1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=n.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");r[l]=b;var w;_=t.constrained_edge;null==(w=1)&&(w=0);for(l=w,s=!1,a=0;a<3;){for(o=a++;l<0;)l+=3;for(;l>2;)l-=3;p=t.points[o];if(i.x==p.x&&i.y==p.y){s=!0;break}++l}if(!s)throw haxe_Exception.thrown("Triangle::Point not in triangle");if(_[l]=y,n.neighbors[0]=null,n.neighbors[1]=null,n.neighbors[2]=null,t.neighbors[0]=null,t.neighbors[1]=null,t.neighbors[2]=null,null!=h){var O=t.points[1],C=t.points[2];p=h.points[0];if(O.x!=p.x||O.y!=p.y){p=h.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=h.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=h.points[0];if(C.x!=p.x||C.y!=p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=h.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){t.neighbors[0]=h;O=t.points[1],C=t.points[2],p=h.points[2];if(O.x==p.x&&O.y==p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[1];if(O.x==p.x&&O.y==p.y){p=h.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)h.neighbors[0]=t;else{p=h.points[0];if(O.x==p.x&&O.y==p.y){p=h.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[2];if(O.x==p.x&&O.y==p.y){p=h.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)h.neighbors[1]=t;else{p=h.points[0];if(O.x==p.x&&O.y==p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[1];if(O.x==p.x&&O.y==p.y){p=h.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");h.neighbors[2]=t}}}else{O=t.points[0],C=t.points[2],p=h.points[0];if(O.x!=p.x||O.y!=p.y){p=h.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=h.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=h.points[0];if(C.x!=p.x||C.y!=p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=h.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){t.neighbors[1]=h;O=t.points[0],C=t.points[2],p=h.points[2];if(O.x==p.x&&O.y==p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[1];if(O.x==p.x&&O.y==p.y){p=h.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)h.neighbors[0]=t;else{p=h.points[0];if(O.x==p.x&&O.y==p.y){p=h.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[2];if(O.x==p.x&&O.y==p.y){p=h.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)h.neighbors[1]=t;else{p=h.points[0];if(O.x==p.x&&O.y==p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[1];if(O.x==p.x&&O.y==p.y){p=h.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");h.neighbors[2]=t}}}else{O=t.points[0],C=t.points[1],p=h.points[0];if(O.x!=p.x||O.y!=p.y){p=h.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=h.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=h.points[0];if(C.x!=p.x||C.y!=p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=h.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){t.neighbors[2]=h;O=t.points[0],C=t.points[1],p=h.points[2];if(O.x==p.x&&O.y==p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[1];if(O.x==p.x&&O.y==p.y){p=h.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)h.neighbors[0]=t;else{p=h.points[0];if(O.x==p.x&&O.y==p.y){p=h.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[2];if(O.x==p.x&&O.y==p.y){p=h.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)h.neighbors[1]=t;else{p=h.points[0];if(O.x==p.x&&O.y==p.y){p=h.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=h.points[1];if(O.x==p.x&&O.y==p.y){p=h.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");h.neighbors[2]=t}}}}}}if(null!=u){O=n.points[1],C=n.points[2],p=u.points[0];if(O.x!=p.x||O.y!=p.y){p=u.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=u.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=u.points[0];if(C.x!=p.x||C.y!=p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=u.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[0]=u;O=n.points[1],C=n.points[2],p=u.points[2];if(O.x==p.x&&O.y==p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[1];if(O.x==p.x&&O.y==p.y){p=u.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)u.neighbors[0]=n;else{p=u.points[0];if(O.x==p.x&&O.y==p.y){p=u.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[2];if(O.x==p.x&&O.y==p.y){p=u.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)u.neighbors[1]=n;else{p=u.points[0];if(O.x==p.x&&O.y==p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[1];if(O.x==p.x&&O.y==p.y){p=u.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");u.neighbors[2]=n}}}else{O=n.points[0],C=n.points[2],p=u.points[0];if(O.x!=p.x||O.y!=p.y){p=u.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=u.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=u.points[0];if(C.x!=p.x||C.y!=p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=u.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[1]=u;O=n.points[0],C=n.points[2],p=u.points[2];if(O.x==p.x&&O.y==p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[1];if(O.x==p.x&&O.y==p.y){p=u.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)u.neighbors[0]=n;else{p=u.points[0];if(O.x==p.x&&O.y==p.y){p=u.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[2];if(O.x==p.x&&O.y==p.y){p=u.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)u.neighbors[1]=n;else{p=u.points[0];if(O.x==p.x&&O.y==p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[1];if(O.x==p.x&&O.y==p.y){p=u.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");u.neighbors[2]=n}}}else{O=n.points[0],C=n.points[1],p=u.points[0];if(O.x!=p.x||O.y!=p.y){p=u.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=u.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=u.points[0];if(C.x!=p.x||C.y!=p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=u.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[2]=u;O=n.points[0],C=n.points[1],p=u.points[2];if(O.x==p.x&&O.y==p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[1];if(O.x==p.x&&O.y==p.y){p=u.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)u.neighbors[0]=n;else{p=u.points[0];if(O.x==p.x&&O.y==p.y){p=u.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[2];if(O.x==p.x&&O.y==p.y){p=u.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)u.neighbors[1]=n;else{p=u.points[0];if(O.x==p.x&&O.y==p.y){p=u.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=u.points[1];if(O.x==p.x&&O.y==p.y){p=u.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");u.neighbors[2]=n}}}}}}if(null!=c){O=n.points[1],C=n.points[2],p=c.points[0];if(O.x!=p.x||O.y!=p.y){p=c.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=c.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=c.points[0];if(C.x!=p.x||C.y!=p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=c.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[0]=c;O=n.points[1],C=n.points[2],p=c.points[2];if(O.x==p.x&&O.y==p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[1];if(O.x==p.x&&O.y==p.y){p=c.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)c.neighbors[0]=n;else{p=c.points[0];if(O.x==p.x&&O.y==p.y){p=c.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[2];if(O.x==p.x&&O.y==p.y){p=c.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)c.neighbors[1]=n;else{p=c.points[0];if(O.x==p.x&&O.y==p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[1];if(O.x==p.x&&O.y==p.y){p=c.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");c.neighbors[2]=n}}}else{O=n.points[0],C=n.points[2],p=c.points[0];if(O.x!=p.x||O.y!=p.y){p=c.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=c.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=c.points[0];if(C.x!=p.x||C.y!=p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=c.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[1]=c;O=n.points[0],C=n.points[2],p=c.points[2];if(O.x==p.x&&O.y==p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[1];if(O.x==p.x&&O.y==p.y){p=c.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)c.neighbors[0]=n;else{p=c.points[0];if(O.x==p.x&&O.y==p.y){p=c.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[2];if(O.x==p.x&&O.y==p.y){p=c.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)c.neighbors[1]=n;else{p=c.points[0];if(O.x==p.x&&O.y==p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[1];if(O.x==p.x&&O.y==p.y){p=c.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");c.neighbors[2]=n}}}else{O=n.points[0],C=n.points[1],p=c.points[0];if(O.x!=p.x||O.y!=p.y){p=c.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=c.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=c.points[0];if(C.x!=p.x||C.y!=p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=c.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[2]=c;O=n.points[0],C=n.points[1],p=c.points[2];if(O.x==p.x&&O.y==p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[1];if(O.x==p.x&&O.y==p.y){p=c.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)c.neighbors[0]=n;else{p=c.points[0];if(O.x==p.x&&O.y==p.y){p=c.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[2];if(O.x==p.x&&O.y==p.y){p=c.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)c.neighbors[1]=n;else{p=c.points[0];if(O.x==p.x&&O.y==p.y){p=c.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=c.points[1];if(O.x==p.x&&O.y==p.y){p=c.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");c.neighbors[2]=n}}}}}}if(null!=d){O=t.points[1],C=t.points[2],p=d.points[0];if(O.x!=p.x||O.y!=p.y){p=d.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=d.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=d.points[0];if(C.x!=p.x||C.y!=p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=d.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){t.neighbors[0]=d;O=t.points[1],C=t.points[2],p=d.points[2];if(O.x==p.x&&O.y==p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[1];if(O.x==p.x&&O.y==p.y){p=d.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)d.neighbors[0]=t;else{p=d.points[0];if(O.x==p.x&&O.y==p.y){p=d.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[2];if(O.x==p.x&&O.y==p.y){p=d.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)d.neighbors[1]=t;else{p=d.points[0];if(O.x==p.x&&O.y==p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[1];if(O.x==p.x&&O.y==p.y){p=d.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");d.neighbors[2]=t}}}else{O=t.points[0],C=t.points[2],p=d.points[0];if(O.x!=p.x||O.y!=p.y){p=d.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=d.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=d.points[0];if(C.x!=p.x||C.y!=p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=d.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){t.neighbors[1]=d;O=t.points[0],C=t.points[2],p=d.points[2];if(O.x==p.x&&O.y==p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[1];if(O.x==p.x&&O.y==p.y){p=d.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)d.neighbors[0]=t;else{p=d.points[0];if(O.x==p.x&&O.y==p.y){p=d.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[2];if(O.x==p.x&&O.y==p.y){p=d.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)d.neighbors[1]=t;else{p=d.points[0];if(O.x==p.x&&O.y==p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[1];if(O.x==p.x&&O.y==p.y){p=d.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");d.neighbors[2]=t}}}else{O=t.points[0],C=t.points[1],p=d.points[0];if(O.x!=p.x||O.y!=p.y){p=d.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=d.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=d.points[0];if(C.x!=p.x||C.y!=p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=d.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){t.neighbors[2]=d;O=t.points[0],C=t.points[1],p=d.points[2];if(O.x==p.x&&O.y==p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[1];if(O.x==p.x&&O.y==p.y){p=d.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)d.neighbors[0]=t;else{p=d.points[0];if(O.x==p.x&&O.y==p.y){p=d.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[2];if(O.x==p.x&&O.y==p.y){p=d.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)d.neighbors[1]=t;else{p=d.points[0];if(O.x==p.x&&O.y==p.y){p=d.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=d.points[1];if(O.x==p.x&&O.y==p.y){p=d.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");d.neighbors[2]=t}}}}}}O=n.points[1],C=n.points[2],p=t.points[0];if(O.x!=p.x||O.y!=p.y){p=t.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=t.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=t.points[0];if(C.x!=p.x||C.y!=p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=t.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[0]=t;O=n.points[1],C=n.points[2],p=t.points[2];if(O.x==p.x&&O.y==p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[1];if(O.x==p.x&&O.y==p.y){p=t.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)t.neighbors[0]=n;else{p=t.points[0];if(O.x==p.x&&O.y==p.y){p=t.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[2];if(O.x==p.x&&O.y==p.y){p=t.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)t.neighbors[1]=n;else{p=t.points[0];if(O.x==p.x&&O.y==p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[1];if(O.x==p.x&&O.y==p.y){p=t.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=n}}}else{O=n.points[0],C=n.points[2],p=t.points[0];if(O.x!=p.x||O.y!=p.y){p=t.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=t.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=t.points[0];if(C.x!=p.x||C.y!=p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=t.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[1]=t;O=n.points[0],C=n.points[2],p=t.points[2];if(O.x==p.x&&O.y==p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[1];if(O.x==p.x&&O.y==p.y){p=t.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)t.neighbors[0]=n;else{p=t.points[0];if(O.x==p.x&&O.y==p.y){p=t.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[2];if(O.x==p.x&&O.y==p.y){p=t.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)t.neighbors[1]=n;else{p=t.points[0];if(O.x==p.x&&O.y==p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[1];if(O.x==p.x&&O.y==p.y){p=t.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=n}}}else{var E;O=n.points[0],C=n.points[1],p=t.points[0];if(O.x!=p.x||O.y!=p.y){p=t.points[1];E=O.x==p.x&&O.y==p.y}else E=!0;if(E)M=!0;else{p=t.points[2];M=O.x==p.x&&O.y==p.y}if(M){p=t.points[0];if(C.x!=p.x||C.y!=p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!0;if(M)U=!0;else{p=t.points[2];U=C.x==p.x&&C.y==p.y}}else U=!1;if(U){n.neighbors[2]=t;O=n.points[0],C=n.points[1],p=t.points[2];if(O.x==p.x&&O.y==p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[1];if(O.x==p.x&&O.y==p.y){p=t.points[2];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)t.neighbors[0]=n;else{p=t.points[0];if(O.x==p.x&&O.y==p.y){p=t.points[2];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[2];if(O.x==p.x&&O.y==p.y){p=t.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(U)t.neighbors[1]=n;else{var U,M;p=t.points[0];if(O.x==p.x&&O.y==p.y){p=t.points[1];M=C.x==p.x&&C.y==p.y}else M=!1;if(M)U=!0;else{p=t.points[1];if(O.x==p.x&&O.y==p.y){p=t.points[0];U=C.x==p.x&&C.y==p.y}else U=!1}if(!U)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");t.neighbors[2]=n}}}}}},poly2tri_Triangle.prototype={reset:function(n,e,t,i,r){var l,s;if((null==r&&(r=!0),null==i&&(i=!1),i)&&1==((s=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x))>-poly2tri_Constants.EPSILON&&s<poly2tri_Constants.EPSILON?0:s>0?-1:1)){var a=t;t=e,e=a}r?l=1!=((s=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))>-poly2tri_Constants.EPSILON&&s<poly2tri_Constants.EPSILON?0:s>0?-1:1):l=!1;if(l)throw haxe_Exception.thrown("Triangle::Triangle must defined with Orientation.CW");null==this.points?this.points=[n,e,t]:(this.points[0]=n,this.points[1]=n,this.points[2]=n),null==this.neighbors?this.neighbors=[null,null,null]:(this.neighbors[0]=null,this.neighbors[1]=null,this.neighbors[2]=null),null==this.constrained_edge?this.constrained_edge=[!1,!1,!1]:(this.constrained_edge[0]=!1,this.constrained_edge[1]=!1,this.constrained_edge[2]=!1),null==this.delaunay_edge?this.delaunay_edge=[!1,!1,!1]:(this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1)},containsPoint:function(n){var e,t=this.points[0];if(n.x!=t.x||n.y!=t.y){t=this.points[1];e=n.x==t.x&&n.y==t.y}else e=!0;if(e)return!0;t=this.points[2];return n.x==t.x&&n.y==t.y},containsEdgePoints:function(n,e){var t,i=this.points[0];if(n.x!=i.x||n.y!=i.y){i=this.points[1];t=n.x==i.x&&n.y==i.y}else t=!0;if(t)r=!0;else{i=this.points[2];r=n.x==i.x&&n.y==i.y}if(r){var r;i=this.points[0];if(e.x!=i.x||e.y!=i.y){i=this.points[1];r=e.x==i.x&&e.y==i.y}else r=!0;if(r)return!0;i=this.points[2];return e.x==i.x&&e.y==i.y}return!1},markNeighbor:function(n,e,t){var i=this.points[2];if(e.x==i.x&&e.y==i.y){i=this.points[1];l=t.x==i.x&&t.y==i.y}else l=!1;if(l)r=!0;else{i=this.points[1];if(e.x==i.x&&e.y==i.y){i=this.points[2];r=t.x==i.x&&t.y==i.y}else r=!1}if(r)this.neighbors[0]=n;else{i=this.points[0];if(e.x==i.x&&e.y==i.y){i=this.points[2];l=t.x==i.x&&t.y==i.y}else l=!1;if(l)r=!0;else{i=this.points[2];if(e.x==i.x&&e.y==i.y){i=this.points[0];r=t.x==i.x&&t.y==i.y}else r=!1}if(r)this.neighbors[1]=n;else{var r,l;i=this.points[0];if(e.x==i.x&&e.y==i.y){i=this.points[1];l=t.x==i.x&&t.y==i.y}else l=!1;if(l)r=!0;else{i=this.points[1];if(e.x==i.x&&e.y==i.y){i=this.points[0];r=t.x==i.x&&t.y==i.y}else r=!1}if(!r)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");this.neighbors[2]=n}}},markNeighborTriangle:function(n){var e=this.points[1],t=this.points[2],i=n.points[0];if(e.x!=i.x||e.y!=i.y){i=n.points[1];r=e.x==i.x&&e.y==i.y}else r=!0;if(r)s=!0;else{i=n.points[2];s=e.x==i.x&&e.y==i.y}if(s){i=n.points[0];if(t.x!=i.x||t.y!=i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!0;if(s)l=!0;else{i=n.points[2];l=t.x==i.x&&t.y==i.y}}else l=!1;if(l){this.neighbors[0]=n;e=this.points[1],t=this.points[2],i=n.points[2];if(e.x==i.x&&e.y==i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[1];if(e.x==i.x&&e.y==i.y){i=n.points[2];l=t.x==i.x&&t.y==i.y}else l=!1}if(l)n.neighbors[0]=this;else{i=n.points[0];if(e.x==i.x&&e.y==i.y){i=n.points[2];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[2];if(e.x==i.x&&e.y==i.y){i=n.points[0];l=t.x==i.x&&t.y==i.y}else l=!1}if(l)n.neighbors[1]=this;else{i=n.points[0];if(e.x==i.x&&e.y==i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[1];if(e.x==i.x&&e.y==i.y){i=n.points[0];l=t.x==i.x&&t.y==i.y}else l=!1}if(!l)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");n.neighbors[2]=this}}}else{e=this.points[0],t=this.points[2],i=n.points[0];if(e.x!=i.x||e.y!=i.y){i=n.points[1];r=e.x==i.x&&e.y==i.y}else r=!0;if(r)s=!0;else{i=n.points[2];s=e.x==i.x&&e.y==i.y}if(s){i=n.points[0];if(t.x!=i.x||t.y!=i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!0;if(s)l=!0;else{i=n.points[2];l=t.x==i.x&&t.y==i.y}}else l=!1;if(l){this.neighbors[1]=n;e=this.points[0],t=this.points[2],i=n.points[2];if(e.x==i.x&&e.y==i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[1];if(e.x==i.x&&e.y==i.y){i=n.points[2];l=t.x==i.x&&t.y==i.y}else l=!1}if(l)n.neighbors[0]=this;else{i=n.points[0];if(e.x==i.x&&e.y==i.y){i=n.points[2];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[2];if(e.x==i.x&&e.y==i.y){i=n.points[0];l=t.x==i.x&&t.y==i.y}else l=!1}if(l)n.neighbors[1]=this;else{i=n.points[0];if(e.x==i.x&&e.y==i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[1];if(e.x==i.x&&e.y==i.y){i=n.points[0];l=t.x==i.x&&t.y==i.y}else l=!1}if(!l)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");n.neighbors[2]=this}}}else{var r;e=this.points[0],t=this.points[1],i=n.points[0];if(e.x!=i.x||e.y!=i.y){i=n.points[1];r=e.x==i.x&&e.y==i.y}else r=!0;if(r)s=!0;else{i=n.points[2];s=e.x==i.x&&e.y==i.y}if(s){i=n.points[0];if(t.x!=i.x||t.y!=i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!0;if(s)l=!0;else{i=n.points[2];l=t.x==i.x&&t.y==i.y}}else l=!1;if(l){this.neighbors[2]=n;e=this.points[0],t=this.points[1],i=n.points[2];if(e.x==i.x&&e.y==i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[1];if(e.x==i.x&&e.y==i.y){i=n.points[2];l=t.x==i.x&&t.y==i.y}else l=!1}if(l)n.neighbors[0]=this;else{i=n.points[0];if(e.x==i.x&&e.y==i.y){i=n.points[2];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[2];if(e.x==i.x&&e.y==i.y){i=n.points[0];l=t.x==i.x&&t.y==i.y}else l=!1}if(l)n.neighbors[1]=this;else{var l,s;i=n.points[0];if(e.x==i.x&&e.y==i.y){i=n.points[1];s=t.x==i.x&&t.y==i.y}else s=!1;if(s)l=!0;else{i=n.points[1];if(e.x==i.x&&e.y==i.y){i=n.points[0];l=t.x==i.x&&t.y==i.y}else l=!1}if(!l)throw haxe_Exception.thrown("Invalid markNeighbor call (1)!");n.neighbors[2]=this}}}}}},getPointIndexOffset:function(n,e){null==e&&(e=0);for(var t=e,i=!1,r=0;r<3;){for(var l=r++;t<0;)t+=3;for(;t>2;)t-=3;var s=this.points[l];if(n.x==s.x&&n.y==s.y){i=!0;break}++t}if(!i)throw haxe_Exception.thrown("Triangle::Point not in triangle");return t},pointCW:function(n){var e=this.points,t=-1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},pointCCW:function(n){var e=this.points,t=1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},neighborCW:function(n){var e=this.neighbors,t=1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},neighborCCW:function(n){var e=this.neighbors,t=-1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},getConstrainedEdgeCW:function(n){var e=this.constrained_edge,t=1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},setConstrainedEdgeCW:function(n,e){var t=this.constrained_edge,i=1;null==i&&(i=0);for(var r=i,l=!1,s=0;s<3;){for(var a=s++;r<0;)r+=3;for(;r>2;)r-=3;var o=this.points[a];if(n.x==o.x&&n.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");return t[r]=e},getConstrainedEdgeCCW:function(n){var e=this.constrained_edge,t=-1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},setConstrainedEdgeCCW:function(n,e){var t=this.constrained_edge,i=-1;null==i&&(i=0);for(var r=i,l=!1,s=0;s<3;){for(var a=s++;r<0;)r+=3;for(;r>2;)r-=3;var o=this.points[a];if(n.x==o.x&&n.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");return t[r]=e},getDelaunayEdgeCW:function(n){var e=this.delaunay_edge,t=1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},setDelaunayEdgeCW:function(n,e){var t=this.delaunay_edge,i=1;null==i&&(i=0);for(var r=i,l=!1,s=0;s<3;){for(var a=s++;r<0;)r+=3;for(;r>2;)r-=3;var o=this.points[a];if(n.x==o.x&&n.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");return t[r]=e},getDelaunayEdgeCCW:function(n){var e=this.delaunay_edge,t=-1;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},setDelaunayEdgeCCW:function(n,e){var t=this.delaunay_edge,i=-1;null==i&&(i=0);for(var r=i,l=!1,s=0;s<3;){for(var a=s++;r<0;)r+=3;for(;r>2;)r-=3;var o=this.points[a];if(n.x==o.x&&n.y==o.y){l=!0;break}++r}if(!l)throw haxe_Exception.thrown("Triangle::Point not in triangle");return t[r]=e},neighborAcross:function(n){var e=this.neighbors,t=0;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return e[i]},oppositePoint:function(n,e){var t=n.points;null==(o=-1)&&(o=0);for(var i=o,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=n.points[s];if(e.x==a.x&&e.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");e=t[i];var o,p=this.points;null==(o=-1)&&(o=0);for(i=o,r=!1,l=0;l<3;){for(s=l++;i<0;)i+=3;for(;i>2;)i-=3;a=this.points[s];if(e.x==a.x&&e.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");return p[i]},legalize:function(n,e){if(null!=e){var t=this.points[0];if(n.x==t.x&&n.y==t.y)this.points[1]=this.points[0],this.points[0]=this.points[2],this.points[2]=e;else{t=this.points[1];if(n.x==t.x&&n.y==t.y)this.points[2]=this.points[1],this.points[1]=this.points[0],this.points[0]=e;else{t=this.points[2];if(n.x!=t.x||n.y!=t.y)throw haxe_Exception.thrown("Invalid js.poly2tri.Triangle.Legalize call!");this.points[0]=this.points[2],this.points[2]=this.points[1],this.points[1]=e}}}else this.legalize(this.points[0],n)},index:function(n){var e=-1;try{var t=0;null==t&&(t=0);for(var i=t,r=!1,l=0;l<3;){for(var s=l++;i<0;)i+=3;for(;i>2;)i-=3;var a=this.points[s];if(n.x==a.x&&n.y==a.y){r=!0;break}++i}if(!r)throw haxe_Exception.thrown("Triangle::Point not in triangle");e=i}catch(l){var o=haxe_Exception.caught(l).unwrap();if("string"!=typeof o)throw l;var p=o;haxe_Log.trace(p,{fileName:"/Users/jeremyfa/Developer/ceramic/git/poly2tri/src/poly2tri/Triangle.hx",lineNumber:275,className:"poly2tri.Triangle",methodName:"index"})}return e},edgeIndex:function(n,e){var t=-1,i=this.points[0];if(n.x==i.x&&n.y==i.y){i=this.points[1];if(e.x==i.x&&e.y==i.y)t=2;else{i=this.points[2];e.x==i.x&&e.y==i.y&&(t=1)}}else{i=this.points[1];if(n.x==i.x&&n.y==i.y){i=this.points[2];if(e.x==i.x&&e.y==i.y)t=0;else{i=this.points[0];e.x==i.x&&e.y==i.y&&(t=2)}}else{i=this.points[2];if(n.x==i.x&&n.y==i.y){i=this.points[0];if(e.x==i.x&&e.y==i.y)t=1;else{i=this.points[1];e.x==i.x&&e.y==i.y&&(t=0)}}}}return t},markConstrainedEdgeByIndex:function(n){this.constrained_edge[n]=!0},markConstrainedEdgeByEdge:function(n){var e=n.p,t=n.q,i=this.points[0];if(t.x==i.x&&t.y==i.y){i=this.points[1];l=e.x==i.x&&e.y==i.y}else l=!1;if(l)r=!0;else{i=this.points[1];if(t.x==i.x&&t.y==i.y){i=this.points[0];r=e.x==i.x&&e.y==i.y}else r=!1}if(r)this.constrained_edge[2]=!0;else{i=this.points[0];if(t.x==i.x&&t.y==i.y){i=this.points[2];l=e.x==i.x&&e.y==i.y}else l=!1;if(l)r=!0;else{i=this.points[2];if(t.x==i.x&&t.y==i.y){i=this.points[0];r=e.x==i.x&&e.y==i.y}else r=!1}if(r)this.constrained_edge[1]=!0;else{var r,l;i=this.points[1];if(t.x==i.x&&t.y==i.y){i=this.points[2];l=e.x==i.x&&e.y==i.y}else l=!1;if(l)r=!0;else{i=this.points[2];if(t.x==i.x&&t.y==i.y){i=this.points[1];r=e.x==i.x&&e.y==i.y}else r=!1}r&&(this.constrained_edge[0]=!0)}}},markConstrainedEdgeByPoints:function(n,e){var t=this.points[0];if(e.x==t.x&&e.y==t.y){t=this.points[1];r=n.x==t.x&&n.y==t.y}else r=!1;if(r)i=!0;else{t=this.points[1];if(e.x==t.x&&e.y==t.y){t=this.points[0];i=n.x==t.x&&n.y==t.y}else i=!1}if(i)this.constrained_edge[2]=!0;else{t=this.points[0];if(e.x==t.x&&e.y==t.y){t=this.points[2];r=n.x==t.x&&n.y==t.y}else r=!1;if(r)i=!0;else{t=this.points[2];if(e.x==t.x&&e.y==t.y){t=this.points[0];i=n.x==t.x&&n.y==t.y}else i=!1}if(i)this.constrained_edge[1]=!0;else{var i,r;t=this.points[1];if(e.x==t.x&&e.y==t.y){t=this.points[2];r=n.x==t.x&&n.y==t.y}else r=!1;if(r)i=!0;else{t=this.points[2];if(e.x==t.x&&e.y==t.y){t=this.points[1];i=n.x==t.x&&n.y==t.y}else i=!1}i&&(this.constrained_edge[0]=!0)}}},isEdgeSide:function(n,e){var t=-1,i=this.points[0];if(n.x==i.x&&n.y==i.y){i=this.points[1];if(e.x==i.x&&e.y==i.y)t=2;else{i=this.points[2];e.x==i.x&&e.y==i.y&&(t=1)}}else{i=this.points[1];if(n.x==i.x&&n.y==i.y){i=this.points[2];if(e.x==i.x&&e.y==i.y)t=0;else{i=this.points[0];e.x==i.x&&e.y==i.y&&(t=2)}}else{i=this.points[2];if(n.x==i.x&&n.y==i.y){i=this.points[0];if(e.x==i.x&&e.y==i.y)t=1;else{i=this.points[1];e.x==i.x&&e.y==i.y&&(t=0)}}}}var r=t;t=!1;if(-1!=r){if(this.constrained_edge[r]=!0,null!=(i=this.neighbors[r])){var l=i.points[0];if(e.x==l.x&&e.y==l.y){l=i.points[1];a=n.x==l.x&&n.y==l.y}else a=!1;if(a)s=!0;else{l=i.points[1];if(e.x==l.x&&e.y==l.y){l=i.points[0];s=n.x==l.x&&n.y==l.y}else s=!1}if(s)i.constrained_edge[2]=!0;else{l=i.points[0];if(e.x==l.x&&e.y==l.y){l=i.points[2];a=n.x==l.x&&n.y==l.y}else a=!1;if(a)s=!0;else{l=i.points[2];if(e.x==l.x&&e.y==l.y){l=i.points[0];s=n.x==l.x&&n.y==l.y}else s=!1}if(s)i.constrained_edge[1]=!0;else{var s,a;l=i.points[1];if(e.x==l.x&&e.y==l.y){l=i.points[2];a=n.x==l.x&&n.y==l.y}else a=!1;if(a)s=!0;else{l=i.points[2];if(e.x==l.x&&e.y==l.y){l=i.points[1];s=n.x==l.x&&n.y==l.y}else s=!1}s&&(i.constrained_edge[0]=!0)}}}t=!0}return t},clearNeigbors:function(){this.neighbors[0]=null,this.neighbors[1]=null,this.neighbors[2]=null},clearDelunayEdges:function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},toString:function(){return"Triangle("+Std.string(this.points[0])+", "+Std.string(this.points[1])+", "+Std.string(this.points[2])+")"},__class__:poly2tri_Triangle};var poly2tri_Utils=function(){};t["poly2tri.Utils"]=poly2tri_Utils,poly2tri_Utils.__name__="poly2tri.Utils",poly2tri_Utils.insideIncircle=function(n,e,t,i){var r=n.x-i.x,l=n.y-i.y,s=e.x-i.x,a=e.y-i.y,o=r*a-s*l,p=!1;if(o>0){var h=t.x-i.x,u=t.y-i.y,_=h*l-r*u;if(_>0)p=(r*r+l*l)*(s*u-h*a)+(s*s+a*a)*_+(h*h+u*u)*o>0}return p},poly2tri_Utils.inScanArea=function(n,e,t,i){var r=i.x,l=i.y,s=n.x-r,a=n.y-l,o=e.x-r,p=!1;s*(e.y-l)-o*a>poly2tri_Constants.EPSILON&&(p=(t.x-r)*a-s*(t.y-l)>poly2tri_Constants.EPSILON);return p};var polyline_Extensions=function(){};t["polyline.Extensions"]=polyline_Extensions,polyline_Extensions.__name__="polyline.Extensions",polyline_Extensions.unsafeGet=function(n,e){return n[e]},polyline_Extensions.unsafeSet=function(n,e,t){n[e]=t};var Z=i["polyline.StrokeCap"]={__ename__:"polyline.StrokeCap",__constructs__:null,BUTT:{_hx_name:"BUTT",_hx_index:0,__enum__:"polyline.StrokeCap",toString:$estr},SQUARE:{_hx_name:"SQUARE",_hx_index:1,__enum__:"polyline.StrokeCap",toString:$estr}};Z.__constructs__=[Z.BUTT,Z.SQUARE];var q=i["polyline.StrokeJoin"]={__ename__:"polyline.StrokeJoin",__constructs__:null,MITER:{_hx_name:"MITER",_hx_index:0,__enum__:"polyline.StrokeJoin",toString:$estr},BEVEL:{_hx_name:"BEVEL",_hx_index:1,__enum__:"polyline.StrokeJoin",toString:$estr}};q.__constructs__=[q.MITER,q.BEVEL];var tracker_Assert=function(){};t["tracker.Assert"]=tracker_Assert,tracker_Assert.__name__="tracker.Assert";var tracker_Autorun=function(n,e){this.invalidated=!1,this.boundAutorunArrays=null,this.afterRun=null,this.onRun=null,ceramic_Entity.call(this),this.onRun=n,this.afterRun=e,null!=n&&this.run()};t["tracker.Autorun"]=tracker_Autorun,tracker_Autorun.__name__="tracker.Autorun",tracker_Autorun.unobserve=function(){tracker_Autorun.prevCurrent.push(tracker_Autorun.current),tracker_Autorun.current=null},tracker_Autorun.reobserve=function(){tracker_Autorun.current=tracker_Autorun.prevCurrent.pop()},tracker_Autorun.unobserved=function(n){tracker_Autorun.prevCurrent.push(tracker_Autorun.current),tracker_Autorun.current=null,n(),tracker_Autorun.current=tracker_Autorun.prevCurrent.pop()},tracker_Autorun.getAutorunArray=function(){if(tracker_Autorun._autorunArraysLen>0){tracker_Autorun._autorunArraysLen--;var n=tracker_Autorun._autorunArrays[tracker_Autorun._autorunArraysLen];return tracker_Autorun._autorunArrays[tracker_Autorun._autorunArraysLen]=null,n}return[]},tracker_Autorun.recycleAutorunArray=function(n){n.splice(0,n.length),tracker_Autorun._autorunArrays[tracker_Autorun._autorunArraysLen]=n,tracker_Autorun._autorunArraysLen++},tracker_Autorun.getArrayOfAutorunArrays=function(){if(tracker_Autorun._arrayOfAutorunArraysLen>0){tracker_Autorun._arrayOfAutorunArraysLen--;var n=tracker_Autorun._arrayOfAutorunArrays[tracker_Autorun._arrayOfAutorunArraysLen];return tracker_Autorun._arrayOfAutorunArrays[tracker_Autorun._arrayOfAutorunArraysLen]=null,n}return[]},tracker_Autorun.recycleArrayOfAutorunArrays=function(n){n.splice(0,n.length),tracker_Autorun._arrayOfAutorunArrays[tracker_Autorun._arrayOfAutorunArraysLen]=n,tracker_Autorun._arrayOfAutorunArraysLen++},tracker_Autorun.__super__=ceramic_Entity,tracker_Autorun.prototype=$extend(ceramic_Entity.prototype,{emitReset:function(){this.unbindFromAllAutorunArrays();var n=0;if(null!=this.__cbOnReset&&(n+=this.__cbOnReset.length),null!=this.__cbOnceReset&&(n+=this.__cbOnceReset.length),n>0){var e=ceramic_ArrayPool.pool(n),t=e.get(),i=0;if(null!=this.__cbOnReset)for(var r=0,l=this.__cbOnReset.length;r<l;){var s=r++;!0?(t.vector[i]=this.__cbOnReset[s],++i):--n}if(null!=this.__cbOnceReset){var a=null,o=null;for(r=0,l=this.__cbOnceReset.length;r<l;){s=r++;if(!0){t.vector[i]=this.__cbOnceReset[s],this.__cbOnceReset[s]=null;var p=this.__cbOnceOwnerUnbindReset[s];this.__cbOnceOwnerUnbindReset[s]=null,null!=p&&p(),++i}else--n,null==a&&(a=[],o=[],[]),a.push(this.__cbOnceOwnerUnbindReset[s]),o.push(this.__cbOnceReset[s])}this.__cbOnceOwnerUnbindReset=a,this.__cbOnceReset=o}for(r=0,l=n;r<l;){i=r++;(0,t.vector[i])()}e.release(t),t=null}},onReset:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event reset because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReset(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnOwnerUnbindReset&&(this.__cbOnOwnerUnbindReset=[]),this.__cbOnOwnerUnbindReset.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnOwnerUnbindReset&&(this.__cbOnOwnerUnbindReset=[]),this.__cbOnOwnerUnbindReset.push(null);null==this.__cbOnReset&&(this.__cbOnReset=[]),this.__cbOnReset.push(e)},onceReset:function(n,e){var t=this;if(null!=n){if(n._lifecycleState<0)throw haxe_Exception.thrown("Failed to bind event reset because owner is destroyed!");var destroyCb=function(i){null!=e&&(t.offReset(e),e=null),n=null,destroyCb=null};n.onceDestroy(null,destroyCb),null==this.__cbOnceOwnerUnbindReset&&(this.__cbOnceOwnerUnbindReset=[]),this.__cbOnceOwnerUnbindReset.push((function(){null!=n&&null!=destroyCb&&n.offDestroy(destroyCb),n=null,destroyCb=null,e=null}))}else null==this.__cbOnceOwnerUnbindReset&&(this.__cbOnceOwnerUnbindReset=[]),this.__cbOnceOwnerUnbindReset.push(null);null==this.__cbOnceReset&&(this.__cbOnceReset=[]),this.__cbOnceReset.push(e)},offReset:function(n){if(null!=n){var e;null!=this.__cbOnReset&&-1!=(e=this.__cbOnReset.indexOf(n))&&(this.__cbOnReset.splice(e,1),null!=(l=this.__cbOnOwnerUnbindReset[e])&&l(),this.__cbOnOwnerUnbindReset.splice(e,1)),null!=this.__cbOnceReset&&-1!=(e=this.__cbOnceReset.indexOf(n))&&(this.__cbOnceReset.splice(e,1),null!=(l=this.__cbOnceOwnerUnbindReset[e])&&l(),this.__cbOnceOwnerUnbindReset.splice(e,1))}else{if(null!=this.__cbOnOwnerUnbindReset){for(var t=0,i=this.__cbOnOwnerUnbindReset.length;t<i;){var r=t++;null!=(l=this.__cbOnOwnerUnbindReset[r])&&l()}this.__cbOnOwnerUnbindReset=null}if(null!=this.__cbOnceOwnerUnbindReset){for(t=0,i=this.__cbOnceOwnerUnbindReset.length;t<i;){var l;r=t++;null!=(l=this.__cbOnceOwnerUnbindReset[r])&&l()}this.__cbOnceOwnerUnbindReset=null}this.__cbOnReset=null,this.__cbOnceReset=null}},listensReset:function(){return null!=this.__cbOnReset&&this.__cbOnReset.length>0||null!=this.__cbOnceReset&&this.__cbOnceReset.length>0},destroy:function(){this._lifecycleState<=-2||(this._lifecycleState=-2,this.emitReset(),this.onRun=null,this.afterRun=null,this._lifecycleState=-1,ceramic_Entity.prototype.destroy.call(this))},willEmitReset:function(){this.unbindFromAllAutorunArrays()},run:function(){if(!(this._lifecycleState<0)){this.invalidated=!1,this.emitReset();var n=tracker_Autorun.current;tracker_Autorun.current=this;var e=tracker_Autorun.prevCurrent.length;for(this.onRun(),null!=this.afterRun&&(tracker_Autorun.prevCurrent.push(tracker_Autorun.current),tracker_Autorun.current=null,this.afterRun(),tracker_Autorun.current=tracker_Autorun.prevCurrent.pop());e<tracker_Autorun.prevCurrent.length;)tracker_Autorun.prevCurrent.pop();tracker_Autorun.current=n}},invalidate:function(){if(!this.invalidated){this.invalidated=!0,this.unbindFromAllAutorunArrays();tracker_Tracker.backend;ceramic_App.app._onceImmediate($bind(this,this.run))}},bindToAutorunArray:function(n){if(!this.invalidated){var e=!1;if(null==this.boundAutorunArrays){var t;if(tracker_Autorun._arrayOfAutorunArraysLen>0){tracker_Autorun._arrayOfAutorunArraysLen--;var i=tracker_Autorun._arrayOfAutorunArrays[tracker_Autorun._arrayOfAutorunArraysLen];tracker_Autorun._arrayOfAutorunArrays[tracker_Autorun._arrayOfAutorunArraysLen]=null,t=i}else t=[];this.boundAutorunArrays=t}else for(var r=0,l=this.boundAutorunArrays.length;r<l;){var s=r++;if(this.boundAutorunArrays[s]==n){e=!0;break}}if(!e){var a=-1,o=n.length;for(s=o-1;s>=0;){if(null==(h=n[s])){a=s;break}--s}if(-1==a)n.push(this);else{var p=o-1;if(a<p)for(r=a+1,l=o;r<l;){var h=n[s=r++];n[s-1]=h}n[p]=this}this.boundAutorunArrays.push(n)}}},unbindFromAllAutorunArrays:function(){if(null!=this.boundAutorunArrays){for(var n=0,e=this.boundAutorunArrays.length;n<e;)for(var t=n++,i=this.boundAutorunArrays[t],r=0,l=i.length;r<l;){var s=r++,a=i[s];if(null!=a&&a==this){i[s]=null;break}}var o=this.boundAutorunArrays;o.splice(0,o.length),tracker_Autorun._arrayOfAutorunArrays[tracker_Autorun._arrayOfAutorunArraysLen]=o,tracker_Autorun._arrayOfAutorunArraysLen++,this.boundAutorunArrays=null}},unbindEvents:function(){ceramic_Entity.prototype.unbindEvents.call(this),this.offReset()},__class__:tracker_Autorun});var tracker_Extensions=function(){};t["tracker.Extensions"]=tracker_Extensions,tracker_Extensions.__name__="tracker.Extensions",tracker_Extensions.unsafeGet=function(n,e){return n[e]},tracker_Extensions.unsafeSet=function(n,e,t){n[e]=t},tracker_Extensions.setArrayLength=function(n,e){n.length!=e&&(n.length>e?n.splice(e,n.length-e):n[e-1]=null)},tracker_Extensions.setProperty=function(n,e,t){Reflect.setProperty(n,e,t)},tracker_Extensions.getProperty=function(n,e){return Reflect.getProperty(n,e)};var tracker_Tracker=function(){};t["tracker.Tracker"]=tracker_Tracker,tracker_Tracker.__name__="tracker.Tracker";var zpp_$nape_ZPP_$Const=function(){};t["zpp_nape.ZPP_Const"]=zpp_$nape_ZPP_$Const,zpp_$nape_ZPP_$Const.__name__="zpp_nape.ZPP_Const",zpp_$nape_ZPP_$Const.POSINF=function(){return 1/0},zpp_$nape_ZPP_$Const.NEGINF=function(){return-1/0};var zpp_$nape_ZPP_$ID=function(){};t["zpp_nape.ZPP_ID"]=zpp_$nape_ZPP_$ID,zpp_$nape_ZPP_$ID.__name__="zpp_nape.ZPP_ID",zpp_$nape_ZPP_$ID.Interactor=function(){return zpp_$nape_ZPP_$ID._Interactor++},zpp_$nape_ZPP_$ID.Space=function(){return zpp_$nape_ZPP_$ID._Space++},zpp_$nape_ZPP_$ID.ZPP_SimpleVert=function(){return zpp_$nape_ZPP_$ID._ZPP_SimpleVert++},zpp_$nape_ZPP_$ID.ZPP_SimpleSeg=function(){return zpp_$nape_ZPP_$ID._ZPP_SimpleSeg++},zpp_$nape_ZPP_$ID.InteractionGroup=function(){return zpp_$nape_ZPP_$ID._InteractionGroup++},zpp_$nape_ZPP_$ID.Constraint=function(){return zpp_$nape_ZPP_$ID._Constraint++},zpp_$nape_ZPP_$ID.CbType=function(){return zpp_$nape_ZPP_$ID._CbType++},zpp_$nape_ZPP_$ID.CbSet=function(){return zpp_$nape_ZPP_$ID._CbSet++},zpp_$nape_ZPP_$ID.Listener=function(){return zpp_$nape_ZPP_$ID._Listener++};var zpp_$nape_callbacks_ZPP_$Callback=function(){this.constraint=null,this.body=null,this.pre_swapped=!1,this.pre_arbiter=null,this.wrap_arbiters=null,this.set=null,this.int2=null,this.int1=null,this.length=0,this.prev=null,this.next=null,this.index=0,this.space=null,this.listener=null,this.event=0,this.outer_int=null,this.outer_con=null,this.outer_body=null,this.length=0};t["zpp_nape.callbacks.ZPP_Callback"]=zpp_$nape_callbacks_ZPP_$Callback,zpp_$nape_callbacks_ZPP_$Callback.__name__="zpp_nape.callbacks.ZPP_Callback",zpp_$nape_callbacks_ZPP_$Callback.prototype={wrapper_body:function(){return null==this.outer_body&&(zpp_$nape_callbacks_ZPP_$Callback.internal=!0,this.outer_body=new nape_callbacks_BodyCallback,zpp_$nape_callbacks_ZPP_$Callback.internal=!1,this.outer_body.zpp_inner=this),this.outer_body},wrapper_con:function(){return null==this.outer_con&&(zpp_$nape_callbacks_ZPP_$Callback.internal=!0,this.outer_con=new nape_callbacks_ConstraintCallback,zpp_$nape_callbacks_ZPP_$Callback.internal=!1,this.outer_con.zpp_inner=this),this.outer_con},wrapper_int:function(){return null==this.outer_int&&(zpp_$nape_callbacks_ZPP_$Callback.internal=!0,this.outer_int=new nape_callbacks_InteractionCallback,zpp_$nape_callbacks_ZPP_$Callback.internal=!1,this.outer_int.zpp_inner=this),null==this.wrap_arbiters?this.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null,this.outer_int},push:function(n){null!=this.prev?this.prev.next=n:this.next=n,n.prev=this.prev,n.next=null,this.prev=n,this.length++},push_rev:function(n){null!=this.next?this.next.prev=n:this.prev=n,n.next=this.next,n.prev=null,this.next=n,this.length++},pop:function(){var n=this.next;return this.next=n.next,null==this.next?this.prev=null:this.next.prev=null,this.length--,n},pop_rev:function(){var n=this.prev;return this.prev=n.prev,null==this.prev?this.next=null:this.prev.next=null,this.length--,n},empty:function(){return null==this.next},clear:function(){for(;!this.empty();)this.pop()},splice:function(n){var e=n.next;return null==n.prev?(this.next=n.next,null!=this.next?this.next.prev=null:this.prev=null):(n.prev.next=n.next,null!=n.next?n.next.prev=n.prev:this.prev=n.prev),this.length--,e},rotateL:function(){this.push(this.pop())},rotateR:function(){this.push_rev(this.pop_rev())},cycleNext:function(n){return null==n.next?this.next:n.next},cyclePrev:function(n){return null==n.prev?this.prev:n.prev},at:function(n){for(var e=this.next;0!=n--;)e=e.next;return e},rev_at:function(n){for(var e=this.prev;0!=n--;)e=e.prev;return e},free:function(){this.int1=this.int2=null,this.body=null,this.constraint=null,this.listener=null,null!=this.wrap_arbiters&&(this.wrap_arbiters.zpp_inner.inner=null),this.set=null},alloc:function(){},genarbs:function(){null==this.wrap_arbiters?this.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null},__class__:zpp_$nape_callbacks_ZPP_$Callback};var zpp_$nape_callbacks_ZPP_$CbSet=function(){this.wrap_constraints=null,this.constraints=null,this.wrap_interactors=null,this.interactors=null,this.zip_conlisteners=!1,this.conlisteners=null,this.zip_bodylisteners=!1,this.bodylisteners=null,this.zip_listeners=!1,this.listeners=null,this.cbpairs=null,this.manager=null,this.id=0,this.next=null,this.count=0,this.cbTypes=null,this.cbTypes=new zpp_$nape_util_ZNPList_$ZPP_$CbType,this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener,this.zip_listeners=!0,this.bodylisteners=new zpp_$nape_util_ZNPList_$ZPP_$BodyListener,this.zip_bodylisteners=!0,this.conlisteners=new zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener,this.zip_conlisteners=!0,this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this.interactors=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,this.id=zpp_$nape_ZPP_$ID.CbSet(),this.cbpairs=new zpp_$nape_util_ZNPList_$ZPP_$CbSetPair};t["zpp_nape.callbacks.ZPP_CbSet"]=zpp_$nape_callbacks_ZPP_$CbSet,zpp_$nape_callbacks_ZPP_$CbSet.__name__="zpp_nape.callbacks.ZPP_CbSet",zpp_$nape_callbacks_ZPP_$CbSet.setlt=function(n,e){for(var t=n.cbTypes.head,i=e.cbTypes.head;null!=t&&null!=i;){var r=t.elt,l=i.elt;if(r.id<l.id)return!0;if(l.id<r.id)return!1;t=t.next,i=i.next}return null!=i&&null==t},zpp_$nape_callbacks_ZPP_$CbSet.get=function(n){var e;null==zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool?e=new zpp_$nape_callbacks_ZPP_$CbSet:(e=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=e.next,e.next=null);for(var t=null,i=n.head;null!=i;){var r=i.elt;t=e.cbTypes.insert(t,r),r.cbsets.add(e),i=i.next}return e},zpp_$nape_callbacks_ZPP_$CbSet.compatible=function(n,e,t){var i,r=n.options1,l=e.cbTypes;if(r.nonemptyintersection(l,r.includes)&&!r.nonemptyintersection(l,r.excludes)){r=n.options2,l=t.cbTypes;i=r.nonemptyintersection(l,r.includes)&&!r.nonemptyintersection(l,r.excludes)}else i=!1;if(i)return!0;r=n.options2,l=e.cbTypes;if(r.nonemptyintersection(l,r.includes)&&!r.nonemptyintersection(l,r.excludes)){r=n.options1,l=t.cbTypes;return!!r.nonemptyintersection(l,r.includes)&&!r.nonemptyintersection(l,r.excludes)}return!1},zpp_$nape_callbacks_ZPP_$CbSet.empty_intersection=function(n,e){n.manager;for(var t,i=null,r=(n.cbpairs.length<e.cbpairs.length?n.cbpairs:e.cbpairs).head;null!=r;){var l=r.elt;if(l.a==n&&l.b==e||l.a==e&&l.b==n){i=l;break}r=r.next}null==i&&(null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?t=new zpp_$nape_callbacks_ZPP_$CbSetPair:(t=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=t.next,t.next=null),t.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(n,e)?(t.a=n,t.b=e):(t.a=e,t.b=n),i=t,n.cbpairs.add(i),e!=n&&e.cbpairs.add(i));return i.zip_listeners&&(i.zip_listeners=!1,i.__validate()),null==i.listeners.head},zpp_$nape_callbacks_ZPP_$CbSet.single_intersection=function(n,e,t){n.manager;for(var i,r=null,l=(n.cbpairs.length<e.cbpairs.length?n.cbpairs:e.cbpairs).head;null!=l;){var s=l.elt;if(s.a==n&&s.b==e||s.a==e&&s.b==n){r=s;break}l=l.next}null==r&&(null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?i=new zpp_$nape_callbacks_ZPP_$CbSetPair:(i=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(n,e)?(i.a=n,i.b=e):(i.a=e,i.b=n),r=i,n.cbpairs.add(r),e!=n&&e.cbpairs.add(r));r.zip_listeners&&(r.zip_listeners=!1,r.__validate());var a=r.listeners.head;return null!=a&&a.elt==t&&null==a.next},zpp_$nape_callbacks_ZPP_$CbSet.find_all=function(n,e,t,i){n.manager;for(var r,l=null,s=(n.cbpairs.length<e.cbpairs.length?n.cbpairs:e.cbpairs).head;null!=s;){var a=s.elt;if(a.a==n&&a.b==e||a.a==e&&a.b==n){l=a;break}s=s.next}null==l&&(null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?r=new zpp_$nape_callbacks_ZPP_$CbSetPair:(r=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=r.next,r.next=null),r.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(n,e)?(r.a=n,r.b=e):(r.a=e,r.b=n),l=r,n.cbpairs.add(l),e!=n&&e.cbpairs.add(l));l.zip_listeners&&(l.zip_listeners=!1,l.__validate());for(s=l.listeners.head;null!=s;){var o=s.elt;o.event==t&&i(o),s=s.next}},zpp_$nape_callbacks_ZPP_$CbSet.prototype={increment:function(){this.count++},decrement:function(){return 0==--this.count},invalidate_pairs:function(){for(var n=this.cbpairs.head;null!=n;){n.elt.zip_listeners=!0,n=n.next}},invalidate_listeners:function(){this.zip_listeners=!0,this.invalidate_pairs()},validate_listeners:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners())},realvalidate_listeners:function(){this.listeners.clear();for(var n=this.cbTypes.head;null!=n;){for(var e=n.elt,t=null,i=this.listeners.head,r=e.listeners.head;null!=r;){var l=r.elt;if(null!=i&&i.elt==l)r=r.next,t=i,i=i.next;else{var s;if(null!=i){var a=i.elt;s=l.precedence>a.precedence||l.precedence==a.precedence&&l.id>a.id}else s=!0;if(s){if(l.space==this.manager.space){var o,p=this.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(o=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=o.next,o.next=null),o.elt=l;var h=o;null==t?(h.next=p.head,p.head=h):(h.next=t.next,t.next=h),p.pushmod=p.modified=!0,p.length++,t=h}r=r.next}else t=i,i=i.next}}n=n.next}},invalidate_bodylisteners:function(){this.zip_bodylisteners=!0},validate_bodylisteners:function(){this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners())},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var n=this.cbTypes.head;null!=n;){for(var e=n.elt,t=null,i=this.bodylisteners.head,r=e.bodylisteners.head;null!=r;){var l=r.elt;if(null!=i&&i.elt==l)r=r.next,t=i,i=i.next;else{var s;if(null!=i){var a=i.elt;s=l.precedence>a.precedence||l.precedence==a.precedence&&l.id>a.id}else s=!0;if(s){var o=l.options;if(!o.nonemptyintersection(this.cbTypes,o.excludes)&&l.space==this.manager.space){var p,h=this.bodylisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(p=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=p.next,p.next=null),p.elt=l;var u=p;null==t?(u.next=h.head,h.head=u):(u.next=t.next,t.next=u),h.pushmod=h.modified=!0,h.length++,t=u}r=r.next}else t=i,i=i.next}}n=n.next}},invalidate_conlisteners:function(){this.zip_conlisteners=!0},validate_conlisteners:function(){this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var n=this.cbTypes.head;null!=n;){for(var e=n.elt,t=null,i=this.conlisteners.head,r=e.conlisteners.head;null!=r;){var l=r.elt;if(null!=i&&i.elt==l)r=r.next,t=i,i=i.next;else{var s;if(null!=i){var a=i.elt;s=l.precedence>a.precedence||l.precedence==a.precedence&&l.id>a.id}else s=!0;if(s){var o=l.options;if(!o.nonemptyintersection(this.cbTypes,o.excludes)&&l.space==this.manager.space){var p,h=this.conlisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(p=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=p.next,p.next=null),p.elt=l;var u=p;null==t?(u.next=h.head,h.head=u):(u.next=t.next,t.next=u),h.pushmod=h.modified=!0,h.length++,t=u}r=r.next}else t=i,i=i.next}}n=n.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners()),this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners()),this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},addConstraint:function(n){this.constraints.add(n)},addInteractor:function(n){this.interactors.add(n)},remConstraint:function(n){this.constraints.remove(n)},remInteractor:function(n){this.interactors.remove(n)},free:function(){for(this.listeners.clear(),this.zip_listeners=!0,this.bodylisteners.clear(),this.zip_bodylisteners=!0,this.conlisteners.clear(),this.zip_conlisteners=!0;null!=this.cbTypes.head;){this.cbTypes.pop_unsafe().cbsets.remove(this)}},alloc:function(){},__class__:zpp_$nape_callbacks_ZPP_$CbSet};var zpp_$nape_callbacks_ZPP_$CbSetPair=function(){this.listeners=null,this.zip_listeners=!1,this.next=null,this.b=null,this.a=null,this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener};t["zpp_nape.callbacks.ZPP_CbSetPair"]=zpp_$nape_callbacks_ZPP_$CbSetPair,zpp_$nape_callbacks_ZPP_$CbSetPair.__name__="zpp_nape.callbacks.ZPP_CbSetPair",zpp_$nape_callbacks_ZPP_$CbSetPair.get=function(n,e){var t;return null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?t=new zpp_$nape_callbacks_ZPP_$CbSetPair:(t=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=t.next,t.next=null),t.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(n,e)?(t.a=n,t.b=e):(t.a=e,t.b=n),t},zpp_$nape_callbacks_ZPP_$CbSetPair.setlt=function(n,e){return!!zpp_$nape_callbacks_ZPP_$CbSet.setlt(n.a,e.a)||n.a==e.a&&zpp_$nape_callbacks_ZPP_$CbSet.setlt(n.b,e.b)},zpp_$nape_callbacks_ZPP_$CbSetPair.prototype={free:function(){this.a=this.b=null,this.listeners.clear()},alloc:function(){this.zip_listeners=!0},compatible:function(n){var e,t=n.options1,i=this.a.cbTypes;if(t.nonemptyintersection(i,t.includes)&&!t.nonemptyintersection(i,t.excludes)){t=n.options2,i=this.b.cbTypes;e=t.nonemptyintersection(i,t.includes)&&!t.nonemptyintersection(i,t.excludes)}else e=!1;if(e)return!0;t=n.options2,i=this.a.cbTypes;if(t.nonemptyintersection(i,t.includes)&&!t.nonemptyintersection(i,t.excludes)){t=n.options1,i=this.b.cbTypes;return!!t.nonemptyintersection(i,t.includes)&&!t.nonemptyintersection(i,t.excludes)}return!1},invalidate:function(){this.zip_listeners=!0},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.__validate())},__validate:function(){this.listeners.clear();for(var n=this.a.listeners.head,e=this.b.listeners.head;null!=n&&null!=e;){var t=n.elt,i=e.elt;if(t==i){var r,l,s=t.options1,a=this.a.cbTypes;if(s.nonemptyintersection(a,s.includes)&&!s.nonemptyintersection(a,s.excludes)){var o=t.options2,p=this.b.cbTypes;l=o.nonemptyintersection(p,o.includes)&&!o.nonemptyintersection(p,o.excludes)}else l=!1;if(l)r=!0;else{var h=t.options2,u=this.a.cbTypes;if(h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)){var _=t.options1,c=this.b.cbTypes;r=_.nonemptyintersection(c,_.includes)&&!_.nonemptyintersection(c,_.excludes)}else r=!1}r&&this.listeners.add(t),n=n.next,e=e.next}else t.precedence>i.precedence||t.precedence==i.precedence&&t.id>i.id?n=n.next:e=e.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(n){var e=this.listeners.head;return null!=e&&e.elt==n&&null==e.next},forall:function(n,e){for(var t=this.listeners.head;null!=t;){var i=t.elt;i.event==n&&e(i),t=t.next}},__class__:zpp_$nape_callbacks_ZPP_$CbSetPair};var zpp_$nape_util_ZNPList_$ZPP_$InteractionListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=zpp_$nape_util_ZNPList_$ZPP_$InteractionListener,zpp_$nape_util_ZNPList_$ZPP_$InteractionListener.__name__="zpp_nape.util.ZNPList_ZPP_InteractionListener",zpp_$nape_util_ZNPList_$ZPP_$InteractionListener.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(e=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(e=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(t=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(t=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$InteractionListener};var zpp_$nape_util_ZNPList_$ZPP_$BodyListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_BodyListener"]=zpp_$nape_util_ZNPList_$ZPP_$BodyListener,zpp_$nape_util_ZNPList_$ZPP_$BodyListener.__name__="zpp_nape.util.ZNPList_ZPP_BodyListener",zpp_$nape_util_ZNPList_$ZPP_$BodyListener.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(e=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(e=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(t=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(t=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$BodyListener};var zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener,zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener.__name__="zpp_nape.util.ZNPList_ZPP_ConstraintListener",zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(e=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(e=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(t=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(t=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener};var zpp_$nape_util_ZNPList_$ZPP_$Constraint=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Constraint"]=zpp_$nape_util_ZNPList_$ZPP_$Constraint,zpp_$nape_util_ZNPList_$ZPP_$Constraint.__name__="zpp_nape.util.ZNPList_ZPP_Constraint",zpp_$nape_util_ZNPList_$ZPP_$Constraint.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(e=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(e=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(t=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(t=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Constraint};var zpp_$nape_util_ZNPList_$ZPP_$Interactor=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Interactor"]=zpp_$nape_util_ZNPList_$ZPP_$Interactor,zpp_$nape_util_ZNPList_$ZPP_$Interactor.__name__="zpp_nape.util.ZNPList_ZPP_Interactor",zpp_$nape_util_ZNPList_$ZPP_$Interactor.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(e=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(e=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(t=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(t=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Interactor};var zpp_$nape_util_ZNPList_$ZPP_$CbSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_CbSet"]=zpp_$nape_util_ZNPList_$ZPP_$CbSet,zpp_$nape_util_ZNPList_$ZPP_$CbSet.__name__="zpp_nape.util.ZNPList_ZPP_CbSet",zpp_$nape_util_ZNPList_$ZPP_$CbSet.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(e=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(e=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(t=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(t=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$CbSet};var zpp_$nape_callbacks_ZPP_$CbType=function(){this.conlisteners=null,this.bodylisteners=null,this.listeners=null,this.cbsets=null,this.id=0,this.userData=null,this.outer=null,this.id=zpp_$nape_ZPP_$ID.CbType(),this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener,this.bodylisteners=new zpp_$nape_util_ZNPList_$ZPP_$BodyListener,this.conlisteners=new zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener,this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this.interactors=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,this.cbsets=new zpp_$nape_util_ZNPList_$ZPP_$CbSet};t["zpp_nape.callbacks.ZPP_CbType"]=zpp_$nape_callbacks_ZPP_$CbType,zpp_$nape_callbacks_ZPP_$CbType.__name__="zpp_nape.callbacks.ZPP_CbType",zpp_$nape_callbacks_ZPP_$CbType.setlt=function(n,e){return n.id<e.id},zpp_$nape_callbacks_ZPP_$CbType.prototype={addConstraint:function(n){this.constraints.add(n)},addInteractor:function(n){this.interactors.add(n)},remConstraint:function(n){this.constraints.remove(n)},remInteractor:function(n){this.interactors.remove(n)},addint:function(n){for(var e=null,t=this.listeners.head;null!=t;){var i=t.elt;if(n.precedence>i.precedence||n.precedence==i.precedence&&n.id>i.id)break;e=t,t=t.next}var r,l=this.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?r=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(r=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=r.next,r.next=null),r.elt=n;var s=r;null==e?(s.next=l.head,l.head=s):(s.next=e.next,e.next=s),l.pushmod=l.modified=!0,l.length++;for(t=this.cbsets.head;null!=t;){var a=t.elt;a.zip_listeners=!0,a.invalidate_pairs(),t=t.next}},removeint:function(n){this.listeners.remove(n);for(var e=this.cbsets.head;null!=e;){var t=e.elt;t.zip_listeners=!0,t.invalidate_pairs(),e=e.next}},invalidateint:function(){for(var n=this.cbsets.head;null!=n;){var e=n.elt;e.zip_listeners=!0,e.invalidate_pairs(),n=n.next}},addbody:function(n){for(var e=null,t=this.bodylisteners.head;null!=t;){var i=t.elt;if(n.precedence>i.precedence||n.precedence==i.precedence&&n.id>i.id)break;e=t,t=t.next}var r,l=this.bodylisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?r=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(r=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=r.next,r.next=null),r.elt=n;var s=r;null==e?(s.next=l.head,l.head=s):(s.next=e.next,e.next=s),l.pushmod=l.modified=!0,l.length++;for(t=this.cbsets.head;null!=t;){t.elt.zip_bodylisteners=!0,t=t.next}},removebody:function(n){this.bodylisteners.remove(n);for(var e=this.cbsets.head;null!=e;){e.elt.zip_bodylisteners=!0,e=e.next}},invalidatebody:function(){for(var n=this.cbsets.head;null!=n;){n.elt.zip_bodylisteners=!0,n=n.next}},addconstraint:function(n){for(var e=null,t=this.conlisteners.head;null!=t;){var i=t.elt;if(n.precedence>i.precedence||n.precedence==i.precedence&&n.id>i.id)break;e=t,t=t.next}var r,l=this.conlisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?r=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(r=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=r.next,r.next=null),r.elt=n;var s=r;null==e?(s.next=l.head,l.head=s):(s.next=e.next,e.next=s),l.pushmod=l.modified=!0,l.length++;for(t=this.cbsets.head;null!=t;){t.elt.zip_conlisteners=!0,t=t.next}},removeconstraint:function(n){this.conlisteners.remove(n);for(var e=this.cbsets.head;null!=e;){e.elt.zip_conlisteners=!0,e=e.next}},invalidateconstraint:function(){for(var n=this.cbsets.head;null!=n;){n.elt.zip_conlisteners=!0,n=n.next}},__class__:zpp_$nape_callbacks_ZPP_$CbType};var zpp_$nape_util_ZPP_$Flags=function(){};t["zpp_nape.util.ZPP_Flags"]=zpp_$nape_util_ZPP_$Flags,zpp_$nape_util_ZPP_$Flags.__name__="zpp_nape.util.ZPP_Flags";var zpp_$nape_callbacks_ZPP_$Listener=function(){this.space=null,this.interaction=null,this.constraint=null,this.body=null,this.precedence=0,this.event=0,this.type=0,this.id=0,this.outer=null,this.id=zpp_$nape_ZPP_$ID.Listener()};t["zpp_nape.callbacks.ZPP_Listener"]=zpp_$nape_callbacks_ZPP_$Listener,zpp_$nape_callbacks_ZPP_$Listener.__name__="zpp_nape.callbacks.ZPP_Listener",zpp_$nape_callbacks_ZPP_$Listener.setlt=function(n,e){return!(n.precedence<=e.precedence)||n.precedence==e.precedence&&n.id>e.id},zpp_$nape_callbacks_ZPP_$Listener.prototype={swapEvent:function(n){},invalidate_precedence:function(){},addedToSpace:function(){},removedFromSpace:function(){},__class__:zpp_$nape_callbacks_ZPP_$Listener};var zpp_$nape_callbacks_ZPP_$BodyListener=function(n,e,t){this.handler=null,this.options=null,this.outer_zn=null,zpp_$nape_callbacks_ZPP_$Listener.call(this),this.event=e,this.handler=t,this.body=this,this.type=0,this.options=n.zpp_inner};t["zpp_nape.callbacks.ZPP_BodyListener"]=zpp_$nape_callbacks_ZPP_$BodyListener,zpp_$nape_callbacks_ZPP_$BodyListener.__name__="zpp_nape.callbacks.ZPP_BodyListener",zpp_$nape_callbacks_ZPP_$BodyListener.__super__=zpp_$nape_callbacks_ZPP_$Listener,zpp_$nape_callbacks_ZPP_$BodyListener.prototype=$extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{immutable_options:function(){if(null!=this.space&&this.space.midstep)throw haxe_Exception.thrown("Error: Cannot change listener type options during space.step()")},addedToSpace:function(){this.options.handler=$bind(this,this.cbtype_change);for(var n=this.options.includes.head;null!=n;){for(var e=n.elt,t=null,i=e.bodylisteners.head;null!=i;){var r=i.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;t=i,i=i.next}var l,s=e.bodylisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener:(l=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=l.next,l.next=null),l.elt=this;var a=l;null==t?(a.next=s.head,s.head=a):(a.next=t.next,t.next=a),s.pushmod=s.modified=!0,s.length++;for(var o=e.cbsets.head;null!=o;){o.elt.zip_bodylisteners=!0,o=o.next}n=n.next}},removedFromSpace:function(){for(var n=this.options.includes.head;null!=n;){var e=n.elt;e.bodylisteners.remove(this);for(var t=e.cbsets.head;null!=t;){t.elt.zip_bodylisteners=!0,t=t.next}n=n.next}this.options.handler=null},cbtype_change:function(n,e,t){this.removedFromSpace();var i=this.options;if(e)if(t){for(var r=null,l=i.includes.head;null!=l;){var s=l.elt;if(n.id<s.id)break;r=l,l=l.next}var a=i.includes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(p=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=p.next,p.next=null),p.elt=n;var o=p;null==r?(o.next=a.head,a.head=o):(o.next=r.next,r.next=o),a.pushmod=a.modified=!0,a.length++}else i.includes.remove(n);else if(t){for(r=null,l=i.excludes.head;null!=l;){s=l.elt;if(n.id<s.id)break;r=l,l=l.next}var p;a=i.excludes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(p=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=p.next,p.next=null),p.elt=n;o=p;null==r?(o.next=a.head,a.head=o):(o.next=r.next,r.next=o),a.pushmod=a.modified=!0,a.length++}else i.excludes.remove(n);this.addedToSpace()},invalidate_precedence:function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},swapEvent:function(n){if(2!=n&&3!=n)throw haxe_Exception.thrown("Error: BodyListener event must be either WAKE or SLEEP only");this.removedFromSpace(),this.event=n,this.addedToSpace()},__class__:zpp_$nape_callbacks_ZPP_$BodyListener});var zpp_$nape_callbacks_ZPP_$ConstraintListener=function(n,e,t){this.handler=null,this.options=null,this.outer_zn=null,zpp_$nape_callbacks_ZPP_$Listener.call(this),this.event=e,this.handler=t,this.constraint=this,this.type=1,this.options=n.zpp_inner};t["zpp_nape.callbacks.ZPP_ConstraintListener"]=zpp_$nape_callbacks_ZPP_$ConstraintListener,zpp_$nape_callbacks_ZPP_$ConstraintListener.__name__="zpp_nape.callbacks.ZPP_ConstraintListener",zpp_$nape_callbacks_ZPP_$ConstraintListener.__super__=zpp_$nape_callbacks_ZPP_$Listener,zpp_$nape_callbacks_ZPP_$ConstraintListener.prototype=$extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{immutable_options:function(){if(null!=this.space&&this.space.midstep)throw haxe_Exception.thrown("Error: Cannot change listener type options during space.step()")},addedToSpace:function(){this.options.handler=$bind(this,this.cbtype_change);for(var n=this.options.includes.head;null!=n;){for(var e=n.elt,t=null,i=e.conlisteners.head;null!=i;){var r=i.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;t=i,i=i.next}var l,s=e.conlisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener:(l=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=l.next,l.next=null),l.elt=this;var a=l;null==t?(a.next=s.head,s.head=a):(a.next=t.next,t.next=a),s.pushmod=s.modified=!0,s.length++;for(var o=e.cbsets.head;null!=o;){o.elt.zip_conlisteners=!0,o=o.next}n=n.next}},removedFromSpace:function(){for(var n=this.options.includes.head;null!=n;){var e=n.elt;e.conlisteners.remove(this);for(var t=e.cbsets.head;null!=t;){t.elt.zip_conlisteners=!0,t=t.next}n=n.next}this.options.handler=null},cbtype_change:function(n,e,t){this.removedFromSpace();var i=this.options;if(e)if(t){for(var r=null,l=i.includes.head;null!=l;){var s=l.elt;if(n.id<s.id)break;r=l,l=l.next}var a=i.includes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(p=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=p.next,p.next=null),p.elt=n;var o=p;null==r?(o.next=a.head,a.head=o):(o.next=r.next,r.next=o),a.pushmod=a.modified=!0,a.length++}else i.includes.remove(n);else if(t){for(r=null,l=i.excludes.head;null!=l;){s=l.elt;if(n.id<s.id)break;r=l,l=l.next}var p;a=i.excludes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(p=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=p.next,p.next=null),p.elt=n;o=p;null==r?(o.next=a.head,a.head=o):(o.next=r.next,r.next=o),a.pushmod=a.modified=!0,a.length++}else i.excludes.remove(n);this.addedToSpace()},invalidate_precedence:function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},swapEvent:function(n){if(2!=n&&3!=n&&4!=n)throw haxe_Exception.thrown("Error: ConstraintListener event must be either WAKE or SLEEP only");this.removedFromSpace(),this.event=n,this.addedToSpace()},__class__:zpp_$nape_callbacks_ZPP_$ConstraintListener});var zpp_$nape_util_ZNPList_$ZPP_$CbType=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_CbType"]=zpp_$nape_util_ZNPList_$ZPP_$CbType,zpp_$nape_util_ZNPList_$ZPP_$CbType.__name__="zpp_nape.util.ZNPList_ZPP_CbType",zpp_$nape_util_ZNPList_$ZPP_$CbType.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(e=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(e=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(t=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(t=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$CbType};var zpp_$nape_callbacks_ZPP_$InteractionListener=function(n,e,t,i){this.handlerp=null,this.pure=!1,this.allowSleepingCallbacks=!1,this.handleri=null,this.options2=null,this.options1=null,this.itype=0,this.outer_znp=null,this.outer_zni=null,zpp_$nape_callbacks_ZPP_$Listener.call(this),this.type=i,this.interaction=this,this.event=t,this.options1=n.zpp_inner,this.options2=e.zpp_inner,this.allowSleepingCallbacks=!1};t["zpp_nape.callbacks.ZPP_InteractionListener"]=zpp_$nape_callbacks_ZPP_$InteractionListener,zpp_$nape_callbacks_ZPP_$InteractionListener.__name__="zpp_nape.callbacks.ZPP_InteractionListener",zpp_$nape_callbacks_ZPP_$InteractionListener.__super__=zpp_$nape_callbacks_ZPP_$Listener,zpp_$nape_callbacks_ZPP_$InteractionListener.prototype=$extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{setInteractionType:function(n){this.itype=n},wake:function(){for(var n=this.options1.includes.head,e=this.options2.includes.head;null!=n&&null!=e;){var t=n.elt,i=e.elt;if(t==i){for(var r=t.interactors.head;null!=r;){r.elt.wake(),r=r.next}n=n.next,e=e.next}else if(t.id<i.id){for(var l=t.interactors.head;null!=l;){l.elt.wake(),l=l.next}n=n.next}else{for(var s=i.interactors.head;null!=s;){s.elt.wake(),s=s.next}e=e.next}}for(;null!=n;){for(r=n.elt.interactors.head;null!=r;){r.elt.wake(),r=r.next}n=n.next}for(;null!=e;){for(r=e.elt.interactors.head;null!=r;){r.elt.wake(),r=r.next}e=e.next}},CbSetset:function(n,e,t){for(var i=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet,r=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet,l=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet,s=n.head,a=e.head;null!=s&&null!=a;){var o=s.elt,p=a.elt;if(o==p)null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?f=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(f=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=f.next,f.next=null),f.elt=o,(x=f).next=l.head,l.head=x,l.modified=!0,l.length++,s=s.next,a=a.next;else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(o,p)){var h;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?h=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(h=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=h.next,h.next=null),h.elt=o;var u=h;u.next=i.head,i.head=u,i.modified=!0,i.length++,s=s.next}else{var _;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?_=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(_=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=_.next,_.next=null),_.elt=p;var c=_;c.next=r.head,r.head=c,r.modified=!0,r.length++,a=a.next}}for(;null!=s;){var d=s.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?f=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(f=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=f.next,f.next=null),f.elt=d,(x=f).next=i.head,i.head=x,i.modified=!0,i.length++,s=s.next}for(;null!=a;){var f,x;d=a.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?f=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(f=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=f.next,f.next=null),f.elt=d,(x=f).next=r.head,r.head=x,r.modified=!0,r.length++,a=a.next}for(;null!=i.head;)for(var b=i.pop_unsafe(),y=e.head;null!=y;){t(b,y.elt),y=y.next}for(;null!=r.head;)for(b=r.pop_unsafe(),y=l.head;null!=y;){t(b,y.elt),y=y.next}for(;null!=l.head;){t(b=l.pop_unsafe(),b);for(y=l.head;null!=y;){t(b,y.elt),y=y.next}}},CbTypeset:function(n,e,t){for(var i=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType,r=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType,l=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType,s=n.head,a=e.head;null!=s&&null!=a;){var o=s.elt,p=a.elt;if(o==p)null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?f=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(f=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=f.next,f.next=null),f.elt=o,(x=f).next=l.head,l.head=x,l.modified=!0,l.length++,s=s.next,a=a.next;else if(o.id<p.id){var h;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?h=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(h=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=h.next,h.next=null),h.elt=o;var u=h;u.next=i.head,i.head=u,i.modified=!0,i.length++,s=s.next}else{var _;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?_=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(_=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=_.next,_.next=null),_.elt=p;var c=_;c.next=r.head,r.head=c,r.modified=!0,r.length++,a=a.next}}for(;null!=s;){var d=s.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?f=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(f=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=f.next,f.next=null),f.elt=d,(x=f).next=i.head,i.head=x,i.modified=!0,i.length++,s=s.next}for(;null!=a;){var f,x;d=a.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?f=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(f=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=f.next,f.next=null),f.elt=d,(x=f).next=r.head,r.head=x,r.modified=!0,r.length++,a=a.next}for(;null!=i.head;)for(var b=i.pop_unsafe(),y=e.head;null!=y;){t(b,y.elt),y=y.next}for(;null!=r.head;)for(b=r.pop_unsafe(),y=l.head;null!=y;){t(b,y.elt),y=y.next}for(;null!=l.head;){t(b=l.pop_unsafe(),b);for(y=l.head;null!=y;){t(b,y.elt),y=y.next}}},with_uniquesets:function(n){var e,t=this;null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.lt=zpp_$nape_callbacks_ZPP_$CbSetPair.setlt;for(var i=this.options2.includes,r=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType,l=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType,s=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType,a=this.options1.includes.head,o=i.head;null!=a&&null!=o;){if((C=a.elt)==(E=o.elt))null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?gn=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(gn=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=gn.next,gn.next=null),gn.elt=C,(U=gn).next=s.head,s.head=U,s.modified=!0,s.length++,a=a.next,o=o.next;else if(C.id<E.id){null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?M=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(M=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=M.next,M.next=null),M.elt=C,(T=M).next=r.head,r.head=T,r.modified=!0,r.length++,a=a.next}else{null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?k=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(k=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=k.next,k.next=null),k.elt=E,(D=k).next=l.head,l.head=D,l.modified=!0,l.length++,o=o.next}}for(;null!=a;){var p=a.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?gn=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(gn=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=gn.next,gn.next=null),gn.elt=p,(U=gn).next=r.head,r.head=U,r.modified=!0,r.length++,a=a.next}for(;null!=o;){var p=o.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?gn=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(gn=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=gn.next,gn.next=null),gn.elt=p,(U=gn).next=l.head,l.head=U,l.modified=!0,l.length++,o=o.next}for(;null!=r.head;)for(var h=r.pop_unsafe(),u=i.head;null!=u;){var _=(N=u.elt).cbsets,c=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet,d=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet,f=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet;for(a=h.cbsets.head,o=_.head;null!=a&&null!=o;){if((C=a.elt)==(E=o.elt))null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?gn=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(gn=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=gn.next,gn.next=null),gn.elt=C,(U=gn).next=f.head,f.head=U,f.modified=!0,f.length++,a=a.next,o=o.next;else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(C,E)){null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?M=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(M=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=M.next,M.next=null),M.elt=C,(T=M).next=c.head,c.head=T,c.modified=!0,c.length++,a=a.next}else{null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?k=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(k=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=k.next,k.next=null),k.elt=E,(D=k).next=d.head,d.head=D,d.modified=!0,d.length++,o=o.next}}for(;null!=a;){p=a.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?S=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(S=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=S.next,S.next=null),S.elt=p,(A=S).next=c.head,c.head=A,c.modified=!0,c.length++,a=a.next}for(;null!=o;){var x=o.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?P=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(P=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=P.next,P.next=null),P.elt=x,(V=P).next=d.head,d.head=V,d.modified=!0,d.length++,o=o.next}for(;null!=c.head;)for(var b=c.pop_unsafe(),y=_.head;null!=y;){var v=y.elt;if(b.validate(),v.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(b,v,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?I=new zpp_$nape_callbacks_ZPP_$CbSetPair:(I=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=I.next,I.next=null),I.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(b,v)?(I.a=b,I.b=v):(I.a=v,I.b=b),e.try_insert(I);y=y.next}for(;null!=d.head;)for(var m=d.pop_unsafe(),g=f.head;null!=g;){var z=g.elt;if(m.validate(),z.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(m,z,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?F=new zpp_$nape_callbacks_ZPP_$CbSetPair:(F=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=F.next,F.next=null),F.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(m,z)?(F.a=m,F.b=z):(F.a=z,F.b=m),e.try_insert(F);g=g.next}for(;null!=f.head;){if((R=f.pop_unsafe()).validate(),R.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(R,R,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?L=new zpp_$nape_callbacks_ZPP_$CbSetPair:(L=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=L.next,L.next=null),L.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,R),L.a=R,L.b=R,e.try_insert(L);for(var w=f.head;null!=w;){var O=w.elt;if(R.validate(),O.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(R,O,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?B=new zpp_$nape_callbacks_ZPP_$CbSetPair:(B=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=B.next,B.next=null),B.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,O)?(B.a=R,B.b=O):(B.a=O,B.b=R),e.try_insert(B);w=w.next}}u=u.next}for(;null!=l.head;)for(h=l.pop_unsafe(),u=s.head;null!=u;){for(i=(N=u.elt).cbsets,r=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet,d=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet,f=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet,a=h.cbsets.head,o=i.head;null!=a&&null!=o;){if((C=a.elt)==(E=o.elt))null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?gn=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(gn=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=gn.next,gn.next=null),gn.elt=C,(U=gn).next=f.head,f.head=U,f.modified=!0,f.length++,a=a.next,o=o.next;else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(C,E)){null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?M=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(M=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=M.next,M.next=null),M.elt=C,(T=M).next=r.head,r.head=T,r.modified=!0,r.length++,a=a.next}else{null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?k=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(k=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=k.next,k.next=null),k.elt=E,(D=k).next=d.head,d.head=D,d.modified=!0,d.length++,o=o.next}}for(;null!=a;){p=a.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?S=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(S=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=S.next,S.next=null),S.elt=p,(A=S).next=r.head,r.head=A,r.modified=!0,r.length++,a=a.next}for(;null!=o;){x=o.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?P=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(P=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=P.next,P.next=null),P.elt=x,(V=P).next=d.head,d.head=V,d.modified=!0,d.length++,o=o.next}for(;null!=r.head;)for(b=r.pop_unsafe(),y=i.head;null!=y;){v=y.elt;if(b.validate(),v.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(b,v,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?I=new zpp_$nape_callbacks_ZPP_$CbSetPair:(I=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=I.next,I.next=null),I.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(b,v)?(I.a=b,I.b=v):(I.a=v,I.b=b),e.try_insert(I);y=y.next}for(;null!=d.head;)for(m=d.pop_unsafe(),g=f.head;null!=g;){z=g.elt;if(m.validate(),z.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(m,z,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?F=new zpp_$nape_callbacks_ZPP_$CbSetPair:(F=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=F.next,F.next=null),F.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(m,z)?(F.a=m,F.b=z):(F.a=z,F.b=m),e.try_insert(F);g=g.next}for(;null!=f.head;){if((R=f.pop_unsafe()).validate(),R.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(R,R,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?L=new zpp_$nape_callbacks_ZPP_$CbSetPair:(L=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=L.next,L.next=null),L.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,R),L.a=R,L.b=R,e.try_insert(L);for(w=f.head;null!=w;){O=w.elt;if(R.validate(),O.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(R,O,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?B=new zpp_$nape_callbacks_ZPP_$CbSetPair:(B=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=B.next,B.next=null),B.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,O)?(B.a=R,B.b=O):(B.a=O,B.b=R),e.try_insert(B);w=w.next}}u=u.next}for(;null!=s.head;){for(i=(h=s.pop_unsafe()).cbsets,r=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet,l=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet,f=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet,a=h.cbsets.head,o=i.head;null!=a&&null!=o;){var C,E,U;if((C=a.elt)==(E=o.elt))null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?gn=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(gn=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=gn.next,gn.next=null),gn.elt=C,(U=gn).next=f.head,f.head=U,f.modified=!0,f.length++,a=a.next,o=o.next;else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(C,E)){var M,T;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?M=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(M=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=M.next,M.next=null),M.elt=C,(T=M).next=r.head,r.head=T,r.modified=!0,r.length++,a=a.next}else{var k,D;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?k=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(k=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=k.next,k.next=null),k.elt=E,(D=k).next=l.head,l.head=D,l.modified=!0,l.length++,o=o.next}}for(;null!=a;){var S,A;p=a.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?S=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(S=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=S.next,S.next=null),S.elt=p,(A=S).next=r.head,r.head=A,r.modified=!0,r.length++,a=a.next}for(;null!=o;){var P,V;x=o.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?P=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(P=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=P.next,P.next=null),P.elt=x,(V=P).next=l.head,l.head=V,l.modified=!0,l.length++,o=o.next}for(;null!=r.head;)for(b=r.pop_unsafe(),u=i.head;null!=u;){var I,N=u.elt;if(b.validate(),N.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(b,N,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?I=new zpp_$nape_callbacks_ZPP_$CbSetPair:(I=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=I.next,I.next=null),I.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(b,N)?(I.a=b,I.b=N):(I.a=N,I.b=b),e.try_insert(I);u=u.next}for(;null!=l.head;)for(m=l.pop_unsafe(),y=f.head;null!=y;){var F;v=y.elt;if(m.validate(),v.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(m,v,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?F=new zpp_$nape_callbacks_ZPP_$CbSetPair:(F=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=F.next,F.next=null),F.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(m,v)?(F.a=m,F.b=v):(F.a=v,F.b=m),e.try_insert(F);y=y.next}for(;null!=f.head;){var R,L;if((R=f.pop_unsafe()).validate(),R.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(R,R,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?L=new zpp_$nape_callbacks_ZPP_$CbSetPair:(L=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=L.next,L.next=null),L.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,R),L.a=R,L.b=R,e.try_insert(L);for(g=f.head;null!=g;){var B;z=g.elt;if(R.validate(),z.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(R,z,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?B=new zpp_$nape_callbacks_ZPP_$CbSetPair:(B=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=B.next,B.next=null),B.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,z)?(B.a=R,B.b=z):(B.a=z,B.b=R),e.try_insert(B);g=g.next}}for(w=s.head;null!=w;){_=(O=w.elt).cbsets,c=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet,d=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet;for(var G=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet,j=h.cbsets.head,K=_.head;null!=j&&null!=K;){var W=j.elt,Y=K.elt;if(W==Y){var X;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?X=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(X=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=X.next,X.next=null),X.elt=W;var H=X;H.next=G.head,G.head=H,G.modified=!0,G.length++,j=j.next,K=K.next}else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(W,Y)){var Z;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?Z=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(Z=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=Z.next,Z.next=null),Z.elt=W;var q=Z;q.next=c.head,c.head=q,c.modified=!0,c.length++,j=j.next}else{var $;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?$=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:($=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=$.next,$.next=null),$.elt=Y;var Q=$;Q.next=d.head,d.head=Q,d.modified=!0,d.length++,K=K.next}}for(;null!=j;){var J,nn=j.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?J=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(J=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=J.next,J.next=null),J.elt=nn;var en=J;en.next=c.head,c.head=en,c.modified=!0,c.length++,j=j.next}for(;null!=K;){var tn,rn=K.elt;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool?tn=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet:(tn=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=tn.next,tn.next=null),tn.elt=rn;var ln=tn;ln.next=d.head,d.head=ln,d.modified=!0,d.length++,K=K.next}for(;null!=c.head;)for(var sn=c.pop_unsafe(),an=_.head;null!=an;){var on,pn=an.elt;if(sn.validate(),pn.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(sn,pn,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?on=new zpp_$nape_callbacks_ZPP_$CbSetPair:(on=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=on.next,on.next=null),on.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(sn,pn)?(on.a=sn,on.b=pn):(on.a=pn,on.b=sn),e.try_insert(on);an=an.next}for(;null!=d.head;)for(var hn=d.pop_unsafe(),un=G.head;null!=un;){var _n,cn=un.elt;if(hn.validate(),cn.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(hn,cn,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?_n=new zpp_$nape_callbacks_ZPP_$CbSetPair:(_n=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=_n.next,_n.next=null),_n.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(hn,cn)?(_n.a=hn,_n.b=cn):(_n.a=cn,_n.b=hn),e.try_insert(_n);un=un.next}for(;null!=G.head;){var dn,xn=G.pop_unsafe();if(xn.validate(),xn.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(xn,xn,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?dn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(dn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=dn.next,dn.next=null),dn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(xn,xn),dn.a=xn,dn.b=xn,e.try_insert(dn);for(var bn=G.head;null!=bn;){var yn,vn=bn.elt;if(xn.validate(),vn.validate(),zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(xn,vn,t))null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?yn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(yn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=yn.next,yn.next=null),yn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(xn,vn)?(yn.a=xn,yn.b=vn):(yn.a=vn,yn.b=xn),e.try_insert(yn);bn=bn.next}}w=w.next}}if(null!=e.parent){for(var mn=e.parent;null!=mn;)if(null!=mn.prev)mn=mn.prev;else if(null!=mn.next)mn=mn.next;else{var gn,zn=mn.data;n?t.space.freshListenerType(zn.a,zn.b):t.space.nullListenerType(zn.a,zn.b),(p=zn).a=p.b=null,p.listeners.clear(),p.next=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=p,null!=(gn=mn.parent)&&(mn==gn.prev?gn.prev=null:gn.next=null,mn.parent=null),(x=mn).data=null,x.lt=null,x.swapped=null,x.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=x,mn=gn}e.parent=null}(p=e).data=null,p.lt=null,p.swapped=null,p.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=p},with_union:function(n){for(var e=this.options1.includes.head,t=this.options2.includes.head;null!=e&&null!=t;){var i=e.elt,r=t.elt;i==r?(n(i),e=e.next,t=t.next):i.id<r.id?(n(i),e=e.next):(n(r),t=t.next)}for(;null!=e;)n(e.elt),e=e.next;for(;null!=t;)n(t.elt),t=t.next},addedToSpace:function(){for(var n=this,e=3==this.type,t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var r=t.elt,l=i.elt;if(r==l){for(var s=null,a=r.listeners.head;null!=a;){var o=a.elt;if(n.precedence>o.precedence||n.precedence==o.precedence&&n.id>o.id)break;s=a,a=a.next}var p=r.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?S=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(S=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=S.next,S.next=null),S.elt=n;var h=S;null==s?(h.next=p.head,p.head=h):(h.next=s.next,s.next=h),p.pushmod=p.modified=!0,p.length++;for(var u=r.cbsets.head;null!=u;){(D=u.elt).zip_listeners=!0,D.invalidate_pairs(),u=u.next}if(e)for(var _=r.interactors.head;null!=_;){_.elt.wake(),_=_.next}t=t.next,i=i.next}else if(r.id<l.id){for(var c=null,d=r.listeners.head;null!=d;){var f=d.elt;if(n.precedence>f.precedence||n.precedence==f.precedence&&n.id>f.id)break;c=d,d=d.next}var x,b=r.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?x=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(x=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=x.next,x.next=null),x.elt=n;var y=x;null==c?(y.next=b.head,b.head=y):(y.next=c.next,c.next=y),b.pushmod=b.modified=!0,b.length++;for(var v=r.cbsets.head;null!=v;){var m=v.elt;m.zip_listeners=!0,m.invalidate_pairs(),v=v.next}if(e)for(var g=r.interactors.head;null!=g;){g.elt.wake(),g=g.next}t=t.next}else{for(var z=null,w=l.listeners.head;null!=w;){var O=w.elt;if(n.precedence>O.precedence||n.precedence==O.precedence&&n.id>O.id)break;z=w,w=w.next}var C,E=l.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?C=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(C=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=C.next,C.next=null),C.elt=n;var U=C;null==z?(U.next=E.head,E.head=U):(U.next=z.next,z.next=U),E.pushmod=E.modified=!0,E.length++;for(var M=l.cbsets.head;null!=M;){var T=M.elt;T.zip_listeners=!0,T.invalidate_pairs(),M=M.next}if(e)for(var k=l.interactors.head;null!=k;){k.elt.wake(),k=k.next}i=i.next}}for(;null!=t;){for(s=null,a=(D=t.elt).listeners.head;null!=a;){o=a.elt;if(n.precedence>o.precedence||n.precedence==o.precedence&&n.id>o.id)break;s=a,a=a.next}p=D.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?S=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(S=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=S.next,S.next=null),S.elt=n;h=S;null==s?(h.next=p.head,p.head=h):(h.next=s.next,s.next=h),p.pushmod=p.modified=!0,p.length++;for(u=D.cbsets.head;null!=u;){(r=u.elt).zip_listeners=!0,r.invalidate_pairs(),u=u.next}if(e)for(_=D.interactors.head;null!=_;){_.elt.wake(),_=_.next}t=t.next}for(;null!=i;){var D;for(s=null,a=(D=i.elt).listeners.head;null!=a;){o=a.elt;if(n.precedence>o.precedence||n.precedence==o.precedence&&n.id>o.id)break;s=a,a=a.next}var S;p=D.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?S=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(S=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=S.next,S.next=null),S.elt=n;h=S;null==s?(h.next=p.head,p.head=h):(h.next=s.next,s.next=h),p.pushmod=p.modified=!0,p.length++;for(u=D.cbsets.head;null!=u;){(r=u.elt).zip_listeners=!0,r.invalidate_pairs(),u=u.next}if(e)for(_=D.interactors.head;null!=_;){_.elt.wake(),_=_.next}i=i.next}this.options1.handler=$bind(this,this.cbtype_change1),this.options2.handler=$bind(this,this.cbtype_change2),this.with_uniquesets(!0)},removedFromSpace:function(){var n=this;this.with_uniquesets(!1);for(var e=3==this.type,t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var r=t.elt,l=i.elt;if(r==l){r.listeners.remove(n);for(var s=r.cbsets.head;null!=s;){(d=s.elt).zip_listeners=!0,d.invalidate_pairs(),s=s.next}if(e)for(var a=r.interactors.head;null!=a;){a.elt.wake(),a=a.next}t=t.next,i=i.next}else if(r.id<l.id){r.listeners.remove(n);for(var o=r.cbsets.head;null!=o;){var p=o.elt;p.zip_listeners=!0,p.invalidate_pairs(),o=o.next}if(e)for(var h=r.interactors.head;null!=h;){h.elt.wake(),h=h.next}t=t.next}else{l.listeners.remove(n);for(var u=l.cbsets.head;null!=u;){var _=u.elt;_.zip_listeners=!0,_.invalidate_pairs(),u=u.next}if(e)for(var c=l.interactors.head;null!=c;){c.elt.wake(),c=c.next}i=i.next}}for(;null!=t;){(d=t.elt).listeners.remove(n);for(s=d.cbsets.head;null!=s;){(r=s.elt).zip_listeners=!0,r.invalidate_pairs(),s=s.next}if(e)for(a=d.interactors.head;null!=a;){a.elt.wake(),a=a.next}t=t.next}for(;null!=i;){var d;(d=i.elt).listeners.remove(n);for(s=d.cbsets.head;null!=s;){(r=s.elt).zip_listeners=!0,r.invalidate_pairs(),s=s.next}if(e)for(a=d.interactors.head;null!=a;){a.elt.wake(),a=a.next}i=i.next}this.options1.handler=null,this.options2.handler=null},invalidate_precedence:function(){var n=this;if(null!=this.space){for(var e=3==this.type,t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){if((I=t.elt)==(F=i.elt)){I.listeners.remove(n);for(var r=I.cbsets.head;null!=r;){(V=r.elt).zip_listeners=!0,V.invalidate_pairs(),r=r.next}for(var l=null,s=I.listeners.head;null!=s;){var a=s.elt;if(n.precedence>a.precedence||n.precedence==a.precedence&&n.id>a.id)break;l=s,s=s.next}var o=I.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?N=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(N=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=N.next,N.next=null),N.elt=n;var p=N;null==l?(p.next=o.head,o.head=p):(p.next=l.next,l.next=p),o.pushmod=o.modified=!0,o.length++;for(var h=I.cbsets.head;null!=h;){var u=h.elt;u.zip_listeners=!0,u.invalidate_pairs(),h=h.next}if(e)for(var _=I.interactors.head;null!=_;){_.elt.wake(),_=_.next}t=t.next,i=i.next}else if(I.id<F.id){I.listeners.remove(n);for(var c=I.cbsets.head;null!=c;){var d=c.elt;d.zip_listeners=!0,d.invalidate_pairs(),c=c.next}for(var f=null,x=I.listeners.head;null!=x;){var b=x.elt;if(n.precedence>b.precedence||n.precedence==b.precedence&&n.id>b.id)break;f=x,x=x.next}var y,v=I.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?y=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(y=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=y.next,y.next=null),y.elt=n;var m=y;null==f?(m.next=v.head,v.head=m):(m.next=f.next,f.next=m),v.pushmod=v.modified=!0,v.length++;for(var g=I.cbsets.head;null!=g;){var z=g.elt;z.zip_listeners=!0,z.invalidate_pairs(),g=g.next}if(e)for(var w=I.interactors.head;null!=w;){w.elt.wake(),w=w.next}t=t.next}else{F.listeners.remove(n);for(var O=F.cbsets.head;null!=O;){var C=O.elt;C.zip_listeners=!0,C.invalidate_pairs(),O=O.next}for(var E=null,U=F.listeners.head;null!=U;){var M=U.elt;if(n.precedence>M.precedence||n.precedence==M.precedence&&n.id>M.id)break;E=U,U=U.next}var T,k=F.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?T=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(T=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=T.next,T.next=null),T.elt=n;var D=T;null==E?(D.next=k.head,k.head=D):(D.next=E.next,E.next=D),k.pushmod=k.modified=!0,k.length++;for(var S=F.cbsets.head;null!=S;){var A=S.elt;A.zip_listeners=!0,A.invalidate_pairs(),S=S.next}if(e)for(var P=F.interactors.head;null!=P;){P.elt.wake(),P=P.next}i=i.next}}for(;null!=t;){(V=t.elt).listeners.remove(n);for(r=V.cbsets.head;null!=r;){(I=r.elt).zip_listeners=!0,I.invalidate_pairs(),r=r.next}for(l=null,s=V.listeners.head;null!=s;){a=s.elt;if(n.precedence>a.precedence||n.precedence==a.precedence&&n.id>a.id)break;l=s,s=s.next}o=V.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?N=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(N=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=N.next,N.next=null),N.elt=n;p=N;null==l?(p.next=o.head,o.head=p):(p.next=l.next,l.next=p),o.pushmod=o.modified=!0,o.length++;for(h=V.cbsets.head;null!=h;){(F=h.elt).zip_listeners=!0,F.invalidate_pairs(),h=h.next}if(e)for(_=V.interactors.head;null!=_;){_.elt.wake(),_=_.next}t=t.next}for(;null!=i;){var V;(V=i.elt).listeners.remove(n);for(r=V.cbsets.head;null!=r;){var I;(I=r.elt).zip_listeners=!0,I.invalidate_pairs(),r=r.next}for(l=null,s=V.listeners.head;null!=s;){a=s.elt;if(n.precedence>a.precedence||n.precedence==a.precedence&&n.id>a.id)break;l=s,s=s.next}var N;o=V.listeners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?N=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(N=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=N.next,N.next=null),N.elt=n;p=N;null==l?(p.next=o.head,o.head=p):(p.next=l.next,l.next=p),o.pushmod=o.modified=!0,o.length++;for(h=V.cbsets.head;null!=h;){var F;(F=h.elt).zip_listeners=!0,F.invalidate_pairs(),h=h.next}if(e)for(_=V.interactors.head;null!=_;){_.elt.wake(),_=_.next}i=i.next}}},cbtype_change1:function(n,e,t){this.cbtype_change(this.options1,n,e,t)},cbtype_change2:function(n,e,t){this.cbtype_change(this.options2,n,e,t)},cbtype_change:function(n,e,t,i){if(this.removedFromSpace(),t)if(i){for(var r=null,l=n.includes.head;null!=l;){var s=l.elt;if(e.id<s.id)break;r=l,l=l.next}var a=n.includes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(p=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=p.next,p.next=null),p.elt=e;var o=p;null==r?(o.next=a.head,a.head=o):(o.next=r.next,r.next=o),a.pushmod=a.modified=!0,a.length++}else n.includes.remove(e);else if(i){for(r=null,l=n.excludes.head;null!=l;){s=l.elt;if(e.id<s.id)break;r=l,l=l.next}var p;a=n.excludes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(p=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=p.next,p.next=null),p.elt=e;o=p;null==r?(o.next=a.head,a.head=o):(o.next=r.next,r.next=o),a.pushmod=a.modified=!0,a.length++}else n.excludes.remove(e);this.addedToSpace()},swapEvent:function(n){if(3==this.type)throw haxe_Exception.thrown("Error: PreListener event can only be PRE");if(0!=n&&1!=n&&6!=n)throw haxe_Exception.thrown("Error: InteractionListener event must be either BEGIN, END, ONGOING");this.removedFromSpace(),this.event=n,this.addedToSpace()},__class__:zpp_$nape_callbacks_ZPP_$InteractionListener});var zpp_$nape_callbacks_ZPP_$OptionType=function(){this.wrap_excludes=null,this.wrap_includes=null,this.excludes=null,this.includes=null,this.handler=null,this.outer=null,this.includes=new zpp_$nape_util_ZNPList_$ZPP_$CbType,this.excludes=new zpp_$nape_util_ZNPList_$ZPP_$CbType};t["zpp_nape.callbacks.ZPP_OptionType"]=zpp_$nape_callbacks_ZPP_$OptionType,zpp_$nape_callbacks_ZPP_$OptionType.__name__="zpp_nape.callbacks.ZPP_OptionType",zpp_$nape_callbacks_ZPP_$OptionType.argument=function(n){return null==n?new nape_callbacks_OptionType:n instanceof nape_callbacks_OptionType?n:(new nape_callbacks_OptionType).including(n)},zpp_$nape_callbacks_ZPP_$OptionType.prototype={setup_includes:function(){this.wrap_includes=zpp_$nape_util_ZPP_$CbTypeList.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=zpp_$nape_util_ZPP_$CbTypeList.get(this.excludes,!0)},excluded:function(n){return this.nonemptyintersection(n,this.excludes)},included:function(n){return this.nonemptyintersection(n,this.includes)},compatible:function(n){return!!this.nonemptyintersection(n,this.includes)&&!this.nonemptyintersection(n,this.excludes)},nonemptyintersection:function(n,e){for(var t=!1,i=n.head,r=e.head;null!=r&&null!=i;){var l=r.elt,s=i.elt;if(l==s){t=!0;break}l.id<s.id?r=r.next:i=i.next}return t},effect_change:function(n,e,t){if(e)if(t){for(var i=null,r=this.includes.head;null!=r;){var l=r.elt;if(n.id<l.id)break;i=r,r=r.next}var s=this.includes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(o=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=o.next,o.next=null),o.elt=n;var a=o;null==i?(a.next=s.head,s.head=a):(a.next=i.next,i.next=a),s.pushmod=s.modified=!0,s.length++}else this.includes.remove(n);else if(t){for(i=null,r=this.excludes.head;null!=r;){l=r.elt;if(n.id<l.id)break;i=r,r=r.next}var o;s=this.excludes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(o=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=o.next,o.next=null),o.elt=n;a=o;null==i?(a.next=s.head,s.head=a):(a.next=i.next,i.next=a),s.pushmod=s.modified=!0,s.length++}else this.excludes.remove(n)},append_type:function(n,e){if(n==this.includes){if(!this.includes.has(e))if(this.excludes.has(e))null!=this.handler?this.handler(e,!1,!1):this.excludes.remove(e);else if(null!=this.handler)this.handler(e,!0,!0);else{for(var t=null,i=this.includes.head;null!=i;){var r=i.elt;if(e.id<r.id)break;t=i,i=i.next}var l=this.includes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?a=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(a=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=a.next,a.next=null),a.elt=e;var s=a;null==t?(s.next=l.head,l.head=s):(s.next=t.next,t.next=s),l.pushmod=l.modified=!0,l.length++}}else if(!this.excludes.has(e))if(this.includes.has(e))null!=this.handler?this.handler(e,!0,!1):this.includes.remove(e);else if(null!=this.handler)this.handler(e,!1,!0);else{for(t=null,i=this.excludes.head;null!=i;){r=i.elt;if(e.id<r.id)break;t=i,i=i.next}var a;l=this.excludes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?a=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(a=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=a.next,a.next=null),a.elt=e;s=a;null==t?(s.next=l.head,l.head=s):(s.next=t.next,t.next=s),l.pushmod=l.modified=!0,l.length++}},set:function(n){if(n!=this){for(;null!=this.includes.head;)this.append_type(this.excludes,this.includes.head.elt);for(;null!=this.excludes.head;)this.append_type(this.includes,this.excludes.head.elt);for(var e=n.excludes.head;null!=e;){var t=e.elt;this.append_type(this.excludes,t),e=e.next}for(e=n.includes.head;null!=e;){t=e.elt;this.append_type(this.includes,t),e=e.next}}return this},append:function(n,e){if(null==e)throw haxe_Exception.thrown("Error: Cannot append null, only CbType and CbType list values");if(e instanceof nape_callbacks_CbType){var t=e;this.append_type(n,t.zpp_inner)}else if(e instanceof nape_callbacks_CbTypeList){(a=e).zpp_inner.valmod();for(var i=nape_callbacks_CbTypeIterator.get(a);;){i.zpp_inner.zpp_inner.valmod();var r=i.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var l,s=r.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<s?l=!0:(i.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=i,i.zpp_inner=null,l=!1),!l)break;i.zpp_critical=!1;t=i.zpp_inner.at(i.zpp_i++);this.append_type(n,t.zpp_inner)}}else{if(!(e instanceof Array))throw haxe_Exception.thrown("Error: Cannot append non-CbType or CbType list value");var a=e;for(i=0;i<a.length;){t=a[i];if(++i,!(t instanceof nape_callbacks_CbType))throw haxe_Exception.thrown("Error: Cannot append non-CbType or CbType list value");var o=t;this.append_type(n,o.zpp_inner)}}},__class__:zpp_$nape_callbacks_ZPP_$OptionType};var zpp_$nape_constraint_ZPP_$Constraint=function(){this.pre_dt=0,this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.__velocity=!1,this.ignore=!1,this.component=null,this.removeOnBreak=!1,this.breakUnderError=!1,this.breakUnderForce=!1,this.maxError=0,this.maxForce=0,this.damping=0,this.frequency=0,this.stiff=!1,this.active=!1,this.space=null,this.compound=null,this.userData=null,this.id=0,this.outer=null,this.__velocity=!1,this.id=zpp_$nape_ZPP_$ID.Constraint(),this.stiff=!0,this.active=!0,this.ignore=!1,this.frequency=10,this.damping=1,this.maxForce=1/0,this.maxError=1/0,this.breakUnderForce=!1,this.removeOnBreak=!0,this.pre_dt=-1,this.cbTypes=new zpp_$nape_util_ZNPList_$ZPP_$CbType};t["zpp_nape.constraint.ZPP_Constraint"]=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$Constraint.__name__="zpp_nape.constraint.ZPP_Constraint",zpp_$nape_constraint_ZPP_$Constraint.prototype={clear:function(){},immutable_midstep:function(n){if(null!=this.space&&this.space.midstep)throw haxe_Exception.thrown("Error: Constraint::"+n+" cannot be set during space step()")},setupcbTypes:function(){this.wrap_cbTypes=zpp_$nape_util_ZPP_$CbTypeList.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$bind(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$bind(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0,this.wrap_cbTypes.zpp_inner._modifiable=$bind(this,this.immutable_cbTypes)},immutable_cbTypes:function(){this.immutable_midstep("Constraint::cbTypes")},wrap_cbTypes_subber:function(n){var e=n.zpp_inner;this.cbTypes.has(e)&&(null!=this.space&&(this.dealloc_cbSet(),e.constraints.remove(this)),this.cbTypes.remove(e),null!=this.space&&(this.alloc_cbSet(),this.wake()))},wrap_cbTypes_adder:function(n){return this.insert_cbtype(n.zpp_inner),!1},insert_cbtype:function(n){if(!this.cbTypes.has(n)){null!=this.space&&(this.dealloc_cbSet(),n.constraints.add(this));for(var e=null,t=this.cbTypes.head;null!=t;){var i=t.elt;if(n.id<i.id)break;e=t,t=t.next}var r,l=this.cbTypes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?r=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(r=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=r.next,r.next=null),r.elt=n;var s=r;null==e?(s.next=l.head,l.head=s):(s.next=e.next,e.next=s),l.pushmod=l.modified=!0,l.length++,null!=this.space&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){null!=(this.cbSet=this.space.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.constraints.add(this))},dealloc_cbSet:function(){if(null!=this.cbSet){if(this.cbSet.constraints.remove(this),0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var n=this.cbSet;for(n.listeners.clear(),n.zip_listeners=!0,n.bodylisteners.clear(),n.zip_bodylisteners=!0,n.conlisteners.clear(),n.zip_conlisteners=!0;null!=n.cbTypes.head;){n.cbTypes.pop_unsafe().cbsets.remove(n)}n.next=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=n}this.cbSet=null}},activate:function(){null!=this.space&&this.activeInSpace()},deactivate:function(){null!=this.space&&this.inactiveOrOutSpace()},addedToSpace:function(){this.active&&this.activeInSpace(),this.activeBodies();for(var n=this.cbTypes.head;null!=n;){n.elt.constraints.add(this),n=n.next}},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace(),this.inactiveBodies();for(var n=this.cbTypes.head;null!=n;){n.elt.constraints.remove(this),n=n.next}},activeInSpace:function(){this.alloc_cbSet(),null==zpp_$nape_space_ZPP_$Component.zpp_pool?this.component=new zpp_$nape_space_ZPP_$Component:(this.component=zpp_$nape_space_ZPP_$Component.zpp_pool,zpp_$nape_space_ZPP_$Component.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!1,this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var n=this.component;n.body=null,n.constraint=null,n.next=zpp_$nape_space_ZPP_$Component.zpp_pool,zpp_$nape_space_ZPP_$Component.zpp_pool=n,this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},validate:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(n,e){return!1},broken:function(){},warmStart:function(){},preStep:function(n){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},wake:function(){null!=this.space&&this.space.wake_constraint(this)},draw:function(n){},copy:function(n,e){return null},copyto:function(n){var e=this.outer;null==e.zpp_inner.wrap_cbTypes&&e.zpp_inner.setupcbTypes(),(i=e.zpp_inner.wrap_cbTypes).zpp_inner.valmod();for(var t=nape_callbacks_CbTypeIterator.get(i);;){var i;t.zpp_inner.zpp_inner.valmod(),(i=t.zpp_inner).zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var r,l=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<l?r=!0:(t.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=t,t.zpp_inner=null,r=!1),!r)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);null==n.zpp_inner.wrap_cbTypes&&n.zpp_inner.setupcbTypes();var a=n.zpp_inner.wrap_cbTypes;a.zpp_inner.reverse_flag?a.push(s):a.unshift(s)}n.zpp_inner.removeOnBreak=e.zpp_inner.removeOnBreak;var o=e.zpp_inner.breakUnderError;n.zpp_inner.breakUnderError!=o&&(n.zpp_inner.breakUnderError=o,n.zpp_inner.wake());var p=e.zpp_inner.breakUnderForce;n.zpp_inner.breakUnderForce!=p&&(n.zpp_inner.breakUnderForce=p,n.zpp_inner.wake());var h=e.zpp_inner.maxError;if(h!=h)throw haxe_Exception.thrown("Error: Constraint::maxError cannot be NaN");if(h<0)throw haxe_Exception.thrown("Error: Constraint::maxError must be >=0");n.zpp_inner.maxError!=h&&(n.zpp_inner.maxError=h,n.zpp_inner.wake());var u=e.zpp_inner.maxForce;if(u!=u)throw haxe_Exception.thrown("Error: Constraint::maxForce cannot be NaN");if(u<0)throw haxe_Exception.thrown("Error: Constraint::maxForce must be >=0");n.zpp_inner.maxForce!=u&&(n.zpp_inner.maxForce=u,n.zpp_inner.wake());var _=e.zpp_inner.damping;if(_!=_)throw haxe_Exception.thrown("Error: Constraint::Damping cannot be Nan");if(_<0)throw haxe_Exception.thrown("Error: Constraint::Damping must be >=0");n.zpp_inner.damping!=_&&(n.zpp_inner.damping=_,n.zpp_inner.stiff||n.zpp_inner.wake());var c=e.zpp_inner.frequency;if(c!=c)throw haxe_Exception.thrown("Error: Constraint::Frequency cannot be NaN");if(c<=0)throw haxe_Exception.thrown("Error: Constraint::Frequency must be >0");n.zpp_inner.frequency!=c&&(n.zpp_inner.frequency=c,n.zpp_inner.stiff||n.zpp_inner.wake());var d=e.zpp_inner.stiff;n.zpp_inner.stiff!=d&&(n.zpp_inner.stiff=d,n.zpp_inner.wake());var f=e.zpp_inner.ignore;n.zpp_inner.ignore!=f&&(n.zpp_inner.ignore=f,n.zpp_inner.wake());var x=e.zpp_inner.active;n.zpp_inner.active!=x&&(null!=n.zpp_inner.component&&(n.zpp_inner.component.woken=!1),n.zpp_inner.clearcache(),x?(n.zpp_inner.active=x,n.zpp_inner.activate(),null!=n.zpp_inner.space&&(null!=n.zpp_inner.component&&(n.zpp_inner.component.sleeping=!0),n.zpp_inner.space.wake_constraint(n.zpp_inner,!0))):(null!=n.zpp_inner.space&&(n.zpp_inner.wake(),n.zpp_inner.space.live_constraints.remove(n.zpp_inner)),n.zpp_inner.active=x,n.zpp_inner.deactivate()))},__class__:zpp_$nape_constraint_ZPP_$Constraint};var zpp_$nape_constraint_ZPP_$AngleJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.scale=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=0,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.ratio=1,this.jAcc=0,this.slack=!1,this.jMax=1/0,this.stepped=!1};t["zpp_nape.constraint.ZPP_AngleJoint"]=zpp_$nape_constraint_ZPP_$AngleJoint,zpp_$nape_constraint_ZPP_$AngleJoint.__name__="zpp_nape.constraint.ZPP_AngleJoint",zpp_$nape_constraint_ZPP_$AngleJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$AngleJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{is_slack:function(){var n,e=this.ratio*this.b2.rot-this.b1.rot;return this.equal?(e-=this.jointMax,n=!1,this.scale=1):e<this.jointMin?(e=this.jointMin-e,this.scale=-1,n=!1):e>this.jointMax?(e-=this.jointMax,this.scale=1,n=!1):(this.scale=0,e=0,n=!0),n},bodyImpulse:function(n){return this.stepped?n==this.b1?nape_geom_Vec3.get(0,0,-this.scale*this.jAcc):nape_geom_Vec3.get(0,0,this.ratio*this.scale*this.jAcc):nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},copy:function(n,e){var t=new nape_constraint_AngleJoint(null,null,this.jointMin,this.jointMax,this.ratio);if(this.copyto(t),null!=n&&null!=this.b1){for(var i=null,r=0;r<n.length;){var l=n[r];if(++r,l.id==this.b1.id){i=l.bc;break}}null!=i?t.zpp_inner_zn.b1=i.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){t.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(i=null,r=0;r<n.length;){l=n[r];if(++r,l.id==this.b2.id){i=l.bc;break}}null!=i?t.zpp_inner_zn.b2=i.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){t.zpp_inner_zn.b2=n.zpp_inner})))}return t},validate:function(){if(null==this.b1||null==this.b2)throw haxe_Exception.thrown("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw haxe_Exception.thrown("Error: AngleJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw haxe_Exception.thrown("Error: AngleJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){var i,r;if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&this.b2.id==e||this.b1.id==e&&this.b2.id==n},clearcache:function(){this.jAcc=0,this.pre_dt=-1,this.slack=!1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n,this.stepped=!0,this.equal=this.jointMin==this.jointMax;var t=this.ratio*this.b2.rot-this.b1.rot;this.equal?(t-=this.jointMax,this.slack=!1,this.scale=1):t<this.jointMin?(t=this.jointMin-t,this.scale=-1,this.slack=!1):t>this.jointMax?(t-=this.jointMax,this.scale=1,this.slack=!1):(this.scale=0,t=0,this.slack=!0);var i=t;if(!this.slack){if(this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&i*i>this.maxError*this.maxError)return!0;var r=2*Math.PI*this.frequency;this.gamma=1/(n*r*(2*this.damping+r*n));var l=1/(1+this.gamma),s=n*r*r*this.gamma;this.gamma*=l,this.kMass*=l,this.bias=-i*s,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=e,this.jMax=this.maxForce*n}return!1},warmStart:function(){this.slack||(this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc)},applyImpulseVel:function(){if(this.slack)return!1;var n=this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel),e=this.kMass*(this.bias-n)-this.jAcc*this.gamma,t=this.jAcc;return this.jAcc+=e,!this.equal&&this.jAcc>0&&(this.jAcc=0),!(!this.breakUnderForce||!(this.jAcc>this.jMax||this.jAcc<-this.jMax))||(this.stiff||(this.jAcc>this.jMax?this.jAcc=this.jMax:this.jAcc<-this.jMax&&(this.jAcc=-this.jMax)),e=this.jAcc-t,this.b1.angvel-=this.scale*this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*e,!1)},applyImpulsePos:function(){var n,e,t=this.ratio*this.b2.rot-this.b1.rot;this.equal?(t-=this.jointMax,e=!1,this.scale=1):t<this.jointMin?(t=this.jointMin-t,this.scale=-1,e=!1):t>this.jointMax?(t-=this.jointMax,this.scale=1,e=!1):(this.scale=0,t=0,e=!0);var i=t;if(!e){if(this.breakUnderError&&i*i>this.maxError*this.maxError)return!0;if(n=-(i*=.5)*this.kMass,this.equal||n<0){var r=this.b1,l=-this.scale*n*this.b1.iinertia;if(r.rot+=l,l*l>1e-4)r.axisx=Math.sin(r.rot),r.axisy=Math.cos(r.rot);else{var s=1-(o=l*l)*o/8,a=((p=1-.5*o)*r.axisx+l*r.axisy)*s;r.axisy=(p*r.axisy-l*r.axisx)*s,r.axisx=a}r=this.b2,l=this.ratio*this.scale*n*this.b2.iinertia;if(r.rot+=l,l*l>1e-4)r.axisx=Math.sin(r.rot),r.axisy=Math.cos(r.rot);else{var o,p;s=1-(o=l*l)*o/8,a=((p=1-.5*o)*r.axisx+l*r.axisy)*s;r.axisy=(p*r.axisy-l*r.axisx)*s,r.axisx=a}}}return!1},draw:function(n){},__class__:zpp_$nape_constraint_ZPP_$AngleJoint});var zpp_$nape_constraint_ZPP_$CopyHelper=function(){this.cb=null,this.bc=null,this.id=0};t["zpp_nape.constraint.ZPP_CopyHelper"]=zpp_$nape_constraint_ZPP_$CopyHelper,zpp_$nape_constraint_ZPP_$CopyHelper.__name__="zpp_nape.constraint.ZPP_CopyHelper",zpp_$nape_constraint_ZPP_$CopyHelper.dict=function(n,e){var t=new zpp_$nape_constraint_ZPP_$CopyHelper;return t.id=n,t.bc=e,t},zpp_$nape_constraint_ZPP_$CopyHelper.todo=function(n,e){var t=new zpp_$nape_constraint_ZPP_$CopyHelper;return t.id=n,t.cb=e,t},zpp_$nape_constraint_ZPP_$CopyHelper.prototype={__class__:zpp_$nape_constraint_ZPP_$CopyHelper};var zpp_$nape_constraint_ZPP_$DistanceJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx2=0,this.cx1=0,this.ny=0,this.nx=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=0};t["zpp_nape.constraint.ZPP_DistanceJoint"]=zpp_$nape_constraint_ZPP_$DistanceJoint,zpp_$nape_constraint_ZPP_$DistanceJoint.__name__="zpp_nape.constraint.ZPP_DistanceJoint",zpp_$nape_constraint_ZPP_$DistanceJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$DistanceJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{is_slack:function(){var n;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var e=0,t=0,i=(e=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx))*e+(t=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely))*t;if(i<nape_Config.epsilon)e=0,t=0,i=0,n=!0;else{var r=1/(i=Math.sqrt(i));e*=r,t*=r,this.equal?(i-=this.jointMax,n=!1):i<this.jointMin?(i=this.jointMin-i,e=-e,t=-t,n=!1):i>this.jointMax?(i-=this.jointMax,n=!1):(e=0,t=0,i=0,n=!0)}return n},bodyImpulse:function(n){return this.stepped?n==this.b1?nape_geom_Vec3.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*this.jAcc):nape_geom_Vec3.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc):nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(n){this.immutable_midstep("Constraint::a1"),this.a1localx=n.x,this.a1localy=n.y,this.wake()},setup_a1:function(){var n,e=this.a1localx,t=this.a1localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a1=n,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(n){this.immutable_midstep("Constraint::a2"),this.a2localx=n.x,this.a2localy=n.y,this.wake()},setup_a2:function(){var n,e=this.a2localx,t=this.a2localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a2=n,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},copy:function(n,e){null==(t=this.outer_zn).zpp_inner_zn.wrap_a1&&t.zpp_inner_zn.setup_a1();var t,i=t.zpp_inner_zn.wrap_a1;null==(t=this.outer_zn).zpp_inner_zn.wrap_a2&&t.zpp_inner_zn.setup_a2();var r=new nape_constraint_DistanceJoint(null,null,i,t.zpp_inner_zn.wrap_a2,this.jointMin,this.jointMax);if(this.copyto(r),null!=n&&null!=this.b1){for(var l=null,s=0;s<n.length;){var a=n[s];if(++s,a.id==this.b1.id){l=a.bc;break}}null!=l?r.zpp_inner_zn.b1=l.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){r.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(l=null,s=0;s<n.length;){a=n[s];if(++s,a.id==this.b2.id){l=a.bc;break}}null!=l?r.zpp_inner_zn.b2=l.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){r.zpp_inner_zn.b2=n.zpp_inner})))}return r},validate:function(){if(null==this.b1||null==this.b2)throw haxe_Exception.thrown("Error: DistanceJoint cannot be simulated null bodies");if(this.b1==this.b2)throw haxe_Exception.thrown("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw haxe_Exception.thrown("Error: DistanceJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){var i,r;if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&this.b2.id==e||this.b1.id==e&&this.b2.id==n},clearcache:function(){this.jAcc=0,this.pre_dt=-1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var t=this.nx*this.nx+this.ny*this.ny;if(t<nape_Config.epsilon)this.nx=0,this.ny=0,t=0,this.slack=!0;else{var i=1/(t=Math.sqrt(t));this.nx*=i,this.ny*=i,this.equal?(t-=this.jointMax,this.slack=!1):t<this.jointMin?(t=this.jointMin-t,this.nx=-this.nx,this.ny=-this.ny,this.slack=!1):t>this.jointMax?(t-=this.jointMax,this.slack=!1):(this.nx=0,this.ny=0,t=0,this.slack=!0)}var r=t;if(!this.slack){if(this.cx1=this.ny*this.a1relx-this.nx*this.a1rely,this.cx2=this.ny*this.a2relx-this.nx*this.a2rely,this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&r*r>this.maxError*this.maxError)return!0;var l=2*Math.PI*this.frequency;this.gamma=1/(n*l*(2*this.damping+l*n));var s=1/(1+this.gamma),a=n*l*l*this.gamma;this.gamma*=s,this.kMass*=s,this.bias=-r*a,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=e,this.jMax=this.maxForce*n}return!1},warmStart:function(){if(!this.slack){var n=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*n,this.b1.vely-=this.ny*n;n=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*n,this.b2.vely+=this.ny*n,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack)return!1;var n=this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1,e=this.kMass*(this.bias-n)-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&this.jAcc>0&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.nx*i,this.b1.vely-=this.ny*i;i=this.b2.imass*e;return this.b2.velx+=this.nx*i,this.b2.vely+=this.ny*i,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,!1},applyImpulsePos:function(){var n,e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,r,l;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var s=0,a=0;(h=(s=this.b2.posx+i-(this.b1.posx+e))*s+(a=this.b2.posy+r-(this.b1.posy+t))*a)<nape_Config.epsilon?(s=0,a=0,h=0,l=!0):(s*=p=1/(h=Math.sqrt(h)),a*=p,this.equal?(h-=this.jointMax,l=!1):h<this.jointMin?(h=this.jointMin-h,s=-s,a=-a,l=!1):h>this.jointMax?(h-=this.jointMax,l=!1):(s=0,a=0,h=0,l=!0));var o=h;if(!l){if(this.breakUnderError&&o*o>this.maxError*this.maxError)return!0;if(o*o<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop)return!1;if((o*=.5)*o>6)if((u=this.b1.smass+this.b2.smass)>nape_Config.epsilon&&(n=-o*(u=.75/u),this.equal||n<0)){var p=n*this.b1.imass;this.b1.posx-=s*p,this.b1.posy-=a*p;var h;p=n*this.b2.imass;if(this.b2.posx+=s*p,this.b2.posy+=a*p,(h=(s=this.b2.posx+i-(this.b1.posx+e))*s+(a=this.b2.posy+r-(this.b1.posy+t))*a)<nape_Config.epsilon)s=0,a=0,h=0,l=!0;else s*=p=1/(h=Math.sqrt(h)),a*=p,this.equal?(h-=this.jointMax,l=!1):h<this.jointMin?(h=this.jointMin-h,s=-s,a=-a,l=!1):h>this.jointMax?(h-=this.jointMax,l=!1):(s=0,a=0,h=0,l=!0);o=h,o*=.5}var u,_=a*e-s*t,c=a*i-s*r;if(0!=(u=this.b1.smass+this.b2.smass+_*_*this.b1.sinertia+c*c*this.b2.sinertia)&&(u=1/u),n=-o*u,this.equal||n<0){p=this.b1.imass*n;this.b1.posx-=s*p,this.b1.posy-=a*p;p=this.b2.imass*n;this.b2.posx+=s*p,this.b2.posy+=a*p;var d=this.b1,f=-_*this.b1.iinertia*n;if(d.rot+=f,f*f>1e-4)d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot);else{var x=1-(b=f*f)*b/8;s=((y=1-.5*b)*d.axisx+f*d.axisy)*x;d.axisy=(y*d.axisy-f*d.axisx)*x,d.axisx=s}d=this.b2,f=c*this.b2.iinertia*n;if(d.rot+=f,f*f>1e-4)d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot);else{var b,y;x=1-(b=f*f)*b/8,s=((y=1-.5*b)*d.axisx+f*d.axisy)*x;d.axisy=(y*d.axisy-f*d.axisx)*x,d.axisx=s}}}return!1},draw:function(n){},__class__:zpp_$nape_constraint_ZPP_$DistanceJoint});var zpp_$nape_constraint_ZPP_$LineJoint=function(){this.biasy=0,this.biasx=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_n=null,this.nrely=0,this.nrelx=0,this.nlocaly=0,this.nlocalx=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.cx2=0,this.cx1=0,this.dot2=0,this.dot1=0,this.equal=!1,this.jointMax=0,this.jointMin=0,this.scale=0,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.nlocalx=0,this.nlocaly=0,this.nrelx=0,this.nrely=0,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.jointMin=-1/0,this.jointMax=1/0,this.stepped=!1};t["zpp_nape.constraint.ZPP_LineJoint"]=zpp_$nape_constraint_ZPP_$LineJoint,zpp_$nape_constraint_ZPP_$LineJoint.__name__="zpp_nape.constraint.ZPP_LineJoint",zpp_$nape_constraint_ZPP_$LineJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$LineJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{bodyImpulse:function(n){if(this.stepped){var e=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,t=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;return n==this.b1?nape_geom_Vec3.get(-e,-t,this.scale*this.cx1*t-this.dot1*e):nape_geom_Vec3.get(e,t,this.scale*this.cx1*t-this.dot1*e)}return nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(n){this.immutable_midstep("Constraint::a1"),this.a1localx=n.x,this.a1localy=n.y,this.wake()},setup_a1:function(){var n,e=this.a1localx,t=this.a1localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a1=n,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(n){this.immutable_midstep("Constraint::a2"),this.a2localx=n.x,this.a2localy=n.y,this.wake()},setup_a2:function(){var n,e=this.a2localx,t=this.a2localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a2=n,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},validate_n:function(){this.wrap_n.zpp_inner.x=this.nlocalx,this.wrap_n.zpp_inner.y=this.nlocaly},invalidate_n:function(n){this.immutable_midstep("Constraint::n"),this.nlocalx=n.x,this.nlocaly=n.y,this.zip_n=!0,this.wake()},setup_n:function(){var n,e=this.nlocalx,t=this.nlocaly;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_n=n,this.wrap_n.zpp_inner._inuse=!0,this.wrap_n.zpp_inner._validate=$bind(this,this.validate_n),this.wrap_n.zpp_inner._invalidate=$bind(this,this.invalidate_n)},validate_norm:function(){if(this.zip_n){this.zip_n=!1;var n=this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly,e=1/Math.sqrt(n);this.nlocalx*=e,this.nlocaly*=e}},copy:function(n,e){null==(i=this.outer_zn).zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var t=i.zpp_inner_zn.wrap_a1;null==(i=this.outer_zn).zpp_inner_zn.wrap_a2&&i.zpp_inner_zn.setup_a2();var i,r=i.zpp_inner_zn.wrap_a2;null==(i=this.outer_zn).zpp_inner_zn.wrap_n&&i.zpp_inner_zn.setup_n();var l=new nape_constraint_LineJoint(null,null,t,r,i.zpp_inner_zn.wrap_n,this.jointMin,this.jointMax);if(this.copyto(l),null!=n&&null!=this.b1){for(var s=null,a=0;a<n.length;){var o=n[a];if(++a,o.id==this.b1.id){s=o.bc;break}}null!=s?l.zpp_inner_zn.b1=s.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){l.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(s=null,a=0;a<n.length;){o=n[a];if(++a,o.id==this.b2.id){s=o.bc;break}}null!=s?l.zpp_inner_zn.b2=s.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){l.zpp_inner_zn.b2=n.zpp_inner})))}return l},validate:function(){if(null==this.b1||null==this.b2)throw haxe_Exception.thrown("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw haxe_Exception.thrown("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw haxe_Exception.thrown("Error: DistanceJoint must have jointMin <= jointMax");if(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly<nape_Config.epsilon)throw haxe_Exception.thrown("Error: DistanceJoint direction must be non-degenerate");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){var i,r;if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&this.b2.id==e||this.b1.id==e&&this.b2.id==n},clearcache:function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n,this.equal=this.jointMin==this.jointMax,this.stepped=!0,this.validate_norm(),this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t,i,r,l=0;t=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx,r=(i=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely)*this.nrelx-t*this.nrely,l=this.nrelx*t+this.nrely*i,this.equal?(l-=this.jointMin,this.scale=1):l>this.jointMax?(l-=this.jointMax,this.scale=1):l<this.jointMin?(l=this.jointMin-l,this.scale=-1):(l=0,this.scale=0);var s,a;s=t+this.a1relx,a=i+this.a1rely,this.dot1=this.nrelx*s+this.nrely*a,this.cx1=a*this.nrelx-s*this.nrely,this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely,this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely,this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia,this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia),this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var o,p=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(p!=p)this.kMassa=this.kMassb=this.kMassc=0,o=3;else if(0==p){var h=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,h|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,h|=2),this.kMassb=0,o=h}else{p=1/p;var u=this.kMassc*p;this.kMassc=this.kMassa*p,this.kMassa=u,this.kMassb*=-p,o=0}if(0!=(1&o)&&(this.jAccx=0),0!=(2&o)&&(this.jAccy=0),this.stiff)this.gamma=0,this.biasx=0,this.biasy=0;else{if(this.breakUnderError&&r*r+l*l>this.maxError*this.maxError)return!0;var _,c=2*Math.PI*this.frequency;this.gamma=1/(n*c*(2*this.damping+c*n));var d=1/(1+this.gamma);_=n*c*c*this.gamma,this.gamma*=d;var f=d;this.kMassa*=f,this.kMassb*=f,this.kMassc*=f,this.biasx=r,this.biasy=l;u=-_;this.biasx*=u,this.biasy*=u;u=this.maxError;var x=this.biasx*this.biasx+this.biasy*this.biasy;if(x>u*u){var b=u*(1/Math.sqrt(x));this.biasx*=b,this.biasy*=b}}u=e;return this.jAccx*=u,this.jAccy*=u,this.jMax=this.maxForce*n,!1},warmStart:function(){var n=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,e=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy,t=this.b1.imass;this.b1.velx-=n*t,this.b1.vely-=e*t;t=this.b2.imass;this.b2.velx+=n*t,this.b2.vely+=e*t,this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia,this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},applyImpulseVel:function(){var n,e,t=0,i=0;t=this.b2.velx-this.b1.velx,i=this.b2.vely-this.b1.vely,t+=this.b2.kinvelx-this.b1.kinvelx,n=(i+=this.b2.kinvely-this.b1.kinvely)*this.nrelx-t*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1,e=this.scale*(this.nrelx*t+this.nrely*i-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var r=0,l=0;r=this.biasx-n,l=this.biasy-e;var s=this.kMassa*r+this.kMassb*l;l=this.kMassb*r+this.kMassc*l,r=s;s=this.gamma;r-=this.jAccx*s,l-=this.jAccy*s;var a,o;a=this.jAccx,o=this.jAccy;s=1;if(this.jAccx+=r*s,this.jAccy+=l*s,this.jAccy>0&&(this.jAccy=0),this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){s=this.jMax;var p=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(p>s*s){var h=s*(1/Math.sqrt(p));this.jAccx*=h,this.jAccy*=h}}r=this.jAccx-a,l=this.jAccy-o;var u=this.scale*this.nrelx*l-this.nrely*r,_=this.nrelx*r+this.scale*this.nrely*l;s=this.b1.imass;this.b1.velx-=u*s,this.b1.vely-=_*s;s=this.b2.imass;return this.b2.velx+=u*s,this.b2.vely+=_*s,this.b1.angvel+=(this.scale*this.cx1*l-this.dot1*r)*this.b1.iinertia,this.b2.angvel+=(this.dot2*r-this.scale*this.cx2*l)*this.b2.iinertia,!1},applyImpulsePos:function(){var n,e=0;e=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,n=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var t,i;t=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,i=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,l;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,l=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var s,a=0,o=0,p=0,h=0;if(a=this.b2.posx+r-this.b1.posx-t,p=(o=this.b2.posy+l-this.b1.posy-i)*e-a*n,h=e*a+n*o,this.equal?(h-=this.jointMin,s=1):h>this.jointMax?(h-=this.jointMax,s=1):h<this.jointMin?(h=this.jointMin-h,s=-1):(h=0,s=0),this.breakUnderError&&p*p+h*h>this.maxError*this.maxError)return!0;if(p*p+h*h<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop)return!1;var u,_,c,d,f=0,x=0;if((p*=m=.5)*p+(h*=m)*h>6){var b=this.b1.smass+this.b2.smass;if(b>nape_Config.epsilon){var y=(b=.8/b)*(n*p-s*e*h),v=b*(e*p*s-n*p),m=this.b1.imass;this.b1.posx-=y*m,this.b1.posy-=v*m;m=this.b2.imass;this.b2.posx+=y*m,this.b2.posy+=v*m,a=this.b2.posx+r-this.b1.posx-t,p=(o=this.b2.posy+l-this.b1.posy-i)*e-a*n,h=e*a+n*o,this.equal?(h-=this.jointMin,s=1):h>this.jointMax?(h-=this.jointMax,s=1):h<this.jointMin?(h=this.jointMin-h,s=-1):(h=0,s=0),p*=m=.5,h*=m}}var g,z,w,O,C;u=e*(O=a+t)+n*(C=o+i),c=C*e-O*n,_=e*r+n*l,d=l*e-r*n,g=this.b1.smass+this.b2.smass+u*u*this.b1.sinertia+_*_*this.b2.sinertia,z=-s*(u*c*this.b1.sinertia+_*d*this.b2.sinertia),f=-p,x=-h;var E=g*(w=s*s*(this.b1.smass+this.b2.smass+c*c*this.b1.sinertia+d*d*this.b2.sinertia))-z*z;if(E!=E)f=x=0;else if(0==E)0!=g?f/=g:f=0,0!=w?x/=w:x=0;else{m=(E=1/E)*(w*f-z*x);x=E*(g*x-z*f),f=m}x>0&&(x=0);var U=s*e*x-n*f,M=e*f+s*n*x;m=this.b1.imass;this.b1.posx-=U*m,this.b1.posy-=M*m;m=this.b2.imass;this.b2.posx+=U*m,this.b2.posy+=M*m;var T=this.b1,k=(s*c*x-u*f)*this.b1.iinertia;if(T.rot+=k,k*k>1e-4)T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot);else{var D=1-(S=k*k)*S/8;e=((A=1-.5*S)*T.axisx+k*T.axisy)*D;T.axisy=(A*T.axisy-k*T.axisx)*D,T.axisx=e}T=this.b2,k=(_*f-s*d*x)*this.b2.iinertia;if(T.rot+=k,k*k>1e-4)T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot);else{var S,A;D=1-(S=k*k)*S/8,e=((A=1-.5*S)*T.axisx+k*T.axisy)*D;T.axisy=(A*T.axisy-k*T.axisx)*D,T.axisx=e}return!1},draw:function(n){},__class__:zpp_$nape_constraint_ZPP_$LineJoint});var zpp_$nape_constraint_ZPP_$MotorJoint=function(){this.stepped=!1,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.rate=0,this.ratio=0,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.jAcc=0,this.stepped=!1,this.__velocity=!0};t["zpp_nape.constraint.ZPP_MotorJoint"]=zpp_$nape_constraint_ZPP_$MotorJoint,zpp_$nape_constraint_ZPP_$MotorJoint.__name__="zpp_nape.constraint.ZPP_MotorJoint",zpp_$nape_constraint_ZPP_$MotorJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$MotorJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{bodyImpulse:function(n){return this.stepped?n==this.b1?nape_geom_Vec3.get(0,0,-this.jAcc):nape_geom_Vec3.get(0,0,this.ratio*this.jAcc):nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},copy:function(n,e){var t=new nape_constraint_MotorJoint(null,null,this.rate,this.ratio);if(this.copyto(t),null!=n&&null!=this.b1){for(var i=null,r=0;r<n.length;){var l=n[r];if(++r,l.id==this.b1.id){i=l.bc;break}}null!=i?t.zpp_inner_zn.b1=i.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){t.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(i=null,r=0;r<n.length;){l=n[r];if(++r,l.id==this.b2.id){i=l.bc;break}}null!=i?t.zpp_inner_zn.b2=i.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){t.zpp_inner_zn.b2=n.zpp_inner})))}return t},validate:function(){if(null==this.b1||null==this.b2)throw haxe_Exception.thrown("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw haxe_Exception.thrown("Error: MotorJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){var i,r;if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&this.b2.id==e||this.b1.id==e&&this.b2.id==n},clearcache:function(){this.jAcc=0,this.pre_dt=-1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;return this.pre_dt=n,this.stepped=!0,this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,this.kMass=1/this.kMass,this.jAcc*=e,this.jMax=this.maxForce*n,!1},warmStart:function(){this.b1.angvel-=this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},applyImpulseVel:function(){var n=this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate,e=-this.kMass*n,t=this.jAcc;if(this.jAcc+=e,this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return!0}else this.jAcc<-this.jMax?this.jAcc=-this.jMax:this.jAcc>this.jMax&&(this.jAcc=this.jMax);return e=this.jAcc-t,this.b1.angvel-=this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.b2.iinertia*e,!1},applyImpulsePos:function(){return!1},__class__:zpp_$nape_constraint_ZPP_$MotorJoint});var zpp_$nape_constraint_ZPP_$PivotJoint=function(){this.stepped=!1,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.stepped=!1,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};t["zpp_nape.constraint.ZPP_PivotJoint"]=zpp_$nape_constraint_ZPP_$PivotJoint,zpp_$nape_constraint_ZPP_$PivotJoint.__name__="zpp_nape.constraint.ZPP_PivotJoint",zpp_$nape_constraint_ZPP_$PivotJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$PivotJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{bodyImpulse:function(n){return this.stepped?n==this.b1?nape_geom_Vec3.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely)):nape_geom_Vec3.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely):nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(n){this.immutable_midstep("Constraint::a1"),this.a1localx=n.x,this.a1localy=n.y,this.wake()},setup_a1:function(){var n,e=this.a1localx,t=this.a1localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a1=n,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(n){this.immutable_midstep("Constraint::a2"),this.a2localx=n.x,this.a2localy=n.y,this.wake()},setup_a2:function(){var n,e=this.a2localx,t=this.a2localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a2=n,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},copy:function(n,e){null==(t=this.outer_zn).zpp_inner_zn.wrap_a1&&t.zpp_inner_zn.setup_a1();var t,i=t.zpp_inner_zn.wrap_a1;null==(t=this.outer_zn).zpp_inner_zn.wrap_a2&&t.zpp_inner_zn.setup_a2();var r=new nape_constraint_PivotJoint(null,null,i,t.zpp_inner_zn.wrap_a2);if(this.copyto(r),null!=n&&null!=this.b1){for(var l=null,s=0;s<n.length;){var a=n[s];if(++s,a.id==this.b1.id){l=a.bc;break}}null!=l?r.zpp_inner_zn.b1=l.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){r.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(l=null,s=0;s<n.length;){a=n[s];if(++s,a.id==this.b2.id){l=a.bc;break}}null!=l?r.zpp_inner_zn.b2=l.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){r.zpp_inner_zn.b2=n.zpp_inner})))}return r},validate:function(){if(null==this.b1||null==this.b2)throw haxe_Exception.thrown("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw haxe_Exception.thrown("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){var i,r;if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&this.b2.id==e||this.b1.id==e&&this.b2.id==n},clearcache:function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t=this.b1.smass+this.b2.smass;if(this.kMassa=t,this.kMassb=0,this.kMassc=t,0!=this.b1.sinertia){var i=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassc+=i*this.a1relx}if(0!=this.b2.sinertia){i=this.a2relx*this.b2.sinertia,r=this.a2rely*this.b2.sinertia;this.kMassa+=r*this.a2rely,this.kMassb+=-r*this.a2relx,this.kMassc+=i*this.a2relx}var l,s=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(s!=s)this.kMassa=this.kMassb=this.kMassc=0,l=3;else if(0==s){var a=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,a|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,a|=2),this.kMassb=0,l=a}else{s=1/s;var o=this.kMassc*s;this.kMassc=this.kMassa*s,this.kMassa=o,this.kMassb*=-s,l=0}if(0!=(1&l)&&(this.jAccx=0),0!=(2&l)&&(this.jAccy=0),this.stiff)this.biasx=0,this.biasy=0,this.gamma=0;else{var p,h=2*Math.PI*this.frequency;this.gamma=1/(n*h*(2*this.damping+h*n));var u=1/(1+this.gamma);p=n*h*h*this.gamma,this.gamma*=u;i=u;if(this.kMassa*=i,this.kMassb*=i,this.kMassc*=i,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;o=-p;this.biasx*=o,this.biasy*=o;o=this.maxError;var _=this.biasx*this.biasx+this.biasy*this.biasy;if(_>o*o){var c=o*(1/Math.sqrt(_));this.biasx*=c,this.biasy*=c}}o=e;return this.jAccx*=o,this.jAccy*=o,this.jMax=this.maxForce*n,!1},warmStart:function(){var n=this.b1.imass;this.b1.velx-=this.jAccx*n,this.b1.vely-=this.jAccy*n;n=this.b2.imass;this.b2.velx+=this.jAccx*n,this.b2.vely+=this.jAccy*n,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},applyImpulseVel:function(){var n,e;n=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),e=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var t=0,i=0;t=this.biasx-n,i=this.biasy-e;var r=this.kMassa*t+this.kMassb*i;i=this.kMassb*t+this.kMassc*i,t=r;r=this.gamma;t-=this.jAccx*r,i-=this.jAccy*r;var l,s;l=this.jAccx,s=this.jAccy;r=1;if(this.jAccx+=t*r,this.jAccy+=i*r,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){r=this.jMax;var a=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(a>r*r){var o=r*(1/Math.sqrt(a));this.jAccx*=o,this.jAccy*=o}}t=this.jAccx-l,i=this.jAccy-s;r=this.b1.imass;this.b1.velx-=t*r,this.b1.vely-=i*r;r=this.b2.imass;return this.b2.velx+=t*r,this.b2.vely+=i*r,this.b1.angvel-=(i*this.a1relx-t*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(i*this.a2relx-t*this.a2rely)*this.b2.iinertia,!1},applyImpulsePos:function(){var n,e;n=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,e=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var t,i;t=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,i=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,l=0;if(r=this.b2.posx+t-(this.b1.posx+n),l=this.b2.posy+i-(this.b1.posy+e),this.breakUnderError&&r*r+l*l>this.maxError*this.maxError)return!0;if(r*r+l*l<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop)return!1;var s=0,a=0;if((r*=p=.5)*r+(l*=p)*l>6){var o=this.b1.smass+this.b2.smass;if(o>nape_Config.epsilon){if((h=(s=-r*(o=.75/o))*s+(a=-l*o)*a)>(p=20)*p)s*=u=p*(1/Math.sqrt(h)),a*=u;var p=this.b1.imass;this.b1.posx-=s*p,this.b1.posy-=a*p;p=this.b2.imass;this.b2.posx+=s*p,this.b2.posy+=a*p,r=this.b2.posx+t-(this.b1.posx+n),l=this.b2.posy+i-(this.b1.posy+e),r*=p=.5,l*=p}}var h,u,_=0,c=0,d=0;if(_=m=this.b1.smass+this.b2.smass,c=0,d=m,0!=this.b1.sinertia){var f=n*this.b1.sinertia;_+=(x=e*this.b1.sinertia)*e,c+=-x*n,d+=f*n}if(0!=this.b2.sinertia){var x;f=t*this.b2.sinertia;_+=(x=i*this.b2.sinertia)*i,c+=-x*t,d+=f*t}(h=(s=-r)*s+(a=-l)*a)>(p=6)*p&&(s*=u=p*(1/Math.sqrt(h)),a*=u);var b=_*d-c*c;if(b!=b)s=a=0;else if(0==b)0!=_?s/=_:s=0,0!=d?a/=d:a=0;else{p=(b=1/b)*(d*s-c*a);a=b*(_*a-c*s),s=p}p=this.b1.imass;this.b1.posx-=s*p,this.b1.posy-=a*p;p=this.b2.imass;this.b2.posx+=s*p,this.b2.posy+=a*p;var y=this.b1,v=-(a*n-s*e)*this.b1.iinertia;if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{var m=1-(z=v*v)*z/8,g=((w=1-.5*z)*y.axisx+v*y.axisy)*m;y.axisy=(w*y.axisy-v*y.axisx)*m,y.axisx=g}y=this.b2,v=(a*t-s*i)*this.b2.iinertia;if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{var z,w;m=1-(z=v*v)*z/8,g=((w=1-.5*z)*y.axisx+v*y.axisy)*m;y.axisy=(w*y.axisy-v*y.axisx)*m,y.axisx=g}return!1},draw:function(n){},__class__:zpp_$nape_constraint_ZPP_$PivotJoint});var zpp_$nape_constraint_ZPP_$PulleyJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a4=null,this.a4rely=0,this.a4relx=0,this.a4localy=0,this.a4localx=0,this.b4=null,this.wrap_a3=null,this.a3rely=0,this.a3relx=0,this.a3localy=0,this.a3localx=0,this.b3=null,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx4=0,this.cx3=0,this.cx2=0,this.cx1=0,this.n34y=0,this.n34x=0,this.n12y=0,this.n12x=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=1,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.a3localx=0,this.a3localy=0,this.a3relx=0,this.a3rely=0,this.a4localx=0,this.a4localy=0,this.a4relx=0,this.a4rely=0,this.n12x=1,this.n12y=0,this.n34x=1,this.n34y=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=this.cx3=this.cx4=0};t["zpp_nape.constraint.ZPP_PulleyJoint"]=zpp_$nape_constraint_ZPP_$PulleyJoint,zpp_$nape_constraint_ZPP_$PulleyJoint.__name__="zpp_nape.constraint.ZPP_PulleyJoint",zpp_$nape_constraint_ZPP_$PulleyJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$PulleyJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{is_slack:function(){var n;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var e,t,i,r,l=0,s=0,a=0,o=0;e=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),t=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),i=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),r=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var p,h=Math.sqrt(e*e+t*t),u=Math.sqrt(i*i+r*r);0!=h&&(l=e*(p=1/h),s=t*p);0!=u?(a=i*(p=1/u),o=r*p,a*=p=this.ratio,o*=p):(a*=p=this.ratio/Math.sqrt(a*a+o*o),o*=p);var _=h+this.ratio*u;return this.equal?(_-=this.jointMax,n=!1):_<this.jointMin?(_=this.jointMin-_,l=-l,s=-s,a=-a,o=-o,n=!1):_>this.jointMax?(_-=this.jointMax,n=!1):(l=0,s=0,a=0,o=0,_=0,n=!0),n},bodyImpulse:function(n){if(this.stepped){var e=nape_geom_Vec3.get();if(n==this.b1){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();var t=e.zpp_inner.x-this.jAcc*this.n12x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.x=t,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();var i=e.zpp_inner.y-this.jAcc*this.n12y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.y=i,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();var r=e.zpp_inner.z-this.cx1*this.jAcc;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.z=r,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}if(n==this.b2){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();t=e.zpp_inner.x+this.jAcc*this.n12x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.x=t,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();i=e.zpp_inner.y+this.jAcc*this.n12y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.y=i,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();r=e.zpp_inner.z+this.cx2*this.jAcc;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.z=r,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}if(n==this.b3){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();t=e.zpp_inner.x-this.jAcc*this.n34x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.x=t,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();i=e.zpp_inner.y-this.jAcc*this.n34y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.y=i,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();r=e.zpp_inner.z-this.cx3*this.jAcc;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.z=r,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}if(n==this.b4){if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();t=e.zpp_inner.x+this.jAcc*this.n34x;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.x=t,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();i=e.zpp_inner.y+this.jAcc*this.n34y;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.y=i,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(null!=(l=e.zpp_inner)._validate&&l._validate(),null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate();var l;r=e.zpp_inner.z+this.cx4*this.jAcc;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");if(e.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec3 is immutable");if(e.zpp_inner.z=r,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");null!=(l=e.zpp_inner)._validate&&l._validate()}return e}return nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.add(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.remove(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(n){this.immutable_midstep("Constraint::a1"),this.a1localx=n.x,this.a1localy=n.y,this.wake()},setup_a1:function(){var n,e=this.a1localx,t=this.a1localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a1=n,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(n){this.immutable_midstep("Constraint::a2"),this.a2localx=n.x,this.a2localy=n.y,this.wake()},setup_a2:function(){var n,e=this.a2localx,t=this.a2localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a2=n,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},validate_a3:function(){this.wrap_a3.zpp_inner.x=this.a3localx,this.wrap_a3.zpp_inner.y=this.a3localy},invalidate_a3:function(n){this.immutable_midstep("Constraint::a3"),this.a3localx=n.x,this.a3localy=n.y,this.wake()},setup_a3:function(){var n,e=this.a3localx,t=this.a3localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a3=n,this.wrap_a3.zpp_inner._inuse=!0,this.wrap_a3.zpp_inner._validate=$bind(this,this.validate_a3),this.wrap_a3.zpp_inner._invalidate=$bind(this,this.invalidate_a3)},validate_a4:function(){this.wrap_a4.zpp_inner.x=this.a4localx,this.wrap_a4.zpp_inner.y=this.a4localy},invalidate_a4:function(n){this.immutable_midstep("Constraint::a4"),this.a4localx=n.x,this.a4localy=n.y,this.wake()},setup_a4:function(){var n,e=this.a4localx,t=this.a4localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a4=n,this.wrap_a4.zpp_inner._inuse=!0,this.wrap_a4.zpp_inner._validate=$bind(this,this.validate_a4),this.wrap_a4.zpp_inner._invalidate=$bind(this,this.invalidate_a4)},copy:function(n,e){null==(r=this.outer_zn).zpp_inner_zn.wrap_a1&&r.zpp_inner_zn.setup_a1();var t=r.zpp_inner_zn.wrap_a1;null==(r=this.outer_zn).zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var i=r.zpp_inner_zn.wrap_a2;null==(r=this.outer_zn).zpp_inner_zn.wrap_a3&&r.zpp_inner_zn.setup_a3();var r,l=r.zpp_inner_zn.wrap_a3;null==(r=this.outer_zn).zpp_inner_zn.wrap_a4&&r.zpp_inner_zn.setup_a4();var s=new nape_constraint_PulleyJoint(null,null,null,null,t,i,l,r.zpp_inner_zn.wrap_a4,this.jointMin,this.jointMax,this.ratio);if(this.copyto(s),null!=n&&null!=this.b1){for(var a=null,o=0;o<n.length;){var p=n[o];if(++o,p.id==this.b1.id){a=p.bc;break}}null!=a?s.zpp_inner_zn.b1=a.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){s.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(a=null,o=0;o<n.length;){p=n[o];if(++o,p.id==this.b2.id){a=p.bc;break}}null!=a?s.zpp_inner_zn.b2=a.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){s.zpp_inner_zn.b2=n.zpp_inner})))}if(null!=n&&null!=this.b3){for(a=null,o=0;o<n.length;){p=n[o];if(++o,p.id==this.b3.id){a=p.bc;break}}null!=a?s.zpp_inner_zn.b3=a.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b3.id,(function(n){s.zpp_inner_zn.b3=n.zpp_inner})))}if(null!=n&&null!=this.b4){for(a=null,o=0;o<n.length;){p=n[o];if(++o,p.id==this.b4.id){a=p.bc;break}}null!=a?s.zpp_inner_zn.b4=a.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b4.id,(function(n){s.zpp_inner_zn.b4=n.zpp_inner})))}return s},validate:function(){if(null==this.b1||null==this.b2||null==this.b3||null==this.b4)throw haxe_Exception.thrown("Error: PulleyJoint cannot be simulated with null bodies");if(this.b1==this.b2||this.b3==this.b4)throw haxe_Exception.thrown("Error: PulleyJoint cannot have body1==body2 or body3==body4");if(this.b1.space!=this.space||this.b2.space!=this.space||this.b3.space!=this.space||this.b4.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw haxe_Exception.thrown("Error: PulleyJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic");if(2!=this.b3.type&&2!=this.b4.type)throw haxe_Exception.thrown("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake(),null!=this.b3&&2==this.b3.type&&this.b3.wake(),null!=this.b4&&2==this.b4.type&&this.b4.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b3.type){if(this.b3.component==this.b3.component.parent)i=this.b3.component;else{for(n=this.b3.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b4.type){var i,r;if(this.b4.component==this.b4.component.parent)i=this.b4.component;else{for(n=this.b4.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&(this.b2.id==e||this.b3.id==e||this.b4.id==e)||this.b2.id==n&&(this.b3.id==e||this.b4.id==e||this.b1.id==e)||this.b3.id==n&&(this.b4.id==e||this.b1.id==e||this.b2.id==e)||this.b4.id==n&&(this.b1.id==e||this.b2.id==e||this.b3.id==e)},clearcache:function(){this.jAcc=0,this.pre_dt=-1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var t,i,r,l;t=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),i=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),r=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),l=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var s=Math.sqrt(t*t+i*i),a=Math.sqrt(r*r+l*l);if(0!=s){var o=1/s;this.n12x=t*o,this.n12y=i*o}if(0!=a){o=1/a;this.n34x=r*o,this.n34y=l*o;o=this.ratio;this.n34x*=o,this.n34y*=o}else{o=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=o,this.n34y*=o}var p=s+this.ratio*a;this.equal?(p-=this.jointMax,this.slack=!1):p<this.jointMin?(p=this.jointMin-p,this.n12x=-this.n12x,this.n12y=-this.n12y,this.n34x=-this.n34x,this.n34y=-this.n34y,this.slack=!1):p>this.jointMax?(p-=this.jointMax,this.slack=!1):(this.n12x=0,this.n12y=0,this.n34x=0,this.n34y=0,p=0,this.slack=!0);var h=p;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely,this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely,this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely,this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var u=this.ratio*this.ratio,_=this.b1.smass+this.b2.smass+u*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia)),this.b1==this.b3&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia)),this.b2==this.b3&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia)),this.b2==this.b4&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia)),this.kMass=_,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&h*h>this.maxError*this.maxError)return!0;var c=2*Math.PI*this.frequency;this.gamma=1/(n*c*(2*this.damping+c*n));var d=1/(1+this.gamma),f=n*c*c*this.gamma;this.gamma*=d,this.kMass*=d,this.bias=-h*f,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=e,this.jMax=this.maxForce*n}return!1},warmStart:function(){if(!this.slack){var n=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*n,this.b1.vely-=this.n12y*n;n=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*n,this.b2.vely+=this.n12y*n;n=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*n,this.b3.vely-=this.n34y*n;n=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*n,this.b4.vely+=this.n34y*n,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc,this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc,this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack)return!1;var n=this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3,e=this.kMass*(this.bias-n)-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&this.jAcc>0&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.n12x*i,this.b1.vely-=this.n12y*i;i=this.b2.imass*e;this.b2.velx+=this.n12x*i,this.b2.vely+=this.n12y*i;i=this.b3.imass*e;this.b3.velx-=this.n34x*i,this.b3.vely-=this.n34y*i;i=this.b4.imass*e;return this.b4.velx+=this.n34x*i,this.b4.vely+=this.n34y*i,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,this.b3.angvel-=this.cx3*this.b3.iinertia*e,this.b4.angvel+=this.cx4*this.b4.iinertia*e,!1},applyImpulsePos:function(){var n,e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,r;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var l,s;l=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,s=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var a,o,p;a=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,o=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var h=0,u=0,_=0,c=0;h=this.n12x,u=this.n12y,_=this.n34x,c=this.n34y;var d=0,f=0,x=0,b=0;(d=this.b2.posx+i-(this.b1.posx+e),f=this.b2.posy+r-(this.b1.posy+t),x=this.b4.posx+a-(this.b3.posx+l),b=this.b4.posy+o-(this.b3.posy+s),0!=(g=Math.sqrt(d*d+f*f)))&&(h=d*(m=1/g),u=f*m);0!=(z=Math.sqrt(x*x+b*b))?(_=x*(m=1/z),c=b*m,_*=m=this.ratio,c*=m):(_*=m=this.ratio/Math.sqrt(_*_+c*c),c*=m);var y=g+this.ratio*z;this.equal?(y-=this.jointMax,p=!1):y<this.jointMin?(y=this.jointMin-y,h=-h,u=-u,_=-_,c=-c,p=!1):y>this.jointMax?(y-=this.jointMax,p=!1):(h=0,u=0,_=0,c=0,y=0,p=!0);var v=y;if(!p){if(this.breakUnderError&&v*v>this.maxError*this.maxError)return!0;if(v*v<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop)return!1;if((v*=.5)*v>6)if((w=this.b1.smass+this.b2.smass)>nape_Config.epsilon&&(n=-v*(w=.75/w),this.equal||n<0)){var m=n*this.b1.imass;this.b1.posx-=h*m,this.b1.posy-=u*m;m=n*this.b2.imass;this.b2.posx+=h*m,this.b2.posy+=u*m;m=n*this.b3.imass;this.b3.posx-=_*m,this.b3.posy-=c*m;m=n*this.b4.imass;this.b4.posx+=_*m,this.b4.posy+=c*m;var g,z;d=0,f=0,x=0,b=0;if(d=this.b2.posx+i-(this.b1.posx+e),f=this.b2.posy+r-(this.b1.posy+t),x=this.b4.posx+a-(this.b3.posx+l),b=this.b4.posy+o-(this.b3.posy+s),0!=(g=Math.sqrt(d*d+f*f)))h=d*(m=1/g),u=f*m;if(0!=(z=Math.sqrt(x*x+b*b)))_=x*(m=1/z),c=b*m,_*=m=this.ratio,c*=m;else _*=m=this.ratio/Math.sqrt(_*_+c*c),c*=m;y=g+this.ratio*z;this.equal?(y-=this.jointMax,p=!1):y<this.jointMin?(y=this.jointMin-y,h=-h,u=-u,_=-_,c=-c,p=!1):y>this.jointMax?(y-=this.jointMax,p=!1):(h=0,u=0,_=0,c=0,y=0,p=!0),v=y,v*=.5}var w,O=u*e-h*t,C=u*i-h*r,E=c*l-_*s,U=c*a-_*o,M=this.ratio*this.ratio,T=this.b1.smass+this.b2.smass+M*(this.b3.smass+this.b4.smass)+this.b1.sinertia*O*O+this.b2.sinertia*C*C+this.b3.sinertia*E*E+this.b4.sinertia*U*U;if(this.b1==this.b4&&(T-=2*((h*_+u*c)*this.b1.smass+O*U*this.b1.sinertia)),this.b1==this.b3&&(T+=2*((h*_+u*c)*this.b1.smass+O*E*this.b1.sinertia)),this.b2==this.b3&&(T-=2*((h*_+u*c)*this.b2.smass+C*E*this.b2.sinertia)),this.b2==this.b4&&(T+=2*((h*_+u*c)*this.b2.smass+C*U*this.b2.sinertia)),0!=(w=T)&&(w=1/w),n=-v*w,this.equal||n<0){m=this.b1.imass*n;this.b1.posx-=h*m,this.b1.posy-=u*m;m=this.b2.imass*n;this.b2.posx+=h*m,this.b2.posy+=u*m;m=this.b3.imass*n;this.b3.posx-=_*m,this.b3.posy-=c*m;m=this.b4.imass*n;this.b4.posx+=_*m,this.b4.posy+=c*m;var k=this.b1,D=-O*this.b1.iinertia*n;if(k.rot+=D,D*D>1e-4)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{var S=1-(P=D*D)*P/8,A=((V=1-.5*P)*k.axisx+D*k.axisy)*S;k.axisy=(V*k.axisy-D*k.axisx)*S,k.axisx=A}k=this.b2,D=C*this.b2.iinertia*n;if(k.rot+=D,D*D>1e-4)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{S=1-(P=D*D)*P/8,A=((V=1-.5*P)*k.axisx+D*k.axisy)*S;k.axisy=(V*k.axisy-D*k.axisx)*S,k.axisx=A}k=this.b3,D=-E*this.b3.iinertia*n;if(k.rot+=D,D*D>1e-4)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{S=1-(P=D*D)*P/8,A=((V=1-.5*P)*k.axisx+D*k.axisy)*S;k.axisy=(V*k.axisy-D*k.axisx)*S,k.axisx=A}k=this.b4,D=U*this.b4.iinertia*n;if(k.rot+=D,D*D>1e-4)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{var P,V;S=1-(P=D*D)*P/8,A=((V=1-.5*P)*k.axisx+D*k.axisy)*S;k.axisy=(V*k.axisy-D*k.axisx)*S,k.axisx=A}}}return!1},draw:function(n){},__class__:zpp_$nape_constraint_ZPP_$PulleyJoint});var zpp_$nape_constraint_ZPP_$UserConstraint=function(n,e){this.jOld=null,this.J=null,this.vec3=null,this.Keff=null,this.jMax=0,this.velonly=!1,this.gamma=0,this.soft=0,this.y=null,this.L=null,this.stepped=!1,this.bias=null,this.jAcc=null,this.dim=0,this.bodies=null,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.bodies=[],this.dim=n,this.velonly=e,this.jAcc=[],this.bias=[],this.L=[],this.J=[],this.jOld=[],this.y=[],this.Keff=[],this.vec3=nape_geom_Vec3.get(0,0,0);for(var t=0,i=n;t<i;){var r=t++,l=this.bias[r]=this.J[r]=this.jOld[r]=this.y[r]=0;this.jAcc[r]=l;for(var s=0,a=n;s<a;){var o=s++;this.L[r*n+o]=0}}this.stepped=!1};t["zpp_nape.constraint.ZPP_UserConstraint"]=zpp_$nape_constraint_ZPP_$UserConstraint,zpp_$nape_constraint_ZPP_$UserConstraint.__name__="zpp_nape.constraint.ZPP_UserConstraint",zpp_$nape_constraint_ZPP_$UserConstraint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$UserConstraint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{bindVec2_invalidate:function(n){this.outer_zn.__invalidate()},addBody:function(n){for(var e=null,t=0,i=this.bodies;t<i.length;){var r=i[t];if(++t,r.body==n){e=r;break}}null==e?(this.bodies.push(new zpp_$nape_constraint_ZPP_$UserBody(1,n)),this.active&&null!=this.space&&null!=n&&n.constraints.add(this)):e.cnt++},remBody:function(n){for(var e=null,t=0|this.bodies.length,i=0;i<t;){var r=this.bodies[i];if(r.body==n){r.cnt--,0==r.cnt&&(t>0&&(this.bodies[i]=this.bodies[t-1]),this.bodies.pop(),this.active&&null!=this.space&&null!=n&&n.constraints.remove(this)),e=r;break}++i}return null!=e},bodyImpulse:function(n){for(var e=0,t=this.dim;e<t;){var i=e++;this.J[i]=this.jAcc[i]}var r=nape_geom_Vec3.get(0,0,0);return this.stepped&&this.outer_zn.__impulse(this.J,n.outer,r),r},activeBodies:function(){for(var n=0,e=this.bodies;n<e.length;){var t=e[n];++n,null!=t.body&&t.body.constraints.add(this)}},inactiveBodies:function(){for(var n=0,e=this.bodies;n<e.length;){var t=e[n];++n,null!=t.body&&t.body.constraints.remove(this)}},copy:function(n,e){var t=this.outer_zn.__copy();throw this.copyto(t),haxe_Exception.thrown("not done yet")},validate:function(){for(var n=0,e=this.bodies;n<e.length;){var t=e[n];if(++n,t.body.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same sapce to which the constraint has been assigned")}this.outer_zn.__validate()},wake_connected:function(){for(var n=0,e=this.bodies;n<e.length;){var t=e[n];++n,2==t.body.type&&t.body.wake()}},forest:function(){for(var n=0,e=this.bodies;n<e.length;){var t=e[n];if(++n,2==t.body.type){var i,r;if(t.body.component==t.body.component.parent)i=t.body.component;else{for(var l=t.body.component,s=null;l!=l.parent;){var a=l.parent;l.parent=s,s=l,l=a}for(;null!=s;){var o=s.parent;s.parent=l,s=o}i=l}if(this.component==this.component.parent)r=this.component;else{for(var p=this.component,h=null;p!=p.parent;){var u=p.parent;p.parent=h,h=p,p=u}for(;null!=h;){var _=h.parent;h.parent=p,h=_}r=p}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}}},pair_exists:function(n,e){for(var t=!1,i=0|this.bodies.length,r=0,l=i;r<l;){for(var s=r++,a=this.bodies[s].body,o=s+1,p=i;o<p;){var h=o++,u=this.bodies[h].body;if(a.id==n&&u.id==e||a.id==e&&u.id==n){t=!0;break}}if(t)break}return t},broken:function(){this.outer_zn.__broken()},clearcache:function(){for(var n=0,e=this.dim;n<e;){var t=n++;this.jAcc[t]=0}this.pre_dt=-1},lsq:function(n){for(var e=0,t=0,i=this.dim;t<i;){var r=t++;e+=n[r]*n[r]}return e},_clamp:function(n,e){var t=this.lsq(n);if(t>e*e)for(var i=e/Math.sqrt(t),r=0,l=this.dim;r<l;){n[r++]*=i}},solve:function(n){for(var e=0,t=0,i=this.dim;t<i;){for(var r=t++,l=0,s=0,a=r-1;s<a;){var o=s++;l+=this.L[r*this.dim+o]*this.L[r*this.dim+o]}var p=Math.sqrt(n[e++]-l);if(this.L[r*this.dim+r]=p,0!=p){p=1/p;for(var h=r+1,u=this.dim;h<u;){for(var _=h++,c=0,d=0,f=r-1;d<f;){var x=d++;c+=this.L[_*this.dim+x]*this.L[r*this.dim+x]}this.L[_*this.dim+r]=p*(n[e++]-c)}}else{for(var b=r+1,y=this.dim;b<y;){var v=b++;this.L[v*this.dim+r]=0}e+=this.dim-r-1}}return this.L},transform:function(n,e){for(var t=0,i=this.dim;t<i;){var r=e[o=t++];if(0!=(p=n[o*this.dim+o])){for(var l=0,s=o;l<s;){var a=l++;r-=n[o*this.dim+a]*this.y[a]}this.y[o]=r/p}else this.y[o]=0}for(t=0,i=this.dim;t<i;){var o,p,h=t++;if(0!=(p=n[(o=this.dim-1-h)*this.dim+o])){for(r=this.y[o],l=o+1,s=this.dim;l<s;){r-=n[(a=l++)*this.dim+o]*e[a]}e[o]=r/p}else e[o]=0}},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;if(this.pre_dt=n,this.stepped=!0,this.outer_zn.__prepare(),this.outer_zn.__eff_mass(this.Keff),this.L=this.solve(this.Keff),this.stiff||this.velonly){for(l=0,s=this.dim;l<s;){a=l++;this.bias[a]=0}this.gamma=0,this.soft=1}else{var t=2*Math.PI*this.frequency;this.gamma=1/(n*t*(2*this.damping+t*n));var i=1/(1+this.gamma),r=n*t*t*this.gamma;if(this.gamma*=i,this.soft=i,this.outer_zn.__position(this.bias),this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return!0;for(var l=0,s=this.dim;l<s;){var a=l++;this.bias[a]*=-r}this._clamp(this.bias,this.maxError)}for(l=0,s=this.dim;l<s;){a=l++;this.jAcc[a]*=e}return this.jMax=this.maxForce*n,!1},warmStart:function(){for(var n=0,e=this.bodies;n<e.length;){var t=e[n];++n;var i=t.body;this.outer_zn.__impulse(this.jAcc,i.outer,this.vec3);var r=i.imass,l=i,s=l.velx,a=this.vec3;if(null!=a&&a.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var o=a.zpp_inner;null!=o._validate&&o._validate(),l.velx=s+a.zpp_inner.x*r;var p=i,h=p.vely,u=this.vec3;if(null!=u&&u.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var _=u.zpp_inner;null!=_._validate&&_._validate(),p.vely=h+u.zpp_inner.y*r;var c=i,d=c.angvel,f=this.vec3;if(null!=f&&f.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var x=f.zpp_inner;null!=x._validate&&x._validate(),c.angvel=d+f.zpp_inner.z*i.iinertia}},applyImpulseVel:function(){this.outer_zn.__velocity(this.J);for(var n=0,e=this.dim;n<e;){var t=n++;this.J[t]=this.bias[t]-this.J[t]}this.transform(this.L,this.J);for(n=0,e=this.dim;n<e;){t=n++;this.jOld[t]=this.jAcc[t],this.jAcc[t]+=this.J[t]=this.J[t]*this.soft-this.jAcc[t]*this.gamma}if(this.outer_zn.__clamp(this.jAcc),(this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return!0;this.stiff||this._clamp(this.jAcc,this.jMax)}for(n=0,e=this.dim;n<e;){t=n++;this.J[t]=this.jAcc[t]-this.jOld[t]}for(n=0,e=this.bodies;n<e.length;){var i=e[n];++n;var r=i.body;this.outer_zn.__impulse(this.J,r.outer,this.vec3);var l=r.imass,s=r,a=s.velx,o=this.vec3;if(null!=o&&o.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var p=o.zpp_inner;null!=p._validate&&p._validate(),s.velx=a+o.zpp_inner.x*l;var h=r,u=h.vely,_=this.vec3;if(null!=_&&_.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var c=_.zpp_inner;null!=c._validate&&c._validate(),h.vely=u+_.zpp_inner.y*l;var d=r,f=d.angvel,x=this.vec3;if(null!=x&&x.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var b=x.zpp_inner;null!=b._validate&&b._validate(),d.angvel=f+x.zpp_inner.z*r.iinertia}return!1},applyImpulsePos:function(){if(this.velonly)return!1;this.outer_zn.__prepare(),this.outer_zn.__position(this.J);var n=this.lsq(this.J);if(this.breakUnderError&&n>this.maxError*this.maxError)return!0;if(n<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop)return!1;for(var e=0,t=this.dim;e<t;){var i=e++;this.J[i]*=-1}this.outer_zn.__eff_mass(this.Keff),this.transform(this.solve(this.Keff),this.J),this.outer_zn.__clamp(this.J);for(e=0,t=this.bodies;e<t.length;){var r=t[e];++e;var l=r.body;this.outer_zn.__impulse(this.J,l.outer,this.vec3);var s=l.imass,a=l,o=a.posx,p=this.vec3;if(null!=p&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var h=p.zpp_inner;null!=h._validate&&h._validate(),a.posx=o+p.zpp_inner.x*s;var u=l,_=u.posy,c=this.vec3;if(null!=c&&c.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var d=c.zpp_inner;null!=d._validate&&d._validate(),u.posy=_+c.zpp_inner.y*s;var f=this.vec3;if(null!=f&&f.zpp_disp)throw haxe_Exception.thrown("Error: Vec3 has been disposed and cannot be used!");var x=f.zpp_inner;null!=x._validate&&x._validate();var b=f.zpp_inner.z*l.iinertia;if(l.rot+=b,b*b>1e-4)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var y=b*b,v=1-.5*y,m=1-y*y/8,g=(v*l.axisx+b*l.axisy)*m;l.axisy=(v*l.axisy-b*l.axisx)*m,l.axisx=g}}return!1},draw:function(n){this.outer_zn.__draw(n)},__class__:zpp_$nape_constraint_ZPP_$UserConstraint});var zpp_$nape_constraint_ZPP_$UserBody=function(n,e){this.body=null,this.cnt=0,this.cnt=n,this.body=e};t["zpp_nape.constraint.ZPP_UserBody"]=zpp_$nape_constraint_ZPP_$UserBody,zpp_$nape_constraint_ZPP_$UserBody.__name__="zpp_nape.constraint.ZPP_UserBody",zpp_$nape_constraint_ZPP_$UserBody.prototype={__class__:zpp_$nape_constraint_ZPP_$UserBody};var zpp_$nape_constraint_ZPP_$WeldJoint=function(){this.stepped=!1,this.biasz=0,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccz=0,this.jAccy=0,this.jAccx=0,this.kMassf=0,this.kMasse=0,this.kMassc=0,this.kMassd=0,this.kMassb=0,this.kMassa=0,this.phase=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,zpp_$nape_constraint_ZPP_$Constraint.call(this),this.phase=0,this.jAccx=0,this.jAccy=0,this.jAccz=0,this.jMax=1/0,this.stepped=!1,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};t["zpp_nape.constraint.ZPP_WeldJoint"]=zpp_$nape_constraint_ZPP_$WeldJoint,zpp_$nape_constraint_ZPP_$WeldJoint.__name__="zpp_nape.constraint.ZPP_WeldJoint",zpp_$nape_constraint_ZPP_$WeldJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint,zpp_$nape_constraint_ZPP_$WeldJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{bodyImpulse:function(n){return this.stepped?n==this.b1?nape_geom_Vec3.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)):nape_geom_Vec3.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz):nape_geom_Vec3.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(n){this.immutable_midstep("Constraint::a1"),this.a1localx=n.x,this.a1localy=n.y,this.wake()},setup_a1:function(){var n,e=this.a1localx,t=this.a1localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a1=n,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(n){this.immutable_midstep("Constraint::a2"),this.a2localx=n.x,this.a2localy=n.y,this.wake()},setup_a2:function(){var n,e=this.a2localx,t=this.a2localy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_a2=n,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},copy:function(n,e){null==(t=this.outer_zn).zpp_inner_zn.wrap_a1&&t.zpp_inner_zn.setup_a1();var t,i=t.zpp_inner_zn.wrap_a1;null==(t=this.outer_zn).zpp_inner_zn.wrap_a2&&t.zpp_inner_zn.setup_a2();var r=new nape_constraint_WeldJoint(null,null,i,t.zpp_inner_zn.wrap_a2);if(this.copyto(r),null!=n&&null!=this.b1){for(var l=null,s=0;s<n.length;){var a=n[s];if(++s,a.id==this.b1.id){l=a.bc;break}}null!=l?r.zpp_inner_zn.b1=l.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b1.id,(function(n){r.zpp_inner_zn.b1=n.zpp_inner})))}if(null!=n&&null!=this.b2){for(l=null,s=0;s<n.length;){a=n[s];if(++s,a.id==this.b2.id){l=a.bc;break}}null!=l?r.zpp_inner_zn.b2=l.zpp_inner:e.push(zpp_$nape_constraint_ZPP_$CopyHelper.todo(this.b2.id,(function(n){r.zpp_inner_zn.b2=n.zpp_inner})))}return r},validate:function(){if(null==this.b1||null==this.b2)throw haxe_Exception.thrown("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw haxe_Exception.thrown("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw haxe_Exception.thrown("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw haxe_Exception.thrown("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){if(this.b1.component==this.b1.component.parent)i=this.b1.component;else{for(var n=this.b1.component,e=null;n!=n.parent;){var t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}if(2==this.b2.type){var i,r;if(this.b2.component==this.b2.component.parent)i=this.b2.component;else{for(n=this.b2.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}i=n}if(this.component==this.component.parent)r=this.component;else{for(n=this.component,e=null;n!=n.parent;){t=n.parent;n.parent=e,e=n,n=t}for(;null!=e;){t=e.parent;e.parent=n,e=t}r=n}i!=r&&(i.rank<r.rank?i.parent=r:i.rank>r.rank?r.parent=i:(r.parent=i,i.rank++))}},pair_exists:function(n,e){return this.b1.id==n&&this.b2.id==e||this.b1.id==e&&this.b2.id==n},clearcache:function(){this.jAccx=0,this.jAccy=0,this.jAccz=0,this.pre_dt=-1},preStep:function(n){-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t=this.b1.smass+this.b2.smass;if(this.kMassa=t,this.kMassb=0,this.kMassd=t,this.kMassc=0,this.kMasse=0,this.kMassf=0,0!=this.b1.sinertia){var i=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassd+=i*this.a1relx,this.kMassc+=-r,this.kMasse+=i,this.kMassf+=this.b1.sinertia}if(0!=this.b2.sinertia){i=this.a2relx*this.b2.sinertia,r=this.a2rely*this.b2.sinertia;this.kMassa+=r*this.a2rely,this.kMassb+=-r*this.a2relx,this.kMassd+=i*this.a2relx,this.kMassc+=-r,this.kMasse+=i,this.kMassf+=this.b2.sinertia}var l,s=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(s!=s)this.kMassa=0,this.kMassb=0,this.kMassd=0,this.kMassc=0,this.kMasse=0,this.kMassf=0,l=7;else if(0==s){var a=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,a|=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,a|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,a|=4),this.kMassb=this.kMassc=this.kMasse=0,l=a}else{var o=(s=1/s)*(this.kMassd*this.kMassf-this.kMasse*this.kMasse),p=s*(this.kMasse*this.kMassc-this.kMassb*this.kMassf),h=s*(this.kMassa*this.kMassf-this.kMassc*this.kMassc),u=s*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),_=s*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),c=s*(this.kMassa*this.kMassd-this.kMassb*this.kMassb);this.kMassa=o,this.kMassb=p,this.kMassd=h,this.kMassc=u,this.kMasse=_,this.kMassf=c,l=0}if(0!=(1&l)&&(this.jAccx=0),0!=(2&l)&&(this.jAccy=0),0!=(4&l)&&(this.jAccz=0),this.stiff)this.biasx=0,this.biasy=0,this.biasz=0,this.gamma=0;else{var d,f=2*Math.PI*this.frequency;this.gamma=1/(n*f*(2*this.damping+f*n));var x=1/(1+this.gamma);d=n*f*f*this.gamma,this.gamma*=x;i=x;if(this.kMassa*=i,this.kMassb*=i,this.kMassd*=i,this.kMassc*=i,this.kMasse*=i,this.kMassf*=i,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.biasz=this.b2.rot-this.b1.rot-this.phase,this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;var b=y=-d;this.biasx*=b,this.biasy*=b,this.biasz*=y;var y=this.maxError,v=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(v>y*y){y=b=y*(1/Math.sqrt(v));this.biasx*=y,this.biasy*=y,this.biasz*=b}}b=y=e;return this.jAccx*=b,this.jAccy*=b,this.jAccz*=y,this.jMax=this.maxForce*n,!1},warmStart:function(){var n=this.b1.imass;this.b1.velx-=this.jAccx*n,this.b1.vely-=this.jAccy*n;n=this.b2.imass;this.b2.velx+=this.jAccx*n,this.b2.vely+=this.jAccy*n,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},applyImpulseVel:function(){var n,e,t;n=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),e=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var i=0,r=0,l=0;i=this.biasx-n,r=this.biasy-e,l=this.biasz-t;var s=this.kMassa*i+this.kMassb*r+this.kMassc*l,a=this.kMassb*i+this.kMassd*r+this.kMasse*l;l=this.kMassc*i+this.kMasse*r+this.kMassf*l,i=s,r=a;var o=_=this.gamma;i-=this.jAccx*o,r-=this.jAccy*o,l-=this.jAccz*_;var p,h,u;p=this.jAccx,h=this.jAccy,u=this.jAccz;o=_=1;if(this.jAccx+=i*o,this.jAccy+=r*o,this.jAccz+=l*_,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else if(!this.stiff){var _=this.jMax,c=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(c>_*_){_=o=_*(1/Math.sqrt(c));this.jAccx*=_,this.jAccy*=_,this.jAccz*=o}}i=this.jAccx-p,r=this.jAccy-h,l=this.jAccz-u;_=this.b1.imass;this.b1.velx-=i*_,this.b1.vely-=r*_;_=this.b2.imass;return this.b2.velx+=i*_,this.b2.vely+=r*_,this.b1.angvel-=(r*this.a1relx-i*this.a1rely+l)*this.b1.iinertia,this.b2.angvel+=(r*this.a2relx-i*this.a2rely+l)*this.b2.iinertia,!1},applyImpulsePos:function(){var n,e;n=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,e=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var t,i;t=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,i=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,l=0,s=0;r=this.b2.posx+t-(this.b1.posx+n),l=this.b2.posy+i-(this.b1.posy+e),s=this.b2.rot-this.b1.rot-this.phase;var a=0,o=0,p=0;if(this.breakUnderError&&r*r+l*l+s*s>this.maxError*this.maxError)return!0;var h=!0;r*r+l*l<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop&&(h=!1,r=0,l=0);var u=nape_Config.constraintAngularSlop;if(s*s<u*u){if(!h)return!1;s=0}if(s*=c=.5,(r*=f=c)*r+(l*=f)*l>6){var _=this.b1.smass+this.b2.smass;if(_>nape_Config.epsilon){if((d=(a=-r*(_=.75/_))*a+(o=-l*_)*o)>(c=20)*c)a*=f=c*(1/Math.sqrt(d)),o*=f;var c=this.b1.imass;this.b1.posx-=a*c,this.b1.posy-=o*c;c=this.b2.imass;this.b2.posx+=a*c,this.b2.posy+=o*c,r=this.b2.posx+t-(this.b1.posx+n),l=this.b2.posy+i-(this.b1.posy+e),s=this.b2.rot-this.b1.rot-this.phase,r*=f=c=.5,l*=f,s*=c}}var d,f,x=0,b=0,y=0,v=0,m=0,g=0;if(x=k=this.b1.smass+this.b2.smass,b=0,y=k,v=0,m=0,g=0,0!=this.b1.sinertia){var z=n*this.b1.sinertia;x+=(U=e*this.b1.sinertia)*e,b+=-U*n,y+=z*n,v+=-U,m+=z,g+=this.b1.sinertia}if(0!=this.b2.sinertia){z=t*this.b2.sinertia;x+=(U=i*this.b2.sinertia)*i,b+=-U*t,y+=z*t,v+=-U,m+=z,g+=this.b2.sinertia}(p=-s,(d=(a=-r)*a+(o=-l)*o)>(c=6)*c)&&(a*=f=c*(1/Math.sqrt(d)),o*=f);var w=x*(y*g-m*m)+b*(v*m-b*g)+v*(b*m-v*y);if(w!=w)a=o=p=0;else if(0==w)0!=x?a/=x:a=0,0!=y?o/=y:o=0,0!=g?p/=g:p=0;else{var O=m*v-b*g,C=b*m-v*y,E=b*v-x*m,U=(z=(w=1/w)*(a*(y*g-m*m)+o*O+p*C),w*(a*O+o*(x*g-v*v)+p*E));p=w*(a*C+o*E+p*(x*y-b*b)),a=z,o=U}c=this.b1.imass;this.b1.posx-=a*c,this.b1.posy-=o*c;c=this.b2.imass;this.b2.posx+=a*c,this.b2.posy+=o*c;var M=this.b1,T=-(o*n-a*e+p)*this.b1.iinertia;if(M.rot+=T,T*T>1e-4)M.axisx=Math.sin(M.rot),M.axisy=Math.cos(M.rot);else{var k=1-(S=T*T)*S/8,D=((A=1-.5*S)*M.axisx+T*M.axisy)*k;M.axisy=(A*M.axisy-T*M.axisx)*k,M.axisx=D}M=this.b2,T=(o*t-a*i+p)*this.b2.iinertia;if(M.rot+=T,T*T>1e-4)M.axisx=Math.sin(M.rot),M.axisy=Math.cos(M.rot);else{var S,A;k=1-(S=T*T)*S/8,D=((A=1-.5*S)*M.axisx+T*M.axisy)*k;M.axisy=(A*M.axisy-T*M.axisx)*k,M.axisx=D}return!1},draw:function(n){},__class__:zpp_$nape_constraint_ZPP_$WeldJoint});var zpp_$nape_dynamics_ZPP_$Arbiter=function(){this.sensorarb=null,this.fluidarb=null,this.colarb=null,this.type=0,this.pair=null,this.ws2=null,this.ws1=null,this.b2=null,this.b1=null,this.invalidated=!1,this.immState=0,this.fresh=!1,this.continuous=!1,this.presentable=!1,this.intchange=!1,this.present=0,this.sleeping=!1,this.cleared=!1,this.active=!1,this.endGenerated=0,this.sleep_stamp=0,this.up_stamp=0,this.stamp=0,this.di=0,this.id=0,this.hnext=null,this.outer=null};t["zpp_nape.dynamics.ZPP_Arbiter"]=zpp_$nape_dynamics_ZPP_$Arbiter,zpp_$nape_dynamics_ZPP_$Arbiter.__name__="zpp_nape.dynamics.ZPP_Arbiter",zpp_$nape_dynamics_ZPP_$Arbiter.prototype={wrapper:function(){return null==this.outer&&(zpp_$nape_dynamics_ZPP_$Arbiter.internal=!0,this.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?(this.colarb.outer_zn=new nape_dynamics_CollisionArbiter,this.outer=this.colarb.outer_zn):this.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?(this.fluidarb.outer_zn=new nape_dynamics_FluidArbiter,this.outer=this.fluidarb.outer_zn):this.outer=new nape_dynamics_Arbiter,this.outer.zpp_inner=this,zpp_$nape_dynamics_ZPP_$Arbiter.internal=!1),this.outer},inactiveme:function(){return!this.active},acting:function(){return!!this.active&&0!=(1&this.immState)},swap_features:function(){var n=this.b1;this.b1=this.b2,this.b2=n;n=this.ws1;this.ws1=this.ws2,this.ws2=n;n=this.colarb.s1;this.colarb.s1=this.colarb.s2,this.colarb.s2=n},lazyRetire:function(n,e){if(this.cleared=!0,null==e||this.b2==e)for(var t=null,i=(r=this.b1.arbiters).head;null!=i;){if(i.elt==this){null==t?(s=(l=r.head).next,r.head=s,null==r.head&&(r.pushmod=!0)):(s=(l=t.next).next,t.next=s,null==s&&(r.pushmod=!0)),(a=l).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=a,r.modified=!0,r.length--,r.pushmod=!0,!0;break}t=i,i=i.next}if(null==e||this.b1==e){var r;for(t=null,i=(r=this.b2.arbiters).head;null!=i;){if(i.elt==this){var l,s,a;null==t?(s=(l=r.head).next,r.head=s,null==r.head&&(r.pushmod=!0)):(s=(l=t.next).next,t.next=s,null==s&&(r.pushmod=!0)),(a=l).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=a,r.modified=!0,r.length--,r.pushmod=!0,!0;break}t=i,i=i.next}}null!=this.pair&&(this.pair.arb=null,this.pair=null),this.active=!1,n.f_arbiters.modified=!0},sup_assign:function(n,e,t,i){this.b1=n.body,this.ws1=n,this.b2=e.body,this.ws2=e,this.id=t,this.di=i;var r=this.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++;var l,s;r=this.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},sup_retire:function(){if(!this.cleared){for(var n=null,e=(t=this.b1.arbiters).head;null!=e;){if(e.elt==this){null==n?(r=(i=t.head).next,t.head=r,null==t.head&&(t.pushmod=!0)):(r=(i=n.next).next,n.next=r,null==r&&(t.pushmod=!0)),(l=i).elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,t.modified=!0,t.length--,t.pushmod=!0,!0;break}n=e,e=e.next}var t;for(n=null,e=(t=this.b2.arbiters).head;null!=e;){if(e.elt==this){var i,r,l;null==n?(r=(i=t.head).next,t.head=r,null==t.head&&(t.pushmod=!0)):(r=(i=n.next).next,n.next=r,null==r&&(t.pushmod=!0)),(l=i).elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,t.modified=!0,t.length--,t.pushmod=!0,!0;break}n=e,e=e.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1},__class__:zpp_$nape_dynamics_ZPP_$Arbiter};var zpp_$nape_dynamics_ZPP_$SensorArbiter=function(){this.next=null,zpp_$nape_dynamics_ZPP_$Arbiter.call(this),this.type=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR,this.sensorarb=this};t["zpp_nape.dynamics.ZPP_SensorArbiter"]=zpp_$nape_dynamics_ZPP_$SensorArbiter,zpp_$nape_dynamics_ZPP_$SensorArbiter.__name__="zpp_nape.dynamics.ZPP_SensorArbiter",zpp_$nape_dynamics_ZPP_$SensorArbiter.__super__=zpp_$nape_dynamics_ZPP_$Arbiter,zpp_$nape_dynamics_ZPP_$SensorArbiter.prototype=$extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{alloc:function(){},free:function(){},assign:function(n,e,t,i){this.b1=n.body,this.ws1=n,this.b2=e.body,this.ws2=e,this.id=t,this.di=i;var r=this.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++;var l,s;r=this.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},retire:function(){if(!this.cleared){for(var n=null,e=(t=this.b1.arbiters).head;null!=e;){if(e.elt==this){null==n?(r=(i=t.head).next,t.head=r,null==t.head&&(t.pushmod=!0)):(r=(i=n.next).next,n.next=r,null==r&&(t.pushmod=!0)),(l=i).elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,t.modified=!0,t.length--,t.pushmod=!0,!0;break}n=e,e=e.next}var t;for(n=null,e=(t=this.b2.arbiters).head;null!=e;){if(e.elt==this){var i,r;null==n?(r=(i=t.head).next,t.head=r,null==t.head&&(t.pushmod=!0)):(r=(i=n.next).next,n.next=r,null==r&&(t.pushmod=!0)),(l=i).elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,t.modified=!0,t.length--,t.pushmod=!0,!0;break}n=e,e=e.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}var l;this.b1=this.b2=null,this.active=!1,this.intchange=!1,(l=this).next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=l},makemutable:function(){},makeimmutable:function(){},__class__:zpp_$nape_dynamics_ZPP_$SensorArbiter});var zpp_$nape_dynamics_ZPP_$FluidArbiter=function(){this.pre_dt=0,this.mutable=!1,this.wrap_position=null,this.buoyy=0,this.buoyx=0,this.ny=0,this.nx=0,this.lgamma=0,this.dampy=0,this.dampx=0,this.vMassc=0,this.vMassb=0,this.vMassa=0,this.agamma=0,this.adamp=0,this.wMass=0,this.nodrag=!1,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0,this.overlap=0,this.centroidy=0,this.centroidx=0,this.next=null,this.outer_zn=null,zpp_$nape_dynamics_ZPP_$Arbiter.call(this),this.type=zpp_$nape_dynamics_ZPP_$Arbiter.FLUID,this.fluidarb=this,this.buoyx=0,this.buoyy=0,this.pre_dt=-1};t["zpp_nape.dynamics.ZPP_FluidArbiter"]=zpp_$nape_dynamics_ZPP_$FluidArbiter,zpp_$nape_dynamics_ZPP_$FluidArbiter.__name__="zpp_nape.dynamics.ZPP_FluidArbiter",zpp_$nape_dynamics_ZPP_$FluidArbiter.__super__=zpp_$nape_dynamics_ZPP_$Arbiter,zpp_$nape_dynamics_ZPP_$FluidArbiter.prototype=$extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{alloc:function(){},free:function(){},position_validate:function(){if(!this.active)throw haxe_Exception.thrown("Error: Arbiter not currently in use");this.wrap_position.zpp_inner.x=this.centroidx,this.wrap_position.zpp_inner.y=this.centroidy},position_invalidate:function(n){this.centroidx=n.x,this.centroidy=n.y},getposition:function(){var n;if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var e;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?e=new zpp_$nape_geom_ZPP_$Vec2:(e=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=0,e.y=0,n.zpp_inner=e,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t;if((i=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(i=n.zpp_inner)._validate&&i._validate(),0==n.zpp_inner.x){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i;null!=(i=n.zpp_inner)._validate&&i._validate(),t=0==n.zpp_inner.y}else t=!1;if(!t)n.zpp_inner.x=0,n.zpp_inner.y=0,null!=(i=n.zpp_inner)._invalidate&&i._invalidate(i)}n.zpp_inner.weak=!1,this.wrap_position=n,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!this.mutable,this.wrap_position.zpp_inner._validate=$bind(this,this.position_validate),this.wrap_position.zpp_inner._invalidate=$bind(this,this.position_invalidate)},assign:function(n,e,t,i){this.b1=n.body,this.ws1=n,this.b2=e.body,this.ws2=e,this.id=t,this.di=i;var r=this.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++;var l,s;r=this.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.nx=0,this.ny=1,this.dampx=0,this.dampy=0,this.adamp=0},retire:function(){if(!this.cleared){for(var n=null,e=(t=this.b1.arbiters).head;null!=e;){if(e.elt==this){null==n?(r=(i=t.head).next,t.head=r,null==t.head&&(t.pushmod=!0)):(r=(i=n.next).next,n.next=r,null==r&&(t.pushmod=!0)),(l=i).elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,t.modified=!0,t.length--,t.pushmod=!0,!0;break}n=e,e=e.next}var t;for(n=null,e=(t=this.b2.arbiters).head;null!=e;){if(e.elt==this){var i,r;null==n?(r=(i=t.head).next,t.head=r,null==t.head&&(t.pushmod=!0)):(r=(i=n.next).next,n.next=r,null==r&&(t.pushmod=!0)),(l=i).elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,t.modified=!0,t.length--,t.pushmod=!0,!0;break}n=e,e=e.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}var l;this.b1=this.b2=null,this.active=!1,this.intchange=!1,(l=this).next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=l,this.pre_dt=-1},makemutable:function(){this.mutable=!0,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!1)},makeimmutable:function(){this.mutable=!1,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!0)},inject:function(n,e,t){this.overlap=n,this.centroidx=e,this.centroidy=t},preStep:function(n,e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.r1x=this.centroidx-this.b1.posx,this.r1y=this.centroidy-this.b1.posy,this.r2x=this.centroidx-this.b2.posx,this.r2y=this.centroidy-this.b2.posy;var i=0,r=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(i=this.ws1.fluidProperties.gravityx,r=this.ws1.fluidProperties.gravityy):(i=n.gravityx,r=n.gravityy);var l=0,s=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(l=this.ws2.fluidProperties.gravityx,s=this.ws2.fluidProperties.gravityy):(l=n.gravityx,s=n.gravityy);var a=0,o=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var p=this.overlap*this.ws1.fluidProperties.density,h=this.overlap*this.ws2.fluidProperties.density;if(p>h)a-=i*(c=p+h),o-=r*c;else if(p<h){a+=l*(c=p+h),o+=s*c}else{var u=0,_=0;if(u=i+l,_=r+s,u*=c=.5,_*=c,this.ws1.worldCOMx*u+this.ws1.worldCOMy*_>this.ws2.worldCOMx*u+this.ws2.worldCOMy*_)a-=u*(c=p+h),o-=_*c;else a+=u*(c=p+h),o+=_*c}}else if(this.ws1.fluidEnabled){a-=i*(c=this.overlap*this.ws1.fluidProperties.density),o-=r*c}else if(this.ws2.fluidEnabled){a+=l*(c=this.overlap*this.ws2.fluidProperties.density),o+=s*c}if(a*=c=e,o*=c,this.buoyx=a,this.buoyy=o,2==this.b1.type){var c=this.b1.imass;this.b1.velx-=a*c,this.b1.vely-=o*c,this.b1.angvel-=(o*this.r1x-a*this.r1y)*this.b1.iinertia}if(2==this.b2.type){c=this.b2.imass;this.b2.velx+=a*c,this.b2.vely+=o*c,this.b2.angvel+=(o*this.r2x-a*this.r2y)*this.b2.iinertia}if(this.ws1.fluidEnabled&&0!=this.ws1.fluidProperties.viscosity||this.ws2.fluidEnabled&&0!=this.ws2.fluidProperties.viscosity){this.nodrag=!1;var d=0;if(this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),d+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area),this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),d+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area),0!=d){var f=this.b1.sinertia+this.b2.sinertia;this.wMass=0!=f?1/f:0,d*=4e-4;var x=2*Math.PI*d;this.agamma=1/(e*x*(2+x*e));var b=1/(1+this.agamma);this.agamma;this.agamma*=b,this.wMass*=b}else this.wMass=0,this.agamma=0;var y=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel)),v=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));if(!(y*y+v*v<nape_Config.epsilon*nape_Config.epsilon)){var m=y*y+v*v;y*=c=1/Math.sqrt(m),v*=c,this.nx=y,this.ny=v}d=0;if(this.ws1.fluidEnabled){var g=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area;if(0==this.ws2.type)d-=g*this.ws2.circle.radius*nape_Config.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{for(var z=0,w=0,O=this.ws2.polygon.edges.head;null!=O;){z+=(C=O.elt).length,(E=g*C.length*(C.gnormx*this.nx+C.gnormy*this.ny))>0&&(E*=-nape_Config.fluidVacuumDrag),w-=.5*E*nape_Config.fluidLinearDrag,O=O.next}d+=w/z}}if(this.ws2.fluidEnabled){g=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area;if(0==this.ws1.type)d-=g*this.ws1.circle.radius*nape_Config.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{for(z=0,w=0,O=this.ws1.polygon.edges.head;null!=O;){var C,E;z+=(C=O.elt).length,(E=g*C.length*(C.gnormx*this.nx+C.gnormy*this.ny))>0&&(E*=-nape_Config.fluidVacuumDrag),w-=.5*E*nape_Config.fluidLinearDrag,O=O.next}d+=w/z}}if(0!=d){var U=this.b1.smass+this.b2.smass,M=0,T=0,k=0;if(M=U,T=0,k=U,0!=this.b1.sinertia){var D=this.r1x*this.b1.sinertia;M+=(S=this.r1y*this.b1.sinertia)*this.r1y,T+=-S*this.r1x,k+=D*this.r1x}if(0!=this.b2.sinertia){var S;D=this.r2x*this.b2.sinertia;M+=(S=this.r2y*this.b2.sinertia)*this.r2y,T+=-S*this.r2x,k+=D*this.r2x}var A=M*k-T*T;if(A!=A)M=T=k=0;else if(0==A){0!=M?M=1/M:(M=0,1),0!=k?k=1/k:(k=0,2),T=0}else{c=k*(A=1/A);k=M*A,M=c,T*=-A}this.vMassa=M,this.vMassb=T,this.vMassc=k;x=2*Math.PI*d;this.lgamma=1/(e*x*(2+x*e));b=1/(1+this.lgamma);e*x*x*this.lgamma,this.lgamma*=b;D=b;this.vMassa*=D,this.vMassb*=D,this.vMassc*=D}else this.vMassa=0,this.vMassb=0,this.vMassc=0,this.lgamma=0}else this.nodrag=!0,this.dampx=0,this.dampy=0,this.adamp=0;c=t;this.dampx*=c,this.dampy*=c,this.adamp*=t},warmStart:function(){var n=this.b1.imass;this.b1.velx-=this.dampx*n,this.b1.vely-=this.dampy*n;n=this.b2.imass;this.b2.velx+=this.dampx*n,this.b2.vely+=this.dampy*n,this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y),this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y),this.b1.angvel-=this.adamp*this.b1.iinertia,this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var n=this.b1.angvel+this.b1.kinangvel,e=this.b2.angvel+this.b2.kinangvel,t=this.b1.velx+this.b1.kinvelx-this.r1y*n-(this.b2.velx+this.b2.kinvelx-this.r2y*e),i=this.b1.vely+this.b1.kinvely+this.r1x*n-(this.b2.vely+this.b2.kinvely+this.r2x*e),r=this.vMassa*t+this.vMassb*i;i=this.vMassb*t+this.vMassc*i,t=r;r=this.lgamma;t-=this.dampx*r,i-=this.dampy*r;r=1;this.dampx+=t*r,this.dampy+=i*r;r=this.b1.imass;this.b1.velx-=t*r,this.b1.vely-=i*r;r=this.b2.imass;this.b2.velx+=t*r,this.b2.vely+=i*r,this.b1.angvel-=this.b1.iinertia*(i*this.r1x-t*this.r1y),this.b2.angvel+=this.b2.iinertia*(i*this.r2x-t*this.r2y);var l=(n-e)*this.wMass-this.adamp*this.agamma;this.adamp+=l,this.b1.angvel-=l*this.b1.iinertia,this.b2.angvel+=l*this.b2.iinertia}},__class__:zpp_$nape_dynamics_ZPP_$FluidArbiter});var zpp_$nape_dynamics_ZPP_$ColArbiter=function(){this.pre_dt=0,this.mutable=!1,this.stat=!1,this.next=null,this.hpc2=!1,this.hc2=!1,this.oc2=null,this.c2=null,this.oc1=null,this.c1=null,this.__ref_vertex=0,this.__ref_edge2=null,this.__ref_edge1=null,this.biasCoef=0,this.rev=!1,this.radius=0,this.lproj=0,this.lnormy=0,this.lnormx=0,this.surfacey=0,this.surfacex=0,this.k2y=0,this.k2x=0,this.k1y=0,this.k1x=0,this.rt2b=0,this.rn2b=0,this.rt2a=0,this.rn2a=0,this.rt1b=0,this.rn1b=0,this.rt1a=0,this.rn1a=0,this.jrAcc=0,this.rMass=0,this.Kc=0,this.Kb=0,this.Ka=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_normal=null,this.ny=0,this.nx=0,this.innards=null,this.wrap_contacts=null,this.contacts=null,this.s2=null,this.s1=null,this.userdef_rfric=!1,this.userdef_restitution=!1,this.userdef_stat_fric=!1,this.userdef_dyn_fric=!1,this.rfric=0,this.restitution=0,this.stat_fric=0,this.dyn_fric=0,this.outer_zn=null,zpp_$nape_dynamics_ZPP_$Arbiter.call(this),this.pre_dt=-1,this.contacts=new zpp_$nape_dynamics_ZPP_$Contact,this.innards=new zpp_$nape_dynamics_ZPP_$IContact,this.type=zpp_$nape_dynamics_ZPP_$Arbiter.COL,this.colarb=this};t["zpp_nape.dynamics.ZPP_ColArbiter"]=zpp_$nape_dynamics_ZPP_$ColArbiter,zpp_$nape_dynamics_ZPP_$ColArbiter.__name__="zpp_nape.dynamics.ZPP_ColArbiter",zpp_$nape_dynamics_ZPP_$ColArbiter.__super__=zpp_$nape_dynamics_ZPP_$Arbiter,zpp_$nape_dynamics_ZPP_$ColArbiter.prototype=$extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{normal_validate:function(){if(this.cleared)throw haxe_Exception.thrown("Error: Arbiter not currently in use");this.wrap_normal.zpp_inner.x=this.nx,this.wrap_normal.zpp_inner.y=this.ny,this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},getnormal:function(){var n,e=0,t=0;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_normal=n,this.wrap_normal.zpp_inner._immutable=!0,this.wrap_normal.zpp_inner._inuse=!0,this.wrap_normal.zpp_inner._validate=$bind(this,this.normal_validate)},alloc:function(){},free:function(){this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null},injectContact:function(n,e,t,i,r,l,s){null==s&&(s=!1);for(var a=null,o=this.contacts.next;null!=o;){var p=o;if(l==p.hash){a=p;break}o=o.next}if(null==a){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?a=new zpp_$nape_dynamics_ZPP_$Contact:(a=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=a.next,a.next=null);var h=a.inner;h.jnAcc=h.jtAcc=0,a.hash=l,a.fresh=!0,a.arbiter=this,this.jrAcc=0;var u=this.contacts;a._inuse=!0;var _=a;_.next=u.next,u.next=_,u.modified=!0,u.length++,this.innards.add(h)}else a.fresh=!1;return a.px=n,a.py=e,this.nx=t,this.ny=i,a.dist=r,a.stamp=this.stamp,a.posOnly=s,a},assign:function(n,e,t,i){this.b1=n.body,this.ws1=n,this.b2=e.body,this.ws2=e,this.id=t,this.di=i;var r=this.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++;var l,s;r=this.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(l=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l.next,l.next=null),l.elt=this,(s=l).next=r.head,r.head=s,r.modified=!0,r.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.s1=n,this.s2=e,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},calcProperties:function(){this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},validate_props:function(){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)))},retire:function(){if(!this.cleared){for(var n=null,e=(r=this.b1.arbiters).head,t=!1;null!=e;){if(e.elt==this){null==n?(s=(i=r.head).next,r.head=s,null==r.head&&(r.pushmod=!0)):(s=(i=n.next).next,n.next=s,null==s&&(r.pushmod=!0)),(a=i).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=a,r.modified=!0,r.length--,r.pushmod=!0,t=!0;break}n=e,e=e.next}for(n=null,e=(r=this.b2.arbiters).head,t=!1;null!=e;){if(e.elt==this){var i;null==n?(s=(i=r.head).next,r.head=s,null==r.head&&(r.pushmod=!0)):(s=(i=n.next).next,n.next=s,null==s&&(r.pushmod=!0)),(a=i).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=a,r.modified=!0,r.length--,r.pushmod=!0,t=!0;break}n=e,e=e.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}for(this.b1=this.b2=null,this.active=!1,this.intchange=!1;null!=this.contacts.next;){var r;t=(r=this.contacts).next;r.pop(),(a=t).arbiter=null,a.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=a;var l=this.innards,s=l.next;l.next=s.next,s._inuse=!1,null==l.next&&(l.pushmod=!0),l.modified=!0,l.length--}var a;(a=this).userdef_dyn_fric=!1,a.userdef_stat_fric=!1,a.userdef_restitution=!1,a.userdef_rfric=!1,a.__ref_edge1=a.__ref_edge2=null,a.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=a,this.pre_dt=-1},makemutable:function(){this.mutable=!0,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!1),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!1)},makeimmutable:function(){this.mutable=!1,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!0),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!0)},contacts_adder:function(n){throw haxe_Exception.thrown("Error: Cannot add new contacts, information required is far too specific and detailed :)")},contacts_subber:function(n){for(var e=null,t=null,i=this.innards.next,r=this.contacts.next;null!=r;){var l=r;if(l==n.zpp_inner){this.contacts.erase(e),this.innards.erase(t);var s=l;s.arbiter=null,s.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=s;break}e=r,t=i,i=i.next,r=r.next}},setupcontacts:function(){this.wrap_contacts=zpp_$nape_util_ZPP_$ContactList.get(this.contacts,!0),this.wrap_contacts.zpp_inner.immutable=!this.mutable,this.wrap_contacts.zpp_inner.adder=$bind(this,this.contacts_adder),this.wrap_contacts.zpp_inner.dontremove=!0,this.wrap_contacts.zpp_inner.subber=$bind(this,this.contacts_subber)},cleanupContacts:function(){var n=!0,e=null,t=null,i=this.innards.next;this.hc2=!1;for(var r=this.contacts.next;null!=r;){var l=r;if(l.stamp+nape_Config.arbiterExpirationDelay<this.stamp){var s,a,o=this.contacts;null==e?(a=(s=o.next).next,o.next=a,null==o.next&&(o.pushmod=!0)):(a=(s=e.next).next,e.next=a,null==a&&(o.pushmod=!0)),s._inuse=!1,o.modified=!0,o.length--,o.pushmod=!0,r=a;var p,h,u=this.innards;null==t?(h=(p=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(p=t.next).next,t.next=h,null==h&&(u.pushmod=!0)),p._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,i=h;var _=l;_.arbiter=null,_.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=_}else{var c=l.inner,d=l.active;l.active=l.stamp==this.stamp,l.active&&(n?(n=!1,this.c1=c,this.oc1=l):(this.hc2=!0,this.c2=c,this.oc2=l)),d!=l.active&&(this.contacts.modified=!0),e=r,t=i,i=i.next,r=r.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var f=this.c1;this.c1=this.c2,this.c2=f;var x=this.oc1;this.oc1=this.oc2,this.oc2=x,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(n=!0)}else this.hpc2=!1;return n},preStep:function(n){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))),-1==this.pre_dt&&(this.pre_dt=n);var e=n/this.pre_dt;this.pre_dt=n;var t=this.b1.smass+this.b2.smass;this.hc2=!1;var i=!0,r=2!=this.b1.type||2!=this.b2.type?this.continuous?nape_Config.contactContinuousStaticBiasCoef:nape_Config.contactStaticBiasCoef:this.continuous?nape_Config.contactContinuousBiasCoef:nape_Config.contactBiasCoef;this.biasCoef=r,this.continuous=!1;for(var l=null,s=null,a=this.innards.next,o=this.contacts.next;null!=o;){var p=o;if(p.stamp+nape_Config.arbiterExpirationDelay<this.stamp){var h,u,_=this.contacts;null==l?(u=(h=_.next).next,_.next=u,null==_.next&&(_.pushmod=!0)):(u=(h=l.next).next,l.next=u,null==u&&(_.pushmod=!0)),h._inuse=!1,_.modified=!0,_.length--,_.pushmod=!0,o=u;var c,d,f=this.innards;null==s?(d=(c=f.next).next,f.next=d,null==f.next&&(f.pushmod=!0)):(d=(c=s.next).next,s.next=d,null==d&&(f.pushmod=!0)),c._inuse=!1,f.modified=!0,f.length--,f.pushmod=!0,a=d;var x=p;x.arbiter=null,x.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=x}else{var b=p.inner,y=p.active;if(p.active=p.stamp==this.stamp,p.active){i?(i=!1,this.c1=b,this.oc1=p):(this.hc2=!0,this.c2=b,this.oc2=p),b.r2x=p.px-this.b2.posx,b.r2y=p.py-this.b2.posy,b.r1x=p.px-this.b1.posx,b.r1y=p.py-this.b1.posy;var v=b.r2x*this.nx+b.r2y*this.ny,m=t+this.b2.sinertia*(v*v),g=b.r1x*this.nx+b.r1y*this.ny;m+=this.b1.sinertia*(g*g),b.tMass=m<nape_Config.epsilon*nape_Config.epsilon?0:1/m;var z=this.ny*b.r2x-this.nx*b.r2y,w=t+this.b2.sinertia*(z*z),O=this.ny*b.r1x-this.nx*b.r1y;w+=this.b1.sinertia*(O*O),b.nMass=w<nape_Config.epsilon*nape_Config.epsilon?0:1/w;var C=0,E=0,U=this.b2.angvel+this.b2.kinangvel;C=this.b2.velx+this.b2.kinvelx-b.r2y*U,E=this.b2.vely+this.b2.kinvely+b.r2x*U,U=this.b1.angvel+this.b1.kinangvel,C-=this.b1.velx+this.b1.kinvelx-b.r1y*U,E-=this.b1.vely+this.b1.kinvely+b.r1x*U;var M=this.nx*C+this.ny*E;p.elasticity=this.restitution,b.bounce=M*p.elasticity,b.bounce>-nape_Config.elasticThreshold&&(b.bounce=0),M=E*this.nx-C*this.ny;var T=nape_Config.staticFrictionThreshold;b.friction=M*M>T*T?this.dyn_fric:this.stat_fric,b.jnAcc*=e,b.jtAcc*=e}y!=p.active&&(this.contacts.modified=!0),l=o,s=a,a=a.next,o=o.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var k=this.c1;this.c1=this.c2,this.c2=k;var D=this.oc1;this.oc1=this.oc2,this.oc2=D,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(i=!0)}else this.hpc2=!1;if(this.jrAcc*=e,i||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel)),this.hc2)if(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=t+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=t+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=t+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<nape_Config.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)){this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc;var S=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(S!=S)this.kMassa=this.kMassb=this.kMassc=0;else if(0==S){0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,2),this.kMassb=0}else{S=1/S;var A=this.kMassc*S;this.kMassc=this.kMassa*S,this.kMassa=A,this.kMassb*=-S}}else{if(this.hc2=!1,this.oc2.dist<this.oc1.dist){A=this.c1;this.c1=this.c2,this.c2=A}this.oc2.active=!1,this.contacts.modified=!0}this.surfacex=this.b2.svelx,this.surfacey=this.b2.svely;A=1;return this.surfacex+=this.b1.svelx*A,this.surfacey+=this.b1.svely*A,this.surfacex=-this.surfacex,this.surfacey=-this.surfacey,this.rMass=this.b1.sinertia+this.b2.sinertia,0!=this.rMass&&(this.rMass=1/this.rMass),i},warmStart:function(){var n=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,e=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,t=this.b1.imass;this.b1.velx-=n*t,this.b1.vely-=e*t,this.b1.angvel-=this.b1.iinertia*(e*this.c1.r1x-n*this.c1.r1y);t=this.b2.imass;if(this.b2.velx+=n*t,this.b2.vely+=e*t,this.b2.angvel+=this.b2.iinertia*(e*this.c1.r2x-n*this.c1.r2y),this.hc2){n=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,e=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,t=this.b1.imass;this.b1.velx-=n*t,this.b1.vely-=e*t,this.b1.angvel-=this.b1.iinertia*(e*this.c2.r1x-n*this.c2.r1y);t=this.b2.imass;this.b2.velx+=n*t,this.b2.vely+=e*t,this.b2.angvel+=this.b2.iinertia*(e*this.c2.r2x-n*this.c2.r2y)}this.b2.angvel+=this.jrAcc*this.b2.iinertia,this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var n=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),e=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),t=(e*this.nx-n*this.ny+this.surfacex)*this.c1.tMass,i=this.c1.friction*this.c1.jnAcc,r=this.c1.jtAcc,l=r-t;l>i?l=i:l<-i&&(l=-i),t=l-r,this.c1.jtAcc=l;var s=-this.ny*t,a=this.nx*t;if(this.b2.velx+=s*this.b2.imass,this.b2.vely+=a*this.b2.imass,this.b1.velx-=s*this.b1.imass,this.b1.vely-=a*this.b1.imass,this.b2.angvel+=this.rt1b*t*this.b2.iinertia,this.b1.angvel-=this.rt1a*t*this.b1.iinertia,this.hc2){var o=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),p=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);t=(p*this.nx-o*this.ny+this.surfacex)*this.c2.tMass,i=this.c2.friction*this.c2.jnAcc,(l=(r=this.c2.jtAcc)-t)>i?l=i:l<-i&&(l=-i),t=l-r,this.c2.jtAcc=l,s=-this.ny*t,a=this.nx*t,this.b2.velx+=s*this.b2.imass,this.b2.vely+=a*this.b2.imass,this.b1.velx-=s*this.b1.imass,this.b1.vely-=a*this.b1.imass,this.b2.angvel+=this.rt2b*t*this.b2.iinertia,this.b1.angvel-=this.rt2a*t*this.b1.iinertia,n=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),e=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),o=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),p=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);var h=this.c1.jnAcc,u=this.c2.jnAcc,_=n*this.nx+e*this.ny+this.surfacey+this.c1.bounce-(this.Ka*h+this.Kb*u),c=o*this.nx+p*this.ny+this.surfacey+this.c2.bounce-(this.Kb*h+this.Kc*u),d=-(this.kMassa*_+this.kMassb*c),f=-(this.kMassb*_+this.kMassc*c);d>=0&&f>=0?(_=d-h,c=f-u,this.c1.jnAcc=d,this.c2.jnAcc=f):(d=-this.c1.nMass*_)>=0&&this.Kb*d+c>=0?(_=d-h,c=-u,this.c1.jnAcc=d,this.c2.jnAcc=0):(f=-this.c2.nMass*c)>=0&&this.Kb*f+_>=0?(_=-h,c=f-u,this.c1.jnAcc=0,this.c2.jnAcc=f):_>=0&&c>=0?(_=-h,c=-u,this.c1.jnAcc=this.c2.jnAcc=0):(_=0,c=0),t=_+c,s=this.nx*t,a=this.ny*t,this.b2.velx+=s*this.b2.imass,this.b2.vely+=a*this.b2.imass,this.b1.velx-=s*this.b1.imass,this.b1.vely-=a*this.b1.imass,this.b2.angvel+=(this.rn1b*_+this.rn2b*c)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*_+this.rn2a*c)*this.b1.iinertia}else{if(0!=this.radius)t=(this.b2.angvel-this.b1.angvel)*this.rMass,i=this.rfric*this.c1.jnAcc,r=this.jrAcc,this.jrAcc-=t,this.jrAcc>i?this.jrAcc=i:this.jrAcc<-i&&(this.jrAcc=-i),t=this.jrAcc-r,this.b2.angvel+=t*this.b2.iinertia,this.b1.angvel-=t*this.b1.iinertia;n=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),e=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),t=(this.c1.bounce+(this.nx*n+this.ny*e)+this.surfacey)*this.c1.nMass,(l=(r=this.c1.jnAcc)-t)<0&&(l=0),t=l-r,this.c1.jnAcc=l,s=this.nx*t,a=this.ny*t,this.b2.velx+=s*this.b2.imass,this.b2.vely+=a*this.b2.imass,this.b1.velx-=s*this.b1.imass,this.b1.vely-=a*this.b1.imass,this.b2.angvel+=this.rn1b*t*this.b2.iinertia,this.b1.angvel-=this.rn1a*t*this.b1.iinertia}},applyImpulsePos:function(){if(2==this.ptype){var n=this.c1,e=0,t=0,i=0,r=0;i=this.b2.axisy*n.lr2x-this.b2.axisx*n.lr2y,r=n.lr2x*this.b2.axisx+n.lr2y*this.b2.axisy;var l=1;i+=this.b2.posx*l,r+=this.b2.posy*l;var s=0,a=0;s=this.b1.axisy*n.lr1x-this.b1.axisx*n.lr1y,a=n.lr1x*this.b1.axisx+n.lr1y*this.b1.axisy;l=1,e=0,t=0;e=i-(s+=this.b1.posx*l),t=r-(a+=this.b1.posy*l);var o=Math.sqrt(e*e+t*t),p=this.radius-nape_Config.collisionSlop,h=o-p;if(e*this.nx+t*this.ny<0&&(e=-e,t=-t,h-=this.radius),h<0)if(o<nape_Config.epsilon)0!=this.b1.smass?this.b1.posx+=10*nape_Config.epsilon:this.b2.posx+=10*nape_Config.epsilon;else{e*=l=1/o;var u=.5*(s+i),_=.5*(a+r),c=o-p,d=(t*=l)*(s=u-this.b1.posx)-e*(a=_-this.b1.posy),f=t*(i=u-this.b2.posx)-e*(r=_-this.b2.posy);if(0!=(Sn=this.b2.smass+f*f*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia)){var x=0,b=0;x=e*(l=An=-this.biasCoef*c/Sn),b=t*l;l=this.b1.imass;this.b1.posx-=x*l,this.b1.posy-=b*l;var y=this.b1,v=-d*this.b1.iinertia*An;if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{var m=1-(Pn=v*v)*Pn/8,g=((Vn=1-.5*Pn)*y.axisx+v*y.axisy)*m;y.axisy=(Vn*y.axisy-v*y.axisx)*m,y.axisx=g}l=this.b2.imass;this.b2.posx+=x*l,this.b2.posy+=b*l;y=this.b2,v=f*this.b2.iinertia*An;if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{m=1-(Pn=v*v)*Pn/8,g=((Vn=1-.5*Pn)*y.axisx+v*y.axisy)*m;y.axisy=(Vn*y.axisy-v*y.axisx)*m,y.axisx=g}}}}else{var z,w=0,O=0,C=0,E=0,U=0,M=0;if(0==this.ptype){w=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,O=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,z=this.lproj+(w*this.b1.posx+O*this.b1.posy),C=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,E=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy;l=1;if(C+=this.b2.posx*l,E+=this.b2.posy*l,this.hpc2){U=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,M=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy;l=1;U+=this.b2.posx*l,M+=this.b2.posy*l}}else{w=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,O=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,z=this.lproj+(w*this.b2.posx+O*this.b2.posy),C=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,E=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy;l=1;if(C+=this.b1.posx*l,E+=this.b1.posy*l,this.hpc2){U=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,M=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy;l=1;U+=this.b1.posx*l,M+=this.b1.posy*l}}var T=C*w+E*O-z-this.radius;T+=nape_Config.collisionSlop;var k=0;if(this.hpc2&&(k=U*w+M*O-z-this.radius,k+=nape_Config.collisionSlop),T<0||k<0){this.rev&&(w=-w,O=-O);var D,S;D=C-this.b1.posx,S=E-this.b1.posy;var A,P;A=C-this.b2.posx,P=E-this.b2.posy;if(this.hpc2){var V=O*D-w*S,I=O*A-w*P,N=O*(U-this.b1.posx)-w*(M-this.b1.posy),F=O*(U-this.b2.posx)-w*(M-this.b2.posy),R=this.b1.smass+this.b2.smass;this.kMassa=R+this.b1.sinertia*V*V+this.b2.sinertia*I*I,this.kMassb=R+this.b1.sinertia*V*N+this.b2.sinertia*I*F,this.kMassc=R+this.b1.sinertia*N*N+this.b2.sinertia*F*F;var L,B,G;L=this.kMassa,B=this.kMassb,G=this.kMassc;for(var j=T*this.biasCoef,K=k*this.biasCoef;;){var W=0,Y=0;W=-(W=j),Y=-(Y=K);var X=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(X!=X)W=Y=0;else if(0==X)0!=this.kMassa?W/=this.kMassa:W=0,0!=this.kMassc?Y/=this.kMassc:Y=0;else{l=(X=1/X)*(this.kMassc*W-this.kMassb*Y);Y=X*(this.kMassa*Y-this.kMassb*W),W=l}if(W>=0&&Y>=0){var H=(W+Y)*this.b1.imass;this.b1.posx-=w*H,this.b1.posy-=O*H;y=this.b1,v=-this.b1.iinertia*(V*W+N*Y);if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{m=1-(Pn=v*v)*Pn/8,g=((Vn=1-.5*Pn)*y.axisx+v*y.axisy)*m;y.axisy=(Vn*y.axisy-v*y.axisx)*m,y.axisx=g}var Z=(W+Y)*this.b2.imass;this.b2.posx+=w*Z,this.b2.posy+=O*Z;var q=this.b2,$=this.b2.iinertia*(I*W+F*Y);if(q.rot+=$,$*$>1e-4)q.axisx=Math.sin(q.rot),q.axisy=Math.cos(q.rot);else{var Q=$*$,J=1-.5*Q,nn=1-Q*Q/8,en=(J*q.axisx+$*q.axisy)*nn;q.axisy=(J*q.axisy-$*q.axisx)*nn,q.axisx=en}break}if(Y=0,(W=-j/L)>=0&&B*W+K>=0){var tn=(W+Y)*this.b1.imass;this.b1.posx-=w*tn,this.b1.posy-=O*tn;var rn=this.b1,ln=-this.b1.iinertia*(V*W+N*Y);if(rn.rot+=ln,ln*ln>1e-4)rn.axisx=Math.sin(rn.rot),rn.axisy=Math.cos(rn.rot);else{var sn=ln*ln,an=1-.5*sn,on=1-sn*sn/8,pn=(an*rn.axisx+ln*rn.axisy)*on;rn.axisy=(an*rn.axisy-ln*rn.axisx)*on,rn.axisx=pn}var hn=(W+Y)*this.b2.imass;this.b2.posx+=w*hn,this.b2.posy+=O*hn;var un=this.b2,_n=this.b2.iinertia*(I*W+F*Y);if(un.rot+=_n,_n*_n>1e-4)un.axisx=Math.sin(un.rot),un.axisy=Math.cos(un.rot);else{var cn=_n*_n,dn=1-.5*cn,xn=1-cn*cn/8,bn=(dn*un.axisx+_n*un.axisy)*xn;un.axisy=(dn*un.axisy-_n*un.axisx)*xn,un.axisx=bn}break}if(W=0,(Y=-K/G)>=0&&B*Y+j>=0){var yn=(W+Y)*this.b1.imass;this.b1.posx-=w*yn,this.b1.posy-=O*yn;var vn=this.b1,mn=-this.b1.iinertia*(V*W+N*Y);if(vn.rot+=mn,mn*mn>1e-4)vn.axisx=Math.sin(vn.rot),vn.axisy=Math.cos(vn.rot);else{var gn=mn*mn,zn=1-.5*gn,wn=1-gn*gn/8,On=(zn*vn.axisx+mn*vn.axisy)*wn;vn.axisy=(zn*vn.axisy-mn*vn.axisx)*wn,vn.axisx=On}var Cn=(W+Y)*this.b2.imass;this.b2.posx+=w*Cn,this.b2.posy+=O*Cn;var En=this.b2,Un=this.b2.iinertia*(I*W+F*Y);if(En.rot+=Un,Un*Un>1e-4)En.axisx=Math.sin(En.rot),En.axisy=Math.cos(En.rot);else{var Mn=Un*Un,Tn=1-.5*Mn,kn=1-Mn*Mn/8,Dn=(Tn*En.axisx+Un*En.axisy)*kn;En.axisy=(Tn*En.axisy-Un*En.axisx)*kn,En.axisx=Dn}break}break}}else{var Sn;d=O*D-w*S,f=O*A-w*P;if(0!=(Sn=this.b2.smass+f*f*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia)){var An;x=0,b=0;x=w*(l=An=-this.biasCoef*T/Sn),b=O*l;l=this.b1.imass;this.b1.posx-=x*l,this.b1.posy-=b*l;y=this.b1,v=-d*this.b1.iinertia*An;if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{m=1-(Pn=v*v)*Pn/8,g=((Vn=1-.5*Pn)*y.axisx+v*y.axisy)*m;y.axisy=(Vn*y.axisy-v*y.axisx)*m,y.axisx=g}l=this.b2.imass;this.b2.posx+=x*l,this.b2.posy+=b*l;y=this.b2,v=f*this.b2.iinertia*An;if(y.rot+=v,v*v>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{var Pn,Vn;m=1-(Pn=v*v)*Pn/8,g=((Vn=1-.5*Pn)*y.axisx+v*y.axisy)*m;y.axisy=(Vn*y.axisy-v*y.axisx)*m,y.axisx=g}}}}}},__class__:zpp_$nape_dynamics_ZPP_$ColArbiter});var zpp_$nape_dynamics_ZPP_$Contact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.elasticity=0,this.dist=0,this.fresh=!1,this.hash=0,this.stamp=0,this.posOnly=!1,this.active=!1,this.inner=null,this.arbiter=null,this.wrap_position=null,this.py=0,this.px=0,this.outer=null,this.inner=new zpp_$nape_dynamics_ZPP_$IContact};t["zpp_nape.dynamics.ZPP_Contact"]=zpp_$nape_dynamics_ZPP_$Contact,zpp_$nape_dynamics_ZPP_$Contact.__name__="zpp_nape.dynamics.ZPP_Contact",zpp_$nape_dynamics_ZPP_$Contact.prototype={wrapper:function(){return null==this.outer&&(zpp_$nape_dynamics_ZPP_$Contact.internal=!0,this.outer=new nape_dynamics_Contact,zpp_$nape_dynamics_ZPP_$Contact.internal=!1,this.outer.zpp_inner=this),this.outer},position_validate:function(){if(this.inactiveme())throw haxe_Exception.thrown("Error: Contact not currently in use");this.wrap_position.zpp_inner.x=this.px,this.wrap_position.zpp_inner.y=this.py},getposition:function(){var n;if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var e;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?e=new zpp_$nape_geom_ZPP_$Vec2:(e=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=0,e.y=0,n.zpp_inner=e,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t;if((i=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(i=n.zpp_inner)._validate&&i._validate(),0==n.zpp_inner.x){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i;null!=(i=n.zpp_inner)._validate&&i._validate(),t=0==n.zpp_inner.y}else t=!1;if(!t)n.zpp_inner.x=0,n.zpp_inner.y=0,null!=(i=n.zpp_inner)._invalidate&&i._invalidate(i)}n.zpp_inner.weak=!1,this.wrap_position=n,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!0,this.wrap_position.zpp_inner._validate=$bind(this,this.position_validate)},inactiveme:function(){return!(this.active&&null!=this.arbiter&&this.arbiter.active)},free:function(){this.arbiter=null},alloc:function(){},elem:function(){return this},begin:function(){return this.next},setbegin:function(n){this.next=n,this.modified=!0,this.pushmod=!0},add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},inlined_add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.next;null!=e;){var t=e;this.add(t),e=e.next}},insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},inlined_insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.next;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.next;return this.pop(),n},remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){var r,l;null==e?(l=(r=this.next).next,this.next=l,null==this.next&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){},inlined_clear:function(){},reverse:function(){for(var n=this.next,e=null;null!=n;){var t=n.next;n.next=e,this.next=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.next},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},front:function(){return this.next},back:function(){for(var n=this.next,e=n;null!=e;)n=e,e=e.next;return n},iterator_at:function(n){for(var e=this.next;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e:null},__class__:zpp_$nape_dynamics_ZPP_$Contact};var zpp_$nape_dynamics_ZPP_$IContact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.lr2y=0,this.lr2x=0,this.lr1y=0,this.lr1x=0,this.jtAcc=0,this.jnAcc=0,this.friction=0,this.bounce=0,this.tMass=0,this.nMass=0,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0};t["zpp_nape.dynamics.ZPP_IContact"]=zpp_$nape_dynamics_ZPP_$IContact,zpp_$nape_dynamics_ZPP_$IContact.__name__="zpp_nape.dynamics.ZPP_IContact",zpp_$nape_dynamics_ZPP_$IContact.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(n){this.next=n,this.modified=!0,this.pushmod=!0},add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},inlined_add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.next;null!=e;){var t=e;this.add(t),e=e.next}},insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},inlined_insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.next;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.next;return this.pop(),n},remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){var r,l;null==e?(l=(r=this.next).next,this.next=l,null==this.next&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){},inlined_clear:function(){},reverse:function(){for(var n=this.next,e=null;null!=n;){var t=n.next;n.next=e,this.next=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.next},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},front:function(){return this.next},back:function(){for(var n=this.next,e=n;null!=e;)n=e,e=e.next;return n},iterator_at:function(n){for(var e=this.next;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e:null},__class__:zpp_$nape_dynamics_ZPP_$IContact};var zpp_$nape_dynamics_ZPP_$InteractionFilter=function(){this.fluidMask=0,this.fluidGroup=0,this.sensorMask=0,this.sensorGroup=0,this.collisionMask=0,this.collisionGroup=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape,this.collisionGroup=this.sensorGroup=this.fluidGroup=1,this.collisionMask=this.sensorMask=this.fluidMask=-1};t["zpp_nape.dynamics.ZPP_InteractionFilter"]=zpp_$nape_dynamics_ZPP_$InteractionFilter,zpp_$nape_dynamics_ZPP_$InteractionFilter.__name__="zpp_nape.dynamics.ZPP_InteractionFilter",zpp_$nape_dynamics_ZPP_$InteractionFilter.prototype={wrapper:function(){if(null==this.outer){this.outer=new nape_dynamics_InteractionFilter;var n=this.outer.zpp_inner;n.outer=null,n.next=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=n,this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},feature_cons:function(){this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape},addShape:function(n){this.shapes.add(n)},remShape:function(n){this.shapes.remove(n)},copy:function(){var n;return null==zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool?n=new zpp_$nape_dynamics_ZPP_$InteractionFilter:(n=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=n.next,n.next=null),n.collisionGroup=this.collisionGroup,n.collisionMask=this.collisionMask,n.sensorGroup=this.sensorGroup,n.sensorMask=this.sensorMask,n.fluidGroup=this.fluidGroup,n.fluidMask=this.fluidMask,n},shouldCollide:function(n){return 0!=(this.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&this.collisionGroup)},shouldSense:function(n){return 0!=(this.sensorMask&n.sensorGroup)&&0!=(n.sensorMask&this.sensorGroup)},shouldFlow:function(n){return 0!=(this.fluidMask&n.fluidGroup)&&0!=(n.fluidMask&this.fluidGroup)},invalidate:function(){for(var n=this.shapes.head;null!=n;){n.elt.invalidate_filter(),n=n.next}},__class__:zpp_$nape_dynamics_ZPP_$InteractionFilter};var zpp_$nape_dynamics_ZPP_$InteractionGroup=function(){this.depth=0,this.wrap_interactors=null,this.interactors=null,this.wrap_groups=null,this.groups=null,this.group=null,this.ignore=!1,this.outer=null,this.depth=0,this.groups=new zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup,this.interactors=new zpp_$nape_util_ZNPList_$ZPP_$Interactor};t["zpp_nape.dynamics.ZPP_InteractionGroup"]=zpp_$nape_dynamics_ZPP_$InteractionGroup,zpp_$nape_dynamics_ZPP_$InteractionGroup.__name__="zpp_nape.dynamics.ZPP_InteractionGroup",zpp_$nape_dynamics_ZPP_$InteractionGroup.prototype={setGroup:function(n){this.group!=n&&(null!=this.group&&(this.group.groups.remove(this),this.depth=0,this.group.invalidate(!0)),this.group=n,null!=n?(n.groups.add(this),this.depth=n.depth+1,n.invalidate(!0)):this.invalidate(!0))},invalidate:function(n){if(null==n&&(n=!1),n||this.ignore){for(var e=this.interactors.head;null!=e;){var t=e.elt;null!=t.ibody?t.ibody.wake():null!=t.ishape?t.ishape.body.wake():t.icompound.wake(),e=e.next}for(e=this.groups.head;null!=e;){e.elt.invalidate(n),e=e.next}}},addGroup:function(n){this.groups.add(n),n.depth=this.depth+1},remGroup:function(n){this.groups.remove(n),n.depth=0},addInteractor:function(n){this.interactors.add(n)},remInteractor:function(n,e){null==e&&(e=-1),this.interactors.remove(n)},__class__:zpp_$nape_dynamics_ZPP_$InteractionGroup};var zpp_$nape_dynamics_ZPP_$SpaceArbiterList=function(){this.at_index_3=0,this.at_index_2=0,this.at_index_1=0,this.at_index_0=0,this.ite_3=null,this.ite_2=null,this.ite_1=null,this.ite_0=null,this.lengths=null,this.zip_length=!1,this._length=0,this.space=null,nape_dynamics_ArbiterList.call(this),this.at_index_0=0,this.at_index_1=0,this.at_index_2=0,this.at_index_3=0,this.zip_length=!0,this._length=0,this.lengths=[],this.lengths.push(0),this.lengths.push(0),this.lengths.push(0),this.lengths.push(0)};t["zpp_nape.dynamics.ZPP_SpaceArbiterList"]=zpp_$nape_dynamics_ZPP_$SpaceArbiterList,zpp_$nape_dynamics_ZPP_$SpaceArbiterList.__name__="zpp_nape.dynamics.ZPP_SpaceArbiterList",zpp_$nape_dynamics_ZPP_$SpaceArbiterList.__super__=nape_dynamics_ArbiterList,zpp_$nape_dynamics_ZPP_$SpaceArbiterList.prototype=$extend(nape_dynamics_ArbiterList.prototype,{zpp_gl:function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var n=0,e=0,t=this.space.c_arbiters_true.head;null!=t;){t.elt.active&&++e,t=t.next}this.lengths[n++]=e,this._length+=e;for(e=0,t=this.space.c_arbiters_false.head;null!=t;){t.elt.active&&++e,t=t.next}this.lengths[n++]=e,this._length+=e;for(e=0,t=this.space.f_arbiters.head;null!=t;){t.elt.active&&++e,t=t.next}this.lengths[n++]=e,this._length+=e;for(e=0,t=this.space.s_arbiters.head;null!=t;){t.elt.active&&++e,t=t.next}this.lengths[n++]=e,this._length+=e,this.zip_length=!1}return this._length},zpp_vm:function(){var n=!1;this.space.c_arbiters_true.modified&&(n=!0,this.space.c_arbiters_true.modified=!1),this.space.c_arbiters_false.modified&&(n=!0,this.space.c_arbiters_false.modified=!1),this.space.f_arbiters.modified&&(n=!0,this.space.f_arbiters.modified=!1),this.space.s_arbiters.modified&&(n=!0,this.space.s_arbiters.modified=!1),n&&(this.zip_length=!0,this._length=0,this.ite_0=null,this.ite_1=null,this.ite_2=null,this.ite_3=null)},push:function(n){throw haxe_Exception.thrown("Error: ArbiterList is immutable")},pop:function(){throw haxe_Exception.thrown("Error: ArbiterList is immutable")},unshift:function(n){throw haxe_Exception.thrown("Error: ArbiterList is immutable")},shift:function(){throw haxe_Exception.thrown("Error: ArbiterList is immutable")},remove:function(n){throw haxe_Exception.thrown("Error: ArbiterList is immutable")},clear:function(){throw haxe_Exception.thrown("Error: ArbiterList is immutable")},at:function(n){if(this.zpp_vm(),n<0||n>=this.zpp_gl())throw haxe_Exception.thrown("Error: Index out of bounds");var e=null,t=0;if(null==e)if(n<t+this.lengths[0]){if((i=n-t)<this.at_index_0||null==this.ite_0)for(this.at_index_0=0,this.ite_0=this.space.c_arbiters_true.head;;){if(this.ite_0.elt.active)break;this.ite_0=this.ite_0.next}for(;this.at_index_0!=i;)for(this.at_index_0++,this.ite_0=this.ite_0.next;;){if(this.ite_0.elt.active)break;this.ite_0=this.ite_0.next}e=this.ite_0.elt.wrapper()}else t+=this.lengths[0];if(null==e)if(n<t+this.lengths[1]){if((i=n-t)<this.at_index_1||null==this.ite_1)for(this.at_index_1=0,this.ite_1=this.space.c_arbiters_false.head;;){if(this.ite_1.elt.active)break;this.ite_1=this.ite_1.next}for(;this.at_index_1!=i;)for(this.at_index_1++,this.ite_1=this.ite_1.next;;){if(this.ite_1.elt.active)break;this.ite_1=this.ite_1.next}e=this.ite_1.elt.wrapper()}else t+=this.lengths[1];if(null==e)if(n<t+this.lengths[2]){if((i=n-t)<this.at_index_2||null==this.ite_2)for(this.at_index_2=0,this.ite_2=this.space.f_arbiters.head;;){if(this.ite_2.elt.active)break;this.ite_2=this.ite_2.next}for(;this.at_index_2!=i;)for(this.at_index_2++,this.ite_2=this.ite_2.next;;){if(this.ite_2.elt.active)break;this.ite_2=this.ite_2.next}e=this.ite_2.elt.wrapper()}else t+=this.lengths[2];if(null==e)if(n<t+this.lengths[3]){var i;if((i=n-t)<this.at_index_3||null==this.ite_3)for(this.at_index_3=0,this.ite_3=this.space.s_arbiters.head;;){if(this.ite_3.elt.active)break;this.ite_3=this.ite_3.next}for(;this.at_index_3!=i;)for(this.at_index_3++,this.ite_3=this.ite_3.next;;){if(this.ite_3.elt.active)break;this.ite_3=this.ite_3.next}e=this.ite_3.elt.wrapper()}else t+=this.lengths[3];return e},__class__:zpp_$nape_dynamics_ZPP_$SpaceArbiterList});var zpp_$nape_geom_ZPP_$AABB=function(){this.wrap_max=null,this.maxy=0,this.maxx=0,this.wrap_min=null,this.miny=0,this.minx=0,this.next=null,this.outer=null,this._immutable=!1,this._validate=null,this._invalidate=null};t["zpp_nape.geom.ZPP_AABB"]=zpp_$nape_geom_ZPP_$AABB,zpp_$nape_geom_ZPP_$AABB.__name__="zpp_nape.geom.ZPP_AABB",zpp_$nape_geom_ZPP_$AABB.get=function(n,e,t,i){var r;return null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?r=new zpp_$nape_geom_ZPP_$AABB:(r=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=r.next,r.next=null),r.minx=n,r.miny=e,r.maxx=t,r.maxy=i,r},zpp_$nape_geom_ZPP_$AABB.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=new nape_geom_AABB;var n=this.outer.zpp_inner;null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n.wrap_min=n.wrap_max=null,n._invalidate=null,n._validate=null,n.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=n,this.outer.zpp_inner=this}return this.outer},alloc:function(){},free:function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this.wrap_min=this.wrap_max=null,this._invalidate=null,this._validate=null},copy:function(){var n,e=this.minx,t=this.miny,i=this.maxx,r=this.maxy;return null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?n=new zpp_$nape_geom_ZPP_$AABB:(n=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=n.next,n.next=null),n.minx=e,n.miny=t,n.maxx=i,n.maxy=r,n},width:function(){return this.maxx-this.minx},height:function(){return this.maxy-this.miny},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},getmin:function(){if(null==this.wrap_min){var n,e=this.minx,t=this.miny;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_min=n,this.wrap_min.zpp_inner._inuse=!0,this._immutable?this.wrap_min.zpp_inner._immutable=!0:this.wrap_min.zpp_inner._invalidate=$bind(this,this.mod_min),this.wrap_min.zpp_inner._validate=$bind(this,this.dom_min)}return this.wrap_min},dom_min:function(){null!=this._validate&&this._validate(),this.wrap_min.zpp_inner.x=this.minx,this.wrap_min.zpp_inner.y=this.miny},mod_min:function(n){n.x==this.minx&&n.y==this.miny||(this.minx=n.x,this.miny=n.y,null!=this._invalidate&&this._invalidate(this))},getmax:function(){if(null==this.wrap_max){var n,e=this.maxx,t=this.maxy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_max=n,this.wrap_max.zpp_inner._inuse=!0,this._immutable?this.wrap_max.zpp_inner._immutable=!0:this.wrap_max.zpp_inner._invalidate=$bind(this,this.mod_max),this.wrap_max.zpp_inner._validate=$bind(this,this.dom_max)}return this.wrap_max},dom_max:function(){null!=this._validate&&this._validate(),this.wrap_max.zpp_inner.x=this.maxx,this.wrap_max.zpp_inner.y=this.maxy},mod_max:function(n){n.x==this.maxx&&n.y==this.maxy||(this.maxx=n.x,this.maxy=n.y,null!=this._invalidate&&this._invalidate(this))},intersectX:function(n){return!(n.minx>this.maxx||this.minx>n.maxx)},intersectY:function(n){return!(n.miny>this.maxy||this.miny>n.maxy)},intersect:function(n){return n.miny<=this.maxy&&this.miny<=n.maxy&&n.minx<=this.maxx&&this.minx<=n.maxx},combine:function(n){n.minx<this.minx&&(this.minx=n.minx),n.maxx>this.maxx&&(this.maxx=n.maxx),n.miny<this.miny&&(this.miny=n.miny),n.maxy>this.maxy&&(this.maxy=n.maxy)},contains:function(n){return n.minx>=this.minx&&n.miny>=this.miny&&n.maxx<=this.maxx&&n.maxy<=this.maxy},containsPoint:function(n){return n.x>=this.minx&&n.x<=this.maxx&&n.y>=this.miny&&n.y<=this.maxy},setCombine:function(n,e){this.minx=n.minx<e.minx?n.minx:e.minx,this.miny=n.miny<e.miny?n.miny:e.miny,this.maxx=n.maxx>e.maxx?n.maxx:e.maxx,this.maxy=n.maxy>e.maxy?n.maxy:e.maxy},setExpand:function(n,e){this.minx=n.minx-e,this.miny=n.miny-e,this.maxx=n.maxx+e,this.maxy=n.maxy+e},setExpandPoint:function(n,e){n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),e<this.miny&&(this.miny=e),e>this.maxy&&(this.maxy=e)},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:zpp_$nape_geom_ZPP_$AABB};var zpp_$nape_util_ZNPList_$ZPP_$Vec2=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Vec2"]=zpp_$nape_util_ZNPList_$ZPP_$Vec2,zpp_$nape_util_ZNPList_$ZPP_$Vec2.__name__="zpp_nape.util.ZNPList_ZPP_Vec2",zpp_$nape_util_ZNPList_$ZPP_$Vec2.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Vec2:(e=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Vec2:(e=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Vec2:(t=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Vec2:(t=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Vec2};var zpp_$nape_geom_ZPP_$Collide=function(){};t["zpp_nape.geom.ZPP_Collide"]=zpp_$nape_geom_ZPP_$Collide,zpp_$nape_geom_ZPP_$Collide.__name__="zpp_nape.geom.ZPP_Collide",zpp_$nape_geom_ZPP_$Collide.circleContains=function(n,e){var t,i;return(t=e.x-n.worldCOMx)*t+(i=e.y-n.worldCOMy)*i<n.radius*n.radius},zpp_$nape_geom_ZPP_$Collide.polyContains=function(n,e){var t;t=!0;for(var i=n.edges.head;null!=i;){var r=i.elt;if(!(r.gnormx*e.x+r.gnormy*e.y<=r.gprojection)){t=!1;break}i=i.next}return t},zpp_$nape_geom_ZPP_$Collide.shapeContains=function(n,e){return 0==n.type?zpp_$nape_geom_ZPP_$Collide.circleContains(n.circle,e):zpp_$nape_geom_ZPP_$Collide.polyContains(n.polygon,e)},zpp_$nape_geom_ZPP_$Collide.bodyContains=function(n,e){var t;t=!1;for(var i=n.shapes.head;null!=i;){var r=i.elt;if(zpp_$nape_geom_ZPP_$Collide.shapeContains(r,e)){t=!0;break}i=i.next}return t},zpp_$nape_geom_ZPP_$Collide.containTest=function(n,e){var t=n.aabb,i=e.aabb;if(i.minx>=t.minx&&i.miny>=t.miny&&i.maxx<=t.maxx&&i.maxy<=t.maxy){if(0==n.type){if(0==e.type){var r=n.circle.radius+-e.circle.radius,l=0,s=0;return(l=e.circle.worldCOMx-n.circle.worldCOMx)*l+(s=e.circle.worldCOMy-n.circle.worldCOMy)*s<=r*r}p=!0;for(var a=e.polygon.gverts.next;null!=a;){var o=a;r=n.circle.radius,l=0,s=0;if(!((l=o.x-n.circle.worldCOMx)*l+(s=o.y-n.circle.worldCOMy)*s<=r*r)){p=!1;break}a=a.next}return p}if(0==e.type){p=!0;for(a=n.polygon.edges.head;null!=a;){if(!((h=a.elt).gnormx*e.circle.worldCOMx+h.gnormy*e.circle.worldCOMy+e.circle.radius<=h.gprojection)){p=!1;break}a=a.next}return p}var p;p=!0;for(a=n.polygon.edges.head;null!=a;){for(var h=a.elt,u=-1e100,_=e.polygon.gverts.next;null!=_;){var c=_,d=h.gnormx*c.x+h.gnormy*c.y;d>u&&(u=d),_=_.next}if(!(u<=h.gprojection)){p=!1;break}a=a.next}return p}return!1},zpp_$nape_geom_ZPP_$Collide.contactCollide=function(n,e,t,i){if(1==e.type){if(1==n.type){for(var r=!0,l=-1e100,s=-1,a=null,o=null,p=n.polygon.edges.head;null!=p;){for(var h=p.elt,u=1e100,_=e.polygon.gverts.next;null!=_;){var c=_;if((b=h.gnormx*c.x+h.gnormy*c.y)<u&&(u=b),u-h.gprojection<=l)break;_=_.next}if((u-=h.gprojection)>=0){r=!1;break}u>l&&(l=u,a=h,s=1),p=p.next}if(r){for(p=e.polygon.edges.head;null!=p;){for(h=p.elt,u=1e100,_=n.polygon.gverts.next;null!=_;){c=_;if((b=h.gnormx*c.x+h.gnormy*c.y)<u&&(u=b),u-h.gprojection<=l)break;_=_.next}if((u-=h.gprojection)>=0){r=!1;break}u>l&&(l=u,o=h,s=2),p=p.next}if(r){var d,f;1==s?(n.polygon,d=e.polygon,h=a,f=1):(e.polygon,d=n.polygon,h=o,f=-1);var x=null;for(u=1e100,p=d.edges.head;null!=p;){var b,y=p.elt;(b=h.gnormx*y.gnormx+h.gnormy*y.gnormy)<u&&(u=b,x=y),p=p.next}var v=0,m=0;v=x.gp0.x,m=x.gp0.y;var g,z,w=0,O=0;g=(w=x.gp1.x)-v,z=(O=x.gp1.y)-m;var C,E=h.gnormy*v-h.gnormx*m,U=h.gnormy*w-h.gnormx*O,M=1/(U-E);if((D=(-h.tp1-E)*M)>nape_Config.epsilon)v+=g*(C=D),m+=z*C;if((D=(-h.tp0-U)*M)<-nape_Config.epsilon)w+=g*(C=D),O+=z*C;var T=0,k=0,D=f;T=h.gnormx*D,k=h.gnormy*D,t.lnormx=h.lnormx,t.lnormy=h.lnormy,t.lproj=h.lprojection,t.radius=0,t.rev=i!=(-1==f),t.ptype=t.rev?1:0;var S=v*h.gnormx+m*h.gnormy-h.gprojection,A=w*h.gnormx+O*h.gnormy-h.gprojection;if(S>0&&A>0)return!1;i&&(T=-T,k=-k);var P=v-h.gnormx*S*.5,V=m-h.gnormy*S*.5,I=t.rev?1:0;null==(L=S>0)&&(L=!1);var N=null;for(p=t.contacts.next;null!=p;){if(I==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=I,N.fresh=!0,N.arbiter=t,t.jrAcc=0;var F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=P,N.py=V,t.nx=T,t.ny=k,N.dist=S,N.stamp=t.stamp,N.posOnly=L;var R=N;D=1;v-=d.body.posx*D,m-=d.body.posy*D,R.inner.lr1x=v*d.body.axisy+m*d.body.axisx,R.inner.lr1y=m*d.body.axisy-v*d.body.axisx;var L;P=w-h.gnormx*A*.5,V=O-h.gnormy*A*.5,I=t.rev?0:1;null==(L=A>0)&&(L=!1);for(N=null,p=t.contacts.next;null!=p;){if(I==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=I,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=P,N.py=V,t.nx=T,t.ny=k,N.dist=A,N.stamp=t.stamp,N.posOnly=L,R=N;D=1;return w-=d.body.posx*D,O-=d.body.posy*D,R.inner.lr1x=w*d.body.axisy+O*d.body.axisx,R.inner.lr1y=O*d.body.axisy-w*d.body.axisx,1==s?(t.__ref_edge1=h,t.__ref_edge2=x):(t.__ref_edge2=h,t.__ref_edge1=x),!0}return!1}return!1}l=-1e100,r=!0;var B=null,G=null,j=e.polygon.gverts.next;for(p=e.polygon.edges.head;null!=p;){var K=p.elt;if(($=K.gnormx*n.circle.worldCOMx+K.gnormy*n.circle.worldCOMy-K.gprojection-n.circle.radius)>0){r=!1;break}$>l&&(l=$,B=K,G=j),j=j.next,p=p.next}if(r){var W=G,Y=null==G.next?e.polygon.gverts.next:G.next,X=n.circle.worldCOMy*B.gnormx-n.circle.worldCOMx*B.gnormy;if(X<=W.y*B.gnormx-W.x*B.gnormy){var H=n.circle.radius;P=0,V=0;if((en=(P=W.x-n.circle.worldCOMx)*P+(V=W.y-n.circle.worldCOMy)*V)>H*H)tn=null;else if(en<nape_Config.epsilon*nape_Config.epsilon){var Z=n.circle.worldCOMx,q=n.circle.worldCOMy;for(N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=1,t.ny=0,N.dist=-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}else{var $=(rn=1/Math.sqrt(en))<nape_Config.epsilon?1e100:1/rn,Q=.5+(n.circle.radius-.5*H)*rn;if(i){for(Z=n.circle.worldCOMx+P*Q,q=n.circle.worldCOMy+V*Q,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=-P*rn,t.ny=-V*rn,N.dist=$-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}else{for(Z=n.circle.worldCOMx+P*Q,q=n.circle.worldCOMy+V*Q,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=P*rn,t.ny=V*rn,N.dist=$-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}}if(null!=tn){R=tn.inner;t.ptype=2;var J=0,nn=0;J=W.x-e.polygon.body.posx,nn=W.y-e.polygon.body.posy,t.__ref_edge1=B,t.__ref_vertex=-1,i?(R.lr1x=J*e.polygon.body.axisy+nn*e.polygon.body.axisx,R.lr1y=nn*e.polygon.body.axisy-J*e.polygon.body.axisx,R.lr2x=n.circle.localCOMx,R.lr2y=n.circle.localCOMy):(R.lr2x=J*e.polygon.body.axisy+nn*e.polygon.body.axisx,R.lr2y=nn*e.polygon.body.axisy-J*e.polygon.body.axisx,R.lr1x=n.circle.localCOMx,R.lr1y=n.circle.localCOMy),t.radius=n.circle.radius}return null!=tn}if(X>=Y.y*B.gnormx-Y.x*B.gnormy){H=n.circle.radius,P=0,V=0;if((en=(P=Y.x-n.circle.worldCOMx)*P+(V=Y.y-n.circle.worldCOMy)*V)>H*H)tn=null;else if(en<nape_Config.epsilon*nape_Config.epsilon){for(Z=n.circle.worldCOMx,q=n.circle.worldCOMy,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=1,t.ny=0,N.dist=-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}else{$=(rn=1/Math.sqrt(en))<nape_Config.epsilon?1e100:1/rn,Q=.5+(n.circle.radius-.5*H)*rn;if(i){for(Z=n.circle.worldCOMx+P*Q,q=n.circle.worldCOMy+V*Q,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=-P*rn,t.ny=-V*rn,N.dist=$-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}else{for(Z=n.circle.worldCOMx+P*Q,q=n.circle.worldCOMy+V*Q,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=P*rn,t.ny=V*rn,N.dist=$-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}}if(null!=tn){R=tn.inner;t.ptype=2;J=0,nn=0;J=Y.x-e.polygon.body.posx,nn=Y.y-e.polygon.body.posy,t.__ref_edge1=B,t.__ref_vertex=1,i?(R.lr1x=J*e.polygon.body.axisy+nn*e.polygon.body.axisx,R.lr1y=nn*e.polygon.body.axisy-J*e.polygon.body.axisx,R.lr2x=n.circle.localCOMx,R.lr2y=n.circle.localCOMy):(R.lr2x=J*e.polygon.body.axisy+nn*e.polygon.body.axisx,R.lr2y=nn*e.polygon.body.axisy-J*e.polygon.body.axisx,R.lr1x=n.circle.localCOMx,R.lr1y=n.circle.localCOMy),t.radius=n.circle.radius}return null!=tn}T=0,k=0,D=n.circle.radius+.5*l;T=B.gnormx*D,k=B.gnormy*D;P=0,V=0;if(P=n.circle.worldCOMx-T,V=n.circle.worldCOMy-k,i){for(T=B.gnormx,k=B.gnormy,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=P,N.py=V,t.nx=T,t.ny=k,N.dist=l,N.stamp=t.stamp,N.posOnly=!1,R=N}else{for(T=-B.gnormx,k=-B.gnormy,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=P,N.py=V,t.nx=T,t.ny=k,N.dist=l,N.stamp=t.stamp,N.posOnly=!1,R=N}return t.ptype=i?0:1,t.lnormx=B.lnormx,t.lnormy=B.lnormy,t.rev=!i,t.lproj=B.lprojection,t.radius=n.circle.radius,R.inner.lr1x=n.circle.localCOMx,R.inner.lr1y=n.circle.localCOMy,t.__ref_edge1=B,t.__ref_vertex=0,!0}return!1}var en,tn;H=n.circle.radius+e.circle.radius,P=0,V=0;if((en=(P=e.circle.worldCOMx-n.circle.worldCOMx)*P+(V=e.circle.worldCOMy-n.circle.worldCOMy)*V)>H*H)tn=null;else if(en<nape_Config.epsilon*nape_Config.epsilon){for(Z=n.circle.worldCOMx,q=n.circle.worldCOMy,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=1,t.ny=0,N.dist=-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}else{var rn;$=(rn=1/Math.sqrt(en))<nape_Config.epsilon?1e100:1/rn,Q=.5+(n.circle.radius-.5*H)*rn;if(i){for(Z=n.circle.worldCOMx+P*Q,q=n.circle.worldCOMy+V*Q,N=null,p=t.contacts.next;null!=p;){if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=-P*rn,t.ny=-V*rn,N.dist=$-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}else{for(Z=n.circle.worldCOMx+P*Q,q=n.circle.worldCOMy+V*Q,N=null,p=t.contacts.next;null!=p;){var ln;if(0==(ln=p).hash){N=ln;break}p=p.next}if(null==N){var sn;null==zpp_$nape_dynamics_ZPP_$Contact.zpp_pool?N=new zpp_$nape_dynamics_ZPP_$Contact:(N=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=N.next,N.next=null),(sn=N.inner).jnAcc=sn.jtAcc=0,N.hash=0,N.fresh=!0,N.arbiter=t,t.jrAcc=0;var an;F=t.contacts;N._inuse=!0,(an=N).next=F.next,F.next=an,F.modified=!0,F.length++,t.innards.add(sn)}else N.fresh=!1;N.px=Z,N.py=q,t.nx=P*rn,t.ny=V*rn,N.dist=$-H,N.stamp=t.stamp,N.posOnly=!1,tn=N}}if(null!=tn){R=tn.inner;return i?(R.lr1x=e.circle.localCOMx,R.lr1y=e.circle.localCOMy,R.lr2x=n.circle.localCOMx,R.lr2y=n.circle.localCOMy):(R.lr1x=n.circle.localCOMx,R.lr1y=n.circle.localCOMy,R.lr2x=e.circle.localCOMx,R.lr2y=e.circle.localCOMy),t.radius=n.circle.radius+e.circle.radius,t.ptype=2,!0}return!1},zpp_$nape_geom_ZPP_$Collide.testCollide_safe=function(n,e){if(0==e.type){var t=n;n=e,e=t}return zpp_$nape_geom_ZPP_$Collide.testCollide(n,e)},zpp_$nape_geom_ZPP_$Collide.testCollide=function(n,e){if(1==e.type){if(1==n.type){for(var t=!0,i=n.polygon.edges.head;null!=i;){for(var r=i.elt,l=1e100,s=e.polygon.gverts.next;null!=s;){var a=s;(o=r.gnormx*a.x+r.gnormy*a.y)<l&&(l=o),s=s.next}if((l-=r.gprojection)>0){t=!1;break}i=i.next}if(t){for(i=e.polygon.edges.head;null!=i;){for(r=i.elt,l=1e100,s=n.polygon.gverts.next;null!=s;){var o;a=s;(o=r.gnormx*a.x+r.gnormy*a.y)<l&&(l=o),s=s.next}if((l-=r.gprojection)>0){t=!1;break}i=i.next}return t}return!1}var p=null,h=null,u=(t=!0,-1e100),_=e.polygon.gverts.next;for(i=e.polygon.edges.head;null!=i;){var c=i.elt,d=c.gnormx*n.circle.worldCOMx+c.gnormy*n.circle.worldCOMy-c.gprojection-n.circle.radius;if(d>0){t=!1;break}d>u&&(u=d,p=c,h=_),_=_.next,i=i.next}if(t){var f=h,x=null==h.next?e.polygon.gverts.next:h.next,b=n.circle.worldCOMy*p.gnormx-n.circle.worldCOMx*p.gnormy;if(b<=f.y*p.gnormx-f.x*p.gnormy){var y=n.circle.radius,v=0,m=0;return(v=f.x-n.circle.worldCOMx)*v+(m=f.y-n.circle.worldCOMy)*m<=y*y}if(b>=x.y*p.gnormx-x.x*p.gnormy){y=n.circle.radius,v=0,m=0;return(v=x.x-n.circle.worldCOMx)*v+(m=x.y-n.circle.worldCOMy)*m<=y*y}return!0}return!1}y=n.circle.radius+e.circle.radius,v=0,m=0;return(v=e.circle.worldCOMx-n.circle.worldCOMx)*v+(m=e.circle.worldCOMy-n.circle.worldCOMy)*m<=y*y},zpp_$nape_geom_ZPP_$Collide.flowCollide=function(n,e,t){if(1==e.type){if(1==n.type){for(var i=[],r=[],l=!0,s=!0,a=n.polygon.edges.head;null!=a;){for(var o=a.elt,p=1e100,h=0,u=e.polygon.gverts.next;null!=u;){var _=u;(y=o.gnormx*_.x+o.gnormy*_.y)<p&&(p=y),y>=o.gprojection+nape_Config.epsilon&&(r[h]=!0,s=!1),++h,u=u.next}if((p-=o.gprojection)>0){l=!1;break}a=a.next}if(s){if((Te=e.polygon).zip_worldCOM&&null!=Te.body){if(Te.zip_worldCOM=!1,Te.zip_localCOM){if(Te.zip_localCOM=!1,1==Te.type){if(null==(ke=Te.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==ke.lverts.next.next)ke.localCOMx=ke.lverts.next.x,ke.localCOMy=ke.lverts.next.y;else if(null==ke.lverts.next.next.next){ke.localCOMx=ke.lverts.next.x,ke.localCOMy=ke.lverts.next.y;var c=1;ke.localCOMx+=ke.lverts.next.next.x*c,ke.localCOMy+=ke.lverts.next.next.y*c;c=.5;ke.localCOMx*=c,ke.localCOMy*=c}else{ke.localCOMx=0,ke.localCOMy=0;var d=0,f=a=ke.lverts.next;_=a=a.next;for(a=a.next;null!=a;){var x=a;d+=_.x*(x.y-f.y);var b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b,f=_,_=x,a=a.next}x=a=ke.lverts.next;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b,f=_,_=x;x=a=a.next;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b;c=d=1/(3*d);ke.localCOMx*=c,ke.localCOMy*=c}}null!=Te.wrap_localCOM&&(Te.wrap_localCOM.zpp_inner.x=Te.localCOMx,Te.wrap_localCOM.zpp_inner.y=Te.localCOMy)}(ke=Te.body).zip_axis&&(ke.zip_axis=!1,ke.axisx=Math.sin(ke.rot),ke.axisy=Math.cos(ke.rot)),Te.worldCOMx=Te.body.posx+(Te.body.axisy*Te.localCOMx-Te.body.axisx*Te.localCOMy),Te.worldCOMy=Te.body.posy+(Te.localCOMx*Te.body.axisx+Te.localCOMy*Te.body.axisy)}return t.overlap=e.polygon.area,t.centroidx=e.polygon.worldCOMx,t.centroidy=e.polygon.worldCOMy,!0}if(l){s=!0;for(a=e.polygon.edges.head;null!=a;){for(o=a.elt,p=1e100,h=0,u=n.polygon.gverts.next;null!=u;){var y;_=u;(y=o.gnormx*_.x+o.gnormy*_.y)<p&&(p=y),y>=o.gprojection+nape_Config.epsilon&&(i[h]=!0,s=!1),++h,u=u.next}if((p-=o.gprojection)>0){l=!1;break}a=a.next}if(s){if((Te=n.polygon).zip_worldCOM&&null!=Te.body){if(Te.zip_worldCOM=!1,Te.zip_localCOM){if(Te.zip_localCOM=!1,1==Te.type){if(null==(ke=Te.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==ke.lverts.next.next)ke.localCOMx=ke.lverts.next.x,ke.localCOMy=ke.lverts.next.y;else if(null==ke.lverts.next.next.next){ke.localCOMx=ke.lverts.next.x,ke.localCOMy=ke.lverts.next.y;c=1;ke.localCOMx+=ke.lverts.next.next.x*c,ke.localCOMy+=ke.lverts.next.next.y*c;c=.5;ke.localCOMx*=c,ke.localCOMy*=c}else{ke.localCOMx=0,ke.localCOMy=0;d=0,f=a=ke.lverts.next,_=a=a.next;for(a=a.next;null!=a;){x=a;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b,f=_,_=x,a=a.next}x=a=ke.lverts.next;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b,f=_,_=x;x=a=a.next;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b;c=d=1/(3*d);ke.localCOMx*=c,ke.localCOMy*=c}}null!=Te.wrap_localCOM&&(Te.wrap_localCOM.zpp_inner.x=Te.localCOMx,Te.wrap_localCOM.zpp_inner.y=Te.localCOMy)}(ke=Te.body).zip_axis&&(ke.zip_axis=!1,ke.axisx=Math.sin(ke.rot),ke.axisy=Math.cos(ke.rot)),Te.worldCOMx=Te.body.posx+(Te.body.axisy*Te.localCOMx-Te.body.axisx*Te.localCOMy),Te.worldCOMy=Te.body.posy+(Te.localCOMx*Te.body.axisx+Te.localCOMy*Te.body.axisy)}return t.overlap=n.polygon.area,t.centroidx=n.polygon.worldCOMx,t.centroidy=n.polygon.worldCOMy,!0}if(l){for(;null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head;){if(!(De=zpp_$nape_geom_ZPP_$Collide.flowpoly.pop_unsafe())._inuse)null!=(Se=De).outer&&(Se.outer.zpp_inner=null,Se.outer=null),Se._isimmutable=null,Se._validate=null,Se._invalidate=null,Se.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Se}for(var v=null,m=!1,g=n.polygon.gverts.next,z=0,w=e.polygon.gverts.next,O=0,C=0,E=e.polygon.edgeCnt;C<E;){if(!r[U=C++]){O=U;break}w=w.next}if(null==w){w=e.polygon.gverts.next,m=!0;for(C=0,E=n.polygon.edgeCnt;C<E;){var U;if(!i[U=C++]){z=U;break}g=g.next}null==g?g=n.polygon.gverts.next:(zpp_$nape_geom_ZPP_$Collide.flowpoly.add(g),v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt)}else zpp_$nape_geom_ZPP_$Collide.flowpoly.add(w),v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt;var M=1;if(null==zpp_$nape_geom_ZPP_$Collide.flowpoly.head){for(var T=!0,k=n.polygon.gverts.next,D=(f=k,k.next);null!=D;){_=D,p=2;for(var S=Q=e.polygon.gverts.next,A=Q.next;null!=A;){var P=A,V=(c=0,0),I=0;V=f.x-S.x,I=f.y-S.y;var N=0,F=0;N=_.x-f.x;var R=0,L=0;if((sn=(F=_.y-f.y)*(R=P.x-S.x)-N*(L=P.y-S.y))*sn>nape_Config.epsilon*nape_Config.epsilon)if((an=(L*V-R*I)*(sn=1/sn))>nape_Config.epsilon&&an<1-nape_Config.epsilon)(on=(F*V-N*I)*sn)>nape_Config.epsilon&&on<1-nape_Config.epsilon?(c=an,je=!0):je=!1;else je=!1;else je=!1;je&&c<p&&(p=c,w=Q),Q=A,S=P,A=A.next}for(!0;;){var B=A=e.polygon.gverts.next,G=0,j=0,K=0;j=f.x-S.x,K=f.y-S.y;var W=0,Y=0;W=_.x-f.x;var X=0,H=0;if((hn=(Y=_.y-f.y)*(X=B.x-S.x)-W*(H=B.y-S.y))*hn>nape_Config.epsilon*nape_Config.epsilon)if((un=(H*j-X*K)*(hn=1/hn))>nape_Config.epsilon&&un<1-nape_Config.epsilon)(_n=(Y*j-W*K)*hn)>nape_Config.epsilon&&_n<1-nape_Config.epsilon?(G=un,dt=!0):dt=!1;else dt=!1;else dt=!1;dt&&G<p&&(p=G,w=Q);break}if(2!=p){var Z=0,q=0,$=p;Z=f.x+(_.x-f.x)*$,q=f.y+(_.y-f.y)*$,null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Ge=new zpp_$nape_geom_ZPP_$Vec2:(Ge=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Ge.next,Ge.next=null),Ge.weak=!1,Ge._immutable=!1,Ge.x=Z,Ge.y=q,v=Ge,zpp_$nape_geom_ZPP_$Collide.flowpoly.add(v),m=!0,g=k,T=!1;break}k=D,f=_,D=D.next}if(T)for(;;){var Q;for(_=D=n.polygon.gverts.next,p=2,T=!0,S=Q=e.polygon.gverts.next,A=Q.next;null!=A;){P=A,c=0,V=0,I=0;V=f.x-S.x,I=f.y-S.y;N=0,F=0;N=_.x-f.x;R=0,L=0;if((sn=(F=_.y-f.y)*(R=P.x-S.x)-N*(L=P.y-S.y))*sn>nape_Config.epsilon*nape_Config.epsilon)if((an=(L*V-R*I)*(sn=1/sn))>nape_Config.epsilon&&an<1-nape_Config.epsilon)(on=(F*V-N*I)*sn)>nape_Config.epsilon&&on<1-nape_Config.epsilon?(c=an,je=!0):je=!1;else je=!1;else je=!1;je&&c<p&&(p=c,w=Q),Q=A,S=P,A=A.next}if(T)for(;;){B=A=e.polygon.gverts.next,G=0,j=0,K=0;j=f.x-S.x,K=f.y-S.y;W=0,Y=0;W=_.x-f.x;X=0,H=0;if((hn=(Y=_.y-f.y)*(X=B.x-S.x)-W*(H=B.y-S.y))*hn>nape_Config.epsilon*nape_Config.epsilon)if((un=(H*j-X*K)*(hn=1/hn))>nape_Config.epsilon&&un<1-nape_Config.epsilon)(_n=(Y*j-W*K)*hn)>nape_Config.epsilon&&_n<1-nape_Config.epsilon?(G=un,dt=!0):dt=!1;else dt=!1;else dt=!1;dt&&G<p&&(p=G,w=Q);break}if(2!=p){Z=0,q=0,$=p;Z=f.x+(_.x-f.x)*$,q=f.y+(_.y-f.y)*$,null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Ge=new zpp_$nape_geom_ZPP_$Vec2:(Ge=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Ge.next,Ge.next=null),Ge.weak=!1,Ge._immutable=!1,Ge.x=Z,Ge.y=q,v=Ge,zpp_$nape_geom_ZPP_$Collide.flowpoly.add(v),m=!0,g=k;break}break}M=2}for(;;)if(m)if(++z,null==(g=g.next)&&(g=n.polygon.gverts.next,z=0),i[z]){S=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt,P=g,f=w;var J=w.next;null==J&&(J=e.polygon.gverts.next);var nn=-1,en=null,tn=0,rn=0,ln=J;for(a=J;;){_=a,c=0,V=0,I=0;V=f.x-S.x,I=f.y-S.y;N=0,F=0;N=_.x-f.x;var sn,an,on;R=0,L=0;if((sn=(F=_.y-f.y)*(R=P.x-S.x)-N*(L=P.y-S.y))*sn>nape_Config.epsilon*nape_Config.epsilon)if((an=(L*V-R*I)*(sn=1/sn))>nape_Config.epsilon&&an<1-nape_Config.epsilon)(on=(F*V-N*I)*sn)>nape_Config.epsilon&&on<1-nape_Config.epsilon?(c=an,dt=!0):dt=!1;else dt=!1;else dt=!1;if(dt&&c>=nn){if(en=w,tn=O,++rn==M){nn=c,a=ln;break}nn=c}f=_,w=a,++O>=e.polygon.edgeCnt&&(O=0),null==(a=a.next)&&(a=e.polygon.gverts.next);break}for(;a!=ln;){var pn=a;G=0,j=0,K=0;j=f.x-S.x,K=f.y-S.y;W=0,Y=0;W=pn.x-f.x;var hn,un,_n;X=0,H=0;if((hn=(Y=pn.y-f.y)*(X=P.x-S.x)-W*(H=P.y-S.y))*hn>nape_Config.epsilon*nape_Config.epsilon)if((un=(H*j-X*K)*(hn=1/hn))>nape_Config.epsilon&&un<1-nape_Config.epsilon)(_n=(Y*j-W*K)*hn)>nape_Config.epsilon&&_n<1-nape_Config.epsilon?(G=un,zt=!0):zt=!1;else zt=!1;else zt=!1;if(zt&&G>=nn){if(en=w,tn=O,++rn==M){nn=G,a=ln;break}nn=G}f=pn,w=a,++O>=e.polygon.edgeCnt&&(O=0),null==(a=a.next)&&(a=e.polygon.gverts.next)}if(null==en)break;var cn=en,dn=en.next;null==dn&&(dn=e.polygon.gverts.next);var xn=dn;Z=0,q=0,$=nn;if(Z=cn.x+(xn.x-cn.x)*$,q=cn.y+(xn.y-cn.y)*$,null!=v){var bn=0,yn=0;$t=(bn=Z-v.x)*bn+(yn=q-v.y)*yn<nape_Config.epsilon}else $t=!1;if($t)break;var vn=zpp_$nape_geom_ZPP_$Collide.flowpoly;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Ge=new zpp_$nape_geom_ZPP_$Vec2:(Ge=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Ge.next,Ge.next=null),Ge.weak=!1,Ge._immutable=!1,Ge.x=Z,Ge.y=q,vn.add(Ge),null==v&&(v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),w=en,O=tn,m=!m,M=2}else{var mn=g;if(null!=v){var gn=0,zn=0;je=(gn=mn.x-v.x)*gn+(zn=mn.y-v.y)*zn<nape_Config.epsilon}else je=!1;if(je)break;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(mn),null==v&&(v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),M=1}else if(++O,null==(w=w.next)&&(w=e.polygon.gverts.next,O=0),r[O]){var wn=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt,On=(B=w,g),Cn=g.next;null==Cn&&(Cn=n.polygon.gverts.next);var En=-1,Un=null,Mn=0,Tn=0,kn=Cn;for(u=Cn;;){var Dn,Sn,An=u,Pn=0;Dn=On.x-wn.x,Sn=On.y-wn.y;var Vn,In;Vn=An.x-On.x;var Nn,Fn,Rn,Ln=(In=An.y-On.y)*(Nn=B.x-wn.x)-Vn*(Fn=B.y-wn.y);if(Ln*Ln>nape_Config.epsilon*nape_Config.epsilon){var Bn=(Fn*Dn-Nn*Sn)*(Ln=1/Ln);if(Bn>nape_Config.epsilon&&Bn<1-nape_Config.epsilon){var Gn=(In*Dn-Vn*Sn)*Ln;Gn>nape_Config.epsilon&&Gn<1-nape_Config.epsilon?(Pn=Bn,Rn=!0):Rn=!1}else Rn=!1}else Rn=!1;if(Rn&&Pn>=En){if(Un=g,Mn=z,++Tn==M){En=Pn,u=kn;break}En=Pn}On=An,g=u,++z>=n.polygon.edgeCnt&&(z=0),null==(u=u.next)&&(u=n.polygon.gverts.next);break}for(;u!=kn;){var jn,Kn,Wn=u,Yn=0;jn=On.x-wn.x,Kn=On.y-wn.y;var Xn,Hn;Xn=Wn.x-On.x;var Zn,qn,$n,Qn=(Hn=Wn.y-On.y)*(Zn=B.x-wn.x)-Xn*(qn=B.y-wn.y);if(Qn*Qn>nape_Config.epsilon*nape_Config.epsilon){var Jn=(qn*jn-Zn*Kn)*(Qn=1/Qn);if(Jn>nape_Config.epsilon&&Jn<1-nape_Config.epsilon){var ne=(Hn*jn-Xn*Kn)*Qn;ne>nape_Config.epsilon&&ne<1-nape_Config.epsilon?(Yn=Jn,$n=!0):$n=!1}else $n=!1}else $n=!1;if($n&&Yn>=En){if(Un=g,Mn=z,++Tn==M){En=Yn,u=kn;break}En=Yn}On=Wn,g=u,++z>=n.polygon.edgeCnt&&(z=0),null==(u=u.next)&&(u=n.polygon.gverts.next)}if(null==Un)break;var ee=Un,te=Un.next;null==te&&(te=n.polygon.gverts.next);var ie,re=te,le=0,se=0,ae=En;if(le=ee.x+(re.x-ee.x)*ae,se=ee.y+(re.y-ee.y)*ae,null!=v){var oe=0,pe=0;ie=(oe=le-v.x)*oe+(pe=se-v.y)*pe<nape_Config.epsilon}else ie=!1;if(ie)break;var he=zpp_$nape_geom_ZPP_$Collide.flowpoly;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?nt=new zpp_$nape_geom_ZPP_$Vec2:(nt=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=nt.next,nt.next=null),nt.weak=!1,nt._immutable=!1,nt.x=le,nt.y=se,he.add(nt),null==v&&(v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),g=Un,z=Mn,m=!m,M=2}else{var ue,_e=w;if(null!=v){var ce=0,de=0;ue=(ce=_e.x-v.x)*ce+(de=_e.y-v.y)*de<nape_Config.epsilon}else ue=!1;if(ue)break;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(_e),null==v&&(v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),M=1}if(null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head&&null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next&&null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next.next){d=0;var fe=0,xe=0;fe=0,xe=0,d=0;f=(a=zpp_$nape_geom_ZPP_$Collide.flowpoly.head).elt,_=(a=a.next).elt;for(a=a.next;null!=a;){x=a.elt;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;fe+=(_.x+x.x)*b,xe+=(_.y+x.y)*b,f=_,_=x,a=a.next}x=(a=zpp_$nape_geom_ZPP_$Collide.flowpoly.head).elt;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;fe+=(_.x+x.x)*b,xe+=(_.y+x.y)*b,f=_,_=x;x=(a=a.next).elt;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;return fe+=(_.x+x.x)*b,xe+=(_.y+x.y)*b,fe*=c=1/(6*(d*=.5)),xe*=c,t.overlap=-d,t.centroidx=fe,t.centroidy=xe,!0}return!1}return!1}return!1}var be=[],ye=(s=!0,null),ve=null,me=(nn=-1e100,l=!0,e.polygon.gverts.next);for(h=0,a=e.polygon.edges.head;null!=a;){if((Me=(S=a.elt).gnormx*n.circle.worldCOMx+S.gnormy*n.circle.worldCOMy)>S.gprojection+n.circle.radius){l=!1;break}Me+n.circle.radius>S.gprojection+nape_Config.epsilon&&(s=!1,be[h]=!0),(Me-=S.gprojection+n.circle.radius)>nn&&(nn=Me,ye=S,ve=me),me=me.next,++h,a=a.next}if(l){if(s)return t.overlap=n.circle.area,t.centroidx=n.circle.worldCOMx,t.centroidy=n.circle.worldCOMy,!0;var ge=ve,ze=(pn=null==ve.next?e.polygon.gverts.next:ve.next,n.circle.worldCOMy*ye.gnormx-n.circle.worldCOMx*ye.gnormy);if(ze<=ge.y*ye.gnormx-ge.x*ye.gnormy){var we=n.circle.radius,Oe=0,Ce=0;je=(Oe=ge.x-n.circle.worldCOMx)*Oe+(Ce=ge.y-n.circle.worldCOMy)*Ce<=we*we}else if(ze>=pn.y*ye.gnormx-pn.x*ye.gnormy){we=n.circle.radius,Oe=0,Ce=0;je=(Oe=pn.x-n.circle.worldCOMx)*Oe+(Ce=pn.y-n.circle.worldCOMy)*Ce<=we*we}else je=!0;if(je){var Ee=[],Ue=(h=0,s=!0,ve=null,0);for(a=e.polygon.gverts.next;null!=a;){gn=0,zn=0;var Me=(gn=(_=a).x-n.circle.worldCOMx)*gn+(zn=_.y-n.circle.worldCOMy)*zn;(Ee[h]=Me<=n.circle.radius*n.circle.radius)?(Ue=h,ve=a):s=!1,++h,a=a.next}if(s){var Te;if((Te=e.polygon).zip_worldCOM&&null!=Te.body){if(Te.zip_worldCOM=!1,Te.zip_localCOM){if(Te.zip_localCOM=!1,1==Te.type){if(null==(ke=Te.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==ke.lverts.next.next)ke.localCOMx=ke.lverts.next.x,ke.localCOMy=ke.lverts.next.y;else if(null==ke.lverts.next.next.next){ke.localCOMx=ke.lverts.next.x,ke.localCOMy=ke.lverts.next.y;c=1;ke.localCOMx+=ke.lverts.next.next.x*c,ke.localCOMy+=ke.lverts.next.next.y*c;c=.5;ke.localCOMx*=c,ke.localCOMy*=c}else{ke.localCOMx=0,ke.localCOMy=0;d=0,f=a=ke.lverts.next,_=a=a.next;for(a=a.next;null!=a;){x=a;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b,f=_,_=x,a=a.next}x=a=ke.lverts.next;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b,f=_,_=x;x=a=a.next;d+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;ke.localCOMx+=(_.x+x.x)*b,ke.localCOMy+=(_.y+x.y)*b;c=d=1/(3*d);ke.localCOMx*=c,ke.localCOMy*=c}}null!=Te.wrap_localCOM&&(Te.wrap_localCOM.zpp_inner.x=Te.localCOMx,Te.wrap_localCOM.zpp_inner.y=Te.localCOMy)}var ke;(ke=Te.body).zip_axis&&(ke.zip_axis=!1,ke.axisx=Math.sin(ke.rot),ke.axisy=Math.cos(ke.rot)),Te.worldCOMx=Te.body.posx+(Te.body.axisy*Te.localCOMx-Te.body.axisx*Te.localCOMy),Te.worldCOMy=Te.body.posy+(Te.localCOMx*Te.body.axisx+Te.localCOMy*Te.body.axisy)}return t.overlap=e.polygon.area,t.centroidx=e.polygon.worldCOMx,t.centroidy=e.polygon.worldCOMy,!0}for(;null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head;){var De,Se;if(!(De=zpp_$nape_geom_ZPP_$Collide.flowpoly.pop_unsafe())._inuse)null!=(Se=De).outer&&(Se.outer.zpp_inner=null,Se.outer=null),Se._isimmutable=null,Se._validate=null,Se._invalidate=null,Se.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Se}zpp_$nape_geom_ZPP_$Collide.flowsegs.clear();v=null;var Ae=1;for(null==ve?(ve=e.polygon.gverts.next,Ae=2):(v=ve,zpp_$nape_geom_ZPP_$Collide.flowpoly.add(v));0!=Ae;)if(1==Ae)if(null==(ve=ve.next)&&(ve=e.polygon.gverts.next),++Ue>=e.polygon.edgeCnt&&(Ue=0),Ee[Ue]){gn=0,zn=0;if((gn=v.x-ve.x)*gn+(zn=v.y-ve.y)*zn<nape_Config.epsilon)break;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ve)}else{f=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt;var Pe,Ve,Ie,Ne,Fe=(Pe=(_=ve).x-f.x)*Pe+(Ve=_.y-f.y)*Ve,Re=2*((Ie=f.x-n.circle.worldCOMx)*Pe+(Ne=f.y-n.circle.worldCOMy)*Ve),Le=Ie*Ie+Ne*Ne-n.circle.radius*n.circle.radius,Be=Math.sqrt(Re*Re-4*Fe*Le);Z=0,q=0,$=(c=(-Re-Be)*(Fe=1/(2*Fe)))<nape_Config.epsilon?(-Re+Be)*Fe:c;Z=f.x+(_.x-f.x)*$,q=f.y+(_.y-f.y)*$;bn=0,yn=0;if((bn=v.x-Z)*bn+(yn=v.y-q)*yn<nape_Config.epsilon)break;var Ge,je=zpp_$nape_geom_ZPP_$Collide.flowpoly;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Ge=new zpp_$nape_geom_ZPP_$Vec2:(Ge=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Ge.next,Ge.next=null),Ge.weak=!1,Ge._immutable=!1,Ge.x=Z,Ge.y=q,je.add(Ge),Ae=2}else if(2==Ae){var Ke=ve.next;null==Ke&&(Ke=e.polygon.gverts.next);cn=ve;Ae=0;for(ln=Ke,a=Ke;;){pn=a;var We=Ue+1;if(We==e.polygon.edgeCnt&&(We=0),be[Ue]){if(Ee[We]){var Ye,Xe,He,Ze,qe=(Ye=pn.x-cn.x)*Ye+(Xe=pn.y-cn.y)*Xe,$e=2*((He=cn.x-n.circle.worldCOMx)*Ye+(Ze=cn.y-n.circle.worldCOMy)*Xe),Qe=He*He+Ze*Ze-n.circle.radius*n.circle.radius,Je=Math.sqrt($e*$e-4*qe*Qe);le=0,se=0,ae=(G=(-$e-Je)*(qe=1/(2*qe)))<nape_Config.epsilon?(-$e+Je)*qe:G;le=cn.x+(pn.x-cn.x)*ae,se=cn.y+(pn.y-cn.y)*ae;var nt;ce=0,de=0;if((ce=v.x-le)*ce+(de=v.y-se)*de<nape_Config.epsilon){Ae=0,a=ln;break}null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?nt=new zpp_$nape_geom_ZPP_$Vec2:(nt=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=nt.next,nt.next=null),nt.weak=!1,nt._immutable=!1,nt.x=le,nt.y=se;var et=nt;zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),zpp_$nape_geom_ZPP_$Collide.flowsegs.add(et),zpp_$nape_geom_ZPP_$Collide.flowpoly.add(et),Ae=1,a=ln;break}var tt,it,rt,lt,st,at=0,ot=0,pt=(tt=pn.x-cn.x)*tt+(it=pn.y-cn.y)*it,ht=2*((rt=cn.x-n.circle.worldCOMx)*tt+(lt=cn.y-n.circle.worldCOMy)*it),ut=ht*ht-4*pt*(rt*rt+lt*lt-n.circle.radius*n.circle.radius);if(ut*ut<nape_Config.epsilon?(at=ut<0?10:ot=-ht/(2*pt),st=!1):(at=(-ht-(ut=Math.sqrt(ut)))*(pt=1/(2*pt)),ot=(-ht+ut)*pt,st=!0),at<1-nape_Config.epsilon&&ot>nape_Config.epsilon){var _t,ct,dt,ft,xt=at;if(_t=cn.x+(pn.x-cn.x)*xt,ct=cn.y+(pn.y-cn.y)*xt,null!=v){oe=0,pe=0;dt=(oe=v.x-_t)*oe+(pe=v.y-ct)*pe<nape_Config.epsilon}else dt=!1;if(dt){Ae=0,a=ln;break}null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?ft=new zpp_$nape_geom_ZPP_$Vec2:(ft=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ft.next,ft.next=null),ft.weak=!1,ft._immutable=!1,ft.x=_t,ft.y=ct;var bt=ft;if(null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head&&(zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),zpp_$nape_geom_ZPP_$Collide.flowsegs.add(bt)),zpp_$nape_geom_ZPP_$Collide.flowpoly.add(bt),null==v&&(v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),st){var yt,vt,mt=ot;yt=cn.x+(pn.x-cn.x)*mt,vt=cn.y+(pn.y-cn.y)*mt;var gt,zt=zpp_$nape_geom_ZPP_$Collide.flowpoly;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?gt=new zpp_$nape_geom_ZPP_$Vec2:(gt=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=gt.next,gt.next=null),gt.weak=!1,gt._immutable=!1,gt.x=yt,gt.y=vt,zt.add(gt)}}}cn=pn,ve=a,Ue=We,null==(a=a.next)&&(a=e.polygon.gverts.next);break}for(;a!=ln;){xn=a;var wt=Ue+1;if(wt==e.polygon.edgeCnt&&(wt=0),be[Ue]){if(Ee[wt]){var Ot,Ct,Et,Ut,Mt,Tt,kt=(Ot=xn.x-cn.x)*Ot+(Ct=xn.y-cn.y)*Ct,Dt=2*((Et=cn.x-n.circle.worldCOMx)*Ot+(Ut=cn.y-n.circle.worldCOMy)*Ct),St=Et*Et+Ut*Ut-n.circle.radius*n.circle.radius,At=Math.sqrt(Dt*Dt-4*kt*St),Pt=(Pn=(-Dt-At)*(kt=1/(2*kt)))<nape_Config.epsilon?(-Dt+At)*kt:Pn;Mt=cn.x+(xn.x-cn.x)*Pt,Tt=cn.y+(xn.y-cn.y)*Pt;var Vt,It,Nt;if((Vt=v.x-Mt)*Vt+(It=v.y-Tt)*It<nape_Config.epsilon){Ae=0,a=ln;break}null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Nt=new zpp_$nape_geom_ZPP_$Vec2:(Nt=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Nt.next,Nt.next=null),Nt.weak=!1,Nt._immutable=!1,Nt.x=Mt,Nt.y=Tt;var Ft=Nt;zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),zpp_$nape_geom_ZPP_$Collide.flowsegs.add(Ft),zpp_$nape_geom_ZPP_$Collide.flowpoly.add(Ft),Ae=1,a=ln;break}var Rt,Lt,Bt,Gt,jt,Kt=0,Wt=0,Yt=(Rt=xn.x-cn.x)*Rt+(Lt=xn.y-cn.y)*Lt,Xt=2*((Bt=cn.x-n.circle.worldCOMx)*Rt+(Gt=cn.y-n.circle.worldCOMy)*Lt),Ht=Xt*Xt-4*Yt*(Bt*Bt+Gt*Gt-n.circle.radius*n.circle.radius);if(Ht*Ht<nape_Config.epsilon?(Kt=Ht<0?10:Wt=-Xt/(2*Yt),jt=!1):(Kt=(-Xt-(Ht=Math.sqrt(Ht)))*(Yt=1/(2*Yt)),Wt=(-Xt+Ht)*Yt,jt=!0),Kt<1-nape_Config.epsilon&&Wt>nape_Config.epsilon){var Zt,qt,$t,Qt,Jt=Kt;if(Zt=cn.x+(xn.x-cn.x)*Jt,qt=cn.y+(xn.y-cn.y)*Jt,null!=v){var ni,ei;$t=(ni=v.x-Zt)*ni+(ei=v.y-qt)*ei<nape_Config.epsilon}else $t=!1;if($t){Ae=0,a=ln;break}null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Qt=new zpp_$nape_geom_ZPP_$Vec2:(Qt=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Qt.next,Qt.next=null),Qt.weak=!1,Qt._immutable=!1,Qt.x=Zt,Qt.y=qt;var ti=Qt;if(null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head&&(zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),zpp_$nape_geom_ZPP_$Collide.flowsegs.add(ti)),zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ti),null==v&&(v=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),jt){var ii,ri,li=Wt;ii=cn.x+(xn.x-cn.x)*li,ri=cn.y+(xn.y-cn.y)*li;var si;vn=zpp_$nape_geom_ZPP_$Collide.flowpoly;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?si=new zpp_$nape_geom_ZPP_$Vec2:(si=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=si.next,si.next=null),si.weak=!1,si._immutable=!1,si.x=ii,si.y=ri,vn.add(si)}}}cn=xn,ve=a,Ue=wt,null==(a=a.next)&&(a=e.polygon.gverts.next)}}if(null==zpp_$nape_geom_ZPP_$Collide.flowpoly.head)return!1;if(null==zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next){var ai=!0;for(a=e.polygon.edges.head;null!=a;){var oi=a.elt;if((Me=oi.gnormx*n.circle.worldCOMx+oi.gnormy*n.circle.worldCOMy)>oi.gprojection){ai=!1;break}a=a.next}return!!ai&&(t.overlap=n.circle.area,t.centroidx=n.circle.worldCOMx,t.centroidy=n.circle.worldCOMy,!0)}fe=0,xe=0,d=0;if(null!=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next.next){var pi=0,hi=0,ui=0;hi=0,ui=0,pi=0;f=(a=zpp_$nape_geom_ZPP_$Collide.flowpoly.head).elt,_=(a=a.next).elt;for(a=a.next;null!=a;){x=a.elt;pi+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;hi+=(_.x+x.x)*b,ui+=(_.y+x.y)*b,f=_,_=x,a=a.next}x=(a=zpp_$nape_geom_ZPP_$Collide.flowpoly.head).elt;pi+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;hi+=(_.x+x.x)*b,ui+=(_.y+x.y)*b,f=_,_=x;x=(a=a.next).elt;pi+=_.x*(x.y-f.y);b=x.y*_.x-x.x*_.y;hi+=(_.x+x.x)*b,ui+=(_.y+x.y)*b,ui*=c=1/(6*(pi*=.5)),fe+=(hi*=c)*(c=-pi),xe+=ui*c,d-=pi}else zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt),zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next.elt);for(;null!=zpp_$nape_geom_ZPP_$Collide.flowsegs.head;){f=zpp_$nape_geom_ZPP_$Collide.flowsegs.pop_unsafe(),gn=0,zn=0;var _i=0,ci=0,di=(_i=gn=(_=zpp_$nape_geom_ZPP_$Collide.flowsegs.pop_unsafe()).x-f.x)*_i+(ci=zn=_.y-f.y)*ci;G=_i*=c=1/Math.sqrt(di);_i=-(ci*=c),ci=G;Z=0,q=0;Z=f.x+_.x,q=f.y+_.y,Z*=Pn=.5,q*=Pn;Yn=1;var fi,xi,bi=(Si=_i*(Z-=n.circle.worldCOMx*Yn)+ci*(q-=n.circle.worldCOMy*Yn))/n.circle.radius,yi=Math.sqrt(1-bi*bi),vi=Math.acos(bi);fi=n.circle.radius*(n.circle.radius*vi-Si*yi),xi=.6666666666666666*n.circle.radius*yi*yi*yi/(vi-bi*yi),Z=n.circle.worldCOMx,q=n.circle.worldCOMy;fe+=(Z+=_i*xi)*fi,xe+=(q+=ci*xi)*fi,d+=fi}return fe*=c=1/d,xe*=c,t.overlap=d,t.centroidx=fe,t.centroidy=xe,!0}return!1}return!1}var mi,gi,zi=n.circle,wi=e.circle;mi=wi.worldCOMx-zi.worldCOMx,gi=wi.worldCOMy-zi.worldCOMy;var Oi=zi.radius+wi.radius,Ci=mi*mi+gi*gi;if(Ci>Oi*Oi)return!1;if(Ci<nape_Config.epsilon*nape_Config.epsilon)return zi.radius<wi.radius?(t.overlap=zi.area,t.centroidx=zi.worldCOMx,t.centroidy=zi.worldCOMy):(t.overlap=wi.area,t.centroidx=wi.worldCOMx,t.centroidy=wi.worldCOMy),!0;var Ei=1/(di=Math.sqrt(Ci)),Ui=.5*(di-(wi.radius*wi.radius-zi.radius*zi.radius)*Ei);if(Ui<=-zi.radius)t.overlap=zi.area,t.centroidx=zi.worldCOMx,t.centroidy=zi.worldCOMy;else{var Mi=di-Ui;if(Mi<=-wi.radius)t.overlap=wi.area,t.centroidx=wi.worldCOMx,t.centroidy=wi.worldCOMy;else{var Ti,ki,Di;bi=(Si=Ui)/zi.radius,yi=Math.sqrt(1-bi*bi),vi=Math.acos(bi);Ti=zi.radius*(zi.radius*vi-Si*yi),ki=.6666666666666666*zi.radius*yi*yi*yi/(vi-bi*yi);bi=(Si=Mi)/wi.radius,yi=Math.sqrt(1-bi*bi),vi=Math.acos(bi);var Si,Ai=Ti+(Di=wi.radius*(wi.radius*vi-Si*yi)),Pi=(ki*Ti+(di-.6666666666666666*wi.radius*yi*yi*yi/(vi-bi*yi))*Di)/Ai*Ei;t.overlap=Ai,t.centroidx=zi.worldCOMx+mi*Pi,t.centroidy=zi.worldCOMy+gi*Pi}}return!0};var zpp_$nape_geom_ZPP_$Convex=function(){};t["zpp_nape.geom.ZPP_Convex"]=zpp_$nape_geom_ZPP_$Convex,zpp_$nape_geom_ZPP_$Convex.__name__="zpp_nape.geom.ZPP_Convex",zpp_$nape_geom_ZPP_$Convex.isinner=function(n,e,t){var i,r;i=n.x-e.x,r=n.y-e.y;var l;return l=t.x-e.x,(t.y-e.y)*i-l*r>=0},zpp_$nape_geom_ZPP_$Convex.optimise=function(n){var e=n.vertices,t=n.vertices;if(null!=e)for(var i=e;;){if((r=i).sort(),(i=i.next)==t)break}e=n.vertices,t=n.vertices;if(null!=e)for(i=e;;){for(var r,l=(r=i).prev,s=null,a=r.diagonals.head;null!=a;){var o=a.elt,p=null==a.next?r.next:a.next.elt;if(zpp_$nape_geom_ZPP_$Convex.isinner(p,r,l)){for(var h=!0,u=o,_=u.prev,c=null,d=u.diagonals.head;null!=d;){var f=d.elt;if(f==r){var x=null==d.next?u.next:d.next.elt;h=zpp_$nape_geom_ZPP_$Convex.isinner(x,u,_);break}_=f,c=d,d=d.next}h?(a=r.diagonals.erase(s),u.diagonals.erase(c)):(l=o,s=a,a=a.next)}else s=a,l=o,a=a.next}if((i=i.next)==t)break}};var zpp_$nape_geom_ZPP_$ConvexRayResult=function(){this.toiDistance=0,this.next=null,this.inner=!1,this.ray=null,this.position=null,this.convex=null,this.shape=null,this.normal=null};t["zpp_nape.geom.ZPP_ConvexRayResult"]=zpp_$nape_geom_ZPP_$ConvexRayResult,zpp_$nape_geom_ZPP_$ConvexRayResult.__name__="zpp_nape.geom.ZPP_ConvexRayResult",zpp_$nape_geom_ZPP_$ConvexRayResult.getRay=function(n,e,t,i){var r;null==zpp_$nape_geom_ZPP_$ConvexRayResult.rayPool?(zpp_$nape_geom_ZPP_$ConvexRayResult.internal=!0,(r=new nape_geom_RayResult).zpp_inner=new zpp_$nape_geom_ZPP_$ConvexRayResult,r.zpp_inner.ray=r,zpp_$nape_geom_ZPP_$ConvexRayResult.internal=!1):(r=zpp_$nape_geom_ZPP_$ConvexRayResult.rayPool.ray,zpp_$nape_geom_ZPP_$ConvexRayResult.rayPool=zpp_$nape_geom_ZPP_$ConvexRayResult.rayPool.next,r.zpp_inner.next=null);var l=r.zpp_inner;return l.normal=n,n.zpp_inner._immutable=!0,l.toiDistance=e,l.inner=t,l.shape=i,r},zpp_$nape_geom_ZPP_$ConvexRayResult.getConvex=function(n,e,t,i){var r;null==zpp_$nape_geom_ZPP_$ConvexRayResult.convexPool?(zpp_$nape_geom_ZPP_$ConvexRayResult.internal=!0,(r=new nape_geom_ConvexResult).zpp_inner=new zpp_$nape_geom_ZPP_$ConvexRayResult,r.zpp_inner.convex=r,zpp_$nape_geom_ZPP_$ConvexRayResult.internal=!1):(r=zpp_$nape_geom_ZPP_$ConvexRayResult.convexPool.convex,zpp_$nape_geom_ZPP_$ConvexRayResult.convexPool=zpp_$nape_geom_ZPP_$ConvexRayResult.convexPool.next,r.zpp_inner.next=null);var l=r.zpp_inner;return l.normal=n,l.position=e,n.zpp_inner._immutable=!0,e.zpp_inner._immutable=!0,l.toiDistance=t,l.shape=i,r},zpp_$nape_geom_ZPP_$ConvexRayResult.prototype={disposed:function(){if(null!=this.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used")},free:function(){if(this.normal.zpp_inner._immutable=!1,null!=(e=this.normal)&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((t=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var n=e.zpp_inner;if(e.zpp_inner.outer=null,e.zpp_inner=null,(i=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=i:zpp_$nape_util_ZPP_$PubPool.poolVec2=i,zpp_$nape_util_ZPP_$PubPool.nextVec2=i,i.zpp_disp=!0,null!=(i=n).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,null!=this.position){var e,t;if(this.position.zpp_inner._immutable=!1,null!=(e=this.position)&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((t=e.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=t._isimmutable&&t._isimmutable(),e.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var i;n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,(i=e).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=i:zpp_$nape_util_ZPP_$PubPool.poolVec2=i,zpp_$nape_util_ZPP_$PubPool.nextVec2=i,i.zpp_disp=!0,null!=(i=n).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i}this.shape=null,this.toiDistance=0,null!=this.convex?(this.next=zpp_$nape_geom_ZPP_$ConvexRayResult.convexPool,zpp_$nape_geom_ZPP_$ConvexRayResult.convexPool=this):(this.next=zpp_$nape_geom_ZPP_$ConvexRayResult.rayPool,zpp_$nape_geom_ZPP_$ConvexRayResult.rayPool=this)},__class__:zpp_$nape_geom_ZPP_$ConvexRayResult};var zpp_$nape_geom_ZPP_$CutVert=function(){this.used=!1,this.rank=0,this.parent=null,this.positive=!1,this.value=0,this.vert=null,this.posy=0,this.posx=0,this.next=null,this.prev=null};t["zpp_nape.geom.ZPP_CutVert"]=zpp_$nape_geom_ZPP_$CutVert,zpp_$nape_geom_ZPP_$CutVert.__name__="zpp_nape.geom.ZPP_CutVert",zpp_$nape_geom_ZPP_$CutVert.path=function(n){var e;return null==zpp_$nape_geom_ZPP_$CutVert.zpp_pool?e=new zpp_$nape_geom_ZPP_$CutVert:(e=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=e.next,e.next=null),e.vert=n,e.parent=e,e.rank=0,e.used=!1,e},zpp_$nape_geom_ZPP_$CutVert.prototype={alloc:function(){},free:function(){this.vert=null,this.parent=null},__class__:zpp_$nape_geom_ZPP_$CutVert};var zpp_$nape_geom_ZPP_$CutInt=function(){this.path1=null,this.start=null,this.end=null,this.path0=null,this.vertex=!1,this.virtualint=!1,this.time=0,this.next=null};t["zpp_nape.geom.ZPP_CutInt"]=zpp_$nape_geom_ZPP_$CutInt,zpp_$nape_geom_ZPP_$CutInt.__name__="zpp_nape.geom.ZPP_CutInt",zpp_$nape_geom_ZPP_$CutInt.get=function(n,e,t,i,r,l,s){var a;return null==s&&(s=!1),null==l&&(l=!1),null==zpp_$nape_geom_ZPP_$CutInt.zpp_pool?a=new zpp_$nape_geom_ZPP_$CutInt:(a=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=a.next,a.next=null),a.virtualint=l,a.end=e,a.start=t,a.path0=i,a.path1=r,a.time=n,a.vertex=s,a},zpp_$nape_geom_ZPP_$CutInt.prototype={alloc:function(){},free:function(){this.end=this.start=null,this.path0=this.path1=null},__class__:zpp_$nape_geom_ZPP_$CutInt};var zpp_$nape_geom_ZPP_$Cutter=function(){};t["zpp_nape.geom.ZPP_Cutter"]=zpp_$nape_geom_ZPP_$Cutter,zpp_$nape_geom_ZPP_$Cutter.__name__="zpp_nape.geom.ZPP_Cutter",zpp_$nape_geom_ZPP_$Cutter.run=function(n,e,t,i,r,l){var s,a;if(null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(re=e.zpp_inner)._validate&&re._validate(),s=e.zpp_inner.x,null!=e&&e.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(re=e.zpp_inner)._validate&&re._validate(),a=e.zpp_inner.y;var o,p;if(null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(re=t.zpp_inner)._validate&&re._validate(),o=t.zpp_inner.x-s,null!=t&&t.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(re=t.zpp_inner)._validate&&re._validate();for(var h=i?0:-1/0,u=r?1:1/0,_=-(a*o-s*(p=t.zpp_inner.y-a)),c=null,d=!1,f=n;;){var x;null==zpp_$nape_geom_ZPP_$CutVert.zpp_pool?x=new zpp_$nape_geom_ZPP_$CutVert:(x=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=x.next,x.next=null),x.vert=f,x.posx=x.vert.x,x.posy=x.vert.y,x.value=x.posy*o-x.posx*p+_,x.positive=x.value>0,0==x.value&&(d=!0);var b=x;if(null==c?c=b.prev=b.next=b:(b.prev=c,b.next=c.next,c.next.prev=b,c.next=b),c=b,(f=f.next)==n)break}if(d){var y=null,v=c;if(null!=(F=c))for(var m=F;;){if(0!=(f=m).value){y=f;break}if((m=m.next)==v)break}var g=0,z=0,w=(g=o)*g+(z=p)*z;z*=O=1/Math.sqrt(w);var O=g*=O;g=-z,z=O;var C=null;for(f=y;;){if(0==f.value||null!=C&&f!=C.next){if(0!=(I=C.value*f.value)){var E=C.next;if(I>0)N=C.positive;else{var U=E.next,M=0,T=0;M=E.posx+U.posx,T=E.posy+U.posy;var k=(M*=O=.5)+1e-8*g,D=(T*=O)+1e-8*z,S=!1;v=n;if(null!=(F=n))for(m=F;;){var A=(ri=m).prev;if((ri.y<D&&A.y>=D||A.y<D&&ri.y>=D)&&(ri.x<=k||A.x<=k)&&ri.x+(D-ri.y)/(A.y-ri.y)*(A.x-ri.x)<k&&(S=!S),(m=m.next)==v)break}N=S}var P=f;if(null!=(R=E))for(var V=R;;){if(V.positive=N,(V=V.next)==P)break}if(C=f,(f=f.next)==y)break}else if((f=f.next)==y)break}else if(C=f,(f=f.next)==y)break}for(;;){if(0!=f.value&&(null==C||f==C.next)){C=f,f=f.next;break}var I;if(0==(I=C.value*f.value)){f=f.next;break}var N;E=C.next;if(I>0)N=C.positive;else{U=E.next,M=0,T=0;M=E.posx+U.posx,T=E.posy+U.posy;var F;k=(M*=O=.5)+1e-8*g,D=(T*=O)+1e-8*z,S=!1,v=n;if(null!=(F=n))for(m=F;;){A=(ri=m).prev;if((ri.y<D&&A.y>=D||A.y<D&&ri.y>=D)&&(ri.x<=k||A.x<=k)&&ri.x+(D-ri.y)/(A.y-ri.y)*(A.x-ri.x)<k&&(S=!S),(m=m.next)==v)break}N=S}var R;P=f;if(null!=(R=E))for(V=R;;){if(V.positive=N,(V=V.next)==P)break}C=f,f=f.next;break}}null==zpp_$nape_geom_ZPP_$Cutter.ints&&(zpp_$nape_geom_ZPP_$Cutter.ints=new zpp_$nape_util_ZNPList_$ZPP_$CutInt),null==zpp_$nape_geom_ZPP_$Cutter.paths&&(zpp_$nape_geom_ZPP_$Cutter.paths=new zpp_$nape_util_ZNPList_$ZPP_$CutVert);y=null,k=c.posx,D=c.posy;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?S=new zpp_$nape_geom_ZPP_$GeomVert:(S=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=S.next,S.next=null),S.forced=!1,S.x=k,S.y=D;b=S;null==y?y=b.prev=b.next=b:(b.next=y,b.prev=y.prev,y.prev.next=b,y.prev=b);var L=y;null==zpp_$nape_geom_ZPP_$CutVert.zpp_pool?S=new zpp_$nape_geom_ZPP_$CutVert:(S=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=S.next,S.next=null),S.vert=y,S.parent=S,S.rank=0,S.used=!1;var B=S;zpp_$nape_geom_ZPP_$Cutter.paths.add(B);for(var G=c;;){k=(ee=G.next).posx,D=ee.posy;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?S=new zpp_$nape_geom_ZPP_$GeomVert:(S=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=S.next,S.next=null),S.forced=!1,S.x=k,S.y=D;var j=S;if(G.positive==ee.positive){b=j;null==y?y=b.prev=b.next=b:(b.next=y,b.prev=y.prev,y.prev.next=b,y.prev=b)}else{var K,W,Y=p*(K=ee.posx-G.posx)-o*(W=ee.posy-G.posy);Y=1/Y;var X,H,Z=(W*(X=s-G.posx)-K*(H=a-G.posy))*Y;if(Z<h||Z>u){var q,$=zpp_$nape_geom_ZPP_$Cutter.ints,Q=!0;null==Q&&(Q=!1),null==zpp_$nape_geom_ZPP_$CutInt.zpp_pool?q=new zpp_$nape_geom_ZPP_$CutInt:(q=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=q.next,q.next=null),q.virtualint=Q,q.end=null,q.start=null,q.path0=null,q.path1=null,q.time=Z,q.vertex=!1,$.add(q);var J=j;null==y?y=J.prev=J.next=J:(J.next=y,J.prev=y.prev,y.prev.next=J,y.prev=J)}else if(0==G.value){var nn=y.prev;y=null;var en,tn=nn.x,rn=nn.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?en=new zpp_$nape_geom_ZPP_$GeomVert:(en=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=en.next,en.next=null),en.forced=!1,en.x=tn,en.y=rn;var ln=en;null==y?y=ln.prev=ln.next=ln:(ln.next=y,ln.prev=y.prev,y.prev.next=ln,y.prev=ln);var sn=j;null==y?y=sn.prev=sn.next=sn:(sn.next=y,sn.prev=y.prev,y.prev.next=sn,y.prev=sn);var an,on=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt,pn=zpp_$nape_geom_ZPP_$Cutter.paths;null==zpp_$nape_geom_ZPP_$CutVert.zpp_pool?an=new zpp_$nape_geom_ZPP_$CutVert:(an=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=an.next,an.next=null),an.vert=y,an.parent=an,an.rank=0,an.used=!1,pn.add(an);var hn,un=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt,_n=zpp_$nape_geom_ZPP_$Cutter.ints,cn=!0;null==cn&&(cn=!1),null==zpp_$nape_geom_ZPP_$CutInt.zpp_pool?hn=new zpp_$nape_geom_ZPP_$CutInt:(hn=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=hn.next,hn.next=null),hn.virtualint=cn,hn.end=nn,hn.start=y,hn.path0=on,hn.path1=un,hn.time=Z,hn.vertex=!1,_n.add(hn)}else if(0==ee.value){var dn=j;null==y?y=dn.prev=dn.next=dn:(dn.next=y,dn.prev=y.prev,y.prev.next=dn,y.prev=dn);var xn=y.prev;y=null;var bn,yn=ee.posx,vn=ee.posy;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?bn=new zpp_$nape_geom_ZPP_$GeomVert:(bn=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=bn.next,bn.next=null),bn.forced=!1,bn.x=yn,bn.y=vn;var mn=bn;null==y?y=mn.prev=mn.next=mn:(mn.next=y,mn.prev=y.prev,y.prev.next=mn,y.prev=mn);var gn,zn=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt,wn=zpp_$nape_geom_ZPP_$Cutter.paths;null==zpp_$nape_geom_ZPP_$CutVert.zpp_pool?gn=new zpp_$nape_geom_ZPP_$CutVert:(gn=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=gn.next,gn.next=null),gn.vert=y,gn.parent=gn,gn.rank=0,gn.used=!1,wn.add(gn);var On,Cn=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt,En=zpp_$nape_geom_ZPP_$Cutter.ints,Un=!0;null==Un&&(Un=!1),null==zpp_$nape_geom_ZPP_$CutInt.zpp_pool?On=new zpp_$nape_geom_ZPP_$CutInt:(On=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=On.next,On.next=null),On.virtualint=Un,On.end=xn,On.start=y,On.path0=zn,On.path1=Cn,On.time=Z,On.vertex=!1,En.add(On)}else{O=(p*X-o*H)*Y;var Mn=0,Tn=0;Mn=G.posx,Tn=G.posy;var kn;Mn+=K*O,Tn+=W*O,null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?kn=new zpp_$nape_geom_ZPP_$GeomVert:(kn=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=kn.next,kn.next=null),kn.forced=!1,kn.x=Mn,kn.y=Tn;var Dn=kn;null==y?y=Dn.prev=Dn.next=Dn:(Dn.next=y,Dn.prev=y.prev,y.prev.next=Dn,y.prev=Dn);var Sn,An=y.prev;y=null,null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Sn=new zpp_$nape_geom_ZPP_$GeomVert:(Sn=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Sn.next,Sn.next=null),Sn.forced=!1,Sn.x=Mn,Sn.y=Tn;var Pn=Sn;null==y?y=Pn.prev=Pn.next=Pn:(Pn.next=y,Pn.prev=y.prev,y.prev.next=Pn,y.prev=Pn);var Vn=j;null==y?y=Vn.prev=Vn.next=Vn:(Vn.next=y,Vn.prev=y.prev,y.prev.next=Vn,y.prev=Vn);var In,Nn=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt,Fn=zpp_$nape_geom_ZPP_$Cutter.paths;null==zpp_$nape_geom_ZPP_$CutVert.zpp_pool?In=new zpp_$nape_geom_ZPP_$CutVert:(In=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=In.next,In.next=null),In.vert=y,In.parent=In,In.rank=0,In.used=!1,Fn.add(In);var Rn,Ln=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt,Bn=zpp_$nape_geom_ZPP_$Cutter.ints,Gn=!1;null==Gn&&(Gn=!1),null==zpp_$nape_geom_ZPP_$CutInt.zpp_pool?Rn=new zpp_$nape_geom_ZPP_$CutInt:(Rn=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=Rn.next,Rn.next=null),Rn.virtualint=Gn,Rn.end=An,Rn.start=y,Rn.path0=Nn,Rn.path1=Ln,Rn.time=Z,Rn.vertex=!1,Bn.add(Rn)}}if((G=G.next)==c)break}(nn=y.prev).next.prev=L.prev,L.prev.next=nn.next,nn.next=L,L.prev=nn;var jn=zpp_$nape_geom_ZPP_$Cutter.paths.head.elt;if(B==B.parent)Lt=B;else{b=B;for(var Kn=null;b!=b.parent;){var Wn=b.parent;b.parent=Kn,Kn=b,b=Wn}for(;null!=Kn;){Wn=Kn.parent;Kn.parent=b,Kn=Wn}Lt=b}if(jn==jn.parent)Bt=jn;else{for(b=jn,Kn=null;b!=b.parent;){Wn=b.parent;b.parent=Kn,Kn=b,b=Wn}for(;null!=Kn;){Wn=Kn.parent;Kn.parent=b,Kn=Wn}Bt=b}Lt!=Bt&&(Lt.rank<Bt.rank?Lt.parent=Bt:Lt.rank>Bt.rank?Bt.parent=Lt:(Bt.parent=Lt,Lt.rank++));var Yn=zpp_$nape_geom_ZPP_$Cutter.ints;if(null!=Yn.head&&null!=Yn.head.next){for(var Xn,Hn,Zn,qn=Yn.head,$n=null,Qn=null,Jn=null,ne=(Wn=null,1);;){for(Xn=0,Qn=qn,$n=qn=null;null!=Qn;){for(++Xn,Jn=Qn,Hn=0,Zn=ne;null!=Jn&&Hn<ne;)++Hn,Jn=Jn.next;for(;Hn>0||Zn>0&&null!=Jn;)0==Hn?(Wn=Jn,Jn=Jn.next,--Zn):0==Zn||null==Jn||Qn.elt.time<Jn.elt.time?(Wn=Qn,Qn=Qn.next,--Hn):(Wn=Jn,Jn=Jn.next,--Zn),null!=$n?$n.next=Wn:qn=Wn,$n=Wn;Qn=Jn}if($n.next=null,ne<<=1,!(Xn>1))break}Yn.head=qn,Yn.modified=!0,Yn.pushmod=!0}for(;null!=zpp_$nape_geom_ZPP_$Cutter.ints.head;){G=zpp_$nape_geom_ZPP_$Cutter.ints.pop_unsafe();var ee=zpp_$nape_geom_ZPP_$Cutter.ints.pop_unsafe();if(G.virtualint||ee.virtualint){if(G.virtualint&&!ee.virtualint){var te,ie;if(null!=ee.end&&ee.end.prev==ee.end){if(ee.end.next=ee.end.prev=null,null!=(ai=ee.end).wrap){var re;if(ai.wrap.zpp_inner._inuse=!1,null!=(re=ai.wrap)&&re.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var le=re.zpp_inner;if(le._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=le._isimmutable&&le._isimmutable(),re.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var se=re.zpp_inner;re.zpp_inner.outer=null,re.zpp_inner=null,(oi=re).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=oi:zpp_$nape_util_ZPP_$PubPool.poolVec2=oi,zpp_$nape_util_ZPP_$PubPool.nextVec2=oi,oi.zpp_disp=!0;var ae=se;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae._isimmutable=null,ae._validate=null,ae._invalidate=null,ae.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ae,ai.wrap=null}ai.prev=ai.next=null,ai.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ai,$=null}else{var oe=ee.end.prev;ee.end.prev.next=ee.end.next,ee.end.next.prev=ee.end.prev,ee.end.next=ee.end.prev=null;var pe=ee.end;if(null!=pe.wrap){pe.wrap.zpp_inner._inuse=!1;var he=pe.wrap;if(null!=he&&he.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var ue=he.zpp_inner;if(ue._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=ue._isimmutable&&ue._isimmutable(),he.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _e=he.zpp_inner;he.zpp_inner.outer=null,he.zpp_inner=null;var ce=he;ce.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=ce:zpp_$nape_util_ZPP_$PubPool.poolVec2=ce,zpp_$nape_util_ZPP_$PubPool.nextVec2=ce,ce.zpp_disp=!0;var de=_e;null!=de.outer&&(de.outer.zpp_inner=null,de.outer=null),de._isimmutable=null,de._validate=null,de._invalidate=null,de.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=de,pe.wrap=null}pe.prev=pe.next=null,pe.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=pe,ee.end=null,$=oe}if(ee.end=$,!ee.vertex)if(ee.end!=ee.path0.vert){if(ee.start.x=ee.end.x,ee.start.y=ee.end.y,null!=ee.end&&ee.end.prev==ee.end){ee.end.next=ee.end.prev=null;var fe=ee.end;if(null!=fe.wrap){fe.wrap.zpp_inner._inuse=!1;var xe=fe.wrap;if(null!=xe&&xe.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var be=xe.zpp_inner;if(be._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=be._isimmutable&&be._isimmutable(),xe.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var ye=xe.zpp_inner;xe.zpp_inner.outer=null,xe.zpp_inner=null;var ve=xe;ve.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=ve:zpp_$nape_util_ZPP_$PubPool.poolVec2=ve,zpp_$nape_util_ZPP_$PubPool.nextVec2=ve,ve.zpp_disp=!0;var me=ye;null!=me.outer&&(me.outer.zpp_inner=null,me.outer=null),me._isimmutable=null,me._validate=null,me._invalidate=null,me.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=me,fe.wrap=null}fe.prev=fe.next=null,fe.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=fe,pn=null}else{var ge=ee.end.prev;ee.end.prev.next=ee.end.next,ee.end.next.prev=ee.end.prev,ee.end.next=ee.end.prev=null;var ze=ee.end;if(null!=ze.wrap){ze.wrap.zpp_inner._inuse=!1;var we=ze.wrap;if(null!=we&&we.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var Oe=we.zpp_inner;if(Oe._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=Oe._isimmutable&&Oe._isimmutable(),we.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var Ce=we.zpp_inner;we.zpp_inner.outer=null,we.zpp_inner=null;var Ee=we;Ee.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=Ee:zpp_$nape_util_ZPP_$PubPool.poolVec2=Ee,zpp_$nape_util_ZPP_$PubPool.nextVec2=Ee,Ee.zpp_disp=!0;var Ue=Ce;null!=Ue.outer&&(Ue.outer.zpp_inner=null,Ue.outer=null),Ue._isimmutable=null,Ue._validate=null,Ue._invalidate=null,Ue.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Ue,ze.wrap=null}ze.prev=ze.next=null,ze.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ze,ee.end=null,pn=ge}ee.end=pn}else{var Me=ee.start.next;if(ee.start.x=Me.x,ee.start.y=Me.y,null!=Me&&Me.prev==Me){Me.next=Me.prev=null;var Te=Me;if(null!=Te.wrap){Te.wrap.zpp_inner._inuse=!1;var ke=Te.wrap;if(null!=ke&&ke.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var De=ke.zpp_inner;if(De._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=De._isimmutable&&De._isimmutable(),ke.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var Se=ke.zpp_inner;ke.zpp_inner.outer=null,ke.zpp_inner=null;var Ae=ke;Ae.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=Ae:zpp_$nape_util_ZPP_$PubPool.poolVec2=Ae,zpp_$nape_util_ZPP_$PubPool.nextVec2=Ae,Ae.zpp_disp=!0;var Pe=Se;null!=Pe.outer&&(Pe.outer.zpp_inner=null,Pe.outer=null),Pe._isimmutable=null,Pe._validate=null,Pe._invalidate=null,Pe.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Pe,Te.wrap=null}Te.prev=Te.next=null,Te.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Te,Me=null}else{Me.prev.next=Me.next,Me.next.prev=Me.prev,Me.next=Me.prev=null;var Ve=Me;if(null!=Ve.wrap){Ve.wrap.zpp_inner._inuse=!1;var Ie=Ve.wrap;if(null!=Ie&&Ie.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var Ne=Ie.zpp_inner;if(Ne._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=Ne._isimmutable&&Ne._isimmutable(),Ie.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var Fe=Ie.zpp_inner;Ie.zpp_inner.outer=null,Ie.zpp_inner=null;var Re=Ie;Re.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=Re:zpp_$nape_util_ZPP_$PubPool.poolVec2=Re,zpp_$nape_util_ZPP_$PubPool.nextVec2=Re,Re.zpp_disp=!0;var Le=Fe;null!=Le.outer&&(Le.outer.zpp_inner=null,Le.outer=null),Le._isimmutable=null,Le._validate=null,Le._invalidate=null,Le.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Le,Ve.wrap=null}Ve.prev=Ve.next=null,Ve.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Ve}}if(ee.end.next.prev=ee.start.prev,ee.start.prev.next=ee.end.next,ee.end.next=ee.start,ee.start.prev=ee.end,ee.path0==ee.path0.parent)te=ee.path0;else{dn=ee.path0;for(var Be=null;dn!=dn.parent;){var Ge=dn.parent;dn.parent=Be,Be=dn,dn=Ge}for(;null!=Be;){var je=Be.parent;Be.parent=dn,Be=je}te=dn}if(ee.path1==ee.path1.parent)ie=ee.path1;else{mn=ee.path1;for(var Ke=null;mn!=mn.parent;){var We=mn.parent;mn.parent=Ke,Ke=mn,mn=We}for(;null!=Ke;){var Ye=Ke.parent;Ke.parent=mn,Ke=Ye}ie=mn}te!=ie&&(te.rank<ie.rank?te.parent=ie:te.rank>ie.rank?ie.parent=te:(ie.parent=te,te.rank++))}else if(ee.virtualint&&!G.virtualint){var Xe,He;if(null!=G.end&&G.end.prev==G.end){G.end.next=G.end.prev=null;var Ze=G.end;if(null!=Ze.wrap){Ze.wrap.zpp_inner._inuse=!1;var qe=Ze.wrap;if(null!=qe&&qe.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var $e=qe.zpp_inner;if($e._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=$e._isimmutable&&$e._isimmutable(),qe.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var Qe=qe.zpp_inner;qe.zpp_inner.outer=null,qe.zpp_inner=null;var Je=qe;Je.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=Je:zpp_$nape_util_ZPP_$PubPool.poolVec2=Je,zpp_$nape_util_ZPP_$PubPool.nextVec2=Je,Je.zpp_disp=!0;var nt=Qe;null!=nt.outer&&(nt.outer.zpp_inner=null,nt.outer=null),nt._isimmutable=null,nt._validate=null,nt._invalidate=null,nt.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=nt,Ze.wrap=null}Ze.prev=Ze.next=null,Ze.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Ze,_n=null}else{var et=G.end.prev;G.end.prev.next=G.end.next,G.end.next.prev=G.end.prev,G.end.next=G.end.prev=null;var tt=G.end;if(null!=tt.wrap){tt.wrap.zpp_inner._inuse=!1;var it=tt.wrap;if(null!=it&&it.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var rt=it.zpp_inner;if(rt._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=rt._isimmutable&&rt._isimmutable(),it.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var lt=it.zpp_inner;it.zpp_inner.outer=null,it.zpp_inner=null;var st=it;st.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=st:zpp_$nape_util_ZPP_$PubPool.poolVec2=st,zpp_$nape_util_ZPP_$PubPool.nextVec2=st,st.zpp_disp=!0;var at=lt;null!=at.outer&&(at.outer.zpp_inner=null,at.outer=null),at._isimmutable=null,at._validate=null,at._invalidate=null,at.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=at,tt.wrap=null}tt.prev=tt.next=null,tt.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=tt,G.end=null,_n=et}if(G.end=_n,!G.vertex)if(G.end!=G.path0.vert){if(G.start.x=G.end.x,G.start.y=G.end.y,null!=G.end&&G.end.prev==G.end){G.end.next=G.end.prev=null;var ot=G.end;if(null!=ot.wrap){ot.wrap.zpp_inner._inuse=!1;var pt=ot.wrap;if(null!=pt&&pt.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var ht=pt.zpp_inner;if(ht._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=ht._isimmutable&&ht._isimmutable(),pt.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var ut=pt.zpp_inner;pt.zpp_inner.outer=null,pt.zpp_inner=null;var _t=pt;_t.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_t:zpp_$nape_util_ZPP_$PubPool.poolVec2=_t,zpp_$nape_util_ZPP_$PubPool.nextVec2=_t,_t.zpp_disp=!0;var ct=ut;null!=ct.outer&&(ct.outer.zpp_inner=null,ct.outer=null),ct._isimmutable=null,ct._validate=null,ct._invalidate=null,ct.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ct,ot.wrap=null}ot.prev=ot.next=null,ot.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ot,wn=null}else{var dt=G.end.prev;G.end.prev.next=G.end.next,G.end.next.prev=G.end.prev,G.end.next=G.end.prev=null;var ft=G.end;if(null!=ft.wrap){ft.wrap.zpp_inner._inuse=!1;var xt=ft.wrap;if(null!=xt&&xt.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var bt=xt.zpp_inner;if(bt._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=bt._isimmutable&&bt._isimmutable(),xt.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var yt=xt.zpp_inner;xt.zpp_inner.outer=null,xt.zpp_inner=null;var vt=xt;vt.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=vt:zpp_$nape_util_ZPP_$PubPool.poolVec2=vt,zpp_$nape_util_ZPP_$PubPool.nextVec2=vt,vt.zpp_disp=!0;var mt=yt;null!=mt.outer&&(mt.outer.zpp_inner=null,mt.outer=null),mt._isimmutable=null,mt._validate=null,mt._invalidate=null,mt.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=mt,ft.wrap=null}ft.prev=ft.next=null,ft.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ft,G.end=null,wn=dt}G.end=wn}else{var gt=G.start.next;if(G.start.x=gt.x,G.start.y=gt.y,null!=gt&&gt.prev==gt){gt.next=gt.prev=null;var zt=gt;if(null!=zt.wrap){zt.wrap.zpp_inner._inuse=!1;var wt=zt.wrap;if(null!=wt&&wt.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var Ot=wt.zpp_inner;if(Ot._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=Ot._isimmutable&&Ot._isimmutable(),wt.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var Ct=wt.zpp_inner;wt.zpp_inner.outer=null,wt.zpp_inner=null;var Et=wt;Et.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=Et:zpp_$nape_util_ZPP_$PubPool.poolVec2=Et,zpp_$nape_util_ZPP_$PubPool.nextVec2=Et,Et.zpp_disp=!0;var Ut=Ct;null!=Ut.outer&&(Ut.outer.zpp_inner=null,Ut.outer=null),Ut._isimmutable=null,Ut._validate=null,Ut._invalidate=null,Ut.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Ut,zt.wrap=null}zt.prev=zt.next=null,zt.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=zt,gt=null}else{gt.prev.next=gt.next,gt.next.prev=gt.prev,gt.next=gt.prev=null;var Mt=gt;if(null!=Mt.wrap){Mt.wrap.zpp_inner._inuse=!1;var Tt=Mt.wrap;if(null!=Tt&&Tt.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var kt=Tt.zpp_inner;if(kt._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=kt._isimmutable&&kt._isimmutable(),Tt.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var Dt=Tt.zpp_inner;Tt.zpp_inner.outer=null,Tt.zpp_inner=null;var St=Tt;St.zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=St:zpp_$nape_util_ZPP_$PubPool.poolVec2=St,zpp_$nape_util_ZPP_$PubPool.nextVec2=St,St.zpp_disp=!0;var At=Dt;null!=At.outer&&(At.outer.zpp_inner=null,At.outer=null),At._isimmutable=null,At._validate=null,At._invalidate=null,At.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=At,Mt.wrap=null}Mt.prev=Mt.next=null,Mt.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Mt}}if(G.end.next.prev=G.start.prev,G.start.prev.next=G.end.next,G.end.next=G.start,G.start.prev=G.end,G.path0==G.path0.parent)Xe=G.path0;else{Dn=G.path0;for(var Pt=null;Dn!=Dn.parent;){var Vt=Dn.parent;Dn.parent=Pt,Pt=Dn,Dn=Vt}for(;null!=Pt;){var It=Pt.parent;Pt.parent=Dn,Pt=It}Xe=Dn}if(G.path1==G.path1.parent)He=G.path1;else{Pn=G.path1;for(var Nt=null;Pn!=Pn.parent;){var Ft=Pn.parent;Pn.parent=Nt,Nt=Pn,Pn=Ft}for(;null!=Nt;){var Rt=Nt.parent;Nt.parent=Pn,Nt=Rt}He=Pn}Xe!=He&&(Xe.rank<He.rank?Xe.parent=He:Xe.rank>He.rank?He.parent=Xe:(He.parent=Xe,Xe.rank++))}}else{var Lt,Bt,Gt,jt;if(G.end.next.prev=ee.start.prev,ee.start.prev.next=G.end.next,G.end.next=ee.start,ee.start.prev=G.end,ee.end.next.prev=G.start.prev,G.start.prev.next=ee.end.next,ee.end.next=G.start,G.start.prev=ee.end,G.path0==G.path0.parent)Lt=G.path0;else{for(b=G.path0,Kn=null;b!=b.parent;){Wn=b.parent;b.parent=Kn,Kn=b,b=Wn}for(;null!=Kn;){var Kt=Kn.parent;Kn.parent=b,Kn=Kt}Lt=b}if(ee.path1==ee.path1.parent)Bt=ee.path1;else{J=ee.path1;for(var Wt=null;J!=J.parent;){var Yt=J.parent;J.parent=Wt,Wt=J,J=Yt}for(;null!=Wt;){var Xt=Wt.parent;Wt.parent=J,Wt=Xt}Bt=J}if(Lt!=Bt&&(Lt.rank<Bt.rank?Lt.parent=Bt:Lt.rank>Bt.rank?Bt.parent=Lt:(Bt.parent=Lt,Lt.rank++)),G.path1==G.path1.parent)Gt=G.path1;else{ln=G.path1;for(var Ht=null;ln!=ln.parent;){var Zt=ln.parent;ln.parent=Ht,Ht=ln,ln=Zt}for(;null!=Ht;){var qt=Ht.parent;Ht.parent=ln,Ht=qt}Gt=ln}if(ee.path0==ee.path0.parent)jt=ee.path0;else{sn=ee.path0;for(var $t=null;sn!=sn.parent;){var Qt=sn.parent;sn.parent=$t,$t=sn,sn=Qt}for(;null!=$t;){var Jt=$t.parent;$t.parent=sn,$t=Jt}jt=sn}Gt!=jt&&(Gt.rank<jt.rank?Gt.parent=jt:Gt.rank>jt.rank?jt.parent=Gt:(jt.parent=Gt,Gt.rank++))}var ni=G;ni.end=ni.start=null,ni.path0=ni.path1=null,ni.next=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=ni;var ei=ee;ei.end=ei.start=null,ei.path0=ei.path1=null,ei.next=zpp_$nape_geom_ZPP_$CutInt.zpp_pool,zpp_$nape_geom_ZPP_$CutInt.zpp_pool=ei}S=null==l?new nape_geom_GeomPolyList:l;for(var ti=zpp_$nape_geom_ZPP_$Cutter.paths.head;null!=ti;){var ii;if((f=ti.elt)==f.parent)ii=f;else{for(b=f,Kn=null;b!=b.parent;){Wn=b.parent;b.parent=Kn,Kn=b,b=Wn}for(;null!=Kn;){Kt=Kn.parent;Kn.parent=b,Kn=Kt}ii=b}if(ii.used)ti=ti.next;else{ii.used=!0;for(var ri=ii.vert,li=!0;null!=ii.vert&&(li||ri!=ii.vert);)if(li=!1,ri.x==ri.next.x&&ri.y==ri.next.y)if(ri==ii.vert&&(ii.vert=ri.next==ri?null:ri.next,li=!0),null!=ri&&ri.prev==ri)ri.next=ri.prev=null,ri=null;else{oe=ri.next;ri.prev.next=ri.next,ri.next.prev=ri.prev,ri.next=ri.prev=null,ri=null,ri=oe}else ri=ri.next;if(null!=ii.vert){var si=nape_geom_GeomPoly.get();si.zpp_inner.vertices=ii.vert,S.zpp_inner.reverse_flag?S.push(si):S.unshift(si)}ti=ti.next}}for(;null!=zpp_$nape_geom_ZPP_$Cutter.paths.head;){(ai=f=zpp_$nape_geom_ZPP_$Cutter.paths.pop_unsafe()).vert=null,ai.parent=null,ai.next=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=ai}for(;null!=c;)if(null!=c&&c.prev==c){var ai;c.next=c.prev=null,(ai=c).vert=null,ai.parent=null,ai.next=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=ai,c=null}else{var oi;oe=c.next;c.prev.next=c.next,c.next.prev=c.prev,c.next=c.prev=null,(oi=c).vert=null,oi.parent=null,oi.next=zpp_$nape_geom_ZPP_$CutVert.zpp_pool,zpp_$nape_geom_ZPP_$CutVert.zpp_pool=oi,c=null,c=oe}return S};var zpp_$nape_geom_ZPP_$Geom=function(){};t["zpp_nape.geom.ZPP_Geom"]=zpp_$nape_geom_ZPP_$Geom,zpp_$nape_geom_ZPP_$Geom.__name__="zpp_nape.geom.ZPP_Geom",zpp_$nape_geom_ZPP_$Geom.validateShape=function(n){if(1==n.type&&((y=n.polygon).zip_gaxi&&null!=y.body)){if(y.zip_gaxi=!1,y.validate_laxi(),(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts(),(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var e=y.lverts.next,t=y.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=y.body.posx+(y.body.axisy*r.x-y.body.axisx*r.y),i.y=y.body.posy+(r.x*y.body.axisx+r.y*y.body.axisy),t=t.next}}var l=y.edges.head,s=t=y.gverts.next;for(t=t.next;null!=t;){var a=t,o=l.elt;l=l.next,o.gp0=s,o.gp1=a,o.gnormx=y.body.axisy*o.lnormx-y.body.axisx*o.lnormy,o.gnormy=o.lnormx*y.body.axisx+o.lnormy*y.body.axisy,o.gprojection=y.body.posx*o.gnormx+y.body.posy*o.gnormy+o.lprojection,null!=o.wrap_gnorm&&(o.wrap_gnorm.zpp_inner.x=o.gnormx,o.wrap_gnorm.zpp_inner.y=o.gnormy),o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy,o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy,s=a,t=t.next}a=y.gverts.next,o=l.elt;l=l.next,o.gp0=s,o.gp1=a,o.gnormx=y.body.axisy*o.lnormx-y.body.axisx*o.lnormy,o.gnormy=o.lnormx*y.body.axisx+o.lnormy*y.body.axisy,o.gprojection=y.body.posx*o.gnormx+y.body.posy*o.gnormy+o.lprojection,null!=o.wrap_gnorm&&(o.wrap_gnorm.zpp_inner.x=o.gnormx,o.wrap_gnorm.zpp_inner.y=o.gnormy),o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy,o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy}if(n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){if((y=n.circle).zip_worldCOM&&null!=y.body){if(y.zip_worldCOM=!1,y.zip_localCOM){if(y.zip_localCOM=!1,1==y.type){if(null==(f=y.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==f.lverts.next.next)f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;else if(null==f.lverts.next.next.next){f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;var p=1;f.localCOMx+=f.lverts.next.next.x*p,f.localCOMy+=f.lverts.next.next.y*p;p=.5;f.localCOMx*=p,f.localCOMy*=p}else{f.localCOMx=0,f.localCOMy=0;var h=0;s=t=f.lverts.next,a=t=t.next;for(t=t.next;null!=t;){var u=t;h+=a.x*(u.y-s.y);var _=u.y*a.x-u.x*a.y;f.localCOMx+=(a.x+u.x)*_,f.localCOMy+=(a.y+u.y)*_,s=a,a=u,t=t.next}u=t=f.lverts.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;f.localCOMx+=(a.x+u.x)*_,f.localCOMy+=(a.y+u.y)*_,s=a,a=u;u=t=t.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;f.localCOMx+=(a.x+u.x)*_,f.localCOMy+=(a.y+u.y)*_;p=h=1/(3*h);f.localCOMx*=p,f.localCOMy*=p}}null!=y.wrap_localCOM&&(y.wrap_localCOM.zpp_inner.x=y.localCOMx,y.wrap_localCOM.zpp_inner.y=y.localCOMy)}(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),y.worldCOMx=y.body.posx+(y.body.axisy*y.localCOMx-y.body.axisx*y.localCOMy),y.worldCOMy=y.body.posy+(y.localCOMx*y.body.axisx+y.localCOMy*y.body.axisy)}var c=y.radius,d=y.radius;y.aabb.minx=y.worldCOMx-c,y.aabb.miny=y.worldCOMy-d,y.aabb.maxx=y.worldCOMx+c,y.aabb.maxy=y.worldCOMy+d}else{if((y=n.polygon).zip_gverts&&null!=y.body){var f;y.zip_gverts=!1,y.validate_lverts(),(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(e=y.lverts.next,t=y.gverts.next;null!=t;){i=t,r=e;e=e.next,i.x=y.body.posx+(y.body.axisy*r.x-y.body.axisx*r.y),i.y=y.body.posy+(r.x*y.body.axisx+r.y*y.body.axisy),t=t.next}}if(null==y.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var x=y.gverts.next;y.aabb.minx=x.x,y.aabb.miny=x.y,y.aabb.maxx=x.x,y.aabb.maxy=x.y;for(t=y.gverts.next.next;null!=t;){var b=t;b.x<y.aabb.minx&&(y.aabb.minx=b.x),b.x>y.aabb.maxx&&(y.aabb.maxx=b.x),b.y<y.aabb.miny&&(y.aabb.miny=b.y),b.y>y.aabb.maxy&&(y.aabb.maxy=b.y),t=t.next}}if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){if(null==(y=n.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next){y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;p=1;y.localCOMx+=y.lverts.next.next.x*p,y.localCOMy+=y.lverts.next.next.y*p;p=.5;y.localCOMx*=p,y.localCOMy*=p}else{y.localCOMx=0,y.localCOMy=0;h=0,s=t=y.lverts.next,a=t=t.next;for(t=t.next;null!=t;){u=t;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;y.localCOMx+=(a.x+u.x)*_,y.localCOMy+=(a.y+u.y)*_,s=a,a=u,t=t.next}u=t=y.lverts.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;y.localCOMx+=(a.x+u.x)*_,y.localCOMy+=(a.y+u.y)*_,s=a,a=u;u=t=t.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;y.localCOMx+=(a.x+u.x)*_,y.localCOMy+=(a.y+u.y)*_;p=h=1/(3*h);y.localCOMx*=p,y.localCOMy*=p}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}var y;(y=n.body).zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}};var zpp_$nape_geom_ZPP_$GeomVert=function(){this.forced=!1,this.wrap=null,this.next=null,this.prev=null,this.y=0,this.x=0};t["zpp_nape.geom.ZPP_GeomVert"]=zpp_$nape_geom_ZPP_$GeomVert,zpp_$nape_geom_ZPP_$GeomVert.__name__="zpp_nape.geom.ZPP_GeomVert",zpp_$nape_geom_ZPP_$GeomVert.get=function(n,e){var t;return null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?t=new zpp_$nape_geom_ZPP_$GeomVert:(t=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=t.next,t.next=null),t.forced=!1,t.x=n,t.y=e,t},zpp_$nape_geom_ZPP_$GeomVert.prototype={free:function(){if(null!=this.wrap){this.wrap.zpp_inner._inuse=!1;var n=this.wrap;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var e=n.zpp_inner;if(e._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=e._isimmutable&&e._isimmutable(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var t,i=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,(t=n).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=t:zpp_$nape_util_ZPP_$PubPool.poolVec2=t,zpp_$nape_util_ZPP_$PubPool.nextVec2=t,t.zpp_disp=!0,null!=(t=i).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,this.wrap=null}this.prev=this.next=null},alloc:function(){this.forced=!1},wrapper:function(){if(null==this.wrap){var n,e=this.x,t=this.y;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap=n,this.wrap.zpp_inner._inuse=!0,this.wrap.zpp_inner._invalidate=$bind(this,this.modwrap),this.wrap.zpp_inner._validate=$bind(this,this.getwrap)}return this.wrap},modwrap:function(n){this.x=n.x,this.y=n.y},getwrap:function(){this.wrap.zpp_inner.x=this.x,this.wrap.zpp_inner.y=this.y},__class__:zpp_$nape_geom_ZPP_$GeomVert};var zpp_$nape_geom_ZPP_$GeomPoly=function(n){this.vertices=null,this.outer=null,this.outer=n};t["zpp_nape.geom.ZPP_GeomPoly"]=zpp_$nape_geom_ZPP_$GeomPoly,zpp_$nape_geom_ZPP_$GeomPoly.__name__="zpp_nape.geom.ZPP_GeomPoly",zpp_$nape_geom_ZPP_$GeomPoly.prototype={__class__:zpp_$nape_geom_ZPP_$GeomPoly};var zpp_$nape_geom_ZPP_$GeomVertexIterator=function(){this.next=null,this.outer=null,this.forward=!1,this.first=!1,this.start=null,this.ptr=null,zpp_$nape_geom_ZPP_$GeomVertexIterator.internal=!0,this.outer=new nape_geom_GeomVertexIterator,zpp_$nape_geom_ZPP_$GeomVertexIterator.internal=!1};t["zpp_nape.geom.ZPP_GeomVertexIterator"]=zpp_$nape_geom_ZPP_$GeomVertexIterator,zpp_$nape_geom_ZPP_$GeomVertexIterator.__name__="zpp_nape.geom.ZPP_GeomVertexIterator",zpp_$nape_geom_ZPP_$GeomVertexIterator.get=function(n,e){var t;return null==zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool?t=new zpp_$nape_geom_ZPP_$GeomVertexIterator:(t=zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool,zpp_$nape_geom_ZPP_$GeomVertexIterator.zpp_pool=t.next,t.next=null),t.outer.zpp_inner=t,t.ptr=n,t.forward=e,t.start=n,t.first=null!=n,t.outer},zpp_$nape_geom_ZPP_$GeomVertexIterator.prototype={free:function(){this.outer.zpp_inner=null,this.ptr=this.start=null},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$GeomVertexIterator};var zpp_$nape_geom_ZPP_$MarchSpan=function(){this.next=null,this.out=!1,this.rank=0,this.parent=null,this.parent=this};t["zpp_nape.geom.ZPP_MarchSpan"]=zpp_$nape_geom_ZPP_$MarchSpan,zpp_$nape_geom_ZPP_$MarchSpan.__name__="zpp_nape.geom.ZPP_MarchSpan",zpp_$nape_geom_ZPP_$MarchSpan.prototype={free:function(){this.parent=this},alloc:function(){this.out=!1,this.rank=0},__class__:zpp_$nape_geom_ZPP_$MarchSpan};var zpp_$nape_geom_ZPP_$MarchPair=function(){this.next=null,this.spanr=null,this.span2=null,this.span1=null,this.pd=null,this.okeyr=0,this.keyr=0,this.pr=null,this.okey2=0,this.key2=0,this.p2=null,this.okey1=0,this.key1=0,this.p1=null};t["zpp_nape.geom.ZPP_MarchPair"]=zpp_$nape_geom_ZPP_$MarchPair,zpp_$nape_geom_ZPP_$MarchPair.__name__="zpp_nape.geom.ZPP_MarchPair",zpp_$nape_geom_ZPP_$MarchPair.prototype={free:function(){this.p1=this.p2=this.pr=this.pd=null,this.span1=this.span2=this.spanr=null},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$MarchPair};var zpp_$nape_geom_ZPP_$MarchingSquares=function(){};t["zpp_nape.geom.ZPP_MarchingSquares"]=zpp_$nape_geom_ZPP_$MarchingSquares,zpp_$nape_geom_ZPP_$MarchingSquares.__name__="zpp_nape.geom.ZPP_MarchingSquares",zpp_$nape_geom_ZPP_$MarchingSquares.run=function(n,e,t,i,r,l,s,a,o){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(yn=l.zpp_inner)._validate&&yn._validate();var p=(i-e)/l.zpp_inner.x,h=0|p;if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(yn=l.zpp_inner)._validate&&yn._validate();var u=(r-t)/l.zpp_inner.y,_=0|u;p!=h&&++h,u!=_&&++_,a&&(null==zpp_$nape_geom_ZPP_$MarchingSquares.map?zpp_$nape_geom_ZPP_$MarchingSquares.map=new zpp_$nape_util_ZNPArray2_$ZPP_$MarchPair(h,_):zpp_$nape_geom_ZPP_$MarchingSquares.map.resize(h,_,null)),null==zpp_$nape_geom_ZPP_$MarchingSquares.isos?zpp_$nape_geom_ZPP_$MarchingSquares.isos=new zpp_$nape_util_ZNPArray2_$Float(h+1,_+1):zpp_$nape_geom_ZPP_$MarchingSquares.isos.resize(h+1,_+1,0);for(var c=0,d=_+1;c<d;){var f;if(0==(R=c++))f=t;else if(R<=_){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(yn=l.zpp_inner)._validate&&yn._validate(),f=t+l.zpp_inner.y*R}else f=r;for(var x=0,b=h+1;x<b;){var y;if(0==(L=x++))y=e;else if(L<=h){if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(K=l.zpp_inner)._validate&&K._validate(),y=e+l.zpp_inner.x*L}else y=i;var v=zpp_$nape_geom_ZPP_$MarchingSquares.isos,m=n(y,f);v.list[R*v.width+L]=m}}null==zpp_$nape_geom_ZPP_$MarchingSquares.ints?zpp_$nape_geom_ZPP_$MarchingSquares.ints=new zpp_$nape_util_ZNPArray2_$ZPP_$GeomVert(h+1,1+(_<<1)):zpp_$nape_geom_ZPP_$MarchingSquares.ints.resize(h+1,1+(_<<1),null);var g=null;a&&(null==zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool?g=new zpp_$nape_geom_ZPP_$MarchSpan:(g=zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool,zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool=g.next,g.next=null),g.out=!1,g.rank=0);var z=t;for(c=0,d=_;c<d;){var w,O=z;if((R=c++)==_-1)w=r;else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(yn=l.zpp_inner)._validate&&yn._validate(),w=t+l.zpp_inner.y*(R+1)}z=w;var C=e,E=null;for(x=0,b=h;x<b;){var U,M=C;if((L=x++)==h-1)U=i;else{if(null!=l&&l.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(K=l.zpp_inner)._validate&&K._validate(),U=e+l.zpp_inner.x*(L+1)}C=U;var T=0==L||!a,k=0==R||!a,D=L==h-1||!a,S=R==_-1||!a,A=zpp_$nape_geom_ZPP_$MarchingSquares.me.marchSquare(n,zpp_$nape_geom_ZPP_$MarchingSquares.isos,zpp_$nape_geom_ZPP_$MarchingSquares.ints,M,O,U,w,L,R,T,k,D,S,s);if(null!=A)if(a){var P=null!=A.p2&&14!=A.okey2?A.p2:A.p1;if(A.pd=0==(128&(P==A.p2?A.okey2:A.okey1))?P.prev:P.prev.prev,(v=zpp_$nape_geom_ZPP_$MarchingSquares.map).list[R*v.width+L]=A,null!=E){zpp_$nape_geom_ZPP_$MarchingSquares.me;var V=0;0!=(1&(G=1&(q=A.key1)|(192&q)>>5))&&++V,0!=(2&G)&&++V,0!=(4&G)&&++V,H=V>=2}else H=!1;if(H)zpp_$nape_geom_ZPP_$MarchingSquares.me.combLR(E,A),A.span1=E.spanr;else{null==zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool?A.span1=new zpp_$nape_geom_ZPP_$MarchSpan:(A.span1=zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool,zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool=A.span1.next,A.span1.next=null);var I=A.span1;I.out=!1,I.rank=0,A.span1.next=g,g=A.span1}if(null!=A.p2){null==zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool?A.span2=new zpp_$nape_geom_ZPP_$MarchSpan:(A.span2=zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool,zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool=A.span2.next,A.span2.next=null);var N=A.span2;N.out=!1,N.rank=0,A.span2.next=g,g=A.span2,A.spanr=A.span2}else A.spanr=A.span1;zpp_$nape_geom_ZPP_$MarchingSquares.me;var F=0;0!=(1&(Y=(28&A.keyr)>>2))&&++F,0!=(2&Y)&&++F,0!=(4&Y)&&++F,E=F>=2?A:null}else{zpp_$nape_geom_ZPP_$MarchingSquares.me.output(o,A.p1),null!=A.p2&&zpp_$nape_geom_ZPP_$MarchingSquares.me.output(o,A.p2),(gn=A).p1=gn.p2=gn.pr=gn.pd=null,gn.span1=gn.span2=gn.spanr=null,gn.next=zpp_$nape_geom_ZPP_$MarchPair.zpp_pool,zpp_$nape_geom_ZPP_$MarchPair.zpp_pool=gn}else E=null}}if(a){for(c=1,d=_;c<d;){var R=c++;for(E=null,x=0,b=h;x<b;){var L=x++,B=(yn=zpp_$nape_geom_ZPP_$MarchingSquares.map).list[R*yn.width+L];if(null!=B){var G,j=null!=B.p2&&14==B.okey2?B.okey2:B.okey1,K=zpp_$nape_geom_ZPP_$MarchingSquares.me;V=0;if(0!=(1&(G=7&j))&&++V,0!=(2&G)&&++V,0!=(4&G)&&++V,V<2)E=null;else{var W=(v=zpp_$nape_geom_ZPP_$MarchingSquares.map).list[(R-1)*v.width+L];if(null!=W){var Y,X=null!=W.p2&&56==W.okey2?W.okey2:W.okey1;zpp_$nape_geom_ZPP_$MarchingSquares.me,F=0;if(0!=(1&(Y=(112&X)>>4))&&++F,0!=(2&Y)&&++F,0!=(4&Y)&&++F,F<2)E=null;else{var H,Z,q,$=null!=W.p2&&56==W.okey2?W.span2:W.span1,Q=null!=B.p2&&14==B.okey2?B.span2:B.span1;if($==$.parent)H=$;else{m=$;for(var J=null;m!=m.parent;){var nn=m.parent;m.parent=J,J=m,m=nn}for(;null!=J;){var en=J.parent;J.parent=m,J=en}H=m}if(Q==Q.parent)Z=Q;else{for(var tn=Q,rn=null;tn!=tn.parent;){var ln=tn.parent;tn.parent=rn,rn=tn,tn=ln}for(;null!=rn;){var sn=rn.parent;rn.parent=tn,rn=sn}Z=tn}if(H==Z)E!=Q&&zpp_$nape_geom_ZPP_$MarchingSquares.me.combUD_virtual(W,B);else{var an,on;if($==$.parent)an=$;else{for(var pn=$,hn=null;pn!=pn.parent;){var un=pn.parent;pn.parent=hn,hn=pn,pn=un}for(;null!=hn;){var _n=hn.parent;hn.parent=pn,hn=_n}an=pn}if(Q==Q.parent)on=Q;else{for(var cn=Q,dn=null;cn!=cn.parent;){var xn=cn.parent;cn.parent=dn,dn=cn,cn=xn}for(;null!=dn;){var bn=dn.parent;dn.parent=cn,dn=bn}on=cn}an!=on&&(an.rank<on.rank?an.parent=on:an.rank>on.rank?on.parent=an:(on.parent=an,an.rank++)),zpp_$nape_geom_ZPP_$MarchingSquares.me.combUD(W,B)}E=0!=(4&(q=Q==B.span2?B.okey2:B.okey1))?Q:null}}else E=null}}else E=null}}for(c=0,d=_;c<d;)for(R=c++,x=0,b=h;x<b;){L=x++;var yn,vn=(yn=zpp_$nape_geom_ZPP_$MarchingSquares.map).list[R*yn.width+L];if(null!=vn){var mn;if(vn.span1==vn.span1.parent)mn=vn.span1;else{for(m=vn.span1,J=null;m!=m.parent;){nn=m.parent;m.parent=J,J=m,m=nn}for(;null!=J;){en=J.parent;J.parent=m,J=en}mn=m}if(mn.out||(mn.out=!0,zpp_$nape_geom_ZPP_$MarchingSquares.me.output(o,vn.p1)),null!=vn.p2){if(vn.span2==vn.span2.parent)mn=vn.span2;else{for(tn=vn.span2,rn=null;tn!=tn.parent;){ln=tn.parent;tn.parent=rn,rn=tn,tn=ln}for(;null!=rn;){sn=rn.parent;rn.parent=tn,rn=sn}mn=tn}mn.out||(mn.out=!0,zpp_$nape_geom_ZPP_$MarchingSquares.me.output(o,vn.p2))}(gn=vn).p1=gn.p2=gn.pr=gn.pd=null,gn.span1=gn.span2=gn.spanr=null,gn.next=zpp_$nape_geom_ZPP_$MarchPair.zpp_pool,zpp_$nape_geom_ZPP_$MarchPair.zpp_pool=gn,(K=zpp_$nape_geom_ZPP_$MarchingSquares.map).list[R*K.width+L]=null}}for(;null!=g;){var gn,zn=g;g=zn.next,(gn=zn).parent=gn,gn.next=zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool,zpp_$nape_geom_ZPP_$MarchSpan.zpp_pool=gn}}},zpp_$nape_geom_ZPP_$MarchingSquares.ISO=function(n,e,t){return n(e,t)},zpp_$nape_geom_ZPP_$MarchingSquares.prototype={output:function(n,e){var t;if(null==e||e.next==e||e.next==e.prev)t=!0;else{var i=0,r=e;if(null!=e)for(var l=e;;){var s=l;if(i+=s.x*(s.next.y-s.prev.y),(l=l.next)==r)break}var a=.5*i;t=a*a<nape_Config.epsilon*nape_Config.epsilon}if(t)for(;null!=e;)if(null!=e&&e.prev==e)e.next=e.prev=null,e=null;else{var o=e.next;e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=null,e=null,e=o}else{var p=nape_geom_GeomPoly.get();p.zpp_inner.vertices=e,n.zpp_inner.reverse_flag?n.push(p):n.unshift(p)}},linkright:function(n,e){var t=7&e;return 0==t?n:3==t?n.next.next:n.next},linkleft:function(n,e){return 0==(1&e)?n.prev:n},linkdown:function(n,e){return 0==(128&e)?n.prev:n.prev.prev},linkup:function(n,e){return n},combLR:function(n,e){var t=n.pr,i=7&n.okeyr,r=0==i?t:3==i?t.next.next:t.next,l=(t=e.p1,0==(1&e.okey1)?t.prev:t),s=r.next,a=l.prev;if(0!=(4&n.keyr)){if(e.pr==e.p1&&(e.pr=r.prev),e.p1=r.prev,r.prev.next=l.next,l.next.prev=r.prev,null!=(p=r).wrap){if(p.wrap.zpp_inner._inuse=!1,null!=(h=p.wrap)&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),h.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,(_=h).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=o).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_,p.wrap=null}p.prev=p.next=null,p.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=p}else r.next=l.next,l.next.prev=r;if(null!=(p=l).wrap){if(p.wrap.zpp_inner._inuse=!1,null!=(h=p.wrap)&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),h.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");o=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,(_=h).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=o).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_,p.wrap=null}if(p.prev=p.next=null,p.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=p,0!=(16&n.keyr)){var p;if(e.pd=s.next,s.next.prev=a.prev,a.prev.next=s.next,null!=(p=s).wrap){if(p.wrap.zpp_inner._inuse=!1,null!=(h=p.wrap)&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),h.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");o=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,(_=h).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=o).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_,p.wrap=null}p.prev=p.next=null,p.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=p}else s.prev=a.prev,a.prev.next=s;if(null!=(p=a).wrap){var h,u;if(p.wrap.zpp_inner._inuse=!1,null!=(h=p.wrap)&&h.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=h.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),h.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var _;o=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,(_=h).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=_:zpp_$nape_util_ZPP_$PubPool.poolVec2=_,zpp_$nape_util_ZPP_$PubPool.nextVec2=_,_.zpp_disp=!0,null!=(_=o).outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=_,p.wrap=null}p.prev=p.next=null,p.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=p},combUD:function(n,e){null!=n.p2&&56==n.key2?n.p2:n.p1;var t,i=null!=e.p2&&14==e.key2?e.p2:e.p1,r=n.pd,l=i,s=r.prev,a=l.next;if(l.next=r.next,r.next.prev=l,null!=(t=r).wrap){if(t.wrap.zpp_inner._inuse=!1,null!=(p=t.wrap)&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),p.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var o=p.zpp_inner;p.zpp_inner.outer=null,p.zpp_inner=null,(u=p).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=o).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,t.wrap=null}if(t.prev=t.next=null,t.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=t,a.prev=s.prev,s.prev.next=a,s==n.p1&&(n.p1=a),null!=(t=s).wrap){var p,h;if(t.wrap.zpp_inner._inuse=!1,null!=(p=t.wrap)&&p.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((h=p.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=h._isimmutable&&h._isimmutable(),p.zpp_inner._inuse)throw haxe_Exception.thrown("Error: This Vec2 is not disposable");var u;o=p.zpp_inner;p.zpp_inner.outer=null,p.zpp_inner=null,(u=p).zpp_pool=null,null!=zpp_$nape_util_ZPP_$PubPool.nextVec2?zpp_$nape_util_ZPP_$PubPool.nextVec2.zpp_pool=u:zpp_$nape_util_ZPP_$PubPool.poolVec2=u,zpp_$nape_util_ZPP_$PubPool.nextVec2=u,u.zpp_disp=!0,null!=(u=o).outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,t.wrap=null}t.prev=t.next=null,t.next=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=t},combUD_virtual:function(n,e){null!=n.p2&&56==n.key2?n.p2:n.p1;var t=null!=e.p2&&14==e.key2?e.p2:e.p1,i=n.pd,r=t,l=i.prev,s=r.next;i.forced=r.forced=l.forced=s.forced=!0},combLeft:function(n){var e=1&n|(192&n)>>5,t=0;return 0!=(1&e)&&++t,0!=(2&e)&&++t,0!=(4&e)&&++t,t>=2},combRight:function(n){var e=(28&n)>>2,t=0;return 0!=(1&e)&&++t,0!=(2&e)&&++t,0!=(4&e)&&++t,t>=2},combUp:function(n){var e=7&n,t=0;return 0!=(1&e)&&++t,0!=(2&e)&&++t,0!=(4&e)&&++t,t>=2},combDown:function(n){var e=(112&n)>>4,t=0;return 0!=(1&e)&&++t,0!=(2&e)&&++t,0!=(4&e)&&++t,t>=2},comb:function(n){var e=0;return 0!=(1&n)&&++e,0!=(2&n)&&++e,0!=(4&n)&&++e,e>=2},marchSquare:function(n,e,t,i,r,l,s,a,o,p,h,u,_,c){var d=0,f=e.list[o*e.width+a];f<0&&(d|=8);var x=e.list[o*e.width+(a+1)];x<0&&(d|=4);var b=e.list[(o+1)*e.width+(a+1)];b<0&&(d|=2);var y,v=e.list[(o+1)*e.width+a];if(v<0&&(d|=1),0==d)return null;if(null==zpp_$nape_geom_ZPP_$MarchPair.zpp_pool?y=new zpp_$nape_geom_ZPP_$MarchPair:(y=zpp_$nape_geom_ZPP_$MarchPair.zpp_pool,zpp_$nape_geom_ZPP_$MarchPair.zpp_pool=y.next,y.next=null),10!=d&&5!=d){var m=zpp_$nape_geom_ZPP_$MarchingSquares.look_march[d];y.okey1=m;for(var g=0;g<8;){if(0!=(m&1<<(N=g++))){var z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){var w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{var O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){var E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{var U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){var T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{var k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){var S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{var A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}var V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0==m?y=null:(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1)}else{var I=n(.5*(i+l),.5*(r+s))<0;if(10==d)if(I){m=187;y.okey1=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0==m?y=null:(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1)}else{m=131;y.okey1=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}if(y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0!=m){m=56;y.okey2=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p2?y.p2=V.prev=V.next=V:(V.prev=y.p2,V.next=y.p2.next,y.p2.next.prev=V,y.p2.next=V),y.p2=V}}y.p2=y.p2.next,y.key2=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key2=0,y.p2=null),0==m?(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1):(y.pr=y.p2,y.okeyr=y.okey2,y.keyr=y.key2)}else{m=56;y.okey1=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0==m?y=null:(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1)}}else if(I){m=238;y.okey1=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0==m?y=null:(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1)}else{m=224;y.okey1=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}if(y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0!=m){m=14;y.okey2=m;for(g=0;g<8;){if(0!=(m&1<<(N=g++))){z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p2?y.p2=V.prev=V.next=V:(V.prev=y.p2,V.next=y.p2.next,y.p2.next.prev=V,y.p2.next=V),y.p2=V}}y.p2=y.p2.next,y.key2=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key2=0,y.p2=null),0==m?(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1):(y.pr=y.p2,y.okeyr=y.okey2,y.keyr=y.key2)}else{m=14;y.okey1=m;for(g=0;g<8;){var N;if(0!=(m&1<<(N=g++))){var F;z=null;if(0==N)null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?F=new zpp_$nape_geom_ZPP_$GeomVert:(F=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=F.next,F.next=null),F.forced=!1,F.x=i,F.y=r,z=F,(p||h)&&(z.forced=!0);else if(2==N){var R;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?R=new zpp_$nape_geom_ZPP_$GeomVert:(R=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=l,R.y=r,z=R,(u||h)&&(z.forced=!0)}else if(4==N){var L;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?L=new zpp_$nape_geom_ZPP_$GeomVert:(L=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=l,L.y=s,z=L,(u||_)&&(z.forced=!0)}else if(6==N){var B;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?B=new zpp_$nape_geom_ZPP_$GeomVert:(B=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=i,B.y=s,z=B,(p||_)&&(z.forced=!0)}else if(1==N){if(null==(z=t.list[(o<<1)*t.width+a])){var G;w=this.xlerp(i,l,r,f,x,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?G=new zpp_$nape_geom_ZPP_$GeomVert:(G=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=w,G.y=r,z=G,t.list[(o<<1)*t.width+a]=z}else{var j;O=z.x,C=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?j=new zpp_$nape_geom_ZPP_$GeomVert:(j=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=O,j.y=C,z=j}h&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(1&m)||z.x==l&&0!=(4&m))&&(m^=2)}else if(5==N){if(null==(z=t.list[(2+(o<<1))*t.width+a])){var K;E=this.xlerp(i,l,s,v,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?K=new zpp_$nape_geom_ZPP_$GeomVert:(K=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=K.next,K.next=null),K.forced=!1,K.x=E,K.y=s,z=K,t.list[(2+(o<<1))*t.width+a]=z}else{var W;U=z.x,M=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?W=new zpp_$nape_geom_ZPP_$GeomVert:(W=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=U,W.y=M,z=W}_&&(z.forced=!0),z.x!=i&&z.x!=l||(z.x==i&&0!=(64&m)||z.x==l&&0!=(16&m))&&(m^=32)}else if(3==N){if(null==(z=t.list[(1+(o<<1))*t.width+(a+1)])){var Y;T=this.ylerp(r,s,l,x,b,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Y=new zpp_$nape_geom_ZPP_$GeomVert:(Y=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Y.next,Y.next=null),Y.forced=!1,Y.x=l,Y.y=T,z=Y,t.list[(1+(o<<1))*t.width+(a+1)]=z}else{var X;k=z.x,D=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?X=new zpp_$nape_geom_ZPP_$GeomVert:(X=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=X.next,X.next=null),X.forced=!1,X.x=k,X.y=D,z=X}u&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(4&m)||z.y==s&&0!=(16&m))&&(m^=8)}else{if(null==(z=t.list[(1+(o<<1))*t.width+a])){var H;S=this.ylerp(r,s,i,f,v,n,c);null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?H=new zpp_$nape_geom_ZPP_$GeomVert:(H=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=i,H.y=S,z=H,t.list[(1+(o<<1))*t.width+a]=z}else{var Z;A=z.x,P=z.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?Z=new zpp_$nape_geom_ZPP_$GeomVert:(Z=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=Z.next,Z.next=null),Z.forced=!1,Z.x=A,Z.y=P,z=Z}p&&(z.forced=!0),z.y!=r&&z.y!=s||(z.y==r&&0!=(1&m)||z.y==s&&0!=(64&m))&&(m^=128)}V=z;null==y.p1?y.p1=V.prev=V.next=V:(V.prev=y.p1,V.next=y.p1.next,y.p1.next.prev=V,y.p1.next=V),y.p1=V}}y.p1=y.p1.next,y.key1=m,1!=m&&4!=m&&16!=m&&64!=m&&3!=m&&12!=m&&48!=m&&192!=m&&129!=m&&6!=m&&24!=m&&96!=m&&5!=m&&20!=m&&80!=m&&65!=m&&17!=m&&68!=m||(m=0,y.key1=0,y.p1=null),0==m?y=null:(y.pr=y.p1,y.okeyr=y.okey1,y.keyr=y.key1)}}}return y},lerp:function(n,e,t,i){if(0==t)return n;if(0==i)return e;var r=t-i,l=r*r<nape_Config.epsilon*nape_Config.epsilon?.5:t/r;return l<0?l=0:l>1&&(l=1),n+l*(e-n)},xlerp:function(n,e,t,i,r,l,s){var a;if(0==i)a=n;else if(0==r)a=e;else{(h=(p=i-r)*p<nape_Config.epsilon*nape_Config.epsilon?.5:i/p)<0?h=0:h>1&&(h=1),a=n+h*(e-n)}for(;0!=s--&&n<a&&a<e;){var o=l(a,t);if(0==o)break;if(i*o<0?(e=a,r=o):(n=a,i=o),0==i)a=n;else if(0==r)a=e;else{var p,h;(h=(p=i-r)*p<nape_Config.epsilon*nape_Config.epsilon?.5:i/p)<0?h=0:h>1&&(h=1),a=n+h*(e-n)}}return a},ylerp:function(n,e,t,i,r,l,s){var a;if(0==i)a=n;else if(0==r)a=e;else{(h=(p=i-r)*p<nape_Config.epsilon*nape_Config.epsilon?.5:i/p)<0?h=0:h>1&&(h=1),a=n+h*(e-n)}for(;0!=s--&&n<a&&a<e;){var o=l(t,a);if(0==o)break;if(i*o<0?(e=a,r=o):(n=a,i=o),0==i)a=n;else if(0==r)a=e;else{var p,h;(h=(p=i-r)*p<nape_Config.epsilon*nape_Config.epsilon?.5:i/p)<0?h=0:h>1&&(h=1),a=n+h*(e-n)}}return a},__class__:zpp_$nape_geom_ZPP_$MarchingSquares};var zpp_$nape_geom_ZPP_$Mat23=function(){this.next=null,this._invalidate=null,this.ty=0,this.tx=0,this.d=0,this.c=0,this.b=0,this.a=0,this.outer=null};t["zpp_nape.geom.ZPP_Mat23"]=zpp_$nape_geom_ZPP_$Mat23,zpp_$nape_geom_ZPP_$Mat23.__name__="zpp_nape.geom.ZPP_Mat23",zpp_$nape_geom_ZPP_$Mat23.get=function(){var n;return null==zpp_$nape_geom_ZPP_$Mat23.zpp_pool?n=new zpp_$nape_geom_ZPP_$Mat23:(n=zpp_$nape_geom_ZPP_$Mat23.zpp_pool,zpp_$nape_geom_ZPP_$Mat23.zpp_pool=n.next,n.next=null),n},zpp_$nape_geom_ZPP_$Mat23.identity=function(){var n=zpp_$nape_geom_ZPP_$Mat23.get();return n.setas(1,0,0,1,0,0),n},zpp_$nape_geom_ZPP_$Mat23.prototype={wrapper:function(){if(null==this.outer){this.outer=new nape_geom_Mat23;var n=this.outer.zpp_inner;n.next=zpp_$nape_geom_ZPP_$Mat23.zpp_pool,zpp_$nape_geom_ZPP_$Mat23.zpp_pool=n,this.outer.zpp_inner=this}return this.outer},invalidate:function(){null!=this._invalidate&&this._invalidate()},set:function(n){this.setas(n.a,n.b,n.c,n.d,n.tx,n.ty)},setas:function(n,e,t,i,r,l){this.tx=r,this.ty=l,this.a=n,this.b=e,this.c=t,this.d=i},free:function(){},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$Mat23};var zpp_$nape_geom_ZPP_$MatMN=function(n,e){this.x=null,this.n=0,this.m=0,this.outer=null,this.m=n,this.n=e,this.x=[];for(var t=0,i=n*e;t<i;){t++;this.x.push(0)}};t["zpp_nape.geom.ZPP_MatMN"]=zpp_$nape_geom_ZPP_$MatMN,zpp_$nape_geom_ZPP_$MatMN.__name__="zpp_nape.geom.ZPP_MatMN",zpp_$nape_geom_ZPP_$MatMN.prototype={__class__:zpp_$nape_geom_ZPP_$MatMN};var zpp_$nape_geom_ZPP_$Monotone=function(){};t["zpp_nape.geom.ZPP_Monotone"]=zpp_$nape_geom_ZPP_$Monotone,zpp_$nape_geom_ZPP_$Monotone.__name__="zpp_nape.geom.ZPP_Monotone",zpp_$nape_geom_ZPP_$Monotone.bisector=function(n){var e,t,i=n.prev,r=n.next;e=n.x-i.x,t=n.y-i.y;var l,s,a;l=r.x-n.x,s=r.y-n.y,null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?a=new zpp_$nape_geom_ZPP_$Vec2:(a=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=-t-s,a.y=e+l;var o=a,p=o.x*o.x+o.y*o.y,h=1/Math.sqrt(p);return o.x*=h,o.y*=h,s*e-l*t<0&&(o.x=-o.x,o.y=-o.y),o},zpp_$nape_geom_ZPP_$Monotone.below=function(n,e){if(n.y<e.y)return!0;if(n.y>e.y)return!1;if(n.x<e.x)return!0;if(n.x>e.x)return!1;var t=zpp_$nape_geom_ZPP_$Monotone.bisector(n),i=zpp_$nape_geom_ZPP_$Monotone.bisector(e),r=1;t.x+=n.x*r,t.y+=n.y*r;r=1;i.x+=e.x*r,i.y+=e.y*r;var l,s=t.x<i.x||t.x==i.x&&t.y<i.y;return null!=(l=t).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l,null!=(l=i).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l,s},zpp_$nape_geom_ZPP_$Monotone.above=function(n,e){return zpp_$nape_geom_ZPP_$Monotone.below(e,n)},zpp_$nape_geom_ZPP_$Monotone.left_vertex=function(n){var e=n.prev;return e.y>n.y||e.y==n.y&&n.next.y<n.y},zpp_$nape_geom_ZPP_$Monotone.isMonotone=function(n){var e=n,t=n,i=n;if(null!=(a=n.next))for(var r=a;;){if((o=r).y<e.y&&(e=o),o.y>t.y&&(t=o),(r=r.next)==i)break}var l=!0,s=e;if(t!=e.next){i=t;if(null!=(a=e.next))for(r=a;;){if((o=r).y<s.y){l=!1;break}if(s=o,(r=r.next)==i)break}}if(!l)return!1;if(s=e,t!=e.prev){var a;i=t;if(null!=(a=e.prev))for(r=a;;){var o;if((o=r).y<s.y){l=!1;break}if(s=o,(r=r.prev)==i)break}}return l},zpp_$nape_geom_ZPP_$Monotone.getShared=function(){return null==zpp_$nape_geom_ZPP_$Monotone.sharedPPoly&&(zpp_$nape_geom_ZPP_$Monotone.sharedPPoly=new zpp_$nape_geom_ZPP_$PartitionedPoly),zpp_$nape_geom_ZPP_$Monotone.sharedPPoly},zpp_$nape_geom_ZPP_$Monotone.decompose=function(n,e){if(null==e?e=new zpp_$nape_geom_ZPP_$PartitionedPoly(n):e.init(n),null==e.vertices)return e;null==zpp_$nape_geom_ZPP_$Monotone.queue&&(zpp_$nape_geom_ZPP_$Monotone.queue=new zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex);var t=e.vertices,i=e.vertices;if(null!=t)for(var r=t;;){var l=r;zpp_$nape_geom_ZPP_$Monotone.queue.add(l);var s,a;s=l.next.x-l.x,a=l.next.y-l.y;var o;o=l.prev.x-l.x;var p=(l.prev.y-l.y)*s-o*a>0;if(l.type=zpp_$nape_geom_ZPP_$Monotone.below(l.prev,l)?zpp_$nape_geom_ZPP_$Monotone.below(l.next,l)?p?0:3:4:zpp_$nape_geom_ZPP_$Monotone.below(l,l.next)?p?1:2:4,(r=r.next)==i)break}var h=zpp_$nape_geom_ZPP_$Monotone.queue;if(null!=h.head&&null!=h.head.next){for(var u,_,c,d=h.head,f=null,x=null,b=null,y=null,v=1;;){for(u=0,x=d,f=d=null;null!=x;){for(++u,b=x,_=0,c=v;null!=b&&_<v;)++_,b=b.next;for(;_>0||c>0&&null!=b;)0==_?(y=b,b=b.next,--c):0==c||null==b||zpp_$nape_geom_ZPP_$Monotone.above(x.elt,b.elt)?(y=x,x=x.next,--_):(y=b,b=b.next,--c),null!=f?f.next=y:d=y,f=y;x=b}if(f.next=null,v<<=1,!(u>1))break}h.head=d,h.modified=!0,h.pushmod=!0}for(null==zpp_$nape_geom_ZPP_$Monotone.edges&&(null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?zpp_$nape_geom_ZPP_$Monotone.edges=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(zpp_$nape_geom_ZPP_$Monotone.edges=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=zpp_$nape_geom_ZPP_$Monotone.edges.next,zpp_$nape_geom_ZPP_$Monotone.edges.next=null),zpp_$nape_geom_ZPP_$Monotone.edges.lt=zpp_$nape_geom_ZPP_$PartitionVertex.edge_lt,zpp_$nape_geom_ZPP_$Monotone.edges.swapped=zpp_$nape_geom_ZPP_$PartitionVertex.edge_swap);null!=zpp_$nape_geom_ZPP_$Monotone.queue.head;){var m=zpp_$nape_geom_ZPP_$Monotone.queue.pop_unsafe();switch(m.type){case 0:m.helper=m,m.node=zpp_$nape_geom_ZPP_$Monotone.edges.insert(m);break;case 1:var g=m.prev;if(null==g.helper)throw haxe_Exception.thrown("Fatal error (1): Polygon is not weakly-simple and clockwise");2==g.helper.type&&e.add_diagonal(m,g.helper),zpp_$nape_geom_ZPP_$Monotone.edges.remove_node(g.node),g.helper=null;break;case 2:var z=m.prev;if(null==z.helper)throw haxe_Exception.thrown("Fatal error (3): Polygon is not weakly-simple and clockwise");2==z.helper.type&&e.add_diagonal(m,z.helper),zpp_$nape_geom_ZPP_$Monotone.edges.remove_node(z.node),z.helper=null;var w=null;if(!zpp_$nape_geom_ZPP_$Monotone.edges.empty()){for(var O=zpp_$nape_geom_ZPP_$Monotone.edges.parent;null!=O.prev;)O=O.prev;for(;null!=O;){var C=O.data;if(!zpp_$nape_geom_ZPP_$PartitionVertex.vert_lt(C,m)){w=C;break}if(null!=O.next)for(O=O.next;null!=O.prev;)O=O.prev;else{for(;null!=O.parent&&O==O.parent.next;)O=O.parent;O=O.parent}}}var E=w;if(null!=E){if(null==E.helper)throw haxe_Exception.thrown("Fatal error (4): Polygon is not weakly-simple and clockwise");2==E.helper.type&&e.add_diagonal(m,E.helper),E.helper=m}break;case 3:var U=null;if(!zpp_$nape_geom_ZPP_$Monotone.edges.empty()){for(var M=zpp_$nape_geom_ZPP_$Monotone.edges.parent;null!=M.prev;)M=M.prev;for(;null!=M;){var T=M.data;if(!zpp_$nape_geom_ZPP_$PartitionVertex.vert_lt(T,m)){U=T;break}if(null!=M.next)for(M=M.next;null!=M.prev;)M=M.prev;else{for(;null!=M.parent&&M==M.parent.next;)M=M.parent;M=M.parent}}}var k=U;if(null!=k){if(null==k.helper)throw haxe_Exception.thrown("Fatal error (2): Polygon is not weakly-simple and clockwise");e.add_diagonal(m,k.helper),k.helper=m}m.node=zpp_$nape_geom_ZPP_$Monotone.edges.insert(m),m.helper=m;break;case 4:var D=m.prev;if(zpp_$nape_geom_ZPP_$Monotone.left_vertex(m)){if(null==D.helper)throw haxe_Exception.thrown("Fatal error (5): Polygon is not weakly-simple and clockwise");2==D.helper.type&&e.add_diagonal(m,D.helper),zpp_$nape_geom_ZPP_$Monotone.edges.remove_node(D.node),D.helper=null,m.node=zpp_$nape_geom_ZPP_$Monotone.edges.insert(m),m.helper=m}else{var S=null;if(!zpp_$nape_geom_ZPP_$Monotone.edges.empty()){for(var A=zpp_$nape_geom_ZPP_$Monotone.edges.parent;null!=A.prev;)A=A.prev;for(;null!=A;){var P=A.data;if(!zpp_$nape_geom_ZPP_$PartitionVertex.vert_lt(P,m)){S=P;break}if(null!=A.next)for(A=A.next;null!=A.prev;)A=A.prev;else{for(;null!=A.parent&&A==A.parent.next;)A=A.parent;A=A.parent}}}var V=S;if(null==V||null==V.helper)throw haxe_Exception.thrown("Fatal error (6): Polygon is not weakly-simple and clockwise");2==V.helper.type&&e.add_diagonal(m,V.helper),V.helper=m}}}return e};var zpp_$nape_geom_ZPP_$PartitionVertex=function(){this.node=null,this.prev=null,this.next=null,this.rightchain=!1,this.helper=null,this.type=0,this.diagonals=null,this.forced=!1,this.y=0,this.x=0,this.mag=0,this.id=0,this.id=zpp_$nape_geom_ZPP_$PartitionVertex.nextId++,this.diagonals=new zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex};t["zpp_nape.geom.ZPP_PartitionVertex"]=zpp_$nape_geom_ZPP_$PartitionVertex,zpp_$nape_geom_ZPP_$PartitionVertex.__name__="zpp_nape.geom.ZPP_PartitionVertex",zpp_$nape_geom_ZPP_$PartitionVertex.get=function(n){var e;return null==zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_geom_ZPP_$PartitionVertex:(e=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.x=n.x,e.y=n.y,e},zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance=function(n,e){var t,i,r=n.next.y>n.y;t=n.next.x-n.x,i=n.next.y-n.y;var l;return l=e.x-n.x,(r?-1:1)*((e.y-n.y)*t-l*i)},zpp_$nape_geom_ZPP_$PartitionVertex.vert_lt=function(n,e){if(e==n||e==n.next)return!0;if(n.y==n.next.y){var t=n.x,i=n.next.x;return(t<i?t:i)<=e.x}return zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(n,e)<=0},zpp_$nape_geom_ZPP_$PartitionVertex.edge_swap=function(n,e){var t=n.node;n.node=e.node,e.node=t},zpp_$nape_geom_ZPP_$PartitionVertex.edge_lt=function(n,e){if(n==e&&n.next==e.next)return!1;if(n==e.next)return!zpp_$nape_geom_ZPP_$PartitionVertex.vert_lt(n,e);if(e==n.next)return zpp_$nape_geom_ZPP_$PartitionVertex.vert_lt(e,n);if(n.y==n.next.y)return e.y==e.next.y?((t=n.x)>(i=n.next.x)?t:i)>((r=e.x)>(l=e.next.x)?r:l):zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(e,n)>0||zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(e,n.next)>0;var t,i,r,l,s=zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(n,e),a=zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(n,e.next);if(0==s&&0==a)return((t=n.x)>(i=n.next.x)?t:i)>((r=e.x)>(l=e.next.x)?r:l);if(s*a>=0)return s<0||a<0;var o=zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(e,n),p=zpp_$nape_geom_ZPP_$PartitionVertex.rightdistance(e,n.next);return o*p>=0&&(o>0||p>0)},zpp_$nape_geom_ZPP_$PartitionVertex.prototype={alloc:function(){},free:function(){this.helper=null},copy:function(){var n;return null==zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool?n=new zpp_$nape_geom_ZPP_$PartitionVertex:(n=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=n.next,n.next=null),n.x=this.x,n.y=this.y,n.forced=this.forced,n},sort:function(){var n=0,e=0,t=0;n=this.prev.x-this.x,e=this.prev.y-this.y,t=this.next.x-this.x;var i=(f=(this.next.y-this.y)*n-t*e)>0?-1:0==f?0:1,r=this.diagonals;if(null!=r.head&&null!=r.head.next){for(var l,s,a,o=r.head,p=null,h=null,u=null,_=null,c=1;;){for(l=0,h=o,p=o=null;null!=h;){for(++l,u=h,s=0,a=c;null!=u&&s<c;)++s,u=u.next;for(;s>0||a>0&&null!=u;){if(0==s)_=u,u=u.next,--a;else if(0==a||null==u)_=h,h=h.next,--s;else{var d;if(1==i){var f;n=h.elt.x-this.x,e=h.elt.y-this.y,t=u.elt.x-this.x,d=1==((f=(u.elt.y-this.y)*n-t*e)>0?-1:0==f?0:1)}else{n=this.prev.x-this.x,e=this.prev.y-this.y,t=h.elt.x-this.x;var x=(h.elt.y-this.y)*n-t*e,b=x>0?-1:0==x?0:1;n=this.prev.x-this.x,e=this.prev.y-this.y,t=u.elt.x-this.x;var y=(u.elt.y-this.y)*n-t*e,v=y>0?-1:0==y?0:1;if(b*v==1||b*v==0&&(1==b||1==v)){n=h.elt.x-this.x,e=h.elt.y-this.y,t=u.elt.x-this.x;var m=(u.elt.y-this.y)*n-t*e;d=1==(m>0?-1:0==m?0:1)}else if(-1==b||-1==v)d=-1==v;else if(0==b&&0==v){n=this.x-this.prev.x,e=this.y-this.prev.y;var g=n*(t=h.elt.x-this.x)+e*(h.elt.y-this.y),z=n*(t=u.elt.x-this.x)+e*(u.elt.y-this.y);d=g<0&&z>0||!(z<0&&g>0)}else d=!0}d?(_=h,h=h.next,--s):(_=u,u=u.next,--a)}null!=p?p.next=_:o=_,p=_}h=u}if(p.next=null,c<<=1,!(l>1))break}r.head=o,r.modified=!0,r.pushmod=!0}},__class__:zpp_$nape_geom_ZPP_$PartitionVertex};var zpp_$nape_geom_ZPP_$PartitionedPoly=function(n){this.next=null,this.vertices=null,this.init(n)};t["zpp_nape.geom.ZPP_PartitionedPoly"]=zpp_$nape_geom_ZPP_$PartitionedPoly,zpp_$nape_geom_ZPP_$PartitionedPoly.__name__="zpp_nape.geom.ZPP_PartitionedPoly",zpp_$nape_geom_ZPP_$PartitionedPoly.getSharedPP=function(){return null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList=new zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly),zpp_$nape_geom_ZPP_$PartitionedPoly.sharedPPList},zpp_$nape_geom_ZPP_$PartitionedPoly.getShared=function(){return null==zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList&&(zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert),zpp_$nape_geom_ZPP_$PartitionedPoly.sharedGVList},zpp_$nape_geom_ZPP_$PartitionedPoly.prototype={eq:function(n,e){var t,i;return(t=n.x-e.x)*t+(i=n.y-e.y)*i<nape_Config.epsilon*nape_Config.epsilon},alloc:function(){},free:function(){},init:function(n){if(null!=n){var e=0,t=n;if(null!=n)for(var i=n;;){var r=i;if(e+=r.x*(r.next.y-r.prev.y),(i=i.next)==t)break}for(var l=.5*e>0,s=n;;){var a;if(l){var o;null==zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool?o=new zpp_$nape_geom_ZPP_$PartitionVertex:(o=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=o.next,o.next=null),o.x=s.x,o.y=s.y;var p=o;null==this.vertices?this.vertices=p.prev=p.next=p:(p.prev=this.vertices,p.next=this.vertices.next,this.vertices.next.prev=p,this.vertices.next=p),a=p}else{var h;null==zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool?h=new zpp_$nape_geom_ZPP_$PartitionVertex:(h=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=h.next,h.next=null),h.x=s.x,h.y=s.y;var u=h;null==this.vertices?this.vertices=u.prev=u.next=u:(u.next=this.vertices,u.prev=this.vertices.prev,this.vertices.prev.next=u,this.vertices.prev=u),a=u}if(this.vertices=a,this.vertices.forced=s.forced,(s=s.next)==n)break}this.remove_collinear_vertices()}},remove_collinear_vertices:function(){for(var n,e=this.vertices,t=!0;t||e!=this.vertices;)if(t=!1,this.eq(e,e.next)){if(e==this.vertices&&(this.vertices=e.next,t=!0),e.forced&&(e.next.forced=!0),null!=e&&e.prev==e){e.next=e.prev=null,(p=e).helper=null,p.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=p,e=null}else{var i=e.next;e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=null,(h=e).helper=null,h.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=h,e=null,e=i}if(null==e){this.vertices=null;break}}else e=e.next;if(null==this.vertices)return!0;for(;;){for(n=!1,e=this.vertices,t=!0;t||e!=this.vertices;){t=!1;var r,l,s=e.prev;r=e.x-s.x,l=e.y-s.y;var a;a=e.next.x-e.x;var o=(e.next.y-e.y)*r-a*l;if(o*o>=nape_Config.epsilon*nape_Config.epsilon)e=e.next;else{if(e==this.vertices&&(this.vertices=e.next,t=!0),null!=e&&e.prev==e){var p;e.next=e.prev=null,(p=e).helper=null,p.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=p,e=null}else{var h;i=e.next;e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=null,(h=e).helper=null,h.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=h,e=null,e=i}if(n=!0,null==e){n=!1,this.vertices=null;break}}}if(!n)break}return null==this.vertices},add_diagonal:function(n,e){n.diagonals.add(e),e.diagonals.add(n),n.forced=e.forced=!0},extract_partitions:function(n){if(null==n&&(n=new zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly),null!=this.vertices){var e=this.vertices,t=this.vertices;if(null!=e)for(var i=e;;){if(i.sort(),(i=i.next)==t)break}for(this.pull_partitions(this.vertices,n);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var l=this.vertices;l.helper=null,l.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=l,r=this.vertices=null}else{var s=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var a=this.vertices;a.helper=null,a.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=a,this.vertices=null,r=s}this.vertices=r}for(var o=null,p=n.head;null!=p;){p.elt.remove_collinear_vertices()?n.erase(o):(o=p,p=p.next)}}return n},pull_partitions:function(n,e){var t;null==zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool?t=new zpp_$nape_geom_ZPP_$PartitionedPoly:(t=zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_geom_ZPP_$PartitionedPoly.zpp_pool=t.next,t.next=null);for(var i=n;;){var r;null==zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool?r=new zpp_$nape_geom_ZPP_$PartitionVertex:(r=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=r.next,r.next=null),r.x=i.x,r.y=i.y,r.forced=i.forced;var l=r;if(null==t.vertices?t.vertices=l.prev=l.next=l:(l.prev=t.vertices,l.next=t.vertices.next,t.vertices.next.prev=l,t.vertices.next=l),t.vertices=l,t.vertices.forced=i.forced,null!=i.diagonals.head){var s=i.diagonals,a=s.head.elt;if(s.pop(),a==n)break;i=this.pull_partitions(i,e)}else i=i.next;if(i==n)break}var o=0,p=t.vertices,h=t.vertices;if(null!=p)for(var u=p;;){var _=u;if(o+=_.x*(_.next.y-_.prev.y),(u=u.next)==h)break}return.5*o!=0&&e.add(t),i},extract:function(n){if(null==n&&(n=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert),null!=this.vertices){var e=this.vertices,t=this.vertices;if(null!=e)for(var i=e;;){if(i.sort(),(i=i.next)==t)break}for(this.pull(this.vertices,n);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var l=this.vertices;l.helper=null,l.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=l,r=this.vertices=null}else{var s=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var a=this.vertices;a.helper=null,a.next=zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool,zpp_$nape_geom_ZPP_$PartitionVertex.zpp_pool=a,this.vertices=null,r=s}this.vertices=r}}return n},pull:function(n,e){for(var t=null,i=n;;){var r,l=i.x,s=i.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?r=new zpp_$nape_geom_ZPP_$GeomVert:(r=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=l,r.y=s;var a=r;if(null==t?t=a.prev=a.next=a:(a.prev=t,a.next=t.next,t.next.prev=a,t.next=a),(t=a).forced=i.forced,null!=i.diagonals.head){var o=i.diagonals,p=o.head.elt;if(o.pop(),p==n)break;i=this.pull(i,e)}else i=i.next;if(i==n)break}var h=0,u=t;if(null!=t)for(var _=t;;){var c=_;if(h+=c.x*(c.next.y-c.prev.y),(_=_.next)==u)break}var d=.5*h;if(d*d>=nape_Config.epsilon*nape_Config.epsilon){for(var f=t,x=!0;x||f!=t;){x=!1;var b,y;if((b=f.x-f.next.x)*b+(y=f.y-f.next.y)*y<nape_Config.epsilon*nape_Config.epsilon){if(f==t&&(t=f.next,x=!0),f.forced&&(f.next.forced=!0),null!=f&&f.prev==f)f.next=f.prev=null,f=null;else{var v=f.next;f.prev.next=f.next,f.next.prev=f.prev,f.next=f.prev=null,f=null,f=v}if(null==f){t=null;break}}else f=f.next}if(null!=t)for(var m;;){for(m=!1,f=t,x=!0;x||f!=t;){x=!1;var g,z,w=f.prev;g=f.x-w.x,z=f.y-w.y;var O;O=f.next.x-f.x;var C=(f.next.y-f.y)*g-O*z;if(C*C>=nape_Config.epsilon*nape_Config.epsilon)f=f.next;else{if(f==t&&(t=f.next,x=!0),null!=f&&f.prev==f)f.next=f.prev=null,f=null;else{v=f.next;f.prev.next=f.next,f.next.prev=f.prev,f.next=f.prev=null,f=null,f=v}if(m=!0,null==f){m=!1,t=null;break}}}if(!m)break}null!=t&&e.add(t)}return i},__class__:zpp_$nape_geom_ZPP_$PartitionedPoly};var zpp_$nape_geom_ZPP_$Ray=function(){var n;if(this.zip_dir=!1,this.absnormaly=0,this.absnormalx=0,this.normaly=0,this.normalx=0,this.idiry=0,this.idirx=0,this.diry=0,this.dirx=0,this.originy=0,this.originx=0,this.userData=null,this.maxdist=0,this.direction=null,this.origin=null,null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?e=new zpp_$nape_geom_ZPP_$Vec2:(e=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=0,e.y=0,n.zpp_inner=e,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((i=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(i=n.zpp_inner)._validate&&i._validate(),0==n.zpp_inner.x){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(i=n.zpp_inner)._validate&&i._validate(),t=0==n.zpp_inner.y}else t=!1;if(!t)n.zpp_inner.x=0,n.zpp_inner.y=0,null!=(i=n.zpp_inner)._invalidate&&i._invalidate(i)}if(n.zpp_inner.weak=!1,this.origin=n,this.origin.zpp_inner._invalidate=$bind(this,this.origin_invalidate),null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var e;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?e=new zpp_$nape_geom_ZPP_$Vec2:(e=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=0,e.y=0,n.zpp_inner=e,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var t;if((i=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=i._isimmutable&&i._isimmutable(),null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(i=n.zpp_inner)._validate&&i._validate(),0==n.zpp_inner.x){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var i;null!=(i=n.zpp_inner)._validate&&i._validate(),t=0==n.zpp_inner.y}else t=!1;if(!t)n.zpp_inner.x=0,n.zpp_inner.y=0,null!=(i=n.zpp_inner)._invalidate&&i._invalidate(i)}n.zpp_inner.weak=!1,this.direction=n,this.direction.zpp_inner._invalidate=$bind(this,this.direction_invalidate),this.originx=0,this.originy=0,this.dirx=0,this.diry=0,this.zip_dir=!1};t["zpp_nape.geom.ZPP_Ray"]=zpp_$nape_geom_ZPP_$Ray,zpp_$nape_geom_ZPP_$Ray.__name__="zpp_nape.geom.ZPP_Ray",zpp_$nape_geom_ZPP_$Ray.prototype={origin_invalidate:function(n){this.originx=n.x,this.originy=n.y},direction_invalidate:function(n){this.dirx=n.x,this.diry=n.y,this.zip_dir=!0},invalidate_dir:function(){this.zip_dir=!0},validate_dir:function(){if(this.zip_dir){if(this.zip_dir=!1,this.dirx*this.dirx+this.diry*this.diry<nape_Config.epsilon)throw haxe_Exception.thrown("Error: Ray::direction is degenerate");var n=this.dirx*this.dirx+this.diry*this.diry,e=1/Math.sqrt(n);this.dirx*=e,this.diry*=e,this.idirx=1/this.dirx,this.idiry=1/this.diry,this.normalx=-this.diry,this.normaly=this.dirx;var t=this.normalx;this.absnormalx=t<0?-t:t;t=this.normaly;this.absnormaly=t<0?-t:t}},rayAABB:function(){var n,e=this.originx,t=e,i=this.originy,r=i;if(this.maxdist>=1/0?(this.dirx>0?t=1/0:this.dirx<0&&(t=-1/0),this.diry>0?r=1/0:this.diry<0&&(r=-1/0)):(t+=this.maxdist*this.dirx,r+=this.maxdist*this.diry),t<e){var l=e;e=t,t=l}if(r<i){l=i;i=r,r=l}return null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?n=new zpp_$nape_geom_ZPP_$AABB:(n=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=n.next,n.next=null),n.minx=e,n.miny=i,n.maxx=t,n.maxy=r,n},aabbtest:function(n){var e=this.normalx*(this.originx-.5*(n.minx+n.maxx))+this.normaly*(this.originy-.5*(n.miny+n.maxy));return(e<0?-e:e)<.5*this.absnormalx*(n.maxx-n.minx)+.5*this.absnormaly*(n.maxy-n.miny)},aabbsect:function(n){var e=this.originx>=n.minx&&this.originx<=n.maxx,t=this.originy>=n.miny&&this.originy<=n.maxy;if(e&&t)return 0;for(var i=-1;!(this.dirx>=0&&this.originx>=n.maxx||this.dirx<=0&&this.originx<=n.minx||this.diry>=0&&this.originy>=n.maxy||this.diry<=0&&this.originy<=n.miny);){if(this.dirx>0){var r=(n.minx-this.originx)*this.idirx;if(r>=0&&r<=this.maxdist){var l=this.originy+r*this.diry;if(l>=n.miny&&l<=n.maxy){i=r;break}}}else if(this.dirx<0){var s=(n.maxx-this.originx)*this.idirx;if(s>=0&&s<=this.maxdist){var a=this.originy+s*this.diry;if(a>=n.miny&&a<=n.maxy){i=s;break}}}if(this.diry>0){var o=(n.miny-this.originy)*this.idiry;if(o>=0&&o<=this.maxdist){var p=this.originx+o*this.dirx;if(p>=n.minx&&p<=n.maxx){i=o;break}}}else if(this.diry<0){var h=(n.maxy-this.originy)*this.idiry;if(h>=0&&h<=this.maxdist){var u=this.originx+h*this.dirx;if(u>=n.minx&&u<=n.maxx){i=h;break}}}break}return i},circlesect:function(n,e,t){if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){if(null==(E=n.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==E.lverts.next.next)E.localCOMx=E.lverts.next.x,E.localCOMy=E.lverts.next.y;else if(null==E.lverts.next.next.next){E.localCOMx=E.lverts.next.x,E.localCOMy=E.lverts.next.y;var i=1;E.localCOMx+=E.lverts.next.next.x*i,E.localCOMy+=E.lverts.next.next.y*i;i=.5;E.localCOMx*=i,E.localCOMy*=i}else{E.localCOMx=0,E.localCOMy=0;var r=0,l=E.lverts.next,s=l,a=l=l.next;for(l=l.next;null!=l;){var o=l;r+=a.x*(o.y-s.y);var p=o.y*a.x-o.x*a.y;E.localCOMx+=(a.x+o.x)*p,E.localCOMy+=(a.y+o.y)*p,s=a,a=o,l=l.next}o=l=E.lverts.next;r+=a.x*(o.y-s.y);p=o.y*a.x-o.x*a.y;E.localCOMx+=(a.x+o.x)*p,E.localCOMy+=(a.y+o.y)*p,s=a,a=o;o=l=l.next;r+=a.x*(o.y-s.y);p=o.y*a.x-o.x*a.y;E.localCOMx+=(a.x+o.x)*p,E.localCOMy+=(a.y+o.y)*p;i=r=1/(3*r);E.localCOMx*=i,E.localCOMy*=i}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}(E=n.body).zip_axis&&(E.zip_axis=!1,E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}var h,u;h=this.originx-n.worldCOMx,u=this.originy-n.worldCOMy;var _=this.dirx*this.dirx+this.diry*this.diry,c=2*(h*this.dirx+u*this.diry),d=h*h+u*u-n.radius*n.radius,f=c*c-4*_*d;if(0==f){i=-c/2*_;if((!e||d>0)&&i>0&&i<t&&i<=this.maxdist){var x=0,b=0;x=this.originx,b=this.originy;var y=i;x+=this.dirx*y,b+=this.diry*y;y=1;var v=(x-=n.worldCOMx*y)*x+(b-=n.worldCOMy*y)*b;if(x*=y=1/Math.sqrt(v),b*=y,d<=0&&(x=-x,b=-b),null==(z=b)&&(z=0),null==(g=x)&&(g=0),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?w=new nape_geom_Vec2:(w=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=w.zpp_pool,w.zpp_pool=null,w.zpp_disp=!1,w==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==w.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?O=new zpp_$nape_geom_ZPP_$Vec2:(O=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=g,O.y=z,w.zpp_inner=O,w.zpp_inner.outer=w}else{if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((E=w.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=E._isimmutable&&E._isimmutable(),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=w.zpp_inner)._validate&&E._validate(),w.zpp_inner.x==g){if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(E=w.zpp_inner)._validate&&E._validate(),C=w.zpp_inner.y==z}else C=!1;if(!C)w.zpp_inner.x=g,w.zpp_inner.y=z,null!=(E=w.zpp_inner)._invalidate&&E._invalidate(E)}return w.zpp_inner.weak=!1,zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(w,i,d<=0,n.outer)}return null}var m=(-c-(f=Math.sqrt(f)))*(_=1/(2*_));y=(-c+f)*_;if(m>0){if(m<t&&m<=this.maxdist){x=0,b=0;x=this.originx,b=this.originy;i=m;x+=this.dirx*i,b+=this.diry*i;i=1,v=(x-=n.worldCOMx*i)*x+(b-=n.worldCOMy*i)*b;if(x*=i=1/Math.sqrt(v),null==(z=b*=i)&&(z=0),null==(g=x)&&(g=0),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?w=new nape_geom_Vec2:(w=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=w.zpp_pool,w.zpp_pool=null,w.zpp_disp=!1,w==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==w.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?O=new zpp_$nape_geom_ZPP_$Vec2:(O=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=g,O.y=z,w.zpp_inner=O,w.zpp_inner.outer=w}else{if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((E=w.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=E._isimmutable&&E._isimmutable(),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=w.zpp_inner)._validate&&E._validate(),w.zpp_inner.x==g){if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(E=w.zpp_inner)._validate&&E._validate(),C=w.zpp_inner.y==z}else C=!1;if(!C)w.zpp_inner.x=g,w.zpp_inner.y=z,null!=(E=w.zpp_inner)._invalidate&&E._invalidate(E)}return w.zpp_inner.weak=!1,zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(w,m,!1,n.outer)}return null}if(y>0&&e){if(y<t&&y<=this.maxdist){x=0,b=0;x=this.originx,b=this.originy;i=y;x+=this.dirx*i,b+=this.diry*i;var g,z,w;i=1,v=(x-=n.worldCOMx*i)*x+(b-=n.worldCOMy*i)*b;if(x*=i=1/Math.sqrt(v),null==(z=b=-(b*=i))&&(z=0),null==(g=x=-x)&&(g=0),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?w=new nape_geom_Vec2:(w=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=w.zpp_pool,w.zpp_pool=null,w.zpp_disp=!1,w==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==w.zpp_inner){var O;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?O=new zpp_$nape_geom_ZPP_$Vec2:(O=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=g,O.y=z,w.zpp_inner=O,w.zpp_inner.outer=w}else{if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var C;if((E=w.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=E._isimmutable&&E._isimmutable(),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(E=w.zpp_inner)._validate&&E._validate(),w.zpp_inner.x==g){if(null!=w&&w.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var E;null!=(E=w.zpp_inner)._validate&&E._validate(),C=w.zpp_inner.y==z}else C=!1;if(!C)w.zpp_inner.x=g,w.zpp_inner.y=z,null!=(E=w.zpp_inner)._invalidate&&E._invalidate(E)}return w.zpp_inner.weak=!1,zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(w,y,!0,n.outer)}return null}return null},circlesect2:function(n,e,t){if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){if(null==(O=n.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==O.lverts.next.next)O.localCOMx=O.lverts.next.x,O.localCOMy=O.lverts.next.y;else if(null==O.lverts.next.next.next){O.localCOMx=O.lverts.next.x,O.localCOMy=O.lverts.next.y;var i=1;O.localCOMx+=O.lverts.next.next.x*i,O.localCOMy+=O.lverts.next.next.y*i;i=.5;O.localCOMx*=i,O.localCOMy*=i}else{O.localCOMx=0,O.localCOMy=0;var r=0,l=g=O.lverts.next,s=g=g.next;for(g=g.next;null!=g;){var a=g;r+=s.x*(a.y-l.y);var o=a.y*s.x-a.x*s.y;O.localCOMx+=(s.x+a.x)*o,O.localCOMy+=(s.y+a.y)*o,l=s,s=a,g=g.next}a=g=O.lverts.next;r+=s.x*(a.y-l.y);o=a.y*s.x-a.x*s.y;O.localCOMx+=(s.x+a.x)*o,O.localCOMy+=(s.y+a.y)*o,l=s,s=a;a=g=g.next;r+=s.x*(a.y-l.y);o=a.y*s.x-a.x*s.y;O.localCOMx+=(s.x+a.x)*o,O.localCOMy+=(s.y+a.y)*o;i=r=1/(3*r);O.localCOMx*=i,O.localCOMy*=i}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}(O=n.body).zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}var p,h;p=this.originx-n.worldCOMx,h=this.originy-n.worldCOMy;var u=this.dirx*this.dirx+this.diry*this.diry,_=2*(p*this.dirx+h*this.diry),c=p*p+h*h-n.radius*n.radius,d=_*_-4*u*c;if(0==d){i=-_/2*u;if((!e||c>0)&&i>0&&i<=this.maxdist){var f=0,x=0;f=this.originx,x=this.originy;var b=i;f+=this.dirx*b,x+=this.diry*b;b=1;var y=(f-=n.worldCOMx*b)*f+(x-=n.worldCOMy*b)*x;if(f*=b=1/Math.sqrt(y),x*=b,c<=0&&(f=-f,x=-x),null==(M=x)&&(M=0),null==(U=f)&&(U=0),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?k=new nape_geom_Vec2:(k=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=k.zpp_pool,k.zpp_pool=null,k.zpp_disp=!1,k==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==k.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?T=new zpp_$nape_geom_ZPP_$Vec2:(T=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=T.next,T.next=null),T.weak=!1,T._immutable=!1,T.x=U,T.y=M,k.zpp_inner=T,k.zpp_inner.outer=k}else{if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=k.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(O=k.zpp_inner)._validate&&O._validate(),k.zpp_inner.x==U){if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(O=k.zpp_inner)._validate&&O._validate(),v=k.zpp_inner.y==M}else v=!1;if(!v)k.zpp_inner.x=U,k.zpp_inner.y=M,null!=(O=k.zpp_inner)._invalidate&&O._invalidate(O)}k.zpp_inner.weak=!1;for(var v=zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(k,i,c<=0,n.outer),m=null,g=t.zpp_inner.inner.head;null!=g;){var z=g.elt;if(null!=v.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");var w=v.zpp_inner.toiDistance;if(null!=z.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(w<z.zpp_inner.toiDistance)break;m=g,g=g.next}var O=t.zpp_inner.inner;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?k=new zpp_$nape_util_ZNPNode_$RayResult:(k=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=k.next,k.next=null),k.elt=v;var C=k;null==m?(C.next=O.head,O.head=C):(C.next=m.next,m.next=C),O.pushmod=O.modified=!0,O.length++}}else{var E=(-_-(d=Math.sqrt(d)))*(u=1/(2*u));b=(-_+d)*u;if(E>0&&E<=this.maxdist){f=0,x=0;f=this.originx,x=this.originy;i=E;f+=this.dirx*i,x+=this.diry*i;i=1,y=(f-=n.worldCOMx*i)*f+(x-=n.worldCOMy*i)*x;if(f*=i=1/Math.sqrt(y),null==(M=x*=i)&&(M=0),null==(U=f)&&(U=0),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?k=new nape_geom_Vec2:(k=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=k.zpp_pool,k.zpp_pool=null,k.zpp_disp=!1,k==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==k.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?T=new zpp_$nape_geom_ZPP_$Vec2:(T=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=T.next,T.next=null),T.weak=!1,T._immutable=!1,T.x=U,T.y=M,k.zpp_inner=T,k.zpp_inner.outer=k}else{if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=k.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(O=k.zpp_inner)._validate&&O._validate(),k.zpp_inner.x==U){if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(O=k.zpp_inner)._validate&&O._validate(),v=k.zpp_inner.y==M}else v=!1;if(!v)k.zpp_inner.x=U,k.zpp_inner.y=M,null!=(O=k.zpp_inner)._invalidate&&O._invalidate(O)}k.zpp_inner.weak=!1;for(v=zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(k,E,!1,n.outer),m=null,g=t.zpp_inner.inner.head;null!=g;){z=g.elt;if(null!=v.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");w=v.zpp_inner.toiDistance;if(null!=z.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(w<z.zpp_inner.toiDistance)break;m=g,g=g.next}O=t.zpp_inner.inner;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?k=new zpp_$nape_util_ZNPNode_$RayResult:(k=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=k.next,k.next=null),k.elt=v;C=k;null==m?(C.next=O.head,O.head=C):(C.next=m.next,m.next=C),O.pushmod=O.modified=!0,O.length++}if(b>0&&b<=this.maxdist&&e){f=0,x=0;f=this.originx,x=this.originy;i=b;f+=this.dirx*i,x+=this.diry*i;var U,M;i=1,y=(f-=n.worldCOMx*i)*f+(x-=n.worldCOMy*i)*x;if(f*=i=1/Math.sqrt(y),null==(M=x=-(x*=i))&&(M=0),null==(U=f=-f)&&(U=0),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?k=new nape_geom_Vec2:(k=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=k.zpp_pool,k.zpp_pool=null,k.zpp_disp=!1,k==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==k.zpp_inner){var T;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?T=new zpp_$nape_geom_ZPP_$Vec2:(T=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=T.next,T.next=null),T.weak=!1,T._immutable=!1,T.x=U,T.y=M,k.zpp_inner=T,k.zpp_inner.outer=k}else{if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((O=k.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=O._isimmutable&&O._isimmutable(),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(O=k.zpp_inner)._validate&&O._validate(),k.zpp_inner.x==U){if(null!=k&&k.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(O=k.zpp_inner)._validate&&O._validate(),v=k.zpp_inner.y==M}else v=!1;if(!v)k.zpp_inner.x=U,k.zpp_inner.y=M,null!=(O=k.zpp_inner)._invalidate&&O._invalidate(O)}k.zpp_inner.weak=!1;for(v=zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(k,b,!0,n.outer),m=null,g=t.zpp_inner.inner.head;null!=g;){z=g.elt;if(null!=v.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");w=v.zpp_inner.toiDistance;if(null!=z.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(w<z.zpp_inner.toiDistance)break;m=g,g=g.next}var k;O=t.zpp_inner.inner;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?k=new zpp_$nape_util_ZNPNode_$RayResult:(k=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=k.next,k.next=null),k.elt=v;C=k;null==m?(C.next=O.head,O.head=C):(C.next=m.next,m.next=C),O.pushmod=O.modified=!0,O.length++}}},polysect:function(n,e,t){for(var i=t,r=null,l=n.edges.head,s=n.gverts.next,a=s,o=s.next;null!=o;){var p=o,h=l.elt;if(e||h.gnormx*this.dirx+h.gnormy*this.diry<0){var u=0,_=0;u=p.x-a.x,_=p.y-a.y;var c=0,d=0;if(c=a.x-this.originx,d=a.y-this.originy,(f=_*this.dirx-u*this.diry)*f>nape_Config.epsilon)if((x=(_*c-u*d)*(f=1/f))>0&&x<i&&x<=this.maxdist)(b=(this.diry*c-this.dirx*d)*f)>-nape_Config.epsilon&&b<1+nape_Config.epsilon&&(i=x,r=l.elt)}l=l.next,s=o,a=p,o=o.next}for(!0;;){p=o=n.gverts.next,h=l.elt;if(e||h.gnormx*this.dirx+h.gnormy*this.diry<0){u=0,_=0;u=p.x-a.x,_=p.y-a.y;var f,x,b;c=0,d=0;if(c=a.x-this.originx,d=a.y-this.originy,(f=_*this.dirx-u*this.diry)*f>nape_Config.epsilon)if((x=(_*c-u*d)*(f=1/f))>0&&x<i&&x<=this.maxdist)(b=(this.diry*c-this.dirx*d)*f)>-nape_Config.epsilon&&b<1+nape_Config.epsilon&&(i=x,r=l.elt)}l=l.next;break}if(null!=r){var y=0,v=0;y=r.gnormx,v=r.gnormy,(e=y*this.dirx+v*this.diry>0)&&(y=-y,v=-v);var m,g=y,z=v;if(null==z&&(z=0),null==g&&(g=0),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?m=new nape_geom_Vec2:(m=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=m.zpp_pool,m.zpp_pool=null,m.zpp_disp=!1,m==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==m.zpp_inner){var w;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?w=new zpp_$nape_geom_ZPP_$Vec2:(w=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=g,w.y=z,m.zpp_inner=w,m.zpp_inner.outer=m}else{if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var O;if((C=m.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=C._isimmutable&&C._isimmutable(),g!=g||z!=z)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(C=m.zpp_inner)._validate&&C._validate(),m.zpp_inner.x==g){if(null!=m&&m.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var C;null!=(C=m.zpp_inner)._validate&&C._validate(),O=m.zpp_inner.y==z}else O=!1;if(!O)m.zpp_inner.x=g,m.zpp_inner.y=z,null!=(C=m.zpp_inner)._invalidate&&C._invalidate(C)}return m.zpp_inner.weak=!1,zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(m,i,e,n.outer)}return null},polysect2:function(n,e,t){for(var i=1/0,r=-1,l=null,s=null,a=n.edges.head,o=n.gverts.next,p=o,h=o.next;null!=h;){var u=h,_=a.elt;if(e||_.gnormx*this.dirx+_.gnormy*this.diry<0){var c=0,d=0;c=u.x-p.x,d=u.y-p.y;var f=0,x=0;if(f=p.x-this.originx,x=p.y-this.originy,(b=d*this.dirx-c*this.diry)*b>nape_Config.epsilon)if((y=(d*f-c*x)*(b=1/b))>0&&y<=this.maxdist&&(y<i||y>r))(v=(this.diry*f-this.dirx*x)*b)>-nape_Config.epsilon&&v<1+nape_Config.epsilon&&(y<i&&(i=y,l=a.elt),y>r&&(r=y,s=a.elt))}a=a.next,o=h,p=u,h=h.next}for(!0;;){u=h=n.gverts.next,_=a.elt;if(e||_.gnormx*this.dirx+_.gnormy*this.diry<0){c=0,d=0;c=u.x-p.x,d=u.y-p.y;var b,y,v;f=0,x=0;if(f=p.x-this.originx,x=p.y-this.originy,(b=d*this.dirx-c*this.diry)*b>nape_Config.epsilon)if((y=(d*f-c*x)*(b=1/b))>0&&y<=this.maxdist&&(y<i||y>r))(v=(this.diry*f-this.dirx*x)*b)>-nape_Config.epsilon&&v<1+nape_Config.epsilon&&(y<i&&(i=y,l=a.elt),y>r&&(r=y,s=a.elt))}a=a.next;break}if(null!=l){var m=0,g=0;if(m=l.gnormx,g=l.gnormy,(e=m*this.dirx+g*this.diry>0)&&(m=-m,g=-g),null==(k=g)&&(k=0),null==(T=m)&&(T=0),T!=T||k!=k)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?D=new nape_geom_Vec2:(D=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=D.zpp_pool,D.zpp_pool=null,D.zpp_disp=!1,D==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==D.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?z=new zpp_$nape_geom_ZPP_$Vec2:(z=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=z.next,z.next=null),z.weak=!1,z._immutable=!1,z.x=T,z.y=k,D.zpp_inner=z,D.zpp_inner.outer=D}else{if(null!=D&&D.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((U=D.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=U._isimmutable&&U._isimmutable(),T!=T||k!=k)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=D&&D.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(U=D.zpp_inner)._validate&&U._validate(),D.zpp_inner.x==T){if(null!=D&&D.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(U=D.zpp_inner)._validate&&U._validate(),z=D.zpp_inner.y==k}else z=!1;if(!z)D.zpp_inner.x=T,D.zpp_inner.y=k,null!=(U=D.zpp_inner)._invalidate&&U._invalidate(U)}D.zpp_inner.weak=!1;for(var z=zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(D,i,e,n.outer),w=null,O=t.zpp_inner.inner.head;null!=O;){var C=O.elt;if(null!=z.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");var E=z.zpp_inner.toiDistance;if(null!=C.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(E<C.zpp_inner.toiDistance)break;w=O,O=O.next}var U=t.zpp_inner.inner;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?D=new zpp_$nape_util_ZNPNode_$RayResult:(D=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=D.next,D.next=null),D.elt=z;var M=D;null==w?(M.next=U.head,U.head=M):(M.next=w.next,w.next=M),U.pushmod=U.modified=!0,U.length++}if(null!=s&&l!=s){var T,k;m=0,g=0;if(m=s.gnormx,g=s.gnormy,(e=m*this.dirx+g*this.diry>0)&&(m=-m,g=-g),null==(k=g)&&(k=0),null==(T=m)&&(T=0),T!=T||k!=k)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?D=new nape_geom_Vec2:(D=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=D.zpp_pool,D.zpp_pool=null,D.zpp_disp=!1,D==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==D.zpp_inner){null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?z=new zpp_$nape_geom_ZPP_$Vec2:(z=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=z.next,z.next=null),z.weak=!1,z._immutable=!1,z.x=T,z.y=k,D.zpp_inner=z,D.zpp_inner.outer=D}else{if(null!=D&&D.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((U=D.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=U._isimmutable&&U._isimmutable(),T!=T||k!=k)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=D&&D.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(U=D.zpp_inner)._validate&&U._validate(),D.zpp_inner.x==T){if(null!=D&&D.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(U=D.zpp_inner)._validate&&U._validate(),z=D.zpp_inner.y==k}else z=!1;if(!z)D.zpp_inner.x=T,D.zpp_inner.y=k,null!=(U=D.zpp_inner)._invalidate&&U._invalidate(U)}D.zpp_inner.weak=!1;for(z=zpp_$nape_geom_ZPP_$ConvexRayResult.getRay(D,r,e,n.outer),w=null,O=t.zpp_inner.inner.head;null!=O;){C=O.elt;if(null!=z.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");E=z.zpp_inner.toiDistance;if(null!=C.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(E<C.zpp_inner.toiDistance)break;w=O,O=O.next}var D;U=t.zpp_inner.inner;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?D=new zpp_$nape_util_ZNPNode_$RayResult:(D=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=D.next,D.next=null),D.elt=z;M=D;null==w?(M.next=U.head,U.head=M):(M.next=w.next,w.next=M),U.pushmod=U.modified=!0,U.length++}},__class__:zpp_$nape_geom_ZPP_$Ray};var zpp_$nape_geom_ZPP_$SimpleVert=function(){this.node=null,this.next=null,this.id=0,this.links=null,this.y=0,this.x=0,this.forced=!1,this.id=zpp_$nape_ZPP_$ID.ZPP_SimpleVert(),null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?this.links=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(this.links=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=this.links.next,this.links.next=null),this.links.lt=zpp_$nape_geom_ZPP_$SimpleVert.less_xy};t["zpp_nape.geom.ZPP_SimpleVert"]=zpp_$nape_geom_ZPP_$SimpleVert,zpp_$nape_geom_ZPP_$SimpleVert.__name__="zpp_nape.geom.ZPP_SimpleVert",zpp_$nape_geom_ZPP_$SimpleVert.less_xy=function(n,e){return n.y<e.y||n.y==e.y&&n.x<e.x},zpp_$nape_geom_ZPP_$SimpleVert.swap_nodes=function(n,e){var t=n.node;n.node=e.node,e.node=t},zpp_$nape_geom_ZPP_$SimpleVert.get=function(n,e){var t;return null==zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool?t=new zpp_$nape_geom_ZPP_$SimpleVert:(t=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=t.next,t.next=null),t.x=n,t.y=e,t},zpp_$nape_geom_ZPP_$SimpleVert.prototype={free:function(){this.links.clear(),this.node=null,this.forced=!1},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$SimpleVert};var zpp_$nape_geom_ZPP_$SimpleSeg=function(){this.node=null,this.prev=null,this.next=null,this.id=0,this.vertices=null,this.right=null,this.left=null,this.id=zpp_$nape_ZPP_$ID.ZPP_SimpleSeg(),null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?this.vertices=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(this.vertices=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=this.vertices.next,this.vertices.next=null),this.vertices.lt=$bind(this,this.less_xy)};t["zpp_nape.geom.ZPP_SimpleSeg"]=zpp_$nape_geom_ZPP_$SimpleSeg,zpp_$nape_geom_ZPP_$SimpleSeg.__name__="zpp_nape.geom.ZPP_SimpleSeg",zpp_$nape_geom_ZPP_$SimpleSeg.get=function(n,e){var t;return null==zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool?t=new zpp_$nape_geom_ZPP_$SimpleSeg:(t=zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool,zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool=t.next,t.next=null),t.left=n,t.right=e,t.vertices.insert(n),t.vertices.insert(e),t},zpp_$nape_geom_ZPP_$SimpleSeg.prototype={free:function(){this.left=this.right=null,this.prev=null,this.node=null,this.vertices.clear()},alloc:function(){},less_xy:function(n,e){return n.x<e.x||n.x==e.x&&n.y<e.y},__class__:zpp_$nape_geom_ZPP_$SimpleSeg};var zpp_$nape_geom_ZPP_$SimpleEvent=function(){this.next=null,this.node=null,this.segment2=null,this.segment=null,this.vertex=null,this.type=0};t["zpp_nape.geom.ZPP_SimpleEvent"]=zpp_$nape_geom_ZPP_$SimpleEvent,zpp_$nape_geom_ZPP_$SimpleEvent.__name__="zpp_nape.geom.ZPP_SimpleEvent",zpp_$nape_geom_ZPP_$SimpleEvent.swap_nodes=function(n,e){var t=n.node;n.node=e.node,e.node=t},zpp_$nape_geom_ZPP_$SimpleEvent.less_xy=function(n,e){return n.vertex.x<e.vertex.x||!(n.vertex.x>e.vertex.x)&&(n.vertex.y<e.vertex.y||!(n.vertex.y>e.vertex.y)&&n.type<e.type)},zpp_$nape_geom_ZPP_$SimpleEvent.get=function(n){var e;return null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_geom_ZPP_$SimpleEvent:(e=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.vertex=n,e},zpp_$nape_geom_ZPP_$SimpleEvent.prototype={free:function(){this.vertex=null,this.segment=this.segment2=null,this.node=null},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$SimpleEvent};var zpp_$nape_geom_ZPP_$SimpleSweep=function(){this.tree=null,this.sweepx=0,null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?this.tree=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(this.tree=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=this.tree.next,this.tree.next=null),this.tree.lt=$bind(this,this.edge_lt),this.tree.swapped=$bind(this,this.swap_nodes)};t["zpp_nape.geom.ZPP_SimpleSweep"]=zpp_$nape_geom_ZPP_$SimpleSweep,zpp_$nape_geom_ZPP_$SimpleSweep.__name__="zpp_nape.geom.ZPP_SimpleSweep",zpp_$nape_geom_ZPP_$SimpleSweep.prototype={swap_nodes:function(n,e){var t=n.node;n.node=e.node,e.node=t},edge_lt:function(n,e){var t,i,r=0,l=0,s=0,a=0;if(n.left==e.left&&n.right==e.right)return!1;if(n.left==e.right)return n.left.x==n.right.x?n.left.y<n.right.y?n.left.y>e.left.y:n.right.y>e.left.y:(t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.left.x-n.left.x,a=e.left.y-n.left.y,(t?l*s-r*a:a*r-s*l)<0);if(n.right==e.left)return e.left.x==e.right.x?i=e.left.y<e.right.y?e.left.y>n.left.y:e.right.y>n.left.y:(t=e.right.x<e.left.x,r=e.right.x-e.left.x,l=e.right.y-e.left.y,s=n.left.x-e.left.x,a=n.left.y-e.left.y,i=(t?l*s-r*a:a*r-s*l)<0),!i;if(n.left==e.left)return n.left.x==n.right.x?n.left.y<n.right.y?n.left.y>e.right.y:n.right.y>e.right.y:(t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.right.x-n.left.x,a=e.right.y-n.left.y,(t?l*s-r*a:a*r-s*l)<0);if(n.right==e.right)return n.left.x==n.right.x?n.left.y<n.right.y?n.left.y>e.left.y:n.right.y>e.left.y:(t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.left.x-n.left.x,a=e.left.y-n.left.y,(t?l*s-r*a:a*r-s*l)<0);if(n.left.x==n.right.x){if(e.left.x==e.right.x){var o=n.left.y<n.right.y?n.right:n.left,p=e.left.y<e.right.y?e.right:e.left;return o.y>p.y}t=e.right.x<e.left.x,r=e.right.x-e.left.x,l=e.right.y-e.left.y,s=n.left.x-e.left.x,a=n.left.y-e.left.y;var h=t?l*s-r*a:a*r-s*l;return t=e.right.x<e.left.x,r=e.right.x-e.left.x,l=e.right.y-e.left.y,s=n.right.x-e.left.x,a=n.right.y-e.left.y,h*(t?l*s-r*a:a*r-s*l)>=0?h>=0:this.sweepx>=n.left.x}if(e.left.x==e.right.x){t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.left.x-n.left.x,a=e.left.y-n.left.y;var u=t?l*s-r*a:a*r-s*l;return t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.right.x-n.left.x,a=e.right.y-n.left.y,u*(t?l*s-r*a:a*r-s*l)>=0?u<0:this.sweepx<e.left.x}t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.left.x-n.left.x,a=e.left.y-n.left.y;u=(t?l*s-r*a:a*r-s*l)<0;if(t=n.right.x<n.left.x,r=n.right.x-n.left.x,l=n.right.y-n.left.y,s=e.right.x-n.left.x,a=e.right.y-n.left.y,u==(t?l*s-r*a:a*r-s*l)<0)return u;t=e.right.x<e.left.x,r=e.right.x-e.left.x,l=e.right.y-e.left.y,s=n.left.x-e.left.x,a=n.left.y-e.left.y;h=(t?l*s-r*a:a*r-s*l)>=0;return t=e.right.x<e.left.x,r=e.right.x-e.left.x,l=e.right.y-e.left.y,s=n.right.x-e.left.x,a=n.right.y-e.left.y,h==(t?l*s-r*a:a*r-s*l)>=0?h:(this.sweepx-n.left.x)/(n.right.x-n.left.x)*(n.right.y-n.left.y)+n.left.y>(this.sweepx-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y},clear:function(){this.tree.clear()},add:function(n){n.node=this.tree.insert(n);var e=this.tree.successor_node(n.node),t=this.tree.predecessor_node(n.node);return null!=e&&(n.next=e.data,e.data.prev=n),null!=t&&(n.prev=t.data,t.data.next=n),n},remove:function(n){var e=this.tree.successor_node(n.node),t=this.tree.predecessor_node(n.node);null!=e&&(e.data.prev=n.prev),null!=t&&(t.data.next=n.next),this.tree.remove_node(n.node),n.node=null},intersect:function(n,e){if(null==n||null==e)return!1;if(n.left==e.left||n.left==e.right||n.right==e.left||n.right==e.right)return!1;var t=(e.left.x-n.left.x)*(n.right.y-n.left.y)-(n.right.x-n.left.x)*(e.left.y-n.left.y),i=(e.right.x-n.left.x)*(n.right.y-n.left.y)-(n.right.x-n.left.x)*(e.right.y-n.left.y);if(t*i>0)return!1;var r=(n.left.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(n.left.y-e.left.y),l=(n.right.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(n.right.y-e.left.y);return!(r*l>0)},intersection:function(n,e){if(null==n||null==e)return null;if(n.left==e.left||n.left==e.right||n.right==e.left||n.right==e.right)return null;var t,i;t=n.right.x-n.left.x,i=n.right.y-n.left.y;var r,l;r=e.right.x-e.left.x;var s=(l=e.right.y-e.left.y)*t-r*i;if(0==s)return null;s=1/s;var a,o,p=(l*(a=e.left.x-n.left.x)-r*(o=e.left.y-n.left.y))*s;if(p<0||p>1)return null;var h,u=(i*a-t*o)*s;if(u<0||u>1)return null;if(0==u||1==u||0==p||1==p){var _=0==u;if(1==u&&_)throw haxe_Exception.thrown("corner case 1a");if(1==u&&(_=!0),0==p&&_)throw haxe_Exception.thrown("corner case 1b");if(0==p&&(_=!0),1==p&&_)throw haxe_Exception.thrown("corner case 1c");h=0==u?e.left:1==u?e.right:0==p?n.left:n.right}else{var c,d=.5*(n.left.x+t*p+e.left.x+r*u),f=.5*(n.left.y+i*p+e.left.y+l*u);null==zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool?c=new zpp_$nape_geom_ZPP_$SimpleVert:(c=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=c.next,c.next=null),c.x=d,c.y=f,h=c}null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?c=new zpp_$nape_geom_ZPP_$SimpleEvent:(c=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=c.next,c.next=null),c.vertex=h;var x=c;return x.type=0,x.segment=n,x.segment2=e,x},__class__:zpp_$nape_geom_ZPP_$SimpleSweep};var zpp_$nape_geom_ZPP_$Simple=function(){};t["zpp_nape.geom.ZPP_Simple"]=zpp_$nape_geom_ZPP_$Simple,zpp_$nape_geom_ZPP_$Simple.__name__="zpp_nape.geom.ZPP_Simple",zpp_$nape_geom_ZPP_$Simple.decompose=function(n,e){null==zpp_$nape_geom_ZPP_$Simple.sweep&&(zpp_$nape_geom_ZPP_$Simple.sweep=new zpp_$nape_geom_ZPP_$SimpleSweep,zpp_$nape_geom_ZPP_$Simple.inthash=new zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse),null==zpp_$nape_geom_ZPP_$Simple.vertices&&(null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?zpp_$nape_geom_ZPP_$Simple.vertices=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(zpp_$nape_geom_ZPP_$Simple.vertices=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=zpp_$nape_geom_ZPP_$Simple.vertices.next,zpp_$nape_geom_ZPP_$Simple.vertices.next=null),zpp_$nape_geom_ZPP_$Simple.vertices.lt=zpp_$nape_geom_ZPP_$SimpleVert.less_xy,zpp_$nape_geom_ZPP_$Simple.vertices.swapped=zpp_$nape_geom_ZPP_$SimpleVert.swap_nodes),null==zpp_$nape_geom_ZPP_$Simple.queue&&(null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?zpp_$nape_geom_ZPP_$Simple.queue=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(zpp_$nape_geom_ZPP_$Simple.queue=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=zpp_$nape_geom_ZPP_$Simple.queue.next,zpp_$nape_geom_ZPP_$Simple.queue.next=null),zpp_$nape_geom_ZPP_$Simple.queue.lt=zpp_$nape_geom_ZPP_$SimpleEvent.less_xy,zpp_$nape_geom_ZPP_$Simple.queue.swapped=zpp_$nape_geom_ZPP_$SimpleEvent.swap_nodes);var t=null,i=null,r=n;if(null!=n)for(var l=n;;){var s=l,a=s.x,o=s.y;null==zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimpleVert:(m=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=m.next,m.next=null),m.x=a,m.y=o;for(var p=m,h=zpp_$nape_geom_ZPP_$Simple.vertices.parent;null!=h;)if(zpp_$nape_geom_ZPP_$Simple.vertices.lt(p,h.data))h=h.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.vertices.lt(h.data,p))break;h=h.next}if(null!=(v=h))(Ne=p).links.clear(),Ne.node=null,Ne.forced=!1,Ne.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=Ne,p=v.data;else p.node=zpp_$nape_geom_ZPP_$Simple.vertices.insert(p);if(null!=i){null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?g=new zpp_$nape_geom_ZPP_$SimpleEvent:(g=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=g.next,g.next=null),g.vertex=i;var u=g;null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?C=new zpp_$nape_geom_ZPP_$SimpleEvent:(C=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=C.next,C.next=null),C.vertex=p;var _=C;zpp_$nape_geom_ZPP_$SimpleEvent.less_xy(u,_)?(u.type=1,_.type=2,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(i,p)):(u.type=2,_.type=1,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(p,i)),u.segment=_.segment=c,zpp_$nape_geom_ZPP_$Simple.queue.insert(u),zpp_$nape_geom_ZPP_$Simple.queue.insert(_),i.links.insert(p),p.links.insert(i)}if(i=p,null==t&&(t=p),(l=l.next)==r)break}null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimpleEvent:(m=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=m.next,m.next=null),m.vertex=i;u=m;null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimpleEvent:(m=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=m.next,m.next=null),m.vertex=t;var c;_=m;for(zpp_$nape_geom_ZPP_$SimpleEvent.less_xy(u,_)?(u.type=1,_.type=2,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(i,t)):(u.type=2,_.type=1,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(t,i)),u.segment=_.segment=c,zpp_$nape_geom_ZPP_$Simple.queue.insert(u),zpp_$nape_geom_ZPP_$Simple.queue.insert(_),i.links.insert(t),t.links.insert(i),null==zpp_$nape_geom_ZPP_$Simple.ints&&(null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?zpp_$nape_geom_ZPP_$Simple.ints=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(zpp_$nape_geom_ZPP_$Simple.ints=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=zpp_$nape_geom_ZPP_$Simple.ints.next,zpp_$nape_geom_ZPP_$Simple.ints.next=null),zpp_$nape_geom_ZPP_$Simple.ints.lt=zpp_$nape_geom_ZPP_$SimpleEvent.less_xy);!zpp_$nape_geom_ZPP_$Simple.queue.empty();){var d=zpp_$nape_geom_ZPP_$Simple.queue.pop_front();if(zpp_$nape_geom_ZPP_$Simple.sweep.sweepx=d.vertex.x,1==d.type){var f=d.segment;if(zpp_$nape_geom_ZPP_$Simple.sweep.add(f),null!=f.next&&null!=f&&!(f.next.id<f.id?zpp_$nape_geom_ZPP_$Simple.inthash.has(f.next.id,f.id):zpp_$nape_geom_ZPP_$Simple.inthash.has(f.id,f.next.id))){var x=zpp_$nape_geom_ZPP_$Simple.sweep.intersection(f.next,f);if(null!=x)if(x.vertex.x>=zpp_$nape_geom_ZPP_$Simple.sweep.sweepx){for(h=zpp_$nape_geom_ZPP_$Simple.queue.parent;null!=h;)if(zpp_$nape_geom_ZPP_$Simple.queue.lt(x,h.data))h=h.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.queue.lt(h.data,x))break;h=h.next}var b=h;if(null==b){for(var y=zpp_$nape_geom_ZPP_$Simple.ints.parent;null!=y;)if(zpp_$nape_geom_ZPP_$Simple.ints.lt(x,y.data))y=y.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.ints.lt(y.data,x))break;y=y.next}var v;if(null!=(v=y))(Ne=x.vertex).links.clear(),Ne.node=null,Ne.forced=!1,Ne.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=Ne,x.vertex=v.data.vertex,v.data=x,zpp_$nape_geom_ZPP_$Simple.queue.insert(x);else zpp_$nape_geom_ZPP_$Simple.queue.insert(x),zpp_$nape_geom_ZPP_$Simple.ints.insert(x);if(f.next.id<f.id){var m,g,z=zpp_$nape_geom_ZPP_$Simple.inthash,w=f.next.id,O=f.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?m=new zpp_$nape_util_Hashable2_$Boolfalse:(m=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=m.next,m.next=null),m.id=w,m.di=O,(g=m).value=!0,z.add(g)}else{var C,E=zpp_$nape_geom_ZPP_$Simple.inthash,U=f.id,M=f.next.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?C=new zpp_$nape_util_Hashable2_$Boolfalse:(C=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=C.next,C.next=null),C.id=U,C.di=M;var T=C;T.value=!0,E.add(T)}}else{if((a=b.data).segment!=x.segment||x.segment2!=a.segment2)throw haxe_Exception.thrown("corner case 2, shiiiit.");var k=x.vertex;k.links.clear(),k.node=null,k.forced=!1,k.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=k;var D=x;D.vertex=null,D.segment=D.segment2=null,D.node=null,D.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=D}}else{var S=x.vertex;S.links.clear(),S.node=null,S.forced=!1,S.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=S;var A=x;A.vertex=null,A.segment=A.segment2=null,A.node=null,A.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=A}}if(null!=f&&null!=f.prev&&!(f.id<f.prev.id?zpp_$nape_geom_ZPP_$Simple.inthash.has(f.id,f.prev.id):zpp_$nape_geom_ZPP_$Simple.inthash.has(f.prev.id,f.id))){var P=zpp_$nape_geom_ZPP_$Simple.sweep.intersection(f,f.prev);if(null!=P)if(P.vertex.x>=zpp_$nape_geom_ZPP_$Simple.sweep.sweepx){for(var V=zpp_$nape_geom_ZPP_$Simple.queue.parent;null!=V;)if(zpp_$nape_geom_ZPP_$Simple.queue.lt(P,V.data))V=V.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.queue.lt(V.data,P))break;V=V.next}var I=V;if(null==I){for(var N=zpp_$nape_geom_ZPP_$Simple.ints.parent;null!=N;)if(zpp_$nape_geom_ZPP_$Simple.ints.lt(P,N.data))N=N.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.ints.lt(N.data,P))break;N=N.next}var F=N;if(null!=F){var R=P.vertex;R.links.clear(),R.node=null,R.forced=!1,R.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=R,P.vertex=F.data.vertex,F.data=P,zpp_$nape_geom_ZPP_$Simple.queue.insert(P)}else zpp_$nape_geom_ZPP_$Simple.queue.insert(P),zpp_$nape_geom_ZPP_$Simple.ints.insert(P);if(f.id<f.prev.id){var L,B=zpp_$nape_geom_ZPP_$Simple.inthash,G=f.id,j=f.prev.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?L=new zpp_$nape_util_Hashable2_$Boolfalse:(L=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=L.next,L.next=null),L.id=G,L.di=j;var K=L;K.value=!0,B.add(K)}else{var W,Y=zpp_$nape_geom_ZPP_$Simple.inthash,X=f.prev.id,H=f.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?W=new zpp_$nape_util_Hashable2_$Boolfalse:(W=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=W.next,W.next=null),W.id=X,W.di=H;var Z=W;Z.value=!0,Y.add(Z)}}else{var q=I.data;if(q.segment!=P.segment||P.segment2!=q.segment2)throw haxe_Exception.thrown("corner case 2, shiiiit.");var $=P.vertex;$.links.clear(),$.node=null,$.forced=!1,$.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=$;var Q=P;Q.vertex=null,Q.segment=Q.segment2=null,Q.node=null,Q.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=Q}}else{var J=P.vertex;J.links.clear(),J.node=null,J.forced=!1,J.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=J;var nn=P;nn.vertex=null,nn.segment=nn.segment2=null,nn.node=null,nn.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=nn}}}else if(2==d.type){var en=d.segment;if(null!=en.node){var tn=en.next;i=en.prev;zpp_$nape_geom_ZPP_$Simple.sweep.remove(en);var rn=en;if(rn.left=rn.right=null,rn.prev=null,rn.node=null,rn.vertices.clear(),rn.next=zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool,zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool=rn,null!=tn&&null!=i&&!(tn.id<i.id?zpp_$nape_geom_ZPP_$Simple.inthash.has(tn.id,i.id):zpp_$nape_geom_ZPP_$Simple.inthash.has(i.id,tn.id))){var ln=zpp_$nape_geom_ZPP_$Simple.sweep.intersection(tn,i);if(null!=ln)if(ln.vertex.x>=zpp_$nape_geom_ZPP_$Simple.sweep.sweepx){for(var sn=zpp_$nape_geom_ZPP_$Simple.queue.parent;null!=sn;)if(zpp_$nape_geom_ZPP_$Simple.queue.lt(ln,sn.data))sn=sn.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.queue.lt(sn.data,ln))break;sn=sn.next}var an=sn;if(null==an){for(var on=zpp_$nape_geom_ZPP_$Simple.ints.parent;null!=on;)if(zpp_$nape_geom_ZPP_$Simple.ints.lt(ln,on.data))on=on.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.ints.lt(on.data,ln))break;on=on.next}var pn=on;if(null!=pn){var hn=ln.vertex;hn.links.clear(),hn.node=null,hn.forced=!1,hn.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=hn,ln.vertex=pn.data.vertex,pn.data=ln,zpp_$nape_geom_ZPP_$Simple.queue.insert(ln)}else zpp_$nape_geom_ZPP_$Simple.queue.insert(ln),zpp_$nape_geom_ZPP_$Simple.ints.insert(ln);if(tn.id<i.id){var un,_n=zpp_$nape_geom_ZPP_$Simple.inthash,cn=tn.id,dn=i.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?un=new zpp_$nape_util_Hashable2_$Boolfalse:(un=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=un.next,un.next=null),un.id=cn,un.di=dn;var xn=un;xn.value=!0,_n.add(xn)}else{var bn,yn=zpp_$nape_geom_ZPP_$Simple.inthash,vn=i.id,mn=tn.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?bn=new zpp_$nape_util_Hashable2_$Boolfalse:(bn=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=bn.next,bn.next=null),bn.id=vn,bn.di=mn;var gn=bn;gn.value=!0,yn.add(gn)}}else{var zn=an.data;if(zn.segment!=ln.segment||ln.segment2!=zn.segment2)throw haxe_Exception.thrown("corner case 2, shiiiit.");var wn=ln.vertex;wn.links.clear(),wn.node=null,wn.forced=!1,wn.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=wn;var On=ln;On.vertex=null,On.segment=On.segment2=null,On.node=null,On.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=On}}else{var Cn=ln.vertex;Cn.links.clear(),Cn.node=null,Cn.forced=!1,Cn.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=Cn;var En=ln;En.vertex=null,En.segment=En.segment2=null,En.node=null,En.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=En}}}}else{var Un=d.vertex,Mn=null==Un.node,Tn=d.segment,kn=d.segment2;if(kn.next!=Tn){var Dn=Tn;Tn=kn,kn=Dn}for(var Sn=Tn.vertices.parent;null!=Sn;)if(Tn.vertices.lt(Un,Sn.data))Sn=Sn.prev;else{if(!Tn.vertices.lt(Sn.data,Un))break;Sn=Sn.next}for(var An=null==Sn,Pn=kn.vertices.parent;null!=Pn;)if(kn.vertices.lt(Un,Pn.data))Pn=Pn.prev;else{if(!kn.vertices.lt(Pn.data,Un))break;Pn=Pn.next}var Vn=null==Pn;if(An){var In=Tn.vertices.insert(Un),Nn=Un==Tn.left?Un:Tn.vertices.predecessor_node(In).data,Fn=Un==Tn.right?Un:Tn.vertices.successor_node(In).data;Nn.links.remove(Fn),Un!=Nn&&Nn.links.insert(Un),Fn.links.remove(Nn),Un!=Fn&&Fn.links.insert(Un),Un!=Nn&&Un.links.insert(Nn),Un!=Fn&&Un.links.insert(Fn)}if(Vn){var Rn=kn.vertices.insert(Un),Ln=Un==kn.left?Un:kn.vertices.predecessor_node(Rn).data,Bn=Un==kn.right?Un:kn.vertices.successor_node(Rn).data;Ln.links.remove(Bn),Un!=Ln&&Ln.links.insert(Un),Bn.links.remove(Ln),Un!=Bn&&Bn.links.insert(Un),Un!=Ln&&Un.links.insert(Ln),Un!=Bn&&Un.links.insert(Bn)}if(Mn&&(Un.node=zpp_$nape_geom_ZPP_$Simple.vertices.insert(Un)),Un.forced=!0,Mn){var Gn=Tn.node,jn=kn.node;Gn.data=kn,jn.data=Tn,Tn.node=jn,kn.node=Gn,kn.next=Tn.next,Tn.next=kn,Tn.prev=kn.prev,kn.prev=Tn,null!=Tn.prev&&(Tn.prev.next=Tn),null!=kn.next&&(kn.next.prev=kn)}if(null!=kn.next&&null!=kn&&!(kn.next.id<kn.id?zpp_$nape_geom_ZPP_$Simple.inthash.has(kn.next.id,kn.id):zpp_$nape_geom_ZPP_$Simple.inthash.has(kn.id,kn.next.id))){var Kn=zpp_$nape_geom_ZPP_$Simple.sweep.intersection(kn.next,kn);if(null!=Kn)if(Kn.vertex.x>=zpp_$nape_geom_ZPP_$Simple.sweep.sweepx){for(var Wn=zpp_$nape_geom_ZPP_$Simple.queue.parent;null!=Wn;)if(zpp_$nape_geom_ZPP_$Simple.queue.lt(Kn,Wn.data))Wn=Wn.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.queue.lt(Wn.data,Kn))break;Wn=Wn.next}var Yn=Wn;if(null==Yn){for(var Xn=zpp_$nape_geom_ZPP_$Simple.ints.parent;null!=Xn;)if(zpp_$nape_geom_ZPP_$Simple.ints.lt(Kn,Xn.data))Xn=Xn.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.ints.lt(Xn.data,Kn))break;Xn=Xn.next}var Hn=Xn;if(null!=Hn){var Zn=Kn.vertex;Zn.links.clear(),Zn.node=null,Zn.forced=!1,Zn.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=Zn,Kn.vertex=Hn.data.vertex,Hn.data=Kn,zpp_$nape_geom_ZPP_$Simple.queue.insert(Kn)}else zpp_$nape_geom_ZPP_$Simple.queue.insert(Kn),zpp_$nape_geom_ZPP_$Simple.ints.insert(Kn);if(kn.next.id<kn.id){var qn,$n=zpp_$nape_geom_ZPP_$Simple.inthash,Qn=kn.next.id,Jn=kn.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?qn=new zpp_$nape_util_Hashable2_$Boolfalse:(qn=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=qn.next,qn.next=null),qn.id=Qn,qn.di=Jn;var ne=qn;ne.value=!0,$n.add(ne)}else{var ee,te=zpp_$nape_geom_ZPP_$Simple.inthash,ie=kn.id,re=kn.next.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?ee=new zpp_$nape_util_Hashable2_$Boolfalse:(ee=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=ee.next,ee.next=null),ee.id=ie,ee.di=re;var le=ee;le.value=!0,te.add(le)}}else{var se=Yn.data;if(se.segment!=Kn.segment||Kn.segment2!=se.segment2)throw haxe_Exception.thrown("corner case 2, shiiiit.");var ae=Kn.vertex;ae.links.clear(),ae.node=null,ae.forced=!1,ae.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=ae;var oe=Kn;oe.vertex=null,oe.segment=oe.segment2=null,oe.node=null,oe.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=oe}}else{var pe=Kn.vertex;pe.links.clear(),pe.node=null,pe.forced=!1,pe.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=pe;var he=Kn;he.vertex=null,he.segment=he.segment2=null,he.node=null,he.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=he}}if(null!=Tn&&null!=Tn.prev&&!(Tn.id<Tn.prev.id?zpp_$nape_geom_ZPP_$Simple.inthash.has(Tn.id,Tn.prev.id):zpp_$nape_geom_ZPP_$Simple.inthash.has(Tn.prev.id,Tn.id))){var ue=zpp_$nape_geom_ZPP_$Simple.sweep.intersection(Tn,Tn.prev);if(null!=ue)if(ue.vertex.x>=zpp_$nape_geom_ZPP_$Simple.sweep.sweepx){for(var _e=zpp_$nape_geom_ZPP_$Simple.queue.parent;null!=_e;)if(zpp_$nape_geom_ZPP_$Simple.queue.lt(ue,_e.data))_e=_e.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.queue.lt(_e.data,ue))break;_e=_e.next}var ce=_e;if(null==ce){for(var de=zpp_$nape_geom_ZPP_$Simple.ints.parent;null!=de;)if(zpp_$nape_geom_ZPP_$Simple.ints.lt(ue,de.data))de=de.prev;else{if(!zpp_$nape_geom_ZPP_$Simple.ints.lt(de.data,ue))break;de=de.next}var fe=de;if(null!=fe){var xe=ue.vertex;xe.links.clear(),xe.node=null,xe.forced=!1,xe.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=xe,ue.vertex=fe.data.vertex,fe.data=ue,zpp_$nape_geom_ZPP_$Simple.queue.insert(ue)}else zpp_$nape_geom_ZPP_$Simple.queue.insert(ue),zpp_$nape_geom_ZPP_$Simple.ints.insert(ue);if(Tn.id<Tn.prev.id){var be,ye=zpp_$nape_geom_ZPP_$Simple.inthash,ve=Tn.id,me=Tn.prev.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?be=new zpp_$nape_util_Hashable2_$Boolfalse:(be=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=be.next,be.next=null),be.id=ve,be.di=me;var ge=be;ge.value=!0,ye.add(ge)}else{var ze,we=zpp_$nape_geom_ZPP_$Simple.inthash,Oe=Tn.prev.id,Ce=Tn.id;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?ze=new zpp_$nape_util_Hashable2_$Boolfalse:(ze=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=ze.next,ze.next=null),ze.id=Oe,ze.di=Ce;var Ee=ze;Ee.value=!0,we.add(Ee)}}else{var Ue=ce.data;if(Ue.segment!=ue.segment||ue.segment2!=Ue.segment2)throw haxe_Exception.thrown("corner case 2, shiiiit.");var Me=ue.vertex;Me.links.clear(),Me.node=null,Me.forced=!1,Me.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=Me;var Te=ue;Te.vertex=null,Te.segment=Te.segment2=null,Te.node=null,Te.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=Te}}else{var ke=ue.vertex;ke.links.clear(),ke.node=null,ke.forced=!1,ke.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=ke;var De=ue;De.vertex=null,De.segment=De.segment2=null,De.node=null,De.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=De}}zpp_$nape_geom_ZPP_$Simple.ints.remove(d)}var Se=d;Se.vertex=null,Se.segment=Se.segment2=null,Se.node=null,Se.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=Se}for(var Ae=0,Pe=zpp_$nape_geom_ZPP_$Simple.inthash.table.length;Ae<Pe;){var Ve=Ae++,Ie=zpp_$nape_geom_ZPP_$Simple.inthash.table[Ve];if(null!=Ie){for(;null!=Ie;){var Ne;Dn=Ie.hnext;Ie.hnext=null,(Ne=Ie).next=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=Ne,Ie=Dn}zpp_$nape_geom_ZPP_$Simple.inthash.table[Ve]=null}}for(null==e&&(e=new zpp_$nape_util_ZNPList_$ZPP_$GeomVert);!zpp_$nape_geom_ZPP_$Simple.vertices.empty();)zpp_$nape_geom_ZPP_$Simple.clip_polygon(zpp_$nape_geom_ZPP_$Simple.vertices,e);return e},zpp_$nape_geom_ZPP_$Simple.clip_polygon=function(n,e){var t=null,i=n.first(),r=i,l=i.links.parent,s=null==l.prev?l.next:l.prev,a=l.data,o=s.data,p=0,h=0;p=i.x-a.x,h=i.y-a.y;var u=0;u=o.x-i.x,(o.y-i.y)*p-u*h<0&&(o=a);var _=i.x,c=i.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?x=new zpp_$nape_geom_ZPP_$GeomVert:(x=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=x.next,x.next=null),x.forced=!1,x.x=_,x.y=c;var d=x;for(null==t?t=d.prev=d.next=d:(d.prev=t,d.next=t.next,t.next.prev=d,t.next=d),(t=d).forced=i.forced;;){if(i.links.remove(o),o.links.remove(i),o==r){var f;if(i.links.empty())n.remove(i),(f=i).links.clear(),f.node=null,f.forced=!1,f.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=f;break}var x;_=o.x,c=o.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?x=new zpp_$nape_geom_ZPP_$GeomVert:(x=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=x.next,x.next=null),x.forced=!1,x.x=_,x.y=c;d=x;if(null==t?t=d.prev=d.next=d:(d.prev=t,d.next=t.next,t.next.prev=d,t.next=d),(t=d).forced=o.forced,o.links.singular()){if(i.links.empty()){n.remove(i);var b=i;b.links.clear(),b.node=null,b.forced=!1,b.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=b}i=o,o=o.links.parent.data}else{var y=null,v=0;if(!o.links.empty()){for(var m=o.links.parent;null!=m.prev;)m=m.prev;for(;null!=m;){var g=m.data;if(null==y){y=g;p=0,h=0;p=o.x-i.x,h=o.y-i.y;u=0;u=g.x-o.x,v=(g.y-o.y)*p-u*h}else{var z,w;z=o.x-i.x,w=o.y-i.y;var O;O=g.x-o.x;var C=(g.y-o.y)*z-O*w;if(C>0&&v<=0)y=g,v=C;else if(v*C>=0){var E,U;E=o.x-g.x,U=o.y-g.y;var M;M=y.x-o.x,(y.y-o.y)*E-M*U>0&&(y=g,v=C)}}if(null!=m.next)for(m=m.next;null!=m.prev;)m=m.prev;else{for(;null!=m.parent&&m==m.parent.next;)m=m.parent;m=m.parent}}}if(i.links.empty()){n.remove(i);var T=i;T.links.clear(),T.node=null,T.forced=!1,T.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=T}i=o,o=y}}n.remove(r),(f=r).links.clear(),f.node=null,f.forced=!1,f.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=f,e.add(t)},zpp_$nape_geom_ZPP_$Simple.isSimple=function(n){null==zpp_$nape_geom_ZPP_$Simple.sweep&&(zpp_$nape_geom_ZPP_$Simple.sweep=new zpp_$nape_geom_ZPP_$SimpleSweep,zpp_$nape_geom_ZPP_$Simple.inthash=new zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse);var e=zpp_$nape_geom_ZPP_$Simple.list_vertices;null==e&&(e=zpp_$nape_geom_ZPP_$Simple.list_vertices=new zpp_$nape_util_ZNPList_$ZPP_$SimpleVert);var t=n;if(null!=n)for(var i=n;;){var r=(p=i).x,l=p.y;if(null==zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool?O=new zpp_$nape_geom_ZPP_$SimpleVert:(O=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=O.next,O.next=null),O.x=r,O.y=l,e.add(O),(i=i.next)==t)break}var s=zpp_$nape_geom_ZPP_$Simple.list_queue;null==s&&(s=zpp_$nape_geom_ZPP_$Simple.list_queue=new zpp_$nape_util_ZNPList_$ZPP_$SimpleEvent);var a=e.head,o=a.elt;for(a=a.next;null!=a;){var p=a.elt;null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?O=new zpp_$nape_geom_ZPP_$SimpleEvent:(O=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=O.next,O.next=null),O.vertex=o;var h,u=s.add(O);null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?h=new zpp_$nape_geom_ZPP_$SimpleEvent:(h=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=h.next,h.next=null),h.vertex=p;var _=s.add(h);zpp_$nape_geom_ZPP_$SimpleEvent.less_xy(u,_)?(u.type=1,_.type=2,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(o,p)):(u.type=2,_.type=1,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(p,o)),u.segment=_.segment=c,o=p,a=a.next}p=e.head.elt;null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?O=new zpp_$nape_geom_ZPP_$SimpleEvent:(O=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=O.next,O.next=null),O.vertex=o;u=s.add(O);null==zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool?O=new zpp_$nape_geom_ZPP_$SimpleEvent:(O=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=O.next,O.next=null),O.vertex=p;var c;_=s.add(O);zpp_$nape_geom_ZPP_$SimpleEvent.less_xy(u,_)?(u.type=1,_.type=2,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(o,p)):(u.type=2,_.type=1,c=zpp_$nape_geom_ZPP_$SimpleSeg.get(p,o)),u.segment=_.segment=c;var d=s;if(null!=d.head&&null!=d.head.next){for(var f,x,b,y=d.head,v=null,m=null,g=null,z=null,w=1;;){for(f=0,m=y,v=y=null;null!=m;){for(++f,g=m,x=0,b=w;null!=g&&x<w;)++x,g=g.next;for(;x>0||b>0&&null!=g;)0==x?(z=g,g=g.next,--b):0==b||null==g||zpp_$nape_geom_ZPP_$SimpleEvent.less_xy(m.elt,g.elt)?(z=m,m=m.next,--x):(z=g,g=g.next,--b),null!=v?v.next=z:y=z,v=z;m=g}if(v.next=null,w<<=1,!(f>1))break}d.head=y,d.modified=!0,d.pushmod=!0}for(var O=!0;null!=s.head;){var C=(E=s.pop_unsafe()).segment;if(1==E.type){if(zpp_$nape_geom_ZPP_$Simple.sweep.add(C),zpp_$nape_geom_ZPP_$Simple.sweep.intersect(C,C.next)||zpp_$nape_geom_ZPP_$Simple.sweep.intersect(C,C.prev)){O=!1;break}}else if(2==E.type){if(zpp_$nape_geom_ZPP_$Simple.sweep.intersect(C.prev,C.next)){O=!1;break}zpp_$nape_geom_ZPP_$Simple.sweep.remove(C),(M=C).left=M.right=null,M.prev=null,M.node=null,M.vertices.clear(),M.next=zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool,zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool=M}(U=E).vertex=null,U.segment=U.segment2=null,U.node=null,U.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=U}for(;null!=s.head;){var E,U;if(2==(E=s.pop_unsafe()).type)(M=E.segment).left=M.right=null,M.prev=null,M.node=null,M.vertices.clear(),M.next=zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool,zpp_$nape_geom_ZPP_$SimpleSeg.zpp_pool=M;(U=E).vertex=null,U.segment=U.segment2=null,U.node=null,U.next=zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool,zpp_$nape_geom_ZPP_$SimpleEvent.zpp_pool=U}for(zpp_$nape_geom_ZPP_$Simple.sweep.clear();null!=e.head;){var M;(M=e.pop_unsafe()).links.clear(),M.node=null,M.forced=!1,M.next=zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool,zpp_$nape_geom_ZPP_$SimpleVert.zpp_pool=M}return O};var zpp_$nape_geom_ZPP_$SimplifyV=function(){this.forced=!1,this.flag=!1,this.prev=null,this.next=null,this.y=0,this.x=0};t["zpp_nape.geom.ZPP_SimplifyV"]=zpp_$nape_geom_ZPP_$SimplifyV,zpp_$nape_geom_ZPP_$SimplifyV.__name__="zpp_nape.geom.ZPP_SimplifyV",zpp_$nape_geom_ZPP_$SimplifyV.get=function(n){var e;return null==zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool?e=new zpp_$nape_geom_ZPP_$SimplifyV:(e=zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool=e.next,e.next=null),e.x=n.x,e.y=n.y,e.flag=!1,e},zpp_$nape_geom_ZPP_$SimplifyV.prototype={free:function(){},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$SimplifyV};var zpp_$nape_geom_ZPP_$SimplifyP=function(){this.max=null,this.min=null,this.next=null};t["zpp_nape.geom.ZPP_SimplifyP"]=zpp_$nape_geom_ZPP_$SimplifyP,zpp_$nape_geom_ZPP_$SimplifyP.__name__="zpp_nape.geom.ZPP_SimplifyP",zpp_$nape_geom_ZPP_$SimplifyP.get=function(n,e){var t;return null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?t=new zpp_$nape_geom_ZPP_$SimplifyP:(t=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=t.next,t.next=null),t.min=n,t.max=e,t},zpp_$nape_geom_ZPP_$SimplifyP.prototype={free:function(){this.min=this.max=null},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$SimplifyP};var zpp_$nape_geom_ZPP_$Simplify=function(){};t["zpp_nape.geom.ZPP_Simplify"]=zpp_$nape_geom_ZPP_$Simplify,zpp_$nape_geom_ZPP_$Simplify.__name__="zpp_nape.geom.ZPP_Simplify",zpp_$nape_geom_ZPP_$Simplify.lessval=function(n,e){return n.x-e.x+(n.y-e.y)},zpp_$nape_geom_ZPP_$Simplify.less=function(n,e){return n.x-e.x+(n.y-e.y)<0},zpp_$nape_geom_ZPP_$Simplify.distance=function(n,e,t){var i,r;i=t.x-e.x,r=t.y-e.y;var l=0,s=0;if(l=n.x-e.x,s=n.y-e.y,0==i*i+r*r)return l*l+s*s;var a=(l*i+s*r)/(i*i+r*r);if(a<=0)return l*l+s*s;if(a>=1){var o,p;return(o=n.x-t.x)*o+(p=n.y-t.y)*p}return(l-=i*a)*l+(s-=r*a)*s},zpp_$nape_geom_ZPP_$Simplify.simplify=function(n,e){var t=null,i=null,r=null;e*=e,null==zpp_$nape_geom_ZPP_$Simplify.stack&&(zpp_$nape_geom_ZPP_$Simplify.stack=new zpp_$nape_util_ZNPList_$ZPP_$SimplifyP);for(var l=null,s=null,a=n;;){null==zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyV:(m=zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool=m.next,m.next=null),m.x=a.x,m.y=a.y,m.flag=!1;var o=m;if(o.forced=a.forced,o.forced){if(o.flag=!0,null!=l){var p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?b=new zpp_$nape_geom_ZPP_$SimplifyP:(b=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=b.next,b.next=null),b.min=l,b.max=o,p.add(b)}else s=o;l=o}var h=o;if(null==t?t=h.prev=h.next=h:(h.prev=t,h.next=t.next,t.next.prev=h,t.next=h),t=h,null==i?(i=t,r=t):(t.x-i.x+(t.y-i.y)<0&&(i=t),r.x-t.x+(r.y-t.y)<0&&(r=t)),(a=a.next)==n)break}if(null==zpp_$nape_geom_ZPP_$Simplify.stack.head)if(null==s){i.flag=r.flag=!0;p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=i,m.max=r,p.add(m);p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=r,m.max=i,p.add(m)}else{var u=i.x-s.x+(i.y-s.y);u<0&&(u=-u);var _=r.x-s.x+(r.y-s.y);if(_<0&&(_=-_),u>_){i.flag=s.flag=!0;p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=i,m.max=s,p.add(m);p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=s,m.max=i,p.add(m)}else{r.flag=s.flag=!0;p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=r,m.max=s,p.add(m);p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=s,m.max=r,p.add(m)}}else{p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=l,m.max=s,p.add(m)}for(;null!=zpp_$nape_geom_ZPP_$Simplify.stack.head;){i=(a=zpp_$nape_geom_ZPP_$Simplify.stack.pop_unsafe()).min,r=a.max;(w=a).min=w.max=null,w.next=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=w;for(var c=e,d=null,f=i.next;f!=r;){var x=zpp_$nape_geom_ZPP_$Simplify.distance(f,i,r);x>c&&(c=x,d=f),f=f.next}if(null!=d){d.flag=!0;p=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?m=new zpp_$nape_geom_ZPP_$SimplifyP:(m=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=m.next,m.next=null),m.min=i,m.max=d,p.add(m);var b,y=zpp_$nape_geom_ZPP_$Simplify.stack;null==zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool?b=new zpp_$nape_geom_ZPP_$SimplifyP:(b=zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyP.zpp_pool=b.next,b.next=null),b.min=d,b.max=r,y.add(b)}}for(var v=null;null!=t;){if(t.flag){var m,g=t.x,z=t.y;null==zpp_$nape_geom_ZPP_$GeomVert.zpp_pool?m=new zpp_$nape_geom_ZPP_$GeomVert:(m=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool,zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=m.next,m.next=null),m.forced=!1,m.x=g,m.y=z;h=m;null==v?v=h.prev=h.next=h:(h.prev=v,h.next=v.next,v.next.prev=h,v.next=h),(v=h).forced=t.forced}if(null!=t&&t.prev==t){var w;t.next=t.prev=null,(w=t).next=zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool=w,t=null}else{var O=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var C=t;C.next=zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool,zpp_$nape_geom_ZPP_$SimplifyV.zpp_pool=C,t=null,t=O}}return v};var zpp_$nape_geom_ZPP_$ToiEvent=function(){this.kinematic=!1,this.failed=!1,this.slipped=!1,this.axis=null,this.c2=null,this.c1=null,this.frozen2=!1,this.frozen1=!1,this.arbiter=null,this.s2=null,this.s1=null,this.toi=0,this.next=null,this.c1=new zpp_$nape_geom_ZPP_$Vec2,this.c2=new zpp_$nape_geom_ZPP_$Vec2,this.axis=new zpp_$nape_geom_ZPP_$Vec2};t["zpp_nape.geom.ZPP_ToiEvent"]=zpp_$nape_geom_ZPP_$ToiEvent,zpp_$nape_geom_ZPP_$ToiEvent.__name__="zpp_nape.geom.ZPP_ToiEvent",zpp_$nape_geom_ZPP_$ToiEvent.prototype={alloc:function(){this.failed=!1,this.s1=this.s2=null,this.arbiter=null},free:function(){},__class__:zpp_$nape_geom_ZPP_$ToiEvent};var zpp_$nape_geom_ZPP_$SweepDistance=function(){};t["zpp_nape.geom.ZPP_SweepDistance"]=zpp_$nape_geom_ZPP_$SweepDistance,zpp_$nape_geom_ZPP_$SweepDistance.__name__="zpp_nape.geom.ZPP_SweepDistance",zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep=function(n,e,t,i,r){null==r&&(r=!1);var l,s,a=n.s1,o=n.s2,p=a.body,h=o.body;l=h.velx-p.velx,s=h.vely-p.vely;var u=p.angvel;u<0&&(u=-u);var _=h.angvel;_<0&&(_=-_);var c=a.sweepCoef*u+o.sweepCoef*_;if(!r&&!n.kinematic&&l*l+s*s<nape_Config.dynamicSweepLinearThreshold*nape_Config.dynamicSweepLinearThreshold&&c<nape_Config.dynamicSweepAngularThreshold)return n.toi=-1,void(n.failed=!0);for(var d=n.c1,f=n.c2,x=n.axis,b=t,y=0;;){var v=b*e,m=v-p.sweepTime;if(0!=m){p.sweepTime=v;var g=m;if(p.posx+=p.velx*g,p.posy+=p.vely*g,0!=p.angvel){var z=p.sweep_angvel*m;if(p.rot+=z,z*z>1e-4)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var w=z*z,O=1-.5*w,C=1-w*w/8,E=(O*p.axisx+z*p.axisy)*C;p.axisy=(O*p.axisy-z*p.axisx)*C,p.axisx=E}}}if(0==a.type)a.worldCOMx=p.posx+(p.axisy*a.localCOMx-p.axisx*a.localCOMy),a.worldCOMy=p.posy+(a.localCOMx*p.axisx+a.localCOMy*p.axisy);else{for(var U=a.polygon,M=U.lverts.next,T=U.gverts.next;null!=T;){var k=T,D=M;M=M.next,k.x=p.posx+(p.axisy*D.x-p.axisx*D.y),k.y=p.posy+(D.x*p.axisx+D.y*p.axisy),T=T.next}var S=U.edges.head,A=U.gverts.next,P=A;for(A=A.next;null!=A;){var V=A,I=S.elt;S=S.next,I.gnormx=p.axisy*I.lnormx-p.axisx*I.lnormy,I.gnormy=I.lnormx*p.axisx+I.lnormy*p.axisy,I.gprojection=p.posx*I.gnormx+p.posy*I.gnormy+I.lprojection,I.tp0=P.y*I.gnormx-P.x*I.gnormy,I.tp1=V.y*I.gnormx-V.x*I.gnormy,P=V,A=A.next}var N=U.gverts.next,F=S.elt;S=S.next,F.gnormx=p.axisy*F.lnormx-p.axisx*F.lnormy,F.gnormy=F.lnormx*p.axisx+F.lnormy*p.axisy,F.gprojection=p.posx*F.gnormx+p.posy*F.gnormy+F.lprojection,F.tp0=P.y*F.gnormx-P.x*F.gnormy,F.tp1=N.y*F.gnormx-N.x*F.gnormy}var R=b*e,L=R-h.sweepTime;if(0!=L){h.sweepTime=R;var B=L;if(h.posx+=h.velx*B,h.posy+=h.vely*B,0!=h.angvel){var G=h.sweep_angvel*L;if(h.rot+=G,G*G>1e-4)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var j=G*G,K=1-.5*j,W=1-j*j/8,Y=(K*h.axisx+G*h.axisy)*W;h.axisy=(K*h.axisy-G*h.axisx)*W,h.axisx=Y}}}if(0==o.type)o.worldCOMx=h.posx+(h.axisy*o.localCOMx-h.axisx*o.localCOMy),o.worldCOMy=h.posy+(o.localCOMx*h.axisx+o.localCOMy*h.axisy);else{for(var X=o.polygon,H=X.lverts.next,Z=X.gverts.next;null!=Z;){var q=Z,$=H;H=H.next,q.x=h.posx+(h.axisy*$.x-h.axisx*$.y),q.y=h.posy+($.x*h.axisx+$.y*h.axisy),Z=Z.next}var Q=X.edges.head,J=X.gverts.next,nn=J;for(J=J.next;null!=J;){var en=J,tn=Q.elt;Q=Q.next,tn.gnormx=h.axisy*tn.lnormx-h.axisx*tn.lnormy,tn.gnormy=tn.lnormx*h.axisx+tn.lnormy*h.axisy,tn.gprojection=h.posx*tn.gnormx+h.posy*tn.gnormy+tn.lprojection,tn.tp0=nn.y*tn.gnormx-nn.x*tn.gnormy,tn.tp1=en.y*tn.gnormx-en.x*tn.gnormy,nn=en,J=J.next}var rn=X.gverts.next,ln=Q.elt;Q=Q.next,ln.gnormx=h.axisy*ln.lnormx-h.axisx*ln.lnormy,ln.gnormy=ln.lnormx*h.axisx+ln.lnormy*h.axisy,ln.gprojection=h.posx*ln.gnormx+h.posy*ln.gnormy+ln.lprojection,ln.tp0=nn.y*ln.gnormx-nn.x*ln.gnormy,ln.tp1=rn.y*ln.gnormx-rn.x*ln.gnormy}var sn,an=a,on=o,pn=d,hn=f;if(0==an.type&&0==on.type){var un,_n=an.circle,cn=on.circle,dn=0,xn=0;dn=cn.worldCOMx-_n.worldCOMx,xn=cn.worldCOMy-_n.worldCOMy;var bn=Math.sqrt(dn*dn+xn*xn);if((un=bn-(_n.radius+cn.radius))<1e100){if(0==bn)dn=1,xn=0;else{var yn=1/bn;dn*=yn,xn*=yn}var vn=_n.radius;pn.x=_n.worldCOMx+dn*vn,pn.y=_n.worldCOMy+xn*vn;var mn=-cn.radius;hn.x=cn.worldCOMx+dn*mn,hn.y=cn.worldCOMy+xn*mn,x.x=dn,x.y=xn}sn=un}else{var gn=!1;if(0==an.type&&1==on.type){var zn=an;an=on,on=zn;var wn=pn;pn=hn,hn=wn,gn=!0}if(1==an.type&&0==on.type){for(var On=an.polygon,Cn=on.circle,En=-1e100,Un=null,Mn=On.edges.head;null!=Mn;){var Tn=Mn.elt,kn=Tn.gnormx*Cn.worldCOMx+Tn.gnormy*Cn.worldCOMy-Tn.gprojection-Cn.radius;if(kn>1e100){En=kn;break}kn>0?kn>En&&(En=kn,Un=Tn):En<0&&kn>En&&(En=kn,Un=Tn),Mn=Mn.next}if(En<1e100){var Dn=Un.gp0,Sn=Un.gp1,An=Cn.worldCOMy*Un.gnormx-Cn.worldCOMx*Un.gnormy;if(An<=Dn.y*Un.gnormx-Dn.x*Un.gnormy){var Pn=0,Vn=0;Pn=Cn.worldCOMx-Dn.x,Vn=Cn.worldCOMy-Dn.y;var In=Math.sqrt(Pn*Pn+Vn*Vn);if((En=In-Cn.radius)<1e100){if(0==In)Pn=1,Vn=0;else{var Nn=1/In;Pn*=Nn,Vn*=Nn}pn.x=Dn.x+0*Pn,pn.y=Dn.y+0*Vn;var Fn=-Cn.radius;hn.x=Cn.worldCOMx+Pn*Fn,hn.y=Cn.worldCOMy+Vn*Fn,x.x=Pn,x.y=Vn}}else if(An>=Sn.y*Un.gnormx-Sn.x*Un.gnormy){var Rn=0,Ln=0;Rn=Cn.worldCOMx-Sn.x,Ln=Cn.worldCOMy-Sn.y;var Bn=Math.sqrt(Rn*Rn+Ln*Ln);if((En=Bn-Cn.radius)<1e100){if(0==Bn)Rn=1,Ln=0;else{var Gn=1/Bn;Rn*=Gn,Ln*=Gn}pn.x=Sn.x+0*Rn,pn.y=Sn.y+0*Ln;var jn=-Cn.radius;hn.x=Cn.worldCOMx+Rn*jn,hn.y=Cn.worldCOMy+Ln*jn,x.x=Rn,x.y=Ln}}else{var Kn=-Cn.radius;hn.x=Cn.worldCOMx+Un.gnormx*Kn,hn.y=Cn.worldCOMy+Un.gnormy*Kn;var Wn=-En;pn.x=hn.x+Un.gnormx*Wn,pn.y=hn.y+Un.gnormy*Wn,x.x=Un.gnormx,x.y=Un.gnormy}}gn&&(x.x=-x.x,x.y=-x.y),sn=En}else{for(var Yn=an.polygon,Xn=on.polygon,Hn=-1e100,Zn=null,qn=null,$n=0,Qn=Yn.edges.head;null!=Qn;){for(var Jn=Qn.elt,ne=1e100,ee=Xn.gverts.next;null!=ee;){var te=ee,ie=Jn.gnormx*te.x+Jn.gnormy*te.y;ie<ne&&(ne=ie),ee=ee.next}if((ne-=Jn.gprojection)>1e100){Hn=ne;break}ne>0?ne>Hn&&(Hn=ne,Zn=Jn,$n=1):Hn<0&&ne>Hn&&(Hn=ne,Zn=Jn,$n=1),Qn=Qn.next}if(Hn<1e100){for(var re=Xn.edges.head;null!=re;){for(var le=re.elt,se=1e100,ae=Yn.gverts.next;null!=ae;){var oe=ae,pe=le.gnormx*oe.x+le.gnormy*oe.y;pe<se&&(se=pe),ae=ae.next}if((se-=le.gprojection)>1e100){Hn=se;break}se>0?se>Hn&&(Hn=se,qn=le,$n=2):Hn<0&&se>Hn&&(Hn=se,qn=le,$n=2),re=re.next}if(Hn<1e100){var he,ue;if(1==$n)Yn,he=Xn,ue=Zn;else{Xn,he=Yn,ue=qn;var _e=pn;pn=hn,hn=_e,gn=!gn}for(var ce=null,de=1e100,fe=he.edges.head;null!=fe;){var xe=fe.elt,be=ue.gnormx*xe.gnormx+ue.gnormy*xe.gnormy;be<de&&(de=be,ce=xe),fe=fe.next}if(gn?(x.x=-ue.gnormx,x.y=-ue.gnormy):(x.x=ue.gnormx,x.y=ue.gnormy),Hn>=0){var ye,ve,me,ge,ze=ue.gp0,we=ue.gp1,Oe=ce.gp0,Ce=ce.gp1,Ee=1/((ye=we.x-ze.x)*ye+(ve=we.y-ze.y)*ve),Ue=1/((me=Ce.x-Oe.x)*me+(ge=Ce.y-Oe.y)*ge),Me=-(ye*(ze.x-Oe.x)+ve*(ze.y-Oe.y))*Ee,Te=-(ye*(ze.x-Ce.x)+ve*(ze.y-Ce.y))*Ee,ke=-(me*(Oe.x-ze.x)+ge*(Oe.y-ze.y))*Ue,De=-(me*(Oe.x-we.x)+ge*(Oe.y-we.y))*Ue;Me<0?Me=0:Me>1&&(Me=1),Te<0?Te=0:Te>1&&(Te=1),ke<0?ke=0:ke>1&&(ke=1),De<0?De=0:De>1&&(De=1);var Se,Ae,Pe=Me;Se=ze.x+ye*Pe,Ae=ze.y+ve*Pe;var Ve,Ie,Ne=Te;Ve=ze.x+ye*Ne,Ie=ze.y+ve*Ne;var Fe,Re,Le=ke;Fe=Oe.x+me*Le,Re=Oe.y+ge*Le;var Be,Ge,je=De;Be=Oe.x+me*je,Ge=Oe.y+ge*je;var Ke,We,Ye,Xe,He,Ze,qe,$e,Qe=(Ke=Se-Oe.x)*Ke+(We=Ae-Oe.y)*We,Je=(Ye=Ve-Ce.x)*Ye+(Xe=Ie-Ce.y)*Xe,nt=(He=Fe-ze.x)*He+(Ze=Re-ze.y)*Ze,et=(qe=Be-we.x)*qe+($e=Ge-we.y)*$e,tt=0,it=0,rt=null;Qe<Je?(tt=Se,it=Ae,rt=Oe):(tt=Ve,it=Ie,rt=Ce,Qe=Je);var lt=0,st=0,at=null;if(nt<et?(lt=Fe,st=Re,at=ze):(lt=Be,st=Ge,at=we,nt=et),Qe<nt?(pn.x=tt,pn.y=it,hn.x=rt.x,hn.y=rt.y,Hn=Math.sqrt(Qe)):(hn.x=lt,hn.y=st,pn.x=at.x,pn.y=at.y,Hn=Math.sqrt(nt)),0!=Hn){x.x=hn.x-pn.x,x.y=hn.y-pn.y;var ot=1/Hn;x.x*=ot,x.y*=ot,gn&&(x.x=-x.x,x.y=-x.y)}sn=Hn}else{var pt=0,ht=0;pt=ce.gp0.x,ht=ce.gp0.y;var ut,_t,ct=0,dt=0;ut=(ct=ce.gp1.x)-pt,_t=(dt=ce.gp1.y)-ht;var ft=ue.gnormy*pt-ue.gnormx*ht,xt=ue.gnormy*ct-ue.gnormx*dt,bt=1/(xt-ft),yt=(-ue.tp1-ft)*bt;if(yt>nape_Config.epsilon){pt+=ut*yt,ht+=_t*yt}var vt=(-ue.tp0-xt)*bt;if(vt<-nape_Config.epsilon){ct+=ut*vt,dt+=_t*vt}var mt=pt*ue.gnormx+ht*ue.gnormy-ue.gprojection,gt=ct*ue.gnormx+dt*ue.gnormy-ue.gprojection;if(mt<gt){hn.x=pt,hn.y=ht;var zt=-mt;pn.x=hn.x+ue.gnormx*zt,pn.y=hn.y+ue.gnormy*zt,sn=mt}else{hn.x=ct,hn.y=dt;var wt=-gt;pn.x=hn.x+ue.gnormx*wt,pn.y=hn.y+ue.gnormy*wt,sn=gt}}}else sn=1e100}else sn=1e100}}var Ot=sn+i,Ct=l*x.x+s*x.y;if(Ot<nape_Config.distanceThresholdCCD){if(r)break;var Et,Ut;Et=d.x-p.posx,Ut=d.y-p.posy;var Mt,Tt;Mt=f.x-h.posx,Tt=f.y-h.posy;var kt=Ct-p.sweep_angvel*(x.y*Et-x.x*Ut)+h.sweep_angvel*(x.y*Mt-x.x*Tt);if(kt>0&&(n.slipped=!0),kt<=0||Ot<.5*nape_Config.distanceThresholdCCD)break}var Dt=(c-Ct)*e;if(Dt<=0){b=-1;break}var St=Ot/Dt;if(St<1e-6&&(St=1e-6),(b+=St)>=1){var At=(b=1)*e,Pt=At-p.sweepTime;if(0!=Pt){p.sweepTime=At;var Vt=Pt;if(p.posx+=p.velx*Vt,p.posy+=p.vely*Vt,0!=p.angvel){var It=p.sweep_angvel*Pt;if(p.rot+=It,It*It>1e-4)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var Nt=It*It,Ft=1-.5*Nt,Rt=1-Nt*Nt/8,Lt=(Ft*p.axisx+It*p.axisy)*Rt;p.axisy=(Ft*p.axisy-It*p.axisx)*Rt,p.axisx=Lt}}}if(0==a.type)a.worldCOMx=p.posx+(p.axisy*a.localCOMx-p.axisx*a.localCOMy),a.worldCOMy=p.posy+(a.localCOMx*p.axisx+a.localCOMy*p.axisy);else{for(var Bt=a.polygon,Gt=Bt.lverts.next,jt=Bt.gverts.next;null!=jt;){var Kt=jt,Wt=Gt;Gt=Gt.next,Kt.x=p.posx+(p.axisy*Wt.x-p.axisx*Wt.y),Kt.y=p.posy+(Wt.x*p.axisx+Wt.y*p.axisy),jt=jt.next}var Yt=Bt.edges.head,Xt=Bt.gverts.next,Ht=Xt;for(Xt=Xt.next;null!=Xt;){var Zt=Xt,qt=Yt.elt;Yt=Yt.next,qt.gnormx=p.axisy*qt.lnormx-p.axisx*qt.lnormy,qt.gnormy=qt.lnormx*p.axisx+qt.lnormy*p.axisy,qt.gprojection=p.posx*qt.gnormx+p.posy*qt.gnormy+qt.lprojection,qt.tp0=Ht.y*qt.gnormx-Ht.x*qt.gnormy,qt.tp1=Zt.y*qt.gnormx-Zt.x*qt.gnormy,Ht=Zt,Xt=Xt.next}var $t=Bt.gverts.next,Qt=Yt.elt;Yt=Yt.next,Qt.gnormx=p.axisy*Qt.lnormx-p.axisx*Qt.lnormy,Qt.gnormy=Qt.lnormx*p.axisx+Qt.lnormy*p.axisy,Qt.gprojection=p.posx*Qt.gnormx+p.posy*Qt.gnormy+Qt.lprojection,Qt.tp0=Ht.y*Qt.gnormx-Ht.x*Qt.gnormy,Qt.tp1=$t.y*Qt.gnormx-$t.x*Qt.gnormy}var Jt=b*e,ni=Jt-h.sweepTime;if(0!=ni){h.sweepTime=Jt;var ei=ni;if(h.posx+=h.velx*ei,h.posy+=h.vely*ei,0!=h.angvel){var ti=h.sweep_angvel*ni;if(h.rot+=ti,ti*ti>1e-4)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var ii=ti*ti,ri=1-.5*ii,li=1-ii*ii/8,si=(ri*h.axisx+ti*h.axisy)*li;h.axisy=(ri*h.axisy-ti*h.axisx)*li,h.axisx=si}}}if(0==o.type)o.worldCOMx=h.posx+(h.axisy*o.localCOMx-h.axisx*o.localCOMy),o.worldCOMy=h.posy+(o.localCOMx*h.axisx+o.localCOMy*h.axisy);else{for(var ai=o.polygon,oi=ai.lverts.next,pi=ai.gverts.next;null!=pi;){var hi=pi,ui=oi;oi=oi.next,hi.x=h.posx+(h.axisy*ui.x-h.axisx*ui.y),hi.y=h.posy+(ui.x*h.axisx+ui.y*h.axisy),pi=pi.next}var _i=ai.edges.head,ci=ai.gverts.next,di=ci;for(ci=ci.next;null!=ci;){var fi=ci,xi=_i.elt;_i=_i.next,xi.gnormx=h.axisy*xi.lnormx-h.axisx*xi.lnormy,xi.gnormy=xi.lnormx*h.axisx+xi.lnormy*h.axisy,xi.gprojection=h.posx*xi.gnormx+h.posy*xi.gnormy+xi.lprojection,xi.tp0=di.y*xi.gnormx-di.x*xi.gnormy,xi.tp1=fi.y*xi.gnormx-fi.x*xi.gnormy,di=fi,ci=ci.next}var bi=ai.gverts.next,yi=_i.elt;_i=_i.next,yi.gnormx=h.axisy*yi.lnormx-h.axisx*yi.lnormy,yi.gnormy=yi.lnormx*h.axisx+yi.lnormy*h.axisy,yi.gprojection=h.posx*yi.gnormx+h.posy*yi.gnormy+yi.lprojection,yi.tp0=di.y*yi.gnormx-di.x*yi.gnormy,yi.tp1=bi.y*yi.gnormx-bi.x*yi.gnormy}var vi,mi=a,gi=o,zi=d,wi=f;if(0==mi.type&&0==gi.type){var Oi,Ci=mi.circle,Ei=gi.circle,Ui=0,Mi=0;Ui=Ei.worldCOMx-Ci.worldCOMx,Mi=Ei.worldCOMy-Ci.worldCOMy;var Ti=Math.sqrt(Ui*Ui+Mi*Mi);if((Oi=Ti-(Ci.radius+Ei.radius))<1e100){if(0==Ti)Ui=1,Mi=0;else{var ki=1/Ti;Ui*=ki,Mi*=ki}var Di=Ci.radius;zi.x=Ci.worldCOMx+Ui*Di,zi.y=Ci.worldCOMy+Mi*Di;var Si=-Ei.radius;wi.x=Ei.worldCOMx+Ui*Si,wi.y=Ei.worldCOMy+Mi*Si,x.x=Ui,x.y=Mi}vi=Oi}else{var Ai=!1;if(0==mi.type&&1==gi.type){var Pi=mi;mi=gi,gi=Pi;var Vi=zi;zi=wi,wi=Vi,Ai=!0}if(1==mi.type&&0==gi.type){for(var Ii=mi.polygon,Ni=gi.circle,Fi=-1e100,Ri=null,Li=Ii.edges.head;null!=Li;){var Bi=Li.elt,Gi=Bi.gnormx*Ni.worldCOMx+Bi.gnormy*Ni.worldCOMy-Bi.gprojection-Ni.radius;if(Gi>1e100){Fi=Gi;break}Gi>0?Gi>Fi&&(Fi=Gi,Ri=Bi):Fi<0&&Gi>Fi&&(Fi=Gi,Ri=Bi),Li=Li.next}if(Fi<1e100){var ji=Ri.gp0,Ki=Ri.gp1,Wi=Ni.worldCOMy*Ri.gnormx-Ni.worldCOMx*Ri.gnormy;if(Wi<=ji.y*Ri.gnormx-ji.x*Ri.gnormy){var Yi=0,Xi=0;Yi=Ni.worldCOMx-ji.x,Xi=Ni.worldCOMy-ji.y;var Hi=Math.sqrt(Yi*Yi+Xi*Xi);if((Fi=Hi-Ni.radius)<1e100){if(0==Hi)Yi=1,Xi=0;else{var Zi=1/Hi;Yi*=Zi,Xi*=Zi}zi.x=ji.x+0*Yi,zi.y=ji.y+0*Xi;var qi=-Ni.radius;wi.x=Ni.worldCOMx+Yi*qi,wi.y=Ni.worldCOMy+Xi*qi,x.x=Yi,x.y=Xi}}else if(Wi>=Ki.y*Ri.gnormx-Ki.x*Ri.gnormy){var $i=0,Qi=0;$i=Ni.worldCOMx-Ki.x,Qi=Ni.worldCOMy-Ki.y;var Ji=Math.sqrt($i*$i+Qi*Qi);if((Fi=Ji-Ni.radius)<1e100){if(0==Ji)$i=1,Qi=0;else{var nr=1/Ji;$i*=nr,Qi*=nr}zi.x=Ki.x+0*$i,zi.y=Ki.y+0*Qi;var er=-Ni.radius;wi.x=Ni.worldCOMx+$i*er,wi.y=Ni.worldCOMy+Qi*er,x.x=$i,x.y=Qi}}else{var tr=-Ni.radius;wi.x=Ni.worldCOMx+Ri.gnormx*tr,wi.y=Ni.worldCOMy+Ri.gnormy*tr;var ir=-Fi;zi.x=wi.x+Ri.gnormx*ir,zi.y=wi.y+Ri.gnormy*ir,x.x=Ri.gnormx,x.y=Ri.gnormy}}Ai&&(x.x=-x.x,x.y=-x.y),vi=Fi}else{for(var rr=mi.polygon,lr=gi.polygon,sr=-1e100,ar=null,or=null,pr=0,hr=rr.edges.head;null!=hr;){for(var ur=hr.elt,_r=1e100,cr=lr.gverts.next;null!=cr;){var dr=cr,fr=ur.gnormx*dr.x+ur.gnormy*dr.y;fr<_r&&(_r=fr),cr=cr.next}if((_r-=ur.gprojection)>1e100){sr=_r;break}_r>0?_r>sr&&(sr=_r,ar=ur,pr=1):sr<0&&_r>sr&&(sr=_r,ar=ur,pr=1),hr=hr.next}if(sr<1e100){for(var xr=lr.edges.head;null!=xr;){for(var br=xr.elt,yr=1e100,vr=rr.gverts.next;null!=vr;){var mr=vr,gr=br.gnormx*mr.x+br.gnormy*mr.y;gr<yr&&(yr=gr),vr=vr.next}if((yr-=br.gprojection)>1e100){sr=yr;break}yr>0?yr>sr&&(sr=yr,or=br,pr=2):sr<0&&yr>sr&&(sr=yr,or=br,pr=2),xr=xr.next}if(sr<1e100){var zr,wr;if(1==pr)rr,zr=lr,wr=ar;else{lr,zr=rr,wr=or;var Or=zi;zi=wi,wi=Or,Ai=!Ai}for(var Cr=null,Er=1e100,Ur=zr.edges.head;null!=Ur;){var Mr=Ur.elt,Tr=wr.gnormx*Mr.gnormx+wr.gnormy*Mr.gnormy;Tr<Er&&(Er=Tr,Cr=Mr),Ur=Ur.next}if(Ai?(x.x=-wr.gnormx,x.y=-wr.gnormy):(x.x=wr.gnormx,x.y=wr.gnormy),sr>=0){var kr,Dr,Sr,Ar,Pr=wr.gp0,Vr=wr.gp1,Ir=Cr.gp0,Nr=Cr.gp1,Fr=1/((kr=Vr.x-Pr.x)*kr+(Dr=Vr.y-Pr.y)*Dr),Rr=1/((Sr=Nr.x-Ir.x)*Sr+(Ar=Nr.y-Ir.y)*Ar),Lr=-(kr*(Pr.x-Ir.x)+Dr*(Pr.y-Ir.y))*Fr,Br=-(kr*(Pr.x-Nr.x)+Dr*(Pr.y-Nr.y))*Fr,Gr=-(Sr*(Ir.x-Pr.x)+Ar*(Ir.y-Pr.y))*Rr,jr=-(Sr*(Ir.x-Vr.x)+Ar*(Ir.y-Vr.y))*Rr;Lr<0?Lr=0:Lr>1&&(Lr=1),Br<0?Br=0:Br>1&&(Br=1),Gr<0?Gr=0:Gr>1&&(Gr=1),jr<0?jr=0:jr>1&&(jr=1);var Kr,Wr,Yr=Lr;Kr=Pr.x+kr*Yr,Wr=Pr.y+Dr*Yr;var Xr,Hr,Zr=Br;Xr=Pr.x+kr*Zr,Hr=Pr.y+Dr*Zr;var qr,$r,Qr=Gr;qr=Ir.x+Sr*Qr,$r=Ir.y+Ar*Qr;var Jr,nl,el=jr;Jr=Ir.x+Sr*el,nl=Ir.y+Ar*el;var tl,il,rl,ll,sl,al,ol,pl,hl=(tl=Kr-Ir.x)*tl+(il=Wr-Ir.y)*il,ul=(rl=Xr-Nr.x)*rl+(ll=Hr-Nr.y)*ll,_l=(sl=qr-Pr.x)*sl+(al=$r-Pr.y)*al,cl=(ol=Jr-Vr.x)*ol+(pl=nl-Vr.y)*pl,dl=0,fl=0,xl=null;hl<ul?(dl=Kr,fl=Wr,xl=Ir):(dl=Xr,fl=Hr,xl=Nr,hl=ul);var bl=0,yl=0,vl=null;if(_l<cl?(bl=qr,yl=$r,vl=Pr):(bl=Jr,yl=nl,vl=Vr,_l=cl),hl<_l?(zi.x=dl,zi.y=fl,wi.x=xl.x,wi.y=xl.y,sr=Math.sqrt(hl)):(wi.x=bl,wi.y=yl,zi.x=vl.x,zi.y=vl.y,sr=Math.sqrt(_l)),0!=sr){x.x=wi.x-zi.x,x.y=wi.y-zi.y;var ml=1/sr;x.x*=ml,x.y*=ml,Ai&&(x.x=-x.x,x.y=-x.y)}vi=sr}else{var gl=0,zl=0;gl=Cr.gp0.x,zl=Cr.gp0.y;var wl,Ol,Cl=0,El=0;wl=(Cl=Cr.gp1.x)-gl,Ol=(El=Cr.gp1.y)-zl;var Ul=wr.gnormy*gl-wr.gnormx*zl,Ml=wr.gnormy*Cl-wr.gnormx*El,Tl=1/(Ml-Ul),kl=(-wr.tp1-Ul)*Tl;if(kl>nape_Config.epsilon){gl+=wl*kl,zl+=Ol*kl}var Dl=(-wr.tp0-Ml)*Tl;if(Dl<-nape_Config.epsilon){Cl+=wl*Dl,El+=Ol*Dl}var Sl=gl*wr.gnormx+zl*wr.gnormy-wr.gprojection,Al=Cl*wr.gnormx+El*wr.gnormy-wr.gprojection;if(Sl<Al){wi.x=gl,wi.y=zl;var Pl=-Sl;zi.x=wi.x+wr.gnormx*Pl,zi.y=wi.y+wr.gnormy*Pl,vi=Sl}else{wi.x=Cl,wi.y=El;var Vl=-Al;zi.x=wi.x+wr.gnormx*Vl,zi.y=wi.y+wr.gnormy*Vl,vi=Al}}}else vi=1e100}else vi=1e100}}var Il=vi+i,Nl=l*x.x+s*x.y;if(Il<nape_Config.distanceThresholdCCD){if(r)break;var Fl,Rl;Fl=d.x-p.posx,Rl=d.y-p.posy;var Ll,Bl;Ll=f.x-h.posx,Bl=f.y-h.posy;var Gl=Nl-p.sweep_angvel*(x.y*Fl-x.x*Rl)+h.sweep_angvel*(x.y*Ll-x.x*Bl);if(Gl>0&&(n.slipped=!0),Gl<=0||Il<.5*nape_Config.distanceThresholdCCD)break}b=-1;break}if(++y>=40){Ot>i&&(n.failed=!0);break}}n.toi=b},zpp_$nape_geom_ZPP_$SweepDistance.staticSweep=function(n,e,t,i){var r,l,s=n.s1,a=n.s2,o=s.body;a.body;r=-o.velx,l=-o.vely;var p=o.sweep_angvel;p<0&&(p=-p);for(var h=s.sweepCoef*p,u=n.c1,_=n.c2,c=n.axis,d=t,f=0;;){var x=d*e,b=x-o.sweepTime;if(0!=b){o.sweepTime=x;var y=b;if(o.posx+=o.velx*y,o.posy+=o.vely*y,0!=o.angvel){var v=o.sweep_angvel*b;if(o.rot+=v,v*v>1e-4)o.axisx=Math.sin(o.rot),o.axisy=Math.cos(o.rot);else{var m=v*v,g=1-.5*m,z=1-m*m/8,w=(g*o.axisx+v*o.axisy)*z;o.axisy=(g*o.axisy-v*o.axisx)*z,o.axisx=w}}}if(0==s.type)s.worldCOMx=o.posx+(o.axisy*s.localCOMx-o.axisx*s.localCOMy),s.worldCOMy=o.posy+(s.localCOMx*o.axisx+s.localCOMy*o.axisy);else{for(var O=s.polygon,C=O.lverts.next,E=O.gverts.next;null!=E;){var U=E,M=C;C=C.next,U.x=o.posx+(o.axisy*M.x-o.axisx*M.y),U.y=o.posy+(M.x*o.axisx+M.y*o.axisy),E=E.next}var T=O.edges.head,k=O.gverts.next,D=k;for(k=k.next;null!=k;){var S=k,A=T.elt;T=T.next,A.gnormx=o.axisy*A.lnormx-o.axisx*A.lnormy,A.gnormy=A.lnormx*o.axisx+A.lnormy*o.axisy,A.gprojection=o.posx*A.gnormx+o.posy*A.gnormy+A.lprojection,A.tp0=D.y*A.gnormx-D.x*A.gnormy,A.tp1=S.y*A.gnormx-S.x*A.gnormy,D=S,k=k.next}var P=O.gverts.next,V=T.elt;T=T.next,V.gnormx=o.axisy*V.lnormx-o.axisx*V.lnormy,V.gnormy=V.lnormx*o.axisx+V.lnormy*o.axisy,V.gprojection=o.posx*V.gnormx+o.posy*V.gnormy+V.lprojection,V.tp0=D.y*V.gnormx-D.x*V.gnormy,V.tp1=P.y*V.gnormx-P.x*V.gnormy}var I,N=s,F=a,R=u,L=_;if(0==N.type&&0==F.type){var B,G=N.circle,j=F.circle,K=0,W=0;K=j.worldCOMx-G.worldCOMx,W=j.worldCOMy-G.worldCOMy;var Y=Math.sqrt(K*K+W*W);if((B=Y-(G.radius+j.radius))<1e100){if(0==Y)K=1,W=0;else{var X=1/Y;K*=X,W*=X}var H=G.radius;R.x=G.worldCOMx+K*H,R.y=G.worldCOMy+W*H;var Z=-j.radius;L.x=j.worldCOMx+K*Z,L.y=j.worldCOMy+W*Z,c.x=K,c.y=W}I=B}else{var q=!1;if(0==N.type&&1==F.type){var $=N;N=F,F=$;var Q=R;R=L,L=Q,q=!0}if(1==N.type&&0==F.type){for(var J=N.polygon,nn=F.circle,en=-1e100,tn=null,rn=J.edges.head;null!=rn;){var ln=rn.elt,sn=ln.gnormx*nn.worldCOMx+ln.gnormy*nn.worldCOMy-ln.gprojection-nn.radius;if(sn>1e100){en=sn;break}sn>0?sn>en&&(en=sn,tn=ln):en<0&&sn>en&&(en=sn,tn=ln),rn=rn.next}if(en<1e100){var an=tn.gp0,on=tn.gp1,pn=nn.worldCOMy*tn.gnormx-nn.worldCOMx*tn.gnormy;if(pn<=an.y*tn.gnormx-an.x*tn.gnormy){var hn=0,un=0;hn=nn.worldCOMx-an.x,un=nn.worldCOMy-an.y;var _n=Math.sqrt(hn*hn+un*un);if((en=_n-nn.radius)<1e100){if(0==_n)hn=1,un=0;else{var cn=1/_n;hn*=cn,un*=cn}R.x=an.x+0*hn,R.y=an.y+0*un;var dn=-nn.radius;L.x=nn.worldCOMx+hn*dn,L.y=nn.worldCOMy+un*dn,c.x=hn,c.y=un}}else if(pn>=on.y*tn.gnormx-on.x*tn.gnormy){var xn=0,bn=0;xn=nn.worldCOMx-on.x,bn=nn.worldCOMy-on.y;var yn=Math.sqrt(xn*xn+bn*bn);if((en=yn-nn.radius)<1e100){if(0==yn)xn=1,bn=0;else{var vn=1/yn;xn*=vn,bn*=vn}R.x=on.x+0*xn,R.y=on.y+0*bn;var mn=-nn.radius;L.x=nn.worldCOMx+xn*mn,L.y=nn.worldCOMy+bn*mn,c.x=xn,c.y=bn}}else{var gn=-nn.radius;L.x=nn.worldCOMx+tn.gnormx*gn,L.y=nn.worldCOMy+tn.gnormy*gn;var zn=-en;R.x=L.x+tn.gnormx*zn,R.y=L.y+tn.gnormy*zn,c.x=tn.gnormx,c.y=tn.gnormy}}q&&(c.x=-c.x,c.y=-c.y),I=en}else{for(var wn=N.polygon,On=F.polygon,Cn=-1e100,En=null,Un=null,Mn=0,Tn=wn.edges.head;null!=Tn;){for(var kn=Tn.elt,Dn=1e100,Sn=On.gverts.next;null!=Sn;){var An=Sn,Pn=kn.gnormx*An.x+kn.gnormy*An.y;Pn<Dn&&(Dn=Pn),Sn=Sn.next}if((Dn-=kn.gprojection)>1e100){Cn=Dn;break}Dn>0?Dn>Cn&&(Cn=Dn,En=kn,Mn=1):Cn<0&&Dn>Cn&&(Cn=Dn,En=kn,Mn=1),Tn=Tn.next}if(Cn<1e100){for(var Vn=On.edges.head;null!=Vn;){for(var In=Vn.elt,Nn=1e100,Fn=wn.gverts.next;null!=Fn;){var Rn=Fn,Ln=In.gnormx*Rn.x+In.gnormy*Rn.y;Ln<Nn&&(Nn=Ln),Fn=Fn.next}if((Nn-=In.gprojection)>1e100){Cn=Nn;break}Nn>0?Nn>Cn&&(Cn=Nn,Un=In,Mn=2):Cn<0&&Nn>Cn&&(Cn=Nn,Un=In,Mn=2),Vn=Vn.next}if(Cn<1e100){var Bn,Gn;if(1==Mn)wn,Bn=On,Gn=En;else{On,Bn=wn,Gn=Un;var jn=R;R=L,L=jn,q=!q}for(var Kn=null,Wn=1e100,Yn=Bn.edges.head;null!=Yn;){var Xn=Yn.elt,Hn=Gn.gnormx*Xn.gnormx+Gn.gnormy*Xn.gnormy;Hn<Wn&&(Wn=Hn,Kn=Xn),Yn=Yn.next}if(q?(c.x=-Gn.gnormx,c.y=-Gn.gnormy):(c.x=Gn.gnormx,c.y=Gn.gnormy),Cn>=0){var Zn,qn,$n,Qn,Jn=Gn.gp0,ne=Gn.gp1,ee=Kn.gp0,te=Kn.gp1,ie=1/((Zn=ne.x-Jn.x)*Zn+(qn=ne.y-Jn.y)*qn),re=1/(($n=te.x-ee.x)*$n+(Qn=te.y-ee.y)*Qn),le=-(Zn*(Jn.x-ee.x)+qn*(Jn.y-ee.y))*ie,se=-(Zn*(Jn.x-te.x)+qn*(Jn.y-te.y))*ie,ae=-($n*(ee.x-Jn.x)+Qn*(ee.y-Jn.y))*re,oe=-($n*(ee.x-ne.x)+Qn*(ee.y-ne.y))*re;le<0?le=0:le>1&&(le=1),se<0?se=0:se>1&&(se=1),ae<0?ae=0:ae>1&&(ae=1),oe<0?oe=0:oe>1&&(oe=1);var pe,he,ue=le;pe=Jn.x+Zn*ue,he=Jn.y+qn*ue;var _e,ce,de=se;_e=Jn.x+Zn*de,ce=Jn.y+qn*de;var fe,xe,be=ae;fe=ee.x+$n*be,xe=ee.y+Qn*be;var ye,ve,me=oe;ye=ee.x+$n*me,ve=ee.y+Qn*me;var ge,ze,we,Oe,Ce,Ee,Ue,Me,Te=(ge=pe-ee.x)*ge+(ze=he-ee.y)*ze,ke=(we=_e-te.x)*we+(Oe=ce-te.y)*Oe,De=(Ce=fe-Jn.x)*Ce+(Ee=xe-Jn.y)*Ee,Se=(Ue=ye-ne.x)*Ue+(Me=ve-ne.y)*Me,Ae=0,Pe=0,Ve=null;Te<ke?(Ae=pe,Pe=he,Ve=ee):(Ae=_e,Pe=ce,Ve=te,Te=ke);var Ie=0,Ne=0,Fe=null;if(De<Se?(Ie=fe,Ne=xe,Fe=Jn):(Ie=ye,Ne=ve,Fe=ne,De=Se),Te<De?(R.x=Ae,R.y=Pe,L.x=Ve.x,L.y=Ve.y,Cn=Math.sqrt(Te)):(L.x=Ie,L.y=Ne,R.x=Fe.x,R.y=Fe.y,Cn=Math.sqrt(De)),0!=Cn){c.x=L.x-R.x,c.y=L.y-R.y;var Re=1/Cn;c.x*=Re,c.y*=Re,q&&(c.x=-c.x,c.y=-c.y)}I=Cn}else{var Le=0,Be=0;Le=Kn.gp0.x,Be=Kn.gp0.y;var Ge,je,Ke=0,We=0;Ge=(Ke=Kn.gp1.x)-Le,je=(We=Kn.gp1.y)-Be;var Ye=Gn.gnormy*Le-Gn.gnormx*Be,Xe=Gn.gnormy*Ke-Gn.gnormx*We,He=1/(Xe-Ye),Ze=(-Gn.tp1-Ye)*He;if(Ze>nape_Config.epsilon){Le+=Ge*Ze,Be+=je*Ze}var qe=(-Gn.tp0-Xe)*He;if(qe<-nape_Config.epsilon){Ke+=Ge*qe,We+=je*qe}var $e=Le*Gn.gnormx+Be*Gn.gnormy-Gn.gprojection,Qe=Ke*Gn.gnormx+We*Gn.gnormy-Gn.gprojection;if($e<Qe){L.x=Le,L.y=Be;var Je=-$e;R.x=L.x+Gn.gnormx*Je,R.y=L.y+Gn.gnormy*Je,I=$e}else{L.x=Ke,L.y=We;var nt=-Qe;R.x=L.x+Gn.gnormx*nt,R.y=L.y+Gn.gnormy*nt,I=Qe}}}else I=1e100}else I=1e100}}var et=I+i,tt=r*c.x+l*c.y;if(et<nape_Config.distanceThresholdCCD){var it,rt;it=u.x-o.posx,rt=u.y-o.posy;var lt=tt-o.sweep_angvel*(c.y*it-c.x*rt);if(lt>0&&(n.slipped=!0),lt<=0||et<.5*nape_Config.distanceThresholdCCD)break}var st=(h-tt)*e;if(st<=0){d=-1;break}var at=et/st;if(at<1e-6&&(at=1e-6),(d+=at)>=1){var ot=(d=1)*e,pt=ot-o.sweepTime;if(0!=pt){o.sweepTime=ot;var ht=pt;if(o.posx+=o.velx*ht,o.posy+=o.vely*ht,0!=o.angvel){var ut=o.sweep_angvel*pt;if(o.rot+=ut,ut*ut>1e-4)o.axisx=Math.sin(o.rot),o.axisy=Math.cos(o.rot);else{var _t=ut*ut,ct=1-.5*_t,dt=1-_t*_t/8,ft=(ct*o.axisx+ut*o.axisy)*dt;o.axisy=(ct*o.axisy-ut*o.axisx)*dt,o.axisx=ft}}}if(0==s.type)s.worldCOMx=o.posx+(o.axisy*s.localCOMx-o.axisx*s.localCOMy),s.worldCOMy=o.posy+(s.localCOMx*o.axisx+s.localCOMy*o.axisy);else{for(var xt=s.polygon,bt=xt.lverts.next,yt=xt.gverts.next;null!=yt;){var vt=yt,mt=bt;bt=bt.next,vt.x=o.posx+(o.axisy*mt.x-o.axisx*mt.y),vt.y=o.posy+(mt.x*o.axisx+mt.y*o.axisy),yt=yt.next}var gt=xt.edges.head,zt=xt.gverts.next,wt=zt;for(zt=zt.next;null!=zt;){var Ot=zt,Ct=gt.elt;gt=gt.next,Ct.gnormx=o.axisy*Ct.lnormx-o.axisx*Ct.lnormy,Ct.gnormy=Ct.lnormx*o.axisx+Ct.lnormy*o.axisy,Ct.gprojection=o.posx*Ct.gnormx+o.posy*Ct.gnormy+Ct.lprojection,Ct.tp0=wt.y*Ct.gnormx-wt.x*Ct.gnormy,Ct.tp1=Ot.y*Ct.gnormx-Ot.x*Ct.gnormy,wt=Ot,zt=zt.next}var Et=xt.gverts.next,Ut=gt.elt;gt=gt.next,Ut.gnormx=o.axisy*Ut.lnormx-o.axisx*Ut.lnormy,Ut.gnormy=Ut.lnormx*o.axisx+Ut.lnormy*o.axisy,Ut.gprojection=o.posx*Ut.gnormx+o.posy*Ut.gnormy+Ut.lprojection,Ut.tp0=wt.y*Ut.gnormx-wt.x*Ut.gnormy,Ut.tp1=Et.y*Ut.gnormx-Et.x*Ut.gnormy}var Mt,Tt=s,kt=a,Dt=u,St=_;if(0==Tt.type&&0==kt.type){var At,Pt=Tt.circle,Vt=kt.circle,It=0,Nt=0;It=Vt.worldCOMx-Pt.worldCOMx,Nt=Vt.worldCOMy-Pt.worldCOMy;var Ft=Math.sqrt(It*It+Nt*Nt);if((At=Ft-(Pt.radius+Vt.radius))<1e100){if(0==Ft)It=1,Nt=0;else{var Rt=1/Ft;It*=Rt,Nt*=Rt}var Lt=Pt.radius;Dt.x=Pt.worldCOMx+It*Lt,Dt.y=Pt.worldCOMy+Nt*Lt;var Bt=-Vt.radius;St.x=Vt.worldCOMx+It*Bt,St.y=Vt.worldCOMy+Nt*Bt,c.x=It,c.y=Nt}Mt=At}else{var Gt=!1;if(0==Tt.type&&1==kt.type){var jt=Tt;Tt=kt,kt=jt;var Kt=Dt;Dt=St,St=Kt,Gt=!0}if(1==Tt.type&&0==kt.type){for(var Wt=Tt.polygon,Yt=kt.circle,Xt=-1e100,Ht=null,Zt=Wt.edges.head;null!=Zt;){var qt=Zt.elt,$t=qt.gnormx*Yt.worldCOMx+qt.gnormy*Yt.worldCOMy-qt.gprojection-Yt.radius;if($t>1e100){Xt=$t;break}$t>0?$t>Xt&&(Xt=$t,Ht=qt):Xt<0&&$t>Xt&&(Xt=$t,Ht=qt),Zt=Zt.next}if(Xt<1e100){var Qt=Ht.gp0,Jt=Ht.gp1,ni=Yt.worldCOMy*Ht.gnormx-Yt.worldCOMx*Ht.gnormy;if(ni<=Qt.y*Ht.gnormx-Qt.x*Ht.gnormy){var ei=0,ti=0;ei=Yt.worldCOMx-Qt.x,ti=Yt.worldCOMy-Qt.y;var ii=Math.sqrt(ei*ei+ti*ti);if((Xt=ii-Yt.radius)<1e100){if(0==ii)ei=1,ti=0;else{var ri=1/ii;ei*=ri,ti*=ri}Dt.x=Qt.x+0*ei,Dt.y=Qt.y+0*ti;var li=-Yt.radius;St.x=Yt.worldCOMx+ei*li,St.y=Yt.worldCOMy+ti*li,c.x=ei,c.y=ti}}else if(ni>=Jt.y*Ht.gnormx-Jt.x*Ht.gnormy){var si=0,ai=0;si=Yt.worldCOMx-Jt.x,ai=Yt.worldCOMy-Jt.y;var oi=Math.sqrt(si*si+ai*ai);if((Xt=oi-Yt.radius)<1e100){if(0==oi)si=1,ai=0;else{var pi=1/oi;si*=pi,ai*=pi}Dt.x=Jt.x+0*si,Dt.y=Jt.y+0*ai;var hi=-Yt.radius;St.x=Yt.worldCOMx+si*hi,St.y=Yt.worldCOMy+ai*hi,c.x=si,c.y=ai}}else{var ui=-Yt.radius;St.x=Yt.worldCOMx+Ht.gnormx*ui,St.y=Yt.worldCOMy+Ht.gnormy*ui;var _i=-Xt;Dt.x=St.x+Ht.gnormx*_i,Dt.y=St.y+Ht.gnormy*_i,c.x=Ht.gnormx,c.y=Ht.gnormy}}Gt&&(c.x=-c.x,c.y=-c.y),Mt=Xt}else{for(var ci=Tt.polygon,di=kt.polygon,fi=-1e100,xi=null,bi=null,yi=0,vi=ci.edges.head;null!=vi;){for(var mi=vi.elt,gi=1e100,zi=di.gverts.next;null!=zi;){var wi=zi,Oi=mi.gnormx*wi.x+mi.gnormy*wi.y;Oi<gi&&(gi=Oi),zi=zi.next}if((gi-=mi.gprojection)>1e100){fi=gi;break}gi>0?gi>fi&&(fi=gi,xi=mi,yi=1):fi<0&&gi>fi&&(fi=gi,xi=mi,yi=1),vi=vi.next}if(fi<1e100){for(var Ci=di.edges.head;null!=Ci;){for(var Ei=Ci.elt,Ui=1e100,Mi=ci.gverts.next;null!=Mi;){var Ti=Mi,ki=Ei.gnormx*Ti.x+Ei.gnormy*Ti.y;ki<Ui&&(Ui=ki),Mi=Mi.next}if((Ui-=Ei.gprojection)>1e100){fi=Ui;break}Ui>0?Ui>fi&&(fi=Ui,bi=Ei,yi=2):fi<0&&Ui>fi&&(fi=Ui,bi=Ei,yi=2),Ci=Ci.next}if(fi<1e100){var Di,Si;if(1==yi)ci,Di=di,Si=xi;else{di,Di=ci,Si=bi;var Ai=Dt;Dt=St,St=Ai,Gt=!Gt}for(var Pi=null,Vi=1e100,Ii=Di.edges.head;null!=Ii;){var Ni=Ii.elt,Fi=Si.gnormx*Ni.gnormx+Si.gnormy*Ni.gnormy;Fi<Vi&&(Vi=Fi,Pi=Ni),Ii=Ii.next}if(Gt?(c.x=-Si.gnormx,c.y=-Si.gnormy):(c.x=Si.gnormx,c.y=Si.gnormy),fi>=0){var Ri,Li,Bi,Gi,ji=Si.gp0,Ki=Si.gp1,Wi=Pi.gp0,Yi=Pi.gp1,Xi=1/((Ri=Ki.x-ji.x)*Ri+(Li=Ki.y-ji.y)*Li),Hi=1/((Bi=Yi.x-Wi.x)*Bi+(Gi=Yi.y-Wi.y)*Gi),Zi=-(Ri*(ji.x-Wi.x)+Li*(ji.y-Wi.y))*Xi,qi=-(Ri*(ji.x-Yi.x)+Li*(ji.y-Yi.y))*Xi,$i=-(Bi*(Wi.x-ji.x)+Gi*(Wi.y-ji.y))*Hi,Qi=-(Bi*(Wi.x-Ki.x)+Gi*(Wi.y-Ki.y))*Hi;Zi<0?Zi=0:Zi>1&&(Zi=1),qi<0?qi=0:qi>1&&(qi=1),$i<0?$i=0:$i>1&&($i=1),Qi<0?Qi=0:Qi>1&&(Qi=1);var Ji,nr,er=Zi;Ji=ji.x+Ri*er,nr=ji.y+Li*er;var tr,ir,rr=qi;tr=ji.x+Ri*rr,ir=ji.y+Li*rr;var lr,sr,ar=$i;lr=Wi.x+Bi*ar,sr=Wi.y+Gi*ar;var or,pr,hr=Qi;or=Wi.x+Bi*hr,pr=Wi.y+Gi*hr;var ur,_r,cr,dr,fr,xr,br,yr,vr=(ur=Ji-Wi.x)*ur+(_r=nr-Wi.y)*_r,mr=(cr=tr-Yi.x)*cr+(dr=ir-Yi.y)*dr,gr=(fr=lr-ji.x)*fr+(xr=sr-ji.y)*xr,zr=(br=or-Ki.x)*br+(yr=pr-Ki.y)*yr,wr=0,Or=0,Cr=null;vr<mr?(wr=Ji,Or=nr,Cr=Wi):(wr=tr,Or=ir,Cr=Yi,vr=mr);var Er=0,Ur=0,Mr=null;if(gr<zr?(Er=lr,Ur=sr,Mr=ji):(Er=or,Ur=pr,Mr=Ki,gr=zr),vr<gr?(Dt.x=wr,Dt.y=Or,St.x=Cr.x,St.y=Cr.y,fi=Math.sqrt(vr)):(St.x=Er,St.y=Ur,Dt.x=Mr.x,Dt.y=Mr.y,fi=Math.sqrt(gr)),0!=fi){c.x=St.x-Dt.x,c.y=St.y-Dt.y;var Tr=1/fi;c.x*=Tr,c.y*=Tr,Gt&&(c.x=-c.x,c.y=-c.y)}Mt=fi}else{var kr=0,Dr=0;kr=Pi.gp0.x,Dr=Pi.gp0.y;var Sr,Ar,Pr=0,Vr=0;Sr=(Pr=Pi.gp1.x)-kr,Ar=(Vr=Pi.gp1.y)-Dr;var Ir=Si.gnormy*kr-Si.gnormx*Dr,Nr=Si.gnormy*Pr-Si.gnormx*Vr,Fr=1/(Nr-Ir),Rr=(-Si.tp1-Ir)*Fr;if(Rr>nape_Config.epsilon){kr+=Sr*Rr,Dr+=Ar*Rr}var Lr=(-Si.tp0-Nr)*Fr;if(Lr<-nape_Config.epsilon){Pr+=Sr*Lr,Vr+=Ar*Lr}var Br=kr*Si.gnormx+Dr*Si.gnormy-Si.gprojection,Gr=Pr*Si.gnormx+Vr*Si.gnormy-Si.gprojection;if(Br<Gr){St.x=kr,St.y=Dr;var jr=-Br;Dt.x=St.x+Si.gnormx*jr,Dt.y=St.y+Si.gnormy*jr,Mt=Br}else{St.x=Pr,St.y=Vr;var Kr=-Gr;Dt.x=St.x+Si.gnormx*Kr,Dt.y=St.y+Si.gnormy*Kr,Mt=Gr}}}else Mt=1e100}else Mt=1e100}}var Wr=Mt+i,Yr=r*c.x+l*c.y;if(Wr<nape_Config.distanceThresholdCCD){var Xr,Hr;Xr=u.x-o.posx,Hr=u.y-o.posy;var Zr=Yr-o.sweep_angvel*(c.y*Xr-c.x*Hr);if(Zr>0&&(n.slipped=!0),Zr<=0||Wr<.5*nape_Config.distanceThresholdCCD)break}d=-1;break}if(++f>=40){et>i&&(n.failed=!0);break}}n.toi=d},zpp_$nape_geom_ZPP_$SweepDistance.distanceBody=function(n,e,t,i){var r,l,s,a;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?s=new zpp_$nape_geom_ZPP_$Vec2:(s=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=s.next,s.next=null),s.weak=!1;for(var o=1e100,p=n.shapes.head;null!=p;){for(var h=p.elt,u=e.shapes.head;null!=u;){var _,c=h,d=u.elt,f=r,x=l,b=o;if(null==b&&(b=1e100),0==c.type&&0==d.type){var y,v=c.circle,m=d.circle,g=0,z=0;g=m.worldCOMx-v.worldCOMx,z=m.worldCOMy-v.worldCOMy;var w=Math.sqrt(g*g+z*z);if((y=w-(v.radius+m.radius))<b){if(0==w)g=1,z=0;else{var O=1/w;g*=O,z*=O}var C=v.radius;f.x=v.worldCOMx+g*C,f.y=v.worldCOMy+z*C;var E=-m.radius;x.x=m.worldCOMx+g*E,x.y=m.worldCOMy+z*E,s.x=g,s.y=z}_=y}else{var U=!1;if(0==c.type&&1==d.type){var M=c;c=d,d=M;var T=f;f=x,x=T,U=!0}if(1==c.type&&0==d.type){for(var k=c.polygon,D=d.circle,S=-1e100,A=null,P=k.edges.head;null!=P;){var V=P.elt,I=V.gnormx*D.worldCOMx+V.gnormy*D.worldCOMy-V.gprojection-D.radius;if(I>b){S=I;break}I>0?I>S&&(S=I,A=V):S<0&&I>S&&(S=I,A=V),P=P.next}if(S<b){var N=A.gp0,F=A.gp1,R=D.worldCOMy*A.gnormx-D.worldCOMx*A.gnormy;if(R<=N.y*A.gnormx-N.x*A.gnormy){var L=0,B=0;L=D.worldCOMx-N.x,B=D.worldCOMy-N.y;var G=Math.sqrt(L*L+B*B);if((S=G-D.radius)<b){if(0==G)L=1,B=0;else{var j=1/G;L*=j,B*=j}f.x=N.x+0*L,f.y=N.y+0*B;var K=-D.radius;x.x=D.worldCOMx+L*K,x.y=D.worldCOMy+B*K,s.x=L,s.y=B}}else if(R>=F.y*A.gnormx-F.x*A.gnormy){var W=0,Y=0;W=D.worldCOMx-F.x,Y=D.worldCOMy-F.y;var X=Math.sqrt(W*W+Y*Y);if((S=X-D.radius)<b){if(0==X)W=1,Y=0;else{var H=1/X;W*=H,Y*=H}f.x=F.x+0*W,f.y=F.y+0*Y;var Z=-D.radius;x.x=D.worldCOMx+W*Z,x.y=D.worldCOMy+Y*Z,s.x=W,s.y=Y}}else{var q=-D.radius;x.x=D.worldCOMx+A.gnormx*q,x.y=D.worldCOMy+A.gnormy*q;var $=-S;f.x=x.x+A.gnormx*$,f.y=x.y+A.gnormy*$,s.x=A.gnormx,s.y=A.gnormy}}U&&(s.x=-s.x,s.y=-s.y),_=S}else{for(var Q=c.polygon,J=d.polygon,nn=-1e100,en=null,tn=null,rn=0,ln=Q.edges.head;null!=ln;){for(var sn=ln.elt,an=1e100,on=J.gverts.next;null!=on;){var pn=on,hn=sn.gnormx*pn.x+sn.gnormy*pn.y;hn<an&&(an=hn),on=on.next}if((an-=sn.gprojection)>b){nn=an;break}an>0?an>nn&&(nn=an,en=sn,rn=1):nn<0&&an>nn&&(nn=an,en=sn,rn=1),ln=ln.next}if(nn<b){for(var un=J.edges.head;null!=un;){for(var _n=un.elt,cn=1e100,dn=Q.gverts.next;null!=dn;){var xn=dn,bn=_n.gnormx*xn.x+_n.gnormy*xn.y;bn<cn&&(cn=bn),dn=dn.next}if((cn-=_n.gprojection)>b){nn=cn;break}cn>0?cn>nn&&(nn=cn,tn=_n,rn=2):nn<0&&cn>nn&&(nn=cn,tn=_n,rn=2),un=un.next}if(nn<b){var yn,vn;if(1==rn)Q,yn=J,vn=en;else{J,yn=Q,vn=tn;var mn=f;f=x,x=mn,U=!U}for(var gn=null,zn=1e100,wn=yn.edges.head;null!=wn;){var On=wn.elt,Cn=vn.gnormx*On.gnormx+vn.gnormy*On.gnormy;Cn<zn&&(zn=Cn,gn=On),wn=wn.next}if(U?(s.x=-vn.gnormx,s.y=-vn.gnormy):(s.x=vn.gnormx,s.y=vn.gnormy),nn>=0){var En,Un,Mn,Tn,kn=vn.gp0,Dn=vn.gp1,Sn=gn.gp0,An=gn.gp1,Pn=1/((En=Dn.x-kn.x)*En+(Un=Dn.y-kn.y)*Un),Vn=1/((Mn=An.x-Sn.x)*Mn+(Tn=An.y-Sn.y)*Tn),In=-(En*(kn.x-Sn.x)+Un*(kn.y-Sn.y))*Pn,Nn=-(En*(kn.x-An.x)+Un*(kn.y-An.y))*Pn,Fn=-(Mn*(Sn.x-kn.x)+Tn*(Sn.y-kn.y))*Vn,Rn=-(Mn*(Sn.x-Dn.x)+Tn*(Sn.y-Dn.y))*Vn;In<0?In=0:In>1&&(In=1),Nn<0?Nn=0:Nn>1&&(Nn=1),Fn<0?Fn=0:Fn>1&&(Fn=1),Rn<0?Rn=0:Rn>1&&(Rn=1);var Ln,Bn,Gn=In;Ln=kn.x+En*Gn,Bn=kn.y+Un*Gn;var jn,Kn,Wn=Nn;jn=kn.x+En*Wn,Kn=kn.y+Un*Wn;var Yn,Xn,Hn=Fn;Yn=Sn.x+Mn*Hn,Xn=Sn.y+Tn*Hn;var Zn,qn,$n=Rn;Zn=Sn.x+Mn*$n,qn=Sn.y+Tn*$n;var Qn,Jn,ne,ee,te,ie,re,le,se=(Qn=Ln-Sn.x)*Qn+(Jn=Bn-Sn.y)*Jn,ae=(ne=jn-An.x)*ne+(ee=Kn-An.y)*ee,oe=(te=Yn-kn.x)*te+(ie=Xn-kn.y)*ie,pe=(re=Zn-Dn.x)*re+(le=qn-Dn.y)*le,he=0,ue=0,_e=null;se<ae?(he=Ln,ue=Bn,_e=Sn):(he=jn,ue=Kn,_e=An,se=ae);var ce=0,de=0,fe=null;if(oe<pe?(ce=Yn,de=Xn,fe=kn):(ce=Zn,de=qn,fe=Dn,oe=pe),se<oe?(f.x=he,f.y=ue,x.x=_e.x,x.y=_e.y,nn=Math.sqrt(se)):(x.x=ce,x.y=de,f.x=fe.x,f.y=fe.y,nn=Math.sqrt(oe)),0!=nn){s.x=x.x-f.x,s.y=x.y-f.y;var xe=1/nn;s.x*=xe,s.y*=xe,U&&(s.x=-s.x,s.y=-s.y)}_=nn}else{var be=0,ye=0;be=gn.gp0.x,ye=gn.gp0.y;var ve,me,ge=0,ze=0;ve=(ge=gn.gp1.x)-be,me=(ze=gn.gp1.y)-ye;var we=vn.gnormy*be-vn.gnormx*ye,Oe=vn.gnormy*ge-vn.gnormx*ze,Ce=1/(Oe-we),Ee=(-vn.tp1-we)*Ce;if(Ee>nape_Config.epsilon){be+=ve*Ee,ye+=me*Ee}var Ue=(-vn.tp0-Oe)*Ce;if(Ue<-nape_Config.epsilon){ge+=ve*Ue,ze+=me*Ue}var Me=be*vn.gnormx+ye*vn.gnormy-vn.gprojection,Te=ge*vn.gnormx+ze*vn.gnormy-vn.gprojection;if(Me<Te){x.x=be,x.y=ye;var ke=-Me;f.x=x.x+vn.gnormx*ke,f.y=x.y+vn.gnormy*ke,_=Me}else{x.x=ge,x.y=ze;var De=-Te;f.x=x.x+vn.gnormx*De,f.y=x.y+vn.gnormy*De,_=Te}}}else _=b}else _=b}}_<o&&(o=_,t.x=r.x,t.y=r.y,i.x=l.x,i.y=l.y),u=u.next}p=p.next}return null!=(a=r).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a,null!=(a=l).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a,null!=(a=s).outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a,o},zpp_$nape_geom_ZPP_$SweepDistance.distance=function(n,e,t,i,r,l){if(null==l&&(l=1e100),0==n.type&&0==e.type){var s=n.circle,a=e.circle,o=0,p=0;if(o=a.worldCOMx-s.worldCOMx,p=a.worldCOMy-s.worldCOMy,(v=(w=Math.sqrt(o*o+p*p))-(s.radius+a.radius))<l){if(0==w)o=1,p=0;else o*=h=1/w,p*=h;var h=s.radius;t.x=s.worldCOMx+o*h,t.y=s.worldCOMy+p*h;h=-a.radius;i.x=a.worldCOMx+o*h,i.y=a.worldCOMy+p*h,r.x=o,r.y=p}return v}var u=!1;if(0==n.type&&1==e.type){var _=n;n=e,e=_;var c=t;t=i,i=c,u=!0}if(1==n.type&&0==e.type){for(var d=n.polygon,f=e.circle,x=-1e100,b=null,y=d.edges.head;null!=y;){var v;if((v=(T=y.elt).gnormx*f.worldCOMx+T.gnormy*f.worldCOMy-T.gprojection-f.radius)>l){x=v;break}v>0?v>x&&(x=v,b=T):x<0&&v>x&&(x=v,b=T),y=y.next}if(x<l){var m=b.gp0,g=b.gp1,z=f.worldCOMy*b.gnormx-f.worldCOMx*b.gnormy;if(z<=m.y*b.gnormx-m.x*b.gnormy){o=0,p=0;if(o=f.worldCOMx-m.x,p=f.worldCOMy-m.y,(x=(w=Math.sqrt(o*o+p*p))-f.radius)<l){if(0==w)o=1,p=0;else o*=h=1/w,p*=h;h=0;t.x=m.x+o*h,t.y=m.y+p*h;h=-f.radius;i.x=f.worldCOMx+o*h,i.y=f.worldCOMy+p*h,r.x=o,r.y=p}}else if(z>=g.y*b.gnormx-g.x*b.gnormy){var w;o=0,p=0;if(o=f.worldCOMx-g.x,p=f.worldCOMy-g.y,(x=(w=Math.sqrt(o*o+p*p))-f.radius)<l){if(0==w)o=1,p=0;else o*=h=1/w,p*=h;h=0;t.x=g.x+o*h,t.y=g.y+p*h;h=-f.radius;i.x=f.worldCOMx+o*h,i.y=f.worldCOMy+p*h,r.x=o,r.y=p}}else{h=-f.radius;i.x=f.worldCOMx+b.gnormx*h,i.y=f.worldCOMy+b.gnormy*h;h=-x;t.x=i.x+b.gnormx*h,t.y=i.y+b.gnormy*h,r.x=b.gnormx,r.y=b.gnormy}}return u&&(r.x=-r.x,r.y=-r.y),x}var O=n.polygon,C=e.polygon,E=(x=-1e100,null),U=null,M=0;for(y=O.edges.head;null!=y;){for(var T=y.elt,k=1e100,D=C.gverts.next;null!=D;){var S=D;(I=T.gnormx*S.x+T.gnormy*S.y)<k&&(k=I),D=D.next}if((k-=T.gprojection)>l){x=k;break}k>0?k>x&&(x=k,E=T,M=1):x<0&&k>x&&(x=k,E=T,M=1),y=y.next}if(x<l){for(y=C.edges.head;null!=y;){for(T=y.elt,k=1e100,D=O.gverts.next;null!=D;){S=D;(I=T.gnormx*S.x+T.gnormy*S.y)<k&&(k=I),D=D.next}if((k-=T.gprojection)>l){x=k;break}k>0?k>x&&(x=k,U=T,M=2):x<0&&k>x&&(x=k,U=T,M=2),y=y.next}if(x<l){var A,P;if(1==M)G=O,A=C,P=E;else{G=C,A=O,P=U;_=t;t=i,i=_,u=!u}var V=null;for(k=1e100,y=A.edges.head;null!=y;){var I;T=y.elt;(I=P.gnormx*T.gnormx+P.gnormy*T.gnormy)<k&&(k=I,V=T),y=y.next}if(u?(r.x=-P.gnormx,r.y=-P.gnormy):(r.x=P.gnormx,r.y=P.gnormy),x>=0){m=P.gp0,g=P.gp1;var N,F,R,L,B=V.gp0,G=V.gp1,j=1/((N=g.x-m.x)*N+(F=g.y-m.y)*F),K=1/((R=G.x-B.x)*R+(L=G.y-B.y)*L),W=-(N*(m.x-B.x)+F*(m.y-B.y))*j,Y=-(N*(m.x-G.x)+F*(m.y-G.y))*j;W<0?W=0:W>1&&(W=1),Y<0?Y=0:Y>1&&(Y=1),(n=-(R*(B.x-m.x)+L*(B.y-m.y))*K)<0?n=0:n>1&&(n=1),(e=-(R*(B.x-g.x)+L*(B.y-g.y))*K)<0?e=0:e>1&&(e=1);var X,H;h=W;X=m.x+N*h,H=m.y+F*h;var Z,q;h=Y;Z=m.x+N*h,q=m.y+F*h;var $,Q;h=n;$=B.x+R*h,Q=B.y+L*h;var J,nn;h=e;J=B.x+R*h,nn=B.y+L*h;var en=0,tn=0,rn=(en=X-B.x)*en+(tn=H-B.y)*tn,ln=(en=0,tn=0,(en=Z-G.x)*en+(tn=q-G.y)*tn),sn=(en=0,tn=0,(en=$-m.x)*en+(tn=Q-m.y)*tn),an=(en=0,tn=0,(en=J-g.x)*en+(tn=nn-g.y)*tn),on=0,pn=0,hn=null;rn<ln?(on=X,pn=H,hn=B):(on=Z,pn=q,hn=G,rn=ln);var un=0,_n=0,cn=null;if(sn<an?(un=$,_n=Q,cn=m):(un=J,_n=nn,cn=g,sn=an),rn<sn?(t.x=on,t.y=pn,i.x=hn.x,i.y=hn.y,x=Math.sqrt(rn)):(i.x=un,i.y=_n,t.x=cn.x,t.y=cn.y,x=Math.sqrt(sn)),0!=x){r.x=i.x-t.x,r.y=i.y-t.y;h=1/x;r.x*=h,r.y*=h,u&&(r.x=-r.x,r.y=-r.y)}return x}var dn=0,xn=0;dn=V.gp0.x,xn=V.gp0.y;var bn,yn,vn=0,mn=0;bn=(vn=V.gp1.x)-dn,yn=(mn=V.gp1.y)-xn;var gn=P.gnormy*dn-P.gnormx*xn,zn=1/((rn=P.gnormy*vn-P.gnormx*mn)-gn);(h=(-P.tp1-gn)*zn)>nape_Config.epsilon&&(dn+=bn*(W=h),xn+=yn*W),(h=(-P.tp0-rn)*zn)<-nape_Config.epsilon&&(vn+=bn*(W=h),mn+=yn*W);var wn=dn*P.gnormx+xn*P.gnormy-P.gprojection,On=vn*P.gnormx+mn*P.gnormy-P.gprojection;if(wn<On){i.x=dn,i.y=xn;h=-wn;return t.x=i.x+P.gnormx*h,t.y=i.y+P.gnormy*h,wn}i.x=vn,i.y=mn;h=-On;return t.x=i.x+P.gnormx*h,t.y=i.y+P.gnormy*h,On}return l}return l};var zpp_$nape_geom_ZPP_$PartitionPair=function(){this.node=null,this.di=0,this.id=0,this.b=null,this.a=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null};t["zpp_nape.geom.ZPP_PartitionPair"]=zpp_$nape_geom_ZPP_$PartitionPair,zpp_$nape_geom_ZPP_$PartitionPair.__name__="zpp_nape.geom.ZPP_PartitionPair",zpp_$nape_geom_ZPP_$PartitionPair.get=function(n,e){var t;return null==zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool?t=new zpp_$nape_geom_ZPP_$PartitionPair:(t=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool,zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool=t.next,t.next=null),t.a=n,t.b=e,n.id<e.id?(t.id=n.id,t.di=e.id):(t.id=e.id,t.di=n.id),t},zpp_$nape_geom_ZPP_$PartitionPair.edge_swap=function(n,e){var t=n.node;n.node=e.node,e.node=t},zpp_$nape_geom_ZPP_$PartitionPair.edge_lt=function(n,e){return!(n.id>=e.id)||n.id==e.id&&n.di<e.di},zpp_$nape_geom_ZPP_$PartitionPair.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(n){this.next=n,this.modified=!0,this.pushmod=!0},add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},inlined_add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.next;null!=e;){var t=e;this.add(t),e=e.next}},insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},inlined_insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.next;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.next;return this.pop(),n},remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){var r,l;null==e?(l=(r=this.next).next,this.next=l,null==this.next&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){},inlined_clear:function(){},reverse:function(){for(var n=this.next,e=null;null!=n;){var t=n.next;n.next=e,this.next=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.next},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},front:function(){return this.next},back:function(){for(var n=this.next,e=n;null!=e;)n=e,e=e.next;return n},iterator_at:function(n){for(var e=this.next;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e:null},free:function(){this.a=this.b=null,this.node=null},alloc:function(){},__class__:zpp_$nape_geom_ZPP_$PartitionPair};var zpp_$nape_geom_ZPP_$Triangular=function(){};t["zpp_nape.geom.ZPP_Triangular"]=zpp_$nape_geom_ZPP_$Triangular,zpp_$nape_geom_ZPP_$Triangular.__name__="zpp_nape.geom.ZPP_Triangular",zpp_$nape_geom_ZPP_$Triangular.lt=function(n,e){return n.y<e.y||n.y==e.y&&n.x<e.x},zpp_$nape_geom_ZPP_$Triangular.right_turn=function(n,e,t){var i,r;i=t.x-e.x,r=t.y-e.y;var l;return l=e.x-n.x,(e.y-n.y)*i-l*r},zpp_$nape_geom_ZPP_$Triangular.delaunay=function(n,e,t,i){var r,l,s,a=0,o=0,p=0;return a=t.x-e.x,o=t.y-e.y,p=e.x-n.x,(e.y-n.y)*a-p*o>=0?s=!0:(a=i.x-t.x,o=i.y-t.y,p=t.x-e.x,s=(t.y-e.y)*a-p*o>=0),s?l=!0:(a=n.x-i.x,o=n.y-i.y,p=i.x-t.x,l=(i.y-t.y)*a-p*o>=0),l?r=!0:(a=e.x-n.x,o=e.y-n.y,p=n.x-i.x,r=(n.y-i.y)*a-p*o>=0),!!r||e.x*(t.y*i.mag-t.mag*i.y)-t.x*(e.y*i.mag-e.mag*i.y)+i.x*(e.y*t.mag-e.mag*t.y)-(n.x*(t.y*i.mag-t.mag*i.y)-t.x*(n.y*i.mag-n.mag*i.y)+i.x*(n.y*t.mag-n.mag*t.y))+(n.x*(e.y*i.mag-e.mag*i.y)-e.x*(n.y*i.mag-n.mag*i.y)+i.x*(n.y*e.mag-n.mag*e.y))-(n.x*(e.y*t.mag-e.mag*t.y)-e.x*(n.y*t.mag-n.mag*t.y)+t.x*(n.y*e.mag-n.mag*e.y))>0},zpp_$nape_geom_ZPP_$Triangular.optimise=function(n){var e,t=n.vertices,i=n.vertices;if(null!=t)for(var r=t;;){if((f=r).sort(),f.mag=f.x*f.x+f.y*f.y,(r=r.next)==i)break}null==zpp_$nape_geom_ZPP_$Triangular.edgeSet&&(null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?zpp_$nape_geom_ZPP_$Triangular.edgeSet=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(zpp_$nape_geom_ZPP_$Triangular.edgeSet=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=zpp_$nape_geom_ZPP_$Triangular.edgeSet.next,zpp_$nape_geom_ZPP_$Triangular.edgeSet.next=null),zpp_$nape_geom_ZPP_$Triangular.edgeSet.lt=zpp_$nape_geom_ZPP_$PartitionPair.edge_lt,zpp_$nape_geom_ZPP_$Triangular.edgeSet.swapped=zpp_$nape_geom_ZPP_$PartitionPair.edge_swap),null==zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_geom_ZPP_$PartitionPair:(e=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool,zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool=e.next,e.next=null);t=n.vertices,i=n.vertices;if(null!=t)for(r=t;;){var l=(f=r).next;f.diagonals.reverse();for(var s=f.diagonals.head;null!=s;){var a=s.elt;if(a.id<f.id)l=a,s=s.next;else{var o=null==s.next?f.prev:s.next.elt;if(!zpp_$nape_geom_ZPP_$Triangular.delaunay(f,l,a,o)){var p;null==zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool?p=new zpp_$nape_geom_ZPP_$PartitionPair:(p=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool,zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool=p.next,p.next=null),p.a=f,p.b=a,f.id<a.id?(p.id=f.id,p.di=a.id):(p.id=a.id,p.di=f.id);var h=p;e.add(h),h.node=zpp_$nape_geom_ZPP_$Triangular.edgeSet.insert(h)}l=a,s=s.next}}if((r=r.next)==i)break}for(;null!=e.next;){var u=(h=e.pop_unsafe()).a,_=h.b,c=u.next,d=null;for(s=u.diagonals.head;null!=s;){var f;if((f=s.elt)==_){d=null==(s=s.next)?u.prev:s.elt;break}c=f,s=s.next}if(u.diagonals.remove(_),_.diagonals.remove(u),_==c.next)c.diagonals.add(d);else for(var x=c.diagonals.head;null!=x;){if(x.elt==_){c.diagonals.insert(x,d);break}x=x.next}if(u==d.next)d.diagonals.add(c);else for(var b=d.diagonals.head;null!=b;){if(b.elt==u){d.diagonals.insert(b,c);break}b=b.next}var y;zpp_$nape_geom_ZPP_$Triangular.edgeSet.remove_node(h.node),(y=h).a=y.b=null,y.node=null,y.next=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool,zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool=y}(y=e).a=y.b=null,y.node=null,y.next=zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool,zpp_$nape_geom_ZPP_$PartitionPair.zpp_pool=y},zpp_$nape_geom_ZPP_$Triangular.triangulate=function(n){var e=n.vertices,t=n.vertices,i=n.vertices.next,r=n.vertices;if(null!=i)for(var l=i;;){if(((p=l).y<e.y||p.y==e.y&&p.x<e.x)&&(e=p),(t.y<p.y||t.y==p.y&&t.x<p.x)&&(t=p),(l=l.next)==r)break}null==zpp_$nape_geom_ZPP_$Triangular.queue&&(zpp_$nape_geom_ZPP_$Triangular.queue=new zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex);var s=t.prev,a=t.next;for(zpp_$nape_geom_ZPP_$Triangular.queue.add(t);s!=e||a!=e;)s==e||a!=e&&(s.y<a.y||s.y==a.y&&s.x<a.x)?(zpp_$nape_geom_ZPP_$Triangular.queue.add(a),a.rightchain=!1,a=a.next):(zpp_$nape_geom_ZPP_$Triangular.queue.add(s),s.rightchain=!0,s=s.prev);zpp_$nape_geom_ZPP_$Triangular.queue.add(e),null==zpp_$nape_geom_ZPP_$Triangular.stack&&(zpp_$nape_geom_ZPP_$Triangular.stack=new zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex),zpp_$nape_geom_ZPP_$Triangular.stack.add(zpp_$nape_geom_ZPP_$Triangular.queue.pop_unsafe());var o=zpp_$nape_geom_ZPP_$Triangular.queue.pop_unsafe();for(zpp_$nape_geom_ZPP_$Triangular.stack.add(o);;){var p=zpp_$nape_geom_ZPP_$Triangular.queue.pop_unsafe();if(null==zpp_$nape_geom_ZPP_$Triangular.queue.head)break;if(p.rightchain!=zpp_$nape_geom_ZPP_$Triangular.stack.head.elt.rightchain){for(;;){var h=zpp_$nape_geom_ZPP_$Triangular.stack.pop_unsafe();if(null==zpp_$nape_geom_ZPP_$Triangular.stack.head)break;n.add_diagonal(h,p)}zpp_$nape_geom_ZPP_$Triangular.stack.add(o)}else{for(var u=zpp_$nape_geom_ZPP_$Triangular.stack.pop_unsafe();null!=zpp_$nape_geom_ZPP_$Triangular.stack.head;){var _,c,d=zpp_$nape_geom_ZPP_$Triangular.stack.head.elt;_=p.x-u.x,c=p.y-u.y;var f;f=u.x-d.x;var x=(u.y-d.y)*_-f*c;if(p.rightchain&&x>=0||!p.rightchain&&x<=0)break;n.add_diagonal(d,p),u=d,zpp_$nape_geom_ZPP_$Triangular.stack.pop()}zpp_$nape_geom_ZPP_$Triangular.stack.add(u)}zpp_$nape_geom_ZPP_$Triangular.stack.add(p),o=p}if(null!=zpp_$nape_geom_ZPP_$Triangular.stack.head)for(zpp_$nape_geom_ZPP_$Triangular.stack.pop();null!=zpp_$nape_geom_ZPP_$Triangular.stack.head;){h=zpp_$nape_geom_ZPP_$Triangular.stack.pop_unsafe();if(null==zpp_$nape_geom_ZPP_$Triangular.stack.head)break;n.add_diagonal(t,h)}return n};var zpp_$nape_geom_ZPP_$Vec2=function(){this.y=0,this.x=0,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.weak=!1,this.outer=null,this._isimmutable=null,this._immutable=!1,this._validate=null,this._invalidate=null};t["zpp_nape.geom.ZPP_Vec2"]=zpp_$nape_geom_ZPP_$Vec2,zpp_$nape_geom_ZPP_$Vec2.__name__="zpp_nape.geom.ZPP_Vec2",zpp_$nape_geom_ZPP_$Vec2.get=function(n,e,t){var i;return null==t&&(t=!1),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=t,i.x=n,i.y=e,i},zpp_$nape_geom_ZPP_$Vec2.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},immutable:function(){if(this._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");null!=this._isimmutable&&this._isimmutable()},wrapper:function(){if(null==this.outer){this.outer=new nape_geom_Vec2;var n=this.outer.zpp_inner;null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=n,this.outer.zpp_inner=this}return this.outer},free:function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this._isimmutable=null,this._validate=null,this._invalidate=null},alloc:function(){this.weak=!1},elem:function(){return this},begin:function(){return this.next},setbegin:function(n){this.next=n,this.modified=!0,this.pushmod=!0},add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},inlined_add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.next;null!=e;){var t=e;this.add(t),e=e.next}},insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},inlined_insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.next;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.next;return this.pop(),n},remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){var r,l;null==e?(l=(r=this.next).next,this.next=l,null==this.next&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){},inlined_clear:function(){},reverse:function(){for(var n=this.next,e=null;null!=n;){var t=n.next;n.next=e,this.next=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.next},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},front:function(){return this.next},back:function(){for(var n=this.next,e=n;null!=e;)n=e,e=e.next;return n},iterator_at:function(n){for(var e=this.next;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e:null},copy:function(){var n,e=this.x,t=this.y;return null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?n=new zpp_$nape_geom_ZPP_$Vec2:(n=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=e,n.y=t,n},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:zpp_$nape_geom_ZPP_$Vec2};var zpp_$nape_geom_ZPP_$Vec3=function(){this._validate=null,this.immutable=!1,this.z=0,this.y=0,this.x=0,this.outer=null,this.immutable=!1,this._validate=null};t["zpp_nape.geom.ZPP_Vec3"]=zpp_$nape_geom_ZPP_$Vec3,zpp_$nape_geom_ZPP_$Vec3.__name__="zpp_nape.geom.ZPP_Vec3",zpp_$nape_geom_ZPP_$Vec3.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:zpp_$nape_geom_ZPP_$Vec3};var zpp_$nape_geom_ZPP_$VecMath=function(){};t["zpp_nape.geom.ZPP_VecMath"]=zpp_$nape_geom_ZPP_$VecMath,zpp_$nape_geom_ZPP_$VecMath.__name__="zpp_nape.geom.ZPP_VecMath",zpp_$nape_geom_ZPP_$VecMath.vec_dsq=function(n,e,t,i){var r,l;return(r=n-t)*r+(l=e-i)*l},zpp_$nape_geom_ZPP_$VecMath.vec_distance=function(n,e,t,i){var r,l;return r=n-t,l=e-i,Math.sqrt(r*r+l*l)};var zpp_$nape_phys_ZPP_$Interactor=function(){this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.group=null,this.cbsets=null,this.icompound=null,this.ibody=null,this.ishape=null,this.userData=null,this.id=0,this.outer_i=null,this.id=zpp_$nape_ZPP_$ID.Interactor(),this.cbsets=new zpp_$nape_util_ZNPList_$ZPP_$CallbackSet,this.cbTypes=new zpp_$nape_util_ZNPList_$ZPP_$CbType};t["zpp_nape.phys.ZPP_Interactor"]=zpp_$nape_phys_ZPP_$Interactor,zpp_$nape_phys_ZPP_$Interactor.__name__="zpp_nape.phys.ZPP_Interactor",zpp_$nape_phys_ZPP_$Interactor.get=function(n,e){for(var t=n.id<e.id?n.id:e.id,i=n.id<e.id?e.id:n.id,r=null,l=(n.cbsets.length<e.cbsets.length?n.cbsets:e.cbsets).head;null!=l;){var s=l.elt;if(s.id==t&&s.di==i){r=s;break}l=l.next}return r},zpp_$nape_phys_ZPP_$Interactor.int_callback=function(n,e,t){var i,r=n.int1,l=n.int2,s=e.options1,a=r.cbTypes;if(s.nonemptyintersection(a,s.includes)&&!s.nonemptyintersection(a,s.excludes)){s=e.options2,a=l.cbTypes;i=s.nonemptyintersection(a,s.includes)&&!s.nonemptyintersection(a,s.excludes)}else i=!1;i?(t.int1=r,t.int2=l):(t.int1=l,t.int2=r)},zpp_$nape_phys_ZPP_$Interactor.prototype={isShape:function(){return null!=this.ishape},isBody:function(){return null!=this.ibody},isCompound:function(){return null!=this.icompound},__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var n=this.cbTypes.head;null!=n;){n.elt.interactors.add(this),n=n.next}this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var n=this.cbTypes.head;null!=n;){n.elt.interactors.remove(this),n=n.next}this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var n=this.ishape.body;null!=n&&null!=n.space&&n.space.non_inlined_wake(n)}else null!=this.ibody?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},getSpace:function(){return null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space},setupcbTypes:function(){this.wrap_cbTypes=zpp_$nape_util_ZPP_$CbTypeList.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$bind(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$bind(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0,this.wrap_cbTypes.zpp_inner._modifiable=$bind(this,this.immutable_cbTypes)},immutable_cbTypes:function(){this.immutable_midstep("Interactor::cbTypes")},wrap_cbTypes_subber:function(n){var e=n.zpp_inner;if(this.cbTypes.has(e)){var t=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=t&&(this.dealloc_cbSet(),e.interactors.remove(this)),this.cbTypes.remove(e),null!=t&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(n){return this.insert_cbtype(n.zpp_inner),!1},insert_cbtype:function(n){if(!this.cbTypes.has(n)){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=e&&(this.dealloc_cbSet(),n.interactors.add(this));for(var t=null,i=this.cbTypes.head;null!=i;){var r=i.elt;if(n.id<r.id)break;t=i,i=i.next}var l,s=this.cbTypes;null==zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool?l=new zpp_$nape_util_ZNPNode_$ZPP_$CbType:(l=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=l.next,l.next=null),l.elt=n;var a=l;null==t?(a.next=s.head,s.head=a):(a.next=t.next,t.next=a),s.pushmod=s.modified=!0,s.length++,null!=e&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var n=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=(this.cbSet=n.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),n.freshInteractorType(this))},dealloc_cbSet:function(){var n=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=this.cbSet){if(this.cbSet.interactors.remove(this),n.nullInteractorType(this),0==--this.cbSet.count){n.cbsets.remove(this.cbSet);var e=this.cbSet;for(e.listeners.clear(),e.zip_listeners=!0,e.bodylisteners.clear(),e.zip_bodylisteners=!0,e.conlisteners.clear(),e.zip_conlisteners=!0;null!=e.cbTypes.head;){e.cbTypes.pop_unsafe().cbsets.remove(e)}e.next=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=e}this.cbSet=null}},setGroup:function(n){if(this.group!=n){var e=null!=(null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space);e&&null!=this.group&&this.group.interactors.remove(this),this.group=n,e&&null!=n&&n.interactors.add(this),e&&(null!=this.ishape?this.ishape.body.wake():null!=this.ibody?this.ibody.wake():this.icompound.wake())}},immutable_midstep:function(n){if(null!=this.ibody){var e=this.ibody;if(null!=e.space&&e.space.midstep)throw haxe_Exception.thrown("Error: "+n+" cannot be set during a space step()")}else null!=this.ishape?this.ishape.__immutable_midstep(n):this.icompound.__imutable_midstep(n)},lookup_group:function(){for(var n=this;null!=n&&null==n.group;)n=null!=n.ishape?n.ishape.body:null!=n.icompound?n.icompound.compound:n.ibody.compound;return null==n?null:n.group},copyto:function(n){n.zpp_inner_i.group=this.group,null==(t=this.outer_i).zpp_inner_i.wrap_cbTypes&&t.zpp_inner_i.setupcbTypes(),(l=t.zpp_inner_i.wrap_cbTypes).zpp_inner.valmod();for(var e=nape_callbacks_CbTypeIterator.get(l);;){var t;e.zpp_inner.zpp_inner.valmod(),(t=e.zpp_inner).zpp_inner.valmod(),t.zpp_inner.zip_length&&(t.zpp_inner.zip_length=!1,t.zpp_inner.user_length=t.zpp_inner.inner.length);var i,r=t.zpp_inner.user_length;if(e.zpp_critical=!0,e.zpp_i<r?i=!0:(e.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool,nape_callbacks_CbTypeIterator.zpp_pool=e,e.zpp_inner=null,i=!1),!i)break;e.zpp_critical=!1;var l,s=e.zpp_inner.at(e.zpp_i++);null==n.zpp_inner_i.wrap_cbTypes&&n.zpp_inner_i.setupcbTypes(),(l=n.zpp_inner_i.wrap_cbTypes).zpp_inner.reverse_flag?l.push(s):l.unshift(s)}null!=this.userData&&(n.zpp_inner_i.userData=Reflect.copy(this.userData))},__class__:zpp_$nape_phys_ZPP_$Interactor};var zpp_$nape_phys_ZPP_$Body=function(){var n;this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_aabb=!1,this.aabb=null,this.norotate=!1,this.sinertia=0,this.iinertia=0,this.cinertia=0,this.zip_inertia=!1,this.inertia=0,this.inertiaMode=0,this.zip_gravMassScale=!1,this.gravMassScale=0,this.gravMassMode=0,this.zip_gravMass=!1,this.gravMass=0,this.nomove=!1,this.cmass=0,this.smass=0,this.imass=0,this.massMode=0,this.zip_mass=!1,this.mass=0,this.zip_axis=!1,this.axisy=0,this.axisx=0,this.rot=0,this.pre_rot=0,this.kinangvel=0,this.torque=0,this.angvel=0,this.wrapcvel=null,this.wrap_svel=null,this.svely=0,this.svelx=0,this.wrap_kinvel=null,this.kinvely=0,this.kinvelx=0,this.wrap_force=null,this.forcey=0,this.forcex=0,this.wrap_vel=null,this.vely=0,this.velx=0,this.wrap_pos=null,this.posy=0,this.posx=0,this.pre_posy=0,this.pre_posx=0,this.disableCCD=!1,this.bulletEnabled=!1,this.bullet=!1,this.sweepRadius=0,this.sweepFrozen=!1,this.sweep_angvel=0,this.sweepTime=0,this.graph_depth=0,this.component=null,this.wrap_constraints=null,this.constraints=null,this.wrap_arbiters=null,this.arbiters=null,this.space=null,this.wrap_shapes=null,this.shapes=null,this.compound=null,this.type=0,this.world=!1,this.outer=null,zpp_$nape_phys_ZPP_$Interactor.call(this),this.ibody=this,this.world=!1,this.bulletEnabled=!1,this.sweepTime=0,this.sweep_angvel=0,this.norotate=this.nomove=!1,this.disableCCD=!1,this.posx=0,this.posy=0,this.rot=0,this.axisx=0,this.axisy=1,this.svelx=0,this.svely=0,this.velx=0,this.vely=0,this.kinvelx=0,this.kinvely=0,this.forcex=0,this.forcey=0,this.torque=this.angvel=this.kinangvel=0,this.pre_posx=1/0,this.pre_posy=1/0,this.pre_rot=1/0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.zip_aabb=!0,null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?n=new zpp_$nape_geom_ZPP_$AABB:(n=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=n.next,n.next=null),n.minx=0,n.miny=0,n.maxx=0,n.maxy=0,this.aabb=n,this.aabb._immutable=!0;this.aabb._validate=$bind(this,this.aabb_validate),this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.arbiters=new zpp_$nape_util_ZNPList_$ZPP_$Arbiter,this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape,this.wrap_shapes=zpp_$nape_util_ZPP_$ShapeList.get(this.shapes),this.wrap_shapes.zpp_inner.adder=$bind(this,this.shapes_adder),this.wrap_shapes.zpp_inner.subber=$bind(this,this.shapes_subber),this.wrap_shapes.zpp_inner._invalidate=$bind(this,this.shapes_invalidate),this.wrap_shapes.zpp_inner._modifiable=$bind(this,this.shapes_modifiable),this.kinematicDelaySleep=!1};t["zpp_nape.phys.ZPP_Body"]=zpp_$nape_phys_ZPP_$Body,zpp_$nape_phys_ZPP_$Body.__name__="zpp_nape.phys.ZPP_Body",zpp_$nape_phys_ZPP_$Body.bodysetlt=function(n,e){return n.id<e.id},zpp_$nape_phys_ZPP_$Body.__static=function(){null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1);var n=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC),e=n.zpp_inner;return e.world=!0,e.wrap_shapes.zpp_inner.immutable=!0,e.smass=e.imass=e.cmass=e.mass=e.gravMass=0,e.sinertia=e.iinertia=e.cinertia=e.inertia=0,e.cbTypes.clear(),n},zpp_$nape_phys_ZPP_$Body.__super__=zpp_$nape_phys_ZPP_$Interactor,zpp_$nape_phys_ZPP_$Body.prototype=$extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{isStatic:function(){return 1==this.type},isDynamic:function(){return 2==this.type},isKinematic:function(){return 3==this.type},invalidate_type:function(){this.invalidate_mass(),this.invalidate_inertia()},invalidate_shapes:function(){this.zip_aabb=!0,this.zip_localCOM=!0,this.zip_worldCOM=!0,this.invalidate_mass(),this.invalidate_inertia()},init_bodysetlist:function(){null==zpp_$nape_phys_ZPP_$Body.bodyset&&(zpp_$nape_phys_ZPP_$Body.bodyset=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body,zpp_$nape_phys_ZPP_$Body.bodyset.lt=zpp_$nape_phys_ZPP_$Body.bodysetlt,zpp_$nape_phys_ZPP_$Body.bodystack=new zpp_$nape_util_ZNPList_$ZPP_$Body)},connectedBodies_cont:function(n){zpp_$nape_phys_ZPP_$Body.bodyset.try_insert_bool(n.zpp_inner)&&(zpp_$nape_phys_ZPP_$Body.bodystack.add(n.zpp_inner),n.zpp_inner.graph_depth=zpp_$nape_phys_ZPP_$Body.cur_graph_depth+1)},connectedBodies:function(n,e){null==zpp_$nape_phys_ZPP_$Body.bodyset&&(zpp_$nape_phys_ZPP_$Body.bodyset=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body,zpp_$nape_phys_ZPP_$Body.bodyset.lt=zpp_$nape_phys_ZPP_$Body.bodysetlt,zpp_$nape_phys_ZPP_$Body.bodystack=new zpp_$nape_util_ZNPList_$ZPP_$Body);var t=null==e?new nape_phys_BodyList:e;for(zpp_$nape_phys_ZPP_$Body.bodystack.add(this),zpp_$nape_phys_ZPP_$Body.bodyset.insert(this),this.graph_depth=0;null!=zpp_$nape_phys_ZPP_$Body.bodystack.head;){if((l=zpp_$nape_phys_ZPP_$Body.bodystack.pop_unsafe()).graph_depth!=n){zpp_$nape_phys_ZPP_$Body.cur_graph_depth=l.graph_depth;for(var i=l.constraints.head;null!=i;){i.elt.outer.visitBodies($bind(this,this.connectedBodies_cont)),i=i.next}}}var r=zpp_$nape_phys_ZPP_$Body.bodyset;if(null!=r.parent){for(var l=r.parent;null!=l;)if(null!=l.prev)l=l.prev;else if(null!=l.next)l=l.next;else{var s=l.data;if(s!=this){var a=s.outer;t.zpp_inner.reverse_flag?t.push(a):t.unshift(a)}var o=l.parent;null!=o&&(l==o.prev?o.prev=null:o.next=null,l.parent=null);var p=l;p.data=null,p.lt=null,p.swapped=null,p.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=p,l=o}r.parent=null}return t},interactingBodies:function(n,e,t){null==zpp_$nape_phys_ZPP_$Body.bodyset&&(zpp_$nape_phys_ZPP_$Body.bodyset=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body,zpp_$nape_phys_ZPP_$Body.bodyset.lt=zpp_$nape_phys_ZPP_$Body.bodysetlt,zpp_$nape_phys_ZPP_$Body.bodystack=new zpp_$nape_util_ZNPList_$ZPP_$Body);var i=null==t?new nape_phys_BodyList:t;for(zpp_$nape_phys_ZPP_$Body.bodyset.insert(this),zpp_$nape_phys_ZPP_$Body.bodystack.add(this),this.graph_depth=0;null!=zpp_$nape_phys_ZPP_$Body.bodystack.head;){if((o=zpp_$nape_phys_ZPP_$Body.bodystack.pop_unsafe()).graph_depth!=e)for(var r=o.arbiters.head;null!=r;){var l=r.elt;if(0!=(l.type&n)){var s=l.b1==o?l.b2:l.b1;zpp_$nape_phys_ZPP_$Body.bodyset.try_insert_bool(s)&&(zpp_$nape_phys_ZPP_$Body.bodystack.add(s),s.graph_depth=o.graph_depth+1)}r=r.next}}var a=zpp_$nape_phys_ZPP_$Body.bodyset;if(null!=a.parent){for(var o=a.parent;null!=o;)if(null!=o.prev)o=o.prev;else if(null!=o.next)o=o.next;else{var p=o.data;if(p!=this){var h=p.outer;i.zpp_inner.reverse_flag?i.push(h):i.unshift(h)}var u=o.parent;null!=u&&(o==u.prev?u.prev=null:u.next=null,o.parent=null);var _=o;_.data=null,_.lt=null,_.swapped=null,_.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=_,o=u}a.parent=null}return i},atRest:function(n){if(2!=this.type)return this.component.sleeping;var e,t=nape_Config.linearSleepThreshold;if(t*=t,this.velx*this.velx+this.vely*this.vely>t)e=!1;else{var i=0,r=0;if((i=this.posx-this.pre_posx)*i+(r=this.posy-this.pre_posy)*r>.25*t*n*n)e=!1;else{i=0,r=0;var l=(i=this.aabb.maxx-this.aabb.minx)*i+(r=this.aabb.maxy-this.aabb.miny)*r,s=nape_Config.angularSleepThreshold;if(s*=s,4*this.angvel*this.angvel*l>s)e=!1;else{var a=this.rot-this.pre_rot;e=!(a*a*l>s*n*n)}}}return e||(this.component.waket=this.space.stamp),this.component.waket+nape_Config.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var n=this.arbiters.head;null!=n;){n.elt.invalidated=!0,n=n.next}},sweepIntegrate:function(n){var e=n-this.sweepTime;if(0!=e){this.sweepTime=n;var t=e;if(this.posx+=this.velx*t,this.posy+=this.vely*t,0!=this.angvel){var i=this.sweep_angvel*e;if(this.rot+=i,i*i>1e-4)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var r=i*i,l=1-.5*r,s=1-r*r/8,a=(l*this.axisx+i*this.axisy)*s;this.axisy=(l*this.axisy-i*this.axisx)*s,this.axisx=a}}}},sweepValidate:function(n){if(0==n.type)n.worldCOMx=this.posx+(this.axisy*n.localCOMx-this.axisx*n.localCOMy),n.worldCOMy=this.posy+(n.localCOMx*this.axisx+n.localCOMy*this.axisy);else{for(var e=n.polygon,t=e.lverts.next,i=e.gverts.next;null!=i;){var r=i,l=t;t=t.next,r.x=this.posx+(this.axisy*l.x-this.axisx*l.y),r.y=this.posy+(l.x*this.axisx+l.y*this.axisy),i=i.next}var s=e.edges.head,a=i=e.gverts.next;for(i=i.next;null!=i;){var o=i,p=s.elt;s=s.next,p.gnormx=this.axisy*p.lnormx-this.axisx*p.lnormy,p.gnormy=p.lnormx*this.axisx+p.lnormy*this.axisy,p.gprojection=this.posx*p.gnormx+this.posy*p.gnormy+p.lprojection,p.tp0=a.y*p.gnormx-a.x*p.gnormy,p.tp1=o.y*p.gnormx-o.x*p.gnormy,a=o,i=i.next}o=e.gverts.next,p=s.elt;s=s.next,p.gnormx=this.axisy*p.lnormx-this.axisx*p.lnormy,p.gnormy=p.lnormx*this.axisx+p.lnormy*this.axisy,p.gprojection=this.posx*p.gnormx+this.posy*p.gnormy+p.lprojection,p.tp0=a.y*p.gnormx-a.x*p.gnormy,p.tp1=o.y*p.gnormx-o.x*p.gnormy}},invalidate_pos:function(){for(var n=this.shapes.head;null!=n;){var e=n.elt;1==e.type&&(e.polygon.invalidate_gverts(),e.polygon.invalidate_gaxi()),e.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0},pos_invalidate:function(n){if(this.immutable_midstep("Body::position"),1==this.type&&null!=this.space)throw haxe_Exception.thrown("Error: Cannot move a static object once inside a Space");if(this.posx!=n.x||this.posy!=n.y){this.posx=n.x,this.posy=n.y;for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0,this.wake()}},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx,this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(n){if(1==this.type)throw haxe_Exception.thrown("Error: Static body cannot have its velocity set.");this.velx=n.x,this.vely=n.y,this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx,this.wrap_vel.zpp_inner.y=this.vely},kinvel_invalidate:function(n){this.kinvelx=n.x,this.kinvely=n.y,this.wake()},kinvel_validate:function(){this.wrap_kinvel.zpp_inner.x=this.kinvelx,this.wrap_kinvel.zpp_inner.y=this.kinvely},svel_invalidate:function(n){this.svelx=n.x,this.svely=n.y,this.wake()},svel_validate:function(){this.wrap_svel.zpp_inner.x=this.svelx,this.wrap_svel.zpp_inner.y=this.svely},force_invalidate:function(n){if(2!=this.type)throw haxe_Exception.thrown("Error: Non-dynamic body cannot have force applied.");this.forcex=n.x,this.forcey=n.y,this.wake()},force_validate:function(){this.wrap_force.zpp_inner.x=this.forcex,this.wrap_force.zpp_inner.y=this.forcey},setupPosition:function(){var n,e=this.posx,t=this.posy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_pos=n,this.wrap_pos.zpp_inner._inuse=!0,this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=$bind(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=$bind(this,this.pos_validate))},setupVelocity:function(){var n,e=this.velx,t=this.vely;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_vel=n,this.wrap_vel.zpp_inner._inuse=!0,this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=$bind(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=$bind(this,this.vel_validate))},setupkinvel:function(){var n,e=this.kinvelx,t=this.kinvely;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_kinvel=n,this.wrap_kinvel.zpp_inner._inuse=!0,this.world?this.wrap_kinvel.zpp_inner._immutable=!0:(this.wrap_kinvel.zpp_inner._invalidate=$bind(this,this.kinvel_invalidate),this.wrap_kinvel.zpp_inner._validate=$bind(this,this.kinvel_validate))},setupsvel:function(){var n,e=this.svelx,t=this.svely;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_svel=n,this.wrap_svel.zpp_inner._inuse=!0,this.world?this.wrap_svel.zpp_inner._immutable=!0:(this.wrap_svel.zpp_inner._invalidate=$bind(this,this.svel_invalidate),this.wrap_svel.zpp_inner._validate=$bind(this,this.svel_validate))},setupForce:function(){var n,e=this.forcex,t=this.forcey;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_force=n,this.wrap_force.zpp_inner._inuse=!0,this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=$bind(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=$bind(this,this.force_validate))},cvel_validate:function(){this.wrapcvel.zpp_inner.x=this.velx+this.kinvelx,this.wrapcvel.zpp_inner.y=this.vely+this.kinvely,this.wrapcvel.zpp_inner.z=this.angvel+this.kinangvel},setup_cvel:function(){this.wrapcvel=nape_geom_Vec3.get(),this.wrapcvel.zpp_inner.immutable=!0,this.wrapcvel.zpp_inner._validate=$bind(this,this.cvel_validate)},invalidate_rot:function(){this.zip_axis=!0;for(var n=this.shapes.head;null!=n;){var e=n.elt;1==e.type&&(e.polygon.invalidate_gverts(),e.polygon.invalidate_gaxi()),e.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot))},quick_validate_axis:function(){this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)},delta_rot:function(n){if(this.rot+=n,n*n>1e-4)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var e=n*n,t=1-.5*e,i=1-e*e/8,r=(t*this.axisx+n*this.axisy)*i;this.axisy=(t*this.axisy-n*this.axisx)*i,this.axisx=r}},invalidate_mass:function(){this.zip_mass=!0,this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass||(this.massMode,0)){if(this.zip_mass=!1,0==this.massMode){this.cmass=0;for(var n=this.shapes.head;null!=n;){var e=n.elt;e.refmaterial.density=e.material.density,e.validate_area_inertia(),this.cmass+=e.area*e.material.density,n=n.next}}2!=this.type||this.nomove?(this.mass=1/0,this.imass=this.smass=0):(this.mass=this.cmass,this.imass=this.smass=1/this.mass)}},invalidate_gravMass:function(){1!=this.gravMassMode&&(this.zip_gravMass=!0),2!=this.gravMassMode&&(this.zip_gravMassScale=!0),this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},invalidate_gravMassScale:function(){2!=this.gravMassMode?this.zip_gravMassScale=!0:this.invalidate_gravMass()},validate_gravMassScale:function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,0==this.gravMassMode?this.gravMassScale=1:1==this.gravMassMode&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},invalidate_inertia:function(){this.zip_inertia=!0,this.wake()},validate_inertia:function(){if(this.zip_inertia||(this.inertiaMode,0)){if(this.zip_inertia=!1,0==this.inertiaMode){this.cinertia=0;for(var n=this.shapes.head;null!=n;){var e=n.elt;e.refmaterial.density=e.material.density,e.validate_area_inertia(),this.cinertia+=e.inertia*e.area*e.material.density,n=n.next}}2!=this.type||this.norotate?(this.inertia=1/0,this.sinertia=this.iinertia=0):(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia)}},invalidate_wake:function(){this.wake()},validate_aabb:function(){if(null==this.shapes.head)throw haxe_Exception.thrown("Error: Body bounds only makes sense if it contains shapes");if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var n=this.shapes.head;null!=n;){var e=n.elt;if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next){i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;i.localCOMx+=1*i.lverts.next.next.x,i.localCOMy+=1*i.lverts.next.next.y;i.localCOMx*=.5,i.localCOMy*=.5}else{i.localCOMx=0,i.localCOMy=0;var r=0,l=i.lverts.next,s=l,a=l=l.next;for(l=l.next;null!=l;){var o=l;r+=a.x*(o.y-s.y);var p=o.y*a.x-o.x*a.y;i.localCOMx+=(a.x+o.x)*p,i.localCOMy+=(a.y+o.y)*p,s=a,a=o,l=l.next}var h=l=i.lverts.next;r+=a.x*(h.y-s.y);var u=h.y*a.x-h.x*a.y;i.localCOMx+=(a.x+h.x)*u,i.localCOMy+=(a.y+h.y)*u,s=a,a=h;var _=l=l.next;r+=a.x*(_.y-s.y);var c=_.y*a.x-_.x*a.y;i.localCOMx+=(a.x+_.x)*c,i.localCOMy+=(a.y+_.y)*c;var d=r=1/(3*r);i.localCOMx*=d,i.localCOMy*=d}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var f=t.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var x=t.radius,b=t.radius;t.aabb.minx=t.worldCOMx-x,t.aabb.miny=t.worldCOMy-b,t.aabb.maxx=t.worldCOMx+x,t.aabb.maxy=t.worldCOMy+b}else{var y=e.polygon;if(y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts();var v=y.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var m=y.lverts.next,g=y.gverts.next;null!=g;){var z=g,w=m;m=m.next,z.x=y.body.posx+(y.body.axisy*w.x-y.body.axisx*w.y),z.y=y.body.posy+(w.x*y.body.axisx+w.y*y.body.axisy),g=g.next}}if(null==y.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var O=y.gverts.next;y.aabb.minx=O.x,y.aabb.miny=O.y,y.aabb.maxx=O.x,y.aabb.maxy=O.y;for(var C=y.gverts.next.next;null!=C;){var E=C;E.x<y.aabb.minx&&(y.aabb.minx=E.x),E.x>y.aabb.maxx&&(y.aabb.maxx=E.x),E.y<y.aabb.miny&&(y.aabb.miny=E.y),E.y>y.aabb.maxy&&(y.aabb.maxy=E.y),C=C.next}}var U=this.aabb,M=e.aabb;M.minx<U.minx&&(U.minx=M.minx),M.maxx>U.maxx&&(U.maxx=M.maxx),M.miny<U.miny&&(U.miny=M.miny),M.maxy>U.maxy&&(U.maxy=M.maxy),n=n.next}}},invalidate_aabb:function(){this.zip_aabb=!0},invalidate_localCOM:function(){this.zip_localCOM=!0,this.zip_worldCOM=!0},invalidate_worldCOM:function(){this.zip_worldCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var n=0,e=0,t=0,i=this.shapes.head;null!=i;){var r=i.elt;if(r.zip_localCOM){if(r.zip_localCOM=!1,1==r.type){var l=r.polygon;if(null==l.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==l.lverts.next.next)l.localCOMx=l.lverts.next.x,l.localCOMy=l.lverts.next.y;else if(null==l.lverts.next.next.next){l.localCOMx=l.lverts.next.x,l.localCOMy=l.lverts.next.y;var s=1;l.localCOMx+=l.lverts.next.next.x*s,l.localCOMy+=l.lverts.next.next.y*s;l.localCOMx*=.5,l.localCOMy*=.5}else{l.localCOMx=0,l.localCOMy=0;var a=0,o=l.lverts.next,p=o,h=o=o.next;for(o=o.next;null!=o;){var u=o;a+=h.x*(u.y-p.y);var _=u.y*h.x-u.x*h.y;l.localCOMx+=(h.x+u.x)*_,l.localCOMy+=(h.y+u.y)*_,p=h,h=u,o=o.next}var c=o=l.lverts.next;a+=h.x*(c.y-p.y);var d=c.y*h.x-c.x*h.y;l.localCOMx+=(h.x+c.x)*d,l.localCOMy+=(h.y+c.y)*d,p=h,h=c;var f=o=o.next;a+=h.x*(f.y-p.y);var x=f.y*h.x-f.x*h.y;l.localCOMx+=(h.x+f.x)*x,l.localCOMy+=(h.y+f.y)*x;var b=a=1/(3*a);l.localCOMx*=b,l.localCOMy*=b}}null!=r.wrap_localCOM&&(r.wrap_localCOM.zpp_inner.x=r.localCOMx,r.wrap_localCOM.zpp_inner.y=r.localCOMy)}r.validate_area_inertia();var y=r.area*r.material.density;n+=r.localCOMx*y,e+=r.localCOMy*y,t+=r.area*r.material.density,i=i.next}if(0!=t){s=1/t;this.localCOMx=n*s,this.localCOMy=e*s}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy),this.zip_mass&&0==this.massMode&&(this.zip_mass=!1,this.cmass=t,2==this.type?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=1/0,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},getlocalCOM:function(){if(null==this.shapes.head)throw haxe_Exception.thrown("Error: localCOM only makes sense when Body has Shapes");this.validate_localCOM()},getworldCOM:function(){if(null==this.shapes.head)throw haxe_Exception.thrown("Error: worldCOM only makes sense when Body has Shapes");this.validate_worldCOM()},__immutable_midstep:function(n){if(null!=this.space&&this.space.midstep)throw haxe_Exception.thrown("Error: "+n+" cannot be set during a space step()")},clear:function(){if(null!=this.space)throw haxe_Exception.thrown("Error: Cannot clear a Body if it is currently being used by a Space!");if(null!=this.constraints.head)throw haxe_Exception.thrown("Error: Cannot clear a Body if it is currently being used by a constraint!");for(;null!=this.shapes.head;){(e=this.shapes.pop_unsafe()).removedFromBody(),e.body=null}this.invalidate_shapes(),this.pre_posx=0,this.pre_posy=0,this.posx=0,this.posy=0,this.velx=0,this.vely=0,this.forcex=0,this.forcey=0,this.kinvelx=0,this.kinvely=0,this.svelx=0,this.svely=0,this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=0;for(var n=this.shapes.head;null!=n;){1==(e=n.elt).type&&(e.polygon.invalidate_gverts(),e.polygon.invalidate_gaxi()),e.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0,this.zip_axis=!0;for(n=this.shapes.head;null!=n;){var e;1==(e=n.elt).type&&(e.polygon.invalidate_gverts(),e.polygon.invalidate_gaxi()),e.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0,this.axisx=0,this.axisy=1,this.zip_axis=!1,this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.norotate=!1,this.nomove=!1},aabb_validate:function(){if(null==this.shapes.head)throw haxe_Exception.thrown("Error: bounds only makes sense when Body has shapes");if(null==this.shapes.head)throw haxe_Exception.thrown("Error: Body bounds only makes sense if it contains shapes");if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var n=this.shapes.head;null!=n;){var e=n.elt;if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next){i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;i.localCOMx+=1*i.lverts.next.next.x,i.localCOMy+=1*i.lverts.next.next.y;i.localCOMx*=.5,i.localCOMy*=.5}else{i.localCOMx=0,i.localCOMy=0;var r=0,l=i.lverts.next,s=l,a=l=l.next;for(l=l.next;null!=l;){var o=l;r+=a.x*(o.y-s.y);var p=o.y*a.x-o.x*a.y;i.localCOMx+=(a.x+o.x)*p,i.localCOMy+=(a.y+o.y)*p,s=a,a=o,l=l.next}var h=l=i.lverts.next;r+=a.x*(h.y-s.y);var u=h.y*a.x-h.x*a.y;i.localCOMx+=(a.x+h.x)*u,i.localCOMy+=(a.y+h.y)*u,s=a,a=h;var _=l=l.next;r+=a.x*(_.y-s.y);var c=_.y*a.x-_.x*a.y;i.localCOMx+=(a.x+_.x)*c,i.localCOMy+=(a.y+_.y)*c;var d=r=1/(3*r);i.localCOMx*=d,i.localCOMy*=d}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var f=t.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var x=t.radius,b=t.radius;t.aabb.minx=t.worldCOMx-x,t.aabb.miny=t.worldCOMy-b,t.aabb.maxx=t.worldCOMx+x,t.aabb.maxy=t.worldCOMy+b}else{var y=e.polygon;if(y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts();var v=y.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var m=y.lverts.next,g=y.gverts.next;null!=g;){var z=g,w=m;m=m.next,z.x=y.body.posx+(y.body.axisy*w.x-y.body.axisx*w.y),z.y=y.body.posy+(w.x*y.body.axisx+w.y*y.body.axisy),g=g.next}}if(null==y.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var O=y.gverts.next;y.aabb.minx=O.x,y.aabb.miny=O.y,y.aabb.maxx=O.x,y.aabb.maxy=O.y;for(var C=y.gverts.next.next;null!=C;){var E=C;E.x<y.aabb.minx&&(y.aabb.minx=E.x),E.x>y.aabb.maxx&&(y.aabb.maxx=E.x),E.y<y.aabb.miny&&(y.aabb.miny=E.y),E.y>y.aabb.maxy&&(y.aabb.maxy=E.y),C=C.next}}var U=this.aabb,M=e.aabb;M.minx<U.minx&&(U.minx=M.minx),M.maxx>U.maxx&&(U.maxx=M.maxx),M.miny<U.miny&&(U.miny=M.miny),M.maxy>U.maxy&&(U.maxy=M.maxy),n=n.next}}},shapes_adder:function(n){if(n.zpp_inner.body!=this){if(null!=n.zpp_inner.body&&n.zpp_inner.body.wrap_shapes.remove(n),n.zpp_inner.body=this,n.zpp_inner.addedToBody(),null!=this.space){var e=this.space,t=n.zpp_inner,i=t.body;i.world||(i.component.waket=e.stamp+(e.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&e.really_wake(i,!1)),e.bphase.insert(t),t.addedToSpace()}return 1==n.zpp_inner.type&&(n.zpp_inner.polygon.invalidate_gaxi(),n.zpp_inner.polygon.invalidate_gverts()),!0}return!1},shapes_subber:function(n){null!=this.space&&this.space.removed_shape(n.zpp_inner),n.zpp_inner.body=null,n.zpp_inner.removedFromBody()},shapes_invalidate:function(n){this.invalidate_shapes()},shapes_modifiable:function(){if(this.immutable_midstep("Body::shapes"),1==this.type&&null!=this.space)throw haxe_Exception.thrown("Error: Cannot modifiy shapes of static object once added to Space")},addedToSpace:function(){null==zpp_$nape_space_ZPP_$Component.zpp_pool?this.component=new zpp_$nape_space_ZPP_$Component:(this.component=zpp_$nape_space_ZPP_$Component.zpp_pool,zpp_$nape_space_ZPP_$Component.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!0,this.component.body=this,this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var n=this.arbiters.pop_unsafe(),e=this.space;if(n.cleared=!0,n.b2==this)for(var t=n.b1.arbiters,i=null,r=t.head;null!=r;){if(r.elt==n){var l,s;null==i?(s=(l=t.head).next,t.head=s,null==t.head&&(t.pushmod=!0)):(s=(l=i.next).next,i.next=s,null==s&&(t.pushmod=!0)),(c=l).elt=null,c.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=c,t.modified=!0,t.length--,t.pushmod=!0,!0;break}i=r,r=r.next}if(n.b1==this)for(var a=n.b2.arbiters,o=null,p=a.head;null!=p;){if(p.elt==n){var h,u;null==o?(u=(h=a.head).next,a.head=u,null==a.head&&(a.pushmod=!0)):(u=(h=o.next).next,o.next=u,null==u&&(a.pushmod=!0));var _=h;_.elt=null,_.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=_,a.modified=!0,a.length--,a.pushmod=!0,!0;break}o=p,p=p.next}null!=n.pair&&(n.pair.arb=null,n.pair=null),n.active=!1,e.f_arbiters.modified=!0}var c;(c=this.component).body=null,c.constraint=null,c.next=zpp_$nape_space_ZPP_$Component.zpp_pool,zpp_$nape_space_ZPP_$Component.zpp_pool=c,this.component=null,this.__iremovedFromSpace()},copy:function(){var n=(new nape_phys_Body).zpp_inner;n.type=this.type,n.bulletEnabled=this.bulletEnabled,n.disableCCD=this.disableCCD;for(var e=this.shapes.head;null!=e;){var t=e.elt,i=n.outer.zpp_inner.wrap_shapes,r=t.outer.copy();i.zpp_inner.reverse_flag?i.push(r):i.unshift(r),e=e.next}if(n.posx=this.posx,n.posy=this.posy,n.velx=this.velx,n.vely=this.vely,n.forcex=this.forcex,n.forcey=this.forcey,n.rot=this.rot,n.angvel=this.angvel,n.torque=this.torque,n.kinvelx=this.kinvelx,n.kinvely=this.kinvely,n.kinangvel=this.kinangvel,n.svelx=this.svelx,n.svely=this.svely,this.zip_axis){n.zip_axis=!0;for(e=n.shapes.head;null!=e;){1==(t=e.elt).type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}n.zip_worldCOM=!0}else n.axisx=this.axisx,n.axisy=this.axisy;return n.rot=this.rot,n.massMode=this.massMode,n.gravMassMode=this.gravMassMode,n.inertiaMode=this.inertiaMode,n.norotate=this.norotate,n.nomove=this.nomove,n.cmass=this.cmass,n.cinertia=this.cinertia,this.zip_mass?n.invalidate_mass():n.mass=this.mass,this.zip_gravMass?n.invalidate_gravMass():n.gravMass=this.gravMass,this.zip_gravMassScale?n.invalidate_gravMassScale():n.gravMassScale=this.gravMassScale,this.zip_inertia?n.invalidate_inertia():n.inertia=this.inertia,this.zip_aabb?n.zip_aabb=!0:(n.aabb.minx=this.aabb.minx,n.aabb.miny=this.aabb.miny,n.aabb.maxx=this.aabb.maxx,n.aabb.maxy=this.aabb.maxy),this.zip_localCOM?(n.zip_localCOM=!0,n.zip_worldCOM=!0):(n.localCOMx=this.localCOMx,n.localCOMy=this.localCOMy),this.zip_worldCOM?n.zip_worldCOM=!0:(n.worldCOMx=this.worldCOMx,n.worldCOMy=this.worldCOMy),this.copyto(n.outer),n.outer},__class__:zpp_$nape_phys_ZPP_$Body});var zpp_$nape_phys_ZPP_$Compound=function(){this.space=null,this.compound=null,this.depth=0,this.wrap_compounds=null,this.wrap_constraints=null,this.wrap_bodies=null,this.compounds=null,this.constraints=null,this.bodies=null,this.outer=null,zpp_$nape_phys_ZPP_$Interactor.call(this),this.icompound=this,this.depth=1;this.bodies=new zpp_$nape_util_ZNPList_$ZPP_$Body,this.wrap_bodies=zpp_$nape_util_ZPP_$BodyList.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$bind(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$bind(this,this.bodies_subber),this.wrap_bodies.zpp_inner._modifiable=$bind(this,this.bodies_modifiable),this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$bind(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$bind(this,this.constraints_subber),this.wrap_constraints.zpp_inner._modifiable=$bind(this,this.constraints_modifiable),this.compounds=new zpp_$nape_util_ZNPList_$ZPP_$Compound,this.wrap_compounds=zpp_$nape_util_ZPP_$CompoundList.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$bind(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$bind(this,this.compounds_subber),this.wrap_compounds.zpp_inner._modifiable=$bind(this,this.compounds_modifiable)};t["zpp_nape.phys.ZPP_Compound"]=zpp_$nape_phys_ZPP_$Compound,zpp_$nape_phys_ZPP_$Compound.__name__="zpp_nape.phys.ZPP_Compound",zpp_$nape_phys_ZPP_$Compound.__super__=zpp_$nape_phys_ZPP_$Interactor,zpp_$nape_phys_ZPP_$Compound.prototype=$extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{__imutable_midstep:function(n){if(null!=this.space&&this.space.midstep)throw haxe_Exception.thrown("Error: "+n+" cannot be set during space step()")},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},breakApart:function(){for(null!=this.space&&(this.__iremovedFromSpace(),this.space.nullInteractorType(this)),null!=this.compound?this.compound.compounds.remove(this):null!=this.space&&this.space.compounds.remove(this);null!=this.bodies.head;){var n=this.bodies.pop_unsafe();null!=(n.compound=this.compound)?this.compound.bodies.add(n):null!=this.space&&this.space.bodies.add(n),null!=this.space&&this.space.freshInteractorType(n)}for(;null!=this.constraints.head;){null!=((e=this.constraints.pop_unsafe()).compound=this.compound)?this.compound.constraints.add(e):null!=this.space&&this.space.constraints.add(e)}for(;null!=this.compounds.head;){var e;null!=((e=this.compounds.pop_unsafe()).compound=this.compound)?this.compound.compounds.add(e):null!=this.space&&this.space.compounds.add(e),null!=this.space&&this.space.freshInteractorType(e)}this.compound=null,this.space=null},bodies_adder:function(n){return n.zpp_inner.compound!=this&&(null!=n.zpp_inner.compound?n.zpp_inner.compound.wrap_bodies.remove(n):null!=n.zpp_inner.space&&n.zpp_inner.space.wrap_bodies.remove(n),n.zpp_inner.compound=this,null!=this.space&&this.space.addBody(n.zpp_inner),!0)},bodies_subber:function(n){n.zpp_inner.compound=null,null!=this.space&&this.space.remBody(n.zpp_inner)},bodies_modifiable:function(){this.immutable_midstep("Compound::bodies")},constraints_adder:function(n){return n.zpp_inner.compound!=this&&(null!=n.zpp_inner.compound?n.zpp_inner.compound.wrap_constraints.remove(n):null!=n.zpp_inner.space&&n.zpp_inner.space.wrap_constraints.remove(n),n.zpp_inner.compound=this,null!=this.space&&this.space.addConstraint(n.zpp_inner),!0)},constraints_subber:function(n){n.zpp_inner.compound=null,null!=this.space&&this.space.remConstraint(n.zpp_inner)},constraints_modifiable:function(){this.immutable_midstep("Compound::constraints")},compounds_adder:function(n){for(var e=this;null!=e&&e!=n.zpp_inner;)e=e.compound;if(e==n.zpp_inner)throw haxe_Exception.thrown("Error: Assignment would cause a cycle in the Compound tree: assigning "+n.toString()+".compound = "+this.outer.toString());return n.zpp_inner.compound!=this&&(null!=n.zpp_inner.compound?n.zpp_inner.compound.wrap_compounds.remove(n):null!=n.zpp_inner.space&&n.zpp_inner.space.wrap_compounds.remove(n),n.zpp_inner.compound=this,n.zpp_inner.depth=this.depth+1,null!=this.space&&this.space.addCompound(n.zpp_inner),!0)},compounds_subber:function(n){n.zpp_inner.compound=null,n.zpp_inner.depth=1,null!=this.space&&this.space.remCompound(n.zpp_inner)},compounds_modifiable:function(){this.immutable_midstep("Compound::compounds")},copy:function(n,e){var t=null==n;null==n&&(n=[]),null==e&&(e=[]);for(var i=new nape_phys_Compound,r=this.compounds.head;null!=r;){if((a=r.elt.copy(n,e)).zpp_inner.immutable_midstep("Compound::compound"),(null==a.zpp_inner.compound?null:a.zpp_inner.compound.outer)!=i)if(null!=(null==a.zpp_inner.compound?null:a.zpp_inner.compound.outer)&&(null==a.zpp_inner.compound?null:a.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(a),null!=i)(o=i.zpp_inner.wrap_compounds).zpp_inner.reverse_flag?o.push(a):o.unshift(a);a.zpp_inner.compound;r=r.next}for(r=this.bodies.head;null!=r;){var l=r.elt,s=l.outer.copy();if(n.push(zpp_$nape_constraint_ZPP_$CopyHelper.dict(l.id,s)),(null==s.zpp_inner.compound?null:s.zpp_inner.compound.outer)!=i)if(null!=(null==s.zpp_inner.compound?null:s.zpp_inner.compound.outer)&&(null==s.zpp_inner.compound?null:s.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(s),null!=i)(o=i.zpp_inner.wrap_bodies).zpp_inner.reverse_flag?o.push(s):o.unshift(s);s.zpp_inner.compound;r=r.next}for(r=this.constraints.head;null!=r;){var a,o;if((null==(a=r.elt.copy(n,e)).zpp_inner.compound?null:a.zpp_inner.compound.outer)!=i)if(null!=(null==a.zpp_inner.compound?null:a.zpp_inner.compound.outer)&&(null==a.zpp_inner.compound?null:a.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(a),null!=i)(o=i.zpp_inner.wrap_constraints).zpp_inner.reverse_flag?o.push(a):o.unshift(a);a.zpp_inner.compound;r=r.next}if(t)for(;e.length>0;)for(var p=e.pop(),h=0;h<n.length;){var u=n[h];if(++h,u.id==p.id){p.cb(u.bc);break}}return this.copyto(i),i},__class__:zpp_$nape_phys_ZPP_$Compound});var zpp_$nape_phys_ZPP_$FluidProperties=function(){this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.density=0,this.viscosity=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape,this.density=this.viscosity=1,this.wrap_gravity=null,this.gravityx=0,this.gravityy=0};t["zpp_nape.phys.ZPP_FluidProperties"]=zpp_$nape_phys_ZPP_$FluidProperties,zpp_$nape_phys_ZPP_$FluidProperties.__name__="zpp_nape.phys.ZPP_FluidProperties",zpp_$nape_phys_ZPP_$FluidProperties.prototype={wrapper:function(){if(null==this.outer){this.outer=new nape_phys_FluidProperties;var n=this.outer.zpp_inner;n.outer=null,n.next=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool,zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool=n,this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},feature_cons:function(){this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape},addShape:function(n){this.shapes.add(n)},remShape:function(n){this.shapes.remove(n)},copy:function(){var n;return null==zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool?n=new zpp_$nape_phys_ZPP_$FluidProperties:(n=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool,zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool=n.next,n.next=null),n.viscosity=this.viscosity,n.density=this.density,n},gravity_invalidate:function(n){this.gravityx=n.x,this.gravityy=n.y,this.invalidate()},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},getgravity:function(){var n,e=this.gravityx,t=this.gravityy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_gravity=n,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$bind(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$bind(this,this.gravity_validate)},invalidate:function(){for(var n=this.shapes.head;null!=n;){n.elt.invalidate_fluidprops(),n=n.next}},__class__:zpp_$nape_phys_ZPP_$FluidProperties};var zpp_$nape_shape_ZPP_$Shape=function(n){var e;this.zip_aabb=!1,this.aabb=null,this.pairs=null,this.node=null,this.sweep=null,this.sensorEnabled=!1,this.fluidEnabled=!1,this.fluidProperties=null,this.filter=null,this.material=null,this.refmaterial=null,this.polygon=null,this.circle=null,this.sweepCoef=0,this.zip_sweepRadius=!1,this.sweepRadius=0,this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_angDrag=!1,this.angDrag=0,this.inertia=0,this.zip_area_inertia=!1,this.area=0,this.type=0,this.body=null,this.outer=null,zpp_$nape_phys_ZPP_$Interactor.call(this),this.pairs=new zpp_$nape_util_ZNPList_$ZPP_$AABBPair,this.ishape=this,this.type=n,null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?e=new zpp_$nape_geom_ZPP_$AABB:(e=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=e.next,e.next=null),e.minx=0,e.miny=0,e.maxx=0,e.maxy=0,this.aabb=e,this.aabb._immutable=!0;this.aabb._validate=$bind(this,this.aabb_validate),this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.fluidEnabled=!1,this.sensorEnabled=!1,this.fluidProperties=null,this.body=null,this.refmaterial=new zpp_$nape_phys_ZPP_$Material,this.sweepRadius=this.sweepCoef=0};t["zpp_nape.shape.ZPP_Shape"]=zpp_$nape_shape_ZPP_$Shape,zpp_$nape_shape_ZPP_$Shape.__name__="zpp_nape.shape.ZPP_Shape",zpp_$nape_shape_ZPP_$Shape.__super__=zpp_$nape_phys_ZPP_$Interactor,zpp_$nape_shape_ZPP_$Shape.prototype=$extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{isCircle:function(){return 0==this.type},isPolygon:function(){return 1==this.type},invalidate_sweepRadius:function(){this.zip_sweepRadius=!0},validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,0==this.type?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},clear:function(){0==this.type?this.circle.__clear():this.polygon.__clear()},validate_aabb:function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){if((o=this.circle).zip_worldCOM&&null!=o.body){if(o.zip_worldCOM=!1,o.zip_localCOM){if(o.zip_localCOM=!1,1==o.type){if(null==(p=o.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==p.lverts.next.next)p.localCOMx=p.lverts.next.x,p.localCOMy=p.lverts.next.y;else if(null==p.lverts.next.next.next){p.localCOMx=p.lverts.next.x,p.localCOMy=p.lverts.next.y;var n=1;p.localCOMx+=p.lverts.next.next.x*n,p.localCOMy+=p.lverts.next.next.y*n;n=.5;p.localCOMx*=n,p.localCOMy*=n}else{p.localCOMx=0,p.localCOMy=0;var e=0,t=u=p.lverts.next,i=u=u.next;for(u=u.next;null!=u;){var r=u;e+=i.x*(r.y-t.y);var l=r.y*i.x-r.x*i.y;p.localCOMx+=(i.x+r.x)*l,p.localCOMy+=(i.y+r.y)*l,t=i,i=r,u=u.next}r=u=p.lverts.next;e+=i.x*(r.y-t.y);l=r.y*i.x-r.x*i.y;p.localCOMx+=(i.x+r.x)*l,p.localCOMy+=(i.y+r.y)*l,t=i,i=r;r=u=u.next;e+=i.x*(r.y-t.y);l=r.y*i.x-r.x*i.y;p.localCOMx+=(i.x+r.x)*l,p.localCOMy+=(i.y+r.y)*l;n=e=1/(3*e);p.localCOMx*=n,p.localCOMy*=n}}null!=o.wrap_localCOM&&(o.wrap_localCOM.zpp_inner.x=o.localCOMx,o.wrap_localCOM.zpp_inner.y=o.localCOMy)}(p=o.body).zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot)),o.worldCOMx=o.body.posx+(o.body.axisy*o.localCOMx-o.body.axisx*o.localCOMy),o.worldCOMy=o.body.posy+(o.localCOMx*o.body.axisx+o.localCOMy*o.body.axisy)}var s=o.radius,a=o.radius;o.aabb.minx=o.worldCOMx-s,o.aabb.miny=o.worldCOMy-a,o.aabb.maxx=o.worldCOMx+s,o.aabb.maxy=o.worldCOMy+a}else{var o;if((o=this.polygon).zip_gverts&&null!=o.body){var p;o.zip_gverts=!1,o.validate_lverts(),(p=o.body).zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot));for(var h=o.lverts.next,u=o.gverts.next;null!=u;){var _=u,c=h;h=h.next,_.x=o.body.posx+(o.body.axisy*c.x-o.body.axisx*c.y),_.y=o.body.posy+(c.x*o.body.axisx+c.y*o.body.axisy),u=u.next}}if(null==o.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var d=o.gverts.next;o.aabb.minx=d.x,o.aabb.miny=d.y,o.aabb.maxx=d.x,o.aabb.maxy=d.y;for(u=o.gverts.next.next;null!=u;){var f=u;f.x<o.aabb.minx&&(o.aabb.minx=f.x),f.x>o.aabb.maxx&&(o.aabb.maxx=f.x),f.y<o.aabb.miny&&(o.aabb.miny=f.y),f.y>o.aabb.maxy&&(o.aabb.maxy=f.y),u=u.next}}},force_validate_aabb:function(){if(0==this.type){(n=this.circle).worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy),n.aabb.minx=n.worldCOMx-n.radius,n.aabb.miny=n.worldCOMy-n.radius,n.aabb.maxx=n.worldCOMx+n.radius,n.aabb.maxy=n.worldCOMy+n.radius}else{var n,e=(n=this.polygon).lverts.next,t=n.gverts.next,i=e;e=e.next,t.x=n.body.posx+(n.body.axisy*i.x-n.body.axisx*i.y),t.y=n.body.posy+(i.x*n.body.axisx+i.y*n.body.axisy),n.aabb.minx=t.x,n.aabb.miny=t.y,n.aabb.maxx=t.x,n.aabb.maxy=t.y;for(var r=n.gverts.next.next;null!=r;){var l=r;i=e;e=e.next,l.x=n.body.posx+(n.body.axisy*i.x-n.body.axisx*i.y),l.y=n.body.posy+(i.x*n.body.axisx+i.y*n.body.axisy),l.x<n.aabb.minx&&(n.aabb.minx=l.x),l.x>n.aabb.maxx&&(n.aabb.maxx=l.x),l.y<n.aabb.miny&&(n.aabb.miny=l.y),l.y>n.aabb.maxy&&(n.aabb.maxy=l.y),r=r.next}}},invalidate_aabb:function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,0==this.type?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)&&(this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,0==this.type?this.circle.__validate_angDrag():this.polygon.__validate_angDrag())},validate_localCOM:function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var n=this.polygon;if(null==n.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next){n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;var e=1;n.localCOMx+=n.lverts.next.next.x*e,n.localCOMy+=n.lverts.next.next.y*e;e=.5;n.localCOMx*=e,n.localCOMy*=e}else{n.localCOMx=0,n.localCOMy=0;var t=0,i=n.lverts.next,r=i,l=i=i.next;for(i=i.next;null!=i;){var s=i;t+=l.x*(s.y-r.y);var a=s.y*l.x-s.x*l.y;n.localCOMx+=(l.x+s.x)*a,n.localCOMy+=(l.y+s.y)*a,r=l,l=s,i=i.next}s=i=n.lverts.next;t+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;n.localCOMx+=(l.x+s.x)*a,n.localCOMy+=(l.y+s.y)*a,r=l,l=s;s=i=i.next;t+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;n.localCOMx+=(l.x+s.x)*a,n.localCOMy+=(l.y+s.y)*a;e=t=1/(3*t);n.localCOMx*=e,n.localCOMy*=e}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},validate_worldCOM:function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){if(null==(a=this.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next){a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;var n=1;a.localCOMx+=a.lverts.next.next.x*n,a.localCOMy+=a.lverts.next.next.y*n;n=.5;a.localCOMx*=n,a.localCOMy*=n}else{a.localCOMx=0,a.localCOMy=0;var e=0,t=a.lverts.next,i=t,r=t=t.next;for(t=t.next;null!=t;){var l=t;e+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s,i=r,r=l,t=t.next}l=t=a.lverts.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=t=t.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s;n=e=1/(3*e);a.localCOMx*=n,a.localCOMy*=n}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var a;(a=this.body).zip_axis&&(a.zip_axis=!1,a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}},getworldCOM:function(){if(null==this.body)throw haxe_Exception.thrown("Error: worldCOM only makes sense when Shape belongs to a Body");if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){if(null==(a=this.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next){a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;var n=1;a.localCOMx+=a.lverts.next.next.x*n,a.localCOMy+=a.lverts.next.next.y*n;n=.5;a.localCOMx*=n,a.localCOMy*=n}else{a.localCOMx=0,a.localCOMy=0;var e=0,t=a.lverts.next,i=t,r=t=t.next;for(t=t.next;null!=t;){var l=t;e+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s,i=r,r=l,t=t.next}l=t=a.lverts.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=t=t.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s;n=e=1/(3*e);a.localCOMx*=n,a.localCOMy*=n}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var a;(a=this.body).zip_axis&&(a.zip_axis=!1,a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},invalidate_area_inertia:function(){if(this.zip_area_inertia=!0,null!=this.body){var n=this.body;n.zip_localCOM=!0,n.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){if(this.zip_localCOM=!0,this.invalidate_area_inertia(),0==this.type&&(this.zip_sweepRadius=!0),this.invalidate_angDrag(),this.invalidate_worldCOM(),null!=this.body){var n=this.body;n.zip_localCOM=!0,n.zip_worldCOM=!0}},invalidate_worldCOM:function(){this.zip_worldCOM=!0,this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(n){if(0!=(n&zpp_$nape_phys_ZPP_$Material.WAKE)&&this.wake(),0!=(n&zpp_$nape_phys_ZPP_$Material.ARBITERS)&&null!=this.body&&this.body.refreshArbiters(),0!=(n&zpp_$nape_phys_ZPP_$Material.PROPS)&&null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}0!=(n&zpp_$nape_phys_ZPP_$Material.ANGDRAG)&&this.invalidate_angDrag(),this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){this.fluidEnabled&&this.wake()},aabb_validate:function(){if(null==this.body)throw haxe_Exception.thrown("Error: bounds only makes sense when Shape belongs to a Body");if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){if((o=this.circle).zip_worldCOM&&null!=o.body){if(o.zip_worldCOM=!1,o.zip_localCOM){if(o.zip_localCOM=!1,1==o.type){if(null==(p=o.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==p.lverts.next.next)p.localCOMx=p.lverts.next.x,p.localCOMy=p.lverts.next.y;else if(null==p.lverts.next.next.next){p.localCOMx=p.lverts.next.x,p.localCOMy=p.lverts.next.y;var n=1;p.localCOMx+=p.lverts.next.next.x*n,p.localCOMy+=p.lverts.next.next.y*n;n=.5;p.localCOMx*=n,p.localCOMy*=n}else{p.localCOMx=0,p.localCOMy=0;var e=0,t=u=p.lverts.next,i=u=u.next;for(u=u.next;null!=u;){var r=u;e+=i.x*(r.y-t.y);var l=r.y*i.x-r.x*i.y;p.localCOMx+=(i.x+r.x)*l,p.localCOMy+=(i.y+r.y)*l,t=i,i=r,u=u.next}r=u=p.lverts.next;e+=i.x*(r.y-t.y);l=r.y*i.x-r.x*i.y;p.localCOMx+=(i.x+r.x)*l,p.localCOMy+=(i.y+r.y)*l,t=i,i=r;r=u=u.next;e+=i.x*(r.y-t.y);l=r.y*i.x-r.x*i.y;p.localCOMx+=(i.x+r.x)*l,p.localCOMy+=(i.y+r.y)*l;n=e=1/(3*e);p.localCOMx*=n,p.localCOMy*=n}}null!=o.wrap_localCOM&&(o.wrap_localCOM.zpp_inner.x=o.localCOMx,o.wrap_localCOM.zpp_inner.y=o.localCOMy)}(p=o.body).zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot)),o.worldCOMx=o.body.posx+(o.body.axisy*o.localCOMx-o.body.axisx*o.localCOMy),o.worldCOMy=o.body.posy+(o.localCOMx*o.body.axisx+o.localCOMy*o.body.axisy)}var s=o.radius,a=o.radius;o.aabb.minx=o.worldCOMx-s,o.aabb.miny=o.worldCOMy-a,o.aabb.maxx=o.worldCOMx+s,o.aabb.maxy=o.worldCOMy+a}else{var o;if((o=this.polygon).zip_gverts&&null!=o.body){var p;o.zip_gverts=!1,o.validate_lverts(),(p=o.body).zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot));for(var h=o.lverts.next,u=o.gverts.next;null!=u;){var _=u,c=h;h=h.next,_.x=o.body.posx+(o.body.axisy*c.x-o.body.axisx*c.y),_.y=o.body.posy+(c.x*o.body.axisx+c.y*o.body.axisy),u=u.next}}if(null==o.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var d=o.gverts.next;o.aabb.minx=d.x,o.aabb.miny=d.y,o.aabb.maxx=d.x,o.aabb.maxy=d.y;for(u=o.gverts.next.next;null!=u;){var f=u;f.x<o.aabb.minx&&(o.aabb.minx=f.x),f.x>o.aabb.maxx&&(o.aabb.maxx=f.x),f.y<o.aabb.miny&&(o.aabb.miny=f.y),f.y>o.aabb.maxy&&(o.aabb.maxy=f.y),u=u.next}}},setMaterial:function(n){this.material!=n&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=n,null!=this.body&&null!=this.body.space&&n.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(n){this.filter!=n&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=n,null!=this.body&&null!=this.body.space&&n.shapes.add(this),this.wake())},setFluid:function(n){this.fluidProperties!=n&&(null!=this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=n,null!=this.body&&null!=this.body.space&&n.shapes.add(this),this.fluidEnabled&&this.wake())},__immutable_midstep:function(n){if(null!=this.body&&null!=this.body.space&&this.body.space.midstep)throw haxe_Exception.thrown("Error: "+n+" cannot be set during a space step()")},addedToBody:function(){this.invalidate_worldCOM(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace(),this.material.shapes.add(this),this.filter.shapes.add(this),null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace(),this.material.shapes.remove(this),this.filter.shapes.remove(this),null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},copy:function(){var n,e=null;return e=0==this.type?this.circle.__copy():this.polygon.__copy(),this.zip_area_inertia?e.invalidate_area_inertia():(e.area=this.area,e.inertia=this.inertia),this.zip_sweepRadius?e.zip_sweepRadius=!0:(e.sweepRadius=this.sweepRadius,e.sweepCoef=this.sweepCoef),this.zip_angDrag?e.invalidate_angDrag():e.angDrag=this.angDrag,this.zip_aabb?(e.zip_aabb=!0,null!=e.body&&(e.body.zip_aabb=!0)):(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy),(n=e.material).outer=null,n.next=zpp_$nape_phys_ZPP_$Material.zpp_pool,zpp_$nape_phys_ZPP_$Material.zpp_pool=n,(n=e.filter).outer=null,n.next=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool,zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=n,e.material=this.material,e.filter=this.filter,null!=this.fluidProperties&&(e.fluidProperties=this.fluidProperties),e.fluidEnabled=this.fluidEnabled,e.sensorEnabled=this.sensorEnabled,null!=this.userData&&(e.userData=Reflect.copy(this.userData)),this.copyto(e.outer),e.outer},__class__:zpp_$nape_shape_ZPP_$Shape});var zpp_$nape_shape_ZPP_$Circle=function(){this.radius=0,this.outer_zn=null,zpp_$nape_shape_ZPP_$Shape.call(this,0),this.circle=this,this.zip_localCOM=!1};t["zpp_nape.shape.ZPP_Circle"]=zpp_$nape_shape_ZPP_$Circle,zpp_$nape_shape_ZPP_$Circle.__name__="zpp_nape.shape.ZPP_Circle",zpp_$nape_shape_ZPP_$Circle.__super__=zpp_$nape_shape_ZPP_$Shape,zpp_$nape_shape_ZPP_$Circle.prototype=$extend(zpp_$nape_shape_ZPP_$Shape.prototype,{__clear:function(){},invalidate_radius:function(){this.invalidate_area_inertia(),this.invalidate_angDrag(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),null!=this.body&&this.body.wake()},localCOM_validate:function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy},localCOM_invalidate:function(n){this.localCOMx=n.x,this.localCOMy=n.y,this.invalidate_localCOM(),null!=this.body&&this.body.wake()},localCOM_immutable:function(){if(null!=this.body&&1==this.body.type&&null!=this.body.space)throw haxe_Exception.thrown("Error: Cannot modify localCOM of Circle added to a static Body whilst within a Space")},setupLocalCOM:function(){var n,e=this.localCOMx,t=this.localCOMy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_localCOM=n,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$bind(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$bind(this,this.localCOM_invalidate),this.wrap_localCOM.zpp_inner._isimmutable=$bind(this,this.localCOM_immutable)},__validate_aabb:function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){if(null==(a=this.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next){a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;var n=1;a.localCOMx+=a.lverts.next.next.x*n,a.localCOMy+=a.lverts.next.next.y*n;n=.5;a.localCOMx*=n,a.localCOMy*=n}else{a.localCOMx=0,a.localCOMy=0;var e=0,t=a.lverts.next,i=t,r=t=t.next;for(t=t.next;null!=t;){var l=t;e+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s,i=r,r=l,t=t.next}l=t=a.lverts.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=t=t.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;a.localCOMx+=(r.x+l.x)*s,a.localCOMy+=(r.y+l.y)*s;n=e=1/(3*e);a.localCOMx*=n,a.localCOMy*=n}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var a;(a=this.body).zip_axis&&(a.zip_axis=!1,a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}var o=this.radius,p=this.radius;this.aabb.minx=this.worldCOMx-o,this.aabb.miny=this.worldCOMy-p,this.aabb.maxx=this.worldCOMx+o,this.aabb.maxy=this.worldCOMy+p},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy),this.aabb.minx=this.worldCOMx-this.radius,this.aabb.miny=this.worldCOMy-this.radius,this.aabb.maxx=this.worldCOMx+this.radius,this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy),this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var n=this.radius*this.radius;this.area=n*Math.PI,this.inertia=.5*n+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var n=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,e=this.radius*this.radius,t=this.material.dynamicFriction*nape_Config.fluidAngularDragFriction;this.angDrag=(n+2*e)*t+.5*nape_Config.fluidAngularDrag*(1+nape_Config.fluidVacuumDrag)*n,this.angDrag/=2*(n+.5*e)},__scale:function(n,e){var t=((n<0?-n:n)+(e<0?-e:e))/2;this.radius*=t<0?-t:t,this.invalidate_radius(),this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy>0&&(this.localCOMx*=n,this.localCOMy*=e,this.invalidate_localCOM())},__translate:function(n,e){this.localCOMx+=1*n,this.localCOMy+=1*e,this.invalidate_localCOM()},__rotate:function(n,e){if(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy>0){var t,i;t=e*this.localCOMx-n*this.localCOMy,i=this.localCOMx*n+this.localCOMy*e,this.localCOMx=t,this.localCOMy=i,this.invalidate_localCOM()}},__transform:function(n){var e=n.zpp_inner.a*n.zpp_inner.d-n.zpp_inner.b*n.zpp_inner.c;e<0&&(e=-e),this.radius*=Math.sqrt(e);var t=n.zpp_inner.a*this.localCOMx+n.zpp_inner.b*this.localCOMy+n.zpp_inner.tx;this.localCOMy=n.zpp_inner.c*this.localCOMx+n.zpp_inner.d*this.localCOMy+n.zpp_inner.ty,this.localCOMx=t,this.invalidate_radius(),this.invalidate_localCOM()},__copy:function(){var n=new nape_shape_Circle(this.radius).zpp_inner_zn;return n.localCOMx=this.localCOMx,n.localCOMy=this.localCOMy,n.zip_localCOM=!1,n},__class__:zpp_$nape_shape_ZPP_$Circle});var zpp_$nape_shape_ZPP_$Edge=function(){this.tp1=0,this.tp0=0,this.gp1=null,this.lp1=null,this.gp0=null,this.lp0=null,this.gprojection=0,this.lprojection=0,this.length=0,this.wrap_gnorm=null,this.gnormy=0,this.gnormx=0,this.wrap_lnorm=null,this.lnormy=0,this.lnormx=0,this.outer=null,this.polygon=null,this.next=null,this.lnormx=0,this.lnormy=0,this.gnormx=0,this.gnormy=0,this.length=0,this.lprojection=0,this.gprojection=0};t["zpp_nape.shape.ZPP_Edge"]=zpp_$nape_shape_ZPP_$Edge,zpp_$nape_shape_ZPP_$Edge.__name__="zpp_nape.shape.ZPP_Edge",zpp_$nape_shape_ZPP_$Edge.prototype={free:function(){this.polygon=null},alloc:function(){},wrapper:function(){return null==this.outer&&(zpp_$nape_shape_ZPP_$Edge.internal=!0,this.outer=new nape_shape_Edge,zpp_$nape_shape_ZPP_$Edge.internal=!1,this.outer.zpp_inner=this),this.outer},lnorm_validate:function(){if(null==this.polygon)throw haxe_Exception.thrown("Error: Edge not currently in use");this.polygon.validate_laxi(),this.wrap_lnorm.zpp_inner.x=this.lnormx,this.wrap_lnorm.zpp_inner.y=this.lnormy},gnorm_validate:function(){if(null==this.polygon)throw haxe_Exception.thrown("Error: Edge not currently in use");if(null==this.polygon.body)throw haxe_Exception.thrown("Error: Edge worldNormal only makes sense if the parent Polygon is contained within a rigid body");var n=this.polygon;if(n.zip_gaxi&&null!=n.body){if(n.zip_gaxi=!1,n.validate_laxi(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),n.zip_gverts&&null!=n.body){var e;n.zip_gverts=!1,n.validate_lverts(),(e=n.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=n.lverts.next,i=n.gverts.next;null!=i;){var r=i,l=t;t=t.next,r.x=n.body.posx+(n.body.axisy*l.x-n.body.axisx*l.y),r.y=n.body.posy+(l.x*n.body.axisx+l.y*n.body.axisy),i=i.next}}var s=n.edges.head,a=i=n.gverts.next;for(i=i.next;null!=i;){var o=i,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy,a=o,i=i.next}o=n.gverts.next,p=s.elt;s=s.next,p.gp0=a,p.gp1=o,p.gnormx=n.body.axisy*p.lnormx-n.body.axisx*p.lnormy,p.gnormy=p.lnormx*n.body.axisx+p.lnormy*n.body.axisy,p.gprojection=n.body.posx*p.gnormx+n.body.posy*p.gnormy+p.lprojection,null!=p.wrap_gnorm&&(p.wrap_gnorm.zpp_inner.x=p.gnormx,p.wrap_gnorm.zpp_inner.y=p.gnormy),p.tp0=p.gp0.y*p.gnormx-p.gp0.x*p.gnormy,p.tp1=p.gp1.y*p.gnormx-p.gp1.x*p.gnormy}this.wrap_gnorm.zpp_inner.x=this.gnormx,this.wrap_gnorm.zpp_inner.y=this.gnormy},getlnorm:function(){var n,e=this.lnormx,t=this.lnormy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_lnorm=n,this.wrap_lnorm.zpp_inner._immutable=!0,this.wrap_lnorm.zpp_inner._validate=$bind(this,this.lnorm_validate)},getgnorm:function(){var n,e=this.gnormx,t=this.gnormy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_gnorm=n,this.wrap_gnorm.zpp_inner._immutable=!0,this.wrap_gnorm.zpp_inner._validate=$bind(this,this.gnorm_validate)},__class__:zpp_$nape_shape_ZPP_$Edge};var zpp_$nape_shape_ZPP_$Polygon=function(){this.zip_sanitation=!1,this.zip_valid=!1,this.zip_gaxi=!1,this.zip_gverts=!1,this.zip_laxi=!1,this.zip_lverts=!1,this.reverse_flag=!1,this.edgeCnt=0,this.wrap_edges=null,this.edges=null,this.wrap_gverts=null,this.gverts=null,this.wrap_lverts=null,this.lverts=null,this.outer_zn=null,zpp_$nape_shape_ZPP_$Shape.call(this,1),this.polygon=this,this.lverts=new zpp_$nape_geom_ZPP_$Vec2,this.gverts=new zpp_$nape_geom_ZPP_$Vec2,this.edges=new zpp_$nape_util_ZNPList_$ZPP_$Edge,this.edgeCnt=0};t["zpp_nape.shape.ZPP_Polygon"]=zpp_$nape_shape_ZPP_$Polygon,zpp_$nape_shape_ZPP_$Polygon.__name__="zpp_nape.shape.ZPP_Polygon",zpp_$nape_shape_ZPP_$Polygon.__super__=zpp_$nape_shape_ZPP_$Shape,zpp_$nape_shape_ZPP_$Polygon.prototype=$extend(zpp_$nape_shape_ZPP_$Shape.prototype,{__clear:function(){},lverts_pa_invalidate:function(n){this.invalidate_lverts()},lverts_pa_immutable:function(){if(null!=this.body&&1==this.body.type&&null!=this.body.space)throw haxe_Exception.thrown("Error: Cannot modify local vertex of Polygon added to a static body whilst within a Space")},gverts_pa_validate:function(){if(null==this.body)throw haxe_Exception.thrown("Error: World vertex only makes sense when Polygon is contained in a rigid body");if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var n=this.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var e=this.lverts.next,t=this.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),i.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),t=t.next}}},lverts_post_adder:function(n){n.zpp_inner._invalidate=$bind(this,this.lverts_pa_invalidate),n.zpp_inner._isimmutable=$bind(this,this.lverts_pa_immutable);for(var e=null,t=null,i=this.lverts.next;null!=i;){if(i==n.zpp_inner)break;e=null==e?this.gverts.next:e.next,t=null==t?this.edges.head:t.next,i=i.next}var r,l=!0;null==l&&(l=!1),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?r=new zpp_$nape_geom_ZPP_$Vec2:(r=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=l,r.x=0,r.y=0;var s,a=r;(this.gverts.insert(e,a),null!=this.lverts.next.next)&&(null==this.lverts.next.next.next?(null==zpp_$nape_shape_ZPP_$Edge.zpp_pool?s=new zpp_$nape_shape_ZPP_$Edge:(s=zpp_$nape_shape_ZPP_$Edge.zpp_pool,zpp_$nape_shape_ZPP_$Edge.zpp_pool=s.next,s.next=null),s.polygon=this,this.edges.add(s),null==zpp_$nape_shape_ZPP_$Edge.zpp_pool?s=new zpp_$nape_shape_ZPP_$Edge:(s=zpp_$nape_shape_ZPP_$Edge.zpp_pool,zpp_$nape_shape_ZPP_$Edge.zpp_pool=s.next,s.next=null),s.polygon=this,this.edges.add(s),this.edgeCnt+=2):(null==zpp_$nape_shape_ZPP_$Edge.zpp_pool?s=new zpp_$nape_shape_ZPP_$Edge:(s=zpp_$nape_shape_ZPP_$Edge.zpp_pool,zpp_$nape_shape_ZPP_$Edge.zpp_pool=s.next,s.next=null),s.polygon=this,this.edges.insert(t,s),this.edgeCnt++));a._validate=$bind(this,this.gverts_pa_validate)},lverts_subber:function(n){this.cleanup_lvert(n.zpp_inner)},lverts_invalidate:function(n){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},lverts_modifiable:function(){if(this.immutable_midstep("Polygon::localVerts"),null!=this.body&&1==this.body.type&&null!=this.body.space)throw haxe_Exception.thrown("Error: Cannot modifiy shapes of static object once added to Space")},gverts_validate:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var n=this.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var e=this.lverts.next,t=this.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),i.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),t=t.next}}},edges_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=zpp_$nape_util_ZPP_$MixVec2List.get(this.lverts),this.wrap_lverts.zpp_inner.post_adder=$bind(this,this.lverts_post_adder),this.wrap_lverts.zpp_inner.subber=$bind(this,this.lverts_subber),this.wrap_lverts.zpp_inner._invalidate=$bind(this,this.lverts_invalidate),this.wrap_lverts.zpp_inner._validate=$bind(this,this.lverts_validate),this.wrap_lverts.zpp_inner._modifiable=$bind(this,this.lverts_modifiable),this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},getgverts:function(){this.wrap_gverts=zpp_$nape_util_ZPP_$MixVec2List.get(this.gverts,!0),this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_gverts.zpp_inner._validate=$bind(this,this.gverts_validate)},getedges:function(){this.wrap_edges=zpp_$nape_util_ZPP_$EdgeList.get(this.edges,!0),this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_edges.zpp_inner._validate=$bind(this,this.edges_validate)},invalidate_lverts:function(){this.invalidate_laxi(),this.invalidate_area_inertia(),this.invalidate_angDrag(),this.invalidate_localCOM(),this.invalidate_gverts(),this.zip_lverts=!0,this.zip_valid=!0,this.zip_sanitation=!0,null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi(),this.zip_sweepRadius=!0,this.zip_laxi=!0},invalidate_gverts:function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},valid:function(){if(this.zip_valid){if(this.zip_valid=!1,this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real()),this.lverts.length<3)return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this.validation=zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE;if(this.validate_lverts(),this.validate_area_inertia(),this.area<nape_Config.epsilon)return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this.validation=zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE;var n=!1,e=!1,t=!0,i=M=this.lverts.next,r=M=M.next;for(M=M.next;null!=M;){var l=0,s=0;l=(o=M).x-r.x,s=o.y-r.y;var a=0;if(a=r.x-i.x,(p=(r.y-i.y)*l-a*s)>nape_Config.epsilon?e=!0:p<-nape_Config.epsilon&&(n=!0),e&&n){t=!1;break}i=r,r=o,M=M.next}if(t){for(var o=M=this.lverts.next;;){l=0,s=0;l=o.x-r.x,s=o.y-r.y;a=0;if(a=r.x-i.x,(p=(r.y-i.y)*l-a*s)>nape_Config.epsilon?e=!0:p<-nape_Config.epsilon&&(n=!0),e&&n){t=!1;break}break}if(t){i=r,r=o;for(o=M=M.next;;){l=0,s=0;l=o.x-r.x,s=o.y-r.y;var p;a=0;if(a=r.x-i.x,(p=(r.y-i.y)*l-a*s)>nape_Config.epsilon?e=!0:p<-nape_Config.epsilon&&(n=!0),e&&n)break;break}}}if(e&&n)return null==zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this.validation=zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE;var h=!0;t=!0,i=M=this.lverts.next;for(M=M.next;null!=M;){r=M;if(!h){t=!1;break}var u=!0,_=this.lverts.next,c=_;for(_=_.next;null!=_;){var d=_;if(i!=c&&i!=d&&r!=c&&r!=d){var f=0,x=0;f=i.x-c.x,x=i.y-c.y;var b=0,y=0;b=r.x-i.x;var v=0,m=0;if((T=(y=r.y-i.y)*(v=d.x-c.x)-b*(m=d.y-c.y))*T>nape_Config.epsilon)if((k=(m*f-v*x)*(T=1/T))>nape_Config.epsilon&&k<1-nape_Config.epsilon)if((D=(y*f-b*x)*T)>nape_Config.epsilon&&D<1-nape_Config.epsilon){h=!1,u=!1;break}c=d,_=_.next}else c=d,_=_.next}if(u)for(;;){var g=this.lverts.next;if(i==c||i==g||r==c||r==g)break;var z=0,w=0;z=i.x-c.x,w=i.y-c.y;var O=0,C=0;O=r.x-i.x;var E=0,U=0;if((S=(C=r.y-i.y)*(E=g.x-c.x)-O*(U=g.y-c.y))*S>nape_Config.epsilon)if((A=(U*z-E*w)*(S=1/S))>nape_Config.epsilon&&A<1-nape_Config.epsilon)if((P=(C*z-O*w)*S)>nape_Config.epsilon&&P<1-nape_Config.epsilon){h=!1;break}break}i=r,M=M.next}if(t)for(;;){r=this.lverts.next;if(!h)break;var M;t=!0,c=M=this.lverts.next;for(M=M.next;null!=M;){d=M;if(i!=c&&i!=d&&r!=c&&r!=d){f=0,x=0;f=i.x-c.x,x=i.y-c.y;b=0,y=0;b=r.x-i.x;var T,k,D;v=0,m=0;if((T=(y=r.y-i.y)*(v=d.x-c.x)-b*(m=d.y-c.y))*T>nape_Config.epsilon)if((k=(m*f-v*x)*(T=1/T))>nape_Config.epsilon&&k<1-nape_Config.epsilon)if((D=(y*f-b*x)*T)>nape_Config.epsilon&&D<1-nape_Config.epsilon){h=!1,t=!1;break}c=d,M=M.next}else c=d,M=M.next}if(t)for(;;){g=this.lverts.next;if(i==c||i==g||r==c||r==g)break;z=0,w=0;z=i.x-c.x,w=i.y-c.y;O=0,C=0;O=r.x-i.x;var S,A,P;E=0,U=0;if((S=(C=r.y-i.y)*(E=g.x-c.x)-O*(U=g.y-c.y))*S>nape_Config.epsilon)if((A=(U*z-E*w)*(S=1/S))>nape_Config.epsilon&&A<1-nape_Config.epsilon)if((P=(C*z-O*w)*S)>nape_Config.epsilon&&P<1-nape_Config.epsilon){h=!1;break}break}break}return h?(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this.validation=zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID):(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),this.validation=zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING)}return this.validation},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,this.lverts.length>2&&(this.validate_area_inertia(),this.area<0&&(this.reverse_vertices(),this.area=-this.area)))},cleanup_lvert:function(n){for(var e=null,t=null,i=this.lverts.next;null!=i;){if(i==n)break;e=null==e?this.gverts.next:e.next,t=null==t?this.edges.head:t.next,i=i.next}var r=null==e?this.gverts.next:e.next;if(this.gverts.erase(e),null!=(l=r).outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l,2==this.edgeCnt)(l=r=this.edges.pop_unsafe()).polygon=null,l.next=zpp_$nape_shape_ZPP_$Edge.zpp_pool,zpp_$nape_shape_ZPP_$Edge.zpp_pool=l,(l=r=this.edges.pop_unsafe()).polygon=null,l.next=zpp_$nape_shape_ZPP_$Edge.zpp_pool,zpp_$nape_shape_ZPP_$Edge.zpp_pool=l,this.edgeCnt=0;else if(0!=this.edgeCnt){var l;r=null==t?this.edges.head.elt:t.next.elt;this.edges.erase(t),(l=r).polygon=null,l.next=zpp_$nape_shape_ZPP_$Edge.zpp_pool,zpp_$nape_shape_ZPP_$Edge.zpp_pool=l,this.edgeCnt--}},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(null!=this.lverts.next&&null!=this.lverts.next.next&&null!=this.lverts.next.next.next){for(var n=null,e=this.lverts.next;null!=e;){var t,i,r=null==e.next?this.lverts.next:e.next;(t=(o=e).x-r.x)*t+(i=o.y-r.y)*i<nape_Config.epsilon*nape_Config.epsilon?(this.cleanup_lvert(e),e=this.lverts.erase(n)):(n=e,e=e.next)}if(null!=this.lverts.next)for(var l;;){l=!1;for(n=this.lverts.next;null!=n;){var s,a,o=n,p=null==(e=null==n.next?this.lverts.next:n.next).next?this.lverts.next:e.next;s=(r=e).x-o.x,a=r.y-o.y;var h;h=p.x-r.x;var u=(p.y-r.y)*s-h*a;u*u>=nape_Config.epsilon*nape_Config.epsilon||(this.cleanup_lvert(e),this.lverts.erase(null==n.next?null:n),l=!0),n=n.next}if(!l)break}}},reverse_vertices:function(){this.lverts.reverse(),this.gverts.reverse(),this.edges.reverse();var n=this.edges.iterator_at(this.edgeCnt-1),e=this.edges.pop_unsafe();this.edges.insert(n,e),this.reverse_flag=!this.reverse_flag,null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1,this.validate_lverts();var n=this.edges.head,e=this.lverts.next,t=e;for(e=e.next;null!=e;){var i=e,r=n.elt;n=n.next,r.lp0=t,r.lp1=i;var l=0,s=0;l=t.x-i.x,s=t.y-i.y;var a=Math.sqrt(l*l+s*s);r.length=a;var o=l*=p=1/a;l=-(s*=p),s=o,r.lprojection=l*t.x+s*t.y,r.lnormx=l,r.lnormy=s,null!=r.wrap_lnorm&&(r.wrap_lnorm.zpp_inner.x=l,r.wrap_lnorm.zpp_inner.y=s),t=i,e=e.next}i=this.lverts.next,r=n.elt;n=n.next,r.lp0=t,r.lp1=i;l=0,s=0;l=t.x-i.x,s=t.y-i.y;a=Math.sqrt(l*l+s*s);r.length=a,s*=p=1/a;var p=l*=p;l=-s,s=p,r.lprojection=l*t.x+s*t.y,r.lnormx=l,r.lnormy=s,null!=r.wrap_lnorm&&(r.wrap_lnorm.zpp_inner.x=l,r.wrap_lnorm.zpp_inner.y=s)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var n=this.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var e=this.lverts.next,t=this.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),i.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),t=t.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){if(this.zip_gaxi=!1,this.validate_laxi(),(n=this.body).zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot)),this.zip_gverts&&null!=this.body){var n;this.zip_gverts=!1,this.validate_lverts(),(n=this.body).zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var e=this.lverts.next,t=this.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),i.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),t=t.next}}var l=this.edges.head,s=t=this.gverts.next;for(t=t.next;null!=t;){var a=t,o=l.elt;l=l.next,o.gp0=s,o.gp1=a,o.gnormx=this.body.axisy*o.lnormx-this.body.axisx*o.lnormy,o.gnormy=o.lnormx*this.body.axisx+o.lnormy*this.body.axisy,o.gprojection=this.body.posx*o.gnormx+this.body.posy*o.gnormy+o.lprojection,null!=o.wrap_gnorm&&(o.wrap_gnorm.zpp_inner.x=o.gnormx,o.wrap_gnorm.zpp_inner.y=o.gnormy),o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy,o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy,s=a,t=t.next}a=this.gverts.next,o=l.elt;l=l.next,o.gp0=s,o.gp1=a,o.gnormx=this.body.axisy*o.lnormx-this.body.axisx*o.lnormy,o.gnormy=o.lnormx*this.body.axisx+o.lnormy*this.body.axisy,o.gprojection=this.body.posx*o.gnormx+this.body.posy*o.gnormy+o.lprojection,null!=o.wrap_gnorm&&(o.wrap_gnorm.zpp_inner.x=o.gnormx,o.wrap_gnorm.zpp_inner.y=o.gnormy),o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy,o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy}},__validate_aabb:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var n=this.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var e=this.lverts.next,t=this.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),i.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),t=t.next}}if(null==this.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var l=this.gverts.next;this.aabb.minx=l.x,this.aabb.miny=l.y,this.aabb.maxx=l.x,this.aabb.maxy=l.y;for(t=this.gverts.next.next;null!=t;){var s=t;s.x<this.aabb.minx&&(this.aabb.minx=s.x),s.x>this.aabb.maxx&&(this.aabb.maxx=s.x),s.y<this.aabb.miny&&(this.aabb.miny=s.y),s.y>this.aabb.maxy&&(this.aabb.maxy=s.y),t=t.next}},_force_validate_aabb:function(){var n=this.lverts.next,e=this.gverts.next,t=n;n=n.next,e.x=this.body.posx+(this.body.axisy*t.x-this.body.axisx*t.y),e.y=this.body.posy+(t.x*this.body.axisx+t.y*this.body.axisy),this.aabb.minx=e.x,this.aabb.miny=e.y,this.aabb.maxx=e.x,this.aabb.maxy=e.y;for(var i=this.gverts.next.next;null!=i;){var r=i;t=n;n=n.next,r.x=this.body.posx+(this.body.axisy*t.x-this.body.axisx*t.y),r.y=this.body.posy+(t.x*this.body.axisx+t.y*this.body.axisy),r.x<this.aabb.minx&&(this.aabb.minx=r.x),r.x>this.aabb.maxx&&(this.aabb.maxx=r.x),r.y<this.aabb.miny&&(this.aabb.miny=r.y),r.y>this.aabb.maxy&&(this.aabb.maxy=r.y),i=i.next}},__validate_sweepRadius:function(){var n=0,e=0;this.validate_laxi();for(var t=this.lverts.next;null!=t;){var i=t,r=i.x*i.x+i.y*i.y;r>n&&(n=r),t=t.next}for(t=this.edges.head;null!=t;){var l=t.elt;if(l.lprojection<e&&(e=l.lprojection)<0)break;t=t.next}e<0&&(e=0),this.sweepRadius=Math.sqrt(n),this.sweepCoef=this.sweepRadius-e},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.area=0,this.inertia=0;else{this.area=0;var n=0,e=0,t=this.lverts.next,i=t,r=t=t.next;for(t=t.next;null!=t;){var l=t;n+=(s=r.y*i.x-r.x*i.y)*(r.x*r.x+r.y*r.y+(r.x*i.x+r.y*i.y)+(i.x*i.x+i.y*i.y)),e+=s,this.area+=r.x*(l.y-i.y),i=r,r=l,t=t.next}l=t=this.lverts.next;n+=(s=r.y*i.x-r.x*i.y)*(r.x*r.x+r.y*r.y+(r.x*i.x+r.y*i.y)+(i.x*i.x+i.y*i.y)),e+=s,this.area+=r.x*(l.y-i.y),i=r,r=l;var s;l=t=t.next;n+=(s=r.y*i.x-r.x*i.y)*(r.x*r.x+r.y*r.y+(r.x*i.x+r.y*i.y)+(i.x*i.x+i.y*i.y)),e+=s,this.area+=r.x*(l.y-i.y),this.inertia=n/(6*e),this.area*=.5,this.area<0&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){if(this.lverts.length<3)throw haxe_Exception.thrown("Error: Polygon's with less than 3 vertices have no meaningful angDrag");this.validate_area_inertia(),this.validate_laxi();for(var n=0,e=this.edges.head,t=0,i=this.lverts.next,r=i,l=i.next;null!=l;){var s=l,a=e.elt;e=e.next,t+=a.length;var o=0,p=0;if(o=s.x-r.x,p=s.y-r.y,n+=a.length*nape_Config.fluidAngularDragFriction*this.material.dynamicFriction*a.lprojection*a.lprojection,(y=-(r.y*a.lnormx-r.x*a.lnormy)/(p*a.lnormx-o*a.lnormy))>0){var h=y>1?1:y,u=0,_=0;u=r.x,_=r.y,u+=o*(v=h),_+=p*v;var c=a.lnormy*r.x-a.lnormx*r.y;n+=((m=a.lnormy*u-a.lnormx*_)*m*m-c*c*c)/(3*(m-c))*h*a.length*nape_Config.fluidAngularDrag}if(y<1){var d=y<0?0:y,f=0,x=0;f=r.x,x=r.y,f+=o*(g=d),x+=p*g;var b=a.lnormy*f-a.lnormx*x;n+=((z=a.lnormy*s.x-a.lnormx*s.y)*z*z-b*b*b)/(3*(z-b))*nape_Config.fluidVacuumDrag*(1-d)*a.length*nape_Config.fluidAngularDrag}i=l,r=s,l=l.next}for(!0;;){s=l=this.lverts.next,a=e.elt;e=e.next,t+=a.length;var y;o=0,p=0;if(o=s.x-r.x,p=s.y-r.y,n+=a.length*nape_Config.fluidAngularDragFriction*this.material.dynamicFriction*a.lprojection*a.lprojection,(y=-(r.y*a.lnormx-r.x*a.lnormy)/(p*a.lnormx-o*a.lnormy))>0){var v;h=y>1?1:y,u=0,_=0;u=r.x,_=r.y,u+=o*(v=h),_+=p*v;var m;c=a.lnormy*r.x-a.lnormx*r.y;n+=((m=a.lnormy*u-a.lnormx*_)*m*m-c*c*c)/(3*(m-c))*h*a.length*nape_Config.fluidAngularDrag}if(y<1){var g;d=y<0?0:y,f=0,x=0;f=r.x,x=r.y,f+=o*(g=d),x+=p*g;var z;b=a.lnormy*f-a.lnormx*x;n+=((z=a.lnormy*s.x-a.lnormx*s.y)*z*z-b*b*b)/(3*(z-b))*nape_Config.fluidVacuumDrag*(1-d)*a.length*nape_Config.fluidAngularDrag}break}this.angDrag=n/(this.inertia*t)},__validate_localCOM:function(){if(null==this.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next){this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;var n=1;this.localCOMx+=this.lverts.next.next.x*n,this.localCOMy+=this.lverts.next.next.y*n;n=.5;this.localCOMx*=n,this.localCOMy*=n}else{this.localCOMx=0,this.localCOMy=0;var e=0,t=this.lverts.next,i=t,r=t=t.next;for(t=t.next;null!=t;){var l=t;e+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;this.localCOMx+=(r.x+l.x)*s,this.localCOMy+=(r.y+l.y)*s,i=r,r=l,t=t.next}l=t=this.lverts.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;this.localCOMx+=(r.x+l.x)*s,this.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=t=t.next;e+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;this.localCOMx+=(r.x+l.x)*s,this.localCOMy+=(r.y+l.y)*s;n=e=1/(3*e);this.localCOMx*=n,this.localCOMy*=n}},localCOM_validate:function(){if(null==this.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon does not have any meaningful localCOM");if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var n=this.polygon;if(null==n.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next){n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;var e=1;n.localCOMx+=n.lverts.next.next.x*e,n.localCOMy+=n.lverts.next.next.y*e;e=.5;n.localCOMx*=e,n.localCOMy*=e}else{n.localCOMx=0,n.localCOMy=0;var t=0,i=n.lverts.next,r=i,l=i=i.next;for(i=i.next;null!=i;){var s=i;t+=l.x*(s.y-r.y);var a=s.y*l.x-s.x*l.y;n.localCOMx+=(l.x+s.x)*a,n.localCOMy+=(l.y+s.y)*a,r=l,l=s,i=i.next}s=i=n.lverts.next;t+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;n.localCOMx+=(l.x+s.x)*a,n.localCOMy+=(l.y+s.y)*a,r=l,l=s;s=i=i.next;t+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;n.localCOMx+=(l.x+s.x)*a,n.localCOMy+=(l.y+s.y)*a;e=t=1/(3*t);n.localCOMx*=e,n.localCOMy*=e}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},localCOM_invalidate:function(n){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next){e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;var t=1;e.localCOMx+=e.lverts.next.next.x*t,e.localCOMy+=e.lverts.next.next.y*t;t=.5;e.localCOMx*=t,e.localCOMy*=t}else{e.localCOMx=0,e.localCOMy=0;var i=0,r=h=e.lverts.next,l=h=h.next;for(h=h.next;null!=h;){var s=h;i+=l.x*(s.y-r.y);var a=s.y*l.x-s.x*l.y;e.localCOMx+=(l.x+s.x)*a,e.localCOMy+=(l.y+s.y)*a,r=l,l=s,h=h.next}s=h=e.lverts.next;i+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;e.localCOMx+=(l.x+s.x)*a,e.localCOMy+=(l.y+s.y)*a,r=l,l=s;s=h=h.next;i+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;e.localCOMx+=(l.x+s.x)*a,e.localCOMy+=(l.y+s.y)*a;t=i=1/(3*i);e.localCOMx*=t,e.localCOMy*=t}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var o,p;o=n.x-this.localCOMx,p=n.y-this.localCOMy;for(var h=this.lverts.next;null!=h;){var u=h;t=1;u.x+=o*t,u.y+=p*t,h=h.next}this.invalidate_lverts()},setupLocalCOM:function(){var n,e=this.localCOMx,t=this.localCOMy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_localCOM=n,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$bind(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$bind(this,this.localCOM_invalidate)},__translate:function(n,e){for(var t=this.lverts.next;null!=t;){var i=t;i.x+=1*n,i.y+=1*e,t=t.next}this.invalidate_lverts()},__scale:function(n,e){for(var t=this.lverts.next;null!=t;){var i=t;i.x*=n,i.y*=e,t=t.next}this.invalidate_lverts()},__rotate:function(n,e){for(var t=this.lverts.next;null!=t;){var i,r,l=t;i=e*l.x-n*l.y,r=l.x*n+l.y*e,l.x=i,l.y=r,t=t.next}this.invalidate_lverts()},__transform:function(n){for(var e=this.lverts.next;null!=e;){var t=e,i=n.zpp_inner.a*t.x+n.zpp_inner.b*t.y+n.zpp_inner.tx;t.y=n.zpp_inner.c*t.x+n.zpp_inner.d*t.y+n.zpp_inner.ty,t.x=i,e=e.next}this.invalidate_lverts()},__copy:function(){var n=this.outer_zn;return null==n.zpp_inner_zn.wrap_lverts&&n.zpp_inner_zn.getlverts(),new nape_shape_Polygon(n.zpp_inner_zn.wrap_lverts).zpp_inner_zn},__class__:zpp_$nape_shape_ZPP_$Polygon});var zpp_$nape_space_ZPP_$Broadphase=function(){this.circShape=null,this.matrix=null,this.aabbShape=null,this.dynab=null,this.sweep=null,this.is_sweep=!1,this.space=null};t["zpp_nape.space.ZPP_Broadphase"]=zpp_$nape_space_ZPP_$Broadphase,zpp_$nape_space_ZPP_$Broadphase.__name__="zpp_nape.space.ZPP_Broadphase",zpp_$nape_space_ZPP_$Broadphase.prototype={insert:function(n){this.is_sweep?this.sweep.__insert(n):this.dynab.__insert(n)},remove:function(n){this.is_sweep?this.sweep.__remove(n):this.dynab.__remove(n)},sync:function(n){if(this.is_sweep){if(!this.sweep.space.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){if((d=n.circle).zip_worldCOM&&null!=d.body){if(d.zip_worldCOM=!1,d.zip_localCOM){if(d.zip_localCOM=!1,1==d.type){if(null==(v=d.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==v.lverts.next.next)v.localCOMx=v.lverts.next.x,v.localCOMy=v.lverts.next.y;else if(null==v.lverts.next.next.next){v.localCOMx=v.lverts.next.x,v.localCOMy=v.lverts.next.y;var e=1;v.localCOMx+=v.lverts.next.next.x*e,v.localCOMy+=v.lverts.next.next.y*e;e=.5;v.localCOMx*=e,v.localCOMy*=e}else{v.localCOMx=0,v.localCOMy=0;var t=0,i=h=v.lverts.next,r=h=h.next;for(h=h.next;null!=h;){var l=h;t+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;v.localCOMx+=(r.x+l.x)*s,v.localCOMy+=(r.y+l.y)*s,i=r,r=l,h=h.next}l=h=v.lverts.next;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;v.localCOMx+=(r.x+l.x)*s,v.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=h=h.next;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;v.localCOMx+=(r.x+l.x)*s,v.localCOMy+=(r.y+l.y)*s;e=t=1/(3*t);v.localCOMx*=e,v.localCOMy*=e}}null!=d.wrap_localCOM&&(d.wrap_localCOM.zpp_inner.x=d.localCOMx,d.wrap_localCOM.zpp_inner.y=d.localCOMy)}(v=d.body).zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot)),d.worldCOMx=d.body.posx+(d.body.axisy*d.localCOMx-d.body.axisx*d.localCOMy),d.worldCOMy=d.body.posy+(d.localCOMx*d.body.axisx+d.localCOMy*d.body.axisy)}var a=d.radius,o=d.radius;d.aabb.minx=d.worldCOMx-a,d.aabb.miny=d.worldCOMy-o,d.aabb.maxx=d.worldCOMx+a,d.aabb.maxy=d.worldCOMy+o}else{if((d=n.polygon).zip_gverts&&null!=d.body){d.zip_gverts=!1,d.validate_lverts(),(v=d.body).zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var p=d.lverts.next,h=d.gverts.next;null!=h;){var u=h,_=p;p=p.next,u.x=d.body.posx+(d.body.axisy*_.x-d.body.axisx*_.y),u.y=d.body.posy+(_.x*d.body.axisx+_.y*d.body.axisy),h=h.next}}if(null==d.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var c=d.gverts.next;d.aabb.minx=c.x,d.aabb.miny=c.y,d.aabb.maxx=c.x,d.aabb.maxy=c.y;for(h=d.gverts.next.next;null!=h;){(b=h).x<d.aabb.minx&&(d.aabb.minx=b.x),b.x>d.aabb.maxx&&(d.aabb.maxx=b.x),b.y<d.aabb.miny&&(d.aabb.miny=b.y),b.y>d.aabb.maxy&&(d.aabb.maxy=b.y),h=h.next}}}else{var d=this.dynab,f=n.node;if(!f.synced){if(!d.space.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){if((v=n.circle).zip_worldCOM&&null!=v.body){if(v.zip_worldCOM=!1,v.zip_localCOM){if(v.zip_localCOM=!1,1==v.type){if(null==(x=v.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==x.lverts.next.next)x.localCOMx=x.lverts.next.x,x.localCOMy=x.lverts.next.y;else if(null==x.lverts.next.next.next){x.localCOMx=x.lverts.next.x,x.localCOMy=x.lverts.next.y;e=1;x.localCOMx+=x.lverts.next.next.x*e,x.localCOMy+=x.lverts.next.next.y*e;e=.5;x.localCOMx*=e,x.localCOMy*=e}else{x.localCOMx=0,x.localCOMy=0;t=0,i=h=x.lverts.next,r=h=h.next;for(h=h.next;null!=h;){l=h;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;x.localCOMx+=(r.x+l.x)*s,x.localCOMy+=(r.y+l.y)*s,i=r,r=l,h=h.next}l=h=x.lverts.next;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;x.localCOMx+=(r.x+l.x)*s,x.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=h=h.next;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;x.localCOMx+=(r.x+l.x)*s,x.localCOMy+=(r.y+l.y)*s;e=t=1/(3*t);x.localCOMx*=e,x.localCOMy*=e}}null!=v.wrap_localCOM&&(v.wrap_localCOM.zpp_inner.x=v.localCOMx,v.wrap_localCOM.zpp_inner.y=v.localCOMy)}(x=v.body).zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot)),v.worldCOMx=v.body.posx+(v.body.axisy*v.localCOMx-v.body.axisx*v.localCOMy),v.worldCOMy=v.body.posy+(v.localCOMx*v.body.axisx+v.localCOMy*v.body.axisy)}a=v.radius,o=v.radius;v.aabb.minx=v.worldCOMx-a,v.aabb.miny=v.worldCOMy-o,v.aabb.maxx=v.worldCOMx+a,v.aabb.maxy=v.worldCOMy+o}else{if((v=n.polygon).zip_gverts&&null!=v.body){var x;v.zip_gverts=!1,v.validate_lverts(),(x=v.body).zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot));for(p=v.lverts.next,h=v.gverts.next;null!=h;){u=h,_=p;p=p.next,u.x=v.body.posx+(v.body.axisy*_.x-v.body.axisx*_.y),u.y=v.body.posy+(_.x*v.body.axisx+_.y*v.body.axisy),h=h.next}}if(null==v.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");c=v.gverts.next;v.aabb.minx=c.x,v.aabb.miny=c.y,v.aabb.maxx=c.x,v.aabb.maxy=c.y;for(h=v.gverts.next.next;null!=h;){var b;(b=h).x<v.aabb.minx&&(v.aabb.minx=b.x),b.x>v.aabb.maxx&&(v.aabb.maxx=b.x),b.y<v.aabb.miny&&(v.aabb.miny=b.y),b.y>v.aabb.maxy&&(v.aabb.maxy=b.y),h=h.next}}var y;if(f.dyn==(1!=n.body.type&&!n.body.component.sleeping)){var v=f.aabb,m=n.aabb;y=!(m.minx>=v.minx&&m.miny>=v.miny&&m.maxx<=v.maxx&&m.maxy<=v.maxy)}else y=!0;y&&(f.synced=!0,f.snext=d.syncs,d.syncs=f)}}},broadphase:function(n,e){},clear:function(){},shapesUnderPoint:function(n,e,t,i){return null},bodiesUnderPoint:function(n,e,t,i){return null},updateAABBShape:function(n){if(null==this.aabbShape){null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC).zpp_inner.wrap_shapes,t=this.aabbShape=new nape_shape_Polygon(nape_shape_Polygon.rect(n.minx,n.miny,n.maxx-n.minx,n.maxy-n.miny));e.zpp_inner.reverse_flag?e.push(t):e.unshift(t)}else{var i=this.aabbShape.zpp_inner.aabb,r=(n.maxx-n.minx)/(i.maxx-i.minx),l=(n.maxy-n.miny)/(i.maxy-i.miny);null==this.matrix&&(this.matrix=new nape_geom_Mat23);e=this.matrix;if(r!=r)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");e.zpp_inner.a=r,null!=(O=e.zpp_inner)._invalidate&&O._invalidate();e=this.matrix;(O=this.matrix).zpp_inner.c=0,null!=(f=O.zpp_inner)._invalidate&&f._invalidate();var s=O.zpp_inner.c;if(s!=s)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");e.zpp_inner.b=s,null!=(O=e.zpp_inner)._invalidate&&O._invalidate();e=this.matrix;if(l!=l)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");e.zpp_inner.d=l,null!=(O=e.zpp_inner)._invalidate&&O._invalidate();e=this.matrix;var a=n.minx-r*i.minx;if(a!=a)throw haxe_Exception.thrown("Error: Mat23::tx cannot be NaN");e.zpp_inner.tx=a,null!=(O=e.zpp_inner)._invalidate&&O._invalidate();e=this.matrix;var o=n.miny-l*i.miny;if(o!=o)throw haxe_Exception.thrown("Error: Mat23::ty cannot be NaN");e.zpp_inner.ty=o,null!=(O=e.zpp_inner)._invalidate&&O._invalidate(),this.aabbShape.transform(this.matrix)}if((e=this.aabbShape.zpp_inner).zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){if((O=e.circle).zip_worldCOM&&null!=O.body){if(O.zip_worldCOM=!1,O.zip_localCOM){if(O.zip_localCOM=!1,1==O.type){if(null==(f=O.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==f.lverts.next.next)f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;else if(null==f.lverts.next.next.next){f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;var p=1;f.localCOMx+=f.lverts.next.next.x*p,f.localCOMy+=f.lverts.next.next.y*p;p=.5;f.localCOMx*=p,f.localCOMy*=p}else{f.localCOMx=0,f.localCOMy=0;var h=0,u=v=f.lverts.next,_=v=v.next;for(v=v.next;null!=v;){var c=v;h+=_.x*(c.y-u.y);var d=c.y*_.x-c.x*_.y;f.localCOMx+=(_.x+c.x)*d,f.localCOMy+=(_.y+c.y)*d,u=_,_=c,v=v.next}c=v=f.lverts.next;h+=_.x*(c.y-u.y);d=c.y*_.x-c.x*_.y;f.localCOMx+=(_.x+c.x)*d,f.localCOMy+=(_.y+c.y)*d,u=_,_=c;c=v=v.next;h+=_.x*(c.y-u.y);d=c.y*_.x-c.x*_.y;f.localCOMx+=(_.x+c.x)*d,f.localCOMy+=(_.y+c.y)*d;p=h=1/(3*h);f.localCOMx*=p,f.localCOMy*=p}}null!=O.wrap_localCOM&&(O.wrap_localCOM.zpp_inner.x=O.localCOMx,O.wrap_localCOM.zpp_inner.y=O.localCOMy)}var f;(f=O.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),O.worldCOMx=O.body.posx+(O.body.axisy*O.localCOMx-O.body.axisx*O.localCOMy),O.worldCOMy=O.body.posy+(O.localCOMx*O.body.axisx+O.localCOMy*O.body.axisy)}var x=O.radius,b=O.radius;O.aabb.minx=O.worldCOMx-x,O.aabb.miny=O.worldCOMy-b,O.aabb.maxx=O.worldCOMx+x,O.aabb.maxy=O.worldCOMy+b}else{if((O=e.polygon).zip_gverts&&null!=O.body){O.zip_gverts=!1,O.validate_lverts(),(e=O.body).zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var y=O.lverts.next,v=O.gverts.next;null!=v;){var m=v,g=y;y=y.next,m.x=O.body.posx+(O.body.axisy*g.x-O.body.axisx*g.y),m.y=O.body.posy+(g.x*O.body.axisx+g.y*O.body.axisy),v=v.next}}if(null==O.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var z=O.gverts.next;O.aabb.minx=z.x,O.aabb.miny=z.y,O.aabb.maxx=z.x,O.aabb.maxy=z.y;for(v=O.gverts.next.next;null!=v;){var w=v;w.x<O.aabb.minx&&(O.aabb.minx=w.x),w.x>O.aabb.maxx&&(O.aabb.maxx=w.x),w.y<O.aabb.miny&&(O.aabb.miny=w.y),w.y>O.aabb.maxy&&(O.aabb.maxy=w.y),v=v.next}}if((e=this.aabbShape.zpp_inner.polygon).zip_gaxi&&null!=e.body){if(e.zip_gaxi=!1,e.validate_laxi(),(O=e.body).zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot)),e.zip_gverts&&null!=e.body){var O;e.zip_gverts=!1,e.validate_lverts(),(O=e.body).zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot));for(y=e.lverts.next,v=e.gverts.next;null!=v;){m=v,g=y;y=y.next,m.x=e.body.posx+(e.body.axisy*g.x-e.body.axisx*g.y),m.y=e.body.posy+(g.x*e.body.axisx+g.y*e.body.axisy),v=v.next}}var C=e.edges.head;u=v=e.gverts.next;for(v=v.next;null!=v;){_=v;var E=C.elt;C=C.next,E.gp0=u,E.gp1=_,E.gnormx=e.body.axisy*E.lnormx-e.body.axisx*E.lnormy,E.gnormy=E.lnormx*e.body.axisx+E.lnormy*e.body.axisy,E.gprojection=e.body.posx*E.gnormx+e.body.posy*E.gnormy+E.lprojection,null!=E.wrap_gnorm&&(E.wrap_gnorm.zpp_inner.x=E.gnormx,E.wrap_gnorm.zpp_inner.y=E.gnormy),E.tp0=E.gp0.y*E.gnormx-E.gp0.x*E.gnormy,E.tp1=E.gp1.y*E.gnormx-E.gp1.x*E.gnormy,u=_,v=v.next}_=e.gverts.next,E=C.elt;C=C.next,E.gp0=u,E.gp1=_,E.gnormx=e.body.axisy*E.lnormx-e.body.axisx*E.lnormy,E.gnormy=E.lnormx*e.body.axisx+E.lnormy*e.body.axisy,E.gprojection=e.body.posx*E.gnormx+e.body.posy*E.gnormy+E.lprojection,null!=E.wrap_gnorm&&(E.wrap_gnorm.zpp_inner.x=E.gnormx,E.wrap_gnorm.zpp_inner.y=E.gnormy),E.tp0=E.gp0.y*E.gnormx-E.gp0.x*E.gnormy,E.tp1=E.gp1.y*E.gnormx-E.gp1.x*E.gnormy}},shapesInAABB:function(n,e,t,i,r){return null},bodiesInAABB:function(n,e,t,i,r){return null},updateCircShape:function(n,e,t){if(null==this.circShape){null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1);var i,r=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC).zpp_inner.wrap_shapes,l=n,s=e;if(null==s&&(s=0),null==l&&(l=0),l!=l||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?i=new nape_geom_Vec2:(i=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=i.zpp_pool,i.zpp_pool=null,i.zpp_disp=!1,i==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==i.zpp_inner){var a;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?a=new zpp_$nape_geom_ZPP_$Vec2:(a=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=l,a.y=s,i.zpp_inner=a,i.zpp_inner.outer=i}else{if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((u=i.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=u._isimmutable&&u._isimmutable(),l!=l||s!=s)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(u=i.zpp_inner)._validate&&u._validate(),i.zpp_inner.x==l){if(null!=i&&i.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(u=i.zpp_inner)._validate&&u._validate(),o=i.zpp_inner.y==s}else o=!1;if(!o)i.zpp_inner.x=l,i.zpp_inner.y=s,null!=(u=i.zpp_inner)._invalidate&&u._invalidate(u)}i.zpp_inner.weak=!1;var o=this.circShape=new nape_shape_Circle(t,i);r.zpp_inner.reverse_flag?r.push(o):r.unshift(o)}else{var p=this.circShape.zpp_inner.circle,h=t/p.radius;null==this.matrix&&(this.matrix=new nape_geom_Mat23);r=this.matrix;var u=this.matrix;if(h!=h)throw haxe_Exception.thrown("Error: Mat23::d cannot be NaN");u.zpp_inner.d=h,null!=(z=u.zpp_inner)._invalidate&&z._invalidate();var _=u.zpp_inner.d;if(_!=_)throw haxe_Exception.thrown("Error: Mat23::a cannot be NaN");r.zpp_inner.a=_,null!=(u=r.zpp_inner)._invalidate&&u._invalidate();r=this.matrix;(u=this.matrix).zpp_inner.c=0,null!=(z=u.zpp_inner)._invalidate&&z._invalidate();var c=u.zpp_inner.c;if(c!=c)throw haxe_Exception.thrown("Error: Mat23::b cannot be NaN");r.zpp_inner.b=c,null!=(u=r.zpp_inner)._invalidate&&u._invalidate();r=this.matrix;var d=n-h*p.localCOMx;if(d!=d)throw haxe_Exception.thrown("Error: Mat23::tx cannot be NaN");r.zpp_inner.tx=d,null!=(u=r.zpp_inner)._invalidate&&u._invalidate();r=this.matrix;var f=e-h*p.localCOMy;if(f!=f)throw haxe_Exception.thrown("Error: Mat23::ty cannot be NaN");r.zpp_inner.ty=f,null!=(u=r.zpp_inner)._invalidate&&u._invalidate(),this.circShape.transform(this.matrix)}if((r=this.circShape.zpp_inner).zip_aabb&&null!=r.body)if(r.zip_aabb=!1,0==r.type){if((u=r.circle).zip_worldCOM&&null!=u.body){if(u.zip_worldCOM=!1,u.zip_localCOM){if(u.zip_localCOM=!1,1==u.type){if(null==(z=u.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==z.lverts.next.next)z.localCOMx=z.lverts.next.x,z.localCOMy=z.lverts.next.y;else if(null==z.lverts.next.next.next){z.localCOMx=z.lverts.next.x,z.localCOMy=z.lverts.next.y;var x=1;z.localCOMx+=z.lverts.next.next.x*x,z.localCOMy+=z.lverts.next.next.y*x;x=.5;z.localCOMx*=x,z.localCOMy*=x}else{z.localCOMx=0,z.localCOMy=0;var b=0,y=E=z.lverts.next,v=E=E.next;for(E=E.next;null!=E;){var m=E;b+=v.x*(m.y-y.y);var g=m.y*v.x-m.x*v.y;z.localCOMx+=(v.x+m.x)*g,z.localCOMy+=(v.y+m.y)*g,y=v,v=m,E=E.next}m=E=z.lverts.next;b+=v.x*(m.y-y.y);g=m.y*v.x-m.x*v.y;z.localCOMx+=(v.x+m.x)*g,z.localCOMy+=(v.y+m.y)*g,y=v,v=m;m=E=E.next;b+=v.x*(m.y-y.y);g=m.y*v.x-m.x*v.y;z.localCOMx+=(v.x+m.x)*g,z.localCOMy+=(v.y+m.y)*g;x=b=1/(3*b);z.localCOMx*=x,z.localCOMy*=x}}null!=u.wrap_localCOM&&(u.wrap_localCOM.zpp_inner.x=u.localCOMx,u.wrap_localCOM.zpp_inner.y=u.localCOMy)}var z;(z=u.body).zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot)),u.worldCOMx=u.body.posx+(u.body.axisy*u.localCOMx-u.body.axisx*u.localCOMy),u.worldCOMy=u.body.posy+(u.localCOMx*u.body.axisx+u.localCOMy*u.body.axisy)}var w=u.radius,O=u.radius;u.aabb.minx=u.worldCOMx-w,u.aabb.miny=u.worldCOMy-O,u.aabb.maxx=u.worldCOMx+w,u.aabb.maxy=u.worldCOMy+O}else{if((u=r.polygon).zip_gverts&&null!=u.body){u.zip_gverts=!1,u.validate_lverts(),(r=u.body).zip_axis&&(r.zip_axis=!1,r.axisx=Math.sin(r.rot),r.axisy=Math.cos(r.rot));for(var C=u.lverts.next,E=u.gverts.next;null!=E;){var U=E,M=C;C=C.next,U.x=u.body.posx+(u.body.axisy*M.x-u.body.axisx*M.y),U.y=u.body.posy+(M.x*u.body.axisx+M.y*u.body.axisy),E=E.next}}if(null==u.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var T=u.gverts.next;u.aabb.minx=T.x,u.aabb.miny=T.y,u.aabb.maxx=T.x,u.aabb.maxy=T.y;for(E=u.gverts.next.next;null!=E;){var k=E;k.x<u.aabb.minx&&(u.aabb.minx=k.x),k.x>u.aabb.maxx&&(u.aabb.maxx=k.x),k.y<u.aabb.miny&&(u.aabb.miny=k.y),k.y>u.aabb.maxy&&(u.aabb.maxy=k.y),E=E.next}}},shapesInCircle:function(n,e,t,i,r,l){return null},bodiesInCircle:function(n,e,t,i,r,l){return null},validateShape:function(n){if(1==n.type&&((y=n.polygon).zip_gaxi&&null!=y.body)){if(y.zip_gaxi=!1,y.validate_laxi(),(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts(),(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var e=y.lverts.next,t=y.gverts.next;null!=t;){var i=t,r=e;e=e.next,i.x=y.body.posx+(y.body.axisy*r.x-y.body.axisx*r.y),i.y=y.body.posy+(r.x*y.body.axisx+r.y*y.body.axisy),t=t.next}}var l=y.edges.head,s=t=y.gverts.next;for(t=t.next;null!=t;){var a=t,o=l.elt;l=l.next,o.gp0=s,o.gp1=a,o.gnormx=y.body.axisy*o.lnormx-y.body.axisx*o.lnormy,o.gnormy=o.lnormx*y.body.axisx+o.lnormy*y.body.axisy,o.gprojection=y.body.posx*o.gnormx+y.body.posy*o.gnormy+o.lprojection,null!=o.wrap_gnorm&&(o.wrap_gnorm.zpp_inner.x=o.gnormx,o.wrap_gnorm.zpp_inner.y=o.gnormy),o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy,o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy,s=a,t=t.next}a=y.gverts.next,o=l.elt;l=l.next,o.gp0=s,o.gp1=a,o.gnormx=y.body.axisy*o.lnormx-y.body.axisx*o.lnormy,o.gnormy=o.lnormx*y.body.axisx+o.lnormy*y.body.axisy,o.gprojection=y.body.posx*o.gnormx+y.body.posy*o.gnormy+o.lprojection,null!=o.wrap_gnorm&&(o.wrap_gnorm.zpp_inner.x=o.gnormx,o.wrap_gnorm.zpp_inner.y=o.gnormy),o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy,o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy}if(n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){if((y=n.circle).zip_worldCOM&&null!=y.body){if(y.zip_worldCOM=!1,y.zip_localCOM){if(y.zip_localCOM=!1,1==y.type){if(null==(f=y.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==f.lverts.next.next)f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;else if(null==f.lverts.next.next.next){f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;var p=1;f.localCOMx+=f.lverts.next.next.x*p,f.localCOMy+=f.lverts.next.next.y*p;p=.5;f.localCOMx*=p,f.localCOMy*=p}else{f.localCOMx=0,f.localCOMy=0;var h=0;s=t=f.lverts.next,a=t=t.next;for(t=t.next;null!=t;){var u=t;h+=a.x*(u.y-s.y);var _=u.y*a.x-u.x*a.y;f.localCOMx+=(a.x+u.x)*_,f.localCOMy+=(a.y+u.y)*_,s=a,a=u,t=t.next}u=t=f.lverts.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;f.localCOMx+=(a.x+u.x)*_,f.localCOMy+=(a.y+u.y)*_,s=a,a=u;u=t=t.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;f.localCOMx+=(a.x+u.x)*_,f.localCOMy+=(a.y+u.y)*_;p=h=1/(3*h);f.localCOMx*=p,f.localCOMy*=p}}null!=y.wrap_localCOM&&(y.wrap_localCOM.zpp_inner.x=y.localCOMx,y.wrap_localCOM.zpp_inner.y=y.localCOMy)}(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),y.worldCOMx=y.body.posx+(y.body.axisy*y.localCOMx-y.body.axisx*y.localCOMy),y.worldCOMy=y.body.posy+(y.localCOMx*y.body.axisx+y.localCOMy*y.body.axisy)}var c=y.radius,d=y.radius;y.aabb.minx=y.worldCOMx-c,y.aabb.miny=y.worldCOMy-d,y.aabb.maxx=y.worldCOMx+c,y.aabb.maxy=y.worldCOMy+d}else{if((y=n.polygon).zip_gverts&&null!=y.body){var f;y.zip_gverts=!1,y.validate_lverts(),(f=y.body).zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(e=y.lverts.next,t=y.gverts.next;null!=t;){i=t,r=e;e=e.next,i.x=y.body.posx+(y.body.axisy*r.x-y.body.axisx*r.y),i.y=y.body.posy+(r.x*y.body.axisx+r.y*y.body.axisy),t=t.next}}if(null==y.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var x=y.gverts.next;y.aabb.minx=x.x,y.aabb.miny=x.y,y.aabb.maxx=x.x,y.aabb.maxy=x.y;for(t=y.gverts.next.next;null!=t;){var b=t;b.x<y.aabb.minx&&(y.aabb.minx=b.x),b.x>y.aabb.maxx&&(y.aabb.maxx=b.x),b.y<y.aabb.miny&&(y.aabb.miny=b.y),b.y>y.aabb.maxy&&(y.aabb.maxy=b.y),t=t.next}}if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){if(null==(y=n.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next){y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;p=1;y.localCOMx+=y.lverts.next.next.x*p,y.localCOMy+=y.lverts.next.next.y*p;p=.5;y.localCOMx*=p,y.localCOMy*=p}else{y.localCOMx=0,y.localCOMy=0;h=0,s=t=y.lverts.next,a=t=t.next;for(t=t.next;null!=t;){u=t;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;y.localCOMx+=(a.x+u.x)*_,y.localCOMy+=(a.y+u.y)*_,s=a,a=u,t=t.next}u=t=y.lverts.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;y.localCOMx+=(a.x+u.x)*_,y.localCOMy+=(a.y+u.y)*_,s=a,a=u;u=t=t.next;h+=a.x*(u.y-s.y);_=u.y*a.x-u.x*a.y;y.localCOMx+=(a.x+u.x)*_,y.localCOMy+=(a.y+u.y)*_;p=h=1/(3*h);y.localCOMx*=p,y.localCOMy*=p}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}var y;(y=n.body).zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}},shapesInShape:function(n,e,t,i){return null},bodiesInShape:function(n,e,t,i){return null},rayCast:function(n,e,t){return null},rayMultiCast:function(n,e,t,i){return null},__class__:zpp_$nape_space_ZPP_$Broadphase};var zpp_$nape_space_ZPP_$AABBNode=function(){this.first_sync=!1,this.synced=!1,this.snext=null,this.moved=!1,this.mnext=null,this.next=null,this.rayt=0,this.height=0,this.child2=null,this.child1=null,this.parent=null,this.dyn=!1,this.shape=null,this.aabb=null,this.height=-1};t["zpp_nape.space.ZPP_AABBNode"]=zpp_$nape_space_ZPP_$AABBNode,zpp_$nape_space_ZPP_$AABBNode.__name__="zpp_nape.space.ZPP_AABBNode",zpp_$nape_space_ZPP_$AABBNode.prototype={alloc:function(){null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?this.aabb=new zpp_$nape_geom_ZPP_$AABB:(this.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=this.aabb.next,this.aabb.next=null),this.moved=!1,this.synced=!1,this.first_sync=!1},free:function(){this.height=-1;var n=this.aabb;null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n.wrap_min=n.wrap_max=null,n._invalidate=null,n._validate=null,n.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=n,this.child1=this.child2=this.parent=null,this.next=null,this.snext=null,this.mnext=null},isLeaf:function(){return null==this.child1},__class__:zpp_$nape_space_ZPP_$AABBNode};var zpp_$nape_space_ZPP_$AABBPair=function(){this.next=null,this.arb=null,this.di=0,this.id=0,this.sleeping=!1,this.first=!1,this.n2=null,this.n1=null};t["zpp_nape.space.ZPP_AABBPair"]=zpp_$nape_space_ZPP_$AABBPair,zpp_$nape_space_ZPP_$AABBPair.__name__="zpp_nape.space.ZPP_AABBPair",zpp_$nape_space_ZPP_$AABBPair.prototype={alloc:function(){},free:function(){this.n1=this.n2=null,this.sleeping=!1},__class__:zpp_$nape_space_ZPP_$AABBPair};var zpp_$nape_space_ZPP_$AABBTree=function(){this.root=null};t["zpp_nape.space.ZPP_AABBTree"]=zpp_$nape_space_ZPP_$AABBTree,zpp_$nape_space_ZPP_$AABBTree.__name__="zpp_nape.space.ZPP_AABBTree",zpp_$nape_space_ZPP_$AABBTree.prototype={clear:function(){if(null!=this.root){var n=null;for(this.root.next=n,n=this.root;null!=n;){var e=n;n=e.next,e.next=null;var t=e;null==t.child1?(t.shape.node=null,t.shape.removedFromSpace(),t.shape=null):(null!=t.child1&&(t.child1.next=n,n=t.child1),null!=t.child2&&(t.child2.next=n,n=t.child2));var i=t;i.height=-1;var r=i.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=r,i.child1=i.child2=i.parent=null,i.next=null,i.snext=null,i.mnext=null,i.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=i}this.root=null}},insertLeaf:function(n){if(null==this.root)this.root=n,this.root.parent=null;else{for(var e=n.aabb,t=this.root;null!=t.child1;){var i=t.child1,r=t.child2,l=2*((O=t.aabb).maxx-O.minx+(O.maxy-O.miny)),s=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,a=t.aabb;s.minx=a.minx<e.minx?a.minx:e.minx,s.miny=a.miny<e.miny?a.miny:e.miny,s.maxx=a.maxx>e.maxx?a.maxx:e.maxx,s.maxy=a.maxy>e.maxy?a.maxy:e.maxy;var o,p=2*((V=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-V.minx+(V.maxy-V.miny)),h=2*p,u=2*(p-l),_=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,c=i.aabb;if(_.minx=e.minx<c.minx?e.minx:c.minx,_.miny=e.miny<c.miny?e.miny:c.miny,_.maxx=e.maxx>c.maxx?e.maxx:c.maxx,_.maxy=e.maxy>c.maxy?e.maxy:c.maxy,null==i.child1){o=2*((Y=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-Y.minx+(Y.maxy-Y.miny))+u}else{var d=2*((Z=i.aabb).maxx-Z.minx+(Z.maxy-Z.miny));o=2*((tn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-tn.minx+(tn.maxy-tn.miny))-d+u}var f,x=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,b=r.aabb;if(x.minx=e.minx<b.minx?e.minx:b.minx,x.miny=e.miny<b.miny?e.miny:b.miny,x.maxx=e.maxx>b.maxx?e.maxx:b.maxx,x.maxy=e.maxy>b.maxy?e.maxy:b.maxy,null==r.child1){f=2*((dn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-dn.minx+(dn.maxy-dn.miny))+u}else{var y=r.aabb,v=2*(y.maxx-y.minx+(y.maxy-y.miny)),m=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;f=2*(m.maxx-m.minx+(m.maxy-m.miny))-v+u}if(h<o&&h<f)break;t=o<f?i:r}var g,z=t,w=z.parent;null==zpp_$nape_space_ZPP_$AABBNode.zpp_pool?g=new zpp_$nape_space_ZPP_$AABBNode:(g=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=g.next,g.next=null),null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?g.aabb=new zpp_$nape_geom_ZPP_$AABB:(g.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=g.aabb.next,g.aabb.next=null),g.moved=!1,g.synced=!1,g.first_sync=!1,g.parent=w;var O=g.aabb;c=z.aabb;for(O.minx=e.minx<c.minx?e.minx:c.minx,O.miny=e.miny<c.miny?e.miny:c.miny,O.maxx=e.maxx>c.maxx?e.maxx:c.maxx,O.maxy=e.maxy>c.maxy?e.maxy:c.maxy,g.height=z.height+1,null!=w?(w.child1==z?w.child1=g:w.child2=g,g.child1=z,g.child2=n,z.parent=g,n.parent=g):(g.child1=z,g.child2=n,z.parent=g,n.parent=g,this.root=g),t=n.parent;null!=t;){if(!(null==t.child1||t.height<2)){c=t.child1;var C=t.child2,E=C.height-c.height;if(E>1){var U=C.child1,M=C.child2;if(C.child1=t,C.parent=t.parent,t.parent=C,null!=C.parent?C.parent.child1==t?C.parent.child1=C:C.parent.child2=C:this.root=C,U.height>M.height){C.child2=U,t.child2=M,M.parent=t;O=t.aabb,a=c.aabb,b=M.aabb;O.minx=a.minx<b.minx?a.minx:b.minx,O.miny=a.miny<b.miny?a.miny:b.miny,O.maxx=a.maxx>b.maxx?a.maxx:b.maxx,O.maxy=a.maxy>b.maxy?a.maxy:b.maxy;s=C.aabb;var T=t.aabb,k=U.aabb;s.minx=T.minx<k.minx?T.minx:k.minx,s.miny=T.miny<k.miny?T.miny:k.miny,s.maxx=T.maxx>k.maxx?T.maxx:k.maxx,s.maxy=T.maxy>k.maxy?T.maxy:k.maxy;var D=c.height,S=M.height;t.height=1+(D>S?D:S);var A=t.height,P=U.height;C.height=1+(A>P?A:P)}else{C.child2=M,t.child2=U,U.parent=t;var V=t.aabb,I=c.aabb,N=U.aabb;V.minx=I.minx<N.minx?I.minx:N.minx,V.miny=I.miny<N.miny?I.miny:N.miny,V.maxx=I.maxx>N.maxx?I.maxx:N.maxx,V.maxy=I.maxy>N.maxy?I.maxy:N.maxy;_=C.aabb;var F=t.aabb,R=M.aabb;_.minx=F.minx<R.minx?F.minx:R.minx,_.miny=F.miny<R.miny?F.miny:R.miny,_.maxx=F.maxx>R.maxx?F.maxx:R.maxx,_.maxy=F.maxy>R.maxy?F.maxy:R.maxy;var L=c.height,B=U.height;t.height=1+(L>B?L:B);var G=t.height,j=M.height;C.height=1+(G>j?G:j)}t=C}else if(E<-1){var K=c.child1,W=c.child2;if(c.child1=t,c.parent=t.parent,t.parent=c,null!=c.parent?c.parent.child1==t?c.parent.child1=c:c.parent.child2=c:this.root=c,K.height>W.height){c.child2=K,t.child1=W,W.parent=t;var Y=t.aabb,X=C.aabb,H=W.aabb;Y.minx=X.minx<H.minx?X.minx:H.minx,Y.miny=X.miny<H.miny?X.miny:H.miny,Y.maxx=X.maxx>H.maxx?X.maxx:H.maxx,Y.maxy=X.maxy>H.maxy?X.maxy:H.maxy;var Z=c.aabb,q=t.aabb,$=K.aabb;Z.minx=q.minx<$.minx?q.minx:$.minx,Z.miny=q.miny<$.miny?q.miny:$.miny,Z.maxx=q.maxx>$.maxx?q.maxx:$.maxx,Z.maxy=q.maxy>$.maxy?q.maxy:$.maxy;var Q=C.height,J=W.height;t.height=1+(Q>J?Q:J);var nn=t.height,en=K.height;c.height=1+(nn>en?nn:en)}else{c.child2=W,t.child1=K,K.parent=t;var tn=t.aabb,rn=C.aabb,ln=K.aabb;tn.minx=rn.minx<ln.minx?rn.minx:ln.minx,tn.miny=rn.miny<ln.miny?rn.miny:ln.miny,tn.maxx=rn.maxx>ln.maxx?rn.maxx:ln.maxx,tn.maxy=rn.maxy>ln.maxy?rn.maxy:ln.maxy;x=c.aabb;var sn=t.aabb,an=W.aabb;x.minx=sn.minx<an.minx?sn.minx:an.minx,x.miny=sn.miny<an.miny?sn.miny:an.miny,x.maxx=sn.maxx>an.maxx?sn.maxx:an.maxx,x.maxy=sn.maxy>an.maxy?sn.maxy:an.maxy;var on=C.height,pn=K.height;t.height=1+(on>pn?on:pn);var hn=t.height,un=W.height;c.height=1+(hn>un?hn:un)}t=c}}i=t.child1,r=t.child2;var _n=i.height,cn=r.height;t.height=1+(_n>cn?_n:cn);var dn=t.aabb,xn=i.aabb,bn=r.aabb;dn.minx=xn.minx<bn.minx?xn.minx:bn.minx,dn.miny=xn.miny<bn.miny?xn.miny:bn.miny,dn.maxx=xn.maxx>bn.maxx?xn.maxx:bn.maxx,dn.maxy=xn.maxy>bn.maxy?xn.maxy:bn.maxy,t=t.parent}}},inlined_insertLeaf:function(n){if(null==this.root)this.root=n,this.root.parent=null;else{for(var e=n.aabb,t=this.root;null!=t.child1;){var i=t.child1,r=t.child2,l=2*((O=t.aabb).maxx-O.minx+(O.maxy-O.miny)),s=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,a=t.aabb;s.minx=a.minx<e.minx?a.minx:e.minx,s.miny=a.miny<e.miny?a.miny:e.miny,s.maxx=a.maxx>e.maxx?a.maxx:e.maxx,s.maxy=a.maxy>e.maxy?a.maxy:e.maxy;var o,p=2*((V=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-V.minx+(V.maxy-V.miny)),h=2*p,u=2*(p-l),_=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,c=i.aabb;if(_.minx=e.minx<c.minx?e.minx:c.minx,_.miny=e.miny<c.miny?e.miny:c.miny,_.maxx=e.maxx>c.maxx?e.maxx:c.maxx,_.maxy=e.maxy>c.maxy?e.maxy:c.maxy,null==i.child1){o=2*((Y=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-Y.minx+(Y.maxy-Y.miny))+u}else{var d=2*((Z=i.aabb).maxx-Z.minx+(Z.maxy-Z.miny));o=2*((tn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-tn.minx+(tn.maxy-tn.miny))-d+u}var f,x=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,b=r.aabb;if(x.minx=e.minx<b.minx?e.minx:b.minx,x.miny=e.miny<b.miny?e.miny:b.miny,x.maxx=e.maxx>b.maxx?e.maxx:b.maxx,x.maxy=e.maxy>b.maxy?e.maxy:b.maxy,null==r.child1){f=2*((dn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-dn.minx+(dn.maxy-dn.miny))+u}else{var y=r.aabb,v=2*(y.maxx-y.minx+(y.maxy-y.miny)),m=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;f=2*(m.maxx-m.minx+(m.maxy-m.miny))-v+u}if(h<o&&h<f)break;t=o<f?i:r}var g,z=t,w=z.parent;null==zpp_$nape_space_ZPP_$AABBNode.zpp_pool?g=new zpp_$nape_space_ZPP_$AABBNode:(g=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=g.next,g.next=null),null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?g.aabb=new zpp_$nape_geom_ZPP_$AABB:(g.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=g.aabb.next,g.aabb.next=null),g.moved=!1,g.synced=!1,g.first_sync=!1,g.parent=w;var O=g.aabb;c=z.aabb;for(O.minx=e.minx<c.minx?e.minx:c.minx,O.miny=e.miny<c.miny?e.miny:c.miny,O.maxx=e.maxx>c.maxx?e.maxx:c.maxx,O.maxy=e.maxy>c.maxy?e.maxy:c.maxy,g.height=z.height+1,null!=w?(w.child1==z?w.child1=g:w.child2=g,g.child1=z,g.child2=n,z.parent=g,n.parent=g):(g.child1=z,g.child2=n,z.parent=g,n.parent=g,this.root=g),t=n.parent;null!=t;){if(!(null==t.child1||t.height<2)){c=t.child1;var C=t.child2,E=C.height-c.height;if(E>1){var U=C.child1,M=C.child2;if(C.child1=t,C.parent=t.parent,t.parent=C,null!=C.parent?C.parent.child1==t?C.parent.child1=C:C.parent.child2=C:this.root=C,U.height>M.height){C.child2=U,t.child2=M,M.parent=t;O=t.aabb,a=c.aabb,b=M.aabb;O.minx=a.minx<b.minx?a.minx:b.minx,O.miny=a.miny<b.miny?a.miny:b.miny,O.maxx=a.maxx>b.maxx?a.maxx:b.maxx,O.maxy=a.maxy>b.maxy?a.maxy:b.maxy;s=C.aabb;var T=t.aabb,k=U.aabb;s.minx=T.minx<k.minx?T.minx:k.minx,s.miny=T.miny<k.miny?T.miny:k.miny,s.maxx=T.maxx>k.maxx?T.maxx:k.maxx,s.maxy=T.maxy>k.maxy?T.maxy:k.maxy;var D=c.height,S=M.height;t.height=1+(D>S?D:S);var A=t.height,P=U.height;C.height=1+(A>P?A:P)}else{C.child2=M,t.child2=U,U.parent=t;var V=t.aabb,I=c.aabb,N=U.aabb;V.minx=I.minx<N.minx?I.minx:N.minx,V.miny=I.miny<N.miny?I.miny:N.miny,V.maxx=I.maxx>N.maxx?I.maxx:N.maxx,V.maxy=I.maxy>N.maxy?I.maxy:N.maxy;_=C.aabb;var F=t.aabb,R=M.aabb;_.minx=F.minx<R.minx?F.minx:R.minx,_.miny=F.miny<R.miny?F.miny:R.miny,_.maxx=F.maxx>R.maxx?F.maxx:R.maxx,_.maxy=F.maxy>R.maxy?F.maxy:R.maxy;var L=c.height,B=U.height;t.height=1+(L>B?L:B);var G=t.height,j=M.height;C.height=1+(G>j?G:j)}t=C}else if(E<-1){var K=c.child1,W=c.child2;if(c.child1=t,c.parent=t.parent,t.parent=c,null!=c.parent?c.parent.child1==t?c.parent.child1=c:c.parent.child2=c:this.root=c,K.height>W.height){c.child2=K,t.child1=W,W.parent=t;var Y=t.aabb,X=C.aabb,H=W.aabb;Y.minx=X.minx<H.minx?X.minx:H.minx,Y.miny=X.miny<H.miny?X.miny:H.miny,Y.maxx=X.maxx>H.maxx?X.maxx:H.maxx,Y.maxy=X.maxy>H.maxy?X.maxy:H.maxy;var Z=c.aabb,q=t.aabb,$=K.aabb;Z.minx=q.minx<$.minx?q.minx:$.minx,Z.miny=q.miny<$.miny?q.miny:$.miny,Z.maxx=q.maxx>$.maxx?q.maxx:$.maxx,Z.maxy=q.maxy>$.maxy?q.maxy:$.maxy;var Q=C.height,J=W.height;t.height=1+(Q>J?Q:J);var nn=t.height,en=K.height;c.height=1+(nn>en?nn:en)}else{c.child2=W,t.child1=K,K.parent=t;var tn=t.aabb,rn=C.aabb,ln=K.aabb;tn.minx=rn.minx<ln.minx?rn.minx:ln.minx,tn.miny=rn.miny<ln.miny?rn.miny:ln.miny,tn.maxx=rn.maxx>ln.maxx?rn.maxx:ln.maxx,tn.maxy=rn.maxy>ln.maxy?rn.maxy:ln.maxy;x=c.aabb;var sn=t.aabb,an=W.aabb;x.minx=sn.minx<an.minx?sn.minx:an.minx,x.miny=sn.miny<an.miny?sn.miny:an.miny,x.maxx=sn.maxx>an.maxx?sn.maxx:an.maxx,x.maxy=sn.maxy>an.maxy?sn.maxy:an.maxy;var on=C.height,pn=K.height;t.height=1+(on>pn?on:pn);var hn=t.height,un=W.height;c.height=1+(hn>un?hn:un)}t=c}}i=t.child1,r=t.child2;var _n=i.height,cn=r.height;t.height=1+(_n>cn?_n:cn);var dn=t.aabb,xn=i.aabb,bn=r.aabb;dn.minx=xn.minx<bn.minx?xn.minx:bn.minx,dn.miny=xn.miny<bn.miny?xn.miny:bn.miny,dn.maxx=xn.maxx>bn.maxx?xn.maxx:bn.maxx,dn.maxy=xn.maxy>bn.maxy?xn.maxy:bn.maxy,t=t.parent}}},removeLeaf:function(n){if(n==this.root)this.root=null;else{var e=n.parent,t=e.parent,i=e.child1==n?e.child2:e.child1;if(null!=t){t.child1==e?t.child1=i:t.child2=i,i.parent=t,(sn=e).height=-1,null!=(an=sn.aabb).outer&&(an.outer.zpp_inner=null,an.outer=null),an.wrap_min=an.wrap_max=null,an._invalidate=null,an._validate=null,an.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=an,sn.child1=sn.child2=sn.parent=null,sn.next=null,sn.snext=null,sn.mnext=null,sn.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=sn;for(var r=t;null!=r;){if(!(null==r.child1||r.height<2)){var l=r.child1,s=r.child2,a=s.height-l.height;if(a>1){var o=s.child1,p=s.child2;if(s.child1=r,s.parent=r.parent,r.parent=s,null!=s.parent?s.parent.child1==r?s.parent.child1=s:s.parent.child2=s:this.root=s,o.height>p.height){s.child2=o,r.child2=p,p.parent=r;var h=r.aabb,u=l.aabb,_=p.aabb;h.minx=u.minx<_.minx?u.minx:_.minx,h.miny=u.miny<_.miny?u.miny:_.miny,h.maxx=u.maxx>_.maxx?u.maxx:_.maxx,h.maxy=u.maxy>_.maxy?u.maxy:_.maxy;var c=s.aabb,d=r.aabb,f=o.aabb;c.minx=d.minx<f.minx?d.minx:f.minx,c.miny=d.miny<f.miny?d.miny:f.miny,c.maxx=d.maxx>f.maxx?d.maxx:f.maxx,c.maxy=d.maxy>f.maxy?d.maxy:f.maxy;var x=l.height,b=p.height;r.height=1+(x>b?x:b);var y=r.height,v=o.height;s.height=1+(y>v?y:v)}else{s.child2=p,r.child2=o,o.parent=r;var m=r.aabb,g=l.aabb,z=o.aabb;m.minx=g.minx<z.minx?g.minx:z.minx,m.miny=g.miny<z.miny?g.miny:z.miny,m.maxx=g.maxx>z.maxx?g.maxx:z.maxx,m.maxy=g.maxy>z.maxy?g.maxy:z.maxy;var w=s.aabb,O=r.aabb,C=p.aabb;w.minx=O.minx<C.minx?O.minx:C.minx,w.miny=O.miny<C.miny?O.miny:C.miny,w.maxx=O.maxx>C.maxx?O.maxx:C.maxx,w.maxy=O.maxy>C.maxy?O.maxy:C.maxy;var E=l.height,U=o.height;r.height=1+(E>U?E:U);var M=r.height,T=p.height;s.height=1+(M>T?M:T)}r=s}else if(a<-1){var k=l.child1,D=l.child2;if(l.child1=r,l.parent=r.parent,r.parent=l,null!=l.parent?l.parent.child1==r?l.parent.child1=l:l.parent.child2=l:this.root=l,k.height>D.height){l.child2=k,r.child1=D,D.parent=r;var S=r.aabb,A=s.aabb,P=D.aabb;S.minx=A.minx<P.minx?A.minx:P.minx,S.miny=A.miny<P.miny?A.miny:P.miny,S.maxx=A.maxx>P.maxx?A.maxx:P.maxx,S.maxy=A.maxy>P.maxy?A.maxy:P.maxy;var V=l.aabb,I=r.aabb,N=k.aabb;V.minx=I.minx<N.minx?I.minx:N.minx,V.miny=I.miny<N.miny?I.miny:N.miny,V.maxx=I.maxx>N.maxx?I.maxx:N.maxx,V.maxy=I.maxy>N.maxy?I.maxy:N.maxy;var F=s.height,R=D.height;r.height=1+(F>R?F:R);var L=r.height,B=k.height;l.height=1+(L>B?L:B)}else{l.child2=D,r.child1=k,k.parent=r;var G=r.aabb,j=s.aabb,K=k.aabb;G.minx=j.minx<K.minx?j.minx:K.minx,G.miny=j.miny<K.miny?j.miny:K.miny,G.maxx=j.maxx>K.maxx?j.maxx:K.maxx,G.maxy=j.maxy>K.maxy?j.maxy:K.maxy;var W=l.aabb,Y=r.aabb,X=D.aabb;W.minx=Y.minx<X.minx?Y.minx:X.minx,W.miny=Y.miny<X.miny?Y.miny:X.miny,W.maxx=Y.maxx>X.maxx?Y.maxx:X.maxx,W.maxy=Y.maxy>X.maxy?Y.maxy:X.maxy;var H=s.height,Z=k.height;r.height=1+(H>Z?H:Z);var q=r.height,$=D.height;l.height=1+(q>$?q:$)}r=l}}var Q=r.child1,J=r.child2,nn=r.aabb,en=Q.aabb,tn=J.aabb;nn.minx=en.minx<tn.minx?en.minx:tn.minx,nn.miny=en.miny<tn.miny?en.miny:tn.miny,nn.maxx=en.maxx>tn.maxx?en.maxx:tn.maxx,nn.maxy=en.maxy>tn.maxy?en.maxy:tn.maxy;var rn=Q.height,ln=J.height;r.height=1+(rn>ln?rn:ln),r=r.parent}}else{var sn,an;this.root=i,i.parent=null,(sn=e).height=-1,null!=(an=sn.aabb).outer&&(an.outer.zpp_inner=null,an.outer=null),an.wrap_min=an.wrap_max=null,an._invalidate=null,an._validate=null,an.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=an,sn.child1=sn.child2=sn.parent=null,sn.next=null,sn.snext=null,sn.mnext=null,sn.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=sn}}},inlined_removeLeaf:function(n){if(n!=this.root){var e=n.parent,t=e.parent,i=e.child1==n?e.child2:e.child1;if(null!=t){t.child1==e?t.child1=i:t.child2=i,i.parent=t,(sn=e).height=-1,null!=(an=sn.aabb).outer&&(an.outer.zpp_inner=null,an.outer=null),an.wrap_min=an.wrap_max=null,an._invalidate=null,an._validate=null,an.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=an,sn.child1=sn.child2=sn.parent=null,sn.next=null,sn.snext=null,sn.mnext=null,sn.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=sn;for(var r=t;null!=r;){if(!(null==r.child1||r.height<2)){var l=r.child1,s=r.child2,a=s.height-l.height;if(a>1){var o=s.child1,p=s.child2;if(s.child1=r,s.parent=r.parent,r.parent=s,null!=s.parent?s.parent.child1==r?s.parent.child1=s:s.parent.child2=s:this.root=s,o.height>p.height){s.child2=o,r.child2=p,p.parent=r;var h=r.aabb,u=l.aabb,_=p.aabb;h.minx=u.minx<_.minx?u.minx:_.minx,h.miny=u.miny<_.miny?u.miny:_.miny,h.maxx=u.maxx>_.maxx?u.maxx:_.maxx,h.maxy=u.maxy>_.maxy?u.maxy:_.maxy;var c=s.aabb,d=r.aabb,f=o.aabb;c.minx=d.minx<f.minx?d.minx:f.minx,c.miny=d.miny<f.miny?d.miny:f.miny,c.maxx=d.maxx>f.maxx?d.maxx:f.maxx,c.maxy=d.maxy>f.maxy?d.maxy:f.maxy;var x=l.height,b=p.height;r.height=1+(x>b?x:b);var y=r.height,v=o.height;s.height=1+(y>v?y:v)}else{s.child2=p,r.child2=o,o.parent=r;var m=r.aabb,g=l.aabb,z=o.aabb;m.minx=g.minx<z.minx?g.minx:z.minx,m.miny=g.miny<z.miny?g.miny:z.miny,m.maxx=g.maxx>z.maxx?g.maxx:z.maxx,m.maxy=g.maxy>z.maxy?g.maxy:z.maxy;var w=s.aabb,O=r.aabb,C=p.aabb;w.minx=O.minx<C.minx?O.minx:C.minx,w.miny=O.miny<C.miny?O.miny:C.miny,w.maxx=O.maxx>C.maxx?O.maxx:C.maxx,w.maxy=O.maxy>C.maxy?O.maxy:C.maxy;var E=l.height,U=o.height;r.height=1+(E>U?E:U);var M=r.height,T=p.height;s.height=1+(M>T?M:T)}r=s}else if(a<-1){var k=l.child1,D=l.child2;if(l.child1=r,l.parent=r.parent,r.parent=l,null!=l.parent?l.parent.child1==r?l.parent.child1=l:l.parent.child2=l:this.root=l,k.height>D.height){l.child2=k,r.child1=D,D.parent=r;var S=r.aabb,A=s.aabb,P=D.aabb;S.minx=A.minx<P.minx?A.minx:P.minx,S.miny=A.miny<P.miny?A.miny:P.miny,S.maxx=A.maxx>P.maxx?A.maxx:P.maxx,S.maxy=A.maxy>P.maxy?A.maxy:P.maxy;var V=l.aabb,I=r.aabb,N=k.aabb;V.minx=I.minx<N.minx?I.minx:N.minx,V.miny=I.miny<N.miny?I.miny:N.miny,V.maxx=I.maxx>N.maxx?I.maxx:N.maxx,V.maxy=I.maxy>N.maxy?I.maxy:N.maxy;var F=s.height,R=D.height;r.height=1+(F>R?F:R);var L=r.height,B=k.height;l.height=1+(L>B?L:B)}else{l.child2=D,r.child1=k,k.parent=r;var G=r.aabb,j=s.aabb,K=k.aabb;G.minx=j.minx<K.minx?j.minx:K.minx,G.miny=j.miny<K.miny?j.miny:K.miny,G.maxx=j.maxx>K.maxx?j.maxx:K.maxx,G.maxy=j.maxy>K.maxy?j.maxy:K.maxy;var W=l.aabb,Y=r.aabb,X=D.aabb;W.minx=Y.minx<X.minx?Y.minx:X.minx,W.miny=Y.miny<X.miny?Y.miny:X.miny,W.maxx=Y.maxx>X.maxx?Y.maxx:X.maxx,W.maxy=Y.maxy>X.maxy?Y.maxy:X.maxy;var H=s.height,Z=k.height;r.height=1+(H>Z?H:Z);var q=r.height,$=D.height;l.height=1+(q>$?q:$)}r=l}}var Q=r.child1,J=r.child2,nn=r.aabb,en=Q.aabb,tn=J.aabb;nn.minx=en.minx<tn.minx?en.minx:tn.minx,nn.miny=en.miny<tn.miny?en.miny:tn.miny,nn.maxx=en.maxx>tn.maxx?en.maxx:tn.maxx,nn.maxy=en.maxy>tn.maxy?en.maxy:tn.maxy;var rn=Q.height,ln=J.height;r.height=1+(rn>ln?rn:ln),r=r.parent}}else{var sn,an;this.root=i,i.parent=null,(sn=e).height=-1,null!=(an=sn.aabb).outer&&(an.outer.zpp_inner=null,an.outer=null),an.wrap_min=an.wrap_max=null,an._invalidate=null,an._validate=null,an.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=an,sn.child1=sn.child2=sn.parent=null,sn.next=null,sn.snext=null,sn.mnext=null,sn.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=sn}}else this.root=null},balance:function(n){if(null==n.child1||n.height<2)return n;var e=n.child1,t=n.child2,i=t.height-e.height;if(i>1){var r=t.child1,l=t.child2;if(t.child1=n,t.parent=n.parent,n.parent=t,null!=t.parent?t.parent.child1==n?t.parent.child1=t:t.parent.child2=t:this.root=t,r.height>l.height){t.child2=r,n.child2=l,l.parent=n;var s=n.aabb,a=e.aabb,o=l.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;s=t.aabb,a=n.aabb,o=r.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;var p=e.height,h=l.height;n.height=1+(p>h?p:h);p=n.height,h=r.height;t.height=1+(p>h?p:h)}else{t.child2=l,n.child2=r,r.parent=n;s=n.aabb,a=e.aabb,o=r.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;s=t.aabb,a=n.aabb,o=l.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;p=e.height,h=r.height;n.height=1+(p>h?p:h);p=n.height,h=l.height;t.height=1+(p>h?p:h)}return t}if(i<-1){r=e.child1,l=e.child2;if(e.child1=n,e.parent=n.parent,n.parent=e,null!=e.parent?e.parent.child1==n?e.parent.child1=e:e.parent.child2=e:this.root=e,r.height>l.height){e.child2=r,n.child1=l,l.parent=n;s=n.aabb,a=t.aabb,o=l.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;s=e.aabb,a=n.aabb,o=r.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;p=t.height,h=l.height;n.height=1+(p>h?p:h);p=n.height,h=r.height;e.height=1+(p>h?p:h)}else{e.child2=l,n.child1=r,r.parent=n;s=n.aabb,a=t.aabb,o=r.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;s=e.aabb,a=n.aabb,o=l.aabb;s.minx=a.minx<o.minx?a.minx:o.minx,s.miny=a.miny<o.miny?a.miny:o.miny,s.maxx=a.maxx>o.maxx?a.maxx:o.maxx,s.maxy=a.maxy>o.maxy?a.maxy:o.maxy;p=t.height,h=r.height;n.height=1+(p>h?p:h);p=n.height,h=l.height;e.height=1+(p>h?p:h)}return e}return n},__class__:zpp_$nape_space_ZPP_$AABBTree};var zpp_$nape_space_ZPP_$DynAABBPhase=function(n){this.openlist=null,this.failed=null,this.treeStack2=null,this.treeStack=null,this.moves=null,this.syncs=null,this.pairs=null,this.dtree=null,this.stree=null,zpp_$nape_space_ZPP_$Broadphase.call(this),this.space=n,this.is_sweep=!1,this.dynab=this,this.stree=new zpp_$nape_space_ZPP_$AABBTree,this.dtree=new zpp_$nape_space_ZPP_$AABBTree};t["zpp_nape.space.ZPP_DynAABBPhase"]=zpp_$nape_space_ZPP_$DynAABBPhase,zpp_$nape_space_ZPP_$DynAABBPhase.__name__="zpp_nape.space.ZPP_DynAABBPhase",zpp_$nape_space_ZPP_$DynAABBPhase.__super__=zpp_$nape_space_ZPP_$Broadphase,zpp_$nape_space_ZPP_$DynAABBPhase.prototype=$extend(zpp_$nape_space_ZPP_$Broadphase.prototype,{dyn:function(n){return 1!=n.body.type&&!n.body.component.sleeping},__insert:function(n){var e;null==zpp_$nape_space_ZPP_$AABBNode.zpp_pool?e=new zpp_$nape_space_ZPP_$AABBNode:(e=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=e.next,e.next=null),null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?e.aabb=new zpp_$nape_geom_ZPP_$AABB:(e.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=e.aabb.next,e.aabb.next=null),e.moved=!1,e.synced=!1,e.first_sync=!1,e.shape=n,n.node=e,e.synced=!0,e.first_sync=!0,e.snext=this.syncs,this.syncs=e},__remove:function(n){var e=n.node;if(e.first_sync||(e.dyn?this.dtree.removeLeaf(e):this.stree.removeLeaf(e)),n.node=null,e.synced){for(var t=null,i=this.syncs;null!=i&&i!=e;)t=i,i=i.snext;null==t?this.syncs=i.snext:t.snext=i.snext,i.snext=null,e.synced=!1}if(e.moved){for(t=null,i=this.moves;null!=i&&i!=e;)t=i,i=i.mnext;null==t?this.moves=i.mnext:t.mnext=i.mnext,i.mnext=null,e.moved=!1}for(t=null,i=this.pairs;null!=i;){var r=i.next;if(i.n1!=e&&i.n2!=e)t=i,i=r;else null==t?this.pairs=r:t.next=r,null!=i.arb&&(i.arb.pair=null),i.arb=null,i.n1.shape.pairs.remove(i),i.n2.shape.pairs.remove(i),(l=i).n1=l.n2=null,l.sleeping=!1,l.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=l,i=r}for(;null!=n.pairs.head;){var l;(i=n.pairs.pop_unsafe()).n1==e?i.n2.shape.pairs.remove(i):i.n1.shape.pairs.remove(i),null!=i.arb&&(i.arb.pair=null),i.arb=null,(l=i).n1=l.n2=null,l.sleeping=!1,l.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=l}(l=e).height=-1;var s=l.aabb;null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s.wrap_min=s.wrap_max=null,s._invalidate=null,s._validate=null,s.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=s,l.child1=l.child2=l.parent=null,l.next=null,l.snext=null,l.mnext=null,l.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=l},__sync:function(n){var e=n.node;if(!e.synced){if(!this.space.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){if((y=n.circle).zip_worldCOM&&null!=y.body){if(y.zip_worldCOM=!1,y.zip_localCOM){if(y.zip_localCOM=!1,1==y.type){if(null==(h=y.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==h.lverts.next.next)h.localCOMx=h.lverts.next.x,h.localCOMy=h.lverts.next.y;else if(null==h.lverts.next.next.next){h.localCOMx=h.lverts.next.x,h.localCOMy=h.lverts.next.y;var t=1;h.localCOMx+=h.lverts.next.next.x*t,h.localCOMy+=h.lverts.next.next.y*t;t=.5;h.localCOMx*=t,h.localCOMy*=t}else{h.localCOMx=0,h.localCOMy=0;var i=0,r=_=h.lverts.next,l=_=_.next;for(_=_.next;null!=_;){var s=_;i+=l.x*(s.y-r.y);var a=s.y*l.x-s.x*l.y;h.localCOMx+=(l.x+s.x)*a,h.localCOMy+=(l.y+s.y)*a,r=l,l=s,_=_.next}s=_=h.lverts.next;i+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;h.localCOMx+=(l.x+s.x)*a,h.localCOMy+=(l.y+s.y)*a,r=l,l=s;s=_=_.next;i+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;h.localCOMx+=(l.x+s.x)*a,h.localCOMy+=(l.y+s.y)*a;t=i=1/(3*i);h.localCOMx*=t,h.localCOMy*=t}}null!=y.wrap_localCOM&&(y.wrap_localCOM.zpp_inner.x=y.localCOMx,y.wrap_localCOM.zpp_inner.y=y.localCOMy)}(h=y.body).zip_axis&&(h.zip_axis=!1,h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot)),y.worldCOMx=y.body.posx+(y.body.axisy*y.localCOMx-y.body.axisx*y.localCOMy),y.worldCOMy=y.body.posy+(y.localCOMx*y.body.axisx+y.localCOMy*y.body.axisy)}var o=y.radius,p=y.radius;y.aabb.minx=y.worldCOMx-o,y.aabb.miny=y.worldCOMy-p,y.aabb.maxx=y.worldCOMx+o,y.aabb.maxy=y.worldCOMy+p}else{if((y=n.polygon).zip_gverts&&null!=y.body){var h;y.zip_gverts=!1,y.validate_lverts(),(h=y.body).zip_axis&&(h.zip_axis=!1,h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot));for(var u=y.lverts.next,_=y.gverts.next;null!=_;){var c=_,d=u;u=u.next,c.x=y.body.posx+(y.body.axisy*d.x-y.body.axisx*d.y),c.y=y.body.posy+(d.x*y.body.axisx+d.y*y.body.axisy),_=_.next}}if(null==y.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var f=y.gverts.next;y.aabb.minx=f.x,y.aabb.miny=f.y,y.aabb.maxx=f.x,y.aabb.maxy=f.y;for(_=y.gverts.next.next;null!=_;){var x=_;x.x<y.aabb.minx&&(y.aabb.minx=x.x),x.x>y.aabb.maxx&&(y.aabb.maxx=x.x),x.y<y.aabb.miny&&(y.aabb.miny=x.y),x.y>y.aabb.maxy&&(y.aabb.maxy=x.y),_=_.next}}var b;if(e.dyn==(1!=n.body.type&&!n.body.component.sleeping)){var y=e.aabb,v=n.aabb;b=!(v.minx>=y.minx&&v.miny>=y.miny&&v.maxx<=y.maxx&&v.maxy<=y.maxy)}else b=!0;b&&(e.synced=!0,e.snext=this.syncs,this.syncs=e)}},sync_broadphase:function(){if(this.space.validation(),null!=this.syncs)if(null==this.moves){for(var n=this.syncs;null!=n;){var e=n.shape;if(n.first_sync)n.first_sync=!1;else if(n==(Ke=n.dyn?this.dtree:this.stree).root)Ke.root=null;else{var t=(We=n.parent).parent,i=We.child1==n?We.child2:We.child1;if(null!=t){t.child1==We?t.child1=i:t.child2=i,i.parent=t,(Ye=We).height=-1,null!=(Xe=Ye.aabb).outer&&(Xe.outer.zpp_inner=null,Xe.outer=null),Xe.wrap_min=Xe.wrap_max=null,Xe._invalidate=null,Xe._validate=null,Xe.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=Xe,Ye.child1=Ye.child2=Ye.parent=null,Ye.next=null,Ye.snext=null,Ye.mnext=null,Ye.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=Ye;for(var r=t;null!=r;){if(!(null==r.child1||r.height<2)){var l=r.child1;if((Ze=(He=r.child2).height-l.height)>1){var s=He.child1,a=He.child2;if(He.child1=r,He.parent=r.parent,r.parent=He,null!=He.parent?He.parent.child1==r?He.parent.child1=He:He.parent.child2=He:Ke.root=He,s.height>a.height){He.child2=s,r.child2=a,a.parent=r;var o=r.aabb,p=l.aabb,h=a.aabb;o.minx=p.minx<h.minx?p.minx:h.minx,o.miny=p.miny<h.miny?p.miny:h.miny,o.maxx=p.maxx>h.maxx?p.maxx:h.maxx,o.maxy=p.maxy>h.maxy?p.maxy:h.maxy;var u=He.aabb,_=r.aabb,c=s.aabb;u.minx=_.minx<c.minx?_.minx:c.minx,u.miny=_.miny<c.miny?_.miny:c.miny,u.maxx=_.maxx>c.maxx?_.maxx:c.maxx,u.maxy=_.maxy>c.maxy?_.maxy:c.maxy;var d=l.height,f=a.height;r.height=1+(d>f?d:f);var x=r.height,b=s.height;He.height=1+(x>b?x:b)}else{He.child2=a,r.child2=s,s.parent=r;var y=r.aabb,v=l.aabb,m=s.aabb;y.minx=v.minx<m.minx?v.minx:m.minx,y.miny=v.miny<m.miny?v.miny:m.miny,y.maxx=v.maxx>m.maxx?v.maxx:m.maxx,y.maxy=v.maxy>m.maxy?v.maxy:m.maxy;var g=He.aabb,z=r.aabb,w=a.aabb;g.minx=z.minx<w.minx?z.minx:w.minx,g.miny=z.miny<w.miny?z.miny:w.miny,g.maxx=z.maxx>w.maxx?z.maxx:w.maxx,g.maxy=z.maxy>w.maxy?z.maxy:w.maxy;var O=l.height,C=s.height;r.height=1+(O>C?O:C);var E=r.height,U=a.height;He.height=1+(E>U?E:U)}r=He}else if(Ze<-1){var M=l.child1,T=l.child2;if(l.child1=r,l.parent=r.parent,r.parent=l,null!=l.parent?l.parent.child1==r?l.parent.child1=l:l.parent.child2=l:Ke.root=l,M.height>T.height){l.child2=M,r.child1=T,T.parent=r;var k=r.aabb,D=He.aabb,S=T.aabb;k.minx=D.minx<S.minx?D.minx:S.minx,k.miny=D.miny<S.miny?D.miny:S.miny,k.maxx=D.maxx>S.maxx?D.maxx:S.maxx,k.maxy=D.maxy>S.maxy?D.maxy:S.maxy;var A=l.aabb,P=r.aabb,V=M.aabb;A.minx=P.minx<V.minx?P.minx:V.minx,A.miny=P.miny<V.miny?P.miny:V.miny,A.maxx=P.maxx>V.maxx?P.maxx:V.maxx,A.maxy=P.maxy>V.maxy?P.maxy:V.maxy;var I=He.height,N=T.height;r.height=1+(I>N?I:N);var F=r.height,R=M.height;l.height=1+(F>R?F:R)}else{l.child2=T,r.child1=M,M.parent=r;var L=r.aabb,B=He.aabb,G=M.aabb;L.minx=B.minx<G.minx?B.minx:G.minx,L.miny=B.miny<G.miny?B.miny:G.miny,L.maxx=B.maxx>G.maxx?B.maxx:G.maxx,L.maxy=B.maxy>G.maxy?B.maxy:G.maxy;var j=l.aabb,K=r.aabb,W=T.aabb;j.minx=K.minx<W.minx?K.minx:W.minx,j.miny=K.miny<W.miny?K.miny:W.miny,j.maxx=K.maxx>W.maxx?K.maxx:W.maxx,j.maxy=K.maxy>W.maxy?K.maxy:W.maxy;var Y=He.height,X=M.height;r.height=1+(Y>X?Y:X);var H=r.height,Z=T.height;l.height=1+(H>Z?H:Z)}r=l}}var q=r.child1,$=r.child2,Q=r.aabb,J=q.aabb,nn=$.aabb;Q.minx=J.minx<nn.minx?J.minx:nn.minx,Q.miny=J.miny<nn.miny?J.miny:nn.miny,Q.maxx=J.maxx>nn.maxx?J.maxx:nn.maxx,Q.maxy=J.maxy>nn.maxy?J.maxy:nn.maxy;var en=q.height,tn=$.height;r.height=1+(en>tn?en:tn),r=r.parent}}else{Ke.root=i,i.parent=null,(qe=We).height=-1,null!=($e=qe.aabb).outer&&($e.outer.zpp_inner=null,$e.outer=null),$e.wrap_min=$e.wrap_max=null,$e._invalidate=null,$e._validate=null,$e.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=$e,qe.child1=qe.child2=qe.parent=null,qe.next=null,qe.snext=null,qe.mnext=null,qe.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=qe}}var rn=n.aabb;if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){if((Qe=e.circle).zip_worldCOM&&null!=Qe.body){if(Qe.zip_worldCOM=!1,Qe.zip_localCOM){if(Qe.zip_localCOM=!1,1==Qe.type){if(null==(Je=Qe.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==Je.lverts.next.next)Je.localCOMx=Je.lverts.next.x,Je.localCOMy=Je.lverts.next.y;else if(null==Je.lverts.next.next.next){Je.localCOMx=Je.lverts.next.x,Je.localCOMy=Je.lverts.next.y;var ln=1;Je.localCOMx+=Je.lverts.next.next.x*ln,Je.localCOMy+=Je.lverts.next.next.y*ln;var sn=.5;Je.localCOMx*=sn,Je.localCOMy*=sn}else{Je.localCOMx=0,Je.localCOMy=0;var an=0,on=nt=Je.lverts.next,pn=nt=nt.next;for(nt=nt.next;null!=nt;){var hn=nt;an+=pn.x*(hn.y-on.y);var un=hn.y*pn.x-hn.x*pn.y;Je.localCOMx+=(pn.x+hn.x)*un,Je.localCOMy+=(pn.y+hn.y)*un,on=pn,pn=hn,nt=nt.next}var _n=nt=Je.lverts.next;an+=pn.x*(_n.y-on.y);var cn=_n.y*pn.x-_n.x*pn.y;Je.localCOMx+=(pn.x+_n.x)*cn,Je.localCOMy+=(pn.y+_n.y)*cn,on=pn,pn=_n;var dn=nt=nt.next;an+=pn.x*(dn.y-on.y);var xn=dn.y*pn.x-dn.x*pn.y;Je.localCOMx+=(pn.x+dn.x)*xn,Je.localCOMy+=(pn.y+dn.y)*xn;var bn=an=1/(3*an);Je.localCOMx*=bn,Je.localCOMy*=bn}}null!=Qe.wrap_localCOM&&(Qe.wrap_localCOM.zpp_inner.x=Qe.localCOMx,Qe.wrap_localCOM.zpp_inner.y=Qe.localCOMy)}(et=Qe.body).zip_axis&&(et.zip_axis=!1,et.axisx=Math.sin(et.rot),et.axisy=Math.cos(et.rot)),Qe.worldCOMx=Qe.body.posx+(Qe.body.axisy*Qe.localCOMx-Qe.body.axisx*Qe.localCOMy),Qe.worldCOMy=Qe.body.posy+(Qe.localCOMx*Qe.body.axisx+Qe.localCOMy*Qe.body.axisy)}var yn=Qe.radius,vn=Qe.radius;Qe.aabb.minx=Qe.worldCOMx-yn,Qe.aabb.miny=Qe.worldCOMy-vn,Qe.aabb.maxx=Qe.worldCOMx+yn,Qe.aabb.maxy=Qe.worldCOMy+vn}else{if((tt=e.polygon).zip_gverts&&null!=tt.body){tt.zip_gverts=!1,tt.validate_lverts(),(it=tt.body).zip_axis&&(it.zip_axis=!1,it.axisx=Math.sin(it.rot),it.axisy=Math.cos(it.rot));for(var mn=tt.lverts.next,gn=tt.gverts.next;null!=gn;){var zn=gn,wn=mn;mn=mn.next,zn.x=tt.body.posx+(tt.body.axisy*wn.x-tt.body.axisx*wn.y),zn.y=tt.body.posy+(wn.x*tt.body.axisx+wn.y*tt.body.axisy),gn=gn.next}}if(null==tt.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var On=tt.gverts.next;tt.aabb.minx=On.x,tt.aabb.miny=On.y,tt.aabb.maxx=On.x,tt.aabb.maxy=On.y;for(var Cn=tt.gverts.next.next;null!=Cn;){(rt=Cn).x<tt.aabb.minx&&(tt.aabb.minx=rt.x),rt.x>tt.aabb.maxx&&(tt.aabb.maxx=rt.x),rt.y<tt.aabb.miny&&(tt.aabb.miny=rt.y),rt.y>tt.aabb.maxy&&(tt.aabb.maxy=rt.y),Cn=Cn.next}}var En=e.aabb;if(rn.minx=En.minx-3,rn.miny=En.miny-3,rn.maxx=En.maxx+3,rn.maxy=En.maxy+3,null==(lt=(n.dyn=1!=e.body.type&&!e.body.component.sleeping)?this.dtree:this.stree).root)lt.root=n,lt.root.parent=null;else{for(var Un=n.aabb,Mn=lt.root;null!=Mn.child1;){var Tn=Mn.child1,kn=Mn.child2,Dn=2*((st=Mn.aabb).maxx-st.minx+(st.maxy-st.miny)),Sn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,An=Mn.aabb;Sn.minx=An.minx<Un.minx?An.minx:Un.minx,Sn.miny=An.miny<Un.miny?An.miny:Un.miny,Sn.maxx=An.maxx>Un.maxx?An.maxx:Un.maxx,Sn.maxy=An.maxy>Un.maxy?An.maxy:Un.maxy;var Pn=2*(ot=2*((at=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-at.minx+(at.maxy-at.miny))),Vn=2*(ot-Dn),In=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Nn=Tn.aabb;if(In.minx=Un.minx<Nn.minx?Un.minx:Nn.minx,In.miny=Un.miny<Nn.miny?Un.miny:Nn.miny,In.maxx=Un.maxx>Nn.maxx?Un.maxx:Nn.maxx,In.maxy=Un.maxy>Nn.maxy?Un.maxy:Nn.maxy,null==Tn.child1){pt=2*((ht=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-ht.minx+(ht.maxy-ht.miny))+Vn}else{var Fn=2*((ut=Tn.aabb).maxx-ut.minx+(ut.maxy-ut.miny));pt=2*((_t=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-_t.minx+(_t.maxy-_t.miny))-Fn+Vn}var Rn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Ln=kn.aabb;if(Rn.minx=Un.minx<Ln.minx?Un.minx:Ln.minx,Rn.miny=Un.miny<Ln.miny?Un.miny:Ln.miny,Rn.maxx=Un.maxx>Ln.maxx?Un.maxx:Ln.maxx,Rn.maxy=Un.maxy>Ln.maxy?Un.maxy:Ln.maxy,null==kn.child1){ct=2*((dt=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-dt.minx+(dt.maxy-dt.miny))+Vn}else{var Bn=2*((ft=kn.aabb).maxx-ft.minx+(ft.maxy-ft.miny));ct=2*((xt=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-xt.minx+(xt.maxy-xt.miny))-Bn+Vn}if(Pn<pt&&Pn<ct)break;Mn=pt<ct?Tn:kn}var Gn=(bt=Mn).parent;null==zpp_$nape_space_ZPP_$AABBNode.zpp_pool?yt=new zpp_$nape_space_ZPP_$AABBNode:(yt=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=yt.next,yt.next=null),null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?yt.aabb=new zpp_$nape_geom_ZPP_$AABB:(yt.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=yt.aabb.next,yt.aabb.next=null),yt.moved=!1,yt.synced=!1,yt.first_sync=!1,yt.parent=Gn;var jn=yt.aabb,Kn=bt.aabb;for(jn.minx=Un.minx<Kn.minx?Un.minx:Kn.minx,jn.miny=Un.miny<Kn.miny?Un.miny:Kn.miny,jn.maxx=Un.maxx>Kn.maxx?Un.maxx:Kn.maxx,jn.maxy=Un.maxy>Kn.maxy?Un.maxy:Kn.maxy,yt.height=bt.height+1,null!=Gn?(Gn.child1==bt?Gn.child1=yt:Gn.child2=yt,yt.child1=bt,yt.child2=n,bt.parent=yt,n.parent=yt):(yt.child1=bt,yt.child2=n,bt.parent=yt,n.parent=yt,lt.root=yt),Mn=n.parent;null!=Mn;){if(!(null==Mn.child1||Mn.height<2)){var Wn=Mn.child1;if((mt=(vt=Mn.child2).height-Wn.height)>1){var Yn=vt.child1,Xn=vt.child2;if(vt.child1=Mn,vt.parent=Mn.parent,Mn.parent=vt,null!=vt.parent?vt.parent.child1==Mn?vt.parent.child1=vt:vt.parent.child2=vt:lt.root=vt,Yn.height>Xn.height){vt.child2=Yn,Mn.child2=Xn,Xn.parent=Mn;var Hn=Mn.aabb,Zn=Wn.aabb,qn=Xn.aabb;Hn.minx=Zn.minx<qn.minx?Zn.minx:qn.minx,Hn.miny=Zn.miny<qn.miny?Zn.miny:qn.miny,Hn.maxx=Zn.maxx>qn.maxx?Zn.maxx:qn.maxx,Hn.maxy=Zn.maxy>qn.maxy?Zn.maxy:qn.maxy;var $n=vt.aabb,Qn=Mn.aabb,Jn=Yn.aabb;$n.minx=Qn.minx<Jn.minx?Qn.minx:Jn.minx,$n.miny=Qn.miny<Jn.miny?Qn.miny:Jn.miny,$n.maxx=Qn.maxx>Jn.maxx?Qn.maxx:Jn.maxx,$n.maxy=Qn.maxy>Jn.maxy?Qn.maxy:Jn.maxy;var ne=Wn.height,ee=Xn.height;Mn.height=1+(ne>ee?ne:ee);var te=Mn.height,ie=Yn.height;vt.height=1+(te>ie?te:ie)}else{vt.child2=Xn,Mn.child2=Yn,Yn.parent=Mn;var re=Mn.aabb,le=Wn.aabb,se=Yn.aabb;re.minx=le.minx<se.minx?le.minx:se.minx,re.miny=le.miny<se.miny?le.miny:se.miny,re.maxx=le.maxx>se.maxx?le.maxx:se.maxx,re.maxy=le.maxy>se.maxy?le.maxy:se.maxy;var ae=vt.aabb,oe=Mn.aabb,pe=Xn.aabb;ae.minx=oe.minx<pe.minx?oe.minx:pe.minx,ae.miny=oe.miny<pe.miny?oe.miny:pe.miny,ae.maxx=oe.maxx>pe.maxx?oe.maxx:pe.maxx,ae.maxy=oe.maxy>pe.maxy?oe.maxy:pe.maxy;var he=Wn.height,ue=Yn.height;Mn.height=1+(he>ue?he:ue);var _e=Mn.height,ce=Xn.height;vt.height=1+(_e>ce?_e:ce)}Mn=vt}else if(mt<-1){var de=Wn.child1,fe=Wn.child2;if(Wn.child1=Mn,Wn.parent=Mn.parent,Mn.parent=Wn,null!=Wn.parent?Wn.parent.child1==Mn?Wn.parent.child1=Wn:Wn.parent.child2=Wn:lt.root=Wn,de.height>fe.height){Wn.child2=de,Mn.child1=fe,fe.parent=Mn;var xe=Mn.aabb,be=vt.aabb,ye=fe.aabb;xe.minx=be.minx<ye.minx?be.minx:ye.minx,xe.miny=be.miny<ye.miny?be.miny:ye.miny,xe.maxx=be.maxx>ye.maxx?be.maxx:ye.maxx,xe.maxy=be.maxy>ye.maxy?be.maxy:ye.maxy;var ve=Wn.aabb,me=Mn.aabb,ge=de.aabb;ve.minx=me.minx<ge.minx?me.minx:ge.minx,ve.miny=me.miny<ge.miny?me.miny:ge.miny,ve.maxx=me.maxx>ge.maxx?me.maxx:ge.maxx,ve.maxy=me.maxy>ge.maxy?me.maxy:ge.maxy;var ze=vt.height,we=fe.height;Mn.height=1+(ze>we?ze:we);var Oe=Mn.height,Ce=de.height;Wn.height=1+(Oe>Ce?Oe:Ce)}else{Wn.child2=fe,Mn.child1=de,de.parent=Mn;var Ee=Mn.aabb,Ue=vt.aabb,Me=de.aabb;Ee.minx=Ue.minx<Me.minx?Ue.minx:Me.minx,Ee.miny=Ue.miny<Me.miny?Ue.miny:Me.miny,Ee.maxx=Ue.maxx>Me.maxx?Ue.maxx:Me.maxx,Ee.maxy=Ue.maxy>Me.maxy?Ue.maxy:Me.maxy;var Te=Wn.aabb,ke=Mn.aabb,De=fe.aabb;Te.minx=ke.minx<De.minx?ke.minx:De.minx,Te.miny=ke.miny<De.miny?ke.miny:De.miny,Te.maxx=ke.maxx>De.maxx?ke.maxx:De.maxx,Te.maxy=ke.maxy>De.maxy?ke.maxy:De.maxy;var Se=vt.height,Ae=de.height;Mn.height=1+(Se>Ae?Se:Ae);var Pe=Mn.height,Ve=fe.height;Wn.height=1+(Pe>Ve?Pe:Ve)}Mn=Wn}}var Ie=Mn.child1,Ne=Mn.child2,Fe=Ie.height,Re=Ne.height;Mn.height=1+(Fe>Re?Fe:Re);var Le=Mn.aabb,Be=Ie.aabb,Ge=Ne.aabb;Le.minx=Be.minx<Ge.minx?Be.minx:Ge.minx,Le.miny=Be.miny<Ge.miny?Be.miny:Ge.miny,Le.maxx=Be.maxx>Ge.maxx?Be.maxx:Ge.maxx,Le.maxy=Be.maxy>Ge.maxy?Be.maxy:Ge.maxy,Mn=Mn.parent}}n.synced=!1,n.moved=!0,n.mnext=n.snext,n.snext=null,n=n.mnext}ln=this.syncs;this.syncs=this.moves,this.moves=ln}else for(;null!=this.syncs;){var je=this.syncs;this.syncs=je.snext,je.snext=null;var Ke;e=(n=je).shape;if(n.first_sync)n.first_sync=!1;else if(n==(Ke=n.dyn?this.dtree:this.stree).root)Ke.root=null;else{var We;t=(We=n.parent).parent,i=We.child1==n?We.child2:We.child1;if(null!=t){var Ye,Xe;t.child1==We?t.child1=i:t.child2=i,i.parent=t,(Ye=We).height=-1,null!=(Xe=Ye.aabb).outer&&(Xe.outer.zpp_inner=null,Xe.outer=null),Xe.wrap_min=Xe.wrap_max=null,Xe._invalidate=null,Xe._validate=null,Xe.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=Xe,Ye.child1=Ye.child2=Ye.parent=null,Ye.next=null,Ye.snext=null,Ye.mnext=null,Ye.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=Ye;for(r=t;null!=r;){if(!(null==r.child1||r.height<2)){var He,Ze;l=r.child1;if((Ze=(He=r.child2).height-l.height)>1){s=He.child1,a=He.child2;if(He.child1=r,He.parent=r.parent,r.parent=He,null!=He.parent?He.parent.child1==r?He.parent.child1=He:He.parent.child2=He:Ke.root=He,s.height>a.height){He.child2=s,r.child2=a,a.parent=r;o=r.aabb,p=l.aabb,h=a.aabb;o.minx=p.minx<h.minx?p.minx:h.minx,o.miny=p.miny<h.miny?p.miny:h.miny,o.maxx=p.maxx>h.maxx?p.maxx:h.maxx,o.maxy=p.maxy>h.maxy?p.maxy:h.maxy;u=He.aabb,_=r.aabb,c=s.aabb;u.minx=_.minx<c.minx?_.minx:c.minx,u.miny=_.miny<c.miny?_.miny:c.miny,u.maxx=_.maxx>c.maxx?_.maxx:c.maxx,u.maxy=_.maxy>c.maxy?_.maxy:c.maxy;d=l.height,f=a.height;r.height=1+(d>f?d:f);x=r.height,b=s.height;He.height=1+(x>b?x:b)}else{He.child2=a,r.child2=s,s.parent=r;y=r.aabb,v=l.aabb,m=s.aabb;y.minx=v.minx<m.minx?v.minx:m.minx,y.miny=v.miny<m.miny?v.miny:m.miny,y.maxx=v.maxx>m.maxx?v.maxx:m.maxx,y.maxy=v.maxy>m.maxy?v.maxy:m.maxy;g=He.aabb,z=r.aabb,w=a.aabb;g.minx=z.minx<w.minx?z.minx:w.minx,g.miny=z.miny<w.miny?z.miny:w.miny,g.maxx=z.maxx>w.maxx?z.maxx:w.maxx,g.maxy=z.maxy>w.maxy?z.maxy:w.maxy;O=l.height,C=s.height;r.height=1+(O>C?O:C);E=r.height,U=a.height;He.height=1+(E>U?E:U)}r=He}else if(Ze<-1){M=l.child1,T=l.child2;if(l.child1=r,l.parent=r.parent,r.parent=l,null!=l.parent?l.parent.child1==r?l.parent.child1=l:l.parent.child2=l:Ke.root=l,M.height>T.height){l.child2=M,r.child1=T,T.parent=r;k=r.aabb,D=He.aabb,S=T.aabb;k.minx=D.minx<S.minx?D.minx:S.minx,k.miny=D.miny<S.miny?D.miny:S.miny,k.maxx=D.maxx>S.maxx?D.maxx:S.maxx,k.maxy=D.maxy>S.maxy?D.maxy:S.maxy;A=l.aabb,P=r.aabb,V=M.aabb;A.minx=P.minx<V.minx?P.minx:V.minx,A.miny=P.miny<V.miny?P.miny:V.miny,A.maxx=P.maxx>V.maxx?P.maxx:V.maxx,A.maxy=P.maxy>V.maxy?P.maxy:V.maxy;I=He.height,N=T.height;r.height=1+(I>N?I:N);F=r.height,R=M.height;l.height=1+(F>R?F:R)}else{l.child2=T,r.child1=M,M.parent=r;L=r.aabb,B=He.aabb,G=M.aabb;L.minx=B.minx<G.minx?B.minx:G.minx,L.miny=B.miny<G.miny?B.miny:G.miny,L.maxx=B.maxx>G.maxx?B.maxx:G.maxx,L.maxy=B.maxy>G.maxy?B.maxy:G.maxy;j=l.aabb,K=r.aabb,W=T.aabb;j.minx=K.minx<W.minx?K.minx:W.minx,j.miny=K.miny<W.miny?K.miny:W.miny,j.maxx=K.maxx>W.maxx?K.maxx:W.maxx,j.maxy=K.maxy>W.maxy?K.maxy:W.maxy;Y=He.height,X=M.height;r.height=1+(Y>X?Y:X);H=r.height,Z=T.height;l.height=1+(H>Z?H:Z)}r=l}}q=r.child1,$=r.child2,Q=r.aabb,J=q.aabb,nn=$.aabb;Q.minx=J.minx<nn.minx?J.minx:nn.minx,Q.miny=J.miny<nn.miny?J.miny:nn.miny,Q.maxx=J.maxx>nn.maxx?J.maxx:nn.maxx,Q.maxy=J.maxy>nn.maxy?J.maxy:nn.maxy;en=q.height,tn=$.height;r.height=1+(en>tn?en:tn),r=r.parent}}else{var qe,$e;Ke.root=i,i.parent=null,(qe=We).height=-1,null!=($e=qe.aabb).outer&&($e.outer.zpp_inner=null,$e.outer=null),$e.wrap_min=$e.wrap_max=null,$e._invalidate=null,$e._validate=null,$e.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=$e,qe.child1=qe.child2=qe.parent=null,qe.next=null,qe.snext=null,qe.mnext=null,qe.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=qe}}rn=n.aabb;if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var Qe;if((Qe=e.circle).zip_worldCOM&&null!=Qe.body){if(Qe.zip_worldCOM=!1,Qe.zip_localCOM){if(Qe.zip_localCOM=!1,1==Qe.type){var Je;if(null==(Je=Qe.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==Je.lverts.next.next)Je.localCOMx=Je.lverts.next.x,Je.localCOMy=Je.lverts.next.y;else if(null==Je.lverts.next.next.next){Je.localCOMx=Je.lverts.next.x,Je.localCOMy=Je.lverts.next.y;ln=1;Je.localCOMx+=Je.lverts.next.next.x*ln,Je.localCOMy+=Je.lverts.next.next.y*ln;sn=.5;Je.localCOMx*=sn,Je.localCOMy*=sn}else{Je.localCOMx=0,Je.localCOMy=0;var nt;an=0,on=nt=Je.lverts.next,pn=nt=nt.next;for(nt=nt.next;null!=nt;){hn=nt;an+=pn.x*(hn.y-on.y);un=hn.y*pn.x-hn.x*pn.y;Je.localCOMx+=(pn.x+hn.x)*un,Je.localCOMy+=(pn.y+hn.y)*un,on=pn,pn=hn,nt=nt.next}_n=nt=Je.lverts.next;an+=pn.x*(_n.y-on.y);cn=_n.y*pn.x-_n.x*pn.y;Je.localCOMx+=(pn.x+_n.x)*cn,Je.localCOMy+=(pn.y+_n.y)*cn,on=pn,pn=_n;dn=nt=nt.next;an+=pn.x*(dn.y-on.y);xn=dn.y*pn.x-dn.x*pn.y;Je.localCOMx+=(pn.x+dn.x)*xn,Je.localCOMy+=(pn.y+dn.y)*xn;bn=an=1/(3*an);Je.localCOMx*=bn,Je.localCOMy*=bn}}null!=Qe.wrap_localCOM&&(Qe.wrap_localCOM.zpp_inner.x=Qe.localCOMx,Qe.wrap_localCOM.zpp_inner.y=Qe.localCOMy)}var et;(et=Qe.body).zip_axis&&(et.zip_axis=!1,et.axisx=Math.sin(et.rot),et.axisy=Math.cos(et.rot)),Qe.worldCOMx=Qe.body.posx+(Qe.body.axisy*Qe.localCOMx-Qe.body.axisx*Qe.localCOMy),Qe.worldCOMy=Qe.body.posy+(Qe.localCOMx*Qe.body.axisx+Qe.localCOMy*Qe.body.axisy)}yn=Qe.radius,vn=Qe.radius;Qe.aabb.minx=Qe.worldCOMx-yn,Qe.aabb.miny=Qe.worldCOMy-vn,Qe.aabb.maxx=Qe.worldCOMx+yn,Qe.aabb.maxy=Qe.worldCOMy+vn}else{var tt;if((tt=e.polygon).zip_gverts&&null!=tt.body){var it;tt.zip_gverts=!1,tt.validate_lverts(),(it=tt.body).zip_axis&&(it.zip_axis=!1,it.axisx=Math.sin(it.rot),it.axisy=Math.cos(it.rot));for(mn=tt.lverts.next,gn=tt.gverts.next;null!=gn;){zn=gn,wn=mn;mn=mn.next,zn.x=tt.body.posx+(tt.body.axisy*wn.x-tt.body.axisx*wn.y),zn.y=tt.body.posy+(wn.x*tt.body.axisx+wn.y*tt.body.axisy),gn=gn.next}}if(null==tt.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");On=tt.gverts.next;tt.aabb.minx=On.x,tt.aabb.miny=On.y,tt.aabb.maxx=On.x,tt.aabb.maxy=On.y;for(Cn=tt.gverts.next.next;null!=Cn;){var rt;(rt=Cn).x<tt.aabb.minx&&(tt.aabb.minx=rt.x),rt.x>tt.aabb.maxx&&(tt.aabb.maxx=rt.x),rt.y<tt.aabb.miny&&(tt.aabb.miny=rt.y),rt.y>tt.aabb.maxy&&(tt.aabb.maxy=rt.y),Cn=Cn.next}}var lt;En=e.aabb;if(rn.minx=En.minx-3,rn.miny=En.miny-3,rn.maxx=En.maxx+3,rn.maxy=En.maxy+3,null==(lt=(n.dyn=1!=e.body.type&&!e.body.component.sleeping)?this.dtree:this.stree).root)lt.root=n,lt.root.parent=null;else{for(Un=n.aabb,Mn=lt.root;null!=Mn.child1;){var st;Tn=Mn.child1,kn=Mn.child2,Dn=2*((st=Mn.aabb).maxx-st.minx+(st.maxy-st.miny)),Sn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,An=Mn.aabb;Sn.minx=An.minx<Un.minx?An.minx:Un.minx,Sn.miny=An.miny<Un.miny?An.miny:Un.miny,Sn.maxx=An.maxx>Un.maxx?An.maxx:Un.maxx,Sn.maxy=An.maxy>Un.maxy?An.maxy:Un.maxy;var at,ot,pt;Pn=2*(ot=2*((at=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-at.minx+(at.maxy-at.miny))),Vn=2*(ot-Dn),In=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Nn=Tn.aabb;if(In.minx=Un.minx<Nn.minx?Un.minx:Nn.minx,In.miny=Un.miny<Nn.miny?Un.miny:Nn.miny,In.maxx=Un.maxx>Nn.maxx?Un.maxx:Nn.maxx,In.maxy=Un.maxy>Nn.maxy?Un.maxy:Nn.maxy,null==Tn.child1){var ht;pt=2*((ht=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-ht.minx+(ht.maxy-ht.miny))+Vn}else{var ut,_t;Fn=2*((ut=Tn.aabb).maxx-ut.minx+(ut.maxy-ut.miny));pt=2*((_t=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-_t.minx+(_t.maxy-_t.miny))-Fn+Vn}var ct;Rn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Ln=kn.aabb;if(Rn.minx=Un.minx<Ln.minx?Un.minx:Ln.minx,Rn.miny=Un.miny<Ln.miny?Un.miny:Ln.miny,Rn.maxx=Un.maxx>Ln.maxx?Un.maxx:Ln.maxx,Rn.maxy=Un.maxy>Ln.maxy?Un.maxy:Ln.maxy,null==kn.child1){var dt;ct=2*((dt=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-dt.minx+(dt.maxy-dt.miny))+Vn}else{var ft,xt;Bn=2*((ft=kn.aabb).maxx-ft.minx+(ft.maxy-ft.miny));ct=2*((xt=zpp_$nape_space_ZPP_$AABBTree.tmpaabb).maxx-xt.minx+(xt.maxy-xt.miny))-Bn+Vn}if(Pn<pt&&Pn<ct)break;Mn=pt<ct?Tn:kn}var bt,yt;Gn=(bt=Mn).parent;null==zpp_$nape_space_ZPP_$AABBNode.zpp_pool?yt=new zpp_$nape_space_ZPP_$AABBNode:(yt=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=yt.next,yt.next=null),null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?yt.aabb=new zpp_$nape_geom_ZPP_$AABB:(yt.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=yt.aabb.next,yt.aabb.next=null),yt.moved=!1,yt.synced=!1,yt.first_sync=!1,yt.parent=Gn;jn=yt.aabb,Kn=bt.aabb;for(jn.minx=Un.minx<Kn.minx?Un.minx:Kn.minx,jn.miny=Un.miny<Kn.miny?Un.miny:Kn.miny,jn.maxx=Un.maxx>Kn.maxx?Un.maxx:Kn.maxx,jn.maxy=Un.maxy>Kn.maxy?Un.maxy:Kn.maxy,yt.height=bt.height+1,null!=Gn?(Gn.child1==bt?Gn.child1=yt:Gn.child2=yt,yt.child1=bt,yt.child2=n,bt.parent=yt,n.parent=yt):(yt.child1=bt,yt.child2=n,bt.parent=yt,n.parent=yt,lt.root=yt),Mn=n.parent;null!=Mn;){if(!(null==Mn.child1||Mn.height<2)){var vt,mt;Wn=Mn.child1;if((mt=(vt=Mn.child2).height-Wn.height)>1){Yn=vt.child1,Xn=vt.child2;if(vt.child1=Mn,vt.parent=Mn.parent,Mn.parent=vt,null!=vt.parent?vt.parent.child1==Mn?vt.parent.child1=vt:vt.parent.child2=vt:lt.root=vt,Yn.height>Xn.height){vt.child2=Yn,Mn.child2=Xn,Xn.parent=Mn;Hn=Mn.aabb,Zn=Wn.aabb,qn=Xn.aabb;Hn.minx=Zn.minx<qn.minx?Zn.minx:qn.minx,Hn.miny=Zn.miny<qn.miny?Zn.miny:qn.miny,Hn.maxx=Zn.maxx>qn.maxx?Zn.maxx:qn.maxx,Hn.maxy=Zn.maxy>qn.maxy?Zn.maxy:qn.maxy;$n=vt.aabb,Qn=Mn.aabb,Jn=Yn.aabb;$n.minx=Qn.minx<Jn.minx?Qn.minx:Jn.minx,$n.miny=Qn.miny<Jn.miny?Qn.miny:Jn.miny,$n.maxx=Qn.maxx>Jn.maxx?Qn.maxx:Jn.maxx,$n.maxy=Qn.maxy>Jn.maxy?Qn.maxy:Jn.maxy;ne=Wn.height,ee=Xn.height;Mn.height=1+(ne>ee?ne:ee);te=Mn.height,ie=Yn.height;vt.height=1+(te>ie?te:ie)}else{vt.child2=Xn,Mn.child2=Yn,Yn.parent=Mn;re=Mn.aabb,le=Wn.aabb,se=Yn.aabb;re.minx=le.minx<se.minx?le.minx:se.minx,re.miny=le.miny<se.miny?le.miny:se.miny,re.maxx=le.maxx>se.maxx?le.maxx:se.maxx,re.maxy=le.maxy>se.maxy?le.maxy:se.maxy;ae=vt.aabb,oe=Mn.aabb,pe=Xn.aabb;ae.minx=oe.minx<pe.minx?oe.minx:pe.minx,ae.miny=oe.miny<pe.miny?oe.miny:pe.miny,ae.maxx=oe.maxx>pe.maxx?oe.maxx:pe.maxx,ae.maxy=oe.maxy>pe.maxy?oe.maxy:pe.maxy;he=Wn.height,ue=Yn.height;Mn.height=1+(he>ue?he:ue);_e=Mn.height,ce=Xn.height;vt.height=1+(_e>ce?_e:ce)}Mn=vt}else if(mt<-1){de=Wn.child1,fe=Wn.child2;if(Wn.child1=Mn,Wn.parent=Mn.parent,Mn.parent=Wn,null!=Wn.parent?Wn.parent.child1==Mn?Wn.parent.child1=Wn:Wn.parent.child2=Wn:lt.root=Wn,de.height>fe.height){Wn.child2=de,Mn.child1=fe,fe.parent=Mn;xe=Mn.aabb,be=vt.aabb,ye=fe.aabb;xe.minx=be.minx<ye.minx?be.minx:ye.minx,xe.miny=be.miny<ye.miny?be.miny:ye.miny,xe.maxx=be.maxx>ye.maxx?be.maxx:ye.maxx,xe.maxy=be.maxy>ye.maxy?be.maxy:ye.maxy;ve=Wn.aabb,me=Mn.aabb,ge=de.aabb;ve.minx=me.minx<ge.minx?me.minx:ge.minx,ve.miny=me.miny<ge.miny?me.miny:ge.miny,ve.maxx=me.maxx>ge.maxx?me.maxx:ge.maxx,ve.maxy=me.maxy>ge.maxy?me.maxy:ge.maxy;ze=vt.height,we=fe.height;Mn.height=1+(ze>we?ze:we);Oe=Mn.height,Ce=de.height;Wn.height=1+(Oe>Ce?Oe:Ce)}else{Wn.child2=fe,Mn.child1=de,de.parent=Mn;Ee=Mn.aabb,Ue=vt.aabb,Me=de.aabb;Ee.minx=Ue.minx<Me.minx?Ue.minx:Me.minx,Ee.miny=Ue.miny<Me.miny?Ue.miny:Me.miny,Ee.maxx=Ue.maxx>Me.maxx?Ue.maxx:Me.maxx,Ee.maxy=Ue.maxy>Me.maxy?Ue.maxy:Me.maxy;Te=Wn.aabb,ke=Mn.aabb,De=fe.aabb;Te.minx=ke.minx<De.minx?ke.minx:De.minx,Te.miny=ke.miny<De.miny?ke.miny:De.miny,Te.maxx=ke.maxx>De.maxx?ke.maxx:De.maxx,Te.maxy=ke.maxy>De.maxy?ke.maxy:De.maxy;Se=vt.height,Ae=de.height;Mn.height=1+(Se>Ae?Se:Ae);Pe=Mn.height,Ve=fe.height;Wn.height=1+(Pe>Ve?Pe:Ve)}Mn=Wn}}Ie=Mn.child1,Ne=Mn.child2,Fe=Ie.height,Re=Ne.height;Mn.height=1+(Fe>Re?Fe:Re);Le=Mn.aabb,Be=Ie.aabb,Ge=Ne.aabb;Le.minx=Be.minx<Ge.minx?Be.minx:Ge.minx,Le.miny=Be.miny<Ge.miny?Be.miny:Ge.miny,Le.maxx=Be.maxx>Ge.maxx?Be.maxx:Ge.maxx,Le.maxy=Be.maxy>Ge.maxy?Be.maxy:Ge.maxy,Mn=Mn.parent}}n.synced=!1,n.moved||(n.moved=!0,n.mnext=this.moves,this.moves=n)}},broadphase:function(n,e){for(var t=this.syncs;null!=t;){var i=t.shape;if(t.first_sync)t.first_sync=!1;else{var r=t.dyn?this.dtree:this.stree;if(t==r.root)r.root=null;else{var l=t.parent,s=l.parent,a=l.child1==t?l.child2:l.child1;if(null!=s){s.child1==l?s.child1=a:s.child2=a,a.parent=s,(Kt=l).height=-1,null!=(qt=Kt.aabb).outer&&(qt.outer.zpp_inner=null,qt.outer=null),qt.wrap_min=qt.wrap_max=null,qt._invalidate=null,qt._validate=null,qt.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=qt,Kt.child1=Kt.child2=Kt.parent=null,Kt.next=null,Kt.snext=null,Kt.mnext=null,Kt.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=Kt;for(var o=s;null!=o;){if(!(null==o.child1||o.height<2)){var p=o.child1,h=o.child2,u=h.height-p.height;if(u>1){var _=h.child1,c=h.child2;if(h.child1=o,h.parent=o.parent,o.parent=h,null!=h.parent?h.parent.child1==o?h.parent.child1=h:h.parent.child2=h:r.root=h,_.height>c.height){h.child2=_,o.child2=c,c.parent=o;var d=o.aabb,f=p.aabb,x=c.aabb;d.minx=f.minx<x.minx?f.minx:x.minx,d.miny=f.miny<x.miny?f.miny:x.miny,d.maxx=f.maxx>x.maxx?f.maxx:x.maxx,d.maxy=f.maxy>x.maxy?f.maxy:x.maxy;var b=h.aabb,y=o.aabb,v=_.aabb;b.minx=y.minx<v.minx?y.minx:v.minx,b.miny=y.miny<v.miny?y.miny:v.miny,b.maxx=y.maxx>v.maxx?y.maxx:v.maxx,b.maxy=y.maxy>v.maxy?y.maxy:v.maxy;var m=p.height,g=c.height;o.height=1+(m>g?m:g);var z=o.height,w=_.height;h.height=1+(z>w?z:w)}else{h.child2=c,o.child2=_,_.parent=o;var O=o.aabb,C=p.aabb,E=_.aabb;O.minx=C.minx<E.minx?C.minx:E.minx,O.miny=C.miny<E.miny?C.miny:E.miny,O.maxx=C.maxx>E.maxx?C.maxx:E.maxx,O.maxy=C.maxy>E.maxy?C.maxy:E.maxy;var U=h.aabb,M=o.aabb,T=c.aabb;U.minx=M.minx<T.minx?M.minx:T.minx,U.miny=M.miny<T.miny?M.miny:T.miny,U.maxx=M.maxx>T.maxx?M.maxx:T.maxx,U.maxy=M.maxy>T.maxy?M.maxy:T.maxy;var k=p.height,D=_.height;o.height=1+(k>D?k:D);var S=o.height,A=c.height;h.height=1+(S>A?S:A)}o=h}else if(u<-1){var P=p.child1,V=p.child2;if(p.child1=o,p.parent=o.parent,o.parent=p,null!=p.parent?p.parent.child1==o?p.parent.child1=p:p.parent.child2=p:r.root=p,P.height>V.height){p.child2=P,o.child1=V,V.parent=o;var I=o.aabb,N=h.aabb,F=V.aabb;I.minx=N.minx<F.minx?N.minx:F.minx,I.miny=N.miny<F.miny?N.miny:F.miny,I.maxx=N.maxx>F.maxx?N.maxx:F.maxx,I.maxy=N.maxy>F.maxy?N.maxy:F.maxy;var R=p.aabb,L=o.aabb,B=P.aabb;R.minx=L.minx<B.minx?L.minx:B.minx,R.miny=L.miny<B.miny?L.miny:B.miny,R.maxx=L.maxx>B.maxx?L.maxx:B.maxx,R.maxy=L.maxy>B.maxy?L.maxy:B.maxy;var G=h.height,j=V.height;o.height=1+(G>j?G:j);var K=o.height,W=P.height;p.height=1+(K>W?K:W)}else{p.child2=V,o.child1=P,P.parent=o;var Y=o.aabb,X=h.aabb,H=P.aabb;Y.minx=X.minx<H.minx?X.minx:H.minx,Y.miny=X.miny<H.miny?X.miny:H.miny,Y.maxx=X.maxx>H.maxx?X.maxx:H.maxx,Y.maxy=X.maxy>H.maxy?X.maxy:H.maxy;var Z=p.aabb,q=o.aabb,$=V.aabb;Z.minx=q.minx<$.minx?q.minx:$.minx,Z.miny=q.miny<$.miny?q.miny:$.miny,Z.maxx=q.maxx>$.maxx?q.maxx:$.maxx,Z.maxy=q.maxy>$.maxy?q.maxy:$.maxy;var Q=h.height,J=P.height;o.height=1+(Q>J?Q:J);var nn=o.height,en=V.height;p.height=1+(nn>en?nn:en)}o=p}}var tn=o.child1,rn=o.child2,ln=o.aabb,sn=tn.aabb,an=rn.aabb;ln.minx=sn.minx<an.minx?sn.minx:an.minx,ln.miny=sn.miny<an.miny?sn.miny:an.miny,ln.maxx=sn.maxx>an.maxx?sn.maxx:an.maxx,ln.maxy=sn.maxy>an.maxy?sn.maxy:an.maxy;var on=tn.height,pn=rn.height;o.height=1+(on>pn?on:pn),o=o.parent}}else{r.root=a,a.parent=null,($t=l).height=-1;var hn=$t.aabb;null!=hn.outer&&(hn.outer.zpp_inner=null,hn.outer=null),hn.wrap_min=hn.wrap_max=null,hn._invalidate=null,hn._validate=null,hn.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=hn,$t.child1=$t.child2=$t.parent=null,$t.next=null,$t.snext=null,$t.mnext=null,$t.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=$t}}}var un=t.aabb;if(!n.continuous&&i.zip_aabb&&null!=i.body)if(i.zip_aabb=!1,0==i.type){var _n=i.circle;if(_n.zip_worldCOM&&null!=_n.body){if(_n.zip_worldCOM=!1,_n.zip_localCOM){if(_n.zip_localCOM=!1,1==_n.type){var cn=_n.polygon;if(null==cn.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==cn.lverts.next.next)cn.localCOMx=cn.lverts.next.x,cn.localCOMy=cn.lverts.next.y;else if(null==cn.lverts.next.next.next){cn.localCOMx=cn.lverts.next.x,cn.localCOMy=cn.lverts.next.y;cn.localCOMx+=1*cn.lverts.next.next.x,cn.localCOMy+=1*cn.lverts.next.next.y;cn.localCOMx*=.5,cn.localCOMy*=.5}else{cn.localCOMx=0,cn.localCOMy=0;var dn=0,xn=vt=cn.lverts.next,bn=vt=vt.next;for(vt=vt.next;null!=vt;){var yn=vt;dn+=bn.x*(yn.y-xn.y);var vn=yn.y*bn.x-yn.x*bn.y;cn.localCOMx+=(bn.x+yn.x)*vn,cn.localCOMy+=(bn.y+yn.y)*vn,xn=bn,bn=yn,vt=vt.next}var mn=vt=cn.lverts.next;dn+=bn.x*(mn.y-xn.y);var gn=mn.y*bn.x-mn.x*bn.y;cn.localCOMx+=(bn.x+mn.x)*gn,cn.localCOMy+=(bn.y+mn.y)*gn,xn=bn,bn=mn;var zn=vt=vt.next;dn+=bn.x*(zn.y-xn.y);var wn=zn.y*bn.x-zn.x*bn.y;cn.localCOMx+=(bn.x+zn.x)*wn,cn.localCOMy+=(bn.y+zn.y)*wn;var On=dn=1/(3*dn);cn.localCOMx*=On,cn.localCOMy*=On}}null!=_n.wrap_localCOM&&(_n.wrap_localCOM.zpp_inner.x=_n.localCOMx,_n.wrap_localCOM.zpp_inner.y=_n.localCOMy)}var Cn=_n.body;Cn.zip_axis&&(Cn.zip_axis=!1,Cn.axisx=Math.sin(Cn.rot),Cn.axisy=Math.cos(Cn.rot)),_n.worldCOMx=_n.body.posx+(_n.body.axisy*_n.localCOMx-_n.body.axisx*_n.localCOMy),_n.worldCOMy=_n.body.posy+(_n.localCOMx*_n.body.axisx+_n.localCOMy*_n.body.axisy)}var En=_n.radius,Un=_n.radius;_n.aabb.minx=_n.worldCOMx-En,_n.aabb.miny=_n.worldCOMy-Un,_n.aabb.maxx=_n.worldCOMx+En,_n.aabb.maxy=_n.worldCOMy+Un}else{var Mn=i.polygon;if(Mn.zip_gverts&&null!=Mn.body){Mn.zip_gverts=!1,Mn.validate_lverts();var Tn=Mn.body;Tn.zip_axis&&(Tn.zip_axis=!1,Tn.axisx=Math.sin(Tn.rot),Tn.axisy=Math.cos(Tn.rot));for(var kn=Mn.lverts.next,Dn=Mn.gverts.next;null!=Dn;){var Sn=Dn,An=kn;kn=kn.next,Sn.x=Mn.body.posx+(Mn.body.axisy*An.x-Mn.body.axisx*An.y),Sn.y=Mn.body.posy+(An.x*Mn.body.axisx+An.y*Mn.body.axisy),Dn=Dn.next}}if(null==Mn.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var Pn=Mn.gverts.next;Mn.aabb.minx=Pn.x,Mn.aabb.miny=Pn.y,Mn.aabb.maxx=Pn.x,Mn.aabb.maxy=Pn.y;for(var Vn=Mn.gverts.next.next;null!=Vn;){(yt=Vn).x<Mn.aabb.minx&&(Mn.aabb.minx=yt.x),yt.x>Mn.aabb.maxx&&(Mn.aabb.maxx=yt.x),yt.y<Mn.aabb.miny&&(Mn.aabb.miny=yt.y),yt.y>Mn.aabb.maxy&&(Mn.aabb.maxy=yt.y),Vn=Vn.next}}var In=i.aabb;un.minx=In.minx-3,un.miny=In.miny-3,un.maxx=In.maxx+3,un.maxy=In.maxy+3;var Nn=(t.dyn=1!=i.body.type&&!i.body.component.sleeping)?this.dtree:this.stree;if(null==Nn.root)Nn.root=t,Nn.root.parent=null;else{for(var Fn=t.aabb,Rn=Nn.root;null!=Rn.child1;){var Ln=Rn.child1,Bn=Rn.child2,Gn=Rn.aabb,jn=2*(Gn.maxx-Gn.minx+(Gn.maxy-Gn.miny)),Kn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Wn=Rn.aabb;Kn.minx=Wn.minx<Fn.minx?Wn.minx:Fn.minx,Kn.miny=Wn.miny<Fn.miny?Wn.miny:Fn.miny,Kn.maxx=Wn.maxx>Fn.maxx?Wn.maxx:Fn.maxx,Kn.maxy=Wn.maxy>Fn.maxy?Wn.maxy:Fn.maxy;var Yn,Xn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Hn=2*(Xn.maxx-Xn.minx+(Xn.maxy-Xn.miny)),Zn=2*Hn,qn=2*(Hn-jn),$n=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,Qn=Ln.aabb;if($n.minx=Fn.minx<Qn.minx?Fn.minx:Qn.minx,$n.miny=Fn.miny<Qn.miny?Fn.miny:Qn.miny,$n.maxx=Fn.maxx>Qn.maxx?Fn.maxx:Qn.maxx,$n.maxy=Fn.maxy>Qn.maxy?Fn.maxy:Qn.maxy,null==Ln.child1){var Jn=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;Yn=2*(Jn.maxx-Jn.minx+(Jn.maxy-Jn.miny))+qn}else{var ne=Ln.aabb,ee=2*(ne.maxx-ne.minx+(ne.maxy-ne.miny)),te=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;Yn=2*(te.maxx-te.minx+(te.maxy-te.miny))-ee+qn}var ie,re=zpp_$nape_space_ZPP_$AABBTree.tmpaabb,le=Bn.aabb;if(re.minx=Fn.minx<le.minx?Fn.minx:le.minx,re.miny=Fn.miny<le.miny?Fn.miny:le.miny,re.maxx=Fn.maxx>le.maxx?Fn.maxx:le.maxx,re.maxy=Fn.maxy>le.maxy?Fn.maxy:le.maxy,null==Bn.child1){var se=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;ie=2*(se.maxx-se.minx+(se.maxy-se.miny))+qn}else{var ae=Bn.aabb,oe=2*(ae.maxx-ae.minx+(ae.maxy-ae.miny)),pe=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;ie=2*(pe.maxx-pe.minx+(pe.maxy-pe.miny))-oe+qn}if(Zn<Yn&&Zn<ie)break;Rn=Yn<ie?Ln:Bn}var he,ue=Rn,_e=ue.parent;null==zpp_$nape_space_ZPP_$AABBNode.zpp_pool?he=new zpp_$nape_space_ZPP_$AABBNode:(he=zpp_$nape_space_ZPP_$AABBNode.zpp_pool,zpp_$nape_space_ZPP_$AABBNode.zpp_pool=he.next,he.next=null),null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?he.aabb=new zpp_$nape_geom_ZPP_$AABB:(he.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=he.aabb.next,he.aabb.next=null),he.moved=!1,he.synced=!1,he.first_sync=!1,he.parent=_e;var ce=he.aabb,de=ue.aabb;for(ce.minx=Fn.minx<de.minx?Fn.minx:de.minx,ce.miny=Fn.miny<de.miny?Fn.miny:de.miny,ce.maxx=Fn.maxx>de.maxx?Fn.maxx:de.maxx,ce.maxy=Fn.maxy>de.maxy?Fn.maxy:de.maxy,he.height=ue.height+1,null!=_e?(_e.child1==ue?_e.child1=he:_e.child2=he,he.child1=ue,he.child2=t,ue.parent=he,t.parent=he):(he.child1=ue,he.child2=t,ue.parent=he,t.parent=he,Nn.root=he),Rn=t.parent;null!=Rn;){if(!(null==Rn.child1||Rn.height<2)){var fe=Rn.child1,xe=Rn.child2,be=xe.height-fe.height;if(be>1){var ye=xe.child1,ve=xe.child2;if(xe.child1=Rn,xe.parent=Rn.parent,Rn.parent=xe,null!=xe.parent?xe.parent.child1==Rn?xe.parent.child1=xe:xe.parent.child2=xe:Nn.root=xe,ye.height>ve.height){xe.child2=ye,Rn.child2=ve,ve.parent=Rn;var me=Rn.aabb,ge=fe.aabb,ze=ve.aabb;me.minx=ge.minx<ze.minx?ge.minx:ze.minx,me.miny=ge.miny<ze.miny?ge.miny:ze.miny,me.maxx=ge.maxx>ze.maxx?ge.maxx:ze.maxx,me.maxy=ge.maxy>ze.maxy?ge.maxy:ze.maxy;var we=xe.aabb,Oe=Rn.aabb,Ce=ye.aabb;we.minx=Oe.minx<Ce.minx?Oe.minx:Ce.minx,we.miny=Oe.miny<Ce.miny?Oe.miny:Ce.miny,we.maxx=Oe.maxx>Ce.maxx?Oe.maxx:Ce.maxx,we.maxy=Oe.maxy>Ce.maxy?Oe.maxy:Ce.maxy;var Ee=fe.height,Ue=ve.height;Rn.height=1+(Ee>Ue?Ee:Ue);var Me=Rn.height,Te=ye.height;xe.height=1+(Me>Te?Me:Te)}else{xe.child2=ve,Rn.child2=ye,ye.parent=Rn;var ke=Rn.aabb,De=fe.aabb,Se=ye.aabb;ke.minx=De.minx<Se.minx?De.minx:Se.minx,ke.miny=De.miny<Se.miny?De.miny:Se.miny,ke.maxx=De.maxx>Se.maxx?De.maxx:Se.maxx,ke.maxy=De.maxy>Se.maxy?De.maxy:Se.maxy;var Ae=xe.aabb,Pe=Rn.aabb,Ve=ve.aabb;Ae.minx=Pe.minx<Ve.minx?Pe.minx:Ve.minx,Ae.miny=Pe.miny<Ve.miny?Pe.miny:Ve.miny,Ae.maxx=Pe.maxx>Ve.maxx?Pe.maxx:Ve.maxx,Ae.maxy=Pe.maxy>Ve.maxy?Pe.maxy:Ve.maxy;var Ie=fe.height,Ne=ye.height;Rn.height=1+(Ie>Ne?Ie:Ne);var Fe=Rn.height,Re=ve.height;xe.height=1+(Fe>Re?Fe:Re)}Rn=xe}else if(be<-1){var Le=fe.child1,Be=fe.child2;if(fe.child1=Rn,fe.parent=Rn.parent,Rn.parent=fe,null!=fe.parent?fe.parent.child1==Rn?fe.parent.child1=fe:fe.parent.child2=fe:Nn.root=fe,Le.height>Be.height){fe.child2=Le,Rn.child1=Be,Be.parent=Rn;var Ge=Rn.aabb,je=xe.aabb,Ke=Be.aabb;Ge.minx=je.minx<Ke.minx?je.minx:Ke.minx,Ge.miny=je.miny<Ke.miny?je.miny:Ke.miny,Ge.maxx=je.maxx>Ke.maxx?je.maxx:Ke.maxx,Ge.maxy=je.maxy>Ke.maxy?je.maxy:Ke.maxy;var We=fe.aabb,Ye=Rn.aabb,Xe=Le.aabb;We.minx=Ye.minx<Xe.minx?Ye.minx:Xe.minx,We.miny=Ye.miny<Xe.miny?Ye.miny:Xe.miny,We.maxx=Ye.maxx>Xe.maxx?Ye.maxx:Xe.maxx,We.maxy=Ye.maxy>Xe.maxy?Ye.maxy:Xe.maxy;var He=xe.height,Ze=Be.height;Rn.height=1+(He>Ze?He:Ze);var qe=Rn.height,$e=Le.height;fe.height=1+(qe>$e?qe:$e)}else{fe.child2=Be,Rn.child1=Le,Le.parent=Rn;var Qe=Rn.aabb,Je=xe.aabb,nt=Le.aabb;Qe.minx=Je.minx<nt.minx?Je.minx:nt.minx,Qe.miny=Je.miny<nt.miny?Je.miny:nt.miny,Qe.maxx=Je.maxx>nt.maxx?Je.maxx:nt.maxx,Qe.maxy=Je.maxy>nt.maxy?Je.maxy:nt.maxy;var et=fe.aabb,tt=Rn.aabb,it=Be.aabb;et.minx=tt.minx<it.minx?tt.minx:it.minx,et.miny=tt.miny<it.miny?tt.miny:it.miny,et.maxx=tt.maxx>it.maxx?tt.maxx:it.maxx,et.maxy=tt.maxy>it.maxy?tt.maxy:it.maxy;var rt=xe.height,lt=Le.height;Rn.height=1+(rt>lt?rt:lt);var st=Rn.height,at=Be.height;fe.height=1+(st>at?st:at)}Rn=fe}}var ot=Rn.child1,pt=Rn.child2,ht=ot.height,ut=pt.height;Rn.height=1+(ht>ut?ht:ut);var _t=Rn.aabb,ct=ot.aabb,dt=pt.aabb;_t.minx=ct.minx<dt.minx?ct.minx:dt.minx,_t.miny=ct.miny<dt.miny?ct.miny:dt.miny,_t.maxx=ct.maxx>dt.maxx?ct.maxx:dt.maxx,_t.maxy=ct.maxy>dt.maxy?ct.maxy:dt.maxy,Rn=Rn.parent}}t.synced=!1,t=t.snext}for(;null!=this.syncs;){var ft=this.syncs;if(this.syncs=ft.snext,ft.snext=null,!(gt=ft).moved)if(gt.moved=!1,!(zt=gt.shape).body.component.sleeping){var xt=gt.aabb,bt=null;for(null!=this.dtree.root&&(this.dtree.root.next=bt,bt=this.dtree.root);null!=bt;){if(bt=(jt=bt).next,jt.next=null,(t=jt)!=gt)if(null==t.child1){if((i=t.shape).body!=zt.body&&(1!=i.body.type||1!=zt.body.type))if((m=t.aabb).miny<=xt.maxy&&xt.miny<=m.maxy&&m.minx<=xt.maxx&&xt.minx<=m.maxx){zt.id<i.id?(wt=zt.id,Ot=i.id):(wt=i.id,Ot=zt.id);for(var yt=null,vt=(zt.pairs.length<i.pairs.length?zt:i).pairs.head;null!=vt;){if((Ct=vt.elt).id==wt&&Ct.di==Ot){yt=Ct;break}vt=vt.next}if(null!=yt){yt.sleeping&&(yt.sleeping=!1,yt.next=this.pairs,this.pairs=yt,yt.first=!0);continue}null==zpp_$nape_space_ZPP_$AABBPair.zpp_pool?yt=new zpp_$nape_space_ZPP_$AABBPair:(yt=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=yt.next,yt.next=null),yt.n1=gt,yt.n2=t,yt.id=wt,yt.di=Ot,yt.next=this.pairs,this.pairs=yt,yt.first=!0;d=zt.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?Xt=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(Xt=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Xt.next,Xt.next=null),Xt.elt=yt,(Et=Xt).next=d.head,d.head=Et,d.modified=!0,d.length++;b=i.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?Zt=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(Zt=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Zt.next,Zt.next=null),Zt.elt=yt,(Ut=Zt).next=b.head,b.head=Ut,b.modified=!0,b.length++}}else(z=t.aabb).miny<=xt.maxy&&xt.miny<=z.maxy&&z.minx<=xt.maxx&&xt.minx<=z.maxx&&(null!=t.child1&&(t.child1.next=bt,bt=t.child1),null!=t.child2&&(t.child2.next=bt,bt=t.child2))}for(null!=this.stree.root&&(this.stree.root.next=bt,bt=this.stree.root);null!=bt;){if(bt=(Mt=bt).next,Mt.next=null,(o=Mt)!=gt)if(null==o.child1){if((Tt=o.shape).body!=zt.body&&(1!=Tt.body.type||1!=zt.body.type))if((k=o.aabb).miny<=xt.maxy&&xt.miny<=k.maxy&&k.minx<=xt.maxx&&xt.minx<=k.maxx){zt.id<Tt.id?(kt=zt.id,Dt=Tt.id):(kt=Tt.id,Dt=zt.id);var mt=null;for(Dn=(Jt=zt.pairs.length<Tt.pairs.length?zt:Tt).pairs.head;null!=Dn;){if((St=Dn.elt).id==kt&&St.di==Dt){mt=St;break}Dn=Dn.next}if(null!=mt){mt.sleeping&&(mt.sleeping=!1,mt.next=this.pairs,this.pairs=mt,mt.first=!0);continue}null==zpp_$nape_space_ZPP_$AABBPair.zpp_pool?mt=new zpp_$nape_space_ZPP_$AABBPair:(mt=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=mt.next,mt.next=null),mt.n1=gt,mt.n2=o,mt.id=kt,mt.di=Dt,mt.next=this.pairs,this.pairs=mt,mt.first=!0;O=zt.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?At=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(At=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=At.next,At.next=null),At.elt=mt,(Pt=At).next=O.head,O.head=Pt,O.modified=!0,O.length++;U=Tt.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?Vt=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(Vt=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Vt.next,Vt.next=null),Vt.elt=mt,(It=Vt).next=U.head,U.head=It,U.modified=!0,U.length++}}else(S=o.aabb).miny<=xt.maxy&&xt.miny<=S.maxy&&S.minx<=xt.maxx&&xt.minx<=S.maxx&&(null!=o.child1&&(o.child1.next=bt,bt=o.child1),null!=o.child2&&(o.child2.next=bt,bt=o.child2))}}}for(;null!=this.moves;){var gt,zt;ft=this.moves;if(this.moves=ft.mnext,ft.mnext=null,(gt=ft).moved=!1,!(zt=gt.shape).body.component.sleeping){xt=gt.aabb,bt=null;for(null!=this.dtree.root&&(this.dtree.root.next=bt,bt=this.dtree.root);null!=bt;){if(bt=(jt=bt).next,jt.next=null,(t=jt)!=gt)if(null==t.child1){if((i=t.shape).body!=zt.body&&(1!=i.body.type||1!=zt.body.type))if((m=t.aabb).miny<=xt.maxy&&xt.miny<=m.maxy&&m.minx<=xt.maxx&&xt.minx<=m.maxx){var wt,Ot;zt.id<i.id?(wt=zt.id,Ot=i.id):(wt=i.id,Ot=zt.id);for(yt=null,vt=(zt.pairs.length<i.pairs.length?zt:i).pairs.head;null!=vt;){var Ct;if((Ct=vt.elt).id==wt&&Ct.di==Ot){yt=Ct;break}vt=vt.next}if(null!=yt){yt.sleeping&&(yt.sleeping=!1,yt.next=this.pairs,this.pairs=yt,yt.first=!0);continue}null==zpp_$nape_space_ZPP_$AABBPair.zpp_pool?yt=new zpp_$nape_space_ZPP_$AABBPair:(yt=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=yt.next,yt.next=null),yt.n1=gt,yt.n2=t,yt.id=wt,yt.di=Ot,yt.next=this.pairs,this.pairs=yt,yt.first=!0;var Et;d=zt.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?Xt=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(Xt=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Xt.next,Xt.next=null),Xt.elt=yt,(Et=Xt).next=d.head,d.head=Et,d.modified=!0,d.length++;var Ut;b=i.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?Zt=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(Zt=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Zt.next,Zt.next=null),Zt.elt=yt,(Ut=Zt).next=b.head,b.head=Ut,b.modified=!0,b.length++}}else(z=t.aabb).miny<=xt.maxy&&xt.miny<=z.maxy&&z.minx<=xt.maxx&&xt.minx<=z.maxx&&(null!=t.child1&&(t.child1.next=bt,bt=t.child1),null!=t.child2&&(t.child2.next=bt,bt=t.child2))}for(null!=this.stree.root&&(this.stree.root.next=bt,bt=this.stree.root);null!=bt;){var Mt,Tt;if(bt=(Mt=bt).next,Mt.next=null,(o=Mt)!=gt)if(null==o.child1){if((Tt=o.shape).body!=zt.body&&(1!=Tt.body.type||1!=zt.body.type))if((k=o.aabb).miny<=xt.maxy&&xt.miny<=k.maxy&&k.minx<=xt.maxx&&xt.minx<=k.maxx){var kt,Dt;zt.id<Tt.id?(kt=zt.id,Dt=Tt.id):(kt=Tt.id,Dt=zt.id);for(mt=null,Dn=(Jt=zt.pairs.length<Tt.pairs.length?zt:Tt).pairs.head;null!=Dn;){var St;if((St=Dn.elt).id==kt&&St.di==Dt){mt=St;break}Dn=Dn.next}if(null!=mt){mt.sleeping&&(mt.sleeping=!1,mt.next=this.pairs,this.pairs=mt,mt.first=!0);continue}null==zpp_$nape_space_ZPP_$AABBPair.zpp_pool?mt=new zpp_$nape_space_ZPP_$AABBPair:(mt=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=mt.next,mt.next=null),mt.n1=gt,mt.n2=o,mt.id=kt,mt.di=Dt,mt.next=this.pairs,this.pairs=mt,mt.first=!0;var At,Pt;O=zt.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?At=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(At=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=At.next,At.next=null),At.elt=mt,(Pt=At).next=O.head,O.head=Pt,O.modified=!0,O.length++;var Vt,It;U=Tt.pairs;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?Vt=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(Vt=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Vt.next,Vt.next=null),Vt.elt=mt,(It=Vt).next=U.head,U.head=It,U.modified=!0,U.length++}}else(S=o.aabb).miny<=xt.maxy&&xt.miny<=S.maxy&&S.minx<=xt.maxx&&xt.minx<=S.maxx&&(null!=o.child1&&(o.child1.next=bt,bt=o.child1),null!=o.child2&&(o.child2.next=bt,bt=o.child2))}}}for(var Nt=null,Ft=this.pairs;null!=Ft;){var Rt;if(Ft.first)Rt=!1;else{d=Ft.n1.aabb;Rt=!((m=Ft.n2.aabb).miny<=d.maxy&&d.miny<=m.maxy&&m.minx<=d.maxx&&d.minx<=m.maxx)}if(Rt){null==Nt?this.pairs=Ft.next:Nt.next=Ft.next;var Lt=null,Bt=(b=Ft.n1.shape.pairs).head;for(ft=!1;null!=Bt;){if(Bt.elt==Ft){var Gt,jt,Kt;null==Lt?(jt=(Gt=b.head).next,b.head=jt,null==b.head&&(b.pushmod=!0)):(jt=(Gt=Lt.next).next,Lt.next=jt,null==jt&&(b.pushmod=!0)),(Kt=Gt).elt=null,Kt.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=Kt,b.modified=!0,b.length--,b.pushmod=!0,ft=!0;break}Lt=Bt,Bt=Bt.next}for(var Wt=null,Yt=(O=Ft.n2.shape.pairs).head,Xt=!1;null!=Yt;){if(Yt.elt==Ft){var Ht,Zt,qt;null==Wt?(Zt=(Ht=O.head).next,O.head=Zt,null==O.head&&(O.pushmod=!0)):(Zt=(Ht=Wt.next).next,Wt.next=Zt,null==Zt&&(O.pushmod=!0)),(qt=Ht).elt=null,qt.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=qt,O.modified=!0,O.length--,O.pushmod=!0,Xt=!0;break}Wt=Yt,Yt=Yt.next}var $t,Qt=Ft.next;null!=Ft.arb&&(Ft.arb.pair=null),Ft.arb=null,($t=Ft).n1=$t.n2=null,$t.sleeping=!1,$t.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=$t,Ft=Qt}else{x=(Jt=Ft.n1.shape).body;var Jt,ni=Ft.n2.shape;v=ni.body;if(Ft.first||!x.component.sleeping&&1!=x.type||!v.component.sleeping&&1!=v.type){Ft.first=!1;U=Jt.aabb;if((z=ni.aabb).miny<=U.maxy&&U.miny<=z.maxy&&z.minx<=U.maxx&&U.minx<=z.maxx){var ei=Ft.arb;Ft.arb=e?n.narrowPhase(Jt,ni,2!=x.type||2!=v.type,Ft.arb,!1):n.continuousEvent(Jt,ni,2!=x.type||2!=v.type,Ft.arb,!1),null==Ft.arb?null!=ei&&(ei.pair=null):Ft.arb.pair=Ft}Nt=Ft,Ft=Ft.next}else Ft.sleeping=!0,null==Nt?this.pairs=Ft.next:Nt.next=Ft.next,Ft=Ft.next}}},clear:function(){for(;null!=this.syncs;){var n=this.syncs.snext;this.syncs.snext=null,this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null),this.syncs=n}for(;null!=this.moves;){n=this.moves.mnext;this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=n}for(;null!=this.pairs;){var e=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null),this.pairs.arb=null;for(var t=this.pairs.n1.shape.pairs,i=this.pairs,r=null,l=t.head;null!=l;){if(l.elt==i){var s,a;null==r?(a=(s=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(s=r.next).next,r.next=a,null==a&&(t.pushmod=!0));var o=s;o.elt=null,o.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=o,t.modified=!0,t.length--,t.pushmod=!0,!0;break}r=l,l=l.next}for(var p=this.pairs.n2.shape.pairs,h=this.pairs,u=null,_=p.head;null!=_;){if(_.elt==h){var c,d;null==u?(d=(c=p.head).next,p.head=d,null==p.head&&(p.pushmod=!0)):(d=(c=u.next).next,u.next=d,null==d&&(p.pushmod=!0));var f=c;f.elt=null,f.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=f,p.modified=!0,p.length--,p.pushmod=!0,!0;break}u=_,_=_.next}var x=this.pairs;x.n1=x.n2=null,x.sleeping=!1,x.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool,zpp_$nape_space_ZPP_$AABBPair.zpp_pool=x,this.pairs=e}this.dtree.clear(),this.stree.clear()},shapesUnderPoint:function(n,e,t,i){this.sync_broadphase(),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=n,l.y=e;var r=l,l=null==i?new nape_shape_ShapeList:i;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=(a=this.treeStack.pop_unsafe()).aabb;if(r.x>=s.minx&&r.x<=s.maxx&&r.y>=s.miny&&r.y<=s.maxy)if(null==a.child1){if(null!=t)o=0!=((p=a.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&p.collisionGroup);else o=!0;o&&(0==a.shape.type?zpp_$nape_geom_ZPP_$Collide.circleContains(a.shape.circle,r)&&l.push(a.shape.outer):zpp_$nape_geom_ZPP_$Collide.polyContains(a.shape.polygon,r)&&l.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var a;s=(a=this.treeStack.pop_unsafe()).aabb;if(r.x>=s.minx&&r.x<=s.maxx&&r.y>=s.miny&&r.y<=s.maxy)if(null==a.child1){var o,p;if(null!=t)o=0!=((p=a.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&p.collisionGroup);else o=!0;o&&(0==a.shape.type?zpp_$nape_geom_ZPP_$Collide.circleContains(a.shape.circle,r)&&l.push(a.shape.outer):zpp_$nape_geom_ZPP_$Collide.polyContains(a.shape.polygon,r)&&l.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}var h=r;return null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h,l},bodiesUnderPoint:function(n,e,t,i){this.sync_broadphase(),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=n,l.y=e;var r=l,l=null==i?new nape_phys_BodyList:i;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=(o=this.treeStack.pop_unsafe()).aabb;if(r.x>=s.minx&&r.x<=s.maxx&&r.y>=s.miny&&r.y<=s.maxy)if(null==o.child1){var a=o.shape.body.outer;if(!l.has(a)){if(null!=t)p=0!=((h=o.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;p&&(0==o.shape.type?zpp_$nape_geom_ZPP_$Collide.circleContains(o.shape.circle,r)&&l.push(a):zpp_$nape_geom_ZPP_$Collide.polyContains(o.shape.polygon,r)&&l.push(a))}}else null!=o.child1&&this.treeStack.add(o.child1),null!=o.child2&&this.treeStack.add(o.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var o;s=(o=this.treeStack.pop_unsafe()).aabb;if(r.x>=s.minx&&r.x<=s.maxx&&r.y>=s.miny&&r.y<=s.maxy)if(null==o.child1){a=o.shape.body.outer;if(!l.has(a)){var p,h;if(null!=t)p=0!=((h=o.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;p&&(0==o.shape.type?zpp_$nape_geom_ZPP_$Collide.circleContains(o.shape.circle,r)&&l.push(a):zpp_$nape_geom_ZPP_$Collide.polyContains(o.shape.polygon,r)&&l.push(a))}}else null!=o.child1&&this.treeStack.add(o.child1),null!=o.child2&&this.treeStack.add(o.child2)}var u=r;return null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,l},shapesInAABB:function(n,e,t,i,r){this.sync_broadphase(),this.updateAABBShape(n);var l=this.aabbShape.zpp_inner.aabb,s=null==r?new nape_shape_ShapeList:r;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){if((p=(o=this.treeStack.pop_unsafe()).aabb).minx>=l.minx&&p.miny>=l.miny&&p.maxx<=l.maxx&&p.maxy<=l.maxy)if(null==o.child1){if(null!=i)h=0!=((u=o.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup);else h=!0;h&&s.push(o.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack2.add(o);null!=this.treeStack2.head;){if(null==(_=this.treeStack2.pop_unsafe()).child1){if(null!=i)c=0!=((d=_.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&d.collisionGroup);else c=!0;c&&s.push(_.shape.outer)}else null!=_.child1&&this.treeStack2.add(_.child1),null!=_.child2&&this.treeStack2.add(_.child2)}else{var a=o.aabb;if(l.miny<=a.maxy&&a.miny<=l.maxy&&l.minx<=a.maxx&&a.minx<=l.maxx)if(null==o.child1){if(null!=i)f=0!=((x=o.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup);else f=!0;if(f)if(e){if(t)zpp_$nape_geom_ZPP_$Collide.containTest(this.aabbShape.zpp_inner,o.shape)&&s.push(o.shape.outer);else((b=o.shape.aabb).minx>=l.minx&&b.miny>=l.miny&&b.maxx<=l.maxx&&b.maxy<=l.maxy||zpp_$nape_geom_ZPP_$Collide.testCollide_safe(o.shape,this.aabbShape.zpp_inner))&&s.push(o.shape.outer)}else{if(t)y=(v=o.shape.aabb).minx>=l.minx&&v.miny>=l.miny&&v.maxx<=l.maxx&&v.maxy<=l.maxy;else y=!0;y&&s.push(o.shape.outer)}}else null!=o.child1&&this.treeStack.add(o.child1),null!=o.child2&&this.treeStack.add(o.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var o,p;if((p=(o=this.treeStack.pop_unsafe()).aabb).minx>=l.minx&&p.miny>=l.miny&&p.maxx<=l.maxx&&p.maxy<=l.maxy)if(null==o.child1){var h,u;if(null!=i)h=0!=((u=o.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup);else h=!0;h&&s.push(o.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack2.add(o);null!=this.treeStack2.head;){var _;if(null==(_=this.treeStack2.pop_unsafe()).child1){var c,d;if(null!=i)c=0!=((d=_.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&d.collisionGroup);else c=!0;c&&s.push(_.shape.outer)}else null!=_.child1&&this.treeStack2.add(_.child1),null!=_.child2&&this.treeStack2.add(_.child2)}else{a=o.aabb;if(l.miny<=a.maxy&&a.miny<=l.maxy&&l.minx<=a.maxx&&a.minx<=l.maxx)if(null==o.child1){var f,x;if(null!=i)f=0!=((x=o.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup);else f=!0;if(f)if(e){var b;if(t)zpp_$nape_geom_ZPP_$Collide.containTest(this.aabbShape.zpp_inner,o.shape)&&s.push(o.shape.outer);else((b=o.shape.aabb).minx>=l.minx&&b.miny>=l.miny&&b.maxx<=l.maxx&&b.maxy<=l.maxy||zpp_$nape_geom_ZPP_$Collide.testCollide_safe(o.shape,this.aabbShape.zpp_inner))&&s.push(o.shape.outer)}else{var y,v;if(t)y=(v=o.shape.aabb).minx>=l.minx&&v.miny>=l.miny&&v.maxx<=l.maxx&&v.maxy<=l.maxy;else y=!0;y&&s.push(o.shape.outer)}}else null!=o.child1&&this.treeStack.add(o.child1),null!=o.child2&&this.treeStack.add(o.child2)}}return s},bodiesInAABB:function(n,e,t,i,r){this.sync_broadphase(),this.updateAABBShape(n);var l=this.aabbShape.zpp_inner.aabb,s=null==r?new nape_phys_BodyList:r;if(null==this.failed&&(this.failed=new nape_phys_BodyList),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){if((d=(c=this.treeStack.pop_unsafe()).aabb).minx>=l.minx&&d.miny>=l.miny&&d.maxx<=l.maxx&&d.maxy<=l.maxy)if(null==c.child1){if(null!=i)f=0!=((x=c.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup);else f=!0;if(f){var a=c.shape.body.outer;s.has(a)||s.push(a)}}else for(null==this.treeStack2&&(this.treeStack2=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack2.add(c);null!=this.treeStack2.head;){if(null==(b=this.treeStack2.pop_unsafe()).child1){if(null!=i)y=0!=((v=b.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&v.collisionGroup);else y=!0;if(y){var o=b.shape.body.outer;s.has(o)||s.push(o)}}else null!=b.child1&&this.treeStack2.add(b.child1),null!=b.child2&&this.treeStack2.add(b.child2)}else{var p=c.aabb;if(l.miny<=p.maxy&&p.miny<=l.maxy&&l.minx<=p.maxx&&p.minx<=l.maxx)if(null==c.child1){var h=c.shape.body.outer;if(null!=i)m=0!=((g=c.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&g.collisionGroup);else m=!0;if(m)if(e)if(t){if(!this.failed.has(h)){var u=zpp_$nape_geom_ZPP_$Collide.containTest(this.aabbShape.zpp_inner,c.shape);!s.has(h)&&u?s.push(h):u||(s.remove(h),this.failed.push(h))}}else!s.has(h)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(c.shape,this.aabbShape.zpp_inner)&&s.push(h);else if(t){if(!this.failed.has(h)){var _=(z=c.shape.aabb).minx>=l.minx&&z.miny>=l.miny&&z.maxx<=l.maxx&&z.maxy<=l.maxy;!s.has(h)&&_?s.push(h):_||(s.remove(h),this.failed.push(h))}}else{if(s.has(h))w=!1;else w=(O=c.shape.aabb).minx>=l.minx&&O.miny>=l.miny&&O.maxx<=l.maxx&&O.maxy<=l.maxy;w&&s.push(h)}}else null!=c.child1&&this.treeStack.add(c.child1),null!=c.child2&&this.treeStack.add(c.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var c,d;if((d=(c=this.treeStack.pop_unsafe()).aabb).minx>=l.minx&&d.miny>=l.miny&&d.maxx<=l.maxx&&d.maxy<=l.maxy)if(null==c.child1){var f,x;if(null!=i)f=0!=((x=c.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup);else f=!0;if(f){a=c.shape.body.outer;s.has(a)||s.push(a)}}else for(null==this.treeStack2&&(this.treeStack2=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack2.add(c);null!=this.treeStack2.head;){var b;if(null==(b=this.treeStack2.pop_unsafe()).child1){var y,v;if(null!=i)y=0!=((v=b.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&v.collisionGroup);else y=!0;if(y){o=b.shape.body.outer;s.has(o)||s.push(o)}}else null!=b.child1&&this.treeStack2.add(b.child1),null!=b.child2&&this.treeStack2.add(b.child2)}else{p=c.aabb;if(l.miny<=p.maxy&&p.miny<=l.maxy&&l.minx<=p.maxx&&p.minx<=l.maxx)if(null==c.child1){var m,g;h=c.shape.body.outer;if(null!=i)m=0!=((g=c.shape.filter).collisionMask&i.collisionGroup)&&0!=(i.collisionMask&g.collisionGroup);else m=!0;if(m)if(e)if(t){if(!this.failed.has(h)){u=zpp_$nape_geom_ZPP_$Collide.containTest(this.aabbShape.zpp_inner,c.shape);!s.has(h)&&u?s.push(h):u||(s.remove(h),this.failed.push(h))}}else!s.has(h)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(c.shape,this.aabbShape.zpp_inner)&&s.push(h);else if(t){if(!this.failed.has(h)){var z;_=(z=c.shape.aabb).minx>=l.minx&&z.miny>=l.miny&&z.maxx<=l.maxx&&z.maxy<=l.maxy;!s.has(h)&&_?s.push(h):_||(s.remove(h),this.failed.push(h))}}else{var w,O;if(s.has(h))w=!1;else w=(O=c.shape.aabb).minx>=l.minx&&O.miny>=l.miny&&O.maxx<=l.maxx&&O.maxy<=l.maxy;w&&s.push(h)}}else null!=c.child1&&this.treeStack.add(c.child1),null!=c.child2&&this.treeStack.add(c.child2)}}return this.failed.clear(),s},shapesInCircle:function(n,e,t,i,r,l){this.sync_broadphase(),this.updateCircShape(n,e,t);var s=this.circShape.zpp_inner.aabb,a=null==l?new nape_shape_ShapeList:l;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var o=(p=this.treeStack.pop_unsafe()).aabb;if(s.miny<=o.maxy&&o.miny<=s.maxy&&s.minx<=o.maxx&&o.minx<=s.maxx)if(null==p.child1){if(null!=r)h=0!=((u=p.shape.filter).collisionMask&r.collisionGroup)&&0!=(r.collisionMask&u.collisionGroup);else h=!0;h&&(i?zpp_$nape_geom_ZPP_$Collide.containTest(this.circShape.zpp_inner,p.shape)&&a.push(p.shape.outer):zpp_$nape_geom_ZPP_$Collide.testCollide_safe(p.shape,this.circShape.zpp_inner)&&a.push(p.shape.outer))}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var p;o=(p=this.treeStack.pop_unsafe()).aabb;if(s.miny<=o.maxy&&o.miny<=s.maxy&&s.minx<=o.maxx&&o.minx<=s.maxx)if(null==p.child1){var h,u;if(null!=r)h=0!=((u=p.shape.filter).collisionMask&r.collisionGroup)&&0!=(r.collisionMask&u.collisionGroup);else h=!0;h&&(i?zpp_$nape_geom_ZPP_$Collide.containTest(this.circShape.zpp_inner,p.shape)&&a.push(p.shape.outer):zpp_$nape_geom_ZPP_$Collide.testCollide_safe(p.shape,this.circShape.zpp_inner)&&a.push(p.shape.outer))}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}return a},bodiesInCircle:function(n,e,t,i,r,l){this.sync_broadphase(),this.updateCircShape(n,e,t);var s=this.circShape.zpp_inner.aabb,a=null==l?new nape_phys_BodyList:l;if(null==this.failed&&(this.failed=new nape_phys_BodyList),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var o=(u=this.treeStack.pop_unsafe()).aabb;if(s.miny<=o.maxy&&o.miny<=s.maxy&&s.minx<=o.maxx&&o.minx<=s.maxx)if(null==u.child1){var p=u.shape.body.outer;if(null!=r)_=0!=((c=u.shape.filter).collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup);else _=!0;if(_)if(i){if(!this.failed.has(p)){var h=zpp_$nape_geom_ZPP_$Collide.containTest(this.circShape.zpp_inner,u.shape);!a.has(p)&&h?a.push(p):h||(a.remove(p),this.failed.push(p))}}else!a.has(p)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(u.shape,this.circShape.zpp_inner)&&a.push(p)}else null!=u.child1&&this.treeStack.add(u.child1),null!=u.child2&&this.treeStack.add(u.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var u;o=(u=this.treeStack.pop_unsafe()).aabb;if(s.miny<=o.maxy&&o.miny<=s.maxy&&s.minx<=o.maxx&&o.minx<=s.maxx)if(null==u.child1){var _,c;p=u.shape.body.outer;if(null!=r)_=0!=((c=u.shape.filter).collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup);else _=!0;if(_)if(i){if(!this.failed.has(p)){h=zpp_$nape_geom_ZPP_$Collide.containTest(this.circShape.zpp_inner,u.shape);!a.has(p)&&h?a.push(p):h||(a.remove(p),this.failed.push(p))}}else!a.has(p)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(u.shape,this.circShape.zpp_inner)&&a.push(p)}else null!=u.child1&&this.treeStack.add(u.child1),null!=u.child2&&this.treeStack.add(u.child2)}return this.failed.clear(),a},shapesInShape:function(n,e,t,i){this.sync_broadphase(),this.validateShape(n);var r=n.aabb,l=null==i?new nape_shape_ShapeList:i;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=(a=this.treeStack.pop_unsafe()).aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){if(null!=t)o=0!=((p=a.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&p.collisionGroup);else o=!0;o&&(e?zpp_$nape_geom_ZPP_$Collide.containTest(n,a.shape)&&l.push(a.shape.outer):zpp_$nape_geom_ZPP_$Collide.testCollide_safe(a.shape,n)&&l.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var a;s=(a=this.treeStack.pop_unsafe()).aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var o,p;if(null!=t)o=0!=((p=a.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&p.collisionGroup);else o=!0;o&&(e?zpp_$nape_geom_ZPP_$Collide.containTest(n,a.shape)&&l.push(a.shape.outer):zpp_$nape_geom_ZPP_$Collide.testCollide_safe(a.shape,n)&&l.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}return l},bodiesInShape:function(n,e,t,i){this.sync_broadphase(),this.validateShape(n);var r=n.aabb,l=null==i?new nape_phys_BodyList:i;if(null==this.failed&&(this.failed=new nape_phys_BodyList),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=(p=this.treeStack.pop_unsafe()).aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==p.child1){var a=p.shape.body.outer;if(null!=t)h=0!=((u=p.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&u.collisionGroup);else h=!0;if(h)if(e){if(!this.failed.has(a)){var o=zpp_$nape_geom_ZPP_$Collide.containTest(n,p.shape);!l.has(a)&&o?l.push(a):o||(l.remove(a),this.failed.push(a))}}else!l.has(a)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(p.shape,n)&&l.push(a)}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var p;s=(p=this.treeStack.pop_unsafe()).aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==p.child1){var h,u;a=p.shape.body.outer;if(null!=t)h=0!=((u=p.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&u.collisionGroup);else h=!0;if(h)if(e){if(!this.failed.has(a)){o=zpp_$nape_geom_ZPP_$Collide.containTest(n,p.shape);!l.has(a)&&o?l.push(a):o||(l.remove(a),this.failed.push(a))}}else!l.has(a)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(p.shape,n)&&l.push(a)}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}return this.failed.clear(),l},rayCast:function(n,e,t){null==this.openlist&&(this.openlist=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.sync_broadphase(),n.validate_dir();var i=n.maxdist;if(null!=this.dtree.root&&(n.aabbtest(this.dtree.root.aabb)&&(f=n.aabbsect(this.dtree.root.aabb))>=0&&f<i)){this.dtree.root.rayt=f;for(var r=null,l=this.openlist.head;null!=l;){var s=l.elt;if(this.dtree.root.rayt<s.rayt)break;r=l,l=l.next}var a=this.openlist,o=this.dtree.root;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?x=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(x=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=x.next,x.next=null),x.elt=o;var p=x;null==r?(p.next=a.head,a.head=p):(p.next=r.next,r.next=p),a.pushmod=a.modified=!0,a.length++}if(null!=this.stree.root&&(n.aabbtest(this.stree.root.aabb)&&(f=n.aabbsect(this.stree.root.aabb))>=0&&f<i)){this.stree.root.rayt=f;for(r=null,l=this.openlist.head;null!=l;){s=l.elt;if(this.stree.root.rayt<s.rayt)break;r=l,l=l.next}a=this.openlist,o=this.stree.root;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?x=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(x=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=x.next,x.next=null),x.elt=o;p=x;null==r?(p.next=a.head,a.head=p):(p.next=r.next,r.next=p),a.pushmod=a.modified=!0,a.length++}for(var h=null;null!=this.openlist.head;){var u=this.openlist.pop_unsafe();if(u.rayt>=i)break;if(null==u.child1){var _,c=u.shape;if(null!=t)_=0!=((a=c.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&a.collisionGroup);else _=!0;if(_){var d=0==c.type?n.circlesect(c.circle,e,i):n.aabbtest(c.aabb)?n.polysect(c.polygon,e,i):null;if(null!=d){if(null!=d.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(i=d.zpp_inner.toiDistance,null!=h){if(null!=h.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");h.zpp_inner.free()}h=d}}}else{var f;if(null!=u.child1)if(n.aabbtest(u.child1.aabb))if((f=n.aabbsect(u.child1.aabb))>=0&&f<i){u.child1.rayt=f;for(r=null,l=this.openlist.head;null!=l;){s=l.elt;if(u.child1.rayt<s.rayt)break;r=l,l=l.next}var x,b=this.openlist;o=u.child1;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?x=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(x=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=x.next,x.next=null),x.elt=o;p=x;null==r?(p.next=b.head,b.head=p):(p.next=r.next,r.next=p),b.pushmod=b.modified=!0,b.length++}if(null!=u.child2&&n.aabbtest(u.child2.aabb)){var y=n.aabbsect(u.child2.aabb);if(y>=0&&y<i){u.child2.rayt=y;for(var v=null,m=this.openlist.head;null!=m;){var g=m.elt;if(u.child2.rayt<g.rayt)break;v=m,m=m.next}var z,w=this.openlist,O=u.child2;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?z=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(z=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=z.next,z.next=null),z.elt=O;var C=z;null==v?(C.next=w.head,w.head=C):(C.next=v.next,v.next=C),w.pushmod=w.modified=!0,w.length++}}}}return this.openlist.clear(),h},rayMultiCast:function(n,e,t,i){null==this.openlist&&(this.openlist=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode),this.sync_broadphase(),n.validate_dir();var r=n.maxdist>=1/0,l=null==i?new nape_geom_RayResultList:i;null!=this.dtree.root&&(n.aabbtest(this.dtree.root.aabb)&&(r||(h=n.aabbsect(this.dtree.root.aabb))>=0&&h<n.maxdist)&&this.openlist.add(this.dtree.root));null!=this.stree.root&&(n.aabbtest(this.stree.root.aabb)&&(r||(h=n.aabbsect(this.stree.root.aabb))>=0&&h<n.maxdist)&&this.openlist.add(this.stree.root));for(;null!=this.openlist.head;){var s=this.openlist.pop_unsafe();if(null==s.child1){var a,o=s.shape;if(null!=t){var p=o.filter;a=0!=(p.collisionMask&t.collisionGroup)&&0!=(t.collisionMask&p.collisionGroup)}else a=!0;a&&(0==o.type?n.circlesect2(o.circle,e,l):n.aabbtest(o.aabb)&&n.polysect2(o.polygon,e,l))}else{var h;if(null!=s.child1)if(n.aabbtest(s.child1.aabb))if(r)this.openlist.add(s.child1);else(h=n.aabbsect(s.child1.aabb))>=0&&h<n.maxdist&&this.openlist.add(s.child1);if(null!=s.child2&&n.aabbtest(s.child2.aabb))if(r)this.openlist.add(s.child2);else{var u=n.aabbsect(s.child2.aabb);u>=0&&u<n.maxdist&&this.openlist.add(s.child2)}}}return this.openlist.clear(),l},__class__:zpp_$nape_space_ZPP_$DynAABBPhase});var zpp_$nape_space_ZPP_$Island=function(){this.waket=0,this.sleep=!1,this.comps=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.comps=new zpp_$nape_util_ZNPList_$ZPP_$Component};t["zpp_nape.space.ZPP_Island"]=zpp_$nape_space_ZPP_$Island,zpp_$nape_space_ZPP_$Island.__name__="zpp_nape.space.ZPP_Island",zpp_$nape_space_ZPP_$Island.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(n){this.next=n,this.modified=!0,this.pushmod=!0},add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},inlined_add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.next;null!=e;){var t=e;this.add(t),e=e.next}},insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},inlined_insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.next;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.next;return this.pop(),n},remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){var r,l;null==e?(l=(r=this.next).next,this.next=l,null==this.next&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){},inlined_clear:function(){},reverse:function(){for(var n=this.next,e=null;null!=n;){var t=n.next;n.next=e,this.next=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.next},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},front:function(){return this.next},back:function(){for(var n=this.next,e=n;null!=e;)n=e,e=e.next;return n},iterator_at:function(n){for(var e=this.next;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e:null},free:function(){},alloc:function(){this.waket=0},__class__:zpp_$nape_space_ZPP_$Island};var zpp_$nape_space_ZPP_$Component=function(){this.woken=!1,this.waket=0,this.sleeping=!1,this.island=null,this.constraint=null,this.body=null,this.isBody=!1,this.rank=0,this.parent=null,this.next=null,this.sleeping=!1,this.island=null,this.parent=this,this.rank=0,this.woken=!1};t["zpp_nape.space.ZPP_Component"]=zpp_$nape_space_ZPP_$Component,zpp_$nape_space_ZPP_$Component.__name__="zpp_nape.space.ZPP_Component",zpp_$nape_space_ZPP_$Component.prototype={free:function(){this.body=null,this.constraint=null},alloc:function(){},reset:function(){this.sleeping=!1,this.island=null,this.parent=this,this.rank=0},__class__:zpp_$nape_space_ZPP_$Component};var zpp_$nape_space_ZPP_$CallbackSet=function(){this.lazydel=!1,this.freed=!1,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.int2=null,this.int1=null,this.di=0,this.id=0,this.arbiters=new zpp_$nape_util_ZNPList_$ZPP_$Arbiter};t["zpp_nape.space.ZPP_CallbackSet"]=zpp_$nape_space_ZPP_$CallbackSet,zpp_$nape_space_ZPP_$CallbackSet.__name__="zpp_nape.space.ZPP_CallbackSet",zpp_$nape_space_ZPP_$CallbackSet.get=function(n,e){var t;return null==zpp_$nape_space_ZPP_$CallbackSet.zpp_pool?t=new zpp_$nape_space_ZPP_$CallbackSet:(t=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool,zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=t.next,t.next=null),t.freed=!1,t.lazydel=!1,t.COLLISIONstate=1,t.COLLISIONstamp=0,t.SENSORstate=1,t.SENSORstamp=0,t.FLUIDstate=1,t.FLUIDstamp=0,n.id<e.id?(t.int1=n,t.int2=e):(t.int1=e,t.int2=n),t.id=t.int1.id,t.di=t.int2.id,t},zpp_$nape_space_ZPP_$CallbackSet.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(n){this.next=n,this.modified=!0,this.pushmod=!0},add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},inlined_add:function(n){n._inuse=!0;var e=n;return e.next=this.next,this.next=e,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.next;null!=e;){var t=e;this.add(t),e=e.next}},insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},inlined_insert:function(n,e){e._inuse=!0;var t=e;return null==n?(t.next=this.next,this.next=t):(t.next=n.next,n.next=t),this.pushmod=this.modified=!0,this.length++,t},pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.next;this.next=n.next,n._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.next;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.next;return this.pop(),n},remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.next;null!=t;){if(t==n){var i,r;null==e?(r=(i=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0)),i._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.next,i=!1;null!=t;){if(t==n){var r,l;null==e?(l=(r=this.next).next,this.next=l,null==this.next&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;return null==n?(t=(e=this.next).next,this.next=t,null==this.next&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0)),e._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){},inlined_clear:function(){},reverse:function(){for(var n=this.next,e=null;null!=n;){var t=n.next;n.next=e,this.next=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.next},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.next;null!=t;){if(t==n){e=!0;break}t=t.next}return e},front:function(){return this.next},back:function(){for(var n=this.next,e=n;null!=e;)n=e,e=e.next;return n},iterator_at:function(n){for(var e=this.next;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e:null},free:function(){this.int1=this.int2=null,this.id=this.di=-1,this.freed=!0},alloc:function(){this.freed=!1,this.lazydel=!1,this.COLLISIONstate=1,this.COLLISIONstamp=0,this.SENSORstate=1,this.SENSORstamp=0,this.FLUIDstate=1,this.FLUIDstamp=0},add_arb:function(n){t=!1;for(var e=this.arbiters.head;null!=e;){if(e.elt==n){t=!0;break}e=e.next}if(t)return!1;var t,i=this.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=t.next,t.next=null),t.elt=n;var r=t;return r.next=i.head,i.head=r,i.modified=!0,i.length++,!0},try_remove_arb:function(n){for(var e=this.arbiters,t=null,i=e.head,r=!1;null!=i;){if(i.elt==n){var l,s;null==t?(s=(l=e.head).next,e.head=s,null==e.head&&(e.pushmod=!0)):(s=(l=t.next).next,t.next=s,null==s&&(e.pushmod=!0));var a=l;a.elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=a,e.modified=!0,e.length--,e.pushmod=!0,r=!0;break}t=i,i=i.next}return r},remove_arb:function(n){for(var e=this.arbiters,t=null,i=e.head;null!=i;){if(i.elt==n){var r,l;null==t?(l=(r=e.head).next,e.head=l,null==e.head&&(e.pushmod=!0)):(l=(r=t.next).next,t.next=l,null==l&&(e.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=s,e.modified=!0,e.length--,e.pushmod=!0,!0;break}t=i,i=i.next}},empty_arb:function(n){var e;e=!0;for(var t=this.arbiters.head;null!=t;){if(0!=(t.elt.type&n)){e=!1;break}t=t.next}return e},really_empty:function(){return null==this.arbiters.head},sleeping:function(){var n;n=!0;for(var e=this.arbiters.head;null!=e;){if(!e.elt.sleeping){n=!1;break}e=e.next}return n},__class__:zpp_$nape_space_ZPP_$CallbackSet};var zpp_$nape_space_ZPP_$CbSetManager=function(n){this.space=null,this.cbsets=null,null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?this.cbsets=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(this.cbsets=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=this.cbsets.next,this.cbsets.next=null),this.cbsets.lt=zpp_$nape_callbacks_ZPP_$CbSet.setlt,this.space=n};t["zpp_nape.space.ZPP_CbSetManager"]=zpp_$nape_space_ZPP_$CbSetManager,zpp_$nape_space_ZPP_$CbSetManager.__name__="zpp_nape.space.ZPP_CbSetManager",zpp_$nape_space_ZPP_$CbSetManager.prototype={get:function(n){if(null==n.head)return null;var e;null==zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool?e=new zpp_$nape_callbacks_ZPP_$CbSet:(e=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=e.next,e.next=null);var t=e.cbTypes;e.cbTypes=n;var i,r=this.cbsets.find_weak(e);if(null!=r)i=r.data;else{var l=zpp_$nape_callbacks_ZPP_$CbSet.get(n);this.cbsets.insert(l),l.manager=this,i=l}e.cbTypes=t;var s=e;for(s.listeners.clear(),s.zip_listeners=!0,s.bodylisteners.clear(),s.zip_bodylisteners=!0,s.conlisteners.clear(),s.zip_conlisteners=!0;null!=s.cbTypes.head;){s.cbTypes.pop_unsafe().cbsets.remove(s)}return s.next=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=s,i},remove:function(n){for(this.cbsets.remove(n);null!=n.cbpairs.head;){var e=n.cbpairs.pop_unsafe();e.a!=e.b&&(n==e.a?e.b.cbpairs.remove(e):e.a.cbpairs.remove(e));var t=e;t.a=t.b=null,t.listeners.clear(),t.next=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=t}n.manager=null},clear:function(){},validate:function(){if(!this.cbsets.empty()){for(var n=this.cbsets.parent;null!=n.prev;)n=n.prev;for(;null!=n;){if(n.data.validate(),null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}},pair:function(n,e){for(var t,i=null,r=(n.cbpairs.length<e.cbpairs.length?n.cbpairs:e.cbpairs).head;null!=r;){var l=r.elt;if(l.a==n&&l.b==e||l.a==e&&l.b==n){i=l;break}r=r.next}null==i&&(null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?t=new zpp_$nape_callbacks_ZPP_$CbSetPair:(t=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=t.next,t.next=null),t.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(n,e)?(t.a=n,t.b=e):(t.a=e,t.b=n),i=t,n.cbpairs.add(i),e!=n&&e.cbpairs.add(i));return i.zip_listeners&&(i.zip_listeners=!1,i.__validate()),i},valid_listener:function(n){return n.space==this.space},__class__:zpp_$nape_space_ZPP_$CbSetManager};var zpp_$nape_space_ZPP_$Space=function(n,e){var t;this.prelisteners=null,this.precb=null,this.continuous=!1,this.toiEvents=null,this.pre_dt=0,this.convexShapeList=null,this.cbsets=null,this.callbackset_list=null,this.callbacks=null,this.wrap_listeners=null,this.listeners=null,this.islands=null,this.staticsleep=null,this.wrap_livecon=null,this.live_constraints=null,this.wrap_live=null,this.live=null,this.wrap_arbiters=null,this.s_arbiters=null,this.f_arbiters=null,this.c_arbiters_false=null,this.c_arbiters_true=null,this.sortcontacts=!1,this.time=0,this.midstep=!1,this.stamp=0,this.global_ang_drag=0,this.global_lin_drag=0,this.__static=null,this.bphase=null,this.kinematics=null,this.wrap_constraints=null,this.constraints=null,this.wrap_compounds=null,this.compounds=null,this.wrap_bodies=null,this.bodies=null,this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.userData=null,this.outer=null,this.toiEvents=new zpp_$nape_util_ZNPList_$ZPP_$ToiEvent,this.global_lin_drag=.015,this.global_ang_drag=.015,zpp_$nape_callbacks_ZPP_$Callback.internal=!0,this.precb=new nape_callbacks_PreCallback,this.precb.zpp_inner=new zpp_$nape_callbacks_ZPP_$Callback,zpp_$nape_callbacks_ZPP_$Callback.internal=!1,this.sortcontacts=!0,this.pre_dt=0,null!=e?(null==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),t=e==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE):t=!0,t?this.bphase=new zpp_$nape_space_ZPP_$DynAABBPhase(this):(null==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE=new nape_space_Broadphase,zpp_$nape_util_ZPP_$Flags.internal=!1),e==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new zpp_$nape_space_ZPP_$SweepPhase(this))),this.time=0;null!=n?(this.gravityx=n.x,this.gravityy=n.y):(this.gravityx=0,this.gravityy=0),this.bodies=new zpp_$nape_util_ZNPList_$ZPP_$Body,this.wrap_bodies=zpp_$nape_util_ZPP_$BodyList.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$bind(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$bind(this,this.bodies_subber),this.wrap_bodies.zpp_inner._modifiable=$bind(this,this.bodies_modifiable),this.compounds=new zpp_$nape_util_ZNPList_$ZPP_$Compound,this.wrap_compounds=zpp_$nape_util_ZPP_$CompoundList.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$bind(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$bind(this,this.compounds_subber),this.wrap_compounds.zpp_inner._modifiable=$bind(this,this.compounds_modifiable),this.kinematics=new zpp_$nape_util_ZNPList_$ZPP_$Body,this.c_arbiters_true=new zpp_$nape_util_ZNPList_$ZPP_$ColArbiter,this.c_arbiters_false=new zpp_$nape_util_ZNPList_$ZPP_$ColArbiter,this.f_arbiters=new zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter,this.s_arbiters=new zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter,this.islands=new zpp_$nape_space_ZPP_$Island,this.live=new zpp_$nape_util_ZNPList_$ZPP_$Body,this.wrap_live=zpp_$nape_util_ZPP_$BodyList.get(this.live,!0),this.staticsleep=new zpp_$nape_util_ZNPList_$ZPP_$Body,this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$bind(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$bind(this,this.constraints_subber),this.wrap_constraints.zpp_inner._modifiable=$bind(this,this.constraints_modifiable),this.live_constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this.wrap_livecon=zpp_$nape_util_ZPP_$ConstraintList.get(this.live_constraints,!0),this.__static=zpp_$nape_phys_ZPP_$Body.__static(),this.__static.zpp_inner.space=this,this.callbacks=new zpp_$nape_callbacks_ZPP_$Callback,this.midstep=!1,this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$Listener,this.wrap_listeners=zpp_$nape_util_ZPP_$ListenerList.get(this.listeners),this.wrap_listeners.zpp_inner.adder=$bind(this,this.listeners_adder),this.wrap_listeners.zpp_inner.subber=$bind(this,this.listeners_subber),this.wrap_listeners.zpp_inner._modifiable=$bind(this,this.listeners_modifiable),this.callbackset_list=new zpp_$nape_space_ZPP_$CallbackSet,this.mrca1=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,this.mrca2=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,this.prelisteners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener,this.cbsets=new zpp_$nape_space_ZPP_$CbSetManager(this)};t["zpp_nape.space.ZPP_Space"]=zpp_$nape_space_ZPP_$Space,zpp_$nape_space_ZPP_$Space.__name__="zpp_nape.space.ZPP_Space",zpp_$nape_space_ZPP_$Space.prototype={getgravity:function(){var n,e=this.gravityx,t=this.gravityy;if(null==t&&(t=0),null==e&&(e=0),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?n=new nape_geom_Vec2:(n=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=n.zpp_pool,n.zpp_pool=null,n.zpp_disp=!1,n==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==n.zpp_inner){var i;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?i=new zpp_$nape_geom_ZPP_$Vec2:(i=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,n.zpp_inner=i,n.zpp_inner.outer=n}else{if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var r;if((l=n.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=l._isimmutable&&l._isimmutable(),e!=e||t!=t)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(l=n.zpp_inner)._validate&&l._validate(),n.zpp_inner.x==e){if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var l;null!=(l=n.zpp_inner)._validate&&l._validate(),r=n.zpp_inner.y==t}else r=!1;if(!r)n.zpp_inner.x=e,n.zpp_inner.y=t,null!=(l=n.zpp_inner)._invalidate&&l._invalidate(l)}n.zpp_inner.weak=!1,this.wrap_gravity=n,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$bind(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$bind(this,this.gravity_validate)},gravity_invalidate:function(n){if(this.midstep)throw haxe_Exception.thrown("Error: Space::gravity cannot be set during space step");this.gravityx=n.x,this.gravityy=n.y;for(var e=new zpp_$nape_util_ZNPList_$ZPP_$Compound,t=this.bodies.head;null!=t;){(l=n=t.elt).world||(l.component.waket=this.stamp+(this.midstep?0:1),3==l.type&&(l.kinematicDelaySleep=!0),l.component.sleeping&&this.really_wake(l,!1)),t=t.next}for(t=this.compounds.head;null!=t;){var i=t.elt;e.add(i),t=t.next}for(;null!=e.head;){var r=e.pop_unsafe();for(t=r.bodies.head;null!=t;){var l;(l=n=t.elt).world||(l.component.waket=this.stamp+(this.midstep?0:1),3==l.type&&(l.kinematicDelaySleep=!0),l.component.sleeping&&this.really_wake(l,!1)),t=t.next}for(var s=r.compounds.head;null!=s;){i=s.elt;e.add(i),s=s.next}}},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},clear:function(){for(;null!=this.listeners.head;){var n=this.listeners.pop_unsafe();this.remListener(n)}for(;null!=this.callbackset_list.next;){(n=this.callbackset_list.pop_unsafe()).arbiters.clear(),(w=n).int1=w.int2=null,w.id=w.di=-1,w.freed=!0,w.next=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool,zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=w}for(;null!=this.c_arbiters_true.head;){if(!(h=this.c_arbiters_true.pop_unsafe()).cleared){for(var e=null,t=(_=h.b1.arbiters).head;null!=t;){if(t.elt==h){null==e?(d=(c=_.head).next,_.head=d,null==_.head&&(_.pushmod=!0)):(d=(c=e.next).next,e.next=d,null==d&&(_.pushmod=!0)),(w=c).elt=null,w.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=w,_.modified=!0,_.length--,_.pushmod=!0,!0;break}e=t,t=t.next}for(var i=null,r=(f=h.b2.arbiters).head;null!=r;){if(r.elt==h){null==i?(b=(x=f.head).next,f.head=b,null==f.head&&(f.pushmod=!0)):(b=(x=i.next).next,i.next=b,null==b&&(f.pushmod=!0)),(M=x).elt=null,M.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=M,f.modified=!0,f.length--,f.pushmod=!0,!0;break}i=r,r=r.next}null!=h.pair&&(h.pair.arb=null,h.pair=null)}for(h.b1=h.b2=null,h.active=!1,h.intchange=!1;null!=h.contacts.next;){var l=(o=h.contacts).next;o.pop(),(u=l).arbiter=null,u.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=u;var s=(p=h.innards).next;p.next=s.next,s._inuse=!1,null==p.next&&(p.pushmod=!0),p.modified=!0,p.length--}(a=h).userdef_dyn_fric=!1,a.userdef_stat_fric=!1,a.userdef_restitution=!1,a.userdef_rfric=!1,a.__ref_edge1=a.__ref_edge2=null,a.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=a,h.pre_dt=-1}for(;null!=this.c_arbiters_false.head;){var a;if(!(h=this.c_arbiters_false.pop_unsafe()).cleared){for(e=null,t=(_=h.b1.arbiters).head;null!=t;){if(t.elt==h){null==e?(d=(c=_.head).next,_.head=d,null==_.head&&(_.pushmod=!0)):(d=(c=e.next).next,e.next=d,null==d&&(_.pushmod=!0)),(w=c).elt=null,w.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=w,_.modified=!0,_.length--,_.pushmod=!0,!0;break}e=t,t=t.next}for(i=null,r=(f=h.b2.arbiters).head;null!=r;){if(r.elt==h){null==i?(b=(x=f.head).next,f.head=b,null==f.head&&(f.pushmod=!0)):(b=(x=i.next).next,i.next=b,null==b&&(f.pushmod=!0)),(M=x).elt=null,M.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=M,f.modified=!0,f.length--,f.pushmod=!0,!0;break}i=r,r=r.next}null!=h.pair&&(h.pair.arb=null,h.pair=null)}for(h.b1=h.b2=null,h.active=!1,h.intchange=!1;null!=h.contacts.next;){var o;l=(o=h.contacts).next;o.pop(),(u=l).arbiter=null,u.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=u;var p;s=(p=h.innards).next;p.next=s.next,s._inuse=!1,null==p.next&&(p.pushmod=!0),p.modified=!0,p.length--}(a=h).userdef_dyn_fric=!1,a.userdef_stat_fric=!1,a.userdef_restitution=!1,a.userdef_rfric=!1,a.__ref_edge1=a.__ref_edge2=null,a.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=a,h.pre_dt=-1}for(;null!=this.s_arbiters.head;){if(!(h=this.s_arbiters.pop_unsafe()).cleared){for(e=null,t=(_=h.b1.arbiters).head;null!=t;){if(t.elt==h){null==e?(d=(c=_.head).next,_.head=d,null==_.head&&(_.pushmod=!0)):(d=(c=e.next).next,e.next=d,null==d&&(_.pushmod=!0)),(w=c).elt=null,w.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=w,_.modified=!0,_.length--,_.pushmod=!0,!0;break}e=t,t=t.next}for(i=null,r=(f=h.b2.arbiters).head;null!=r;){if(r.elt==h){null==i?(b=(x=f.head).next,f.head=b,null==f.head&&(f.pushmod=!0)):(b=(x=i.next).next,i.next=b,null==b&&(f.pushmod=!0)),(M=x).elt=null,M.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=M,f.modified=!0,f.length--,f.pushmod=!0,!0;break}i=r,r=r.next}null!=h.pair&&(h.pair.arb=null,h.pair=null)}h.b1=h.b2=null,h.active=!1,h.intchange=!1,(u=h).next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=u}for(;null!=this.f_arbiters.head;){var h,u;if(!(h=this.f_arbiters.pop_unsafe()).cleared){var _;for(e=null,t=(_=h.b1.arbiters).head;null!=t;){if(t.elt==h){var c,d;null==e?(d=(c=_.head).next,_.head=d,null==_.head&&(_.pushmod=!0)):(d=(c=e.next).next,e.next=d,null==d&&(_.pushmod=!0)),(w=c).elt=null,w.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=w,_.modified=!0,_.length--,_.pushmod=!0,!0;break}e=t,t=t.next}var f;for(i=null,r=(f=h.b2.arbiters).head;null!=r;){if(r.elt==h){var x,b;null==i?(b=(x=f.head).next,f.head=b,null==f.head&&(f.pushmod=!0)):(b=(x=i.next).next,i.next=b,null==b&&(f.pushmod=!0)),(M=x).elt=null,M.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=M,f.modified=!0,f.length--,f.pushmod=!0,!0;break}i=r,r=r.next}null!=h.pair&&(h.pair.arb=null,h.pair=null)}h.b1=h.b2=null,h.active=!1,h.intchange=!1,(u=h).next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=u,h.pre_dt=-1}for(this.bphase.clear();null!=this.bodies.head;){if(null!=(g=this.bodies.pop_unsafe()).component)if(null!=(z=g.component.island)){for(;null!=z.comps.head;){(n=z.comps.pop_unsafe()).sleeping=!1,n.island=null,n.parent=n,n.rank=0}(w=z).next=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=w}g.removedFromSpace(),g.space=null}for(;null!=this.constraints.head;){if(null!=(n=this.constraints.pop_unsafe()).component)if(null!=(z=n.component.island)){for(;null!=z.comps.head;){(C=z.comps.pop_unsafe()).sleeping=!1,C.island=null,C.parent=C,C.rank=0}(w=z).next=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=w}n.removedFromSpace(),n.space=null}this.kinematics.clear();for(var y=new zpp_$nape_util_ZNPList_$ZPP_$Compound;null!=this.compounds.head;){n=this.compounds.pop_unsafe();y.add(n)}for(;null!=y.head;){var v=y.pop_unsafe();v.removedFromSpace(),v.space=null;for(var m=v.bodies.head;null!=m;){var g,z;if(null!=(g=m.elt).component)if(null!=(z=g.component.island)){for(;null!=z.comps.head;){(n=z.comps.pop_unsafe()).sleeping=!1,n.island=null,n.parent=n,n.rank=0}var w;(w=z).next=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=w}g.removedFromSpace(),g.space=null,m=m.next}for(var O=v.constraints.head;null!=O;){var C;if(null!=(C=O.elt).component){var E=C.component.island;if(null!=E){for(;null!=E.comps.head;){var U=E.comps.pop_unsafe();U.sleeping=!1,U.island=null,U.parent=U,U.rank=0}var M;(M=E).next=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=M}}C.removedFromSpace(),C.space=null,O=O.next}for(var T=v.compounds.head;null!=T;){var k=T.elt;y.add(k),T=T.next}}this.staticsleep.clear(),this.live.clear(),this.live_constraints.clear(),this.stamp=0,this.time=0,this.mrca1.clear(),this.mrca2.clear(),this.prelisteners.clear(),this.cbsets.clear()},bodies_adder:function(n){if(null!=n.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");return n.zpp_inner.space!=this&&(null!=n.zpp_inner.space&&n.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(n),this.addBody(n.zpp_inner),!0)},bodies_subber:function(n){this.remBody(n.zpp_inner)},bodies_modifiable:function(){if(this.midstep)throw haxe_Exception.thrown("Error: Space::bodies cannot be set during space step()")},compounds_adder:function(n){if(null!=n.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");return n.zpp_inner.space!=this&&(null!=n.zpp_inner.space&&n.zpp_inner.space.wrap_compounds.remove(n),this.addCompound(n.zpp_inner),!0)},compounds_subber:function(n){this.remCompound(n.zpp_inner)},compounds_modifiable:function(){if(this.midstep)throw haxe_Exception.thrown("Error: Space::compounds cannot be set during space step()")},constraints_adder:function(n){if(null!=n.zpp_inner.compound)throw haxe_Exception.thrown("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");return n.zpp_inner.space!=this&&(null!=n.zpp_inner.space&&n.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(n),this.addConstraint(n.zpp_inner),!0)},constraints_subber:function(n){this.remConstraint(n.zpp_inner)},constraints_modifiable:function(){if(this.midstep)throw haxe_Exception.thrown("Error: Space::constraints cannot be set during space step()")},listeners_adder:function(n){return n.zpp_inner.space!=this&&(null!=n.zpp_inner.space&&n.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(n),this.addListener(n.zpp_inner),!0)},listeners_subber:function(n){this.remListener(n.zpp_inner)},listeners_modifiable:function(){if(this.midstep)throw haxe_Exception.thrown("Error: Space::listeners cannot be set during space step()")},revoke_listener:function(n){},unrevoke_listener:function(n){},addListener:function(n){n.space=this,n.addedToSpace();n.interaction},remListener:function(n){n.interaction;n.removedFromSpace(),n.space=null},add_callbackset:function(n){var e=n.int1.cbsets;null==zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet:(t=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=t.next,t.next=null),t.elt=n,(i=t).next=e.head,e.head=i,e.modified=!0,e.length++;var t;e=n.int2.cbsets;null==zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet:(t=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=t.next,t.next=null),t.elt=n,(i=t).next=e.head,e.head=i,e.modified=!0,e.length++;var i;e=this.callbackset_list;n._inuse=!0,(i=n).next=e.next,e.next=i,e.modified=!0,e.length++},remove_callbackset:function(n){n.lazydel=!0;for(var e=null,t=(i=n.int1.cbsets).head;null!=t;){if(t.elt==n){null==e?(l=(r=i.head).next,i.head=l,null==i.head&&(i.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(i.pushmod=!0)),(s=r).elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0,!0;break}e=t,t=t.next}var i;for(e=null,t=(i=n.int2.cbsets).head;null!=t;){if(t.elt==n){var r,l,s;null==e?(l=(r=i.head).next,i.head=l,null==i.head&&(i.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(i.pushmod=!0)),(s=r).elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0,!0;break}e=t,t=t.next}},transmitType:function(n,e){var t;(t=n).world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!1)),2==n.type?this.live.remove(n):3==n.type?(this.kinematics.remove(n),this.staticsleep.remove(n)):1==n.type&&this.staticsleep.remove(n),n.type=e,3==n.type&&this.kinematics.add(n),1==n.type&&this.static_validation(n),n.component.sleeping=!0,(t=n).world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!0))},added_shape:function(n,e){if(null==e&&(e=!1),!e){var t=n.body;t.world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!1))}this.bphase.insert(n),n.addedToSpace()},removed_shape:function(n,e){null==e&&(e=!1);var t=n.body;e||t.wake();for(var i=null,r=t.arbiters.head;null!=r;){var l=r.elt;if(l.ws1==n||l.ws2==n){if(0!=l.present){this.MRCA_chains(l.ws1,l.ws2);for(var s=this.mrca1.head;null!=s;){for(var a=s.elt,o=this.mrca2.head;null!=o;){var p=o.elt,h=a.cbSet,u=p.cbSet;h.validate(),u.validate();h.manager;for(var _,c=null,d=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=d;){var f=d.elt;if(f.a==h&&f.b==u||f.a==u&&f.b==h){c=f;break}d=d.next}if(null==c)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?_=new zpp_$nape_callbacks_ZPP_$CbSetPair:(_=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=_.next,_.next=null),_.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(h,u)?(_.a=h,_.b=u):(_.a=u,_.b=h),c=_,h.cbpairs.add(c),u!=h&&u.cbpairs.add(c);if(c.zip_listeners&&(c.zip_listeners=!1,c.__validate()),null!=c.listeners.head){var x=zpp_$nape_phys_ZPP_$Interactor.get(a,p);x.remove_arb(l),l.present--;h.manager;for(var b,y=null,v=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=v;){var m=v.elt;if(m.a==h&&m.b==u||m.a==u&&m.b==h){y=m;break}v=v.next}if(null==y)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?b=new zpp_$nape_callbacks_ZPP_$CbSetPair:(b=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=b.next,b.next=null),b.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(h,u)?(b.a=h,b.b=u):(b.a=u,b.b=h),y=b,h.cbpairs.add(y),u!=h&&u.cbpairs.add(y);y.zip_listeners&&(y.zip_listeners=!1,y.__validate());for(var g=y.listeners.head;null!=g;){var z=g.elt;if(1==z.event&&0!=(z.itype&l.type)&&x.empty_arb(z.itype)){var w=this.push_callback(z);w.event=1;var O,C=x.int1,E=x.int2,U=z.options1,M=C.cbTypes;if(U.nonemptyintersection(M,U.includes)&&!U.nonemptyintersection(M,U.excludes)){var T=z.options2,k=E.cbTypes;O=T.nonemptyintersection(k,T.includes)&&!T.nonemptyintersection(k,T.excludes)}else O=!1;O?(w.int1=C,w.int2=E):(w.int1=E,w.int2=C),w.set=x}g=g.next}null==x.arbiters.head&&this.remove_callbackset(x),o=o.next}else o=o.next}s=s.next}}if(l.b1!=t&&2==l.b1.type){var D=l.b1;D.world||(D.component.waket=this.stamp+(this.midstep?0:1),3==D.type&&(D.kinematicDelaySleep=!0),D.component.sleeping&&this.really_wake(D,!1))}if(l.b2!=t&&2==l.b2.type){var S=l.b2;S.world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}if(l.cleared=!0,null==t||l.b2==t)for(var A=l.b1.arbiters,P=null,V=A.head;null!=V;){if(V.elt==l){var I,N;null==P?(N=(I=A.head).next,A.head=N,null==A.head&&(A.pushmod=!0)):(N=(I=P.next).next,P.next=N,null==N&&(A.pushmod=!0));var F=I;F.elt=null,F.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=F,A.modified=!0,A.length--,A.pushmod=!0,!0;break}P=V,V=V.next}if(null==t||l.b1==t)for(var R=l.b2.arbiters,L=null,B=R.head;null!=B;){if(B.elt==l){var G,j;null==L?(j=(G=R.head).next,R.head=j,null==R.head&&(R.pushmod=!0)):(j=(G=L.next).next,L.next=j,null==j&&(R.pushmod=!0));var K=G;K.elt=null,K.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=K,R.modified=!0,R.length--,R.pushmod=!0,!0;break}L=B,B=B.next}null!=l.pair&&(l.pair.arb=null,l.pair=null),l.active=!1,this.f_arbiters.modified=!0,r=t.arbiters.erase(i)}else i=r,r=r.next}this.bphase.remove(n),n.removedFromSpace()},addConstraint:function(n){n.space=this,n.addedToSpace(),n.active&&(n.component.sleeping=!0,this.wake_constraint(n,!0))},remConstraint:function(n){n.active&&(this.wake_constraint(n,!0),this.live_constraints.remove(n)),n.removedFromSpace(),n.space=null},addCompound:function(n){n.space=this,n.addedToSpace();for(var e=n.bodies.head;null!=e;){var t=e.elt;this.addBody(t),e=e.next}for(e=n.constraints.head;null!=e;){t=e.elt;this.addConstraint(t),e=e.next}for(e=n.compounds.head;null!=e;){t=e.elt;this.addCompound(t),e=e.next}},remCompound:function(n){for(var e=n.bodies.head;null!=e;){var t=e.elt;this.remBody(t),e=e.next}for(e=n.constraints.head;null!=e;){t=e.elt;this.remConstraint(t),e=e.next}for(e=n.compounds.head;null!=e;){t=e.elt;this.remCompound(t),e=e.next}n.removedFromSpace(),n.space=null},addBody:function(n,e){null==e&&(e=-1),n.space=this,n.addedToSpace(),n.component.sleeping=!0,(i=n).world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!0));for(var t=n.shapes.head;null!=t;){var i,r=t.elt,l=!0;if(null==l&&(l=!1),!l)(i=r.body).world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1));this.bphase.insert(r),r.addedToSpace(),t=t.next}1==n.type?this.static_validation(n):2!=n.type&&3!=e&&this.kinematics.add(n)},remBody:function(n,e){if(null==e&&(e=-1),1==n.type)(t=n).world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!0)),this.staticsleep.remove(n);else if(2==n.type){(t=n).world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!0)),this.live.remove(n)}else{var t;3!=e&&this.kinematics.remove(n),(t=n).world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!0)),this.staticsleep.remove(n)}for(var i=n.shapes.head;null!=i;){var r=i.elt;this.removed_shape(r,!0),i=i.next}n.removedFromSpace(),n.space=null},shapesUnderPoint:function(n,e,t,i){return this.bphase.shapesUnderPoint(n,e,t,i)},bodiesUnderPoint:function(n,e,t,i){return this.bphase.bodiesUnderPoint(n,e,t,i)},shapesInAABB:function(n,e,t,i,r){return this.bphase.shapesInAABB(n.zpp_inner,e,t,i,r)},bodiesInAABB:function(n,e,t,i,r){return this.bphase.bodiesInAABB(n.zpp_inner,e,t,i,r)},shapesInCircle:function(n,e,t,i,r){var l=this.bphase;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var s,a=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(s=n.zpp_inner)._validate&&s._validate(),l.shapesInCircle(a,n.zpp_inner.y,e,t,i,r)},bodiesInCircle:function(n,e,t,i,r){var l=this.bphase;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(s=n.zpp_inner)._validate&&s._validate();var s,a=n.zpp_inner.x;if(null!=n&&n.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");return null!=(s=n.zpp_inner)._validate&&s._validate(),l.bodiesInCircle(a,n.zpp_inner.y,e,t,i,r)},shapesInShape:function(n,e,t,i){return this.bphase.shapesInShape(n,e,t,i)},bodiesInShape:function(n,e,t,i){return this.bphase.bodiesInShape(n,e,t,i)},rayCast:function(n,e,t){return this.bphase.rayCast(n.zpp_inner,e,null==t?null:t.zpp_inner)},rayMultiCast:function(n,e,t,i){return this.bphase.rayMultiCast(n.zpp_inner,e,null==t?null:t.zpp_inner,i)},convexCast:function(n,e,t,i){var r;if(null==zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool?r=new zpp_$nape_geom_ZPP_$ToiEvent:(r=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=r.next,r.next=null),r.failed=!1,r.s1=r.s2=null,r.arbiter=null,0==n.type){if((nn=n.circle).zip_worldCOM&&null!=nn.body){if(nn.zip_worldCOM=!1,nn.zip_localCOM){if(nn.zip_localCOM=!1,1==nn.type){if(null==(L=nn.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==L.lverts.next.next)L.localCOMx=L.lverts.next.x,L.localCOMy=L.lverts.next.y;else if(null==L.lverts.next.next.next){L.localCOMx=L.lverts.next.x,L.localCOMy=L.lverts.next.y;var l=1;L.localCOMx+=L.lverts.next.next.x*l,L.localCOMy+=L.lverts.next.next.y*l;l=.5;L.localCOMx*=l,L.localCOMy*=l}else{L.localCOMx=0,L.localCOMy=0;var s=0,a=_=L.lverts.next,o=_=_.next;for(_=_.next;null!=_;){var p=_;s+=o.x*(p.y-a.y);var h=p.y*o.x-p.x*o.y;L.localCOMx+=(o.x+p.x)*h,L.localCOMy+=(o.y+p.y)*h,a=o,o=p,_=_.next}p=_=L.lverts.next;s+=o.x*(p.y-a.y);h=p.y*o.x-p.x*o.y;L.localCOMx+=(o.x+p.x)*h,L.localCOMy+=(o.y+p.y)*h,a=o,o=p;p=_=_.next;s+=o.x*(p.y-a.y);h=p.y*o.x-p.x*o.y;L.localCOMx+=(o.x+p.x)*h,L.localCOMy+=(o.y+p.y)*h;l=s=1/(3*s);L.localCOMx*=l,L.localCOMy*=l}}null!=nn.wrap_localCOM&&(nn.wrap_localCOM.zpp_inner.x=nn.localCOMx,nn.wrap_localCOM.zpp_inner.y=nn.localCOMy)}(L=nn.body).zip_axis&&(L.zip_axis=!1,L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot)),nn.worldCOMx=nn.body.posx+(nn.body.axisy*nn.localCOMx-nn.body.axisx*nn.localCOMy),nn.worldCOMy=nn.body.posy+(nn.localCOMx*nn.body.axisx+nn.localCOMy*nn.body.axisy)}}else if((nn=n.polygon).zip_gaxi&&null!=nn.body){if(nn.zip_gaxi=!1,nn.validate_laxi(),(L=nn.body).zip_axis&&(L.zip_axis=!1,L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot)),nn.zip_gverts&&null!=nn.body){nn.zip_gverts=!1,nn.validate_lverts(),(L=nn.body).zip_axis&&(L.zip_axis=!1,L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot));for(var u=nn.lverts.next,_=nn.gverts.next;null!=_;){var c=_,d=u;u=u.next,c.x=nn.body.posx+(nn.body.axisy*d.x-nn.body.axisx*d.y),c.y=nn.body.posy+(d.x*nn.body.axisx+d.y*nn.body.axisy),_=_.next}}var f=nn.edges.head;a=_=nn.gverts.next;for(_=_.next;null!=_;){o=_;var x=f.elt;f=f.next,x.gp0=a,x.gp1=o,x.gnormx=nn.body.axisy*x.lnormx-nn.body.axisx*x.lnormy,x.gnormy=x.lnormx*nn.body.axisx+x.lnormy*nn.body.axisy,x.gprojection=nn.body.posx*x.gnormx+nn.body.posy*x.gnormy+x.lprojection,null!=x.wrap_gnorm&&(x.wrap_gnorm.zpp_inner.x=x.gnormx,x.wrap_gnorm.zpp_inner.y=x.gnormy),x.tp0=x.gp0.y*x.gnormx-x.gp0.x*x.gnormy,x.tp1=x.gp1.y*x.gnormx-x.gp1.x*x.gnormy,a=o,_=_.next}o=nn.gverts.next,x=f.elt;f=f.next,x.gp0=a,x.gp1=o,x.gnormx=nn.body.axisy*x.lnormx-nn.body.axisx*x.lnormy,x.gnormy=x.lnormx*nn.body.axisx+x.lnormy*nn.body.axisy,x.gprojection=nn.body.posx*x.gnormx+nn.body.posy*x.gnormy+x.lprojection,null!=x.wrap_gnorm&&(x.wrap_gnorm.zpp_inner.x=x.gnormx,x.wrap_gnorm.zpp_inner.y=x.gnormy),x.tp0=x.gp0.y*x.gnormx-x.gp0.x*x.gnormy,x.tp1=x.gp1.y*x.gnormx-x.gp1.x*x.gnormy}var b=n.body,y=b.posx,v=b.posy;if(b.sweepTime=0,b.sweep_angvel=b.angvel,0!=(B=e-b.sweepTime)){b.sweepTime=e;l=B;if(b.posx+=b.velx*l,b.posy+=b.vely*l,0!=b.angvel){var m=b.sweep_angvel*B;if(b.rot+=m,m*m>1e-4)b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot);else{var g=1-(H=m*m)*H/8,z=((Z=1-.5*H)*b.axisx+m*b.axisy)*g;b.axisy=(Z*b.axisy-m*b.axisx)*g,b.axisx=z}}}var w=b.posx,O=b.posy;n.validate_sweepRadius();var C,E=n.sweepRadius;null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?C=new zpp_$nape_geom_ZPP_$AABB:(C=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=C.next,C.next=null);var U=y,M=w;C.minx=(U<M?U:M)-E;U=y,M=w;C.maxx=(U>M?U:M)+E;U=v,M=O;C.miny=(U<M?U:M)-E;U=v,M=O;C.maxy=(U>M?U:M)+E;var T=this.convexShapeList=this.bphase.shapesInAABB(C,!1,!1,null==t?null:t.zpp_inner,this.convexShapeList);null!=(P=C).outer&&(P.outer.zpp_inner=null,P.outer=null),P.wrap_min=P.wrap_max=null,P._invalidate=null,P._validate=null,P.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=P;var k=0,D=0;k=0,D=0;var S=0,A=0;S=0,A=0;var P,V=null,I=e+1;T.zpp_inner.valmod();for(var N=nape_shape_ShapeIterator.get(T);;){N.zpp_inner.zpp_inner.valmod(),(nn=N.zpp_inner).zpp_inner.valmod(),nn.zpp_inner.zip_length&&(nn.zpp_inner.zip_length=!1,nn.zpp_inner.user_length=nn.zpp_inner.inner.length);var F=nn.zpp_inner.user_length;if(N.zpp_critical=!0,N.zpp_i<F?J=!0:(N.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=N,N.zpp_inner=null,J=!1),!J)break;N.zpp_critical=!1;var R=N.zpp_inner.at(N.zpp_i++);if(R!=n.outer&&(null!=R.zpp_inner.body?R.zpp_inner.body.outer:null)!=b.outer){if(r.s1=n,r.s2=R.zpp_inner,i){var L,B;if(R.zpp_inner.validate_sweepRadius(),(null!=R.zpp_inner.body?R.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=R.zpp_inner.body?R.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=R.zpp_inner.body?R.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep(r,e,0,0,!0),0!=(B=0-(L=(null!=R.zpp_inner.body?R.zpp_inner.body.outer:null).zpp_inner).sweepTime)){L.sweepTime=0;l=B;if(L.posx+=L.velx*l,L.posy+=L.vely*l,0!=L.angvel){m=L.sweep_angvel*B;if(L.rot+=m,m*m>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{g=1-(H=m*m)*H/8,z=((Z=1-.5*H)*L.axisx+m*L.axisy)*g;L.axisy=(Z*L.axisy-m*L.axisx)*g,L.axisx=z}}}var G=(null!=R.zpp_inner.body?R.zpp_inner.body.outer:null).zpp_inner,j=R.zpp_inner;if(0==j.type)j.worldCOMx=G.posx+(G.axisy*j.localCOMx-G.axisx*j.localCOMy),j.worldCOMy=G.posy+(j.localCOMx*G.axisx+j.localCOMy*G.axisy);else{var K=j.polygon;for(u=K.lverts.next,_=K.gverts.next;null!=_;){c=_,d=u;u=u.next,c.x=G.posx+(G.axisy*d.x-G.axisx*d.y),c.y=G.posy+(d.x*G.axisx+d.y*G.axisy),_=_.next}f=K.edges.head;var W=K.gverts.next;a=W;for(W=W.next;null!=W;){o=W,x=f.elt;f=f.next,x.gnormx=G.axisy*x.lnormx-G.axisx*x.lnormy,x.gnormy=x.lnormx*G.axisx+x.lnormy*G.axisy,x.gprojection=G.posx*x.gnormx+G.posy*x.gnormy+x.lprojection,x.tp0=a.y*x.gnormx-a.x*x.gnormy,x.tp1=o.y*x.gnormx-o.x*x.gnormy,a=o,W=W.next}var Y=K.gverts.next,X=f.elt;f=f.next,X.gnormx=G.axisy*X.lnormx-G.axisx*X.lnormy,X.gnormy=X.lnormx*G.axisx+X.lnormy*G.axisy,X.gprojection=G.posx*X.gnormx+G.posy*X.gnormy+X.lprojection,X.tp0=a.y*X.gnormx-a.x*X.gnormy,X.tp1=Y.y*X.gnormx-Y.x*X.gnormy}}else zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(r,e,0,0);r.toi*=e,r.toi>0&&r.toi<I&&(I=r.toi,k=r.axis.x,D=r.axis.y,S=r.c2.x,A=r.c2.y,V=R)}}if(T.clear(),(P=r).next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=P,0!=(B=0-b.sweepTime)){b.sweepTime=0;l=B;if(b.posx+=b.velx*l,b.posy+=b.vely*l,0!=b.angvel){m=b.sweep_angvel*B;if(b.rot+=m,m*m>1e-4)b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot);else{var H;g=1-(H=m*m)*H/8,z=((Z=1-.5*H)*b.axisx+m*b.axisy)*g;b.axisy=(Z*b.axisy-m*b.axisx)*g,b.axisx=z}}}if(0==n.type)n.worldCOMx=b.posx+(b.axisy*n.localCOMx-b.axisx*n.localCOMy),n.worldCOMy=b.posy+(n.localCOMx*b.axisx+n.localCOMy*b.axisy);else{var Z;for(u=(Z=n.polygon).lverts.next,_=Z.gverts.next;null!=_;){c=_,d=u;u=u.next,c.x=b.posx+(b.axisy*d.x-b.axisx*d.y),c.y=b.posy+(d.x*b.axisx+d.y*b.axisy),_=_.next}f=Z.edges.head,a=_=Z.gverts.next;for(_=_.next;null!=_;){o=_,x=f.elt;f=f.next,x.gnormx=b.axisy*x.lnormx-b.axisx*x.lnormy,x.gnormy=x.lnormx*b.axisx+x.lnormy*b.axisy,x.gprojection=b.posx*x.gnormx+b.posy*x.gnormy+x.lprojection,x.tp0=a.y*x.gnormx-a.x*x.gnormy,x.tp1=o.y*x.gnormx-o.x*x.gnormy,a=o,_=_.next}o=Z.gverts.next,x=f.elt;f=f.next,x.gnormx=b.axisy*x.lnormx-b.axisx*x.lnormy,x.gnormy=x.lnormx*b.axisx+x.lnormy*b.axisy,x.gprojection=b.posx*x.gnormx+b.posy*x.gnormy+x.lprojection,x.tp0=a.y*x.gnormx-a.x*x.gnormy,x.tp1=o.y*x.gnormx-o.x*x.gnormy}if(I<=e){var q;if(null==(M=-D)&&(M=0),null==(U=-k)&&(U=0),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?q=new nape_geom_Vec2:(q=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=q.zpp_pool,q.zpp_pool=null,q.zpp_disp=!1,q==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==q.zpp_inner){var $;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?$=new zpp_$nape_geom_ZPP_$Vec2:($=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=$.next,$.next=null),$.weak=!1,$._immutable=!1,$.x=U,$.y=M,q.zpp_inner=$,q.zpp_inner.outer=q}else{if(null!=q&&q.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if((nn=q.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=nn._isimmutable&&nn._isimmutable(),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=q&&q.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(nn=q.zpp_inner)._validate&&nn._validate(),q.zpp_inner.x==U){if(null!=q&&q.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");null!=(nn=q.zpp_inner)._validate&&nn._validate(),J=q.zpp_inner.y==M}else J=!1;if(!J)q.zpp_inner.x=U,q.zpp_inner.y=M,null!=(nn=q.zpp_inner)._invalidate&&nn._invalidate(nn)}if(q.zpp_inner.weak=!1,null==(M=A)&&(M=0),null==(U=S)&&(U=0),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?$=new nape_geom_Vec2:($=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=$.zpp_pool,$.zpp_pool=null,$.zpp_disp=!1,$==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==$.zpp_inner){var Q;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?Q=new zpp_$nape_geom_ZPP_$Vec2:(Q=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=Q.next,Q.next=null),Q.weak=!1,Q._immutable=!1,Q.x=U,Q.y=M,$.zpp_inner=Q,$.zpp_inner.outer=$}else{if(null!=$&&$.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var J;if((nn=$.zpp_inner)._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=nn._isimmutable&&nn._isimmutable(),U!=U||M!=M)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=$&&$.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");if(null!=(nn=$.zpp_inner)._validate&&nn._validate(),$.zpp_inner.x==U){if(null!=$&&$.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var nn;null!=(nn=$.zpp_inner)._validate&&nn._validate(),J=$.zpp_inner.y==M}else J=!1;if(!J)$.zpp_inner.x=U,$.zpp_inner.y=M,null!=(nn=$.zpp_inner)._invalidate&&nn._invalidate(nn)}return $.zpp_inner.weak=!1,zpp_$nape_geom_ZPP_$ConvexRayResult.getConvex(q,$,I,V)}return null},prepareCast:function(n){var e;if(0==n.type){if((e=n.circle).zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){if(null==(o=e.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==o.lverts.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y;else if(null==o.lverts.next.next.next){o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y;var t=1;o.localCOMx+=o.lverts.next.next.x*t,o.localCOMy+=o.lverts.next.next.y*t;t=.5;o.localCOMx*=t,o.localCOMy*=t}else{o.localCOMx=0,o.localCOMy=0;var i=0,r=h=o.lverts.next,l=h=h.next;for(h=h.next;null!=h;){var s=h;i+=l.x*(s.y-r.y);var a=s.y*l.x-s.x*l.y;o.localCOMx+=(l.x+s.x)*a,o.localCOMy+=(l.y+s.y)*a,r=l,l=s,h=h.next}s=h=o.lverts.next;i+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;o.localCOMx+=(l.x+s.x)*a,o.localCOMy+=(l.y+s.y)*a,r=l,l=s;s=h=h.next;i+=l.x*(s.y-r.y);a=s.y*l.x-s.x*l.y;o.localCOMx+=(l.x+s.x)*a,o.localCOMy+=(l.y+s.y)*a;t=i=1/(3*i);o.localCOMx*=t,o.localCOMy*=t}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}(o=e.body).zip_axis&&(o.zip_axis=!1,o.axisx=Math.sin(o.rot),o.axisy=Math.cos(o.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}}else if((e=n.polygon).zip_gaxi&&null!=e.body){if(e.zip_gaxi=!1,e.validate_laxi(),(o=e.body).zip_axis&&(o.zip_axis=!1,o.axisx=Math.sin(o.rot),o.axisy=Math.cos(o.rot)),e.zip_gverts&&null!=e.body){var o;e.zip_gverts=!1,e.validate_lverts(),(o=e.body).zip_axis&&(o.zip_axis=!1,o.axisx=Math.sin(o.rot),o.axisy=Math.cos(o.rot));for(var p=e.lverts.next,h=e.gverts.next;null!=h;){var u=h,_=p;p=p.next,u.x=e.body.posx+(e.body.axisy*_.x-e.body.axisx*_.y),u.y=e.body.posy+(_.x*e.body.axisx+_.y*e.body.axisy),h=h.next}}var c=e.edges.head;r=h=e.gverts.next;for(h=h.next;null!=h;){l=h;var d=c.elt;c=c.next,d.gp0=r,d.gp1=l,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy,r=l,h=h.next}l=e.gverts.next,d=c.elt;c=c.next,d.gp0=r,d.gp1=l,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}},convexMultiCast:function(n,e,t,i,r){var l;if(null==zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool?l=new zpp_$nape_geom_ZPP_$ToiEvent:(l=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=l.next,l.next=null),l.failed=!1,l.s1=l.s2=null,l.arbiter=null,0==n.type){if((P=n.circle).zip_worldCOM&&null!=P.body){if(P.zip_worldCOM=!1,P.zip_localCOM){if(P.zip_localCOM=!1,1==P.type){if(null==(F=P.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next){F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;var s=1;F.localCOMx+=F.lverts.next.next.x*s,F.localCOMy+=F.lverts.next.next.y*s;s=.5;F.localCOMx*=s,F.localCOMy*=s}else{F.localCOMx=0,F.localCOMy=0;var a=0,o=c=F.lverts.next,p=c=c.next;for(c=c.next;null!=c;){var h=c;a+=p.x*(h.y-o.y);var u=h.y*p.x-h.x*p.y;F.localCOMx+=(p.x+h.x)*u,F.localCOMy+=(p.y+h.y)*u,o=p,p=h,c=c.next}h=c=F.lverts.next;a+=p.x*(h.y-o.y);u=h.y*p.x-h.x*p.y;F.localCOMx+=(p.x+h.x)*u,F.localCOMy+=(p.y+h.y)*u,o=p,p=h;h=c=c.next;a+=p.x*(h.y-o.y);u=h.y*p.x-h.x*p.y;F.localCOMx+=(p.x+h.x)*u,F.localCOMy+=(p.y+h.y)*u;s=a=1/(3*a);F.localCOMx*=s,F.localCOMy*=s}}null!=P.wrap_localCOM&&(P.wrap_localCOM.zpp_inner.x=P.localCOMx,P.wrap_localCOM.zpp_inner.y=P.localCOMy)}(F=P.body).zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot)),P.worldCOMx=P.body.posx+(P.body.axisy*P.localCOMx-P.body.axisx*P.localCOMy),P.worldCOMy=P.body.posy+(P.localCOMx*P.body.axisx+P.localCOMy*P.body.axisy)}}else if((P=n.polygon).zip_gaxi&&null!=P.body){if(P.zip_gaxi=!1,P.validate_laxi(),(F=P.body).zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot)),P.zip_gverts&&null!=P.body){P.zip_gverts=!1,P.validate_lverts(),(F=P.body).zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot));for(var _=P.lverts.next,c=P.gverts.next;null!=c;){var d=c,f=_;_=_.next,d.x=P.body.posx+(P.body.axisy*f.x-P.body.axisx*f.y),d.y=P.body.posy+(f.x*P.body.axisx+f.y*P.body.axisy),c=c.next}}var x=P.edges.head;o=c=P.gverts.next;for(c=c.next;null!=c;){p=c;var b=x.elt;x=x.next,b.gp0=o,b.gp1=p,b.gnormx=P.body.axisy*b.lnormx-P.body.axisx*b.lnormy,b.gnormy=b.lnormx*P.body.axisx+b.lnormy*P.body.axisy,b.gprojection=P.body.posx*b.gnormx+P.body.posy*b.gnormy+b.lprojection,null!=b.wrap_gnorm&&(b.wrap_gnorm.zpp_inner.x=b.gnormx,b.wrap_gnorm.zpp_inner.y=b.gnormy),b.tp0=b.gp0.y*b.gnormx-b.gp0.x*b.gnormy,b.tp1=b.gp1.y*b.gnormx-b.gp1.x*b.gnormy,o=p,c=c.next}p=P.gverts.next,b=x.elt;x=x.next,b.gp0=o,b.gp1=p,b.gnormx=P.body.axisy*b.lnormx-P.body.axisx*b.lnormy,b.gnormy=b.lnormx*P.body.axisx+b.lnormy*P.body.axisy,b.gprojection=P.body.posx*b.gnormx+P.body.posy*b.gnormy+b.lprojection,null!=b.wrap_gnorm&&(b.wrap_gnorm.zpp_inner.x=b.gnormx,b.wrap_gnorm.zpp_inner.y=b.gnormy),b.tp0=b.gp0.y*b.gnormx-b.gp0.x*b.gnormy,b.tp1=b.gp1.y*b.gnormx-b.gp1.x*b.gnormy}var y=n.body,v=y.posx,m=y.posy;if(y.sweepTime=0,y.sweep_angvel=y.angvel,0!=(R=e-y.sweepTime)){y.sweepTime=e;s=R;if(y.posx+=y.velx*s,y.posy+=y.vely*s,0!=y.angvel){var g=y.sweep_angvel*R;if(y.rot+=g,g*g>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{var z=1-(yn=g*g)*yn/8,w=((vn=1-.5*yn)*y.axisx+g*y.axisy)*z;y.axisy=(vn*y.axisy-g*y.axisx)*z,y.axisx=w}}}var O=y.posx,C=y.posy;n.validate_sweepRadius();var E,U=n.sweepRadius;null==zpp_$nape_geom_ZPP_$AABB.zpp_pool?E=new zpp_$nape_geom_ZPP_$AABB:(E=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=E.next,E.next=null);var M=v,T=O;E.minx=(M<T?M:T)-U;M=v,T=O;E.maxx=(M>T?M:T)+U;M=m,T=C;E.miny=(M<T?M:T)-U;M=m,T=C;E.maxy=(M>T?M:T)+U;var k=this.convexShapeList=this.bphase.shapesInAABB(E,!1,!1,null==t?null:t.zpp_inner,this.convexShapeList);null!=(D=E).outer&&(D.outer.zpp_inner=null,D.outer=null),D.wrap_min=D.wrap_max=null,D._invalidate=null,D._validate=null,D.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=D;var D,S=null==r?new nape_geom_ConvexResultList:r;k.zpp_inner.valmod();for(var A=nape_shape_ShapeIterator.get(k);;){var P;A.zpp_inner.zpp_inner.valmod(),(P=A.zpp_inner).zpp_inner.valmod(),P.zpp_inner.zip_length&&(P.zpp_inner.zip_length=!1,P.zpp_inner.user_length=P.zpp_inner.inner.length);var V,I=P.zpp_inner.user_length;if(A.zpp_critical=!0,A.zpp_i<I?V=!0:(A.zpp_next=nape_shape_ShapeIterator.zpp_pool,nape_shape_ShapeIterator.zpp_pool=A,A.zpp_inner=null,V=!1),!V)break;A.zpp_critical=!1;var N=A.zpp_inner.at(A.zpp_i++);if(N!=n.outer&&(null!=N.zpp_inner.body?N.zpp_inner.body.outer:null)!=y.outer){if(l.s1=n,l.s2=N.zpp_inner,i){var F,R;if(N.zpp_inner.validate_sweepRadius(),(null!=N.zpp_inner.body?N.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=N.zpp_inner.body?N.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=N.zpp_inner.body?N.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep(l,e,0,0,!0),0!=(R=0-(F=(null!=N.zpp_inner.body?N.zpp_inner.body.outer:null).zpp_inner).sweepTime)){F.sweepTime=0;s=R;if(F.posx+=F.velx*s,F.posy+=F.vely*s,0!=F.angvel){g=F.sweep_angvel*R;if(F.rot+=g,g*g>1e-4)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{z=1-(yn=g*g)*yn/8,w=((vn=1-.5*yn)*F.axisx+g*F.axisy)*z;F.axisy=(vn*F.axisy-g*F.axisx)*z,F.axisx=w}}}var L=(null!=N.zpp_inner.body?N.zpp_inner.body.outer:null).zpp_inner,B=N.zpp_inner;if(0==B.type)B.worldCOMx=L.posx+(L.axisy*B.localCOMx-L.axisx*B.localCOMy),B.worldCOMy=L.posy+(B.localCOMx*L.axisx+B.localCOMy*L.axisy);else{var G=B.polygon;for(_=G.lverts.next,c=G.gverts.next;null!=c;){d=c,f=_;_=_.next,d.x=L.posx+(L.axisy*f.x-L.axisx*f.y),d.y=L.posy+(f.x*L.axisx+f.y*L.axisy),c=c.next}x=G.edges.head;var j=G.gverts.next;o=j;for(j=j.next;null!=j;){p=j,b=x.elt;x=x.next,b.gnormx=L.axisy*b.lnormx-L.axisx*b.lnormy,b.gnormy=b.lnormx*L.axisx+b.lnormy*L.axisy,b.gprojection=L.posx*b.gnormx+L.posy*b.gnormy+b.lprojection,b.tp0=o.y*b.gnormx-o.x*b.gnormy,b.tp1=p.y*b.gnormx-p.x*b.gnormy,o=p,j=j.next}var K=G.gverts.next,W=x.elt;x=x.next,W.gnormx=L.axisy*W.lnormx-L.axisx*W.lnormy,W.gnormy=W.lnormx*L.axisx+W.lnormy*L.axisy,W.gprojection=L.posx*W.gnormx+L.posy*W.gnormy+W.lprojection,W.tp0=o.y*W.gnormx-o.x*W.gnormy,W.tp1=K.y*W.gnormx-K.x*W.gnormy}}else zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(l,e,0,0);if(l.toi*=e,l.toi>0){var Y;M=-l.axis.x;if(null==(T=-l.axis.y)&&(T=0),null==M&&(M=0),M!=M||T!=T)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?Y=new nape_geom_Vec2:(Y=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=Y.zpp_pool,Y.zpp_pool=null,Y.zpp_disp=!1,Y==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==Y.zpp_inner){var X;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?X=new zpp_$nape_geom_ZPP_$Vec2:(X=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=X.next,X.next=null),X.weak=!1,X._immutable=!1,X.x=M,X.y=T,Y.zpp_inner=X,Y.zpp_inner.outer=Y}else{if(null!=Y&&Y.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var H,Z=Y.zpp_inner;if(Z._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=Z._isimmutable&&Z._isimmutable(),M!=M||T!=T)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=Y&&Y.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var q=Y.zpp_inner;if(null!=q._validate&&q._validate(),Y.zpp_inner.x==M){if(null!=Y&&Y.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var $=Y.zpp_inner;null!=$._validate&&$._validate(),H=Y.zpp_inner.y==T}else H=!1;if(!H){Y.zpp_inner.x=M,Y.zpp_inner.y=T;var Q=Y.zpp_inner;null!=Q._invalidate&&Q._invalidate(Q)}}Y.zpp_inner.weak=!1;var J,nn=l.c2.x,en=l.c2.y;if(null==en&&(en=0),null==nn&&(nn=0),nn!=nn||en!=en)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null==zpp_$nape_util_ZPP_$PubPool.poolVec2?J=new nape_geom_Vec2:(J=zpp_$nape_util_ZPP_$PubPool.poolVec2,zpp_$nape_util_ZPP_$PubPool.poolVec2=J.zpp_pool,J.zpp_pool=null,J.zpp_disp=!1,J==zpp_$nape_util_ZPP_$PubPool.nextVec2&&(zpp_$nape_util_ZPP_$PubPool.nextVec2=null)),null==J.zpp_inner){var tn;null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?tn=new zpp_$nape_geom_ZPP_$Vec2:(tn=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=tn.next,tn.next=null),tn.weak=!1,tn._immutable=!1,tn.x=nn,tn.y=en,J.zpp_inner=tn,J.zpp_inner.outer=J}else{if(null!=J&&J.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var rn,ln=J.zpp_inner;if(ln._immutable)throw haxe_Exception.thrown("Error: Vec2 is immutable");if(null!=ln._isimmutable&&ln._isimmutable(),nn!=nn||en!=en)throw haxe_Exception.thrown("Error: Vec2 components cannot be NaN");if(null!=J&&J.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var sn=J.zpp_inner;if(null!=sn._validate&&sn._validate(),J.zpp_inner.x==nn){if(null!=J&&J.zpp_disp)throw haxe_Exception.thrown("Error: Vec2 has been disposed and cannot be used!");var an=J.zpp_inner;null!=an._validate&&an._validate(),rn=J.zpp_inner.y==en}else rn=!1;if(!rn){J.zpp_inner.x=nn,J.zpp_inner.y=en;var on=J.zpp_inner;null!=on._invalidate&&on._invalidate(on)}}J.zpp_inner.weak=!1;for(var pn=zpp_$nape_geom_ZPP_$ConvexRayResult.getConvex(Y,J,l.toi,N),hn=null,un=S.zpp_inner.inner.head;null!=un;){var _n=un.elt;if(null!=pn.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");var cn=pn.zpp_inner.toiDistance;if(null!=_n.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(cn<_n.zpp_inner.toiDistance)break;hn=un,un=un.next}var dn,xn=S.zpp_inner.inner;null==zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool?dn=new zpp_$nape_util_ZNPNode_$ConvexResult:(dn=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=dn.next,dn.next=null),dn.elt=pn;var bn=dn;null==hn?(bn.next=xn.head,xn.head=bn):(bn.next=hn.next,hn.next=bn),xn.pushmod=xn.modified=!0,xn.length++}}}if(k.clear(),(D=l).next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=D,0!=(R=0-y.sweepTime)){y.sweepTime=0;s=R;if(y.posx+=y.velx*s,y.posy+=y.vely*s,0!=y.angvel){g=y.sweep_angvel*R;if(y.rot+=g,g*g>1e-4)y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot);else{var yn;z=1-(yn=g*g)*yn/8,w=((vn=1-.5*yn)*y.axisx+g*y.axisy)*z;y.axisy=(vn*y.axisy-g*y.axisx)*z,y.axisx=w}}}if(0==n.type)n.worldCOMx=y.posx+(y.axisy*n.localCOMx-y.axisx*n.localCOMy),n.worldCOMy=y.posy+(n.localCOMx*y.axisx+n.localCOMy*y.axisy);else{var vn;for(_=(vn=n.polygon).lverts.next,c=vn.gverts.next;null!=c;){d=c,f=_;_=_.next,d.x=y.posx+(y.axisy*f.x-y.axisx*f.y),d.y=y.posy+(f.x*y.axisx+f.y*y.axisy),c=c.next}x=vn.edges.head,o=c=vn.gverts.next;for(c=c.next;null!=c;){p=c,b=x.elt;x=x.next,b.gnormx=y.axisy*b.lnormx-y.axisx*b.lnormy,b.gnormy=b.lnormx*y.axisx+b.lnormy*y.axisy,b.gprojection=y.posx*b.gnormx+y.posy*b.gnormy+b.lprojection,b.tp0=o.y*b.gnormx-o.x*b.gnormy,b.tp1=p.y*b.gnormx-p.x*b.gnormy,o=p,c=c.next}p=vn.gverts.next,b=x.elt;x=x.next,b.gnormx=y.axisy*b.lnormx-y.axisx*b.lnormy,b.gnormy=b.lnormx*y.axisx+b.lnormy*y.axisy,b.gprojection=y.posx*b.gnormx+y.posy*b.gnormy+b.lprojection,b.tp0=o.y*b.gnormx-o.x*b.gnormy,b.tp1=p.y*b.gnormx-p.x*b.gnormy}return S},push_callback:function(n){var e;return null==zpp_$nape_callbacks_ZPP_$Callback.zpp_pool?e=new zpp_$nape_callbacks_ZPP_$Callback:(e=zpp_$nape_callbacks_ZPP_$Callback.zpp_pool,zpp_$nape_callbacks_ZPP_$Callback.zpp_pool=e.next,e.next=null),this.callbacks.push(e),e.listener=n,e},step:function(n,e,t){if(this.midstep)throw haxe_Exception.thrown("Error: ... REALLY?? you're going to call space.step() inside of space.step()? COME ON!!");if(this.time+=n,this.pre_dt=n,this.midstep=!0,this.stamp++,this.validation(),this.bphase.broadphase(this,!0),this.prestep(n),this.sortcontacts){var i=this.c_arbiters_false;if(null!=i.head&&null!=i.head.next){for(var r,l,s,a=i.head,o=null,p=null,h=null,u=null,_=1;;){for(r=0,p=a,o=a=null;null!=p;){for(++r,h=p,l=0,s=_;null!=h&&l<_;)++l,h=h.next;for(;l>0||s>0&&null!=h;)0==l?(u=h,h=h.next,--s):0==s||null==h||!p.elt.active||!h.elt.active||p.elt.oc1.dist<h.elt.oc1.dist?(u=p,p=p.next,--l):(u=h,h=h.next,--s),null!=o?o.next=u:a=u,o=u;p=h}if(o.next=null,_<<=1,!(r>1))break}i.head=a,i.modified=!0,i.pushmod=!0}}this.updateVel(n),this.warmStart(),this.iterateVel(e);for(var c=this.kinematics.head;null!=c;){(y=c.elt).pre_posx=y.posx,y.pre_posy=y.posy,y.pre_rot=y.rot,c=c.next}for(c=this.live.head;null!=c;){(y=c.elt).pre_posx=y.posx,y.pre_posy=y.posy,y.pre_rot=y.rot,c=c.next}this.updatePos(n),this.continuous=!0,this.continuousCollisions(n),this.continuous=!1,this.iteratePos(t);for(c=this.kinematics.head;null!=c;){var d=!((y=c.elt).posx==y.pre_posx&&y.posy==y.pre_posy),f=y.pre_rot!=y.rot;if(d){for(var x=y.shapes.head;null!=x;){1==(v=x.elt).type&&(v.polygon.invalidate_gverts(),v.polygon.invalidate_gaxi()),v.invalidate_worldCOM(),x=x.next}y.zip_worldCOM=!0}if(f){y.zip_axis=!0;for(var b=y.shapes.head;null!=b;){1==(m=b.elt).type&&(m.polygon.invalidate_gverts(),m.polygon.invalidate_gaxi()),m.invalidate_worldCOM(),b=b.next}y.zip_worldCOM=!0}c=c.next}for(c=this.live.head;null!=c;){var y;d=!((y=c.elt).posx==y.pre_posx&&y.posy==y.pre_posy),f=y.pre_rot!=y.rot;if(d){for(x=y.shapes.head;null!=x;){var v;1==(v=x.elt).type&&(v.polygon.invalidate_gverts(),v.polygon.invalidate_gaxi()),v.invalidate_worldCOM(),x=x.next}y.zip_worldCOM=!0}if(f){y.zip_axis=!0;for(b=y.shapes.head;null!=b;){var m;1==(m=b.elt).type&&(m.polygon.invalidate_gverts(),m.polygon.invalidate_gaxi()),m.invalidate_worldCOM(),b=b.next}y.zip_worldCOM=!0}c=c.next}var g=null;for(c=this.staticsleep.head;null!=c;){if(3!=(M=c.elt).type||0==M.velx&&0==M.vely&&0==M.angvel){if(M.kinematicDelaySleep){M.kinematicDelaySleep=!1,c=c.next;continue}M.component.sleeping=!0;var z=this.staticsleep;null==g?(B=(L=z.head).next,z.head=B,null==z.head&&(z.pushmod=!0)):(B=(L=g.next).next,g.next=B,null==B&&(z.pushmod=!0)),(j=L).elt=null,j.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=j,z.modified=!0,z.length--,z.pushmod=!0,c=B}else g=c,c=c.next}this.doForests(n),this.sleepArbiters(),this.midstep=!1;for(g=null,c=this.callbackset_list.next;null!=c;){var w=c;if(null!=w.arbiters.head){var O;O=!0;for(x=w.arbiters.head;null!=x;){if(!x.elt.sleeping){O=!1;break}x=x.next}var C,E=O,U=w.int1.cbSet,M=w.int2.cbSet,T=(U.manager,null);for(b=(U.cbpairs.length<M.cbpairs.length?U.cbpairs:M.cbpairs).head;null!=b;){var k=b.elt;if(k.a==U&&k.b==M||k.a==M&&k.b==U){T=k;break}b=b.next}if(null==T)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?C=new zpp_$nape_callbacks_ZPP_$CbSetPair:(C=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=C.next,C.next=null),C.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(U,M)?(C.a=U,C.b=M):(C.a=M,C.b=U),T=C,U.cbpairs.add(T),M!=U&&M.cbpairs.add(T);T.zip_listeners&&(T.zip_listeners=!1,T.__validate());for(var D=T.listeners.head;null!=D;){var S=D.elt;if(6==S.event&&(!E||S.allowSleepingCallbacks)&&!w.empty_arb(S.itype)){(G=this.push_callback(S)).event=6;var A,P=w.int1,V=w.int2,I=S.options1,N=P.cbTypes;if(I.nonemptyintersection(N,I.includes)&&!I.nonemptyintersection(N,I.excludes)){var F=S.options2,R=V.cbTypes;A=F.nonemptyintersection(R,F.includes)&&!F.nonemptyintersection(R,F.excludes)}else A=!1;A?(G.int1=P,G.int2=V):(G.int1=V,G.int2=P),G.set=w}D=D.next}g=c,c=c.next}else{var L,B;z=this.callbackset_list;null==g?(B=(L=z.next).next,z.next=B,null==z.next&&(z.pushmod=!0)):(B=(L=g.next).next,g.next=B,null==B&&(z.pushmod=!0)),L._inuse=!1,z.modified=!0,z.length--,z.pushmod=!0,c=B,(j=w).int1=j.int2=null,j.id=j.di=-1,j.freed=!0,j.next=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool,zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=j}}for(;!this.callbacks.empty();){var G,j;if(0==(G=this.callbacks.pop()).listener.type)(j=G.listener.body).handler(G.wrapper_body());else if(1==G.listener.type){(P=G.listener.constraint).handler(G.wrapper_con())}else if(2==G.listener.type){(V=G.listener.interaction).handleri(G.wrapper_int())}var K=G;K.int1=K.int2=null,K.body=null,K.constraint=null,K.listener=null,null!=K.wrap_arbiters&&(K.wrap_arbiters.zpp_inner.inner=null),K.set=null,K.next=zpp_$nape_callbacks_ZPP_$Callback.zpp_pool,zpp_$nape_callbacks_ZPP_$Callback.zpp_pool=K}},continuousCollisions:function(n){var e=2*Math.PI/n;this.bphase.broadphase(this,!1);for(var t=0;t<1&&null!=this.toiEvents.head;){for(var i=null,r=2,l=!1,s=null,a=null,o=this.toiEvents.head;null!=o;){var p=(ke=o.elt).s1.body,h=ke.s2.body;if(p.sweepFrozen&&h.sweepFrozen){if(0==ke.toi||!zpp_$nape_geom_ZPP_$Collide.testCollide_safe(ke.s1,ke.s2)){o=this.toiEvents.erase(a),(De=ke).next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=De;continue}ke.toi=0}if(ke.frozen1!=p.sweepFrozen||ke.frozen2!=h.sweepFrozen){if(ke.kinematic){o=this.toiEvents.erase(a);var u=ke;u.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=u;continue}if(ke.frozen1=p.sweepFrozen,ke.frozen2=h.sweepFrozen,ke.frozen1){var _=ke.s1;ke.s1=ke.s2,ke.s2=_,ke.frozen1=!1,ke.frozen2=!0}if(zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(ke,n,0,nape_Config.collisionSlopCCD),ke.toi<0){o=this.toiEvents.erase(a);var c=ke;c.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=c;continue}}ke.toi>=0&&(ke.toi<r||!l&&ke.kinematic)&&(i=ke,r=ke.toi,l=ke.kinematic,s=a),a=o,o=o.next}if(null==i)break;this.toiEvents.erase(s),t=i.toi;var d=i.s1.body,f=i.s2.body;if(!d.sweepFrozen){var x=t*n;if(0!=(Ae=x-d.sweepTime)){d.sweepTime=x;var b=Ae;if(d.posx+=d.velx*b,d.posy+=d.vely*b,0!=d.angvel){var y=d.sweep_angvel*Ae;if(d.rot+=y,y*y>1e-4)d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot);else{var v=1-(Pe=y*y)*Pe/8,m=((Ve=1-.5*Pe)*d.axisx+y*d.axisy)*v;d.axisy=(Ve*d.axisy-y*d.axisx)*v,d.axisx=m}}}var g=i.s1;if(0==g.type)g.worldCOMx=d.posx+(d.axisy*g.localCOMx-d.axisx*g.localCOMy),g.worldCOMy=d.posy+(g.localCOMx*d.axisx+g.localCOMy*d.axisy);else{for(var z=g.polygon,w=z.lverts.next,O=z.gverts.next;null!=O;){var C=O,E=w;w=w.next,C.x=d.posx+(d.axisy*E.x-d.axisx*E.y),C.y=d.posy+(E.x*d.axisx+E.y*d.axisy),O=O.next}var U=z.edges.head,M=z.gverts.next,T=M;for(M=M.next;null!=M;){var k=M,D=U.elt;U=U.next,D.gnormx=d.axisy*D.lnormx-d.axisx*D.lnormy,D.gnormy=D.lnormx*d.axisx+D.lnormy*d.axisy,D.gprojection=d.posx*D.gnormx+d.posy*D.gnormy+D.lprojection,D.tp0=T.y*D.gnormx-T.x*D.gnormy,D.tp1=k.y*D.gnormx-k.x*D.gnormy,T=k,M=M.next}var S=z.gverts.next,A=U.elt;U=U.next,A.gnormx=d.axisy*A.lnormx-d.axisx*A.lnormy,A.gnormy=A.lnormx*d.axisx+A.lnormy*d.axisy,A.gprojection=d.posx*A.gnormx+d.posy*A.gnormy+A.lprojection,A.tp0=T.y*A.gnormx-T.x*A.gnormy,A.tp1=S.y*A.gnormx-S.x*A.gnormy}}if(!f.sweepFrozen){var P=t*n,V=P-f.sweepTime;if(0!=V){f.sweepTime=P;var I=V;if(f.posx+=f.velx*I,f.posy+=f.vely*I,0!=f.angvel){var N=f.sweep_angvel*V;if(f.rot+=N,N*N>1e-4)f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot);else{var F=N*N,R=1-.5*F,L=1-F*F/8,B=(R*f.axisx+N*f.axisy)*L;f.axisy=(R*f.axisy-N*f.axisx)*L,f.axisx=B}}}var G=i.s2;if(0==G.type)G.worldCOMx=f.posx+(f.axisy*G.localCOMx-f.axisx*G.localCOMy),G.worldCOMy=f.posy+(G.localCOMx*f.axisx+G.localCOMy*f.axisy);else{for(var j=G.polygon,K=j.lverts.next,W=j.gverts.next;null!=W;){var Y=W,X=K;K=K.next,Y.x=f.posx+(f.axisy*X.x-f.axisx*X.y),Y.y=f.posy+(X.x*f.axisx+X.y*f.axisy),W=W.next}var H=j.edges.head,Z=j.gverts.next,q=Z;for(Z=Z.next;null!=Z;){var $=Z,Q=H.elt;H=H.next,Q.gnormx=f.axisy*Q.lnormx-f.axisx*Q.lnormy,Q.gnormy=Q.lnormx*f.axisx+Q.lnormy*f.axisy,Q.gprojection=f.posx*Q.gnormx+f.posy*Q.gnormy+Q.lprojection,Q.tp0=q.y*Q.gnormx-q.x*Q.gnormy,Q.tp1=$.y*Q.gnormx-$.x*Q.gnormy,q=$,Z=Z.next}var J=j.gverts.next,nn=H.elt;H=H.next,nn.gnormx=f.axisy*nn.lnormx-f.axisx*nn.lnormy,nn.gnormy=nn.lnormx*f.axisx+nn.lnormy*f.axisy,nn.gprojection=f.posx*nn.gnormx+f.posy*nn.gnormy+nn.lprojection,nn.tp0=q.y*nn.gnormx-q.x*nn.gnormy,nn.tp1=J.y*nn.gnormx-J.x*nn.gnormy}}i.arbiter;var en=this.narrowPhase(i.s1,i.s2,!0,i.arbiter,!0);if(null==en)null!=i.arbiter&&null!=i.arbiter.pair&&(i.arbiter.pair.arb=null,i.arbiter.pair=null);else if(!this.presteparb(en,n,!0)&&en.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL&&en.active&&0!=(1&en.immState)){var tn=en.colarb,rn=tn.nx*tn.c1.jnAcc-tn.ny*tn.c1.jtAcc,ln=tn.ny*tn.c1.jnAcc+tn.nx*tn.c1.jtAcc,sn=tn.b1.imass;tn.b1.velx-=rn*sn,tn.b1.vely-=ln*sn,tn.b1.angvel-=tn.b1.iinertia*(ln*tn.c1.r1x-rn*tn.c1.r1y);var an=tn.b2.imass;if(tn.b2.velx+=rn*an,tn.b2.vely+=ln*an,tn.b2.angvel+=tn.b2.iinertia*(ln*tn.c1.r2x-rn*tn.c1.r2y),tn.hc2){var on=tn.nx*tn.c2.jnAcc-tn.ny*tn.c2.jtAcc,pn=tn.ny*tn.c2.jnAcc+tn.nx*tn.c2.jtAcc,hn=tn.b1.imass;tn.b1.velx-=on*hn,tn.b1.vely-=pn*hn,tn.b1.angvel-=tn.b1.iinertia*(pn*tn.c2.r1x-on*tn.c2.r1y);var un=tn.b2.imass;tn.b2.velx+=on*un,tn.b2.vely+=pn*un,tn.b2.angvel+=tn.b2.iinertia*(pn*tn.c2.r2x-on*tn.c2.r2y)}tn.b2.angvel+=tn.jrAcc*tn.b2.iinertia,tn.b1.angvel-=tn.jrAcc*tn.b1.iinertia;var _n=en.colarb,cn=_n.k1x+_n.b2.velx-_n.c1.r2y*_n.b2.angvel-(_n.b1.velx-_n.c1.r1y*_n.b1.angvel),dn=_n.k1y+_n.b2.vely+_n.c1.r2x*_n.b2.angvel-(_n.b1.vely+_n.c1.r1x*_n.b1.angvel),xn=(dn*_n.nx-cn*_n.ny+_n.surfacex)*_n.c1.tMass,bn=_n.c1.friction*_n.c1.jnAcc,yn=_n.c1.jtAcc,vn=yn-xn;vn>bn?vn=bn:vn<-bn&&(vn=-bn),xn=vn-yn,_n.c1.jtAcc=vn;var mn=-_n.ny*xn,gn=_n.nx*xn;if(_n.b2.velx+=mn*_n.b2.imass,_n.b2.vely+=gn*_n.b2.imass,_n.b1.velx-=mn*_n.b1.imass,_n.b1.vely-=gn*_n.b1.imass,_n.b2.angvel+=_n.rt1b*xn*_n.b2.iinertia,_n.b1.angvel-=_n.rt1a*xn*_n.b1.iinertia,_n.hc2){var zn=_n.k2x+_n.b2.velx-_n.c2.r2y*_n.b2.angvel-(_n.b1.velx-_n.c2.r1y*_n.b1.angvel),wn=_n.k2y+_n.b2.vely+_n.c2.r2x*_n.b2.angvel-(_n.b1.vely+_n.c2.r1x*_n.b1.angvel);xn=(wn*_n.nx-zn*_n.ny+_n.surfacex)*_n.c2.tMass,bn=_n.c2.friction*_n.c2.jnAcc,(vn=(yn=_n.c2.jtAcc)-xn)>bn?vn=bn:vn<-bn&&(vn=-bn),xn=vn-yn,_n.c2.jtAcc=vn,mn=-_n.ny*xn,gn=_n.nx*xn,_n.b2.velx+=mn*_n.b2.imass,_n.b2.vely+=gn*_n.b2.imass,_n.b1.velx-=mn*_n.b1.imass,_n.b1.vely-=gn*_n.b1.imass,_n.b2.angvel+=_n.rt2b*xn*_n.b2.iinertia,_n.b1.angvel-=_n.rt2a*xn*_n.b1.iinertia,cn=_n.k1x+_n.b2.velx-_n.c1.r2y*_n.b2.angvel-(_n.b1.velx-_n.c1.r1y*_n.b1.angvel),dn=_n.k1y+_n.b2.vely+_n.c1.r2x*_n.b2.angvel-(_n.b1.vely+_n.c1.r1x*_n.b1.angvel),zn=_n.k2x+_n.b2.velx-_n.c2.r2y*_n.b2.angvel-(_n.b1.velx-_n.c2.r1y*_n.b1.angvel),wn=_n.k2y+_n.b2.vely+_n.c2.r2x*_n.b2.angvel-(_n.b1.vely+_n.c2.r1x*_n.b1.angvel);var On=_n.c1.jnAcc,Cn=_n.c2.jnAcc,En=cn*_n.nx+dn*_n.ny+_n.surfacey+_n.c1.bounce-(_n.Ka*On+_n.Kb*Cn),Un=zn*_n.nx+wn*_n.ny+_n.surfacey+_n.c2.bounce-(_n.Kb*On+_n.Kc*Cn),Mn=-(_n.kMassa*En+_n.kMassb*Un),Tn=-(_n.kMassb*En+_n.kMassc*Un);Mn>=0&&Tn>=0?(En=Mn-On,Un=Tn-Cn,_n.c1.jnAcc=Mn,_n.c2.jnAcc=Tn):(Mn=-_n.c1.nMass*En)>=0&&_n.Kb*Mn+Un>=0?(En=Mn-On,Un=-Cn,_n.c1.jnAcc=Mn,_n.c2.jnAcc=0):(Tn=-_n.c2.nMass*Un)>=0&&_n.Kb*Tn+En>=0?(En=-On,Un=Tn-Cn,_n.c1.jnAcc=0,_n.c2.jnAcc=Tn):En>=0&&Un>=0?(En=-On,Un=-Cn,_n.c1.jnAcc=_n.c2.jnAcc=0):(En=0,Un=0),xn=En+Un,mn=_n.nx*xn,gn=_n.ny*xn,_n.b2.velx+=mn*_n.b2.imass,_n.b2.vely+=gn*_n.b2.imass,_n.b1.velx-=mn*_n.b1.imass,_n.b1.vely-=gn*_n.b1.imass,_n.b2.angvel+=(_n.rn1b*En+_n.rn2b*Un)*_n.b2.iinertia,_n.b1.angvel-=(_n.rn1a*En+_n.rn2a*Un)*_n.b1.iinertia}else{if(0!=_n.radius)xn=(_n.b2.angvel-_n.b1.angvel)*_n.rMass,bn=_n.rfric*_n.c1.jnAcc,yn=_n.jrAcc,_n.jrAcc-=xn,_n.jrAcc>bn?_n.jrAcc=bn:_n.jrAcc<-bn&&(_n.jrAcc=-bn),xn=_n.jrAcc-yn,_n.b2.angvel+=xn*_n.b2.iinertia,_n.b1.angvel-=xn*_n.b1.iinertia;cn=_n.k1x+_n.b2.velx-_n.c1.r2y*_n.b2.angvel-(_n.b1.velx-_n.c1.r1y*_n.b1.angvel),dn=_n.k1y+_n.b2.vely+_n.c1.r2x*_n.b2.angvel-(_n.b1.vely+_n.c1.r1x*_n.b1.angvel),xn=(_n.c1.bounce+(_n.nx*cn+_n.ny*dn)+_n.surfacey)*_n.c1.nMass,(vn=(yn=_n.c1.jnAcc)-xn)<0&&(vn=0),xn=vn-yn,_n.c1.jnAcc=vn,mn=_n.nx*xn,gn=_n.ny*xn,_n.b2.velx+=mn*_n.b2.imass,_n.b2.vely+=gn*_n.b2.imass,_n.b1.velx-=mn*_n.b1.imass,_n.b1.vely-=gn*_n.b1.imass,_n.b2.angvel+=_n.rn1b*xn*_n.b2.iinertia,_n.b1.angvel-=_n.rn1a*xn*_n.b1.iinertia}var kn=en.colarb,Dn=kn.k1x+kn.b2.velx-kn.c1.r2y*kn.b2.angvel-(kn.b1.velx-kn.c1.r1y*kn.b1.angvel),Sn=kn.k1y+kn.b2.vely+kn.c1.r2x*kn.b2.angvel-(kn.b1.vely+kn.c1.r1x*kn.b1.angvel),An=(Sn*kn.nx-Dn*kn.ny+kn.surfacex)*kn.c1.tMass,Pn=kn.c1.friction*kn.c1.jnAcc,Vn=kn.c1.jtAcc,In=Vn-An;In>Pn?In=Pn:In<-Pn&&(In=-Pn),An=In-Vn,kn.c1.jtAcc=In;var Nn=-kn.ny*An,Fn=kn.nx*An;if(kn.b2.velx+=Nn*kn.b2.imass,kn.b2.vely+=Fn*kn.b2.imass,kn.b1.velx-=Nn*kn.b1.imass,kn.b1.vely-=Fn*kn.b1.imass,kn.b2.angvel+=kn.rt1b*An*kn.b2.iinertia,kn.b1.angvel-=kn.rt1a*An*kn.b1.iinertia,kn.hc2){var Rn=kn.k2x+kn.b2.velx-kn.c2.r2y*kn.b2.angvel-(kn.b1.velx-kn.c2.r1y*kn.b1.angvel),Ln=kn.k2y+kn.b2.vely+kn.c2.r2x*kn.b2.angvel-(kn.b1.vely+kn.c2.r1x*kn.b1.angvel);An=(Ln*kn.nx-Rn*kn.ny+kn.surfacex)*kn.c2.tMass,Pn=kn.c2.friction*kn.c2.jnAcc,(In=(Vn=kn.c2.jtAcc)-An)>Pn?In=Pn:In<-Pn&&(In=-Pn),An=In-Vn,kn.c2.jtAcc=In,Nn=-kn.ny*An,Fn=kn.nx*An,kn.b2.velx+=Nn*kn.b2.imass,kn.b2.vely+=Fn*kn.b2.imass,kn.b1.velx-=Nn*kn.b1.imass,kn.b1.vely-=Fn*kn.b1.imass,kn.b2.angvel+=kn.rt2b*An*kn.b2.iinertia,kn.b1.angvel-=kn.rt2a*An*kn.b1.iinertia,Dn=kn.k1x+kn.b2.velx-kn.c1.r2y*kn.b2.angvel-(kn.b1.velx-kn.c1.r1y*kn.b1.angvel),Sn=kn.k1y+kn.b2.vely+kn.c1.r2x*kn.b2.angvel-(kn.b1.vely+kn.c1.r1x*kn.b1.angvel),Rn=kn.k2x+kn.b2.velx-kn.c2.r2y*kn.b2.angvel-(kn.b1.velx-kn.c2.r1y*kn.b1.angvel),Ln=kn.k2y+kn.b2.vely+kn.c2.r2x*kn.b2.angvel-(kn.b1.vely+kn.c2.r1x*kn.b1.angvel);var Bn=kn.c1.jnAcc,Gn=kn.c2.jnAcc,jn=Dn*kn.nx+Sn*kn.ny+kn.surfacey+kn.c1.bounce-(kn.Ka*Bn+kn.Kb*Gn),Kn=Rn*kn.nx+Ln*kn.ny+kn.surfacey+kn.c2.bounce-(kn.Kb*Bn+kn.Kc*Gn),Wn=-(kn.kMassa*jn+kn.kMassb*Kn),Yn=-(kn.kMassb*jn+kn.kMassc*Kn);Wn>=0&&Yn>=0?(jn=Wn-Bn,Kn=Yn-Gn,kn.c1.jnAcc=Wn,kn.c2.jnAcc=Yn):(Wn=-kn.c1.nMass*jn)>=0&&kn.Kb*Wn+Kn>=0?(jn=Wn-Bn,Kn=-Gn,kn.c1.jnAcc=Wn,kn.c2.jnAcc=0):(Yn=-kn.c2.nMass*Kn)>=0&&kn.Kb*Yn+jn>=0?(jn=-Bn,Kn=Yn-Gn,kn.c1.jnAcc=0,kn.c2.jnAcc=Yn):jn>=0&&Kn>=0?(jn=-Bn,Kn=-Gn,kn.c1.jnAcc=kn.c2.jnAcc=0):(jn=0,Kn=0),An=jn+Kn,Nn=kn.nx*An,Fn=kn.ny*An,kn.b2.velx+=Nn*kn.b2.imass,kn.b2.vely+=Fn*kn.b2.imass,kn.b1.velx-=Nn*kn.b1.imass,kn.b1.vely-=Fn*kn.b1.imass,kn.b2.angvel+=(kn.rn1b*jn+kn.rn2b*Kn)*kn.b2.iinertia,kn.b1.angvel-=(kn.rn1a*jn+kn.rn2a*Kn)*kn.b1.iinertia}else{if(0!=kn.radius)An=(kn.b2.angvel-kn.b1.angvel)*kn.rMass,Pn=kn.rfric*kn.c1.jnAcc,Vn=kn.jrAcc,kn.jrAcc-=An,kn.jrAcc>Pn?kn.jrAcc=Pn:kn.jrAcc<-Pn&&(kn.jrAcc=-Pn),An=kn.jrAcc-Vn,kn.b2.angvel+=An*kn.b2.iinertia,kn.b1.angvel-=An*kn.b1.iinertia;Dn=kn.k1x+kn.b2.velx-kn.c1.r2y*kn.b2.angvel-(kn.b1.velx-kn.c1.r1y*kn.b1.angvel),Sn=kn.k1y+kn.b2.vely+kn.c1.r2x*kn.b2.angvel-(kn.b1.vely+kn.c1.r1x*kn.b1.angvel),An=(kn.c1.bounce+(kn.nx*Dn+kn.ny*Sn)+kn.surfacey)*kn.c1.nMass,(In=(Vn=kn.c1.jnAcc)-An)<0&&(In=0),An=In-Vn,kn.c1.jnAcc=In,Nn=kn.nx*An,Fn=kn.ny*An,kn.b2.velx+=Nn*kn.b2.imass,kn.b2.vely+=Fn*kn.b2.imass,kn.b1.velx-=Nn*kn.b1.imass,kn.b1.vely-=Fn*kn.b1.imass,kn.b2.angvel+=kn.rn1b*An*kn.b2.iinertia,kn.b1.angvel-=kn.rn1a*An*kn.b1.iinertia}var Xn=en.colarb,Hn=Xn.k1x+Xn.b2.velx-Xn.c1.r2y*Xn.b2.angvel-(Xn.b1.velx-Xn.c1.r1y*Xn.b1.angvel),Zn=Xn.k1y+Xn.b2.vely+Xn.c1.r2x*Xn.b2.angvel-(Xn.b1.vely+Xn.c1.r1x*Xn.b1.angvel),qn=(Zn*Xn.nx-Hn*Xn.ny+Xn.surfacex)*Xn.c1.tMass,$n=Xn.c1.friction*Xn.c1.jnAcc,Qn=Xn.c1.jtAcc,Jn=Qn-qn;Jn>$n?Jn=$n:Jn<-$n&&(Jn=-$n),qn=Jn-Qn,Xn.c1.jtAcc=Jn;var ne=-Xn.ny*qn,ee=Xn.nx*qn;if(Xn.b2.velx+=ne*Xn.b2.imass,Xn.b2.vely+=ee*Xn.b2.imass,Xn.b1.velx-=ne*Xn.b1.imass,Xn.b1.vely-=ee*Xn.b1.imass,Xn.b2.angvel+=Xn.rt1b*qn*Xn.b2.iinertia,Xn.b1.angvel-=Xn.rt1a*qn*Xn.b1.iinertia,Xn.hc2){var te=Xn.k2x+Xn.b2.velx-Xn.c2.r2y*Xn.b2.angvel-(Xn.b1.velx-Xn.c2.r1y*Xn.b1.angvel),ie=Xn.k2y+Xn.b2.vely+Xn.c2.r2x*Xn.b2.angvel-(Xn.b1.vely+Xn.c2.r1x*Xn.b1.angvel);qn=(ie*Xn.nx-te*Xn.ny+Xn.surfacex)*Xn.c2.tMass,$n=Xn.c2.friction*Xn.c2.jnAcc,(Jn=(Qn=Xn.c2.jtAcc)-qn)>$n?Jn=$n:Jn<-$n&&(Jn=-$n),qn=Jn-Qn,Xn.c2.jtAcc=Jn,ne=-Xn.ny*qn,ee=Xn.nx*qn,Xn.b2.velx+=ne*Xn.b2.imass,Xn.b2.vely+=ee*Xn.b2.imass,Xn.b1.velx-=ne*Xn.b1.imass,Xn.b1.vely-=ee*Xn.b1.imass,Xn.b2.angvel+=Xn.rt2b*qn*Xn.b2.iinertia,Xn.b1.angvel-=Xn.rt2a*qn*Xn.b1.iinertia,Hn=Xn.k1x+Xn.b2.velx-Xn.c1.r2y*Xn.b2.angvel-(Xn.b1.velx-Xn.c1.r1y*Xn.b1.angvel),Zn=Xn.k1y+Xn.b2.vely+Xn.c1.r2x*Xn.b2.angvel-(Xn.b1.vely+Xn.c1.r1x*Xn.b1.angvel),te=Xn.k2x+Xn.b2.velx-Xn.c2.r2y*Xn.b2.angvel-(Xn.b1.velx-Xn.c2.r1y*Xn.b1.angvel),ie=Xn.k2y+Xn.b2.vely+Xn.c2.r2x*Xn.b2.angvel-(Xn.b1.vely+Xn.c2.r1x*Xn.b1.angvel);var re=Xn.c1.jnAcc,le=Xn.c2.jnAcc,se=Hn*Xn.nx+Zn*Xn.ny+Xn.surfacey+Xn.c1.bounce-(Xn.Ka*re+Xn.Kb*le),ae=te*Xn.nx+ie*Xn.ny+Xn.surfacey+Xn.c2.bounce-(Xn.Kb*re+Xn.Kc*le),oe=-(Xn.kMassa*se+Xn.kMassb*ae),pe=-(Xn.kMassb*se+Xn.kMassc*ae);oe>=0&&pe>=0?(se=oe-re,ae=pe-le,Xn.c1.jnAcc=oe,Xn.c2.jnAcc=pe):(oe=-Xn.c1.nMass*se)>=0&&Xn.Kb*oe+ae>=0?(se=oe-re,ae=-le,Xn.c1.jnAcc=oe,Xn.c2.jnAcc=0):(pe=-Xn.c2.nMass*ae)>=0&&Xn.Kb*pe+se>=0?(se=-re,ae=pe-le,Xn.c1.jnAcc=0,Xn.c2.jnAcc=pe):se>=0&&ae>=0?(se=-re,ae=-le,Xn.c1.jnAcc=Xn.c2.jnAcc=0):(se=0,ae=0),qn=se+ae,ne=Xn.nx*qn,ee=Xn.ny*qn,Xn.b2.velx+=ne*Xn.b2.imass,Xn.b2.vely+=ee*Xn.b2.imass,Xn.b1.velx-=ne*Xn.b1.imass,Xn.b1.vely-=ee*Xn.b1.imass,Xn.b2.angvel+=(Xn.rn1b*se+Xn.rn2b*ae)*Xn.b2.iinertia,Xn.b1.angvel-=(Xn.rn1a*se+Xn.rn2a*ae)*Xn.b1.iinertia}else{if(0!=Xn.radius)qn=(Xn.b2.angvel-Xn.b1.angvel)*Xn.rMass,$n=Xn.rfric*Xn.c1.jnAcc,Qn=Xn.jrAcc,Xn.jrAcc-=qn,Xn.jrAcc>$n?Xn.jrAcc=$n:Xn.jrAcc<-$n&&(Xn.jrAcc=-$n),qn=Xn.jrAcc-Qn,Xn.b2.angvel+=qn*Xn.b2.iinertia,Xn.b1.angvel-=qn*Xn.b1.iinertia;Hn=Xn.k1x+Xn.b2.velx-Xn.c1.r2y*Xn.b2.angvel-(Xn.b1.velx-Xn.c1.r1y*Xn.b1.angvel),Zn=Xn.k1y+Xn.b2.vely+Xn.c1.r2x*Xn.b2.angvel-(Xn.b1.vely+Xn.c1.r1x*Xn.b1.angvel),qn=(Xn.c1.bounce+(Xn.nx*Hn+Xn.ny*Zn)+Xn.surfacey)*Xn.c1.nMass,(Jn=(Qn=Xn.c1.jnAcc)-qn)<0&&(Jn=0),qn=Jn-Qn,Xn.c1.jnAcc=Jn,ne=Xn.nx*qn,ee=Xn.ny*qn,Xn.b2.velx+=ne*Xn.b2.imass,Xn.b2.vely+=ee*Xn.b2.imass,Xn.b1.velx-=ne*Xn.b1.imass,Xn.b1.vely-=ee*Xn.b1.imass,Xn.b2.angvel+=Xn.rn1b*qn*Xn.b2.iinertia,Xn.b1.angvel-=Xn.rn1a*qn*Xn.b1.iinertia}var he=en.colarb,ue=he.k1x+he.b2.velx-he.c1.r2y*he.b2.angvel-(he.b1.velx-he.c1.r1y*he.b1.angvel),_e=he.k1y+he.b2.vely+he.c1.r2x*he.b2.angvel-(he.b1.vely+he.c1.r1x*he.b1.angvel),ce=(_e*he.nx-ue*he.ny+he.surfacex)*he.c1.tMass,de=he.c1.friction*he.c1.jnAcc,fe=he.c1.jtAcc,xe=fe-ce;xe>de?xe=de:xe<-de&&(xe=-de),ce=xe-fe,he.c1.jtAcc=xe;var be=-he.ny*ce,ye=he.nx*ce;if(he.b2.velx+=be*he.b2.imass,he.b2.vely+=ye*he.b2.imass,he.b1.velx-=be*he.b1.imass,he.b1.vely-=ye*he.b1.imass,he.b2.angvel+=he.rt1b*ce*he.b2.iinertia,he.b1.angvel-=he.rt1a*ce*he.b1.iinertia,he.hc2){var ve=he.k2x+he.b2.velx-he.c2.r2y*he.b2.angvel-(he.b1.velx-he.c2.r1y*he.b1.angvel),me=he.k2y+he.b2.vely+he.c2.r2x*he.b2.angvel-(he.b1.vely+he.c2.r1x*he.b1.angvel);ce=(me*he.nx-ve*he.ny+he.surfacex)*he.c2.tMass,de=he.c2.friction*he.c2.jnAcc,(xe=(fe=he.c2.jtAcc)-ce)>de?xe=de:xe<-de&&(xe=-de),ce=xe-fe,he.c2.jtAcc=xe,be=-he.ny*ce,ye=he.nx*ce,he.b2.velx+=be*he.b2.imass,he.b2.vely+=ye*he.b2.imass,he.b1.velx-=be*he.b1.imass,he.b1.vely-=ye*he.b1.imass,he.b2.angvel+=he.rt2b*ce*he.b2.iinertia,he.b1.angvel-=he.rt2a*ce*he.b1.iinertia,ue=he.k1x+he.b2.velx-he.c1.r2y*he.b2.angvel-(he.b1.velx-he.c1.r1y*he.b1.angvel),_e=he.k1y+he.b2.vely+he.c1.r2x*he.b2.angvel-(he.b1.vely+he.c1.r1x*he.b1.angvel),ve=he.k2x+he.b2.velx-he.c2.r2y*he.b2.angvel-(he.b1.velx-he.c2.r1y*he.b1.angvel),me=he.k2y+he.b2.vely+he.c2.r2x*he.b2.angvel-(he.b1.vely+he.c2.r1x*he.b1.angvel);var ge=he.c1.jnAcc,ze=he.c2.jnAcc,we=ue*he.nx+_e*he.ny+he.surfacey+he.c1.bounce-(he.Ka*ge+he.Kb*ze),Oe=ve*he.nx+me*he.ny+he.surfacey+he.c2.bounce-(he.Kb*ge+he.Kc*ze),Ce=-(he.kMassa*we+he.kMassb*Oe),Ee=-(he.kMassb*we+he.kMassc*Oe);Ce>=0&&Ee>=0?(we=Ce-ge,Oe=Ee-ze,he.c1.jnAcc=Ce,he.c2.jnAcc=Ee):(Ce=-he.c1.nMass*we)>=0&&he.Kb*Ce+Oe>=0?(we=Ce-ge,Oe=-ze,he.c1.jnAcc=Ce,he.c2.jnAcc=0):(Ee=-he.c2.nMass*Oe)>=0&&he.Kb*Ee+we>=0?(we=-ge,Oe=Ee-ze,he.c1.jnAcc=0,he.c2.jnAcc=Ee):we>=0&&Oe>=0?(we=-ge,Oe=-ze,he.c1.jnAcc=he.c2.jnAcc=0):(we=0,Oe=0),ce=we+Oe,be=he.nx*ce,ye=he.ny*ce,he.b2.velx+=be*he.b2.imass,he.b2.vely+=ye*he.b2.imass,he.b1.velx-=be*he.b1.imass,he.b1.vely-=ye*he.b1.imass,he.b2.angvel+=(he.rn1b*we+he.rn2b*Oe)*he.b2.iinertia,he.b1.angvel-=(he.rn1a*we+he.rn2a*Oe)*he.b1.iinertia}else{if(0!=he.radius)ce=(he.b2.angvel-he.b1.angvel)*he.rMass,de=he.rfric*he.c1.jnAcc,fe=he.jrAcc,he.jrAcc-=ce,he.jrAcc>de?he.jrAcc=de:he.jrAcc<-de&&(he.jrAcc=-de),ce=he.jrAcc-fe,he.b2.angvel+=ce*he.b2.iinertia,he.b1.angvel-=ce*he.b1.iinertia;ue=he.k1x+he.b2.velx-he.c1.r2y*he.b2.angvel-(he.b1.velx-he.c1.r1y*he.b1.angvel),_e=he.k1y+he.b2.vely+he.c1.r2x*he.b2.angvel-(he.b1.vely+he.c1.r1x*he.b1.angvel),ce=(he.c1.bounce+(he.nx*ue+he.ny*_e)+he.surfacey)*he.c1.nMass,(xe=(fe=he.c1.jnAcc)-ce)<0&&(xe=0),ce=xe-fe,he.c1.jnAcc=xe,be=he.nx*ce,ye=he.ny*ce,he.b2.velx+=be*he.b2.imass,he.b2.vely+=ye*he.b2.imass,he.b1.velx-=be*he.b1.imass,he.b1.vely-=ye*he.b1.imass,he.b2.angvel+=he.rn1b*ce*he.b2.iinertia,he.b1.angvel-=he.rn1a*ce*he.b1.iinertia}d.sweep_angvel=d.angvel%e,f.sweep_angvel=f.angvel%e}if(null!=en&&en.active&&0!=(1&en.immState)&&en.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){if(!d.sweepFrozen&&3!=d.type)if(d.sweepFrozen=!0,i.failed)d.angvel=d.sweep_angvel=0;else if(i.slipped){var Ue=d;Ue.sweep_angvel*=nape_Config.angularCCDSlipScale,d.angvel=Ue.sweep_angvel}else d.angvel=d.sweep_angvel;if(!f.sweepFrozen&&3!=f.type)if(f.sweepFrozen=!0,i.failed)f.angvel=f.sweep_angvel=0;else if(i.slipped){var Me=f;Me.sweep_angvel*=nape_Config.angularCCDSlipScale,f.angvel=Me.sweep_angvel}else f.angvel=f.sweep_angvel}var Te=i;Te.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=Te}for(;null!=this.toiEvents.head;){var ke,De;(De=ke=this.toiEvents.pop_unsafe()).next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=De}for(o=this.kinematics.head;null!=o;){if(0!=(Ae=n-(Se=o.elt).sweepTime)){Se.sweepTime=n;b=Ae;if(Se.posx+=Se.velx*b,Se.posy+=Se.vely*b,0!=Se.angvel){y=Se.sweep_angvel*Ae;if(Se.rot+=y,y*y>1e-4)Se.axisx=Math.sin(Se.rot),Se.axisy=Math.cos(Se.rot);else{v=1-(Pe=y*y)*Pe/8,m=((Ve=1-.5*Pe)*Se.axisx+y*Se.axisy)*v;Se.axisy=(Ve*Se.axisy-y*Se.axisx)*v,Se.axisx=m}}}Se.sweepTime=0,o=o.next}for(o=this.live.head;null!=o;){var Se,Ae;if(!(Se=o.elt).sweepFrozen)if(0!=(Ae=n-Se.sweepTime)){Se.sweepTime=n;b=Ae;if(Se.posx+=Se.velx*b,Se.posy+=Se.vely*b,0!=Se.angvel){y=Se.sweep_angvel*Ae;if(Se.rot+=y,y*y>1e-4)Se.axisx=Math.sin(Se.rot),Se.axisy=Math.cos(Se.rot);else{var Pe,Ve;v=1-(Pe=y*y)*Pe/8,m=((Ve=1-.5*Pe)*Se.axisx+y*Se.axisy)*v;Se.axisy=(Ve*Se.axisy-y*Se.axisx)*v,Se.axisx=m}}}Se.sweepTime=0,o=o.next}},continuousEvent:function(n,e,t,i,r){if(n.body.sweepFrozen&&e.body.sweepFrozen)return i;if(n.body.disableCCD||e.body.disableCCD)return i;if(null==i||null!=i.colarb){var l,s=n.body,a=e.body;l=!1;for(var o,p=s.constraints.head;null!=p;){var h=p.elt;if(h.ignore&&h.pair_exists(s.id,a.id)){l=!0;break}p=p.next}if(l)y=!1;else{for(var u=n;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var _,c=null==u?null:u.group;if(null==c)_=!1;else{for(u=e;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var d=null==u?null:u.group;if(null==d)_=!1;else{for(var f=!1;null!=c&&null!=d;){if(c==d){f=c.ignore;break}c.depth<d.depth?d=d.group:c=c.group}_=f}}y=!_}if(y){if(n.sensorEnabled||e.sensorEnabled){var x=n.filter,b=e.filter;y=0!=(x.sensorMask&b.sensorGroup)&&0!=(b.sensorMask&x.sensorGroup)}else y=!1;if(y)o=2;else{var y;if(n.fluidEnabled||e.fluidEnabled){x=n.filter,b=e.filter;y=0!=(x.fluidMask&b.fluidGroup)&&0!=(b.fluidMask&x.fluidGroup)}else y=!1;if(!y||0==s.imass&&0==a.imass&&0==s.iinertia&&0==a.iinertia){x=n.filter,b=e.filter;o=0==(x.collisionMask&b.collisionGroup)||0==(b.collisionMask&x.collisionGroup)||0==s.imass&&0==a.imass&&0==s.iinertia&&0==a.iinertia?-1:1}else o=0}}else o=-1;g=o<=0}else g=!0;if(g)return i;s=n.body,a=e.body;if(t||s.bullet||a.bullet){var v;null==zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool?v=new zpp_$nape_geom_ZPP_$ToiEvent:(v=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=v.next,v.next=null),v.failed=!1,v.s1=v.s2=null,v.arbiter=null;var m=3==s.type||3==a.type;if(t&&!m)2!=n.body.type?(v.s2=n,v.s1=e):(v.s1=n,v.s2=e),v.kinematic=!1,zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(v,this.pre_dt,0,nape_Config.collisionSlopCCD);else if(v.s1=n,v.s2=e,v.kinematic=m,v.s1.body.sweepFrozen||v.s2.body.sweepFrozen){if(v.s1.body.sweepFrozen){var g=v.s1;v.s1=v.s2,v.s2=g,v.frozen1=!1,v.frozen2=!0}zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(v,this.pre_dt,0,nape_Config.collisionSlopCCD)}else zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep(v,this.pre_dt,0,nape_Config.collisionSlopCCD);if(t&&v.toi<0||v.failed){var z=v;z.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool,zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=z}else this.toiEvents.add(v),v.frozen1=v.s1.body.sweepFrozen,v.frozen2=v.s2.body.sweepFrozen,v.arbiter=null!=i?i.colarb:null}return i},bodyCbWake:function(n){if(2==n.type&&null!=n.cbSet)if(this.midstep)for(var e=n.cbSet.bodylisteners.head;null!=e;){var t=e.elt;if(2==t.event){var i=this.push_callback(t);i.event=2,i.body=n,e=e.next}else e=e.next}else n.component.woken=!0},bodyCbSleep:function(n){if(2==n.type&&null!=n.cbSet)for(var e=n.cbSet.bodylisteners.head;null!=e;){var t=e.elt;if(3==t.event){var i=this.push_callback(t);i.event=3,i.body=n,e=e.next}else e=e.next}},constraintCbWake:function(n){if(null!=n.cbSet)if(this.midstep)for(var e=n.cbSet.conlisteners.head;null!=e;){var t=e.elt;if(2==t.event){var i=this.push_callback(t);i.event=2,i.constraint=n,e=e.next}else e=e.next}else n.component.woken=!0},constraintCbSleep:function(n){if(null!=n.cbSet)for(var e=n.cbSet.conlisteners.head;null!=e;){var t=e.elt;if(3==t.event){var i=this.push_callback(t);i.event=3,i.constraint=n,e=e.next}else e=e.next}},constraintCbBreak:function(n){if(null!=n.cbSet)for(var e=n.cbSet.conlisteners.head;null!=e;){var t=e.elt;if(4==t.event){var i=this.push_callback(t);i.event=4,i.constraint=n,e=e.next}else e=e.next}},nullListenerType:function(n,e){for(var t=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,i=n.interactors.head;null!=i;){var r=i.elt;t.add(r),i=i.next}if(n!=e)for(i=e.interactors.head;null!=i;){r=i.elt;t.add(r),i=i.next}for(;null!=t.head;){var l=t.pop_unsafe();if(null!=l.icompound){var s=l.icompound;for(i=s.bodies.head;null!=i;){r=i.elt;t.add(r),i=i.next}for(var a=s.compounds.head;null!=a;){var o=a.elt;t.add(o),a=a.next}}else for(var p=null!=l.ibody?l.ibody:l.ishape.body,h=null!=l.ishape?l.ishape:null,u=p.arbiters.head;null!=u;){var _=u.elt;if(0!=_.present)if(null==h||_.ws1==h||_.ws2==h){this.MRCA_chains(_.ws1,_.ws2);for(var c=this.mrca1.head;null!=c;){var d=c.elt;if(d.cbSet==n||d.cbSet==e){for(var f=this.mrca2.head;null!=f;){var x=f.elt;if(d.cbSet==n&&x.cbSet!=e||d.cbSet==e&&x.cbSet!=n)f=f.next;else{var b=zpp_$nape_phys_ZPP_$Interactor.get(d,x);if(null!=b){for(;null!=b.arbiters.head;){b.arbiters.pop_unsafe().present--}this.remove_callbackset(b)}f=f.next}}c=c.next}else c=c.next}u=u.next}else u=u.next;else u=u.next}}},nullInteractorType:function(n,e){if(null==e&&(e=n),null!=n.icompound){for(var t=(r=n.icompound).bodies.head;null!=t;){var i=t.elt;this.nullInteractorType(i,e),t=t.next}for(t=r.compounds.head;null!=t;){var r=t.elt;this.nullInteractorType(r,e),t=t.next}}else{var l=null!=n.ibody?n.ibody:n.ishape.body,s=null!=n.ishape?n.ishape:null;for(t=l.arbiters.head;null!=t;){var a=t.elt;if(0!=a.present)if(null==s||a.ws1==s||a.ws2==s){this.MRCA_chains(a.ws1,a.ws2);for(var o=this.mrca1.head;null!=o;){for(var p=o.elt,h=this.mrca2.head;null!=h;){var u=h.elt;if(p==e||u==e){var _=zpp_$nape_phys_ZPP_$Interactor.get(p,u);null!=_&&(a.present--,_.remove_arb(a),null==_.arbiters.head&&this.remove_callbackset(_)),h=h.next}else h=h.next}o=o.next}t=t.next}else t=t.next;else t=t.next}}},freshListenerType:function(n,e){for(var t=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,i=n.interactors.head;null!=i;){var r=i.elt;t.add(r),i=i.next}if(n!=e)for(i=e.interactors.head;null!=i;){r=i.elt;t.add(r),i=i.next}for(;null!=t.head;){var l=t.pop_unsafe();if(null!=l.icompound){var s=l.icompound;for(i=s.bodies.head;null!=i;){r=i.elt;t.add(r),i=i.next}for(var a=s.compounds.head;null!=a;){var o=a.elt;t.add(o),a=a.next}}else for(var p=null!=l.ibody?l.ibody:l.ishape.body,h=null!=l.ishape?l.ishape:null,u=p.arbiters.head;null!=u;){var _=u.elt;if(_.presentable)if(null==h||_.ws1==h||_.ws2==h){this.MRCA_chains(_.ws1,_.ws2);for(var c=this.mrca1.head;null!=c;){var d=c.elt;if(d.cbSet==n||d.cbSet==e){for(var f=this.mrca2.head;null!=f;){var x=f.elt;if(d.cbSet==n&&x.cbSet!=e||d.cbSet==e&&x.cbSet!=n)f=f.next;else{var b,y,v=zpp_$nape_phys_ZPP_$Interactor.get(d,x);null==v&&(v=zpp_$nape_space_ZPP_$CallbackSet.get(d,x),this.add_callbackset(v)),y=!1;for(var m=v.arbiters.head;null!=m;){if(m.elt==_){y=!0;break}m=m.next}if(y)b=!1;else{var g,z=v.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?g=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(g=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=g.next,g.next=null),g.elt=_;var w=g;w.next=z.head,z.head=w,z.modified=!0,z.length++,b=!0}b&&_.present++,f=f.next}}c=c.next}else c=c.next}u=u.next}else u=u.next;else u=u.next}}},freshInteractorType:function(n,e){if(null==e&&(e=n),null!=n.icompound){for(var t=(r=n.icompound).bodies.head;null!=t;){var i=t.elt;this.freshInteractorType(i,e),t=t.next}for(t=r.compounds.head;null!=t;){var r=t.elt;this.freshInteractorType(r,e),t=t.next}}else{var l=null!=n.ibody?n.ibody:n.ishape.body,s=null!=n.ishape?n.ishape:null;for(t=l.arbiters.head;null!=t;){var a=t.elt;if(a.presentable)if(null==s||a.ws1==s||a.ws2==s){this.MRCA_chains(a.ws1,a.ws2);for(var o=this.mrca1.head;null!=o;){for(var p=o.elt,h=this.mrca2.head;null!=h;){var u=h.elt;if(p==e||u==e){var _=p.cbSet,c=u.cbSet;_.validate(),c.validate();_.manager;for(var d,f=null,x=(_.cbpairs.length<c.cbpairs.length?_.cbpairs:c.cbpairs).head;null!=x;){var b=x.elt;if(b.a==_&&b.b==c||b.a==c&&b.b==_){f=b;break}x=x.next}if(null==f)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?d=new zpp_$nape_callbacks_ZPP_$CbSetPair:(d=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=d.next,d.next=null),d.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(_,c)?(d.a=_,d.b=c):(d.a=c,d.b=_),f=d,_.cbpairs.add(f),c!=_&&c.cbpairs.add(f);if(f.zip_listeners&&(f.zip_listeners=!1,f.__validate()),null!=f.listeners.head){var y,v,m=zpp_$nape_phys_ZPP_$Interactor.get(p,u);null==m&&(m=zpp_$nape_space_ZPP_$CallbackSet.get(p,u),this.add_callbackset(m)),v=!1;for(var g=m.arbiters.head;null!=g;){if(g.elt==a){v=!0;break}g=g.next}if(v)y=!1;else{var z,w=m.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?z=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(z=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=z.next,z.next=null),z.elt=a;var O=z;O.next=w.head,w.head=O,w.modified=!0,w.length++,y=!0}y&&a.present++}h=h.next}else h=h.next}o=o.next}t=t.next}else t=t.next;else t=t.next}}},wakeCompound:function(n){for(var e=n.bodies.head;null!=e;){var t=e.elt;t.world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,!1)),e=e.next}for(e=n.constraints.head;null!=e;){var i=e.elt;this.wake_constraint(i),e=e.next}for(e=n.compounds.head;null!=e;){i=e.elt;this.wakeCompound(i),e=e.next}},wakeIsland:function(n){for(;null!=n.comps.head;){var e=n.comps.pop_unsafe();if(e.waket=this.stamp+(this.midstep?0:1),e.isBody){var t=e.body;this.live.add(t);for(var i=t.arbiters.head;null!=i;){var r=i.elt;if(r.sleeping)if(r.sleeping=!1,r.up_stamp+=this.stamp-r.sleep_stamp,r.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){var l=r.colarb;if(l.stat){var s,a=this.c_arbiters_true;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?s=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(s=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=s.next,s.next=null),s.elt=l;var o=s;o.next=a.head,a.head=o,a.modified=!0,a.length++}else{var p,h=this.c_arbiters_false;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(p=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=p.next,p.next=null),p.elt=l;var u=p;u.next=h.head,h.head=u,h.modified=!0,h.length++}}else if(r.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){var _,c=this.f_arbiters,d=r.fluidarb;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?_=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(_=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=_.next,_.next=null),_.elt=d;var f=_;f.next=c.head,c.head=f,c.modified=!0,c.length++}else{var x,b=this.s_arbiters,y=r.sensorarb;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?x=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(x=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=x.next,x.next=null),x.elt=y;var v=x;v.next=b.head,b.head=v,b.modified=!0,b.length++}i=i.next}if(this.bodyCbWake(t),e.sleeping=!1,e.island=null,e.parent=e,e.rank=0,1!=t.type)for(var m=t.shapes.head;null!=m;){var g=m.elt;null!=g.node&&this.bphase.sync(g),m=m.next}}else{var z,w=e.constraint,O=this.live_constraints;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?z=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(z=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=z.next,z.next=null),z.elt=w;var C=z;C.next=O.head,O.head=C,O.modified=!0,O.length++,this.constraintCbWake(w),e.sleeping=!1,e.island=null,e.parent=e,e.rank=0}}(d=n).next=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=d},non_inlined_wake:function(n,e){null==e&&(e=!1);var t=n;t.world||(t.component.waket=this.stamp+(this.midstep?0:1),3==t.type&&(t.kinematicDelaySleep=!0),t.component.sleeping&&this.really_wake(t,e))},really_wake:function(n,e){if(null==e&&(e=!1),null==n.component.island){if(n.component.sleeping=!1,3==n.type||1==n.type){var t=this.staticsleep;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?a=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(a=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=a.next,a.next=null),a.elt=n,(o=a).next=t.head,t.head=o,t.modified=!0,t.length++}else{t=this.live;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?a=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(a=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=a.next,a.next=null),a.elt=n,(o=a).next=t.head,t.head=o,t.modified=!0,t.length++}for(var i=n.constraints.head;null!=i;){var r=i.elt;r.space==this&&this.wake_constraint(r),i=i.next}for(i=n.arbiters.head;null!=i;){var l=i.elt;if(l.sleeping)if(l.sleeping=!1,l.up_stamp+=this.stamp+(this.midstep?0:1)-l.sleep_stamp,l.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){var s=l.colarb;if(s.stat){var a,o;t=this.c_arbiters_true;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?a=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(a=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=a.next,a.next=null),a.elt=s,(o=a).next=t.head,t.head=o,t.modified=!0,t.length++}else{var p,h=this.c_arbiters_false;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?p=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(p=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=p.next,p.next=null),p.elt=s;var u=p;u.next=h.head,h.head=u,h.modified=!0,h.length++}}else if(l.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){var _,c=this.f_arbiters,d=l.fluidarb;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?_=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(_=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=_.next,_.next=null),_.elt=d;var f=_;f.next=c.head,c.head=f,c.modified=!0,c.length++}else{var x,b=this.s_arbiters,y=l.sensorarb;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?x=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(x=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=x.next,x.next=null),x.elt=y;var v=x;v.next=b.head,b.head=v,b.modified=!0,b.length++}if(l.type!=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR&&!l.cleared&&l.up_stamp>=this.stamp&&0!=(1&l.immState)){if(2==l.b1.type&&l.b1.component.sleeping){var m=l.b1;m.world||(m.component.waket=this.stamp+(this.midstep?0:1),3==m.type&&(m.kinematicDelaySleep=!0),m.component.sleeping&&this.really_wake(m,!1))}if(2==l.b2.type&&l.b2.component.sleeping){var g=l.b2;g.world||(g.component.waket=this.stamp+(this.midstep?0:1),3==g.type&&(g.kinematicDelaySleep=!0),g.component.sleeping&&this.really_wake(g,!1))}}i=i.next}if(e||2!=n.type||this.bodyCbWake(n),!e&&!this.bphase.is_sweep&&1!=n.type)for(i=n.shapes.head;null!=i;){var z=i.elt;null!=z.node&&this.bphase.sync(z),i=i.next}}else this.wakeIsland(n.component.island)},wake_constraint:function(n,e){if(null==e&&(e=!1),n.active){if(n.component.waket=this.stamp+(this.midstep?0:1),n.component.sleeping){if(null==n.component.island){n.component.sleeping=!1;var t,i=this.live_constraints;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(t=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=t.next,t.next=null),t.elt=n;var r=t;r.next=i.head,i.head=r,i.modified=!0,i.length++,n.wake_connected(),e||this.constraintCbWake(n)}else this.wakeIsland(n.component.island);return!0}return!1}return!1},doForests:function(n){for(var e=this.c_arbiters_false.head;null!=e;){if(!(h=e.elt).cleared&&h.up_stamp==this.stamp&&0!=(1&h.immState)&&2==h.b1.type&&2==h.b2.type){if(h.b1.component==h.b1.component.parent)u=h.b1.component;else{for(var t=h.b1.component,i=null;t!=t.parent;){var r=t.parent;t.parent=i,i=t,t=r}for(;null!=i;){var l=i.parent;i.parent=t,i=l}u=t}if(h.b2.component==h.b2.component.parent)_=h.b2.component;else{for(var s=h.b2.component,a=null;s!=s.parent;){var o=s.parent;s.parent=a,a=s,s=o}for(;null!=a;){var p=a.parent;a.parent=s,a=p}_=s}u!=_&&(u.rank<_.rank?u.parent=_:u.rank>_.rank?_.parent=u:(_.parent=u,u.rank++))}e=e.next}for(e=this.f_arbiters.head;null!=e;){var h;if(!(h=e.elt).cleared&&h.up_stamp==this.stamp&&0!=(1&h.immState)&&2==h.b1.type&&2==h.b2.type){var u,_;if(h.b1.component==h.b1.component.parent)u=h.b1.component;else{for(t=h.b1.component,i=null;t!=t.parent;){r=t.parent;t.parent=i,i=t,t=r}for(;null!=i;){l=i.parent;i.parent=t,i=l}u=t}if(h.b2.component==h.b2.component.parent)_=h.b2.component;else{for(s=h.b2.component,a=null;s!=s.parent;){o=s.parent;s.parent=a,a=s,s=o}for(;null!=a;){p=a.parent;a.parent=s,a=p}_=s}u!=_&&(u.rank<_.rank?u.parent=_:u.rank>_.rank?_.parent=u:(_.parent=u,u.rank++))}e=e.next}for(e=this.live_constraints.head;null!=e;){(C=e.elt).forest(),e=e.next}for(;null!=this.live.head;){var c=(v=this.live).head.elt;if(v.pop(),(b=(k=c).component)==b.parent)y=b;else{for(t=b,i=null;t!=t.parent;){r=t.parent;t.parent=i,i=t,t=r}for(;null!=i;){l=i.parent;i.parent=t,i=l}y=t}if(null==y.island){null==zpp_$nape_space_ZPP_$Island.zpp_pool?y.island=new zpp_$nape_space_ZPP_$Island:(y.island=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=y.island.next,y.island.next=null),y.island.waket=0;var d=this.islands;(P=y.island)._inuse=!0,(T=P).next=d.next,d.next=T,d.modified=!0,d.length++,y.island.sleep=!0}b.island=y.island;var f=b.island.comps;null==zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool?E=new zpp_$nape_util_ZNPNode_$ZPP_$Component:(E=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=E.next,E.next=null),E.elt=b,(S=E).next=f.head,f.head=S,f.modified=!0,f.length++;var x=k.atRest(n);b.island.sleep=b.island.sleep&&x,b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=this.live_constraints.head;){var b,y;c=(v=this.live_constraints).head.elt;if(v.pop(),(b=(k=c).component)==b.parent)y=b;else{for(t=b,i=null;t!=t.parent;){r=t.parent;t.parent=i,i=t,t=r}for(;null!=i;){l=i.parent;i.parent=t,i=l}y=t}b.island=y.island;d=b.island.comps;null==zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool?E=new zpp_$nape_util_ZNPNode_$ZPP_$Component:(E=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=E.next,E.next=null),E.elt=b,(T=E).next=d.head,d.head=T,d.modified=!0,d.length++,b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=this.islands.next;){var v;c=(v=this.islands).next;v.pop();var m=c;if(m.sleep)for(e=m.comps.head;null!=e;){var g=e.elt;if(g.isBody){var z=g.body;z.velx=0,z.vely=0,z.angvel=0,g.sleeping=!0;for(var w=z.shapes.head;null!=w;){var O=w.elt;this.bphase.sync(O),w=w.next}this.bodyCbSleep(z)}else{var C=g.constraint;this.constraintCbSleep(C),g.sleeping=!0}e=e.next}else{for(;null!=m.comps.head;){var E=(d=m.comps).head.elt;d.pop();var U=E;if(U.waket=m.waket,U.isBody){f=this.live;var M,T,k=U.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?M=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(M=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=M.next,M.next=null),M.elt=k,(T=M).next=f.head,f.head=T,f.modified=!0,f.length++}else{var D,S,A=this.live_constraints,P=U.constraint;null==zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool?D=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint:(D=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=D.next,D.next=null),D.elt=P,(S=D).next=A.head,A.head=S,A.modified=!0,A.length++}U.sleeping=!1,U.island=null,U.parent=U,U.rank=0}var V=m;V.next=zpp_$nape_space_ZPP_$Island.zpp_pool,zpp_$nape_space_ZPP_$Island.zpp_pool=V}}},sleepArbiters:function(){var n=null,e=(t=this.c_arbiters_true).head;for((i=null!=this.c_arbiters_false)&&null==e&&(i=!1,e=this.c_arbiters_false.head,t=this.c_arbiters_false,n=null);null!=e;){if((r=e.elt).b1.component.sleeping&&r.b2.component.sleeping)r.sleep_stamp=this.stamp,r.sleeping=!0,null==n?(s=(l=t.head).next,t.head=s,null==t.head&&(t.pushmod=!0)):(s=(l=n.next).next,n.next=s,null==s&&(t.pushmod=!0)),(a=l).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0,e=s,i&&null==e&&(i=!1,e=this.c_arbiters_false.head,t=this.c_arbiters_false,n=null);else n=e,e=e.next,i&&null==e&&(i=!1,e=this.c_arbiters_false.head,t=this.c_arbiters_false,n=null)}n=null,e=(t=this.f_arbiters).head;for((i=!1)&&null==e&&(i=!1,e=null.begin(),t=null,n=null);null!=e;){if((r=e.elt).b1.component.sleeping&&r.b2.component.sleeping)r.sleep_stamp=this.stamp,r.sleeping=!0,null==n?(s=(l=t.head).next,t.head=s,null==t.head&&(t.pushmod=!0)):(s=(l=n.next).next,n.next=s,null==s&&(t.pushmod=!0)),(a=l).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0,e=s,i&&null==e&&(i=!1,e=null.begin(),t=null,n=null);else n=e,e=e.next,i&&null==e&&(i=!1,e=null.begin(),t=null,n=null)}var t,i;n=null,e=(t=this.s_arbiters).head;for((i=!1)&&null==e&&(i=!1,e=null.begin(),t=null,n=null);null!=e;){var r,l,s,a;if((r=e.elt).b1.component.sleeping&&r.b2.component.sleeping)r.sleep_stamp=this.stamp,r.sleeping=!0,null==n?(s=(l=t.head).next,t.head=s,null==t.head&&(t.pushmod=!0)):(s=(l=n.next).next,n.next=s,null==s&&(t.pushmod=!0)),(a=l).elt=null,a.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0,e=s,i&&null==e&&(i=!1,e=null.begin(),t=null,n=null);else n=e,e=e.next,i&&null==e&&(i=!1,e=null.begin(),t=null,n=null)}},static_validation:function(n){if(null!=n.shapes.head){if(null==n.shapes.head)throw haxe_Exception.thrown("Error: Body bounds only makes sense if it contains shapes");if(n.zip_aabb){n.zip_aabb=!1,n.aabb.minx=1/0,n.aabb.miny=1/0,n.aabb.maxx=-1/0,n.aabb.maxy=-1/0;for(var e=n.shapes.head;null!=e;){if((O=e.elt).zip_aabb&&null!=O.body)if(O.zip_aabb=!1,0==O.type){if((C=O.circle).zip_worldCOM&&null!=C.body){if(C.zip_worldCOM=!1,C.zip_localCOM){if(C.zip_localCOM=!1,1==C.type){if(null==(E=C.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==E.lverts.next.next)E.localCOMx=E.lverts.next.x,E.localCOMy=E.lverts.next.y;else if(null==E.lverts.next.next.next){E.localCOMx=E.lverts.next.x,E.localCOMy=E.lverts.next.y;E.localCOMx+=1*E.lverts.next.next.x,E.localCOMy+=1*E.lverts.next.next.y;E.localCOMx*=.5,E.localCOMy*=.5}else{E.localCOMx=0,E.localCOMy=0;var t=0,i=k=E.lverts.next,r=k=k.next;for(k=k.next;null!=k;){var l=k;t+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;E.localCOMx+=(r.x+l.x)*s,E.localCOMy+=(r.y+l.y)*s,i=r,r=l,k=k.next}var a=k=E.lverts.next;t+=r.x*(a.y-i.y);var o=a.y*r.x-a.x*r.y;E.localCOMx+=(r.x+a.x)*o,E.localCOMy+=(r.y+a.y)*o,i=r,r=a;var p=k=k.next;t+=r.x*(p.y-i.y);var h=p.y*r.x-p.x*r.y;E.localCOMx+=(r.x+p.x)*h,E.localCOMy+=(r.y+p.y)*h;var u=t=1/(3*t);E.localCOMx*=u,E.localCOMy*=u}}null!=C.wrap_localCOM&&(C.wrap_localCOM.zpp_inner.x=C.localCOMx,C.wrap_localCOM.zpp_inner.y=C.localCOMy)}(M=C.body).zip_axis&&(M.zip_axis=!1,M.axisx=Math.sin(M.rot),M.axisy=Math.cos(M.rot)),C.worldCOMx=C.body.posx+(C.body.axisy*C.localCOMx-C.body.axisx*C.localCOMy),C.worldCOMy=C.body.posy+(C.localCOMx*C.body.axisx+C.localCOMy*C.body.axisy)}var _=C.radius,c=C.radius;C.aabb.minx=C.worldCOMx-_,C.aabb.miny=C.worldCOMy-c,C.aabb.maxx=C.worldCOMx+_,C.aabb.maxy=C.worldCOMy+c}else{if((T=O.polygon).zip_gverts&&null!=T.body){T.zip_gverts=!1,T.validate_lverts();var d=T.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));for(var f=T.lverts.next,x=T.gverts.next;null!=x;){var b=x,y=f;f=f.next,b.x=T.body.posx+(T.body.axisy*y.x-T.body.axisx*y.y),b.y=T.body.posy+(y.x*T.body.axisx+y.y*T.body.axisy),x=x.next}}if(null==T.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var v=T.gverts.next;T.aabb.minx=v.x,T.aabb.miny=v.y,T.aabb.maxx=v.x,T.aabb.maxy=v.y;for(var m=T.gverts.next.next;null!=m;){var g=m;g.x<T.aabb.minx&&(T.aabb.minx=g.x),g.x>T.aabb.maxx&&(T.aabb.maxx=g.x),g.y<T.aabb.miny&&(T.aabb.miny=g.y),g.y>T.aabb.maxy&&(T.aabb.maxy=g.y),m=m.next}}var z=n.aabb,w=O.aabb;w.minx<z.minx&&(z.minx=w.minx),w.maxx>z.maxx&&(z.maxx=w.maxx),w.miny<z.miny&&(z.miny=w.miny),w.maxy>z.maxy&&(z.maxy=w.maxy),e=e.next}}}if(n.validate_mass(),n.validate_inertia(),0!=n.velx||0!=n.vely||0!=n.angvel)throw haxe_Exception.thrown("Error: Static body cannot have any real velocity, only kinematic or surface velocities");for(e=n.shapes.head;null!=e;){var O;if(1==(O=e.elt).type){var C;(C=O.polygon).zip_sanitation&&(C.zip_sanitation=!1,C.splice_collinear_real());var E,U=O.polygon.valid();if(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),U!=zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID)throw haxe_Exception.thrown("Error: Cannot simulate with an invalid Polygon : "+O.polygon.outer.toString()+" is invalid : "+U.toString());if((E=O.polygon).zip_gaxi&&null!=E.body){var M;if(E.zip_gaxi=!1,E.validate_laxi(),(M=E.body).zip_axis&&(M.zip_axis=!1,M.axisx=Math.sin(M.rot),M.axisy=Math.cos(M.rot)),E.zip_gverts&&null!=E.body){var T;E.zip_gverts=!1,E.validate_lverts(),(T=E.body).zip_axis&&(T.zip_axis=!1,T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot));f=E.lverts.next;for(var k=E.gverts.next;null!=k;){b=k,y=f;f=f.next,b.x=E.body.posx+(E.body.axisy*y.x-E.body.axisx*y.y),b.y=E.body.posy+(y.x*E.body.axisx+y.y*E.body.axisy),k=k.next}}var D=E.edges.head;i=x=E.gverts.next;for(x=x.next;null!=x;){r=x;var S=D.elt;D=D.next,S.gp0=i,S.gp1=r,S.gnormx=E.body.axisy*S.lnormx-E.body.axisx*S.lnormy,S.gnormy=S.lnormx*E.body.axisx+S.lnormy*E.body.axisy,S.gprojection=E.body.posx*S.gnormx+E.body.posy*S.gnormy+S.lprojection,null!=S.wrap_gnorm&&(S.wrap_gnorm.zpp_inner.x=S.gnormx,S.wrap_gnorm.zpp_inner.y=S.gnormy),S.tp0=S.gp0.y*S.gnormx-S.gp0.x*S.gnormy,S.tp1=S.gp1.y*S.gnormx-S.gp1.x*S.gnormy,i=r,x=x.next}var A=E.gverts.next,P=D.elt;D=D.next,P.gp0=i,P.gp1=A,P.gnormx=E.body.axisy*P.lnormx-E.body.axisx*P.lnormy,P.gnormy=P.lnormx*E.body.axisx+P.lnormy*E.body.axisy,P.gprojection=E.body.posx*P.gnormx+E.body.posy*P.gnormy+P.lprojection,null!=P.wrap_gnorm&&(P.wrap_gnorm.zpp_inner.x=P.gnormx,P.wrap_gnorm.zpp_inner.y=P.gnormy),P.tp0=P.gp0.y*P.gnormx-P.gp0.x*P.gnormy,P.tp1=P.gp1.y*P.gnormx-P.gp1.x*P.gnormy}}e=e.next}n.sweepFrozen=!0},validation:function(){if(!(B=this.cbsets).cbsets.empty()){for(var n=B.cbsets.parent;null!=n.prev;)n=n.prev;for(;null!=n;){if((rn=n.data).validate(),null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}for(var e=this.live.head;null!=e;){(R=e.elt).sweepRadius=0;for(var t=R.shapes.head;null!=t;){if(1==(L=t.elt).type){(B=L.polygon).zip_sanitation&&(B.zip_sanitation=!1,B.splice_collinear_real());var i=L.polygon.valid();if(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),i!=zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID)throw haxe_Exception.thrown("Error: Cannot simulate with an invalid Polygon : "+L.polygon.outer.toString()+" is invalid : "+i.toString());if((G=L.polygon).zip_gaxi&&null!=G.body){if(G.zip_gaxi=!1,G.validate_laxi(),(j=G.body).zip_axis&&(j.zip_axis=!1,j.axisx=Math.sin(j.rot),j.axisy=Math.cos(j.rot)),G.zip_gverts&&null!=G.body){G.zip_gverts=!1,G.validate_lverts(),(K=G.body).zip_axis&&(K.zip_axis=!1,K.axisx=Math.sin(K.rot),K.axisy=Math.cos(K.rot));for(var r=G.lverts.next,l=G.gverts.next;null!=l;){var s=l,a=r;r=r.next,s.x=G.body.posx+(G.body.axisy*a.x-G.body.axisx*a.y),s.y=G.body.posy+(a.x*G.body.axisx+a.y*G.body.axisy),l=l.next}}var o=G.edges.head,p=W=G.gverts.next;for(W=W.next;null!=W;){var h=W,u=o.elt;o=o.next,u.gp0=p,u.gp1=h,u.gnormx=G.body.axisy*u.lnormx-G.body.axisx*u.lnormy,u.gnormy=u.lnormx*G.body.axisx+u.lnormy*G.body.axisy,u.gprojection=G.body.posx*u.gnormx+G.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,W=W.next}var _=G.gverts.next,c=o.elt;o=o.next,c.gp0=p,c.gp1=_,c.gnormx=G.body.axisy*c.lnormx-G.body.axisx*c.lnormy,c.gnormy=c.lnormx*G.body.axisx+c.lnormy*G.body.axisy,c.gprojection=G.body.posx*c.gnormx+G.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}}L.validate_sweepRadius(),L.sweepRadius>R.sweepRadius&&(R.sweepRadius=L.sweepRadius),t=t.next}if(R.validate_mass(),R.validate_inertia(),null!=R.shapes.head){if(null==R.shapes.head)throw haxe_Exception.thrown("Error: Body bounds only makes sense if it contains shapes");if(R.zip_aabb){R.zip_aabb=!1,R.aabb.minx=1/0,R.aabb.miny=1/0,R.aabb.maxx=-1/0,R.aabb.maxy=-1/0;for(var d=R.shapes.head;null!=d;){if((Y=d.elt).zip_aabb&&null!=Y.body)if(Y.zip_aabb=!1,0==Y.type){if((X=Y.circle).zip_worldCOM&&null!=X.body){if(X.zip_worldCOM=!1,X.zip_localCOM){if(X.zip_localCOM=!1,1==X.type){if(null==(H=X.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==H.lverts.next.next)H.localCOMx=H.lverts.next.x,H.localCOMy=H.lverts.next.y;else if(null==H.lverts.next.next.next){H.localCOMx=H.lverts.next.x,H.localCOMy=H.lverts.next.y;var f=1;H.localCOMx+=H.lverts.next.next.x*f,H.localCOMy+=H.lverts.next.next.y*f;var x=.5;H.localCOMx*=x,H.localCOMy*=x}else{H.localCOMx=0,H.localCOMy=0;var b=0,y=Z=H.lverts.next,v=Z=Z.next;for(Z=Z.next;null!=Z;){var m=Z;b+=v.x*(m.y-y.y);var g=m.y*v.x-m.x*v.y;H.localCOMx+=(v.x+m.x)*g,H.localCOMy+=(v.y+m.y)*g,y=v,v=m,Z=Z.next}var z=Z=H.lverts.next;b+=v.x*(z.y-y.y);var w=z.y*v.x-z.x*v.y;H.localCOMx+=(v.x+z.x)*w,H.localCOMy+=(v.y+z.y)*w,y=v,v=z;var O=Z=Z.next;b+=v.x*(O.y-y.y);var C=O.y*v.x-O.x*v.y;H.localCOMx+=(v.x+O.x)*C,H.localCOMy+=(v.y+O.y)*C;var E=b=1/(3*b);H.localCOMx*=E,H.localCOMy*=E}}null!=X.wrap_localCOM&&(X.wrap_localCOM.zpp_inner.x=X.localCOMx,X.wrap_localCOM.zpp_inner.y=X.localCOMy)}(q=X.body).zip_axis&&(q.zip_axis=!1,q.axisx=Math.sin(q.rot),q.axisy=Math.cos(q.rot)),X.worldCOMx=X.body.posx+(X.body.axisy*X.localCOMx-X.body.axisx*X.localCOMy),X.worldCOMy=X.body.posy+(X.localCOMx*X.body.axisx+X.localCOMy*X.body.axisy)}var U=X.radius,M=X.radius;X.aabb.minx=X.worldCOMx-U,X.aabb.miny=X.worldCOMy-M,X.aabb.maxx=X.worldCOMx+U,X.aabb.maxy=X.worldCOMy+M}else{if(($=Y.polygon).zip_gverts&&null!=$.body){$.zip_gverts=!1,$.validate_lverts(),(Q=$.body).zip_axis&&(Q.zip_axis=!1,Q.axisx=Math.sin(Q.rot),Q.axisy=Math.cos(Q.rot));for(var T=$.lverts.next,k=$.gverts.next;null!=k;){var D=k,S=T;T=T.next,D.x=$.body.posx+($.body.axisy*S.x-$.body.axisx*S.y),D.y=$.body.posy+(S.x*$.body.axisx+S.y*$.body.axisy),k=k.next}}if(null==$.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var A=$.gverts.next;$.aabb.minx=A.x,$.aabb.miny=A.y,$.aabb.maxx=A.x,$.aabb.maxy=A.y;for(var P=$.gverts.next.next;null!=P;){(J=P).x<$.aabb.minx&&($.aabb.minx=J.x),J.x>$.aabb.maxx&&($.aabb.maxx=J.x),J.y<$.aabb.miny&&($.aabb.miny=J.y),J.y>$.aabb.maxy&&($.aabb.maxy=J.y),P=P.next}}var V=R.aabb;(nn=Y.aabb).minx<V.minx&&(V.minx=nn.minx),nn.maxx>V.maxx&&(V.maxx=nn.maxx),nn.miny<V.miny&&(V.miny=nn.miny),nn.maxy>V.maxy&&(V.maxy=nn.maxy),d=d.next}}R.validate_worldCOM()}if(R.validate_gravMass(),R.zip_axis&&(R.zip_axis=!1,R.axisx=Math.sin(R.rot),R.axisy=Math.cos(R.rot)),!R.nomove&&2==R.type&&0==R.mass)throw haxe_Exception.thrown("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!R.norotate&&2==R.type&&0==R.inertia)throw haxe_Exception.thrown("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");if(R.component.woken&&null!=R.cbSet)for(var I=R.cbSet.bodylisteners.head;null!=I;){if(2==(tn=I.elt).event)(rn=this.push_callback(tn)).event=2,rn.body=R,I=I.next;else I=I.next}R.component.woken=!1;for(var N=R.shapes.head;null!=N;){var F=N.elt;this.bphase.sync(F),N=N.next}e=e.next}for(e=this.kinematics.head;null!=e;){var R;(R=e.elt).sweepRadius=0;for(t=R.shapes.head;null!=t;){var L;if(1==(L=t.elt).type){var B;(B=L.polygon).zip_sanitation&&(B.zip_sanitation=!1,B.splice_collinear_real());var G;i=L.polygon.valid();if(null==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult,zpp_$nape_util_ZPP_$Flags.internal=!1),i!=zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID)throw haxe_Exception.thrown("Error: Cannot simulate with an invalid Polygon : "+L.polygon.outer.toString()+" is invalid : "+i.toString());if((G=L.polygon).zip_gaxi&&null!=G.body){var j;if(G.zip_gaxi=!1,G.validate_laxi(),(j=G.body).zip_axis&&(j.zip_axis=!1,j.axisx=Math.sin(j.rot),j.axisy=Math.cos(j.rot)),G.zip_gverts&&null!=G.body){var K;G.zip_gverts=!1,G.validate_lverts(),(K=G.body).zip_axis&&(K.zip_axis=!1,K.axisx=Math.sin(K.rot),K.axisy=Math.cos(K.rot));for(r=G.lverts.next,l=G.gverts.next;null!=l;){s=l,a=r;r=r.next,s.x=G.body.posx+(G.body.axisy*a.x-G.body.axisx*a.y),s.y=G.body.posy+(a.x*G.body.axisx+a.y*G.body.axisy),l=l.next}}var W;o=G.edges.head,p=W=G.gverts.next;for(W=W.next;null!=W;){h=W,u=o.elt;o=o.next,u.gp0=p,u.gp1=h,u.gnormx=G.body.axisy*u.lnormx-G.body.axisx*u.lnormy,u.gnormy=u.lnormx*G.body.axisx+u.lnormy*G.body.axisy,u.gprojection=G.body.posx*u.gnormx+G.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,W=W.next}_=G.gverts.next,c=o.elt;o=o.next,c.gp0=p,c.gp1=_,c.gnormx=G.body.axisy*c.lnormx-G.body.axisx*c.lnormy,c.gnormy=c.lnormx*G.body.axisx+c.lnormy*G.body.axisy,c.gprojection=G.body.posx*c.gnormx+G.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}}L.validate_sweepRadius(),L.sweepRadius>R.sweepRadius&&(R.sweepRadius=L.sweepRadius),t=t.next}if(R.validate_mass(),R.validate_inertia(),null!=R.shapes.head){if(null==R.shapes.head)throw haxe_Exception.thrown("Error: Body bounds only makes sense if it contains shapes");if(R.zip_aabb){R.zip_aabb=!1,R.aabb.minx=1/0,R.aabb.miny=1/0,R.aabb.maxx=-1/0,R.aabb.maxy=-1/0;for(d=R.shapes.head;null!=d;){var Y;if((Y=d.elt).zip_aabb&&null!=Y.body)if(Y.zip_aabb=!1,0==Y.type){var X;if((X=Y.circle).zip_worldCOM&&null!=X.body){if(X.zip_worldCOM=!1,X.zip_localCOM){if(X.zip_localCOM=!1,1==X.type){var H;if(null==(H=X.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==H.lverts.next.next)H.localCOMx=H.lverts.next.x,H.localCOMy=H.lverts.next.y;else if(null==H.lverts.next.next.next){H.localCOMx=H.lverts.next.x,H.localCOMy=H.lverts.next.y;f=1;H.localCOMx+=H.lverts.next.next.x*f,H.localCOMy+=H.lverts.next.next.y*f;x=.5;H.localCOMx*=x,H.localCOMy*=x}else{H.localCOMx=0,H.localCOMy=0;var Z;b=0,y=Z=H.lverts.next,v=Z=Z.next;for(Z=Z.next;null!=Z;){m=Z;b+=v.x*(m.y-y.y);g=m.y*v.x-m.x*v.y;H.localCOMx+=(v.x+m.x)*g,H.localCOMy+=(v.y+m.y)*g,y=v,v=m,Z=Z.next}z=Z=H.lverts.next;b+=v.x*(z.y-y.y);w=z.y*v.x-z.x*v.y;H.localCOMx+=(v.x+z.x)*w,H.localCOMy+=(v.y+z.y)*w,y=v,v=z;O=Z=Z.next;b+=v.x*(O.y-y.y);C=O.y*v.x-O.x*v.y;H.localCOMx+=(v.x+O.x)*C,H.localCOMy+=(v.y+O.y)*C;E=b=1/(3*b);H.localCOMx*=E,H.localCOMy*=E}}null!=X.wrap_localCOM&&(X.wrap_localCOM.zpp_inner.x=X.localCOMx,X.wrap_localCOM.zpp_inner.y=X.localCOMy)}var q;(q=X.body).zip_axis&&(q.zip_axis=!1,q.axisx=Math.sin(q.rot),q.axisy=Math.cos(q.rot)),X.worldCOMx=X.body.posx+(X.body.axisy*X.localCOMx-X.body.axisx*X.localCOMy),X.worldCOMy=X.body.posy+(X.localCOMx*X.body.axisx+X.localCOMy*X.body.axisy)}U=X.radius,M=X.radius;X.aabb.minx=X.worldCOMx-U,X.aabb.miny=X.worldCOMy-M,X.aabb.maxx=X.worldCOMx+U,X.aabb.maxy=X.worldCOMy+M}else{var $;if(($=Y.polygon).zip_gverts&&null!=$.body){var Q;$.zip_gverts=!1,$.validate_lverts(),(Q=$.body).zip_axis&&(Q.zip_axis=!1,Q.axisx=Math.sin(Q.rot),Q.axisy=Math.cos(Q.rot));for(T=$.lverts.next,k=$.gverts.next;null!=k;){D=k,S=T;T=T.next,D.x=$.body.posx+($.body.axisy*S.x-$.body.axisx*S.y),D.y=$.body.posy+(S.x*$.body.axisx+S.y*$.body.axisy),k=k.next}}if(null==$.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");A=$.gverts.next;$.aabb.minx=A.x,$.aabb.miny=A.y,$.aabb.maxx=A.x,$.aabb.maxy=A.y;for(P=$.gverts.next.next;null!=P;){var J;(J=P).x<$.aabb.minx&&($.aabb.minx=J.x),J.x>$.aabb.maxx&&($.aabb.maxx=J.x),J.y<$.aabb.miny&&($.aabb.miny=J.y),J.y>$.aabb.maxy&&($.aabb.maxy=J.y),P=P.next}}var nn;V=R.aabb;(nn=Y.aabb).minx<V.minx&&(V.minx=nn.minx),nn.maxx>V.maxx&&(V.maxx=nn.maxx),nn.miny<V.miny&&(V.miny=nn.miny),nn.maxy>V.maxy&&(V.maxy=nn.maxy),d=d.next}}R.validate_worldCOM()}if(R.validate_gravMass(),R.zip_axis&&(R.zip_axis=!1,R.axisx=Math.sin(R.rot),R.axisy=Math.cos(R.rot)),!R.nomove&&2==R.type&&0==R.mass)throw haxe_Exception.thrown("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!R.norotate&&2==R.type&&0==R.inertia)throw haxe_Exception.thrown("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");for(I=R.shapes.head;null!=I;){F=I.elt;this.bphase.sync(F),I=I.next}e=e.next}for(e=this.live_constraints.head;null!=e;){var en=e.elt;if(en.active){if(en.validate(),en.component.woken&&null!=en.cbSet)for(t=en.cbSet.conlisteners.head;null!=t;){var tn,rn;if(2==(tn=t.elt).event)(rn=this.push_callback(tn)).event=2,rn.constraint=en,t=t.next;else t=t.next}en.component.woken=!1}e=e.next}},updateVel:function(n){for(var e=1-n*this.global_lin_drag,t=1-n*this.global_ang_drag,i=this.live.head;null!=i;){var r=i.elt;if(0!=r.smass){var l=n*r.imass;r.velx=e*r.velx+(r.forcex+this.gravityx*r.gravMass)*l,r.vely=e*r.vely+(r.forcey+this.gravityy*r.gravMass)*l}if(0!=r.sinertia){var s,a;s=r.worldCOMx-r.posx,a=r.worldCOMy-r.posy;var o=r.torque+(this.gravityy*s-this.gravityx*a)*r.gravMass;r.angvel=t*r.angvel+o*n*r.iinertia}i,i=i.next}},updatePos:function(n){for(var e=2*Math.PI/n,t=this.live.head;null!=t;){if((L=t.elt).pre_posx=L.posx,L.pre_posy=L.posy,L.pre_rot=L.rot,L.sweepTime=0,L.sweep_angvel=L.angvel%e,0!=(B=n-L.sweepTime)){L.sweepTime=n;var i=B;if(L.posx+=L.velx*i,L.posy+=L.vely*i,0!=L.angvel){var r=L.sweep_angvel*B;if(L.rot+=r,r*r>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var l=1-(G=r*r)*G/8,s=((j=1-.5*G)*L.axisx+r*L.axisy)*l;L.axisy=(j*L.axisy-r*L.axisx)*l,L.axisx=s}}}if(L.disableCCD)L.sweepFrozen=!0,L.bullet=!1;else{var a=nape_Config.staticCCDLinearThreshold*L.sweepRadius,o=nape_Config.staticCCDAngularThreshold;if((L.velx*L.velx+L.vely*L.vely)*n*n>a*a||L.angvel*L.angvel*n*n>o*o||3==L.type){(K=L.sweep_angvel)<0&&(K=-K);for(var p=1/K,h=L.shapes.head;null!=h;){var u=(Y=(W=h.elt).aabb).minx,_=Y.miny,c=Y.maxx,d=Y.maxy;(X=K*n*W.sweepCoef*.008333333333333333|0)>8&&(X=8);var f=K*n/X;if(0!=(H=n-L.sweepTime)){L.sweepTime=n;var x=H;if(L.posx+=L.velx*x,L.posy+=L.vely*x,0!=L.angvel){var b=L.sweep_angvel*H;if(L.rot+=b,b*b>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var y=1-(Z=b*b)*Z/8,v=((q=1-.5*Z)*L.axisx+b*L.axisy)*y;L.axisy=(q*L.axisy-b*L.axisx)*y,L.axisx=v}}}if(0==W.type){($=W.circle).worldCOMx=$.body.posx+($.body.axisy*$.localCOMx-$.body.axisx*$.localCOMy),$.worldCOMy=$.body.posy+($.localCOMx*$.body.axisx+$.localCOMy*$.body.axisy),$.aabb.minx=$.worldCOMx-$.radius,$.aabb.miny=$.worldCOMy-$.radius,$.aabb.maxx=$.worldCOMx+$.radius,$.aabb.maxy=$.worldCOMy+$.radius}else{var m=(Q=W.polygon).lverts.next,g=Q.gverts.next,z=m;m=m.next,g.x=Q.body.posx+(Q.body.axisy*z.x-Q.body.axisx*z.y),g.y=Q.body.posy+(z.x*Q.body.axisx+z.y*Q.body.axisy),Q.aabb.minx=g.x,Q.aabb.miny=g.y,Q.aabb.maxx=g.x,Q.aabb.maxy=g.y;for(var w=Q.gverts.next.next;null!=w;){var O=w,C=m;m=m.next,O.x=Q.body.posx+(Q.body.axisy*C.x-Q.body.axisx*C.y),O.y=Q.body.posy+(C.x*Q.body.axisx+C.y*Q.body.axisy),O.x<Q.aabb.minx&&(Q.aabb.minx=O.x),O.x>Q.aabb.maxx&&(Q.aabb.maxx=O.x),O.y<Q.aabb.miny&&(Q.aabb.miny=O.y),O.y>Q.aabb.maxy&&(Q.aabb.maxy=O.y),w=w.next}}u<Y.minx?Y.minx=u:u=Y.minx,_<Y.miny?Y.miny=_:_=Y.miny,c>Y.maxx?Y.maxx=c:c=Y.maxx,d>Y.maxy?Y.maxy=d:d=Y.maxy;for(var E=1,U=X;E<U;){if(0!=(nn=(J=f*E++*p)-L.sweepTime)){L.sweepTime=J;var M=nn;if(L.posx+=L.velx*M,L.posy+=L.vely*M,0!=L.angvel){var T=L.sweep_angvel*nn;if(L.rot+=T,T*T>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var k=1-(en=T*T)*en/8,D=((tn=1-.5*en)*L.axisx+T*L.axisy)*k;L.axisy=(tn*L.axisy-T*L.axisx)*k,L.axisx=D}}}if(0==W.type){(rn=W.circle).worldCOMx=rn.body.posx+(rn.body.axisy*rn.localCOMx-rn.body.axisx*rn.localCOMy),rn.worldCOMy=rn.body.posy+(rn.localCOMx*rn.body.axisx+rn.localCOMy*rn.body.axisy),rn.aabb.minx=rn.worldCOMx-rn.radius,rn.aabb.miny=rn.worldCOMy-rn.radius,rn.aabb.maxx=rn.worldCOMx+rn.radius,rn.aabb.maxy=rn.worldCOMy+rn.radius}else{var S=(ln=W.polygon).lverts.next,A=ln.gverts.next,P=S;S=S.next,A.x=ln.body.posx+(ln.body.axisy*P.x-ln.body.axisx*P.y),A.y=ln.body.posy+(P.x*ln.body.axisx+P.y*ln.body.axisy),ln.aabb.minx=A.x,ln.aabb.miny=A.y,ln.aabb.maxx=A.x,ln.aabb.maxy=A.y;for(var V=ln.gverts.next.next;null!=V;){var I=V,N=S;S=S.next,I.x=ln.body.posx+(ln.body.axisy*N.x-ln.body.axisx*N.y),I.y=ln.body.posy+(N.x*ln.body.axisx+N.y*ln.body.axisy),I.x<ln.aabb.minx&&(ln.aabb.minx=I.x),I.x>ln.aabb.maxx&&(ln.aabb.maxx=I.x),I.y<ln.aabb.miny&&(ln.aabb.miny=I.y),I.y>ln.aabb.maxy&&(ln.aabb.maxy=I.y),V=V.next}}u<Y.minx?Y.minx=u:u=Y.minx,_<Y.miny?Y.miny=_:_=Y.miny,c>Y.maxx?Y.maxx=c:c=Y.maxx,d>Y.maxy?Y.maxy=d:d=Y.maxy}this.bphase.sync(W),h=h.next}if(L.sweepFrozen=!1,2==L.type&&L.bulletEnabled){var F=nape_Config.bulletCCDLinearThreshold*L.sweepRadius,R=nape_Config.bulletCCDAngularThreshold;((L.velx*L.velx+L.vely*L.vely)*n*n>F*F||L.angvel*L.angvel*n*n>R*R)&&(L.bullet=!0)}}else L.sweepFrozen=!0,L.bullet=!1}t=t.next}for(t=this.kinematics.head;null!=t;){var L,B;if((L=t.elt).pre_posx=L.posx,L.pre_posy=L.posy,L.pre_rot=L.rot,L.sweepTime=0,L.sweep_angvel=L.angvel%e,0!=(B=n-L.sweepTime)){L.sweepTime=n;i=B;if(L.posx+=L.velx*i,L.posy+=L.vely*i,0!=L.angvel){r=L.sweep_angvel*B;if(L.rot+=r,r*r>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var G,j;l=1-(G=r*r)*G/8,s=((j=1-.5*G)*L.axisx+r*L.axisy)*l;L.axisy=(j*L.axisy-r*L.axisx)*l,L.axisx=s}}}if(L.disableCCD)L.sweepFrozen=!0,L.bullet=!1;else{a=nape_Config.staticCCDLinearThreshold*L.sweepRadius,o=nape_Config.staticCCDAngularThreshold;if((L.velx*L.velx+L.vely*L.vely)*n*n>a*a||L.angvel*L.angvel*n*n>o*o||3==L.type){var K;(K=L.sweep_angvel)<0&&(K=-K);for(p=1/K,h=L.shapes.head;null!=h;){var W,Y,X;u=(Y=(W=h.elt).aabb).minx,_=Y.miny,c=Y.maxx,d=Y.maxy;(X=K*n*W.sweepCoef*.008333333333333333|0)>8&&(X=8);var H;f=K*n/X;if(0!=(H=n-L.sweepTime)){L.sweepTime=n;x=H;if(L.posx+=L.velx*x,L.posy+=L.vely*x,0!=L.angvel){b=L.sweep_angvel*H;if(L.rot+=b,b*b>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var Z,q;y=1-(Z=b*b)*Z/8,v=((q=1-.5*Z)*L.axisx+b*L.axisy)*y;L.axisy=(q*L.axisy-b*L.axisx)*y,L.axisx=v}}}if(0==W.type){var $;($=W.circle).worldCOMx=$.body.posx+($.body.axisy*$.localCOMx-$.body.axisx*$.localCOMy),$.worldCOMy=$.body.posy+($.localCOMx*$.body.axisx+$.localCOMy*$.body.axisy),$.aabb.minx=$.worldCOMx-$.radius,$.aabb.miny=$.worldCOMy-$.radius,$.aabb.maxx=$.worldCOMx+$.radius,$.aabb.maxy=$.worldCOMy+$.radius}else{var Q;m=(Q=W.polygon).lverts.next,g=Q.gverts.next,z=m;m=m.next,g.x=Q.body.posx+(Q.body.axisy*z.x-Q.body.axisx*z.y),g.y=Q.body.posy+(z.x*Q.body.axisx+z.y*Q.body.axisy),Q.aabb.minx=g.x,Q.aabb.miny=g.y,Q.aabb.maxx=g.x,Q.aabb.maxy=g.y;for(w=Q.gverts.next.next;null!=w;){O=w,C=m;m=m.next,O.x=Q.body.posx+(Q.body.axisy*C.x-Q.body.axisx*C.y),O.y=Q.body.posy+(C.x*Q.body.axisx+C.y*Q.body.axisy),O.x<Q.aabb.minx&&(Q.aabb.minx=O.x),O.x>Q.aabb.maxx&&(Q.aabb.maxx=O.x),O.y<Q.aabb.miny&&(Q.aabb.miny=O.y),O.y>Q.aabb.maxy&&(Q.aabb.maxy=O.y),w=w.next}}u<Y.minx?Y.minx=u:u=Y.minx,_<Y.miny?Y.miny=_:_=Y.miny,c>Y.maxx?Y.maxx=c:c=Y.maxx,d>Y.maxy?Y.maxy=d:d=Y.maxy;for(E=1,U=X;E<U;){var J,nn;if(0!=(nn=(J=f*E++*p)-L.sweepTime)){L.sweepTime=J;M=nn;if(L.posx+=L.velx*M,L.posy+=L.vely*M,0!=L.angvel){T=L.sweep_angvel*nn;if(L.rot+=T,T*T>1e-4)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var en,tn;k=1-(en=T*T)*en/8,D=((tn=1-.5*en)*L.axisx+T*L.axisy)*k;L.axisy=(tn*L.axisy-T*L.axisx)*k,L.axisx=D}}}if(0==W.type){var rn;(rn=W.circle).worldCOMx=rn.body.posx+(rn.body.axisy*rn.localCOMx-rn.body.axisx*rn.localCOMy),rn.worldCOMy=rn.body.posy+(rn.localCOMx*rn.body.axisx+rn.localCOMy*rn.body.axisy),rn.aabb.minx=rn.worldCOMx-rn.radius,rn.aabb.miny=rn.worldCOMy-rn.radius,rn.aabb.maxx=rn.worldCOMx+rn.radius,rn.aabb.maxy=rn.worldCOMy+rn.radius}else{var ln;S=(ln=W.polygon).lverts.next,A=ln.gverts.next,P=S;S=S.next,A.x=ln.body.posx+(ln.body.axisy*P.x-ln.body.axisx*P.y),A.y=ln.body.posy+(P.x*ln.body.axisx+P.y*ln.body.axisy),ln.aabb.minx=A.x,ln.aabb.miny=A.y,ln.aabb.maxx=A.x,ln.aabb.maxy=A.y;for(V=ln.gverts.next.next;null!=V;){I=V,N=S;S=S.next,I.x=ln.body.posx+(ln.body.axisy*N.x-ln.body.axisx*N.y),I.y=ln.body.posy+(N.x*ln.body.axisx+N.y*ln.body.axisy),I.x<ln.aabb.minx&&(ln.aabb.minx=I.x),I.x>ln.aabb.maxx&&(ln.aabb.maxx=I.x),I.y<ln.aabb.miny&&(ln.aabb.miny=I.y),I.y>ln.aabb.maxy&&(ln.aabb.maxy=I.y),V=V.next}}u<Y.minx?Y.minx=u:u=Y.minx,_<Y.miny?Y.miny=_:_=Y.miny,c>Y.maxx?Y.maxx=c:c=Y.maxx,d>Y.maxy?Y.maxy=d:d=Y.maxy}this.bphase.sync(W),h=h.next}if(L.sweepFrozen=!1,2==L.type&&L.bulletEnabled){F=nape_Config.bulletCCDLinearThreshold*L.sweepRadius,R=nape_Config.bulletCCDAngularThreshold;((L.velx*L.velx+L.vely*L.vely)*n*n>F*F||L.angvel*L.angvel*n*n>R*R)&&(L.bullet=!0)}}else L.sweepFrozen=!0,L.bullet=!1}t=t.next}},presteparb:function(n,e,t){null==t&&(t=!1);if(!n.cleared&&n.b1.component.sleeping&&n.b2.component.sleeping)return n.sleep_stamp=this.stamp,n.sleeping=!0,!0;if(!n.cleared||0!=n.present||n.intchange){var i=!t&&n.up_stamp==this.stamp-1&&!n.cleared&&!n.intchange,r=n.fresh&&!n.cleared&&!n.intchange;if(i&&(n.endGenerated=this.stamp),r||i||n.cleared||n.intchange){for(var l=n.ws1,s=n.ws2,a=this.mrca1;null!=a.head;){var o=a.head;a.head=o.next,(p=o).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=p,null==a.head&&(a.pushmod=!0),a.modified=!0,a.length--}a.pushmod=!0;for(a=this.mrca2;null!=a.head;){o=a.head;a.head=o.next,(p=o).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=p,null==a.head&&(a.pushmod=!0),a.modified=!0,a.length--}if(a.pushmod=!0,null!=l.cbSet){a=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=l,(R=o).next=a.head,a.head=R,a.modified=!0,a.length++}if(null!=l.body.cbSet){a=this.mrca1;var p=l.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=p,(R=o).next=a.head,a.head=R,a.modified=!0,a.length++}if(null!=s.cbSet){a=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=s,(R=o).next=a.head,a.head=R,a.modified=!0,a.length++}if(null!=s.body.cbSet){a=this.mrca2,p=s.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=p,(R=o).next=a.head,a.head=R,a.modified=!0,a.length++}for(var h=l.body.compound,u=s.body.compound;h!=u;){if((null==h?0:h.depth)<(null==u?0:u.depth)){if(null!=u.cbSet){a=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=u,(R=o).next=a.head,a.head=R,a.modified=!0,a.length++}u=u.compound}else{if(null!=h.cbSet){var _=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?en=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(en=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=en.next,en.next=null),en.elt=h;var c=en;c.next=_.head,_.head=c,_.modified=!0,_.length++}h=h.compound}}for(var d=this.mrca1.head;null!=d;){for(var f=d.elt,x=this.mrca2.head;null!=x;){for(var b=x.elt,y=f.cbSet,v=b.cbSet,m=(a=y.manager,o=null,(y.cbpairs.length<v.cbpairs.length?y.cbpairs:v.cbpairs).head);null!=m;){var g=m.elt;if(g.a==y&&g.b==v||g.a==v&&g.b==y){o=g;break}m=m.next}if(null==o)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?en=new zpp_$nape_callbacks_ZPP_$CbSetPair:(en=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=en.next,en.next=null),en.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(y,v)?(en.a=y,en.b=v):(en.a=v,en.b=y),o=en,y.cbpairs.add(o),v!=y&&v.cbpairs.add(o);if(o.zip_listeners&&(o.zip_listeners=!1,o.__validate()),null!=o.listeners.head){var z=zpp_$nape_phys_ZPP_$Interactor.get(f,b);if(r||n.intchange){null==z&&(z=zpp_$nape_space_ZPP_$CallbackSet.get(f,b),this.add_callbackset(z));_=y.manager;for(var w,O=null,C=(y.cbpairs.length<v.cbpairs.length?y.cbpairs:v.cbpairs).head;null!=C;){var E=C.elt;if(E.a==y&&E.b==v||E.a==v&&E.b==y){O=E;break}C=C.next}if(null==O)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?w=new zpp_$nape_callbacks_ZPP_$CbSetPair:(w=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=w.next,w.next=null),w.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(y,v)?(w.a=y,w.b=v):(w.a=v,w.b=y),O=w,y.cbpairs.add(O),v!=y&&v.cbpairs.add(O);O.zip_listeners&&(O.zip_listeners=!1,O.__validate());for(var U,M,T=O.listeners.head;null!=T;){if(0==(_n=T.elt).event&&0!=(_n.itype&n.type)&&z.empty_arb(_n.itype)){var k=this.push_callback(_n);k.event=0;var D=z.int1,S=z.int2,A=_n.options1,P=D.cbTypes;if(A.nonemptyintersection(P,A.includes)&&!A.nonemptyintersection(P,A.excludes)){var V=_n.options2,I=S.cbTypes;On=V.nonemptyintersection(I,V.includes)&&!V.nonemptyintersection(I,V.excludes)}else On=!1;On?(k.int1=D,k.int2=S):(k.int1=S,k.int2=D),k.set=z}T=T.next}M=!1;for(var N=z.arbiters.head;null!=N;){if(N.elt==n){M=!0;break}N=N.next}if(M)U=!1;else{var F,R,L=z.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?F=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(F=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=F.next,F.next=null),F.elt=n,(R=F).next=L.head,L.head=R,L.modified=!0,L.length++,U=!0}U&&n.present++}else{n.present--,z.remove_arb(n);y.manager;for(var B,G=null,j=(y.cbpairs.length<v.cbpairs.length?y.cbpairs:v.cbpairs).head;null!=j;){var K=j.elt;if(K.a==y&&K.b==v||K.a==v&&K.b==y){G=K;break}j=j.next}if(null==G)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?B=new zpp_$nape_callbacks_ZPP_$CbSetPair:(B=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=B.next,B.next=null),B.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(y,v)?(B.a=y,B.b=v):(B.a=v,B.b=y),G=B,y.cbpairs.add(G),v!=y&&v.cbpairs.add(G);G.zip_listeners&&(G.zip_listeners=!1,G.__validate());for(var W=G.listeners.head;null!=W;){if(1==(dn=W.elt).event&&0!=(dn.itype&n.type)&&z.empty_arb(dn.itype)){var Y=this.push_callback(dn);Y.event=1;var X=z.int1,H=z.int2,Z=dn.options1,q=X.cbTypes;if(Z.nonemptyintersection(q,Z.includes)&&!Z.nonemptyintersection(q,Z.excludes)){var $=dn.options2,Q=H.cbTypes;Cn=$.nonemptyintersection(Q,$.includes)&&!$.nonemptyintersection(Q,$.excludes)}else Cn=!1;Cn?(Y.int1=X,Y.int2=H):(Y.int1=H,Y.int2=X),Y.set=z}W=W.next}null==z.arbiters.head&&this.remove_callbackset(z)}x=x.next}else x=x.next}d=d.next}}n.fresh=!1,n.intchange=!1}if(n.cleared||n.up_stamp+(n.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?nape_Config.arbiterExpirationDelay:0)<this.stamp){if(n.type==zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR){if(!(a=n.sensorarb).cleared){var J=null,nn=(_=a.b1.arbiters).head;for(o=!1;null!=nn;){if(nn.elt==a){null==J?(en=(ie=_.head).next,_.head=en,null==_.head&&(_.pushmod=!0)):(en=(ie=J.next).next,J.next=en,null==en&&(_.pushmod=!0)),(p=ie).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=p,_.modified=!0,_.length--,_.pushmod=!0,o=!0;break}J=nn,nn=nn.next}for(J=null,nn=(_=a.b2.arbiters).head,o=!1;null!=nn;){if(nn.elt==a){null==J?(en=(ie=_.head).next,_.head=en,null==_.head&&(_.pushmod=!0)):(en=(ie=J.next).next,J.next=en,null==en&&(_.pushmod=!0)),(p=ie).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=p,_.modified=!0,_.length--,_.pushmod=!0,o=!0;break}J=nn,nn=nn.next}null!=a.pair&&(a.pair.arb=null,a.pair=null)}a.b1=a.b2=null,a.active=!1,a.intchange=!1,(p=a).next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=p}else if(n.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){if(!(a=n.fluidarb).cleared){for(J=null,nn=(_=a.b1.arbiters).head,o=!1;null!=nn;){if(nn.elt==a){null==J?(en=(ie=_.head).next,_.head=en,null==_.head&&(_.pushmod=!0)):(en=(ie=J.next).next,J.next=en,null==en&&(_.pushmod=!0)),(p=ie).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=p,_.modified=!0,_.length--,_.pushmod=!0,o=!0;break}J=nn,nn=nn.next}for(J=null,nn=(_=a.b2.arbiters).head,o=!1;null!=nn;){if(nn.elt==a){null==J?(en=(ie=_.head).next,_.head=en,null==_.head&&(_.pushmod=!0)):(en=(ie=J.next).next,J.next=en,null==en&&(_.pushmod=!0)),(p=ie).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=p,_.modified=!0,_.length--,_.pushmod=!0,o=!0;break}J=nn,nn=nn.next}null!=a.pair&&(a.pair.arb=null,a.pair=null)}a.b1=a.b2=null,a.active=!1,a.intchange=!1,(p=a).next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=p,a.pre_dt=-1}else{if(!(a=n.colarb).cleared){for(J=null,nn=(_=a.b1.arbiters).head,o=!1;null!=nn;){if(nn.elt==a){null==J?(en=(ie=_.head).next,_.head=en,null==_.head&&(_.pushmod=!0)):(en=(ie=J.next).next,J.next=en,null==en&&(_.pushmod=!0)),(p=ie).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=p,_.modified=!0,_.length--,_.pushmod=!0,o=!0;break}J=nn,nn=nn.next}for(J=null,nn=(_=a.b2.arbiters).head,o=!1;null!=nn;){if(nn.elt==a){null==J?(en=(ie=_.head).next,_.head=en,null==_.head&&(_.pushmod=!0)):(en=(ie=J.next).next,J.next=en,null==en&&(_.pushmod=!0)),(p=ie).elt=null,p.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=p,_.modified=!0,_.length--,_.pushmod=!0,o=!0;break}J=nn,nn=nn.next}null!=a.pair&&(a.pair.arb=null,a.pair=null)}for(a.b1=a.b2=null,a.active=!1,a.intchange=!1;null!=a.contacts.next;){o=(_=a.contacts).next;_.pop(),(p=o).arbiter=null,p.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=p;var en=(A=a.innards).next;A.next=en.next,en._inuse=!1,null==A.next&&(A.pushmod=!0),A.modified=!0,A.length--}(p=a).userdef_dyn_fric=!1,p.userdef_stat_fric=!1,p.userdef_restitution=!1,p.userdef_rfric=!1,p.__ref_edge1=p.__ref_edge2=null,p.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=p,a.pre_dt=-1}return!0}var tn=n.active;if(n.active=n.presentable=n.up_stamp==this.stamp,0!=(1&n.immState)){if(n.active&&n.type!=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR)if(null!=n.colarb){(a=n.colarb).invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.s1.material.elasticity<=-1/0||a.s2.material.elasticity<=-1/0?a.restitution=0:a.s1.material.elasticity>=1/0||a.s2.material.elasticity>=1/0?a.restitution=1:a.restitution=(a.s1.material.elasticity+a.s2.material.elasticity)/2,a.restitution<0&&(a.restitution=0),a.restitution>1&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction))),-1==a.pre_dt&&(a.pre_dt=e);var rn=e/a.pre_dt;a.pre_dt=e;var ln=a.b1.smass+a.b2.smass;a.hc2=!1;var sn=!0,an=2!=a.b1.type||2!=a.b2.type?a.continuous?nape_Config.contactContinuousStaticBiasCoef:nape_Config.contactStaticBiasCoef:a.continuous?nape_Config.contactContinuousBiasCoef:nape_Config.contactBiasCoef;a.biasCoef=an,a.continuous=!1;J=null;var on=null,pn=a.innards.next;for(d=a.contacts.next;null!=d;){if((te=d).stamp+nape_Config.arbiterExpirationDelay<a.stamp){_=a.contacts;null==J?(o=(ie=_.next).next,_.next=o,null==_.next&&(_.pushmod=!0)):(o=(ie=J.next).next,J.next=o,null==o&&(_.pushmod=!0)),ie._inuse=!1,_.modified=!0,_.length--,_.pushmod=!0,d=o;A=a.innards;null==on?(en=(re=A.next).next,A.next=en,null==A.next&&(A.pushmod=!0)):(en=(re=on.next).next,on.next=en,null==en&&(A.pushmod=!0)),re._inuse=!1,A.modified=!0,A.length--,A.pushmod=!0,pn=en,(p=te).arbiter=null,p.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=p}else{var hn=te.inner,un=te.active;if(te.active=te.stamp==a.stamp,te.active){sn?(sn=!1,a.c1=hn,a.oc1=te):(a.hc2=!0,a.c2=hn,a.oc2=te),hn.r2x=te.px-a.b2.posx,hn.r2y=te.py-a.b2.posy,hn.r1x=te.px-a.b1.posx,hn.r1y=te.py-a.b1.posy;var _n=hn.r2x*a.nx+hn.r2y*a.ny,cn=ln+a.b2.sinertia*(_n*_n),dn=hn.r1x*a.nx+hn.r1y*a.ny;cn+=a.b1.sinertia*(dn*dn),hn.tMass=cn<nape_Config.epsilon*nape_Config.epsilon?0:1/cn;var xn=a.ny*hn.r2x-a.nx*hn.r2y,bn=ln+a.b2.sinertia*(xn*xn),yn=a.ny*hn.r1x-a.nx*hn.r1y;bn+=a.b1.sinertia*(yn*yn),hn.nMass=bn<nape_Config.epsilon*nape_Config.epsilon?0:1/bn;var vn=0,mn=0,gn=a.b2.angvel+a.b2.kinangvel;vn=a.b2.velx+a.b2.kinvelx-hn.r2y*gn,mn=a.b2.vely+a.b2.kinvely+hn.r2x*gn,gn=a.b1.angvel+a.b1.kinangvel,vn-=a.b1.velx+a.b1.kinvelx-hn.r1y*gn,mn-=a.b1.vely+a.b1.kinvely+hn.r1x*gn;var zn=a.nx*vn+a.ny*mn;te.elasticity=a.restitution,hn.bounce=zn*te.elasticity,hn.bounce>-nape_Config.elasticThreshold&&(hn.bounce=0),zn=mn*a.nx-vn*a.ny;var wn=nape_Config.staticFrictionThreshold;hn.friction=zn*zn>wn*wn?a.dyn_fric:a.stat_fric,hn.jnAcc*=rn,hn.jtAcc*=rn}un!=te.active&&(a.contacts.modified=!0),J=d,on=pn,pn=pn.next,d=d.next}}if(a.hc2){if(a.hpc2=!0,a.oc1.posOnly){var On=a.c1;a.c1=a.c2,a.c2=On;var Cn=a.oc1;a.oc1=a.oc2,a.oc2=Cn,a.hc2=!1}else a.oc2.posOnly&&(a.hc2=!1);a.oc1.posOnly&&(sn=!0)}else a.hpc2=!1;if(a.jrAcc*=rn,sn||(a.rn1a=a.ny*a.c1.r1x-a.nx*a.c1.r1y,a.rt1a=a.c1.r1x*a.nx+a.c1.r1y*a.ny,a.rn1b=a.ny*a.c1.r2x-a.nx*a.c1.r2y,a.rt1b=a.c1.r2x*a.nx+a.c1.r2y*a.ny,a.k1x=a.b2.kinvelx-a.c1.r2y*a.b2.kinangvel-(a.b1.kinvelx-a.c1.r1y*a.b1.kinangvel),a.k1y=a.b2.kinvely+a.c1.r2x*a.b2.kinangvel-(a.b1.kinvely+a.c1.r1x*a.b1.kinangvel)),a.hc2)if(a.rn2a=a.ny*a.c2.r1x-a.nx*a.c2.r1y,a.rt2a=a.c2.r1x*a.nx+a.c2.r1y*a.ny,a.rn2b=a.ny*a.c2.r2x-a.nx*a.c2.r2y,a.rt2b=a.c2.r2x*a.nx+a.c2.r2y*a.ny,a.k2x=a.b2.kinvelx-a.c2.r2y*a.b2.kinangvel-(a.b1.kinvelx-a.c2.r1y*a.b1.kinangvel),a.k2y=a.b2.kinvely+a.c2.r2x*a.b2.kinangvel-(a.b1.kinvely+a.c2.r1x*a.b1.kinangvel),a.kMassa=ln+a.b1.sinertia*a.rn1a*a.rn1a+a.b2.sinertia*a.rn1b*a.rn1b,a.kMassb=ln+a.b1.sinertia*a.rn1a*a.rn2a+a.b2.sinertia*a.rn1b*a.rn2b,a.kMassc=ln+a.b1.sinertia*a.rn2a*a.rn2a+a.b2.sinertia*a.rn2b*a.rn2b,a.kMassa*a.kMassa+2*a.kMassb*a.kMassb+a.kMassc*a.kMassc<nape_Config.illConditionedThreshold*(a.kMassa*a.kMassc-a.kMassb*a.kMassb)){if(a.Ka=a.kMassa,a.Kb=a.kMassb,a.Kc=a.kMassc,(Zn=a.kMassa*a.kMassc-a.kMassb*a.kMassb)!=Zn)a.kMassa=a.kMassb=a.kMassc=0;else if(0==Zn){0!=a.kMassa?a.kMassa=1/a.kMassa:(a.kMassa=0,1),0!=a.kMassc?a.kMassc=1/a.kMassc:(a.kMassc=0,2),a.kMassb=0}else{Zn=1/Zn;var En=a.kMassc*Zn;a.kMassc=a.kMassa*Zn,a.kMassa=En,a.kMassb*=-Zn}}else{if(a.hc2=!1,a.oc2.dist<a.oc1.dist){En=a.c1;a.c1=a.c2,a.c2=En}a.oc2.active=!1,a.contacts.modified=!0}a.surfacex=a.b2.svelx,a.surfacey=a.b2.svely;En=1;a.surfacex+=a.b1.svelx*En,a.surfacey+=a.b1.svely*En,a.surfacex=-a.surfacex,a.surfacey=-a.surfacey,a.rMass=a.b1.sinertia+a.b2.sinertia,0!=a.rMass&&(a.rMass=1/a.rMass),sn&&(n.active=!1)}else{-1==(a=n.fluidarb).pre_dt&&(a.pre_dt=e);rn=e/a.pre_dt;a.pre_dt=e,a.r1x=a.centroidx-a.b1.posx,a.r1y=a.centroidy-a.b1.posy,a.r2x=a.centroidx-a.b2.posx,a.r2y=a.centroidy-a.b2.posy;var Un=0,Mn=0;a.ws1.fluidEnabled&&null!=a.ws1.fluidProperties.wrap_gravity?(Un=a.ws1.fluidProperties.gravityx,Mn=a.ws1.fluidProperties.gravityy):(Un=this.gravityx,Mn=this.gravityy);var Tn=0,kn=0;a.ws2.fluidEnabled&&null!=a.ws2.fluidProperties.wrap_gravity?(Tn=a.ws2.fluidProperties.gravityx,kn=a.ws2.fluidProperties.gravityy):(Tn=this.gravityx,kn=this.gravityy);var Dn=0,Sn=0;if(a.ws1.fluidEnabled&&a.ws2.fluidEnabled){var An=a.overlap*a.ws1.fluidProperties.density,Pn=a.overlap*a.ws2.fluidProperties.density;if(An>Pn)Dn-=Un*(En=An+Pn),Sn-=Mn*En;else if(An<Pn){Dn+=Tn*(En=An+Pn),Sn+=kn*En}else{var Vn=0,In=0;if(Vn=Un+Tn,In=Mn+kn,Vn*=En=.5,In*=En,a.ws1.worldCOMx*Vn+a.ws1.worldCOMy*In>a.ws2.worldCOMx*Vn+a.ws2.worldCOMy*In)Dn-=Vn*(En=An+Pn),Sn-=In*En;else Dn+=Vn*(En=An+Pn),Sn+=In*En}}else if(a.ws1.fluidEnabled){Dn-=Un*(En=a.overlap*a.ws1.fluidProperties.density),Sn-=Mn*En}else if(a.ws2.fluidEnabled){Dn+=Tn*(En=a.overlap*a.ws2.fluidProperties.density),Sn+=kn*En}if(Dn*=En=e,Sn*=En,a.buoyx=Dn,a.buoyy=Sn,2==a.b1.type){En=a.b1.imass;a.b1.velx-=Dn*En,a.b1.vely-=Sn*En,a.b1.angvel-=(Sn*a.r1x-Dn*a.r1y)*a.b1.iinertia}if(2==a.b2.type){En=a.b2.imass;a.b2.velx+=Dn*En,a.b2.vely+=Sn*En,a.b2.angvel+=(Sn*a.r2x-Dn*a.r2y)*a.b2.iinertia}if(a.ws1.fluidEnabled&&0!=a.ws1.fluidProperties.viscosity||a.ws2.fluidEnabled&&0!=a.ws2.fluidProperties.viscosity){a.nodrag=!1;var Nn=0;if(a.ws1.fluidEnabled&&(a.ws2.validate_angDrag(),Nn+=a.ws1.fluidProperties.viscosity*a.ws2.angDrag*a.overlap/a.ws2.area),a.ws2.fluidEnabled&&(a.ws1.validate_angDrag(),Nn+=a.ws2.fluidProperties.viscosity*a.ws1.angDrag*a.overlap/a.ws1.area),0!=Nn){var Fn=a.b1.sinertia+a.b2.sinertia;a.wMass=0!=Fn?1/Fn:0,Nn*=4e-4;var Rn=2*Math.PI*Nn;a.agamma=1/(e*Rn*(2+Rn*e));var Ln=1/(1+a.agamma);a.agamma;a.agamma*=Ln,a.wMass*=Ln}else a.wMass=0,a.agamma=0;var Bn=a.b2.velx+a.b2.kinvelx-a.r2y*(a.b2.angvel+a.b2.kinangvel)-(a.b1.velx+a.b1.kinvelx-a.r1y*(a.b2.angvel+a.b2.kinangvel)),Gn=a.b2.vely+a.b2.kinvely+a.r2x*(a.b2.angvel+a.b2.kinangvel)-(a.b1.vely+a.b1.kinvely+a.r1x*(a.b1.angvel+a.b1.kinangvel));if(!(Bn*Bn+Gn*Gn<nape_Config.epsilon*nape_Config.epsilon)){var jn=Bn*Bn+Gn*Gn;Bn*=En=1/Math.sqrt(jn),Gn*=En,a.nx=Bn,a.ny=Gn}Nn=0;if(a.ws1.fluidEnabled){var Kn=-a.ws1.fluidProperties.viscosity*a.overlap/a.ws2.area;if(0==a.ws2.type)Nn-=Kn*a.ws2.circle.radius*nape_Config.fluidLinearDrag/(2*a.ws2.circle.radius*Math.PI);else{var Wn=0,Yn=0;for(d=a.ws2.polygon.edges.head;null!=d;){Wn+=(Xn=d.elt).length,(Hn=Kn*Xn.length*(Xn.gnormx*a.nx+Xn.gnormy*a.ny))>0&&(Hn*=-nape_Config.fluidVacuumDrag),Yn-=.5*Hn*nape_Config.fluidLinearDrag,d=d.next}Nn+=Yn/Wn}}if(a.ws2.fluidEnabled){Kn=-a.ws2.fluidProperties.viscosity*a.overlap/a.ws1.area;if(0==a.ws1.type)Nn-=Kn*a.ws1.circle.radius*nape_Config.fluidLinearDrag/(2*a.ws1.circle.radius*Math.PI);else{for(Wn=0,Yn=0,d=a.ws1.polygon.edges.head;null!=d;){var Xn,Hn;Wn+=(Xn=d.elt).length,(Hn=Kn*Xn.length*(Xn.gnormx*a.nx+Xn.gnormy*a.ny))>0&&(Hn*=-nape_Config.fluidVacuumDrag),Yn-=.5*Hn*nape_Config.fluidLinearDrag,d=d.next}Nn+=Yn/Wn}}if(0!=Nn){var Zn,qn=a.b1.smass+a.b2.smass,$n=0,Qn=0,Jn=0;if($n=qn,Qn=0,Jn=qn,0!=a.b1.sinertia){var ne=a.r1x*a.b1.sinertia;$n+=(ee=a.r1y*a.b1.sinertia)*a.r1y,Qn+=-ee*a.r1x,Jn+=ne*a.r1x}if(0!=a.b2.sinertia){var ee;ne=a.r2x*a.b2.sinertia;$n+=(ee=a.r2y*a.b2.sinertia)*a.r2y,Qn+=-ee*a.r2x,Jn+=ne*a.r2x}if((Zn=$n*Jn-Qn*Qn)!=Zn)$n=Qn=Jn=0;else if(0==Zn){0!=$n?$n=1/$n:($n=0,1),0!=Jn?Jn=1/Jn:(Jn=0,2),Qn=0}else{En=Jn*(Zn=1/Zn);Jn=$n*Zn,$n=En,Qn*=-Zn}a.vMassa=$n,a.vMassb=Qn,a.vMassc=Jn;Rn=2*Math.PI*Nn;a.lgamma=1/(e*Rn*(2+Rn*e));Ln=1/(1+a.lgamma);e*Rn*Rn*a.lgamma,a.lgamma*=Ln;ne=Ln;a.vMassa*=ne,a.vMassb*=ne,a.vMassc*=ne}else a.vMassa=0,a.vMassb=0,a.vMassc=0,a.lgamma=0}else a.nodrag=!0,a.dampx=0,a.dampy=0,a.adamp=0;En=rn;a.dampx*=En,a.dampy*=En,a.adamp*=rn}}else if(null!=n.colarb){sn=!0,J=null,on=null,pn=(a=n.colarb).innards.next;a.hc2=!1;for(d=a.contacts.next;null!=d;){var te;if((te=d).stamp+nape_Config.arbiterExpirationDelay<a.stamp){var ie;_=a.contacts;null==J?(o=(ie=_.next).next,_.next=o,null==_.next&&(_.pushmod=!0)):(o=(ie=J.next).next,J.next=o,null==o&&(_.pushmod=!0)),ie._inuse=!1,_.modified=!0,_.length--,_.pushmod=!0,d=o;var re;A=a.innards;null==on?(en=(re=A.next).next,A.next=en,null==A.next&&(A.pushmod=!0)):(en=(re=on.next).next,on.next=en,null==en&&(A.pushmod=!0)),re._inuse=!1,A.modified=!0,A.length--,A.pushmod=!0,pn=en,(p=te).arbiter=null,p.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=p}else{hn=te.inner,un=te.active;te.active=te.stamp==a.stamp,te.active&&(sn?(sn=!1,a.c1=hn,a.oc1=te):(a.hc2=!0,a.c2=hn,a.oc2=te)),un!=te.active&&(a.contacts.modified=!0),J=d,on=pn,pn=pn.next,d=d.next}}if(a.hc2){if(a.hpc2=!0,a.oc1.posOnly){On=a.c1;a.c1=a.c2,a.c2=On;Cn=a.oc1;a.oc1=a.oc2,a.oc2=Cn,a.hc2=!1}else a.oc2.posOnly&&(a.hc2=!1);a.oc1.posOnly&&(sn=!0)}else a.hpc2=!1;sn&&(n.active=!1)}return tn!=n.active&&(n.b1.arbiters.modified=!0,n.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0),!1},prestep:function(n){for(var e=null,t=this.live_constraints.head;null!=t;){var i=t.elt;i.preStep(n)?(t=this.live_constraints.erase(e),i.broken(),this.constraintCbBreak(i),i.removeOnBreak?(i.component.sleeping=!0,this.midstep=!1,null!=i.compound?i.compound.wrap_constraints.remove(i.outer):this.wrap_constraints.remove(i.outer),this.midstep=!0):i.active=!1,i.clearcache()):(e=t,t=t.next)}e=null;var r=(s=this.c_arbiters_true).head;for((a=null!=this.c_arbiters_false)&&null==r&&(a=!1,r=this.c_arbiters_false.head,s=this.c_arbiters_false,e=null);null!=r;){var l=r.elt;if(this.presteparb(l,n))null==e?(p=(o=s.head).next,s.head=p,null==s.head&&(s.pushmod=!0)):(p=(o=e.next).next,e.next=p,null==p&&(s.pushmod=!0)),(h=o).elt=null,h.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=h,s.modified=!0,s.length--,s.pushmod=!0,r=p,a&&null==r&&(a=!1,r=this.c_arbiters_false.head,s=this.c_arbiters_false,e=null);else e=r,r=r.next,a&&null==r&&(a=!1,r=this.c_arbiters_false.head,s=this.c_arbiters_false,e=null)}e=null,r=(s=this.f_arbiters).head;for((a=!1)&&null==r&&(a=!1,r=null.begin(),s=null,e=null);null!=r;){l=r.elt;if(this.presteparb(l,n))null==e?(p=(o=s.head).next,s.head=p,null==s.head&&(s.pushmod=!0)):(p=(o=e.next).next,e.next=p,null==p&&(s.pushmod=!0)),(h=o).elt=null,h.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=h,s.modified=!0,s.length--,s.pushmod=!0,r=p,a&&null==r&&(a=!1,r=null.begin(),s=null,e=null);else e=r,r=r.next,a&&null==r&&(a=!1,r=null.begin(),s=null,e=null)}var s,a;e=null,r=(s=this.s_arbiters).head;for((a=!1)&&null==r&&(a=!1,r=null.begin(),s=null,e=null);null!=r;){var o,p,h;l=r.elt;if(this.presteparb(l,n))null==e?(p=(o=s.head).next,s.head=p,null==s.head&&(s.pushmod=!0)):(p=(o=e.next).next,e.next=p,null==p&&(s.pushmod=!0)),(h=o).elt=null,h.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=h,s.modified=!0,s.length--,s.pushmod=!0,r=p,a&&null==r&&(a=!1,r=null.begin(),s=null,e=null);else e=r,r=r.next,a&&null==r&&(a=!1,r=null.begin(),s=null,e=null)}},warmStart:function(){for(var n=this.f_arbiters.head;null!=n;){if((l=n.elt).active&&0!=(1&l.immState)){var e=l.b1.imass;l.b1.velx-=l.dampx*e,l.b1.vely-=l.dampy*e;var t=l.b2.imass;l.b2.velx+=l.dampx*t,l.b2.vely+=l.dampy*t,l.b1.angvel-=l.b1.iinertia*(l.dampy*l.r1x-l.dampx*l.r1y),l.b2.angvel+=l.b2.iinertia*(l.dampy*l.r2x-l.dampx*l.r2y),l.b1.angvel-=l.adamp*l.b1.iinertia,l.b2.angvel+=l.adamp*l.b2.iinertia}n=n.next}var i=this.c_arbiters_false.head,r=!0;for(null==i&&(i=this.c_arbiters_true.head,r=!1);null!=i;){var l;if((l=i.elt).active&&0!=(1&l.immState)){var s=l.nx*l.c1.jnAcc-l.ny*l.c1.jtAcc,a=l.ny*l.c1.jnAcc+l.nx*l.c1.jtAcc;e=l.b1.imass;l.b1.velx-=s*e,l.b1.vely-=a*e,l.b1.angvel-=l.b1.iinertia*(a*l.c1.r1x-s*l.c1.r1y);t=l.b2.imass;if(l.b2.velx+=s*t,l.b2.vely+=a*t,l.b2.angvel+=l.b2.iinertia*(a*l.c1.r2x-s*l.c1.r2y),l.hc2){var o=l.nx*l.c2.jnAcc-l.ny*l.c2.jtAcc,p=l.ny*l.c2.jnAcc+l.nx*l.c2.jtAcc,h=l.b1.imass;l.b1.velx-=o*h,l.b1.vely-=p*h,l.b1.angvel-=l.b1.iinertia*(p*l.c2.r1x-o*l.c2.r1y);var u=l.b2.imass;l.b2.velx+=o*u,l.b2.vely+=p*u,l.b2.angvel+=l.b2.iinertia*(p*l.c2.r2x-o*l.c2.r2y)}l.b2.angvel+=l.jrAcc*l.b2.iinertia,l.b1.angvel-=l.jrAcc*l.b1.iinertia}i=i.next,r&&null==i&&(i=this.c_arbiters_true.head,r=!1)}for(n=this.live_constraints.head;null!=n;){n.elt.warmStart(),n=n.next}},iterateVel:function(n){for(var e=0,t=n;e<t;){e++;for(var i=this.f_arbiters.head;null!=i;){var r=i.elt;if(r.active&&0!=(1&r.immState)&&!r.nodrag){var l=r.b1.angvel+r.b1.kinangvel,s=r.b2.angvel+r.b2.kinangvel,a=r.b1.velx+r.b1.kinvelx-r.r1y*l-(r.b2.velx+r.b2.kinvelx-r.r2y*s),o=r.b1.vely+r.b1.kinvely+r.r1x*l-(r.b2.vely+r.b2.kinvely+r.r2x*s),p=r.vMassa*a+r.vMassb*o;o=r.vMassb*a+r.vMassc*o,a=p;var h=r.lgamma;a-=r.dampx*h,o-=r.dampy*h;r.dampx+=1*a,r.dampy+=1*o;var u=r.b1.imass;r.b1.velx-=a*u,r.b1.vely-=o*u;var _=r.b2.imass;r.b2.velx+=a*_,r.b2.vely+=o*_,r.b1.angvel-=r.b1.iinertia*(o*r.r1x-a*r.r1y),r.b2.angvel+=r.b2.iinertia*(o*r.r2x-a*r.r2y);var c=(l-s)*r.wMass-r.adamp*r.agamma;r.adamp+=c,r.b1.angvel-=c*r.b1.iinertia,r.b2.angvel+=c*r.b2.iinertia}i=i.next}for(var d=null,f=this.live_constraints.head;null!=f;){var x=f.elt;x.applyImpulseVel()?(f=this.live_constraints.erase(d),x.broken(),this.constraintCbBreak(x),x.removeOnBreak?(x.component.sleeping=!0,this.midstep=!1,null!=x.compound?x.compound.wrap_constraints.remove(x.outer):this.wrap_constraints.remove(x.outer),this.midstep=!0):x.active=!1,x.clearcache()):(d=f,f=f.next)}var b=this.c_arbiters_false.head,y=!0;for(null==b&&(b=this.c_arbiters_true.head,y=!1);null!=b;){var v=b.elt;if(v.active&&0!=(1&v.immState)){var m=v.k1x+v.b2.velx-v.c1.r2y*v.b2.angvel-(v.b1.velx-v.c1.r1y*v.b1.angvel),g=v.k1y+v.b2.vely+v.c1.r2x*v.b2.angvel-(v.b1.vely+v.c1.r1x*v.b1.angvel),z=(g*v.nx-m*v.ny+v.surfacex)*v.c1.tMass,w=v.c1.friction*v.c1.jnAcc,O=v.c1.jtAcc,C=O-z;C>w?C=w:C<-w&&(C=-w),z=C-O,v.c1.jtAcc=C;var E=-v.ny*z,U=v.nx*z;if(v.b2.velx+=E*v.b2.imass,v.b2.vely+=U*v.b2.imass,v.b1.velx-=E*v.b1.imass,v.b1.vely-=U*v.b1.imass,v.b2.angvel+=v.rt1b*z*v.b2.iinertia,v.b1.angvel-=v.rt1a*z*v.b1.iinertia,v.hc2){var M=v.k2x+v.b2.velx-v.c2.r2y*v.b2.angvel-(v.b1.velx-v.c2.r1y*v.b1.angvel),T=v.k2y+v.b2.vely+v.c2.r2x*v.b2.angvel-(v.b1.vely+v.c2.r1x*v.b1.angvel);z=(T*v.nx-M*v.ny+v.surfacex)*v.c2.tMass,w=v.c2.friction*v.c2.jnAcc,(C=(O=v.c2.jtAcc)-z)>w?C=w:C<-w&&(C=-w),z=C-O,v.c2.jtAcc=C,E=-v.ny*z,U=v.nx*z,v.b2.velx+=E*v.b2.imass,v.b2.vely+=U*v.b2.imass,v.b1.velx-=E*v.b1.imass,v.b1.vely-=U*v.b1.imass,v.b2.angvel+=v.rt2b*z*v.b2.iinertia,v.b1.angvel-=v.rt2a*z*v.b1.iinertia,m=v.k1x+v.b2.velx-v.c1.r2y*v.b2.angvel-(v.b1.velx-v.c1.r1y*v.b1.angvel),g=v.k1y+v.b2.vely+v.c1.r2x*v.b2.angvel-(v.b1.vely+v.c1.r1x*v.b1.angvel),M=v.k2x+v.b2.velx-v.c2.r2y*v.b2.angvel-(v.b1.velx-v.c2.r1y*v.b1.angvel),T=v.k2y+v.b2.vely+v.c2.r2x*v.b2.angvel-(v.b1.vely+v.c2.r1x*v.b1.angvel);var k=v.c1.jnAcc,D=v.c2.jnAcc,S=m*v.nx+g*v.ny+v.surfacey+v.c1.bounce-(v.Ka*k+v.Kb*D),A=M*v.nx+T*v.ny+v.surfacey+v.c2.bounce-(v.Kb*k+v.Kc*D),P=-(v.kMassa*S+v.kMassb*A),V=-(v.kMassb*S+v.kMassc*A);P>=0&&V>=0?(S=P-k,A=V-D,v.c1.jnAcc=P,v.c2.jnAcc=V):(P=-v.c1.nMass*S)>=0&&v.Kb*P+A>=0?(S=P-k,A=-D,v.c1.jnAcc=P,v.c2.jnAcc=0):(V=-v.c2.nMass*A)>=0&&v.Kb*V+S>=0?(S=-k,A=V-D,v.c1.jnAcc=0,v.c2.jnAcc=V):S>=0&&A>=0?(S=-k,A=-D,v.c1.jnAcc=v.c2.jnAcc=0):(S=0,A=0),z=S+A,E=v.nx*z,U=v.ny*z,v.b2.velx+=E*v.b2.imass,v.b2.vely+=U*v.b2.imass,v.b1.velx-=E*v.b1.imass,v.b1.vely-=U*v.b1.imass,v.b2.angvel+=(v.rn1b*S+v.rn2b*A)*v.b2.iinertia,v.b1.angvel-=(v.rn1a*S+v.rn2a*A)*v.b1.iinertia}else{if(0!=v.radius)z=(v.b2.angvel-v.b1.angvel)*v.rMass,w=v.rfric*v.c1.jnAcc,O=v.jrAcc,v.jrAcc-=z,v.jrAcc>w?v.jrAcc=w:v.jrAcc<-w&&(v.jrAcc=-w),z=v.jrAcc-O,v.b2.angvel+=z*v.b2.iinertia,v.b1.angvel-=z*v.b1.iinertia;m=v.k1x+v.b2.velx-v.c1.r2y*v.b2.angvel-(v.b1.velx-v.c1.r1y*v.b1.angvel),g=v.k1y+v.b2.vely+v.c1.r2x*v.b2.angvel-(v.b1.vely+v.c1.r1x*v.b1.angvel),z=(v.c1.bounce+(v.nx*m+v.ny*g)+v.surfacey)*v.c1.nMass,(C=(O=v.c1.jnAcc)-z)<0&&(C=0),z=C-O,v.c1.jnAcc=C,E=v.nx*z,U=v.ny*z,v.b2.velx+=E*v.b2.imass,v.b2.vely+=U*v.b2.imass,v.b1.velx-=E*v.b1.imass,v.b1.vely-=U*v.b1.imass,v.b2.angvel+=v.rn1b*z*v.b2.iinertia,v.b1.angvel-=v.rn1a*z*v.b1.iinertia}}b=b.next,y&&null==b&&(b=this.c_arbiters_true.head,y=!1)}}},iteratePos:function(n){for(var e=0,t=n;e<t;){e++;for(var i=null,r=this.live_constraints.head;null!=r;){var l=r.elt;!l.__velocity&&l.stiff&&l.applyImpulsePos()?(r=this.live_constraints.erase(i),l.broken(),this.constraintCbBreak(l),l.removeOnBreak?(l.component.sleeping=!0,this.midstep=!1,null!=l.compound?l.compound.wrap_constraints.remove(l.outer):this.wrap_constraints.remove(l.outer),this.midstep=!0):l.active=!1,l.clearcache()):(i=r,r=r.next)}var s=this.c_arbiters_false.head,a=!0;for(null==s&&(s=this.c_arbiters_true.head,a=!1);null!=s;){var o=s.elt;if(o.active&&0!=(1&o.immState))if(2==o.ptype){var p=o.c1,h=0,u=0;h=o.b2.axisy*p.lr2x-o.b2.axisx*p.lr2y,u=p.lr2x*o.b2.axisx+p.lr2y*o.b2.axisy;h+=1*o.b2.posx,u+=1*o.b2.posy;var _=0,c=0;_=o.b1.axisy*p.lr1x-o.b1.axisx*p.lr1y,c=p.lr1x*o.b1.axisx+p.lr1y*o.b1.axisy;var d=0,f=0;d=h-(_+=1*o.b1.posx),f=u-(c+=1*o.b1.posy);var x=Math.sqrt(d*d+f*f),b=o.radius-nape_Config.collisionSlop,y=x-b;if(d*o.nx+f*o.ny<0&&(d=-d,f=-f,y-=o.radius),y<0)if(x<nape_Config.epsilon)0!=o.b1.smass?o.b1.posx+=10*nape_Config.epsilon:o.b2.posx+=10*nape_Config.epsilon;else{var v=1/x;d*=v;var m=.5*(_+h),g=.5*(c+u),z=x-b,w=(f*=v)*(_=m-o.b1.posx)-d*(c=g-o.b1.posy),O=f*(h=m-o.b2.posx)-d*(u=g-o.b2.posy),C=o.b2.smass+O*O*o.b2.sinertia+o.b1.smass+w*w*o.b1.sinertia;if(0!=C){var E,U,M=-o.biasCoef*z/C;E=d*M,U=f*M;var T=o.b1.imass;o.b1.posx-=E*T,o.b1.posy-=U*T;var k=o.b1,D=-w*o.b1.iinertia*M;if(k.rot+=D,D*D>1e-4)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{var S=D*D,A=1-.5*S,P=1-S*S/8,V=(A*k.axisx+D*k.axisy)*P;k.axisy=(A*k.axisy-D*k.axisx)*P,k.axisx=V}var I=o.b2.imass;o.b2.posx+=E*I,o.b2.posy+=U*I;var N=o.b2,F=O*o.b2.iinertia*M;if(N.rot+=F,F*F>1e-4)N.axisx=Math.sin(N.rot),N.axisy=Math.cos(N.rot);else{var R=F*F,L=1-.5*R,B=1-R*R/8,G=(L*N.axisx+F*N.axisy)*B;N.axisy=(L*N.axisy-F*N.axisx)*B,N.axisx=G}}}}else{var j,K=0,W=0,Y=0,X=0,H=0,Z=0;if(0==o.ptype){K=o.b1.axisy*o.lnormx-o.b1.axisx*o.lnormy,W=o.lnormx*o.b1.axisx+o.lnormy*o.b1.axisy,j=o.lproj+(K*o.b1.posx+W*o.b1.posy),Y=o.b2.axisy*o.c1.lr1x-o.b2.axisx*o.c1.lr1y,X=o.c1.lr1x*o.b2.axisx+o.c1.lr1y*o.b2.axisy;if(Y+=1*o.b2.posx,X+=1*o.b2.posy,o.hpc2){H=o.b2.axisy*o.c2.lr1x-o.b2.axisx*o.c2.lr1y,Z=o.c2.lr1x*o.b2.axisx+o.c2.lr1y*o.b2.axisy;H+=1*o.b2.posx,Z+=1*o.b2.posy}}else{K=o.b2.axisy*o.lnormx-o.b2.axisx*o.lnormy,W=o.lnormx*o.b2.axisx+o.lnormy*o.b2.axisy,j=o.lproj+(K*o.b2.posx+W*o.b2.posy),Y=o.b1.axisy*o.c1.lr1x-o.b1.axisx*o.c1.lr1y,X=o.c1.lr1x*o.b1.axisx+o.c1.lr1y*o.b1.axisy;if(Y+=1*o.b1.posx,X+=1*o.b1.posy,o.hpc2){H=o.b1.axisy*o.c2.lr1x-o.b1.axisx*o.c2.lr1y,Z=o.c2.lr1x*o.b1.axisx+o.c2.lr1y*o.b1.axisy;H+=1*o.b1.posx,Z+=1*o.b1.posy}}var q=Y*K+X*W-j-o.radius;q+=nape_Config.collisionSlop;var $=0;if(o.hpc2&&($=H*K+Z*W-j-o.radius,$+=nape_Config.collisionSlop),q<0||$<0){o.rev&&(K=-K,W=-W);var Q,J;Q=Y-o.b1.posx,J=X-o.b1.posy;var nn,en;nn=Y-o.b2.posx,en=X-o.b2.posy;if(o.hpc2){var tn=W*Q-K*J,rn=W*nn-K*en,ln=W*(H-o.b1.posx)-K*(Z-o.b1.posy),sn=W*(H-o.b2.posx)-K*(Z-o.b2.posy),an=o.b1.smass+o.b2.smass;o.kMassa=an+o.b1.sinertia*tn*tn+o.b2.sinertia*rn*rn,o.kMassb=an+o.b1.sinertia*tn*ln+o.b2.sinertia*rn*sn,o.kMassc=an+o.b1.sinertia*ln*ln+o.b2.sinertia*sn*sn;var on,pn,hn;on=o.kMassa,pn=o.kMassb,hn=o.kMassc;for(var un=q*o.biasCoef,_n=$*o.biasCoef;;){var cn=0,dn=0;cn=-(cn=un),dn=-(dn=_n);var xn=o.kMassa*o.kMassc-o.kMassb*o.kMassb;if(xn!=xn)cn=dn=0;else if(0==xn)0!=o.kMassa?cn/=o.kMassa:cn=0,0!=o.kMassc?dn/=o.kMassc:dn=0;else{var bn=(xn=1/xn)*(o.kMassc*cn-o.kMassb*dn);dn=xn*(o.kMassa*dn-o.kMassb*cn),cn=bn}if(cn>=0&&dn>=0){var yn=(cn+dn)*o.b1.imass;o.b1.posx-=K*yn,o.b1.posy-=W*yn;var vn=o.b1,mn=-o.b1.iinertia*(tn*cn+ln*dn);if(vn.rot+=mn,mn*mn>1e-4)vn.axisx=Math.sin(vn.rot),vn.axisy=Math.cos(vn.rot);else{var gn=mn*mn,zn=1-.5*gn,wn=1-gn*gn/8,On=(zn*vn.axisx+mn*vn.axisy)*wn;vn.axisy=(zn*vn.axisy-mn*vn.axisx)*wn,vn.axisx=On}var Cn=(cn+dn)*o.b2.imass;o.b2.posx+=K*Cn,o.b2.posy+=W*Cn;var En=o.b2,Un=o.b2.iinertia*(rn*cn+sn*dn);if(En.rot+=Un,Un*Un>1e-4)En.axisx=Math.sin(En.rot),En.axisy=Math.cos(En.rot);else{var Mn=Un*Un,Tn=1-.5*Mn,kn=1-Mn*Mn/8,Dn=(Tn*En.axisx+Un*En.axisy)*kn;En.axisy=(Tn*En.axisy-Un*En.axisx)*kn,En.axisx=Dn}break}if(dn=0,(cn=-un/on)>=0&&pn*cn+_n>=0){var Sn=(cn+dn)*o.b1.imass;o.b1.posx-=K*Sn,o.b1.posy-=W*Sn;var An=o.b1,Pn=-o.b1.iinertia*(tn*cn+ln*dn);if(An.rot+=Pn,Pn*Pn>1e-4)An.axisx=Math.sin(An.rot),An.axisy=Math.cos(An.rot);else{var Vn=Pn*Pn,In=1-.5*Vn,Nn=1-Vn*Vn/8,Fn=(In*An.axisx+Pn*An.axisy)*Nn;An.axisy=(In*An.axisy-Pn*An.axisx)*Nn,An.axisx=Fn}var Rn=(cn+dn)*o.b2.imass;o.b2.posx+=K*Rn,o.b2.posy+=W*Rn;var Ln=o.b2,Bn=o.b2.iinertia*(rn*cn+sn*dn);if(Ln.rot+=Bn,Bn*Bn>1e-4)Ln.axisx=Math.sin(Ln.rot),Ln.axisy=Math.cos(Ln.rot);else{var Gn=Bn*Bn,jn=1-.5*Gn,Kn=1-Gn*Gn/8,Wn=(jn*Ln.axisx+Bn*Ln.axisy)*Kn;Ln.axisy=(jn*Ln.axisy-Bn*Ln.axisx)*Kn,Ln.axisx=Wn}break}if(cn=0,(dn=-_n/hn)>=0&&pn*dn+un>=0){var Yn=(cn+dn)*o.b1.imass;o.b1.posx-=K*Yn,o.b1.posy-=W*Yn;var Xn=o.b1,Hn=-o.b1.iinertia*(tn*cn+ln*dn);if(Xn.rot+=Hn,Hn*Hn>1e-4)Xn.axisx=Math.sin(Xn.rot),Xn.axisy=Math.cos(Xn.rot);else{var Zn=Hn*Hn,qn=1-.5*Zn,$n=1-Zn*Zn/8,Qn=(qn*Xn.axisx+Hn*Xn.axisy)*$n;Xn.axisy=(qn*Xn.axisy-Hn*Xn.axisx)*$n,Xn.axisx=Qn}var Jn=(cn+dn)*o.b2.imass;o.b2.posx+=K*Jn,o.b2.posy+=W*Jn;var ne=o.b2,ee=o.b2.iinertia*(rn*cn+sn*dn);if(ne.rot+=ee,ee*ee>1e-4)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var te=ee*ee,ie=1-.5*te,re=1-te*te/8,le=(ie*ne.axisx+ee*ne.axisy)*re;ne.axisy=(ie*ne.axisy-ee*ne.axisx)*re,ne.axisx=le}break}break}}else{var se=W*Q-K*J,ae=W*nn-K*en,oe=o.b2.smass+ae*ae*o.b2.sinertia+o.b1.smass+se*se*o.b1.sinertia;if(0!=oe){var pe,he,ue=-o.biasCoef*q/oe;pe=K*ue,he=W*ue;var _e=o.b1.imass;o.b1.posx-=pe*_e,o.b1.posy-=he*_e;var ce=o.b1,de=-se*o.b1.iinertia*ue;if(ce.rot+=de,de*de>1e-4)ce.axisx=Math.sin(ce.rot),ce.axisy=Math.cos(ce.rot);else{var fe=de*de,xe=1-.5*fe,be=1-fe*fe/8,ye=(xe*ce.axisx+de*ce.axisy)*be;ce.axisy=(xe*ce.axisy-de*ce.axisx)*be,ce.axisx=ye}var ve=o.b2.imass;o.b2.posx+=pe*ve,o.b2.posy+=he*ve;var me=o.b2,ge=ae*o.b2.iinertia*ue;if(me.rot+=ge,ge*ge>1e-4)me.axisx=Math.sin(me.rot),me.axisy=Math.cos(me.rot);else{var ze=ge*ge,we=1-.5*ze,Oe=1-ze*ze/8,Ce=(we*me.axisx+ge*me.axisy)*Oe;me.axisy=(we*me.axisy-ge*me.axisx)*Oe,me.axisx=Ce}}}}}s=s.next,a&&null==s&&(s=this.c_arbiters_true.head,a=!1)}}},group_ignore:function(n,e){for(var t=n;null!=t&&null==t.group;)t=null!=t.ishape?t.ishape.body:null!=t.icompound?t.icompound.compound:t.ibody.compound;var i=null==t?null:t.group;if(null==i)return!1;for(t=e;null!=t&&null==t.group;)t=null!=t.ishape?t.ishape.body:null!=t.icompound?t.icompound.compound:t.ibody.compound;var r=null==t?null:t.group;if(null==r)return!1;for(var l=!1;null!=i&&null!=r;){if(i==r){l=i.ignore;break}i.depth<r.depth?r=r.group:i=i.group}return l},interactionType:function(n,e,t,i){var r;r=!1;for(var l=t.constraints.head;null!=l;){var s=l.elt;if(s.ignore&&s.pair_exists(t.id,i.id)){r=!0;break}l=l.next}if(r)_=!1;else{for(var a=n;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;var o,p=null==a?null:a.group;if(null==p)o=!1;else{for(a=e;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;var h=null==a?null:a.group;if(null==h)o=!1;else{for(var u=!1;null!=p&&null!=h;){if(p==h){u=p.ignore;break}p.depth<h.depth?h=h.group:p=p.group}o=u}}_=!o}if(_){var _;if(n.sensorEnabled||e.sensorEnabled){var c=n.filter,d=e.filter;_=0!=(c.sensorMask&d.sensorGroup)&&0!=(d.sensorMask&c.sensorGroup)}else _=!1;if(_)return 2;if(n.fluidEnabled||e.fluidEnabled){c=n.filter,d=e.filter;_=0!=(c.fluidMask&d.fluidGroup)&&0!=(d.fluidMask&c.fluidGroup)}else _=!1;if(!_||0==t.imass&&0==i.imass&&0==t.iinertia&&0==i.iinertia){c=n.filter,d=e.filter;return 0==(c.collisionMask&d.collisionGroup)||0==(d.collisionMask&c.collisionGroup)||0==t.imass&&0==i.imass&&0==t.iinertia&&0==i.iinertia?-1:1}return 0}return-1},narrowPhase:function(n,e,t,i,r){var l,s=this,a=null,o=n.body,p=e.body;l=!1;for(var h,u=o.constraints.head;null!=u;){var _=u.elt;if(_.ignore&&_.pair_exists(o.id,p.id)){l=!0;break}u=u.next}if(l)m=!1;else{for(var c=n;null!=c&&null==c.group;)c=null!=c.ishape?c.ishape.body:null!=c.icompound?c.icompound.compound:c.ibody.compound;var d,f=null==c?null:c.group;if(null==f)d=!1;else{for(c=e;null!=c&&null==c.group;)c=null!=c.ishape?c.ishape.body:null!=c.icompound?c.icompound.compound:c.ibody.compound;var x=null==c?null:c.group;if(null==x)d=!1;else{for(var b=!1;null!=f&&null!=x;){if(f==x){b=f.ignore;break}f.depth<x.depth?x=x.group:f=f.group}d=b}}m=!d}if(m){if(n.sensorEnabled||e.sensorEnabled){var y=n.filter,v=e.filter;m=0!=(y.sensorMask&v.sensorGroup)&&0!=(v.sensorMask&y.sensorGroup)}else m=!1;if(m)h=2;else{var m;if(n.fluidEnabled||e.fluidEnabled){y=n.filter,v=e.filter;m=0!=(y.fluidMask&v.fluidGroup)&&0!=(v.fluidMask&y.fluidGroup)}else m=!1;if(!m||0==o.imass&&0==p.imass&&0==o.iinertia&&0==p.iinertia){y=n.filter,v=e.filter;h=0==(y.collisionMask&v.collisionGroup)||0==(v.collisionMask&y.collisionGroup)||0==o.imass&&0==p.imass&&0==o.iinertia&&0==p.iinertia?-1:1}else h=0}}else h=-1;if(-1!=h){var g,z;n.type>e.type?(g=e,z=n):n.type==e.type?n.id<e.id?(g=n,z=e):(z=n,g=e):(g=n,z=e);var w=g==e;if(0==h){if(null==i){for(b=null,u=(C=o.arbiters.length<p.arbiters.length?o:p).arbiters.head;null!=u;){if((Tn=u.elt).id==g.id&&Tn.di==z.id){b=Tn;break}u=u.next}Un=b}else Un=i;var O=!1;if(Mn=null==Un)null==zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool?Tn=new zpp_$nape_dynamics_ZPP_$FluidArbiter:(Tn=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=Tn.next,Tn.next=null);else if(null==Un.fluidarb){var C=null;if(Un.cleared=!0,null==C||Un.b2==C){var E=null;for(c=(y=Un.b1.arbiters).head,b=!1;null!=c;){if(c.elt==Un){null==E?(Sn=(kn=y.head).next,y.head=Sn,null==y.head&&(y.pushmod=!0)):(Sn=(kn=E.next).next,E.next=Sn,null==Sn&&(y.pushmod=!0)),(S=kn).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=S,y.modified=!0,y.length--,y.pushmod=!0,b=!0;break}E=c,c=c.next}}if(null==C||Un.b1==C)for(E=null,c=(y=Un.b2.arbiters).head,b=!1;null!=c;){if(c.elt==Un){null==E?(Sn=(kn=y.head).next,y.head=Sn,null==y.head&&(y.pushmod=!0)):(Sn=(kn=E.next).next,E.next=Sn,null==Sn&&(y.pushmod=!0)),(S=kn).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=S,y.modified=!0,y.length--,y.pushmod=!0,b=!0;break}E=c,c=c.next}null!=Un.pair&&(Un.pair.arb=null,Un.pair=null),Un.active=!1,this.f_arbiters.modified=!0,null==zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool?Tn=new zpp_$nape_dynamics_ZPP_$FluidArbiter:(Tn=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=Tn.next,Tn.next=null),Tn.intchange=!0,Mn=!0,O=!0}else Tn=Un.fluidarb;var U=4;if(Mn||Tn.stamp!=this.stamp||r)if(Tn.stamp=this.stamp,zpp_$nape_geom_ZPP_$Collide.flowCollide(g,z,Tn)){if(Mn){var M=z.id;Tn.b1=n.body,Tn.ws1=n,Tn.b2=e.body,Tn.ws2=e,Tn.id=g.id,Tn.di=M;y=Tn.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++;y=Tn.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++,Tn.active=!0,Tn.present=0,Tn.cleared=!1,Tn.sleeping=!1,Tn.fresh=!1,Tn.presentable=!1,Tn.nx=0,Tn.ny=1,Tn.dampx=0,Tn.dampy=0,Tn.adamp=0;y=this.f_arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++,Tn.fresh=!O}else Tn.fresh=Tn.up_stamp<this.stamp-1||Tn.endGenerated==this.stamp&&r;if(Tn.up_stamp=Tn.stamp,Tn.fresh||0==(4&Tn.immState)){Tn.immState=1;var T=!1,k=Tn.ws1.id>Tn.ws2.id?Tn.ws2:Tn.ws1,D=Tn.ws1.id>Tn.ws2.id?Tn.ws1:Tn.ws2;for(y=this.mrca1;null!=y.head;){b=y.head;y.head=b.next,(S=b).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=S,null==y.head&&(y.pushmod=!0),y.modified=!0,y.length--}y.pushmod=!0;for(y=this.mrca2;null!=y.head;){b=y.head;y.head=b.next,(S=b).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=S,null==y.head&&(y.pushmod=!0),y.modified=!0,y.length--}if(y.pushmod=!0,null!=k.cbSet){y=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=k,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=k.body.cbSet){y=this.mrca1;var S=k.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=S,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=D.cbSet){y=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=D,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=D.body.cbSet){y=this.mrca2,S=D.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=S,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}for(var A=k.body.compound,P=D.body.compound;A!=P;){if((null==A?0:A.depth)<(null==P?0:P.depth)){if(null!=P.cbSet){y=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=P,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}P=P.compound}else{if(null!=A.cbSet){var V=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?Sn=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(Sn=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=Sn.next,Sn.next=null),Sn.elt=A,(Dn=Sn).next=V.head,V.head=Dn,V.modified=!0,V.length++}A=A.compound}}for(u=this.mrca1.head;null!=u;){for(var I=u.elt,N=this.mrca2.head;null!=N;){for(var F=N.elt,R=I.cbSet,L=F.cbSet,B=(y=R.manager,b=null,(R.cbpairs.length<L.cbpairs.length?R.cbpairs:L.cbpairs).head);null!=B;){if((An=B.elt).a==R&&An.b==L||An.a==L&&An.b==R){b=An;break}B=B.next}if(null==b)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?Sn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(Sn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=Sn.next,Sn.next=null),Sn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,L)?(Sn.a=R,Sn.b=L):(Sn.a=L,Sn.b=R),b=Sn,R.cbpairs.add(b),L!=R&&L.cbpairs.add(b);if(b.zip_listeners&&(b.zip_listeners=!1,b.__validate()),null!=b.listeners.head){var G=null,j=null;for(V=this.prelisteners;null!=V.head;){var K=V.head;V.head=K.next,(S=K).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=S,null==V.head&&(V.pushmod=!0),V.modified=!0,V.length--}V.pushmod=!0;for(var W=null,Y=(R.manager,null),X=(R.cbpairs.length<L.cbpairs.length?R.cbpairs:L.cbpairs).head;null!=X;){if((Vn=X.elt).a==R&&Vn.b==L||Vn.a==L&&Vn.b==R){Y=Vn;break}X=X.next}if(null==Y)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?Pn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(Pn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=Pn.next,Pn.next=null),Pn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,L)?(Pn.a=R,Pn.b=L):(Pn.a=L,Pn.b=R),Y=Pn,R.cbpairs.add(Y),L!=R&&L.cbpairs.add(Y);Y.zip_listeners&&(Y.zip_listeners=!1,Y.__validate());for(var H=Y.listeners.head;null!=H;){if(5==(v=H.elt).event&&0!=(v.itype&U)){var Z=s.prelisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?In=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(In=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=In.next,In.next=null),In.elt=v;var q=In;null==W?(q.next=Z.head,Z.head=q):(q.next=W.next,W.next=q),Z.pushmod=Z.modified=!0,Z.length++,W=q,T=T||!v.pure}H=H.next}if(null!=this.prelisteners.head){if(null==(G=zpp_$nape_phys_ZPP_$Interactor.get(I,F))&&(j=zpp_$nape_space_ZPP_$CallbackSet.get(I,F),this.add_callbackset(j)),null==G||(G.FLUIDstamp!=this.stamp||r)&&0==(4&G.FLUIDstate)){if(null!=j&&(G=j),null!=G)for(var $=this.prelisteners.head;null!=$;){7==$.elt.itype?(G.COLLISIONstamp=this.stamp,G.SENSORstamp=this.stamp,G.FLUIDstamp=this.stamp):G.FLUIDstamp=this.stamp,$=$.next}Tn.mutable=!0,null!=Tn.wrap_position&&(Tn.wrap_position.zpp_inner._immutable=!1);var Q=Tn.active;Tn.active=!0;this.precb.zpp_inner.pre_arbiter=Tn,this.precb.zpp_inner.set=G;for(var J=this.prelisteners.head;null!=J;){var nn=J.elt;this.precb.zpp_inner.listener=nn;var en=this.precb.zpp_inner,tn=G.int1,rn=G.int2,ln=nn.options1,sn=tn.cbTypes;if(ln.nonemptyintersection(sn,ln.includes)&&!ln.nonemptyintersection(sn,ln.excludes)){var an=nn.options2,on=rn.cbTypes;Nn=an.nonemptyintersection(on,an.includes)&&!an.nonemptyintersection(on,an.excludes)}else Nn=!1;if(Nn?(en.int1=tn,en.int2=rn):(en.int1=rn,en.int2=tn),this.precb.zpp_inner.pre_swapped=I!=this.precb.zpp_inner.int1,null!=(Fn=nn.handlerp(this.precb)))null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Fn==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT?Rn=5:(null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Fn==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE?Rn=1:(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Rn=Fn==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?6:2)),Tn.immState=Rn;J=J.next}if(Tn.mutable=!1,null!=Tn.wrap_position&&(Tn.wrap_position.zpp_inner._immutable=!0),Tn.active=Q,null!=G)for(var pn=this.prelisteners.head;null!=pn;){7==pn.elt.itype?(G.COLLISIONstate=Tn.immState,G.SENSORstate=Tn.immState,G.FLUIDstate=Tn.immState):G.FLUIDstate=Tn.immState,pn=pn.next}}else null==G?0==(4&Tn.immState)&&(Tn.immState=1):Tn.immState=G.FLUIDstate;N=N.next}else N=N.next}else N=N.next}u=u.next}if(T&&0==(4&Tn.immState)){if(2==Tn.b1.type)(S=Tn.b1).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1));if(2==Tn.b1.type)(S=Tn.b2).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}}if(0!=(1&Tn.immState)){if(2==Tn.b1.type&&Tn.b1.component.sleeping)(S=Tn.b1).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1));if(2==Tn.b2.type&&Tn.b2.component.sleeping)(S=Tn.b2).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}if(Tn.sleeping){Tn.sleeping=!1;y=this.f_arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}a=Tn}else if(Mn){(S=Tn).next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=S,a=null}else a=Tn;else a=Tn}else if(1==h){var hn=t?this.c_arbiters_true:this.c_arbiters_false;if(null==i){for(b=null,u=(C=o.arbiters.length<p.arbiters.length?o:p).arbiters.head;null!=u;){if((Tn=u.elt).id==g.id&&Tn.di==z.id){b=Tn;break}u=u.next}Un=b}else Un=i;O=!1;if(Mn=null==Un)null==zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool?Tn=new zpp_$nape_dynamics_ZPP_$ColArbiter:(Tn=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=Tn.next,Tn.next=null),Tn.stat=t;else if(null==Un.colarb){C=null;if(Un.cleared=!0,null==C||Un.b2==C)for(E=null,c=(y=Un.b1.arbiters).head,b=!1;null!=c;){if(c.elt==Un){null==E?(Sn=(kn=y.head).next,y.head=Sn,null==y.head&&(y.pushmod=!0)):(Sn=(kn=E.next).next,E.next=Sn,null==Sn&&(y.pushmod=!0)),(S=kn).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=S,y.modified=!0,y.length--,y.pushmod=!0,b=!0;break}E=c,c=c.next}if(null==C||Un.b1==C)for(E=null,c=(y=Un.b2.arbiters).head,b=!1;null!=c;){if(c.elt==Un){null==E?(Sn=(kn=y.head).next,y.head=Sn,null==y.head&&(y.pushmod=!0)):(Sn=(kn=E.next).next,E.next=Sn,null==Sn&&(y.pushmod=!0)),(S=kn).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=S,y.modified=!0,y.length--,y.pushmod=!0,b=!0;break}E=c,c=c.next}null!=Un.pair&&(Un.pair.arb=null,Un.pair=null),Un.active=!1,this.f_arbiters.modified=!0,null==zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool?Tn=new zpp_$nape_dynamics_ZPP_$ColArbiter:(Tn=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=Tn.next,Tn.next=null),Tn.intchange=!0,Tn.stat=t,Mn=!0,O=!0}else w=g!=(Tn=Un.colarb).s1,Tn.stat!=t&&(Tn.stat=t,Tn.sleeping||((t?this.c_arbiters_false:this.c_arbiters_true).remove(Tn),hn.add(Tn)));U=1;if(Mn||Tn.stamp!=this.stamp||r)if(Tn.stamp=this.stamp,zpp_$nape_geom_ZPP_$Collide.contactCollide(g,z,Tn,w)){if(Mn){M=z.id;Tn.b1=n.body,Tn.ws1=n,Tn.b2=e.body,Tn.ws2=e,Tn.id=g.id,Tn.di=M;y=Tn.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++;y=Tn.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++,Tn.active=!0,Tn.present=0,Tn.cleared=!1,Tn.sleeping=!1,Tn.fresh=!1,Tn.presentable=!1,Tn.s1=n,Tn.s2=e,Tn.userdef_restitution||(Tn.s1.material.elasticity<=-1/0||Tn.s2.material.elasticity<=-1/0?Tn.restitution=0:Tn.s1.material.elasticity>=1/0||Tn.s2.material.elasticity>=1/0?Tn.restitution=1:Tn.restitution=(Tn.s1.material.elasticity+Tn.s2.material.elasticity)/2,Tn.restitution<0&&(Tn.restitution=0),Tn.restitution>1&&(Tn.restitution=1)),Tn.userdef_dyn_fric||(Tn.dyn_fric=Math.sqrt(Tn.s1.material.dynamicFriction*Tn.s2.material.dynamicFriction)),Tn.userdef_stat_fric||(Tn.stat_fric=Math.sqrt(Tn.s1.material.staticFriction*Tn.s2.material.staticFriction)),Tn.userdef_rfric||(Tn.rfric=Math.sqrt(Tn.s1.material.rollingFriction*Tn.s2.material.rollingFriction)),null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=hn.head,hn.head=q,hn.modified=!0,hn.length++,Tn.fresh=!O}else Tn.fresh=Tn.up_stamp<this.stamp-1||Tn.endGenerated==this.stamp&&r;if(Tn.up_stamp=Tn.stamp,Tn.fresh||0==(4&Tn.immState)){Tn.immState=1;for(T=!1,k=Tn.ws1.id>Tn.ws2.id?Tn.ws2:Tn.ws1,D=Tn.ws1.id>Tn.ws2.id?Tn.ws1:Tn.ws2,y=this.mrca1;null!=y.head;){b=y.head;y.head=b.next,(S=b).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=S,null==y.head&&(y.pushmod=!0),y.modified=!0,y.length--}y.pushmod=!0;for(y=this.mrca2;null!=y.head;){b=y.head;y.head=b.next,(S=b).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=S,null==y.head&&(y.pushmod=!0),y.modified=!0,y.length--}if(y.pushmod=!0,null!=k.cbSet){y=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=k,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=k.body.cbSet){y=this.mrca1,S=k.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=S,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=D.cbSet){y=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=D,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=D.body.cbSet){y=this.mrca2,S=D.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=S,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}for(A=k.body.compound,P=D.body.compound;A!=P;){if((null==A?0:A.depth)<(null==P?0:P.depth)){if(null!=P.cbSet){y=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=P,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}P=P.compound}else{if(null!=A.cbSet){V=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?Sn=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(Sn=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=Sn.next,Sn.next=null),Sn.elt=A,(Dn=Sn).next=V.head,V.head=Dn,V.modified=!0,V.length++}A=A.compound}}for(u=this.mrca1.head;null!=u;){for(I=u.elt,N=this.mrca2.head;null!=N;){for(F=N.elt,R=I.cbSet,L=F.cbSet,y=R.manager,b=null,B=(R.cbpairs.length<L.cbpairs.length?R.cbpairs:L.cbpairs).head;null!=B;){if((An=B.elt).a==R&&An.b==L||An.a==L&&An.b==R){b=An;break}B=B.next}if(null==b)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?Sn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(Sn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=Sn.next,Sn.next=null),Sn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,L)?(Sn.a=R,Sn.b=L):(Sn.a=L,Sn.b=R),b=Sn,R.cbpairs.add(b),L!=R&&L.cbpairs.add(b);if(b.zip_listeners&&(b.zip_listeners=!1,b.__validate()),null!=b.listeners.head){for(G=null,j=null,V=this.prelisteners;null!=V.head;){K=V.head;V.head=K.next,(S=K).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=S,null==V.head&&(V.pushmod=!0),V.modified=!0,V.length--}V.pushmod=!0;for(W=null,R.manager,Y=null,X=(R.cbpairs.length<L.cbpairs.length?R.cbpairs:L.cbpairs).head;null!=X;){if((Vn=X.elt).a==R&&Vn.b==L||Vn.a==L&&Vn.b==R){Y=Vn;break}X=X.next}if(null==Y)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?Pn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(Pn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=Pn.next,Pn.next=null),Pn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,L)?(Pn.a=R,Pn.b=L):(Pn.a=L,Pn.b=R),Y=Pn,R.cbpairs.add(Y),L!=R&&L.cbpairs.add(Y);Y.zip_listeners&&(Y.zip_listeners=!1,Y.__validate());for(H=Y.listeners.head;null!=H;){if(5==(v=H.elt).event&&0!=(v.itype&U)){Z=s.prelisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?In=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(In=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=In.next,In.next=null),In.elt=v;q=In;null==W?(q.next=Z.head,Z.head=q):(q.next=W.next,W.next=q),Z.pushmod=Z.modified=!0,Z.length++,W=q,T=T||!v.pure}H=H.next}if(null!=this.prelisteners.head){if(null==(G=zpp_$nape_phys_ZPP_$Interactor.get(I,F))&&(j=zpp_$nape_space_ZPP_$CallbackSet.get(I,F),this.add_callbackset(j)),null==G||(G.COLLISIONstamp!=this.stamp||r)&&0==(4&G.COLLISIONstate)){if(null!=j&&(G=j),null!=G)for($=this.prelisteners.head;null!=$;){7==$.elt.itype?(G.COLLISIONstamp=this.stamp,G.SENSORstamp=this.stamp,G.FLUIDstamp=this.stamp):G.COLLISIONstamp=this.stamp,$=$.next}Tn.mutable=!0,null!=Tn.wrap_normal&&(Tn.wrap_normal.zpp_inner._immutable=!1),null!=Tn.wrap_contacts&&(Tn.wrap_contacts.zpp_inner.immutable=!1);Q=Tn.active;Tn.active=!0;var un=!0,_n=(E=null,null),cn=Tn.innards.next;Tn.hc2=!1;for(J=Tn.contacts.next;null!=J;){var dn=J;if(dn.stamp+nape_Config.arbiterExpirationDelay<Tn.stamp){ln=Tn.contacts;null==E?(Nn=(kn=ln.next).next,ln.next=Nn,null==ln.next&&(ln.pushmod=!0)):(Nn=(kn=E.next).next,E.next=Nn,null==Nn&&(ln.pushmod=!0)),kn._inuse=!1,ln.modified=!0,ln.length--,ln.pushmod=!0,J=Nn;var xn;an=Tn.innards;null==_n?(Fn=(xn=an.next).next,an.next=Fn,null==an.next&&(an.pushmod=!0)):(Fn=(xn=_n.next).next,_n.next=Fn,null==Fn&&(an.pushmod=!0)),xn._inuse=!1,an.modified=!0,an.length--,an.pushmod=!0,cn=Fn,(tn=dn).arbiter=null,tn.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool,zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=tn}else{var bn=dn.inner,yn=dn.active;dn.active=dn.stamp==Tn.stamp,dn.active&&(un?(un=!1,Tn.c1=bn,Tn.oc1=dn):(Tn.hc2=!0,Tn.c2=bn,Tn.oc2=dn)),yn!=dn.active&&(Tn.contacts.modified=!0),E=J,_n=cn,cn=cn.next,J=J.next}}if(Tn.hc2){if(Tn.hpc2=!0,Tn.oc1.posOnly){var vn=Tn.c1;Tn.c1=Tn.c2,Tn.c2=vn;var mn=Tn.oc1;Tn.oc1=Tn.oc2,Tn.oc2=mn,Tn.hc2=!1}else Tn.oc2.posOnly&&(Tn.hc2=!1);Tn.oc1.posOnly&&(un=!0)}else Tn.hpc2=!1;this.precb.zpp_inner.pre_arbiter=Tn,this.precb.zpp_inner.set=G;for(pn=this.prelisteners.head;null!=pn;){nn=pn.elt;this.precb.zpp_inner.listener=nn;en=this.precb.zpp_inner;var gn=G.int1,zn=(rn=G.int2,nn.options1);sn=gn.cbTypes;if(zn.nonemptyintersection(sn,zn.includes)&&!zn.nonemptyintersection(sn,zn.excludes)){var wn=nn.options2;on=rn.cbTypes;Rn=wn.nonemptyintersection(on,wn.includes)&&!wn.nonemptyintersection(on,wn.excludes)}else Rn=!1;Rn?(en.int1=gn,en.int2=rn):(en.int1=rn,en.int2=gn),this.precb.zpp_inner.pre_swapped=I!=this.precb.zpp_inner.int1;var On,Cn=nn.handlerp(this.precb);if(null!=Cn)null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Cn==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT?On=5:(null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Cn==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE?On=1:(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),On=Cn==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?6:2)),Tn.immState=On;pn=pn.next}if(Tn.mutable=!1,null!=Tn.wrap_normal&&(Tn.wrap_normal.zpp_inner._immutable=!0),null!=Tn.wrap_contacts&&(Tn.wrap_contacts.zpp_inner.immutable=!0),Tn.active=Q,null!=G)for(var En=this.prelisteners.head;null!=En;){7==En.elt.itype?(G.COLLISIONstate=Tn.immState,G.SENSORstate=Tn.immState,G.FLUIDstate=Tn.immState):G.COLLISIONstate=Tn.immState,En=En.next}}else null==G?0==(4&Tn.immState)&&(Tn.immState=1):Tn.immState=G.COLLISIONstate;N=N.next}else N=N.next}else N=N.next}u=u.next}if(T&&0==(4&Tn.immState)){if(2==Tn.b1.type)(S=Tn.b1).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1));if(2==Tn.b1.type)(S=Tn.b2).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}}if(0!=(1&Tn.immState)){if(2==Tn.b1.type&&Tn.b1.component.sleeping)(S=Tn.b1).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1));if(2==Tn.b2.type&&Tn.b2.component.sleeping)(S=Tn.b2).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}if(Tn.sleeping)Tn.sleeping=!1,null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=hn.head,hn.head=q,hn.modified=!0,hn.length++;a=Tn}else if(Mn){(S=Tn).userdef_dyn_fric=!1,S.userdef_stat_fric=!1,S.userdef_restitution=!1,S.userdef_rfric=!1,S.__ref_edge1=S.__ref_edge2=null,S.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=S,a=null}else a=Tn;else a=Tn}else{var Un;if(null==i){for(b=null,u=(C=o.arbiters.length<p.arbiters.length?o:p).arbiters.head;null!=u;){if((Tn=u.elt).id==g.id&&Tn.di==z.id){b=Tn;break}u=u.next}Un=b}else Un=i;var Mn,Tn;O=!1;if(Mn=null==Un)null==zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool?Tn=new zpp_$nape_dynamics_ZPP_$SensorArbiter:(Tn=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=Tn.next,Tn.next=null);else if(null==Un.sensorarb){C=null;if(Un.cleared=!0,null==C||Un.b2==C)for(E=null,c=(y=Un.b1.arbiters).head,b=!1;null!=c;){if(c.elt==Un){null==E?(Sn=(kn=y.head).next,y.head=Sn,null==y.head&&(y.pushmod=!0)):(Sn=(kn=E.next).next,E.next=Sn,null==Sn&&(y.pushmod=!0)),(S=kn).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=S,y.modified=!0,y.length--,y.pushmod=!0,b=!0;break}E=c,c=c.next}if(null==C||Un.b1==C)for(E=null,c=(y=Un.b2.arbiters).head,b=!1;null!=c;){if(c.elt==Un){var kn;null==E?(Sn=(kn=y.head).next,y.head=Sn,null==y.head&&(y.pushmod=!0)):(Sn=(kn=E.next).next,E.next=Sn,null==Sn&&(y.pushmod=!0)),(S=kn).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=S,y.modified=!0,y.length--,y.pushmod=!0,b=!0;break}E=c,c=c.next}null!=Un.pair&&(Un.pair.arb=null,Un.pair=null),Un.active=!1,this.f_arbiters.modified=!0,null==zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool?Tn=new zpp_$nape_dynamics_ZPP_$SensorArbiter:(Tn=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=Tn.next,Tn.next=null),Tn.intchange=!0,Mn=!0,O=!0}else Tn=Un.sensorarb;U=2;if(Mn||Tn.stamp!=this.stamp||r)if(Tn.stamp=this.stamp,zpp_$nape_geom_ZPP_$Collide.testCollide(g,z)){if(Mn){M=z.id;Tn.b1=n.body,Tn.ws1=n,Tn.b2=e.body,Tn.ws2=e,Tn.id=g.id,Tn.di=M;y=Tn.b1.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++;y=Tn.b2.arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++,Tn.active=!0,Tn.present=0,Tn.cleared=!1,Tn.sleeping=!1,Tn.fresh=!1,Tn.presentable=!1;y=this.s_arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++,Tn.fresh=!O}else Tn.fresh=Tn.up_stamp<this.stamp-1||Tn.endGenerated==this.stamp&&r;if(Tn.up_stamp=Tn.stamp,Tn.fresh||0==(4&Tn.immState)){Tn.immState=1;for(T=!1,k=Tn.ws1.id>Tn.ws2.id?Tn.ws2:Tn.ws1,D=Tn.ws1.id>Tn.ws2.id?Tn.ws1:Tn.ws2,y=this.mrca1;null!=y.head;){b=y.head;y.head=b.next,(S=b).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=S,null==y.head&&(y.pushmod=!0),y.modified=!0,y.length--}y.pushmod=!0;for(y=this.mrca2;null!=y.head;){b=y.head;y.head=b.next,(S=b).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=S,null==y.head&&(y.pushmod=!0),y.modified=!0,y.length--}if(y.pushmod=!0,null!=k.cbSet){y=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=k,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=k.body.cbSet){y=this.mrca1,S=k.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=S,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=D.cbSet){y=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=D,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}if(null!=D.body.cbSet){y=this.mrca2,S=D.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=S,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}for(A=k.body.compound,P=D.body.compound;A!=P;){if((null==A?0:A.depth)<(null==P?0:P.depth)){if(null!=P.cbSet){y=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(b=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=b.next,b.next=null),b.elt=P,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}P=P.compound}else{if(null!=A.cbSet){var Dn;V=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?Sn=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(Sn=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=Sn.next,Sn.next=null),Sn.elt=A,(Dn=Sn).next=V.head,V.head=Dn,V.modified=!0,V.length++}A=A.compound}}for(u=this.mrca1.head;null!=u;){for(I=u.elt,N=this.mrca2.head;null!=N;){var Sn;for(F=N.elt,R=I.cbSet,L=F.cbSet,y=R.manager,b=null,B=(R.cbpairs.length<L.cbpairs.length?R.cbpairs:L.cbpairs).head;null!=B;){var An;if((An=B.elt).a==R&&An.b==L||An.a==L&&An.b==R){b=An;break}B=B.next}if(null==b)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?Sn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(Sn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=Sn.next,Sn.next=null),Sn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,L)?(Sn.a=R,Sn.b=L):(Sn.a=L,Sn.b=R),b=Sn,R.cbpairs.add(b),L!=R&&L.cbpairs.add(b);if(b.zip_listeners&&(b.zip_listeners=!1,b.__validate()),null!=b.listeners.head){for(G=null,j=null,V=this.prelisteners;null!=V.head;){K=V.head;V.head=K.next,(S=K).elt=null,S.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=S,null==V.head&&(V.pushmod=!0),V.modified=!0,V.length--}V.pushmod=!0;var Pn;for(W=null,R.manager,Y=null,X=(R.cbpairs.length<L.cbpairs.length?R.cbpairs:L.cbpairs).head;null!=X;){var Vn;if((Vn=X.elt).a==R&&Vn.b==L||Vn.a==L&&Vn.b==R){Y=Vn;break}X=X.next}if(null==Y)null==zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool?Pn=new zpp_$nape_callbacks_ZPP_$CbSetPair:(Pn=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool,zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=Pn.next,Pn.next=null),Pn.zip_listeners=!0,zpp_$nape_callbacks_ZPP_$CbSet.setlt(R,L)?(Pn.a=R,Pn.b=L):(Pn.a=L,Pn.b=R),Y=Pn,R.cbpairs.add(Y),L!=R&&L.cbpairs.add(Y);Y.zip_listeners&&(Y.zip_listeners=!1,Y.__validate());for(H=Y.listeners.head;null!=H;){if(5==(v=H.elt).event&&0!=(v.itype&U)){var In;Z=s.prelisteners;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool?In=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener:(In=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=In.next,In.next=null),In.elt=v;q=In;null==W?(q.next=Z.head,Z.head=q):(q.next=W.next,W.next=q),Z.pushmod=Z.modified=!0,Z.length++,W=q,T=T||!v.pure}H=H.next}if(null!=this.prelisteners.head){if(null==(G=zpp_$nape_phys_ZPP_$Interactor.get(I,F))&&(j=zpp_$nape_space_ZPP_$CallbackSet.get(I,F),this.add_callbackset(j)),null==G||(G.SENSORstamp!=this.stamp||r)&&0==(4&G.SENSORstate)){if(null!=j&&(G=j),null!=G)for($=this.prelisteners.head;null!=$;){7==$.elt.itype?(G.COLLISIONstamp=this.stamp,G.SENSORstamp=this.stamp,G.FLUIDstamp=this.stamp):G.SENSORstamp=this.stamp,$=$.next}Q=Tn.active;Tn.active=!0;this.precb.zpp_inner.pre_arbiter=Tn,this.precb.zpp_inner.set=G;for(J=this.prelisteners.head;null!=J;){nn=J.elt;this.precb.zpp_inner.listener=nn;var Nn,Fn,Rn;en=this.precb.zpp_inner,tn=G.int1,rn=G.int2,ln=nn.options1,sn=tn.cbTypes;if(ln.nonemptyintersection(sn,ln.includes)&&!ln.nonemptyintersection(sn,ln.excludes)){an=nn.options2,on=rn.cbTypes;Nn=an.nonemptyintersection(on,an.includes)&&!an.nonemptyintersection(on,an.excludes)}else Nn=!1;if(Nn?(en.int1=tn,en.int2=rn):(en.int1=rn,en.int2=tn),this.precb.zpp_inner.pre_swapped=I!=this.precb.zpp_inner.int1,null!=(Fn=nn.handlerp(this.precb)))null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Fn==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT?Rn=5:(null==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Fn==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE?Rn=1:(null==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag,zpp_$nape_util_ZPP_$Flags.internal=!1),Rn=Fn==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?6:2)),Tn.immState=Rn;J=J.next}if(Tn.active=Q,null!=G)for(pn=this.prelisteners.head;null!=pn;){7==pn.elt.itype?(G.COLLISIONstate=Tn.immState,G.SENSORstate=Tn.immState,G.FLUIDstate=Tn.immState):G.SENSORstate=Tn.immState,pn=pn.next}}else null==G?0==(4&Tn.immState)&&(Tn.immState=1):Tn.immState=G.SENSORstate;N=N.next}else N=N.next}else N=N.next}u=u.next}if(T&&0==(4&Tn.immState)){if(1!=Tn.b1.type)(S=Tn.b1).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1));if(1!=Tn.b2.type)(S=Tn.b2).world||(S.component.waket=this.stamp+(this.midstep?0:1),3==S.type&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}}if(Tn.sleeping){Tn.sleeping=!1;y=this.s_arbiters;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?b=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(b=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=b.next,b.next=null),b.elt=Tn,(q=b).next=y.head,y.head=q,y.modified=!0,y.length++}a=Tn}else if(Mn){(S=Tn).next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool,zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=S,a=null}else a=Tn;else a=Tn}}return a},MRCA_chains:function(n,e){for(var t=this.mrca1;null!=t.head;){var i=t.head;t.head=i.next,(r=i).elt=null,r.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=r,null==t.head&&(t.pushmod=!0),t.modified=!0,t.length--}t.pushmod=!0;for(t=this.mrca2;null!=t.head;){i=t.head;t.head=i.next,(r=i).elt=null,r.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=r,null==t.head&&(t.pushmod=!0),t.modified=!0,t.length--}if(t.pushmod=!0,null!=n.cbSet){t=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=n,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}if(null!=n.body.cbSet){t=this.mrca1;var r=n.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=r,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}if(null!=e.cbSet){t=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=e,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}if(null!=e.body.cbSet){t=this.mrca2,r=e.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=r,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}for(var l=n.body.compound,s=e.body.compound;l!=s;){if((null==l?0:l.depth)<(null==s?0:s.depth)){if(null!=s.cbSet){var a;t=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=s,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}s=s.compound}else{if(null!=l.cbSet){var o,p=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=l;var h=o;h.next=p.head,p.head=h,p.modified=!0,p.length++}l=l.compound}}},inlined_MRCA_chains:function(n,e){for(var t=this.mrca1;null!=t.head;){var i=t.head;t.head=i.next,(r=i).elt=null,r.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=r,null==t.head&&(t.pushmod=!0),t.modified=!0,t.length--}t.pushmod=!0;for(t=this.mrca2;null!=t.head;){i=t.head;t.head=i.next,(r=i).elt=null,r.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=r,null==t.head&&(t.pushmod=!0),t.modified=!0,t.length--}if(t.pushmod=!0,null!=n.cbSet){t=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=n,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}if(null!=n.body.cbSet){t=this.mrca1;var r=n.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=r,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}if(null!=e.cbSet){t=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=e,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}if(null!=e.body.cbSet){t=this.mrca2,r=e.body;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=r,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}for(var l=n.body.compound,s=e.body.compound;l!=s;){if((null==l?0:l.depth)<(null==s?0:s.depth)){if(null!=s.cbSet){var a;t=this.mrca2;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?i=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(i=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=i.next,i.next=null),i.elt=s,(a=i).next=t.head,t.head=a,t.modified=!0,t.length++}s=s.compound}else{if(null!=l.cbSet){var o,p=this.mrca1;null==zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool?o=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor:(o=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o.next,o.next=null),o.elt=l;var h=o;h.next=p.head,p.head=h,p.modified=!0,p.length++}l=l.compound}}},__class__:zpp_$nape_space_ZPP_$Space};var zpp_$nape_space_ZPP_$SweepData=function(){this.aabb=null,this.shape=null,this.prev=null,this.next=null};t["zpp_nape.space.ZPP_SweepData"]=zpp_$nape_space_ZPP_$SweepData,zpp_$nape_space_ZPP_$SweepData.__name__="zpp_nape.space.ZPP_SweepData",zpp_$nape_space_ZPP_$SweepData.prototype={free:function(){this.prev=null,this.shape=null,this.aabb=null},alloc:function(){},gt:function(n){return this.aabb.minx>n.aabb.minx},__class__:zpp_$nape_space_ZPP_$SweepData};var zpp_$nape_space_ZPP_$SweepPhase=function(n){this.failed=null,this.list=null,zpp_$nape_space_ZPP_$Broadphase.call(this),this.space=n,this.is_sweep=!0,this.sweep=this};t["zpp_nape.space.ZPP_SweepPhase"]=zpp_$nape_space_ZPP_$SweepPhase,zpp_$nape_space_ZPP_$SweepPhase.__name__="zpp_nape.space.ZPP_SweepPhase",zpp_$nape_space_ZPP_$SweepPhase.__super__=zpp_$nape_space_ZPP_$Broadphase,zpp_$nape_space_ZPP_$SweepPhase.prototype=$extend(zpp_$nape_space_ZPP_$Broadphase.prototype,{__insert:function(n){var e;null==zpp_$nape_space_ZPP_$SweepData.zpp_pool?e=new zpp_$nape_space_ZPP_$SweepData:(e=zpp_$nape_space_ZPP_$SweepData.zpp_pool,zpp_$nape_space_ZPP_$SweepData.zpp_pool=e.next,e.next=null),n.sweep=e,e.shape=n,e.aabb=n.aabb,e.next=this.list,null!=this.list&&(this.list.prev=e),this.list=e},__remove:function(n){var e=n.sweep;null==e.prev?this.list=e.next:e.prev.next=e.next,null!=e.next&&(e.next.prev=e.prev),n.sweep=null;var t=e;t.prev=null,t.shape=null,t.aabb=null,t.next=zpp_$nape_space_ZPP_$SweepData.zpp_pool,zpp_$nape_space_ZPP_$SweepData.zpp_pool=t},__sync:function(n){if(!this.space.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){if((p=n.circle).zip_worldCOM&&null!=p.body){if(p.zip_worldCOM=!1,p.zip_localCOM){if(p.zip_localCOM=!1,1==p.type){if(null==(h=p.polygon).lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful localCOM");if(null==h.lverts.next.next)h.localCOMx=h.lverts.next.x,h.localCOMy=h.lverts.next.y;else if(null==h.lverts.next.next.next){h.localCOMx=h.lverts.next.x,h.localCOMy=h.lverts.next.y;var e=1;h.localCOMx+=h.lverts.next.next.x*e,h.localCOMy+=h.lverts.next.next.y*e;e=.5;h.localCOMx*=e,h.localCOMy*=e}else{h.localCOMx=0,h.localCOMy=0;var t=0,i=_=h.lverts.next,r=_=_.next;for(_=_.next;null!=_;){var l=_;t+=r.x*(l.y-i.y);var s=l.y*r.x-l.x*r.y;h.localCOMx+=(r.x+l.x)*s,h.localCOMy+=(r.y+l.y)*s,i=r,r=l,_=_.next}l=_=h.lverts.next;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;h.localCOMx+=(r.x+l.x)*s,h.localCOMy+=(r.y+l.y)*s,i=r,r=l;l=_=_.next;t+=r.x*(l.y-i.y);s=l.y*r.x-l.x*r.y;h.localCOMx+=(r.x+l.x)*s,h.localCOMy+=(r.y+l.y)*s;e=t=1/(3*t);h.localCOMx*=e,h.localCOMy*=e}}null!=p.wrap_localCOM&&(p.wrap_localCOM.zpp_inner.x=p.localCOMx,p.wrap_localCOM.zpp_inner.y=p.localCOMy)}(h=p.body).zip_axis&&(h.zip_axis=!1,h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot)),p.worldCOMx=p.body.posx+(p.body.axisy*p.localCOMx-p.body.axisx*p.localCOMy),p.worldCOMy=p.body.posy+(p.localCOMx*p.body.axisx+p.localCOMy*p.body.axisy)}var a=p.radius,o=p.radius;p.aabb.minx=p.worldCOMx-a,p.aabb.miny=p.worldCOMy-o,p.aabb.maxx=p.worldCOMx+a,p.aabb.maxy=p.worldCOMy+o}else{var p;if((p=n.polygon).zip_gverts&&null!=p.body){var h;p.zip_gverts=!1,p.validate_lverts(),(h=p.body).zip_axis&&(h.zip_axis=!1,h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot));for(var u=p.lverts.next,_=p.gverts.next;null!=_;){var c=_,d=u;u=u.next,c.x=p.body.posx+(p.body.axisy*d.x-p.body.axisx*d.y),c.y=p.body.posy+(d.x*p.body.axisx+d.y*p.body.axisy),_=_.next}}if(null==p.lverts.next)throw haxe_Exception.thrown("Error: An empty polygon has no meaningful bounds");var f=p.gverts.next;p.aabb.minx=f.x,p.aabb.miny=f.y,p.aabb.maxx=f.x,p.aabb.maxy=f.y;for(_=p.gverts.next.next;null!=_;){var x=_;x.x<p.aabb.minx&&(p.aabb.minx=x.x),x.x>p.aabb.maxx&&(p.aabb.maxx=x.x),x.y<p.aabb.miny&&(p.aabb.miny=x.y),x.y>p.aabb.maxy&&(p.aabb.maxy=x.y),_=_.next}}},sync_broadphase:function(){if(this.space.validation(),null!=this.list)for(var n=this.list.next;null!=n;){var e=n.next,t=n.prev;if(n.aabb.minx>t.aabb.minx)n=e;else{for(;null!=t.prev&&t.prev.aabb.minx>n.aabb.minx;)t=t.prev;var i=n.prev;i.next=n.next,null!=n.next&&(n.next.prev=i),null==t.prev?(n.prev=null,this.list=n,n.next=t,t.prev=n):(n.prev=t.prev,t.prev=n,n.prev.next=n,n.next=t),n=e}}},sync_broadphase_fast:function(){for(var n=this.list.next;null!=n;){var e=n.next,t=n.prev;if(n.aabb.minx>t.aabb.minx)n=e;else{for(;null!=t.prev&&t.prev.aabb.minx>n.aabb.minx;)t=t.prev;var i=n.prev;i.next=n.next,null!=n.next&&(n.next.prev=i),null==t.prev?(n.prev=null,this.list=n,n.next=t,t.prev=n):(n.prev=t.prev,t.prev=n,n.prev.next=n,n.next=t),n=e}}},broadphase:function(n,e){if(null!=this.list){for(var t=this.list.next;null!=t;){var i=t.next,r=t.prev;if(t.aabb.minx>r.aabb.minx)t=i;else{for(;null!=r.prev&&r.prev.aabb.minx>t.aabb.minx;)r=r.prev;var l=t.prev;l.next=t.next,null!=t.next&&(t.next.prev=l),null==r.prev?(t.prev=null,this.list=t,t.next=r,r.prev=t):(t.prev=r.prev,r.prev=t,t.prev.next=t,t.next=r),t=i}}for(var s=this.list;null!=s;){for(var a=s.next,o=s.shape,p=o.body,h=s.aabb.maxx;null!=a&&!(a.aabb.minx>h);){var u=a.shape,_=u.body;if(_!=p)if(1!=p.type||1!=_.type)if(p.component.sleeping&&_.component.sleeping)a=a.next;else{var c=o.aabb,d=u.aabb;d.miny>c.maxy||c.miny>d.maxy||(e?n.narrowPhase(o,u,2!=p.type||2!=_.type,null,!1):n.continuousEvent(o,u,2!=p.type||2!=_.type,null,!1)),a=a.next}else a=a.next;else a=a.next}s=s.next}}},clear:function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},shapesUnderPoint:function(n,e,t,i){this.sync_broadphase(),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=n,l.y=e;for(var r=l,l=null==i?new nape_shape_ShapeList:i,s=this.list;null!=s&&s.aabb.minx>n;)s=s.next;for(;null!=s&&s.aabb.minx<=n;){if(s.aabb.maxx>=n&&s.aabb.miny<=e&&s.aabb.maxy>=e){var a,o=s.shape;if(null!=t){var p=o.filter;a=0!=(p.collisionMask&t.collisionGroup)&&0!=(t.collisionMask&p.collisionGroup)}else a=!0;a&&(0==o.type?zpp_$nape_geom_ZPP_$Collide.circleContains(o.circle,r)&&l.push(o.outer):zpp_$nape_geom_ZPP_$Collide.polyContains(o.polygon,r)&&l.push(o.outer))}s=s.next}var h=r;return null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=h,l},bodiesUnderPoint:function(n,e,t,i){this.sync_broadphase(),null==zpp_$nape_geom_ZPP_$Vec2.zpp_pool?l=new zpp_$nape_geom_ZPP_$Vec2:(l=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=n,l.y=e;for(var r=l,l=null==i?new nape_phys_BodyList:i,s=this.list;null!=s&&s.aabb.minx>n;)s=s.next;for(;null!=s&&s.aabb.minx<=n;){if(s.aabb.maxx>=n&&s.aabb.miny<=e&&s.aabb.maxy>=e){var a=s.shape,o=a.body.outer;if(!l.has(o)){var p;if(null!=t){var h=a.filter;p=0!=(h.collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup)}else p=!0;p&&(0==a.type?zpp_$nape_geom_ZPP_$Collide.circleContains(a.circle,r)&&l.push(o):zpp_$nape_geom_ZPP_$Collide.polyContains(a.polygon,r)&&l.push(o))}}s=s.next}var u=r;return null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=u,l},shapesInAABB:function(n,e,t,i,r){this.sync_broadphase(),this.updateAABBShape(n);for(var l=this.aabbShape.zpp_inner.aabb,s=null==r?new nape_shape_ShapeList:r,a=this.list;null!=a&&a.aabb.maxx<l.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=l.maxx;){var o,p=a.shape;if(null!=i){var h=p.filter;o=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else o=!0;if(o)if(e)if(t)zpp_$nape_geom_ZPP_$Collide.containTest(this.aabbShape.zpp_inner,p)&&s.push(p.outer);else{var u=a.aabb;if(u.minx>=l.minx&&u.miny>=l.miny&&u.maxx<=l.maxx&&u.maxy<=l.maxy)s.push(p.outer);else{var _=a.aabb;l.miny<=_.maxy&&_.miny<=l.maxy&&l.minx<=_.maxx&&_.minx<=l.maxx&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(p,this.aabbShape.zpp_inner)&&s.push(p.outer)}}else{var c;if(t){var d=a.aabb;c=d.minx>=l.minx&&d.miny>=l.miny&&d.maxx<=l.maxx&&d.maxy<=l.maxy}else{var f=a.aabb;c=l.miny<=f.maxy&&f.miny<=l.maxy&&l.minx<=f.maxx&&f.minx<=l.maxx}c&&s.push(p.outer)}a=a.next}return s},bodiesInAABB:function(n,e,t,i,r){this.sync_broadphase(),this.updateAABBShape(n);var l=this.aabbShape.zpp_inner.aabb,s=null==r?new nape_phys_BodyList:r;null==this.failed&&(this.failed=new nape_phys_BodyList);for(var a=this.list;null!=a&&a.aabb.maxx<l.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=l.maxx;){var o=a.shape,p=o.body.outer,h=a.aabb;if(l.miny<=h.maxy&&h.miny<=l.maxy&&l.minx<=h.maxx&&h.minx<=l.maxx){var u;if(null!=i){var _=o.filter;u=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else u=!0;if(u)if(e)if(t){if(!this.failed.has(p)){var c=zpp_$nape_geom_ZPP_$Collide.containTest(this.aabbShape.zpp_inner,o);!s.has(p)&&c?s.push(p):c||(s.remove(p),this.failed.push(p))}}else!s.has(p)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(o,this.aabbShape.zpp_inner)&&s.push(p);else if(t){if(!this.failed.has(p)){var d=o.aabb,f=d.minx>=l.minx&&d.miny>=l.miny&&d.maxx<=l.maxx&&d.maxy<=l.maxy;!s.has(p)&&f?s.push(p):f||(s.remove(p),this.failed.push(p))}}else{var x;if(s.has(p))x=!1;else{var b=o.aabb;x=b.minx>=l.minx&&b.miny>=l.miny&&b.maxx<=l.maxx&&b.maxy<=l.maxy}x&&s.push(p)}}a=a.next}return this.failed.clear(),s},shapesInCircle:function(n,e,t,i,r,l){this.sync_broadphase(),this.updateCircShape(n,e,t);for(var s=this.circShape.zpp_inner.aabb,a=null==l?new nape_shape_ShapeList:l,o=this.list;null!=o&&o.aabb.maxx<s.minx;)o=o.next;for(;null!=o&&o.aabb.minx<=s.maxx;){var p=o.aabb;if(s.miny<=p.maxy&&p.miny<=s.maxy&&s.minx<=p.maxx&&p.minx<=s.maxx){var h,u=o.shape;if(null!=r){var _=u.filter;h=0!=(_.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&_.collisionGroup)}else h=!0;h&&(i?zpp_$nape_geom_ZPP_$Collide.containTest(this.circShape.zpp_inner,u)&&a.push(u.outer):zpp_$nape_geom_ZPP_$Collide.testCollide_safe(u,this.circShape.zpp_inner)&&a.push(u.outer))}o=o.next}return a},bodiesInCircle:function(n,e,t,i,r,l){this.sync_broadphase(),this.updateCircShape(n,e,t);var s=this.circShape.zpp_inner.aabb,a=null==l?new nape_phys_BodyList:l;null==this.failed&&(this.failed=new nape_phys_BodyList);for(var o=this.list;null!=o&&o.aabb.maxx<s.minx;)o=o.next;for(;null!=o&&o.aabb.minx<=s.maxx;){var p=o.aabb;if(s.miny<=p.maxy&&p.miny<=s.maxy&&s.minx<=p.maxx&&p.minx<=s.maxx){var h,u=o.shape,_=u.body.outer;if(null!=r){var c=u.filter;h=0!=(c.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup)}else h=!0;if(h)if(i){if(!this.failed.has(_)){var d=zpp_$nape_geom_ZPP_$Collide.containTest(this.circShape.zpp_inner,u);!a.has(_)&&d?a.push(_):d||(a.remove(_),this.failed.push(_))}}else!a.has(_)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(u,this.circShape.zpp_inner)&&a.push(_)}o=o.next}return this.failed.clear(),a},shapesInShape:function(n,e,t,i){this.sync_broadphase(),this.validateShape(n);for(var r=n.aabb,l=null==i?new nape_shape_ShapeList:i,s=this.list;null!=s&&s.aabb.maxx<r.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=r.maxx;){var a=s.aabb;if(r.miny<=a.maxy&&a.miny<=r.maxy&&r.minx<=a.maxx&&a.minx<=r.maxx){var o,p=s.shape;if(null!=t){var h=p.filter;o=0!=(h.collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup)}else o=!0;o&&(e?zpp_$nape_geom_ZPP_$Collide.containTest(n,p)&&l.push(p.outer):zpp_$nape_geom_ZPP_$Collide.testCollide_safe(p,n)&&l.push(p.outer))}s=s.next}return l},bodiesInShape:function(n,e,t,i){this.sync_broadphase(),this.validateShape(n);var r=n.aabb,l=null==i?new nape_phys_BodyList:i;null==this.failed&&(this.failed=new nape_phys_BodyList);for(var s=this.list;null!=s&&s.aabb.maxx<r.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=r.maxx;){var a=s.aabb;if(r.miny<=a.maxy&&a.miny<=r.maxy&&r.minx<=a.maxx&&a.minx<=r.maxx){var o,p=s.shape,h=p.body.outer;if(null!=t){var u=p.filter;o=0!=(u.collisionMask&t.collisionGroup)&&0!=(t.collisionMask&u.collisionGroup)}else o=!0;if(o)if(e){if(!this.failed.has(h)){var _=zpp_$nape_geom_ZPP_$Collide.containTest(n,p);!l.has(h)&&_?l.push(h):_||(l.remove(h),this.failed.push(h))}}else!l.has(h)&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(n,p)&&l.push(h)}s=s.next}return this.failed.clear(),l},rayCast:function(n,e,t){this.sync_broadphase(),n.validate_dir();var i=n.rayAABB(),r=n.maxdist,l=null;if(0==n.dirx)for(var s=this.list;null!=s&&s.aabb.minx<=i.minx;){var a=s.aabb;if(i.miny<=a.maxy&&a.miny<=i.maxy&&i.minx<=a.maxx&&a.minx<=i.maxx)if(null!=t)p=0!=((h=s.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;else p=!1;if(p)if((u=n.aabbsect(s.aabb))>=0&&u<r)if(null!=(_=0==s.shape.type?n.circlesect(s.shape.circle,e,r):n.polysect(s.shape.polygon,e,r))){if(null!=_.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(r=_.zpp_inner.toiDistance,null!=l){if(null!=l.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");l.zpp_inner.free()}l=_}s=s.next}else if(n.dirx<0){s=this.list;for(var o=null;null!=s&&s.aabb.minx<=i.maxx;)o=s,s=s.next;for(s=o;null!=s;){a=s.aabb;if(i.miny<=a.maxy&&a.miny<=i.maxy&&i.minx<=a.maxx&&a.minx<=i.maxx)if(null!=t)p=0!=((h=s.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;else p=!1;if(p)if((u=n.aabbsect(s.aabb))>=0&&u<r)if(null!=(_=0==s.shape.type?n.circlesect(s.shape.circle,e,r):n.polysect(s.shape.polygon,e,r))){if(null!=_.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(r=_.zpp_inner.toiDistance,null!=l){if(null!=l.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");l.zpp_inner.free()}l=_}s=s.prev}}else for(s=this.list;null!=s&&s.aabb.minx<=i.maxx&&s.aabb.minx<n.originx+n.dirx*r;){var p,h,u,_;a=s.aabb;if(i.miny<=a.maxy&&a.miny<=i.maxy&&i.minx<=a.maxx&&a.minx<=i.maxx)if(null!=t)p=0!=((h=s.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;else p=!1;if(p)if((u=n.aabbsect(s.aabb))>=0&&u<r)if(null!=(_=0==s.shape.type?n.circlesect(s.shape.circle,e,r):n.polysect(s.shape.polygon,e,r))){if(null!=_.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");if(r=_.zpp_inner.toiDistance,null!=l){if(null!=l.zpp_inner.next)throw haxe_Exception.thrown("Error: This object has been disposed of and cannot be used");l.zpp_inner.free()}l=_}s=s.next}var c=i;return null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c.wrap_min=c.wrap_max=null,c._invalidate=null,c._validate=null,c.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=c,l},rayMultiCast:function(n,e,t,i){this.sync_broadphase(),n.validate_dir();var r=n.rayAABB(),l=null==i?new nape_geom_RayResultList:i;if(0==n.dirx)for(var s=this.list;null!=s&&s.aabb.minx<=r.minx;){var a=s.aabb;if(r.miny<=a.maxy&&a.miny<=r.maxy&&r.minx<=a.maxx&&a.minx<=r.maxx)if(null!=t)p=0!=((h=s.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;else p=!1;if(p)n.aabbsect(s.aabb)>=0&&(0==s.shape.type?n.circlesect2(s.shape.circle,e,l):n.polysect2(s.shape.polygon,e,l));s=s.next}else if(n.dirx<0){s=this.list;for(var o=null;null!=s&&s.aabb.minx<=r.maxx;)o=s,s=s.next;for(s=o;null!=s;){a=s.aabb;if(r.miny<=a.maxy&&a.miny<=r.maxy&&r.minx<=a.maxx&&a.minx<=r.maxx)if(null!=t)p=0!=((h=s.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;else p=!1;if(p)n.aabbsect(s.aabb)>=0&&(0==s.shape.type?n.circlesect2(s.shape.circle,e,l):n.polysect2(s.shape.polygon,e,l));s=s.prev}}else for(s=this.list;null!=s&&s.aabb.minx<=r.maxx;){var p,h;a=s.aabb;if(r.miny<=a.maxy&&a.miny<=r.maxy&&r.minx<=a.maxx&&a.minx<=r.maxx)if(null!=t)p=0!=((h=s.shape.filter).collisionMask&t.collisionGroup)&&0!=(t.collisionMask&h.collisionGroup);else p=!0;else p=!1;if(p)n.aabbsect(s.aabb)>=0&&(0==s.shape.type?n.circlesect2(s.shape.circle,e,l):n.polysect2(s.shape.polygon,e,l));s=s.next}var u=r;return null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u.wrap_min=u.wrap_max=null,u._invalidate=null,u._validate=null,u.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool,zpp_$nape_geom_ZPP_$AABB.zpp_pool=u,l},__class__:zpp_$nape_space_ZPP_$SweepPhase});var zpp_$nape_util_ZNPArray2_$Float=function(n,e){this.width=0,this.list=null,this.width=n,this.list=[]};t["zpp_nape.util.ZNPArray2_Float"]=zpp_$nape_util_ZNPArray2_$Float,zpp_$nape_util_ZNPArray2_$Float.__name__="zpp_nape.util.ZNPArray2_Float",zpp_$nape_util_ZNPArray2_$Float.prototype={resize:function(n,e,t){this.width=n;for(var i=0,r=n*e;i<r;){var l=i++;this.list[l]=t}},get:function(n,e){return this.list[e*this.width+n]},set:function(n,e,t){return this.list[e*this.width+n]=t},__class__:zpp_$nape_util_ZNPArray2_$Float};var zpp_$nape_util_ZNPArray2_$ZPP_$GeomVert=function(n,e){this.width=0,this.list=null,this.width=n,this.list=[]};t["zpp_nape.util.ZNPArray2_ZPP_GeomVert"]=zpp_$nape_util_ZNPArray2_$ZPP_$GeomVert,zpp_$nape_util_ZNPArray2_$ZPP_$GeomVert.__name__="zpp_nape.util.ZNPArray2_ZPP_GeomVert",zpp_$nape_util_ZNPArray2_$ZPP_$GeomVert.prototype={resize:function(n,e,t){this.width=n;for(var i=0,r=n*e;i<r;){var l=i++;this.list[l]=t}},get:function(n,e){return this.list[e*this.width+n]},set:function(n,e,t){return this.list[e*this.width+n]=t},__class__:zpp_$nape_util_ZNPArray2_$ZPP_$GeomVert};var zpp_$nape_util_ZNPArray2_$ZPP_$MarchPair=function(n,e){this.width=0,this.list=null,this.width=n,this.list=[]};t["zpp_nape.util.ZNPArray2_ZPP_MarchPair"]=zpp_$nape_util_ZNPArray2_$ZPP_$MarchPair,zpp_$nape_util_ZNPArray2_$ZPP_$MarchPair.__name__="zpp_nape.util.ZNPArray2_ZPP_MarchPair",zpp_$nape_util_ZNPArray2_$ZPP_$MarchPair.prototype={resize:function(n,e,t){this.width=n;for(var i=0,r=n*e;i<r;){var l=i++;this.list[l]=t}},get:function(n,e){return this.list[e*this.width+n]},set:function(n,e,t){return this.list[e*this.width+n]=t},__class__:zpp_$nape_util_ZNPArray2_$ZPP_$MarchPair};var zpp_$nape_util_Hashable2_$Boolfalse=function(){this.di=0,this.id=0,this.hnext=null,this.next=null,this.value=!1};t["zpp_nape.util.Hashable2_Boolfalse"]=zpp_$nape_util_Hashable2_$Boolfalse,zpp_$nape_util_Hashable2_$Boolfalse.__name__="zpp_nape.util.Hashable2_Boolfalse",zpp_$nape_util_Hashable2_$Boolfalse.get=function(n,e,t){var i;null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?i=new zpp_$nape_util_Hashable2_$Boolfalse:(i=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=i.next,i.next=null),i.id=n,i.di=e;var r=i;return r.value=t,r},zpp_$nape_util_Hashable2_$Boolfalse.getpersist=function(n,e){var t;return null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?t=new zpp_$nape_util_Hashable2_$Boolfalse:(t=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=t.next,t.next=null),t.id=n,t.di=e,t},zpp_$nape_util_Hashable2_$Boolfalse.ordered_get=function(n,e,t){var i,r;return n<=e?(null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?i=new zpp_$nape_util_Hashable2_$Boolfalse:(i=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=i.next,i.next=null),i.id=n,i.di=e,(r=i).value=t,r):(null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?i=new zpp_$nape_util_Hashable2_$Boolfalse:(i=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=i.next,i.next=null),i.id=e,i.di=n,(r=i).value=t,r)},zpp_$nape_util_Hashable2_$Boolfalse.ordered_get_persist=function(n,e){var t;return n<=e?(null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?t=new zpp_$nape_util_Hashable2_$Boolfalse:(t=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=t.next,t.next=null),t.id=n,t.di=e,t):(null==zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool?t=new zpp_$nape_util_Hashable2_$Boolfalse:(t=zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool,zpp_$nape_util_Hashable2_$Boolfalse.zpp_pool=t.next,t.next=null),t.id=e,t.di=n,t)},zpp_$nape_util_Hashable2_$Boolfalse.prototype={free:function(){},alloc:function(){},__class__:zpp_$nape_util_Hashable2_$Boolfalse};var zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse=function(){this.cnt=0,this.table=null,this.cnt=0,this.table=[];for(var n=0;n<1048576;){n++;this.table.push(null)}};t["zpp_nape.util.FastHash2_Hashable2_Boolfalse"]=zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse,zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse.__name__="zpp_nape.util.FastHash2_Hashable2_Boolfalse",zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse.prototype={empty:function(){return 0==this.cnt},clear:function(){for(var n=0,e=this.table.length;n<e;){var t=n++,i=this.table[t];if(null!=i){for(;null!=i;){var r=i.hnext;i.hnext=null,i=r}this.table[t]=null}}},get:function(n,e){var t=this.table[106039*n+e&1048575];if(null==t)return null;if(t.id==n&&t.di==e)return t;for(;null!=(t=t.hnext)&&(t.id!=n||t.di!=e););return t},ordered_get:function(n,e){if(n>e){var t=n;n=e,e=t}var i=this.table[106039*n+e&1048575];if(null==i)return null;if(i.id==n&&i.di==e)return i;for(;null!=(i=i.hnext)&&(i.id!=n||i.di!=e););return i},has:function(n,e){var t=this.table[106039*n+e&1048575];if(null==t)return!1;if(t.id==n&&t.di==e)return!0;for(;null!=(t=t.hnext)&&(t.id!=n||t.di!=e););return null!=t},maybeAdd:function(n){var e=106039*n.id+n.di&1048575,t=this.table[e];null==t?(this.table[e]=n,n.hnext=null):(n.hnext=t.hnext,t.hnext=n),this.cnt++},add:function(n){var e=106039*n.id+n.di&1048575,t=this.table[e];null==t?(this.table[e]=n,n.hnext=null):(n.hnext=t.hnext,t.hnext=n),this.cnt++},remove:function(n){var e=106039*n.id+n.di&1048575,t=this.table[e];if(t==n)this.table[e]=t.hnext;else if(null!=t){for(var i;i=t,null!=(t=t.hnext)&&t!=n;);i.hnext=t.hnext}n.hnext=null,this.cnt--},hash:function(n,e){return 106039*n+e&1048575},__class__:zpp_$nape_util_FastHash2_$Hashable2_$Boolfalse};var zpp_$nape_util_ZNPList_$ZPP_$Compound=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Compound"]=zpp_$nape_util_ZNPList_$ZPP_$Compound,zpp_$nape_util_ZNPList_$ZPP_$Compound.__name__="zpp_nape.util.ZNPList_ZPP_Compound",zpp_$nape_util_ZNPList_$ZPP_$Compound.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Compound:(e=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Compound:(e=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Compound:(t=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Compound:(t=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Compound};var zpp_$nape_util_ZNPList_$ZPP_$AABBNode=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_AABBNode"]=zpp_$nape_util_ZNPList_$ZPP_$AABBNode,zpp_$nape_util_ZNPList_$ZPP_$AABBNode.__name__="zpp_nape.util.ZNPList_ZPP_AABBNode",zpp_$nape_util_ZNPList_$ZPP_$AABBNode.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(e=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(e=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(t=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode:(t=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$AABBNode};var zpp_$nape_util_ZNPList_$ZPP_$Edge=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Edge"]=zpp_$nape_util_ZNPList_$ZPP_$Edge,zpp_$nape_util_ZNPList_$ZPP_$Edge.__name__="zpp_nape.util.ZNPList_ZPP_Edge",zpp_$nape_util_ZNPList_$ZPP_$Edge.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Edge:(e=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Edge:(e=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Edge:(t=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Edge:(t=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Edge};var zpp_$nape_util_ZNPList_$ZPP_$AABBPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_AABBPair"]=zpp_$nape_util_ZNPList_$ZPP_$AABBPair,zpp_$nape_util_ZNPList_$ZPP_$AABBPair.__name__="zpp_nape.util.ZNPList_ZPP_AABBPair",zpp_$nape_util_ZNPList_$ZPP_$AABBPair.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(e=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(e=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(t=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair:(t=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$AABBPair};var zpp_$nape_util_ZNPList_$ZPP_$Arbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Arbiter"]=zpp_$nape_util_ZNPList_$ZPP_$Arbiter,zpp_$nape_util_ZNPList_$ZPP_$Arbiter.__name__="zpp_nape.util.ZNPList_ZPP_Arbiter",zpp_$nape_util_ZNPList_$ZPP_$Arbiter.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Arbiter};var zpp_$nape_util_ZNPList_$ZPP_$Body=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Body"]=zpp_$nape_util_ZNPList_$ZPP_$Body,zpp_$nape_util_ZNPList_$ZPP_$Body.__name__="zpp_nape.util.ZNPList_ZPP_Body",zpp_$nape_util_ZNPList_$ZPP_$Body.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(e=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(e=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(t=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Body:(t=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Body};var zpp_$nape_util_ZNPList_$ZPP_$CallbackSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=zpp_$nape_util_ZNPList_$ZPP_$CallbackSet,zpp_$nape_util_ZNPList_$ZPP_$CallbackSet.__name__="zpp_nape.util.ZNPList_ZPP_CallbackSet",zpp_$nape_util_ZNPList_$ZPP_$CallbackSet.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet:(e=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet:(e=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet:(t=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet:(t=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$CallbackSet};var zpp_$nape_util_ZNPList_$ZPP_$Component=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Component"]=zpp_$nape_util_ZNPList_$ZPP_$Component,zpp_$nape_util_ZNPList_$ZPP_$Component.__name__="zpp_nape.util.ZNPList_ZPP_Component",zpp_$nape_util_ZNPList_$ZPP_$Component.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Component:(e=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Component:(e=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Component:(t=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Component:(t=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Component};var zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter,zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter.__name__="zpp_nape.util.ZNPList_ZPP_FluidArbiter",zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter};var zpp_$nape_util_ZNPList_$ZPP_$CutInt=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_CutInt"]=zpp_$nape_util_ZNPList_$ZPP_$CutInt,zpp_$nape_util_ZNPList_$ZPP_$CutInt.__name__="zpp_nape.util.ZNPList_ZPP_CutInt",zpp_$nape_util_ZNPList_$ZPP_$CutInt.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CutInt:(e=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CutInt:(e=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CutInt:(t=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CutInt:(t=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$CutInt};var zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter,zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter.__name__="zpp_nape.util.ZNPList_ZPP_SensorArbiter",zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter};var zpp_$nape_util_ZNPList_$ZPP_$CutVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_CutVert"]=zpp_$nape_util_ZNPList_$ZPP_$CutVert,zpp_$nape_util_ZNPList_$ZPP_$CutVert.__name__="zpp_nape.util.ZNPList_ZPP_CutVert",zpp_$nape_util_ZNPList_$ZPP_$CutVert.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CutVert:(e=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CutVert:(e=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CutVert:(t=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CutVert:(t=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$CutVert};var zpp_$nape_util_ZNPList_$ZPP_$Listener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_Listener"]=zpp_$nape_util_ZNPList_$ZPP_$Listener,zpp_$nape_util_ZNPList_$ZPP_$Listener.__name__="zpp_nape.util.ZNPList_ZPP_Listener",zpp_$nape_util_ZNPList_$ZPP_$Listener.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Listener:(e=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$Listener:(e=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Listener:(t=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$Listener:(t=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$Listener};var zpp_$nape_util_ZNPList_$ZPP_$ColArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=zpp_$nape_util_ZNPList_$ZPP_$ColArbiter,zpp_$nape_util_ZNPList_$ZPP_$ColArbiter.__name__="zpp_nape.util.ZNPList_ZPP_ColArbiter",zpp_$nape_util_ZNPList_$ZPP_$ColArbiter.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(e=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter:(t=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$ColArbiter};var zpp_$nape_util_ZNPList_$ZPP_$ToiEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=zpp_$nape_util_ZNPList_$ZPP_$ToiEvent,zpp_$nape_util_ZNPList_$ZPP_$ToiEvent.__name__="zpp_nape.util.ZNPList_ZPP_ToiEvent",zpp_$nape_util_ZNPList_$ZPP_$ToiEvent.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent:(e=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent:(e=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent:(t=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent:(t=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$ToiEvent};var zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_PartitionVertex"]=zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex,zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex.__name__="zpp_nape.util.ZNPList_ZPP_PartitionVertex",zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex:(t=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex:(t=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$PartitionVertex};var zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_PartitionedPoly"]=zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly,zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly.__name__="zpp_nape.util.ZNPList_ZPP_PartitionedPoly",zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly:(e=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly:(e=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly:(t=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly:(t=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$PartitionedPoly};var zpp_$nape_util_ZNPList_$ZPP_$SimplifyP=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_SimplifyP"]=zpp_$nape_util_ZNPList_$ZPP_$SimplifyP,zpp_$nape_util_ZNPList_$ZPP_$SimplifyP.__name__="zpp_nape.util.ZNPList_ZPP_SimplifyP",zpp_$nape_util_ZNPList_$ZPP_$SimplifyP.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP:(e=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP:(e=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP:(t=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP:(t=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$SimplifyP};var zpp_$nape_util_ZNPList_$ZPP_$GeomVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_GeomVert"]=zpp_$nape_util_ZNPList_$ZPP_$GeomVert,zpp_$nape_util_ZNPList_$ZPP_$GeomVert.__name__="zpp_nape.util.ZNPList_ZPP_GeomVert",zpp_$nape_util_ZNPList_$ZPP_$GeomVert.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$GeomVert:(e=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$GeomVert:(e=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$GeomVert:(t=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$GeomVert:(t=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$GeomVert};var zpp_$nape_util_ZNPList_$ZPP_$SimpleVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_SimpleVert"]=zpp_$nape_util_ZNPList_$ZPP_$SimpleVert,zpp_$nape_util_ZNPList_$ZPP_$SimpleVert.__name__="zpp_nape.util.ZNPList_ZPP_SimpleVert",zpp_$nape_util_ZNPList_$ZPP_$SimpleVert.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert:(t=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert:(t=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$SimpleVert};var zpp_$nape_util_ZNPList_$ZPP_$SimpleEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_SimpleEvent"]=zpp_$nape_util_ZNPList_$ZPP_$SimpleEvent,zpp_$nape_util_ZNPList_$ZPP_$SimpleEvent.__name__="zpp_nape.util.ZNPList_ZPP_SimpleEvent",zpp_$nape_util_ZNPList_$ZPP_$SimpleEvent.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent:(t=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent:(t=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$SimpleEvent};var zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup,zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup.__name__="zpp_nape.util.ZNPList_ZPP_InteractionGroup",zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup:(e=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup:(e=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup:(t=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup:(t=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup};var zpp_$nape_util_ZNPList_$ZPP_$CbSetPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=zpp_$nape_util_ZNPList_$ZPP_$CbSetPair,zpp_$nape_util_ZNPList_$ZPP_$CbSetPair.__name__="zpp_nape.util.ZNPList_ZPP_CbSetPair",zpp_$nape_util_ZNPList_$ZPP_$CbSetPair.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair:(t=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair:(t=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$CbSetPair};var zpp_$nape_util_ZNPList_$ConvexResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ConvexResult"]=zpp_$nape_util_ZNPList_$ConvexResult,zpp_$nape_util_ZNPList_$ConvexResult.__name__="zpp_nape.util.ZNPList_ConvexResult",zpp_$nape_util_ZNPList_$ConvexResult.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ConvexResult:(e=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ConvexResult:(e=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ConvexResult:(t=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ConvexResult:(t=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool,zpp_$nape_util_ZNPNode_$ConvexResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ConvexResult};var zpp_$nape_util_ZNPList_$ZPP_$GeomPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=zpp_$nape_util_ZNPList_$ZPP_$GeomPoly,zpp_$nape_util_ZNPList_$ZPP_$GeomPoly.__name__="zpp_nape.util.ZNPList_ZPP_GeomPoly",zpp_$nape_util_ZNPList_$ZPP_$GeomPoly.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly:(e=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool?e=new zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly:(e=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly:(t=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool?t=new zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly:(t=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$ZPP_$GeomPoly};var zpp_$nape_util_ZNPList_$RayResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};t["zpp_nape.util.ZNPList_RayResult"]=zpp_$nape_util_ZNPList_$RayResult,zpp_$nape_util_ZNPList_$RayResult.__name__="zpp_nape.util.ZNPList_RayResult",zpp_$nape_util_ZNPList_$RayResult.prototype={begin:function(){return this.head},setbegin:function(n){this.head=n,this.modified=!0,this.pushmod=!0},add:function(n){var e;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?e=new zpp_$nape_util_ZNPNode_$RayResult:(e=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},inlined_add:function(n){var e;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?e=new zpp_$nape_util_ZNPNode_$RayResult:(e=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=e.next,e.next=null),e.elt=n;var t=e;return t.next=this.head,this.head=t,this.modified=!0,this.length++,n},addAll:function(n){for(var e=n.head;null!=e;){var t=e.elt;this.add(t),e=e.next}},insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?t=new zpp_$nape_util_ZNPNode_$RayResult:(t=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},inlined_insert:function(n,e){var t;null==zpp_$nape_util_ZNPNode_$RayResult.zpp_pool?t=new zpp_$nape_util_ZNPNode_$RayResult:(t=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return null==n?(i.next=this.head,this.head=i):(i.next=n.next,n.next=i),this.pushmod=this.modified=!0,this.length++,i},pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},inlined_pop:function(){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},inlined_pop_unsafe:function(){var n=this.head.elt;return this.pop(),n},remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){this.erase(e),i=!0;break}e=t,t=t.next}return i},inlined_remove:function(n){for(var e=null,t=this.head;null!=t;){if(t.elt==n){var i,r;null==e?(r=(i=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(i=e.next).next,e.next=r,null==r&&(this.pushmod=!0));var l=i;l.elt=null,l.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=l,this.modified=!0,this.length--,this.pushmod=!0,!0;break}e=t,t=t.next}},inlined_try_remove:function(n){for(var e=null,t=this.head,i=!1;null!=t;){if(t.elt==n){var r,l;null==e?(l=(r=this.head).next,this.head=l,null==this.head&&(this.pushmod=!0)):(l=(r=e.next).next,e.next=l,null==l&&(this.pushmod=!0));var s=r;s.elt=null,s.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=s,this.modified=!0,this.length--,this.pushmod=!0,i=!0;break}e=t,t=t.next}return i},erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},inlined_erase:function(n){var e,t;null==n?(t=(e=this.head).next,this.head=t,null==this.head&&(this.pushmod=!0)):(t=(e=n.next).next,n.next=t,null==t&&(this.pushmod=!0));var i=e;return i.elt=null,i.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=i,this.modified=!0,this.length--,this.pushmod=!0,t},splice:function(n,e){for(;e-- >0&&null!=n.next;)this.erase(n);return n.next},clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;){var n=this.head;this.head=n.next;var e=n;e.elt=null,e.next=zpp_$nape_util_ZNPNode_$RayResult.zpp_pool,zpp_$nape_util_ZNPNode_$RayResult.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},reverse:function(){for(var n=this.head,e=null;null!=n;){var t=n.next;n.next=e,this.head=n,e=n,n=t}this.modified=!0,this.pushmod=!0},empty:function(){return null==this.head},size:function(){return this.length},has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},inlined_has:function(n){var e;e=!1;for(var t=this.head;null!=t;){if(t.elt==n){e=!0;break}t=t.next}return e},front:function(){return this.head.elt},back:function(){for(var n=this.head,e=n;null!=e;)n=e,e=e.next;return n.elt},iterator_at:function(n){for(var e=this.head;n-- >0&&null!=e;)e=e.next;return e},at:function(n){var e=this.iterator_at(n);return null!=e?e.elt:null},__class__:zpp_$nape_util_ZNPList_$RayResult};var zpp_$nape_util_ZNPNode_$ZPP_$Compound=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Compound"]=zpp_$nape_util_ZNPNode_$ZPP_$Compound,zpp_$nape_util_ZNPNode_$ZPP_$Compound.__name__="zpp_nape.util.ZNPNode_ZPP_Compound",zpp_$nape_util_ZNPNode_$ZPP_$Compound.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Compound};var zpp_$nape_util_ZNPNode_$ZPP_$AABBNode=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode,zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.__name__="zpp_nape.util.ZNPNode_ZPP_AABBNode",zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$AABBNode};var zpp_$nape_util_ZNPNode_$ZPP_$Edge=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Edge"]=zpp_$nape_util_ZNPNode_$ZPP_$Edge,zpp_$nape_util_ZNPNode_$ZPP_$Edge.__name__="zpp_nape.util.ZNPNode_ZPP_Edge",zpp_$nape_util_ZNPNode_$ZPP_$Edge.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Edge};var zpp_$nape_util_ZNPNode_$ZPP_$AABBPair=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair,zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.__name__="zpp_nape.util.ZNPNode_ZPP_AABBPair",zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$AABBPair};var zpp_$nape_util_ZNPNode_$ZPP_$Shape=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Shape"]=zpp_$nape_util_ZNPNode_$ZPP_$Shape,zpp_$nape_util_ZNPNode_$ZPP_$Shape.__name__="zpp_nape.util.ZNPNode_ZPP_Shape",zpp_$nape_util_ZNPNode_$ZPP_$Shape.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Shape};var zpp_$nape_util_ZNPNode_$ZPP_$Arbiter=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter,zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.__name__="zpp_nape.util.ZNPNode_ZPP_Arbiter",zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Arbiter};var zpp_$nape_util_ZNPNode_$ZPP_$Constraint=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Constraint"]=zpp_$nape_util_ZNPNode_$ZPP_$Constraint,zpp_$nape_util_ZNPNode_$ZPP_$Constraint.__name__="zpp_nape.util.ZNPNode_ZPP_Constraint",zpp_$nape_util_ZNPNode_$ZPP_$Constraint.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Constraint};var zpp_$nape_util_ZNPNode_$ZPP_$Body=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Body"]=zpp_$nape_util_ZNPNode_$ZPP_$Body,zpp_$nape_util_ZNPNode_$ZPP_$Body.__name__="zpp_nape.util.ZNPNode_ZPP_Body",zpp_$nape_util_ZNPNode_$ZPP_$Body.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Body};var zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet,zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.__name__="zpp_nape.util.ZNPNode_ZPP_CallbackSet",zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet};var zpp_$nape_util_ZNPNode_$ZPP_$CbType=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_CbType"]=zpp_$nape_util_ZNPNode_$ZPP_$CbType,zpp_$nape_util_ZNPNode_$ZPP_$CbType.__name__="zpp_nape.util.ZNPNode_ZPP_CbType",zpp_$nape_util_ZNPNode_$ZPP_$CbType.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$CbType};var zpp_$nape_util_ZNPNode_$ZPP_$Component=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Component"]=zpp_$nape_util_ZNPNode_$ZPP_$Component,zpp_$nape_util_ZNPNode_$ZPP_$Component.__name__="zpp_nape.util.ZNPNode_ZPP_Component",zpp_$nape_util_ZNPNode_$ZPP_$Component.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Component};var zpp_$nape_util_ZNPNode_$ZPP_$Vec2=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Vec2"]=zpp_$nape_util_ZNPNode_$ZPP_$Vec2,zpp_$nape_util_ZNPNode_$ZPP_$Vec2.__name__="zpp_nape.util.ZNPNode_ZPP_Vec2",zpp_$nape_util_ZNPNode_$ZPP_$Vec2.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Vec2};var zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter,zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.__name__="zpp_nape.util.ZNPNode_ZPP_FluidArbiter",zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter};var zpp_$nape_util_ZNPNode_$ZPP_$CutInt=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_CutInt"]=zpp_$nape_util_ZNPNode_$ZPP_$CutInt,zpp_$nape_util_ZNPNode_$ZPP_$CutInt.__name__="zpp_nape.util.ZNPNode_ZPP_CutInt",zpp_$nape_util_ZNPNode_$ZPP_$CutInt.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$CutInt};var zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter,zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.__name__="zpp_nape.util.ZNPNode_ZPP_SensorArbiter",zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter};var zpp_$nape_util_ZNPNode_$ZPP_$CutVert=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_CutVert"]=zpp_$nape_util_ZNPNode_$ZPP_$CutVert,zpp_$nape_util_ZNPNode_$ZPP_$CutVert.__name__="zpp_nape.util.ZNPNode_ZPP_CutVert",zpp_$nape_util_ZNPNode_$ZPP_$CutVert.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$CutVert};var zpp_$nape_util_ZNPNode_$ZPP_$Listener=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Listener"]=zpp_$nape_util_ZNPNode_$ZPP_$Listener,zpp_$nape_util_ZNPNode_$ZPP_$Listener.__name__="zpp_nape.util.ZNPNode_ZPP_Listener",zpp_$nape_util_ZNPNode_$ZPP_$Listener.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Listener};var zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter,zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.__name__="zpp_nape.util.ZNPNode_ZPP_ColArbiter",zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter};var zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent,zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.__name__="zpp_nape.util.ZNPNode_ZPP_ToiEvent",zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent};var zpp_$nape_util_ZNPNode_$ZPP_$Interactor=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_Interactor"]=zpp_$nape_util_ZNPNode_$ZPP_$Interactor,zpp_$nape_util_ZNPNode_$ZPP_$Interactor.__name__="zpp_nape.util.ZNPNode_ZPP_Interactor",zpp_$nape_util_ZNPNode_$ZPP_$Interactor.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$Interactor};var zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener,zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.__name__="zpp_nape.util.ZNPNode_ZPP_InteractionListener",zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener};var zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_PartitionVertex"]=zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex,zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.__name__="zpp_nape.util.ZNPNode_ZPP_PartitionVertex",zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$PartitionVertex};var zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_PartitionedPoly"]=zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly,zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.__name__="zpp_nape.util.ZNPNode_ZPP_PartitionedPoly",zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$PartitionedPoly};var zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_SimplifyP"]=zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP,zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.__name__="zpp_nape.util.ZNPNode_ZPP_SimplifyP",zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$SimplifyP};var zpp_$nape_util_ZNPNode_$ZPP_$GeomVert=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_GeomVert"]=zpp_$nape_util_ZNPNode_$ZPP_$GeomVert,zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.__name__="zpp_nape.util.ZNPNode_ZPP_GeomVert",zpp_$nape_util_ZNPNode_$ZPP_$GeomVert.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$GeomVert};var zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_SimpleVert"]=zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert,zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.__name__="zpp_nape.util.ZNPNode_ZPP_SimpleVert",zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$SimpleVert};var zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_SimpleEvent"]=zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent,zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.__name__="zpp_nape.util.ZNPNode_ZPP_SimpleEvent",zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$SimpleEvent};var zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup,zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.__name__="zpp_nape.util.ZNPNode_ZPP_InteractionGroup",zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup};var zpp_$nape_util_ZNPNode_$ZPP_$CbSet=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_CbSet"]=zpp_$nape_util_ZNPNode_$ZPP_$CbSet,zpp_$nape_util_ZNPNode_$ZPP_$CbSet.__name__="zpp_nape.util.ZNPNode_ZPP_CbSet",zpp_$nape_util_ZNPNode_$ZPP_$CbSet.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$CbSet};var zpp_$nape_util_ZNPNode_$ZPP_$BodyListener=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener,zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.__name__="zpp_nape.util.ZNPNode_ZPP_BodyListener",zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$BodyListener};var zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener,zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.__name__="zpp_nape.util.ZNPNode_ZPP_ConstraintListener",zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener};var zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair,zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.__name__="zpp_nape.util.ZNPNode_ZPP_CbSetPair",zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair};var zpp_$nape_util_ZNPNode_$ConvexResult=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ConvexResult"]=zpp_$nape_util_ZNPNode_$ConvexResult,zpp_$nape_util_ZNPNode_$ConvexResult.__name__="zpp_nape.util.ZNPNode_ConvexResult",zpp_$nape_util_ZNPNode_$ConvexResult.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ConvexResult};var zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly,zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.__name__="zpp_nape.util.ZNPNode_ZPP_GeomPoly",zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly};var zpp_$nape_util_ZNPNode_$RayResult=function(){this.elt=null,this.next=null};t["zpp_nape.util.ZNPNode_RayResult"]=zpp_$nape_util_ZNPNode_$RayResult,zpp_$nape_util_ZNPNode_$RayResult.__name__="zpp_nape.util.ZNPNode_RayResult",zpp_$nape_util_ZNPNode_$RayResult.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zpp_$nape_util_ZNPNode_$RayResult};var zpp_$nape_util_ZPP_$MixVec2List=function(){this.at_index=0,this.at_ite=null,this.zip_length=!1,this._length=0,this.inner=null,nape_geom_Vec2List.call(this),this.at_ite=null,this.at_index=0,this.zip_length=!0,this._length=0};t["zpp_nape.util.ZPP_MixVec2List"]=zpp_$nape_util_ZPP_$MixVec2List,zpp_$nape_util_ZPP_$MixVec2List.__name__="zpp_nape.util.ZPP_MixVec2List",zpp_$nape_util_ZPP_$MixVec2List.get=function(n,e){null==e&&(e=!1);var t=new zpp_$nape_util_ZPP_$MixVec2List;return t.inner=n,t.zpp_inner.immutable=e,t},zpp_$nape_util_ZPP_$MixVec2List.__super__=nape_geom_Vec2List,zpp_$nape_util_ZPP_$MixVec2List.prototype=$extend(nape_geom_Vec2List.prototype,{zpp_gl:function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var n=this.inner.next;null!=n;){this._length++,n=n.next}this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate(),this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(n){if(this.zpp_vm(),n<0||n>=this.zpp_gl())throw haxe_Exception.thrown("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(n=this.zpp_gl()-1-n),n<this.at_index||null==this.at_ite)for(this.at_index=0,this.at_ite=this.inner.next;;){this.at_ite;break}for(;this.at_index!=n;)for(this.at_index++,this.at_ite=this.at_ite.next;;){this.at_ite;break}var e=this.at_ite;if(null==e.outer){e.outer=new nape_geom_Vec2;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},push:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.zpp_vm(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: Vec2 is already in use");var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag)this.inner.add(n.zpp_inner);else{var t=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(t,n.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},unshift:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.zpp_vm(),n.zpp_inner._inuse)throw haxe_Exception.thrown("Error: Vec2 is already in use");var e=null==this.zpp_inner.adder||this.zpp_inner.adder(n);if(e){if(this.zpp_inner.reverse_flag){var t=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(t,n.zpp_inner)}else this.inner.add(n.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(n)}return e},pop:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_vm();var n=null;if(this.zpp_inner.reverse_flag){if(null==(n=this.inner.next).outer)n.outer=new nape_geom_Vec2,null!=(t=n.outer.zpp_inner).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,n.outer.zpp_inner=n;var e=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.inner.pop()}else{null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var t,i=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(n=null==i?this.inner.next:i.next).outer)n.outer=new nape_geom_Vec2,null!=(t=n.outer.zpp_inner).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,n.outer.zpp_inner=n;var e=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.inner.erase(i)}(this.zpp_inner.invalidate(),null==n.outer)&&(n.outer=new nape_geom_Vec2,null!=(t=n.outer.zpp_inner).outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=t,n.outer.zpp_inner=n);return e=n.outer},shift:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw haxe_Exception.thrown("Error: Cannot remove from empty list");this.zpp_vm();var n=null;if(this.zpp_inner.reverse_flag){null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var e=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(n=null==e?this.inner.next:e.next).outer)n.outer=new nape_geom_Vec2,null!=(i=n.outer.zpp_inner).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,n.outer.zpp_inner=n;var t=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.inner.erase(e)}else{var i;if(null==(n=this.inner.next).outer)n.outer=new nape_geom_Vec2,null!=(i=n.outer.zpp_inner).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,n.outer.zpp_inner=n;var t=n.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.inner.pop()}(this.zpp_inner.invalidate(),null==n.outer)&&(n.outer=new nape_geom_Vec2,null!=(i=n.outer.zpp_inner).outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool,zpp_$nape_geom_ZPP_$Vec2.zpp_pool=i,n.outer.zpp_inner=n);return t=n.outer},remove:function(n){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");var e;this.zpp_inner.modify_test(),this.zpp_vm(),e=!1;for(var t=this.inner.next;null!=t;){var i=t;if(n.zpp_inner==i){e=!0;break}t=t.next}return e&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.inner.remove(n.zpp_inner),this.zpp_inner.invalidate()),e},clear:function(){if(this.zpp_inner.immutable)throw haxe_Exception.thrown("Error: Vec2List is immutable");if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},__class__:zpp_$nape_util_ZPP_$MixVec2List});var zpp_$nape_util_ZPP_$EdgeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Edge,this._invalidated=!0};t["zpp_nape.util.ZPP_EdgeList"]=zpp_$nape_util_ZPP_$EdgeList,zpp_$nape_util_ZPP_$EdgeList.__name__="zpp_nape.util.ZPP_EdgeList",zpp_$nape_util_ZPP_$EdgeList.get=function(n,e){null==e&&(e=!1);var t=new nape_shape_EdgeList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$EdgeList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$EdgeList};var zpp_$nape_util_ZPP_$ShapeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Shape,this._invalidated=!0};t["zpp_nape.util.ZPP_ShapeList"]=zpp_$nape_util_ZPP_$ShapeList,zpp_$nape_util_ZPP_$ShapeList.__name__="zpp_nape.util.ZPP_ShapeList",zpp_$nape_util_ZPP_$ShapeList.get=function(n,e){null==e&&(e=!1);var t=new nape_shape_ShapeList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$ShapeList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$ShapeList};var zpp_$nape_util_ZPP_$BodyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Body,this._invalidated=!0};t["zpp_nape.util.ZPP_BodyList"]=zpp_$nape_util_ZPP_$BodyList,zpp_$nape_util_ZPP_$BodyList.__name__="zpp_nape.util.ZPP_BodyList",zpp_$nape_util_ZPP_$BodyList.get=function(n,e){null==e&&(e=!1);var t=new nape_phys_BodyList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$BodyList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$BodyList};var zpp_$nape_util_ZPP_$CompoundList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Compound,this._invalidated=!0};t["zpp_nape.util.ZPP_CompoundList"]=zpp_$nape_util_ZPP_$CompoundList,zpp_$nape_util_ZPP_$CompoundList.__name__="zpp_nape.util.ZPP_CompoundList",zpp_$nape_util_ZPP_$CompoundList.get=function(n,e){null==e&&(e=!1);var t=new nape_phys_CompoundList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$CompoundList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$CompoundList};var zpp_$nape_util_ZPP_$InteractorList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Interactor,this._invalidated=!0};t["zpp_nape.util.ZPP_InteractorList"]=zpp_$nape_util_ZPP_$InteractorList,zpp_$nape_util_ZPP_$InteractorList.__name__="zpp_nape.util.ZPP_InteractorList",zpp_$nape_util_ZPP_$InteractorList.get=function(n,e){null==e&&(e=!1);var t=new nape_phys_InteractorList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$InteractorList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$InteractorList};var zpp_$nape_util_ZPP_$ConvexResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ConvexResult,this._invalidated=!0};t["zpp_nape.util.ZPP_ConvexResultList"]=zpp_$nape_util_ZPP_$ConvexResultList,zpp_$nape_util_ZPP_$ConvexResultList.__name__="zpp_nape.util.ZPP_ConvexResultList",zpp_$nape_util_ZPP_$ConvexResultList.get=function(n,e){null==e&&(e=!1);var t=new nape_geom_ConvexResultList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$ConvexResultList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$ConvexResultList};var zpp_$nape_util_ZPP_$GeomPolyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$GeomPoly,this._invalidated=!0};t["zpp_nape.util.ZPP_GeomPolyList"]=zpp_$nape_util_ZPP_$GeomPolyList,zpp_$nape_util_ZPP_$GeomPolyList.__name__="zpp_nape.util.ZPP_GeomPolyList",zpp_$nape_util_ZPP_$GeomPolyList.get=function(n,e){null==e&&(e=!1);var t=new nape_geom_GeomPolyList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$GeomPolyList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$GeomPolyList};var zpp_$nape_util_ZPP_$RayResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$RayResult,this._invalidated=!0};t["zpp_nape.util.ZPP_RayResultList"]=zpp_$nape_util_ZPP_$RayResultList,zpp_$nape_util_ZPP_$RayResultList.__name__="zpp_nape.util.ZPP_RayResultList",zpp_$nape_util_ZPP_$RayResultList.get=function(n,e){null==e&&(e=!1);var t=new nape_geom_RayResultList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$RayResultList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$RayResultList};var zpp_$nape_util_ZPP_$Vec2List=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Vec2,this._invalidated=!0};t["zpp_nape.util.ZPP_Vec2List"]=zpp_$nape_util_ZPP_$Vec2List,zpp_$nape_util_ZPP_$Vec2List.__name__="zpp_nape.util.ZPP_Vec2List",zpp_$nape_util_ZPP_$Vec2List.get=function(n,e){null==e&&(e=!1);var t=new nape_geom_Vec2List;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$Vec2List.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$Vec2List};var zpp_$nape_util_ZPP_$ArbiterList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Arbiter,this._invalidated=!0};t["zpp_nape.util.ZPP_ArbiterList"]=zpp_$nape_util_ZPP_$ArbiterList,zpp_$nape_util_ZPP_$ArbiterList.__name__="zpp_nape.util.ZPP_ArbiterList",zpp_$nape_util_ZPP_$ArbiterList.get=function(n,e){null==e&&(e=!1);var t=new nape_dynamics_ArbiterList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$ArbiterList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$ArbiterList};var zpp_$nape_util_ZPP_$ContactList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_dynamics_ZPP_$Contact,this._invalidated=!0};t["zpp_nape.util.ZPP_ContactList"]=zpp_$nape_util_ZPP_$ContactList,zpp_$nape_util_ZPP_$ContactList.__name__="zpp_nape.util.ZPP_ContactList",zpp_$nape_util_ZPP_$ContactList.get=function(n,e){null==e&&(e=!1);var t=new nape_dynamics_ContactList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$ContactList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$ContactList};var zpp_$nape_util_ZPP_$InteractionGroupList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup,this._invalidated=!0};t["zpp_nape.util.ZPP_InteractionGroupList"]=zpp_$nape_util_ZPP_$InteractionGroupList,zpp_$nape_util_ZPP_$InteractionGroupList.__name__="zpp_nape.util.ZPP_InteractionGroupList",zpp_$nape_util_ZPP_$InteractionGroupList.get=function(n,e){null==e&&(e=!1);var t=new nape_dynamics_InteractionGroupList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$InteractionGroupList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$InteractionGroupList};var zpp_$nape_util_ZPP_$ConstraintList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Constraint,this._invalidated=!0};t["zpp_nape.util.ZPP_ConstraintList"]=zpp_$nape_util_ZPP_$ConstraintList,zpp_$nape_util_ZPP_$ConstraintList.__name__="zpp_nape.util.ZPP_ConstraintList",zpp_$nape_util_ZPP_$ConstraintList.get=function(n,e){null==e&&(e=!1);var t=new nape_constraint_ConstraintList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$ConstraintList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$ConstraintList};var zpp_$nape_util_ZPP_$CbTypeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$CbType,this._invalidated=!0};t["zpp_nape.util.ZPP_CbTypeList"]=zpp_$nape_util_ZPP_$CbTypeList,zpp_$nape_util_ZPP_$CbTypeList.__name__="zpp_nape.util.ZPP_CbTypeList",zpp_$nape_util_ZPP_$CbTypeList.get=function(n,e){null==e&&(e=!1);var t=new nape_callbacks_CbTypeList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$CbTypeList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$CbTypeList};var zpp_$nape_util_ZPP_$ListenerList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Listener,this._invalidated=!0};t["zpp_nape.util.ZPP_ListenerList"]=zpp_$nape_util_ZPP_$ListenerList,zpp_$nape_util_ZPP_$ListenerList.__name__="zpp_nape.util.ZPP_ListenerList",zpp_$nape_util_ZPP_$ListenerList.get=function(n,e){null==e&&(e=!1);var t=new nape_callbacks_ListenerList;return t.zpp_inner.inner=n,e&&(t.zpp_inner.immutable=!0),t.zpp_inner.zip_length=!0,t},zpp_$nape_util_ZPP_$ListenerList.prototype={valmod:function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modified:function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},__class__:zpp_$nape_util_ZPP_$ListenerList};var zpp_$nape_util_ZPP_$Math=function(){};t["zpp_nape.util.ZPP_Math"]=zpp_$nape_util_ZPP_$Math,zpp_$nape_util_ZPP_$Math.__name__="zpp_nape.util.ZPP_Math",zpp_$nape_util_ZPP_$Math.sqrt=function(n){return Math.sqrt(n)},zpp_$nape_util_ZPP_$Math.invsqrt=function(n){return 1/Math.sqrt(n)},zpp_$nape_util_ZPP_$Math.sqr=function(n){return n*n},zpp_$nape_util_ZPP_$Math.clamp2=function(n,e){var t=-e;return n<t?t:n>e?e:n},zpp_$nape_util_ZPP_$Math.clamp=function(n,e,t){return n<e?e:n>t?t:n};var zpp_$nape_util_ZPP_$PubPool=function(){};t["zpp_nape.util.ZPP_PubPool"]=zpp_$nape_util_ZPP_$PubPool,zpp_$nape_util_ZPP_$PubPool.__name__="zpp_nape.util.ZPP_PubPool";var zpp_$nape_util_ZPP_$Set_$ZPP_$Body=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_Body"]=zpp_$nape_util_ZPP_$Set_$ZPP_$Body,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.__name__="zpp_nape.util.ZPP_Set_ZPP_Body",zpp_$nape_util_ZPP_$Set_$ZPP_$Body.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$Body};var zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.__name__="zpp_nape.util.ZPP_Set_ZPP_CbSet",zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet};var zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_PartitionVertex"]=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.__name__="zpp_nape.util.ZPP_Set_ZPP_PartitionVertex",zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionVertex};var zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_SimpleVert"]=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.__name__="zpp_nape.util.ZPP_Set_ZPP_SimpleVert",zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleVert};var zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_SimpleSeg"]=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.__name__="zpp_nape.util.ZPP_Set_ZPP_SimpleSeg",zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleSeg};var zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_SimpleEvent"]=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.__name__="zpp_nape.util.ZPP_Set_ZPP_SimpleEvent",zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$SimpleEvent};var zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};t["zpp_nape.util.ZPP_Set_ZPP_PartitionPair"]=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.__name__="zpp_nape.util.ZPP_Set_ZPP_PartitionPair",zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$PartitionPair};var zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};function $getIterator(n){return n instanceof Array?new haxe_iterators_ArrayIterator(n):n.iterator()}function $bind(e,t){return null==t?null:(null==t.__id__&&(t.__id__=n.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&(i=t.bind(e),e.hx__closures__[t.__id__]=i),i);var i}t["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.__name__="zpp_nape.util.ZPP_Set_ZPP_CbSetPair",zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.prototype={free:function(){this.data=null,this.lt=null,this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var e=n.data,t=!0;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var r=i.data;if(t){if(e==r)t=!1;else if(!this.lt(r,e)&&this.lt(e,r))return!1}else if(!this.lt(e,r)&&this.lt(r,e))return!1;if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}return!0},empty:function(){return null==this.parent},singular:function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},size:function(){var n=0;if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){e.data;if(++n,null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return n},has:function(n){return null!=this.find(n)},find:function(n){for(var e=this.parent;null!=e&&e.data!=n;)e=this.lt(n,e.data)?e.prev:e.next;return e},has_weak:function(n){return null!=this.find_weak(n)},find_weak:function(n){for(var e=this.parent;null!=e;)if(this.lt(n,e.data))e=e.prev;else{if(!this.lt(e.data,n))break;e=e.next}return e},lower_bound:function(n){var e=null;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;){var i=t.data;if(!this.lt(i,n)){e=i;break}if(null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}}return e},first:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;return n.data},pop_front:function(){for(var n=this.parent;null!=n.prev;)n=n.prev;var e=n.data;return this.remove_node(n),e},remove:function(n){var e=this.find(n);this.remove_node(e)},successor_node:function(n){if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{var e=n;for(n=n.parent;null!=n&&n.prev!=e;)e=n,n=n.parent}return n},predecessor_node:function(n){if(null!=n.prev)for(n=n.prev;null!=n.next;)n=n.next;else{var e=n;for(n=n.parent;null!=n&&n.next!=e;)e=n,n=n.parent}return n},successor:function(n){var e=this.successor_node(this.find(n));return null==e?null:e.data},predecessor:function(n){var e=this.predecessor_node(this.find(n));return null==e?null:e.data},remove_node:function(n){if(null!=n.next&&null!=n.prev){for(var e=n.next;null!=e.prev;)e=e.prev;var t=n.data;n.data=e.data,e.data=t,null!=this.swapped&&this.swapped(n.data,e.data),n=e}var i=null==n.prev?n.next:n.prev;if(1==n.colour)if(null!=n.prev||null!=n.next)i.colour=1;else if(null!=n.parent)for(var r=n.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var l=r.prev;if(-1==l.colour){this.__fix_neg_red(l);break}if(0==l.colour){if(null!=l.prev&&0==l.prev.colour){this.__fix_dbl_red(l.prev);break}if(null!=l.next&&0==l.next.colour){this.__fix_dbl_red(l.next);break}}var s=r.next;if(-1==s.colour){this.__fix_neg_red(s);break}if(0==s.colour){if(null!=s.prev&&0==s.prev.colour){this.__fix_dbl_red(s.prev);break}if(null!=s.next&&0==s.next.colour){this.__fix_dbl_red(s.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var a=n.parent;null==a?this.parent=i:a.prev==n?a.prev=i:a.next=i,null!=i&&(i.parent=a),n.parent=n.prev=n.next=null;var o=n;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=o},clear:function(){if(null!=this.parent){for(var n=this.parent;null!=n;)if(null!=n.prev)n=n.prev;else if(null!=n.next)n=n.next;else{var e=n.parent;null!=e&&(n==e.prev?e.prev=null:e.next=null,n.parent=null);var t=n;t.data=null,t.lt=null,t.swapped=null,t.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=t,n=e}this.parent=null}},clear_with:function(n){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{n(e.data);var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=i,e=t}this.parent=null}},clear_node:function(n,e){e(n.data);var t=n.parent;null!=t&&(n==t.prev?t.prev=null:t.next=null,n.parent=null);var i=n;return i.data=null,i.lt=null,i.swapped=null,i.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=i,t},__fix_neg_red:function(n){var e,t=n.parent;if(t.prev==n){var i=n.prev,r=(a=n.next).prev,l=a.next;i.colour=0,n.colour=t.colour=1,n.next=r,null!=r&&(r.parent=n);var s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.prev=l,null!=l&&(l.parent=a),a.next=t.next,null!=t.next&&(t.next.parent=a),t.next=a,null!=a&&(a.parent=t),e=i}else{var a;i=n.next,r=(a=n.prev).next,l=a.prev;i.colour=0,n.colour=t.colour=1,n.prev=r,null!=r&&(r.parent=n);s=t.data;t.data=a.data,a.data=s,null!=this.swapped&&this.swapped(t.data,a.data),a.next=l,null!=l&&(l.parent=a),a.prev=t.prev,null!=t.prev&&(t.prev.parent=a),t.prev=a,null!=a&&(a.parent=t),e=i}null!=e.prev&&0==e.prev.colour?this.__fix_dbl_red(e.prev):null!=e.next&&0==e.next.colour&&this.__fix_dbl_red(e.next)},__fix_dbl_red:function(n){for(;;){var e,t,i,r,l,s,a,o=n.parent,p=o.parent;if(null==p){o.colour=1;break}o==p.prev?(i=p,a=p.next,n==o.prev?(e=n,t=o,r=n.prev,l=n.next,s=o.next):(e=o,t=n,r=o.prev,l=n.prev,s=n.next)):(e=p,r=p.prev,n==o.prev?(t=n,i=o,l=n.prev,s=n.next,a=o.next):(t=o,i=n,l=o.prev,s=n.prev,a=n.next));var h=p.parent;if(null==h?this.parent=t:h.prev==p?h.prev=t:h.next=t,null!=t&&(t.parent=h),e.prev=r,null!=r&&(r.parent=e),e.next=l,null!=l&&(l.parent=e),t.prev=e,null!=e&&(e.parent=t),t.next=i,null!=i&&(i.parent=t),i.prev=s,null!=s&&(s.parent=i),i.next=a,null!=a&&(a.parent=i),t.colour=p.colour-1,e.colour=1,i.colour=1,t==this.parent)this.parent.colour=1;else if(0==t.colour&&0==t.parent.colour){n=t;continue}break}},try_insert_bool:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null!=e&&(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),!0)},try_insert:function(n){var e=null,t=null;if(null==this.parent)null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,this.parent=e;else for(t=this.parent;;)if(this.lt(n,t.data)){if(null==t.prev){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,t.prev=e,e.parent=t;break}t=t.prev}else{if(!this.lt(t.data,n))break;if(null==t.next){null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,t.next=e,e.parent=t;break}t=t.next}return null==e?t:(null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e)},insert:function(n){var e;if(null==zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool?e=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair:(e=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool,zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=e.next,e.next=null),e.data=n,null==this.parent)this.parent=e;else for(var t=this.parent;;)if(this.lt(e.data,t.data)){if(null==t.prev){t.prev=e,e.parent=t;break}t=t.prev}else{if(null==t.next){t.next=e,e.parent=t;break}t=t.next}return null==e.parent?e.colour=1:(e.colour=0,0==e.parent.colour&&this.__fix_dbl_red(e)),e},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair},n.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(HxOverrides.now=performance.now.bind(performance)),t.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(n){return n<65536?String.fromCharCode(n):String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n))}),String.prototype.__class__=t.String=String,String.__name__="String",t.Array=Array,Array.__name__="Array",Date.prototype.__class__=t.Date=Date,Date.__name__="Date";var $,Q,J={},nn={},en=Number,tn=Boolean,rn={},ln={};assets_AllAssets.bind(),haxe_ds_ObjectMap.count=0,js_Boot.__toStr={}.toString,Main.lastResizeTime=-1,Main.lastNewWidth=-1,Main.lastNewHeight=-1,Main.readyToDisplay=!1,Main.resizing=0,Main.containerWidth=0,Main.containerHeight=0,Main.containerPixelRatio=0,Main._displayReady=!1,ceramic_Entity.__meta__={obj:{editable:null},fields:{components:{editable:null}}},ceramic_Entity._fieldInfo={components:{editable:[],type:"ceramic.ReadOnlyMap<String,ceramic.Component>",index:1},scriptContent:{editable:[{label:"Script"}],type:"ceramic.ScriptContent",index:2}},Xml.Element=0,Xml.PCData=1,Xml.CData=2,Xml.Comment=3,Xml.DocType=4,Xml.ProcessingInstruction=5,Xml.Document=6,ceramic_Assets.instances=[],ceramic_Assets.all=[],ceramic_Assets.allDirs=[],ceramic_Assets.allByName=new haxe_ds_StringMap,ceramic_Assets.allDirsByName=new haxe_ds_StringMap,ceramic_Assets.customAssetKinds=new haxe_ds_StringMap,ceramic_Assets._instances=[],assets_AllAssets.all=["itwillfall-music.mp3","RobotoBold.fnt","RobotoBold.png","itwillfall-music.ogg","outline.vert","pixelArt.vert","fxaa.vert","msdf.frag","textured.frag","tintBlack.vert","glow.vert","bloom.vert","blur.vert","bloom.frag","blur.frag","glow.frag","msdf.vert","textured.vert","tintBlack.frag","pixelArt.frag","fxaa.frag","outline.frag","RobotoMedium.fnt","white.png","RobotoMedium.png"],assets_AllAssets.allDirs=[],assets_AllAssets.allByName=(($=new haxe_ds_StringMap).h.white=["white.png"],$.h.tintBlack=["tintBlack.vert","tintBlack.frag"],$.h.textured=["textured.frag","textured.vert"],$.h.pixelArt=["pixelArt.vert","pixelArt.frag"],$.h.outline=["outline.vert","outline.frag"],$.h.msdf=["msdf.frag","msdf.vert"],$.h["itwillfall-music"]=["itwillfall-music.mp3","itwillfall-music.ogg"],$.h.glow=["glow.vert","glow.frag"],$.h.fxaa=["fxaa.vert","fxaa.frag"],$.h.blur=["blur.vert","blur.frag"],$.h.bloom=["bloom.vert","bloom.frag"],$.h.RobotoMedium=["RobotoMedium.fnt","RobotoMedium.png"],$.h.RobotoBold=["RobotoBold.fnt","RobotoBold.png"],$),assets_AllAssets.allDirsByName=new haxe_ds_StringMap,assets_Fonts.ROBOTO_MEDIUM="font:RobotoMedium",assets_Fonts.ROBOTO_BOLD="font:RobotoBold",assets_Sounds.ITWILLFALL_MUSIC="sound:itwillfall-music",backend_ClayEvents.GAMEPAD_STORAGE_SIZE=32,ceramic_Transform._decomposed1=new ceramic_DecomposedTransform,ceramic_Transform._decomposed2=new ceramic_DecomposedTransform,ceramic_Transform._tmp=new ceramic_Transform,backend_Draw.MAX_VERTS_SIZE=65536,backend_Draw.MAX_INDICES=16384,backend_Draw.MAX_BUFFERS=64,backend_Draw.ATTRIBUTE_POS=0,backend_Draw.ATTRIBUTE_UV=1,backend_Draw.ATTRIBUTE_COLOR=2,backend_Draw._posListArray=[],backend_Draw._indiceListArray=[],backend_Draw._uvListArray=[],backend_Draw._colorListArray=[],backend_Draw._activeTextureSlot=0,backend_Draw._batchMultiTexture=!1,backend_Draw._posSize=0,backend_Draw._customGLBuffers=[],backend_Draw._projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),backend_Draw._modelViewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),backend_Draw._modelViewTransform=new ceramic_Transform,backend_Draw._renderTargetTransform=new ceramic_Transform,backend_Draw._blackTransparentColor=function(n){var e=0;null==e&&(e=255);var t=-16777216;return t&=16777215,t|=(e>255?255:e<0?0:e)<<24}(),backend_Draw._whiteTransparentColor=function(n){var e=0;null==e&&(e=255);var t=-1;return t&=16777215,t|=(e>255?255:e<0?0:e)<<24}(),backend_Draw._maxVerts=0,backend_Draw._vertexSize=0,backend_Draw._numIndices=0,backend_Draw._numPos=0,backend_Draw._posIndex=0,backend_Draw._floatAttributesSize=0,backend_Draw._numUVs=0,backend_Draw._uvIndex=0,backend_Draw._numColors=0,backend_Draw._colorIndex=0,backend_Draw._drawingInStencilBuffer=!1,backend_Info.RE_OPERA=new EReg("OPR/([0-6].)","g"),backend_Info.RE_SAFARI_VERSION=new EReg("Version/(.*?) ",""),backend_Shaders.SHADER_ATTRIBUTES=["vertexPosition","vertexTCoord","vertexColor"],backend_Shaders.SHADER_ATTRIBUTES_MULTITEXTURE=["vertexPosition","vertexTCoord","vertexColor","vertexTextureId"],backend_Shaders._maxIfStatementsByFragmentShader=-1,backend_Textures._maxTexturesByBatch=-1,ceramic_ArrayPool.ALLOC_STEP=10,ceramic_ArrayPool.dynPool10=new ceramic_ArrayPool(10),ceramic_ArrayPool.dynPool100=new ceramic_ArrayPool(100),ceramic_ArrayPool.dynPool1000=new ceramic_ArrayPool(1e3),ceramic_ArrayPool.dynPool10000=new ceramic_ArrayPool(1e4),ceramic_ArrayPool.dynPool100000=new ceramic_ArrayPool(1e5),ceramic_ArrayPool.didNotifyLargePool=!1,ceramic_Asset.__meta__={fields:{unobservedStatus:{observe:null}}},ceramic_AtlasAsset.__meta__={fields:{unobservedAtlas:{observe:null}}},ceramic_BezierEasing.SPLINE_TABLE_SIZE=11,ceramic_BezierEasing.SAMPLE_STEP_SIZE=1/(ceramic_BezierEasing.SPLINE_TABLE_SIZE-1),ceramic_BezierEasing.NEWTON_ITERATIONS=4,ceramic_BezierEasing.NEWTON_MIN_SLOPE=.001,ceramic_BezierEasing.SUBDIVISION_PRECISION=1e-7,ceramic_BezierEasing.SUBDIVISION_MAX_ITERATIONS=10,ceramic_BezierEasing.TWO_THIRD=.6666666666666666,ceramic_BezierEasing.CACHE_SIZE=1e4,ceramic_BezierEasing.numCachedInstances=0,ceramic_BinaryAsset.__meta__={fields:{unobservedBytes:{observe:null}}},ceramic_Point.pool=new ceramic_Pool,ceramic_Visual.__meta__={obj:{editable:null},fields:{visible:{editable:[{group:"active"}]},touchable:{editable:[{group:"active"}]},depth:{editable:[{group:"depth"}]},depthRange:{editable:[{group:"depth",label:"Range"}]},x:{editable:[{group:"position"}]},y:{editable:[{group:"position"}]},scaleX:{editable:[{group:"scale"}]},scaleY:{editable:[{group:"scale"}]},skewX:{editable:[{group:"skew"}]},skewY:{editable:[{group:"skew"}]},anchorX:{editable:[{group:"anchor"}]},anchorY:{editable:[{group:"anchor"}]},width:{editable:[{min:0,group:"size"}]},height:{editable:[{min:0,group:"size"}]},roundTranslation:{editable:null},rotation:{editable:[{slider:[0,360],degrees:!0}]},alpha:{editable:[{slider:[0,1]}]},translateX:{editable:[{group:"translate"}]},translateY:{editable:[{group:"translate"}]},shader:{editable:null}}},ceramic_Visual.DEPTH_FACTOR=1e3,ceramic_Visual.DEPTH_MARGIN=.01,ceramic_Visual.FLAG_NOT_ACTIVE=1,ceramic_Visual.FLAG_VISIBLE_WHEN_ACTIVE=2,ceramic_Visual.FLAG_TOUCHABLE_WHEN_ACTIVE=4,ceramic_Visual.FLAG_IS_HIT_VISUAL=8,ceramic_Visual._degToRad=.017453292519943295,ceramic_Visual._matrix=new ceramic_Transform,ceramic_Visual._point=new ceramic_Point,ceramic_Visual._minDepth=0,ceramic_Visual._maxDepth=0,ceramic_Visual._fieldInfo={skewY:{editable:[{group:"skew"}],type:"Float",index:61},skewX:{editable:[{group:"skew"}],type:"Float",index:59},alpha:{editable:[{slider:[0,1]}],type:"Float",index:79},roundTranslation:{editable:[],type:"Int",index:75},visible:{editable:[{group:"active"}],type:"Bool",index:43},depthRange:{editable:[{group:"depth",label:"Range"}],type:"Float",index:49},depth:{editable:[{group:"depth"}],type:"Float",index:47},scaleX:{editable:[{group:"scale"}],type:"Float",index:55},anchorX:{editable:[{group:"anchor"}],type:"Float",index:63},x:{editable:[{group:"position"}],type:"Float",index:51},y:{editable:[{group:"position"}],type:"Float",index:53},touchable:{editable:[{group:"active"}],type:"Bool",index:45},rotation:{editable:[{slider:[0,360],degrees:!0}],type:"Float",index:77},height:{editable:[{min:0,group:"size"}],type:"Float",index:71},translateY:{editable:[{group:"translate"}],type:"Float",index:84},anchorY:{editable:[{group:"anchor"}],type:"Float",index:65},translateX:{editable:[{group:"translate"}],type:"Float",index:81},scaleY:{editable:[{group:"scale"}],type:"Float",index:57},width:{editable:[{min:0,group:"size"}],type:"Float",index:67},shader:{editable:[],type:"ceramic.Shader",index:89}},ceramic_Mesh.__meta__={obj:{editable:[{highlight:{points:"vertices"},helpers:[{name:"Grid",method:"grid",params:[{name:"Columns",type:"Int",value:1,slider:[1,64]},{name:"Rows",type:"Int",value:1,slider:[1,64]}]},{name:"Grid From Texture",method:"gridFromTexture",params:[{name:"Columns",type:"Int",value:1,slider:[1,64]},{name:"Rows",type:"Int",value:1,slider:[1,64]}]}]}]},fields:{complexHit:{editable:null},color:{editable:null},vertices:{editable:null},indices:{editable:null},texture:{editable:null},uvs:{editable:null}}},ceramic_Mesh._matrix=ceramic_Visual._matrix,ceramic_Mesh._fieldInfo={vertices:{editable:[],type:"Array<Float>",index:9},complexHit:{editable:[],type:"Bool",index:3},uvs:{editable:[],type:"Array<Float>",index:14},color:{editable:[],type:"ceramic.Color",index:6},indices:{editable:[],type:"Array<Int>",index:10},texture:{editable:[],type:"ceramic.Texture",index:12}},ceramic_CollectionImpl._nextInternalId=0,ceramic_CollectionEntry.__meta__={fields:{id:{editable:null},name:{editable:null}}},ceramic_CollectionEntry._nextId=1,ceramic_CollectionEntry._nextIndex=1,ceramic_CollectionEntry._fieldInfo={name:{editable:[],type:"String"},id:{editable:[],type:"String"},index:{type:"Int"}},p.NONE=-1,p.WHITE=16777215,p.GRAY=8421504,p.BLACK=0,p.GREEN=32768,p.LIME=65280,p.YELLOW=16776960,p.ORANGE=16753920,p.RED=16711680,p.PURPLE=8388736,p.BLUE=255,p.BROWN=9127187,p.PINK=16761035,p.MAGENTA=16711935,p.CYAN=65535,p.CORNFLOWERBLUE=6591981,p.MEDIUMVIOLETRED=13047173,p.DEEPPINK=16716947,p.PALEVIOLETRED=14381203,p.HOTPINK=16738740,p.LIGHTPINK=16758465,p.DARKRED=9109504,p.FIREBRICK=11674146,p.CRIMSON=14423100,p.INDIANRED=13458524,p.LIGHTCORAL=15761536,p.SALMON=16416882,p.DARKSALMON=15308410,p.LIGHTSALMON=16752762,p.ORANGERED=16729344,p.TOMATO=16737095,p.DARKORANGE=16747520,p.CORAL=16744272,p.DARKKHAKI=12433259,p.GOLD=16766720,p.KHAKI=15787660,p.PEACHPUFF=16767673,p.PALEGOLDENROD=15657130,p.MOCCASIN=16770229,p.PAPAYAWHIP=16773077,p.LEMONCHIFFON=16775885,p.LIGHTYELLOW=16777184,p.SIENNA=10506797,p.CHOCOLATE=13789470,p.PERU=13468991,p.TAN=13808780,p.DARKOLIVEGREEN=5597999,p.OLIVE=8421376,p.TEAL=32896,p.TURQUOISE=4251856,p.NAVY=128,p.INDIGO=4915330,p.ORCHID=14315734,p.LAVENDER=15132410,p.AZURE=15794175,p.IVORY=16777200,p.DIMGREY=6908265,p.SLATEGREY=7372944,p.SNOW=16775930,p.colorLookup=new haxe_ds_StringMap,p._hsluvTuple=[0,0,0],p._hsluvResult=[0,0,0],ceramic_DatabaseAsset.__meta__={fields:{unobservedDatabase:{observe:null}}},ceramic_EasingUtils._emptyArray=[],ceramic_FieldInfo.fieldInfoMap=new haxe_ds_StringMap,ceramic_FieldMeta.metaMap=new haxe_ds_StringMap,ceramic_FieldMeta.metaMapRecursive=new haxe_ds_StringMap,ceramic_Quad.__meta__={obj:{editable:[{implicitSizeUnlessNull:"texture"}]},fields:{color:{editable:null},transparent:{editable:null},texture:{editable:null}}},ceramic_Quad.FLAG_TRANSPARENT=16,ceramic_Quad.FLAG_ROTATE_FRAME=32,ceramic_Quad._matrix=ceramic_Visual._matrix,ceramic_Quad._degToRad=.017453292519943295,ceramic_Quad._fieldInfo={transparent:{editable:[],type:"Bool",index:5},color:{editable:[],type:"ceramic.Color",index:4},texture:{editable:[],type:"ceramic.Texture",index:10}},ceramic_Layer.__meta__={obj:{editable:[{implicitSizeUnlessNull:"texture"}]}},ceramic_Layer._fieldInfo={},ceramic_Filter.__meta__={fields:{unobservedRenderTexture:{observe:null}}},ceramic_Filter._matrix=ceramic_Visual._matrix,ceramic_FontAsset.__meta__={fields:{unobservedFont:{observe:null}}},ceramic_Fragment.__meta__={obj:{editable:[{implicitSizeUnlessTrue:"resizable"}]},fields:{fragmentData:{editable:null},resizable:{editable:null},autoUpdateTimeline:{editable:null},floatA:{editable:[{group:"floatsAB"}]},floatB:{editable:[{group:"floatsAB"}]},floatC:{editable:[{group:"floatsCD"}]},floatD:{editable:[{group:"floatsCD"}]}}},ceramic_Fragment.basicTypes=function(n){var e=new haxe_ds_StringMap;return e.h.Bool=!0,e.h.Int=!0,e.h.Float=!0,e.h.String=!0,e.h["ceramic.Color"]=!0,e.h["ceramic.ScriptContent"]=!0,e}(),ceramic_Fragment.cachedFragmentData=new haxe_ds_StringMap,ceramic_Fragment._trackResult=new ceramic_Value,ceramic_Fragment._keyframeResult=new ceramic_Value,ceramic_Fragment._usedKeyframes=[],ceramic_Fragment._fieldInfo={autoUpdateTimeline:{editable:[],type:"Bool",index:53},floatD:{editable:[{group:"floatsCD"}],type:"Float",index:61},floatA:{editable:[{group:"floatsAB"}],type:"Float",index:55},resizable:{editable:[],type:"Bool",index:52},floatC:{editable:[{group:"floatsCD"}],type:"Float",index:59},floatB:{editable:[{group:"floatsAB"}],type:"Float",index:57},fragmentData:{editable:[],type:"ceramic.FragmentData",index:51}},ceramic_FragmentsAsset.__meta__={fields:{unobservedFragments:{observe:null}}},u.LEFT_X=0,u.LEFT_Y=1,u.RIGHT_X=2,u.RIGHT_Y=3,u.LEFT_TRIGGER=4,u.RIGHT_TRIGGER=5,_.A=0,_.B=1,_.X=2,_.Y=3,_.L1=4,_.R1=5,_.L2=6,_.R2=7,_.SELECT=8,_.START=9,_.L3=10,_.R3=11,_.DPAD_UP=12,_.DPAD_DOWN=13,_.DPAD_LEFT=14,_.DPAD_RIGHT=15,ceramic_HashedString._lastDecodeIncomplete=!1,ceramic_ImageAsset.__meta__={fields:{unobservedTexture:{observe:null}}},ceramic_Input.GAMEPAD_STORAGE_SIZE=32,ceramic_IntMap.NO_VALUE=0,ceramic_IntMap.NULL_VALUE=1,ceramic_IntMap.RESERVED_GAP=2,c.UNKNOWN=0,c.ENTER=13,c.ESCAPE=27,c.BACKSPACE=8,c.TAB=9,c.SPACE=32,c.EXCLAIM=33,c.QUOTEDBL=34,c.HASH=35,c.PERCENT=37,c.DOLLAR=36,c.AMPERSAND=38,c.QUOTE=39,c.LEFTPAREN=40,c.RIGHTPAREN=41,c.ASTERISK=42,c.PLUS=43,c.COMMA=44,c.MINUS=45,c.PERIOD=46,c.SLASH=47,c.KEY_0=48,c.KEY_1=49,c.KEY_2=50,c.KEY_3=51,c.KEY_4=52,c.KEY_5=53,c.KEY_6=54,c.KEY_7=55,c.KEY_8=56,c.KEY_9=57,c.COLON=58,c.SEMICOLON=59,c.LESS=60,c.EQUALS=61,c.GREATER=62,c.QUESTION=63,c.AT=64,c.LEFTBRACKET=91,c.BACKSLASH=92,c.RIGHTBRACKET=93,c.CARET=94,c.UNDERSCORE=95,c.BACKQUOTE=96,c.KEY_A=97,c.KEY_B=98,c.KEY_C=99,c.KEY_D=100,c.KEY_E=101,c.KEY_F=102,c.KEY_G=103,c.KEY_H=104,c.KEY_I=105,c.KEY_J=106,c.KEY_K=107,c.KEY_L=108,c.KEY_M=109,c.KEY_N=110,c.KEY_O=111,c.KEY_P=112,c.KEY_Q=113,c.KEY_R=114,c.KEY_S=115,c.KEY_T=116,c.KEY_U=117,c.KEY_V=118,c.KEY_W=119,c.KEY_X=120,c.KEY_Y=121,c.KEY_Z=122,c.CAPSLOCK=1073741881,c.F1=1073741882,c.F2=1073741883,c.F3=1073741884,c.F4=1073741885,c.F5=1073741886,c.F6=1073741887,c.F7=1073741888,c.F8=1073741889,c.F9=1073741890,c.F10=1073741891,c.F11=1073741892,c.F12=1073741893,c.PRINTSCREEN=1073741894,c.SCROLLLOCK=1073741895,c.PAUSE=1073741896,c.INSERT=1073741897,c.HOME=1073741898,c.PAGEUP=1073741899,c.DELETE=127,c.END=1073741901,c.PAGEDOWN=1073741902,c.RIGHT=1073741903,c.LEFT=1073741904,c.DOWN=1073741905,c.UP=1073741906,c.NUMLOCKCLEAR=1073741907,c.KP_DIVIDE=1073741908,c.KP_MULTIPLY=1073741909,c.KP_MINUS=1073741910,c.KP_PLUS=1073741911,c.KP_ENTER=1073741912,c.KP_1=1073741913,c.KP_2=1073741914,c.KP_3=1073741915,c.KP_4=1073741916,c.KP_5=1073741917,c.KP_6=1073741918,c.KP_7=1073741919,c.KP_8=1073741920,c.KP_9=1073741921,c.KP_0=1073741922,c.KP_PERIOD=1073741923,c.APPLICATION=1073741925,c.POWER=1073741926,c.KP_EQUALS=1073741927,c.F13=1073741928,c.F14=1073741929,c.F15=1073741930,c.F16=1073741931,c.F17=1073741932,c.F18=1073741933,c.F19=1073741934,c.F20=1073741935,c.F21=1073741936,c.F22=1073741937,c.F23=1073741938,c.F24=1073741939,c.EXECUTE=1073741940,c.HELP=1073741941,c.MENU=1073741942,c.SELECT=1073741943,c.STOP=1073741944,c.AGAIN=1073741945,c.UNDO=1073741946,c.CUT=1073741947,c.COPY=1073741948,c.PASTE=1073741949,c.FIND=1073741950,c.MUTE=1073741951,c.VOLUMEUP=1073741952,c.VOLUMEDOWN=1073741953,c.KP_COMMA=1073741957,c.KP_EQUALSAS400=1073741958,c.ALTERASE=1073741977,c.SYSREQ=1073741978,c.CANCEL=1073741979,c.CLEAR=1073741980,c.PRIOR=1073741981,c.RETURN2=1073741982,c.SEPARATOR=1073741983,c.OUT=1073741984,c.OPER=1073741985,c.CLEARAGAIN=1073741986,c.CRSEL=1073741987,c.EXSEL=1073741988,c.KP_00=1073742e3,c.KP_000=1073742001,c.THOUSANDSSEPARATOR=1073742002,c.DECIMALSEPARATOR=1073742003,c.CURRENCYUNIT=1073742004,c.CURRENCYSUBUNIT=1073742005,c.KP_LEFTPAREN=1073742006,c.KP_RIGHTPAREN=1073742007,c.KP_LEFTBRACE=1073742008,c.KP_RIGHTBRACE=1073742009,c.KP_TAB=1073742010,c.KP_BACKSPACE=1073742011,c.KP_A=1073742012,c.KP_B=1073742013,c.KP_C=1073742014,c.KP_D=1073742015,c.KP_E=1073742016,c.KP_F=1073742017,c.KP_XOR=1073742018,c.KP_POWER=1073742019,c.KP_PERCENT=1073742020,c.KP_LESS=1073742021,c.KP_GREATER=1073742022,c.KP_AMPERSAND=1073742023,c.KP_DBLAMPERSAND=1073742024,c.KP_VERTICALBAR=1073742025,c.KP_DBLVERTICALBAR=1073742026,c.KP_COLON=1073742027,c.KP_HASH=1073742028,c.KP_SPACE=1073742029,c.KP_AT=1073742030,c.KP_EXCLAM=1073742031,c.KP_MEMSTORE=1073742032,c.KP_MEMRECALL=1073742033,c.KP_MEMCLEAR=1073742034,c.KP_MEMADD=1073742035,c.KP_MEMSUBTRACT=1073742036,c.KP_MEMMULTIPLY=1073742037,c.KP_MEMDIVIDE=1073742038,c.KP_PLUSMINUS=1073742039,c.KP_CLEAR=1073742040,c.KP_CLEARENTRY=1073742041,c.KP_BINARY=1073742042,c.KP_OCTAL=1073742043,c.KP_DECIMAL=1073742044,c.KP_HEXADECIMAL=1073742045,c.LCTRL=1073742048,c.LSHIFT=1073742049,c.LALT=1073742050,c.LMETA=1073742051,c.RCTRL=1073742052,c.RSHIFT=1073742053,c.RALT=1073742054,c.RMETA=1073742055,c.MODE=1073742081,c.AUDIONEXT=1073742082,c.AUDIOPREV=1073742083,c.AUDIOSTOP=1073742084,c.AUDIOPLAY=1073742085,c.AUDIOMUTE=1073742086,c.MEDIASELECT=1073742087,c.WWW=1073742088,c.MAIL=1073742089,c.CALCULATOR=1073742090,c.COMPUTER=1073742091,c.AC_SEARCH=1073742092,c.AC_HOME=1073742093,c.AC_BACK=1073742094,c.AC_FORWARD=1073742095,c.AC_STOP=1073742096,c.AC_REFRESH=1073742097,c.AC_BOOKMARKS=1073742098,c.BRIGHTNESSDOWN=1073742099,c.BRIGHTNESSUP=1073742100,c.DISPLAYSWITCH=1073742101,c.KBDILLUMTOGGLE=1073742102,c.KBDILLUMDOWN=1073742103,c.KBDILLUMUP=1073742104,c.EJECT=1073742105,c.SLEEP=1073742106,polyline_Stroke.NUMBER_NONE=-9999999999,polyline_Stroke.MATH_TWO_PI=6.28318530718,polyline_Stroke.MATH_HALF_PI=1.57079632679,polyline_Stroke.MATH_PI_AND_HALF=4.71238898038,polyline_Stroke.miterUtils=new polyline_MiterUtils,ceramic_Line.__meta__={obj:{editable:[{implicitSize:!0,highlight:{points:"points",minPoints:2,maxPoints:999999999},disable:["texture","vertices","indices","uvs"]}]},fields:{points:{editable:null},miterLimit:{editable:null},thickness:{editable:[{slider:[1,64]}]},join:{editable:null},cap:{editable:null},loop:{editable:null},autoComputeSize:{editable:[{label:"Auto Size"}]}}},ceramic_Line._stroke=new polyline_Stroke,ceramic_Line._fieldInfo={points:{editable:[],type:"Array<Float>",index:1},cap:{editable:[],type:"ceramic.LineCap",index:9},join:{editable:[],type:"ceramic.LineJoin",index:7},thickness:{editable:[{slider:[1,64]}],type:"Float",index:5},autoComputeSize:{editable:[{label:"Auto Size"}],type:"Bool",index:13},miterLimit:{editable:[],type:"Float",index:3},loop:{editable:[],type:"Bool",index:11}},ceramic_Logger._hasElectronRunner=!1,ceramic_Logger.didInitOnce=!1,ceramic_NapeSystem._matrix=new ceramic_Transform,ceramic_Texture._nextIndex=1,f.MASK=1073741824,f.UNKNOWN=0,f.KEY_A=4,f.KEY_B=5,f.KEY_C=6,f.KEY_D=7,f.KEY_E=8,f.KEY_F=9,f.KEY_G=10,f.KEY_H=11,f.KEY_I=12,f.KEY_J=13,f.KEY_K=14,f.KEY_L=15,f.KEY_M=16,f.KEY_N=17,f.KEY_O=18,f.KEY_P=19,f.KEY_Q=20,f.KEY_R=21,f.KEY_S=22,f.KEY_T=23,f.KEY_U=24,f.KEY_V=25,f.KEY_W=26,f.KEY_X=27,f.KEY_Y=28,f.KEY_Z=29,f.KEY_1=30,f.KEY_2=31,f.KEY_3=32,f.KEY_4=33,f.KEY_5=34,f.KEY_6=35,f.KEY_7=36,f.KEY_8=37,f.KEY_9=38,f.KEY_0=39,f.ENTER=40,f.ESCAPE=41,f.BACKSPACE=42,f.TAB=43,f.SPACE=44,f.MINUS=45,f.EQUALS=46,f.LEFTBRACKET=47,f.RIGHTBRACKET=48,f.BACKSLASH=49,f.NONUSHASH=50,f.SEMICOLON=51,f.APOSTROPHE=52,f.GRAVE=53,f.COMMA=54,f.PERIOD=55,f.SLASH=56,f.CAPSLOCK=57,f.F1=58,f.F2=59,f.F3=60,f.F4=61,f.F5=62,f.F6=63,f.F7=64,f.F8=65,f.F9=66,f.F10=67,f.F11=68,f.F12=69,f.PRINTSCREEN=70,f.SCROLLLOCK=71,f.PAUSE=72,f.INSERT=73,f.HOME=74,f.PAGEUP=75,f.DELETE=76,f.END=77,f.PAGEDOWN=78,f.RIGHT=79,f.LEFT=80,f.DOWN=81,f.UP=82,f.NUMLOCKCLEAR=83,f.KP_DIVIDE=84,f.KP_MULTIPLY=85,f.KP_MINUS=86,f.KP_PLUS=87,f.KP_ENTER=88,f.KP_1=89,f.KP_2=90,f.KP_3=91,f.KP_4=92,f.KP_5=93,f.KP_6=94,f.KP_7=95,f.KP_8=96,f.KP_9=97,f.KP_0=98,f.KP_PERIOD=99,f.NONUSBACKSLASH=100,f.APPLICATION=101,f.POWER=102,f.KP_EQUALS=103,f.F13=104,f.F14=105,f.F15=106,f.F16=107,f.F17=108,f.F18=109,f.F19=110,f.F20=111,f.F21=112,f.F22=113,f.F23=114,f.F24=115,f.EXECUTE=116,f.HELP=117,f.MENU=118,f.SELECT=119,f.STOP=120,f.AGAIN=121,f.UNDO=122,f.CUT=123,f.COPY=124,f.PASTE=125,f.FIND=126,f.MUTE=127,f.VOLUMEUP=128,f.VOLUMEDOWN=129,f.KP_COMMA=133,f.KP_EQUALSAS400=134,f.INTERNATIONAL1=135,f.INTERNATIONAL2=136,f.INTERNATIONAL3=137,f.INTERNATIONAL4=138,f.INTERNATIONAL5=139,f.INTERNATIONAL6=140,f.INTERNATIONAL7=141,f.INTERNATIONAL8=142,f.INTERNATIONAL9=143,f.LANG1=144,f.LANG2=145,f.LANG3=146,f.LANG4=147,f.LANG5=148,f.LANG6=149,f.LANG7=150,f.LANG8=151,f.LANG9=152,f.ALTERASE=153,f.SYSREQ=154,f.CANCEL=155,f.CLEAR=156,f.PRIOR=157,f.RETURN2=158,f.SEPARATOR=159,f.OUT=160,f.OPER=161,f.CLEARAGAIN=162,f.CRSEL=163,f.EXSEL=164,f.KP_00=176,f.KP_000=177,f.THOUSANDSSEPARATOR=178,f.DECIMALSEPARATOR=179,f.CURRENCYUNIT=180,f.CURRENCYSUBUNIT=181,f.KP_LEFTPAREN=182,f.KP_RIGHTPAREN=183,f.KP_LEFTBRACE=184,f.KP_RIGHTBRACE=185,f.KP_TAB=186,f.KP_BACKSPACE=187,f.KP_A=188,f.KP_B=189,f.KP_C=190,f.KP_D=191,f.KP_E=192,f.KP_F=193,f.KP_XOR=194,f.KP_POWER=195,f.KP_PERCENT=196,f.KP_LESS=197,f.KP_GREATER=198,f.KP_AMPERSAND=199,f.KP_DBLAMPERSAND=200,f.KP_VERTICALBAR=201,f.KP_DBLVERTICALBAR=202,f.KP_COLON=203,f.KP_HASH=204,f.KP_SPACE=205,f.KP_AT=206,f.KP_EXCLAM=207,f.KP_MEMSTORE=208,f.KP_MEMRECALL=209,f.KP_MEMCLEAR=210,f.KP_MEMADD=211,f.KP_MEMSUBTRACT=212,f.KP_MEMMULTIPLY=213,f.KP_MEMDIVIDE=214,f.KP_PLUSMINUS=215,f.KP_CLEAR=216,f.KP_CLEARENTRY=217,f.KP_BINARY=218,f.KP_OCTAL=219,f.KP_DECIMAL=220,f.KP_HEXADECIMAL=221,f.LCTRL=224,f.LSHIFT=225,f.LALT=226,f.LMETA=227,f.RCTRL=228,f.RSHIFT=229,f.RALT=230,f.RMETA=231,f.MODE=257,f.AUDIONEXT=258,f.AUDIOPREV=259,f.AUDIOSTOP=260,f.AUDIOPLAY=261,f.AUDIOMUTE=262,f.MEDIASELECT=263,f.WWW=264,f.MAIL=265,f.CALCULATOR=266,f.COMPUTER=267,f.AC_SEARCH=268,f.AC_HOME=269,f.AC_BACK=270,f.AC_FORWARD=271,f.AC_STOP=272,f.AC_REFRESH=273,f.AC_BOOKMARKS=274,f.BRIGHTNESSDOWN=275,f.BRIGHTNESSUP=276,f.DISPLAYSWITCH=277,f.KBDILLUMTOGGLE=278,f.KBDILLUMDOWN=279,f.KBDILLUMUP=280,f.EJECT=281,f.SLEEP=282,f.APP1=283,f.APP2=284,f.scanCodeNames=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left Meta","Right Ctrl","Right Shift","Right Alt","Right Meta",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],ceramic_Scene.__meta__={fields:{unobservedStatus:{observe:null}}},x.NONE=0,x.PRELOAD=1,x.LOAD=2,x.CREATE=3,x.FADE_IN=4,x.READY=5,x.FADE_OUT=6,x.DISABLED=7,ceramic_SceneSystem.lazyShared=!0,ceramic_Screen.__meta__={fields:{unobservedFocusedVisual:{observe:null},unobservedTexturesDensity:{observe:null}}},ceramic_Settings.__meta__={fields:{unobservedTargetWidth:{observe:null},unobservedTargetHeight:{observe:null},unobservedWindowWidth:{observe:null},unobservedWindowHeight:{observe:null},unobservedTargetDensity:{observe:null},unobservedBackground:{observe:null},unobservedScaling:{observe:null},unobservedTitle:{observe:null},unobservedFullscreen:{observe:null},unobservedTargetFps:{observe:null},unobservedMaxDelta:{observe:null},unobservedOverrideDelta:{observe:null}}},ceramic_Shape.__meta__={obj:{editable:[{implicitSize:!0,highlight:{points:"points",minPoints:3,maxPoints:999999999},disable:["texture","vertices","indices","uvs"]}]},fields:{points:{editable:[{minItems:6,points:!0}]},triangulation:{editable:null},holes:{editable:null},autoComputeSize:{editable:[{label:"Auto Size"}]}}},ceramic_Shape._fieldInfo={points:{editable:[{minItems:6,points:!0}],type:"Array<Float>",index:0},autoComputeSize:{editable:[{label:"Auto Size"}],type:"Bool",index:7},holes:{editable:[],type:"Array<Int>",index:5},triangulation:{editable:[],type:"ceramic.TriangulateMethod",index:3}},ceramic_SoundAsset.__meta__={fields:{unobservedSound:{observe:null}}},ceramic_StateMachineBase.__meta__={fields:{rawEntity:{entity:null}}},ceramic_StateMachineImpl.__meta__={fields:{unobservedState:{observe:null}}},ceramic_StateMachineSystem.lazyShared=!0,ceramic_Text.__meta__={obj:{editable:[{implicitSize:!0}]},fields:{color:{editable:null},content:{editable:[{multiline:!0}]},pointSize:{editable:[{slider:[6,600]}]},lineHeight:{editable:[{slider:[0,10]}]},letterSpacing:{editable:[{slider:[-100,100]}]},font:{editable:null},align:{editable:null},fitWidth:{editable:null},maxLineDiff:{editable:null}}},ceramic_Text._fieldInfo={fitWidth:{editable:[],type:"Float",index:38},letterSpacing:{editable:[{slider:[-100,100]}],type:"Float",index:20},color:{editable:[],type:"ceramic.Color",index:12},content:{editable:[{multiline:!0}],type:"String",index:14},align:{editable:[],type:"ceramic.TextAlign",index:36},font:{editable:[],type:"ceramic.BitmapFont",index:22},maxLineDiff:{editable:[],type:"Float",index:40},pointSize:{editable:[{slider:[6,600]}],type:"Float",index:16},lineHeight:{editable:[{slider:[0,10]}],type:"Float",index:18}},ceramic_TextAsset.__meta__={fields:{unobservedText:{observe:null}}},ceramic_Timer.callbacks=[],ceramic_Timer.next=999999999,ceramic_Timer.now=0,ceramic_Timer.startTimestamp=(new Date).getTime()/1e3,ceramic_TransformPool.availableTransforms=[],ceramic_Triangulate.poly2triPointsPool=[],ceramic_Triangulate.poly2triPoints=[],ceramic_Tween._tweens=[],ceramic_Tween._iteratedTweens=[],ceramic__$Tween_TweenEasingFunction.k=0,ceramic_Utils.RE_ASCII_CHAR=new EReg("^[a-zA-Z0-9]$",""),ceramic_Utils._nextUniqueIntCursor=0,ceramic_Utils._nextUniqueInt0=2147483646*Math.random()|0,ceramic_Utils._nextUniqueInt1=1e-4*(new Date).getTime()|0,ceramic_Utils._nextUniqueInt2=2147483646*Math.random()|0,ceramic_Utils._nextUniqueInt3=2147483646*Math.random()|0,ceramic_VisualTransition._currentTransform=new ceramic_Transform,ceramic_VisualTransition._targetTransform=new ceramic_Transform,ceramic_VisualTransition._identityTransform=new ceramic_Transform,ceramic_WatchDirectory.didTryRequireChokidar=!1,clay_Immediate.immediateCallbacks=[],clay_Immediate.immediateCallbacksCapacity=0,clay_Immediate.immediateCallbacksLen=0,z.UNKNOWN=0,z.ENTER=13,z.ESCAPE=27,z.BACKSPACE=8,z.TAB=9,z.SPACE=32,z.EXCLAIM=33,z.QUOTEDBL=34,z.HASH=35,z.PERCENT=37,z.DOLLAR=36,z.AMPERSAND=38,z.QUOTE=39,z.LEFTPAREN=40,z.RIGHTPAREN=41,z.ASTERISK=42,z.PLUS=43,z.COMMA=44,z.MINUS=45,z.PERIOD=46,z.SLASH=47,z.KEY_0=48,z.KEY_1=49,z.KEY_2=50,z.KEY_3=51,z.KEY_4=52,z.KEY_5=53,z.KEY_6=54,z.KEY_7=55,z.KEY_8=56,z.KEY_9=57,z.COLON=58,z.SEMICOLON=59,z.LESS=60;z.EQUALS=61,z.GREATER=62,z.QUESTION=63,z.AT=64,z.LEFTBRACKET=91,z.BACKSLASH=92,z.RIGHTBRACKET=93,z.CARET=94,z.UNDERSCORE=95,z.BACKQUOTE=96,z.KEY_A=97,z.KEY_B=98,z.KEY_C=99,z.KEY_D=100,z.KEY_E=101,z.KEY_F=102,z.KEY_G=103,z.KEY_H=104,z.KEY_I=105,z.KEY_J=106,z.KEY_K=107,z.KEY_L=108,z.KEY_M=109,z.KEY_N=110,z.KEY_O=111,z.KEY_P=112,z.KEY_Q=113,z.KEY_R=114,z.KEY_S=115,z.KEY_T=116,z.KEY_U=117,z.KEY_V=118,z.KEY_W=119,z.KEY_X=120,z.KEY_Y=121,z.KEY_Z=122,z.CAPSLOCK=1073741881,z.F1=1073741882,z.F2=1073741883,z.F3=1073741884,z.F4=1073741885,z.F5=1073741886,z.F6=1073741887,z.F7=1073741888,z.F8=1073741889,z.F9=1073741890,z.F10=1073741891,z.F11=1073741892,z.F12=1073741893,z.PRINTSCREEN=1073741894,z.SCROLLLOCK=1073741895,z.PAUSE=1073741896,z.INSERT=1073741897,z.HOME=1073741898,z.PAGEUP=1073741899,z.DELETE=127,z.END=1073741901,z.PAGEDOWN=1073741902,z.RIGHT=1073741903,z.LEFT=1073741904,z.DOWN=1073741905,z.UP=1073741906,z.NUMLOCKCLEAR=1073741907,z.KP_DIVIDE=1073741908,z.KP_MULTIPLY=1073741909,z.KP_MINUS=1073741910,z.KP_PLUS=1073741911,z.KP_ENTER=1073741912,z.KP_1=1073741913,z.KP_2=1073741914,z.KP_3=1073741915,z.KP_4=1073741916,z.KP_5=1073741917,z.KP_6=1073741918,z.KP_7=1073741919,z.KP_8=1073741920,z.KP_9=1073741921,z.KP_0=1073741922,z.KP_PERIOD=1073741923,z.APPLICATION=1073741925,z.POWER=1073741926,z.KP_EQUALS=1073741927,z.F13=1073741928,z.F14=1073741929,z.F15=1073741930,z.F16=1073741931,z.F17=1073741932,z.F18=1073741933,z.F19=1073741934,z.F20=1073741935,z.F21=1073741936,z.F22=1073741937,z.F23=1073741938,z.F24=1073741939,z.EXECUTE=1073741940,z.HELP=1073741941,z.MENU=1073741942,z.SELECT=1073741943,z.STOP=1073741944,z.AGAIN=1073741945,z.UNDO=1073741946,z.CUT=1073741947,z.COPY=1073741948,z.PASTE=1073741949,z.FIND=1073741950,z.MUTE=1073741951,z.VOLUMEUP=1073741952,z.VOLUMEDOWN=1073741953,z.KP_COMMA=1073741957,z.KP_EQUALSAS400=1073741958,z.ALTERASE=1073741977,z.SYSREQ=1073741978,z.CANCEL=1073741979,z.CLEAR=1073741980,z.PRIOR=1073741981,z.RETURN2=1073741982,z.SEPARATOR=1073741983,z.OUT=1073741984,z.OPER=1073741985,z.CLEARAGAIN=1073741986,z.CRSEL=1073741987,z.EXSEL=1073741988,z.KP_00=1073742e3,z.KP_000=1073742001,z.THOUSANDSSEPARATOR=1073742002,z.DECIMALSEPARATOR=1073742003,z.CURRENCYUNIT=1073742004,z.CURRENCYSUBUNIT=1073742005,z.KP_LEFTPAREN=1073742006,z.KP_RIGHTPAREN=1073742007,z.KP_LEFTBRACE=1073742008,z.KP_RIGHTBRACE=1073742009,z.KP_TAB=1073742010,z.KP_BACKSPACE=1073742011,z.KP_A=1073742012,z.KP_B=1073742013,z.KP_C=1073742014,z.KP_D=1073742015,z.KP_E=1073742016,z.KP_F=1073742017,z.KP_XOR=1073742018,z.KP_POWER=1073742019,z.KP_PERCENT=1073742020,z.KP_LESS=1073742021,z.KP_GREATER=1073742022,z.KP_AMPERSAND=1073742023,z.KP_DBLAMPERSAND=1073742024,z.KP_VERTICALBAR=1073742025,z.KP_DBLVERTICALBAR=1073742026,z.KP_COLON=1073742027,z.KP_HASH=1073742028,z.KP_SPACE=1073742029,z.KP_AT=1073742030,z.KP_EXCLAM=1073742031,z.KP_MEMSTORE=1073742032,z.KP_MEMRECALL=1073742033,z.KP_MEMCLEAR=1073742034,z.KP_MEMADD=1073742035,z.KP_MEMSUBTRACT=1073742036,z.KP_MEMMULTIPLY=1073742037,z.KP_MEMDIVIDE=1073742038,z.KP_PLUSMINUS=1073742039,z.KP_CLEAR=1073742040,z.KP_CLEARENTRY=1073742041,z.KP_BINARY=1073742042,z.KP_OCTAL=1073742043,z.KP_DECIMAL=1073742044,z.KP_HEXADECIMAL=1073742045,z.LCTRL=1073742048,z.LSHIFT=1073742049,z.LALT=1073742050,z.LMETA=1073742051,z.RCTRL=1073742052,z.RSHIFT=1073742053,z.RALT=1073742054,z.RMETA=1073742055,z.MODE=1073742081,z.AUDIONEXT=1073742082,z.AUDIOPREV=1073742083,z.AUDIOSTOP=1073742084,z.AUDIOPLAY=1073742085,z.AUDIOMUTE=1073742086,z.MEDIASELECT=1073742087,z.WWW=1073742088,z.MAIL=1073742089,z.CALCULATOR=1073742090,z.COMPUTER=1073742091,z.AC_SEARCH=1073742092,z.AC_HOME=1073742093,z.AC_BACK=1073742094,z.AC_FORWARD=1073742095,z.AC_STOP=1073742096,z.AC_REFRESH=1073742097,z.AC_BOOKMARKS=1073742098,z.BRIGHTNESSDOWN=1073742099,z.BRIGHTNESSUP=1073742100,z.DISPLAYSWITCH=1073742101,z.KBDILLUMTOGGLE=1073742102,z.KBDILLUMDOWN=1073742103,z.KBDILLUMUP=1073742104,z.EJECT=1073742105,z.SLEEP=1073742106,w.MASK=1073741824,w.UNKNOWN=0,w.KEY_A=4,w.KEY_B=5,w.KEY_C=6,w.KEY_D=7,w.KEY_E=8,w.KEY_F=9,w.KEY_G=10,w.KEY_H=11,w.KEY_I=12,w.KEY_J=13,w.KEY_K=14,w.KEY_L=15,w.KEY_M=16,w.KEY_N=17,w.KEY_O=18,w.KEY_P=19,w.KEY_Q=20,w.KEY_R=21,w.KEY_S=22,w.KEY_T=23,w.KEY_U=24,w.KEY_V=25,w.KEY_W=26,w.KEY_X=27,w.KEY_Y=28,w.KEY_Z=29,w.KEY_1=30,w.KEY_2=31,w.KEY_3=32,w.KEY_4=33,w.KEY_5=34,w.KEY_6=35,w.KEY_7=36,w.KEY_8=37,w.KEY_9=38,w.KEY_0=39,w.ENTER=40,w.ESCAPE=41,w.BACKSPACE=42,w.TAB=43,w.SPACE=44,w.MINUS=45,w.EQUALS=46,w.LEFTBRACKET=47,w.RIGHTBRACKET=48,w.BACKSLASH=49,w.NONUSHASH=50,w.SEMICOLON=51,w.APOSTROPHE=52,w.GRAVE=53,w.COMMA=54,w.PERIOD=55,w.SLASH=56,w.CAPSLOCK=57,w.F1=58,w.F2=59,w.F3=60,w.F4=61,w.F5=62,w.F6=63,w.F7=64,w.F8=65,w.F9=66,w.F10=67,w.F11=68,w.F12=69,w.PRINTSCREEN=70,w.SCROLLLOCK=71,w.PAUSE=72,w.INSERT=73,w.HOME=74,w.PAGEUP=75,w.DELETE=76,w.END=77,w.PAGEDOWN=78,w.RIGHT=79,w.LEFT=80,w.DOWN=81,w.UP=82,w.NUMLOCKCLEAR=83,w.KP_DIVIDE=84,w.KP_MULTIPLY=85,w.KP_MINUS=86,w.KP_PLUS=87,w.KP_ENTER=88,w.KP_1=89,w.KP_2=90,w.KP_3=91,w.KP_4=92,w.KP_5=93,w.KP_6=94,w.KP_7=95,w.KP_8=96,w.KP_9=97,w.KP_0=98,w.KP_PERIOD=99,w.NONUSBACKSLASH=100,w.APPLICATION=101,w.POWER=102,w.KP_EQUALS=103,w.F13=104,w.F14=105,w.F15=106,w.F16=107,w.F17=108,w.F18=109,w.F19=110,w.F20=111,w.F21=112,w.F22=113,w.F23=114,w.F24=115,w.EXECUTE=116,w.HELP=117,w.MENU=118,w.SELECT=119,w.STOP=120,w.AGAIN=121,w.UNDO=122,w.CUT=123,w.COPY=124,w.PASTE=125,w.FIND=126,w.MUTE=127,w.VOLUMEUP=128,w.VOLUMEDOWN=129,w.KP_COMMA=133,w.KP_EQUALSAS400=134,w.INTERNATIONAL1=135,w.INTERNATIONAL2=136,w.INTERNATIONAL3=137,w.INTERNATIONAL4=138,w.INTERNATIONAL5=139,w.INTERNATIONAL6=140,w.INTERNATIONAL7=141,w.INTERNATIONAL8=142,w.INTERNATIONAL9=143,w.LANG1=144,w.LANG2=145,w.LANG3=146,w.LANG4=147,w.LANG5=148,w.LANG6=149,w.LANG7=150,w.LANG8=151,w.LANG9=152,w.ALTERASE=153,w.SYSREQ=154,w.CANCEL=155,w.CLEAR=156,w.PRIOR=157,w.RETURN2=158,w.SEPARATOR=159,w.OUT=160,w.OPER=161,w.CLEARAGAIN=162,w.CRSEL=163,w.EXSEL=164,w.KP_00=176,w.KP_000=177,w.THOUSANDSSEPARATOR=178,w.DECIMALSEPARATOR=179,w.CURRENCYUNIT=180,w.CURRENCYSUBUNIT=181,w.KP_LEFTPAREN=182,w.KP_RIGHTPAREN=183,w.KP_LEFTBRACE=184,w.KP_RIGHTBRACE=185,w.KP_TAB=186,w.KP_BACKSPACE=187,w.KP_A=188,w.KP_B=189,w.KP_C=190,w.KP_D=191,w.KP_E=192,w.KP_F=193,w.KP_XOR=194,w.KP_POWER=195,w.KP_PERCENT=196,w.KP_LESS=197,w.KP_GREATER=198,w.KP_AMPERSAND=199,w.KP_DBLAMPERSAND=200,w.KP_VERTICALBAR=201,w.KP_DBLVERTICALBAR=202,w.KP_COLON=203,w.KP_HASH=204,w.KP_SPACE=205,w.KP_AT=206,w.KP_EXCLAM=207,w.KP_MEMSTORE=208,w.KP_MEMRECALL=209,w.KP_MEMCLEAR=210,w.KP_MEMADD=211,w.KP_MEMSUBTRACT=212,w.KP_MEMMULTIPLY=213,w.KP_MEMDIVIDE=214,w.KP_PLUSMINUS=215,w.KP_CLEAR=216,w.KP_CLEARENTRY=217,w.KP_BINARY=218,w.KP_OCTAL=219,w.KP_DECIMAL=220,w.KP_HEXADECIMAL=221,w.LCTRL=224,w.LSHIFT=225,w.LALT=226,w.LMETA=227,w.RCTRL=228,w.RSHIFT=229,w.RALT=230,w.RMETA=231,w.MODE=257,w.AUDIONEXT=258,w.AUDIOPREV=259,w.AUDIOSTOP=260,w.AUDIOPLAY=261,w.AUDIOMUTE=262,w.MEDIASELECT=263,w.WWW=264,w.MAIL=265,w.CALCULATOR=266,w.COMPUTER=267,w.AC_SEARCH=268,w.AC_HOME=269,w.AC_BACK=270,w.AC_FORWARD=271,w.AC_STOP=272,w.AC_REFRESH=273,w.AC_BOOKMARKS=274,w.BRIGHTNESSDOWN=275,w.BRIGHTNESSUP=276,w.DISPLAYSWITCH=277,w.KBDILLUMTOGGLE=278,w.KBDILLUMDOWN=279,w.KBDILLUMUP=280,w.EJECT=281,w.SLEEP=282,w.APP1=283,w.APP2=284,w.scanCodeNames=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left Meta","Right Ctrl","Right Shift","Right Alt","Right Meta",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],O.UNKNOWN=0,O.DEVICE_ADDED=1,O.DEVICE_REMOVED=2,O.DEVICE_REMAPPED=3,C.UNKNOWN=0,C.EDIT=1,C.INPUT=2,E.UNKNOWN=0,E.SHOWN=1,E.HIDDEN=2,E.EXPOSED=3,E.MOVED=4,E.RESIZED=5,E.SIZE_CHANGED=6,E.MINIMIZED=7,E.MAXIMIZED=8,E.RESTORED=9,E.ENTER=10,E.LEAVE=11,E.FOCUS_GAINED=12,E.FOCUS_LOST=13,E.CLOSE=14,E.ENTER_FULLSCREEN=15,E.EXIT_FULLSCREEN=16,U.UNKNOWN=0,U.TERMINATING=11,U.LOW_MEMORY=12,U.WILL_ENTER_BACKGROUND=13,U.DID_ENTER_BACKGROUND=14,U.WILL_ENTER_FOREGROUND=15,U.DID_ENTER_FOREGROUND=16,clay_Utils._nextUniqueIntCursor=0,clay_Utils._nextUniqueInt0=2147483646*Math.random()|0,clay_Utils._nextUniqueInt1=1e-4*(new Date).getTime()|0,clay_Utils._nextUniqueInt2=2147483646*Math.random()|0,clay_Utils._nextUniqueInt3=2147483646*Math.random()|0,M.END=0,M.DESTROYED=1,M.DESTROYED_SOURCE=2,T.UNKNOWN=0,T.CUSTOM=1,T.OGG=2,T.WAV=3,T.PCM=4,T.MP3=5,T.FLAC=6,k.INVALID=-1,k.PAUSED=0,k.PLAYING=1,k.STOPPED=2,D.BYTES_PER_ELEMENT=4,S.BYTES_PER_ELEMENT=4,A.BYTES_PER_ELEMENT=2,P.BYTES_PER_ELEMENT=1,clay_graphics_Texture._nextIndex=1,clay_opengl_GLGraphics.DEPTH24_STENCIL8_OES=35056,clay_opengl_GLGraphics.TEXTURE_2D_MULTISAMPLE=37120,clay_opengl_GLGraphics._boundTexture2D=[],clay_opengl_GLGraphics._activeTextureSlot=-1,clay_opengl_GLGraphics._didFetchDefaultBuffers=!1,clay_opengl_web_GL.DEPTH_BUFFER_BIT=256,clay_opengl_web_GL.STENCIL_BUFFER_BIT=1024,clay_opengl_web_GL.COLOR_BUFFER_BIT=16384,clay_opengl_web_GL.POINTS=0,clay_opengl_web_GL.LINES=1,clay_opengl_web_GL.LINE_LOOP=2,clay_opengl_web_GL.LINE_STRIP=3,clay_opengl_web_GL.TRIANGLES=4,clay_opengl_web_GL.TRIANGLE_STRIP=5,clay_opengl_web_GL.TRIANGLE_FAN=6,clay_opengl_web_GL.ZERO=0,clay_opengl_web_GL.ONE=1,clay_opengl_web_GL.SRC_COLOR=768,clay_opengl_web_GL.ONE_MINUS_SRC_COLOR=769,clay_opengl_web_GL.SRC_ALPHA=770,clay_opengl_web_GL.ONE_MINUS_SRC_ALPHA=771,clay_opengl_web_GL.DST_ALPHA=772,clay_opengl_web_GL.ONE_MINUS_DST_ALPHA=773,clay_opengl_web_GL.DST_COLOR=774,clay_opengl_web_GL.ONE_MINUS_DST_COLOR=775,clay_opengl_web_GL.SRC_ALPHA_SATURATE=776,clay_opengl_web_GL.FUNC_ADD=32774,clay_opengl_web_GL.BLEND_EQUATION=32777,clay_opengl_web_GL.BLEND_EQUATION_RGB=32777,clay_opengl_web_GL.BLEND_EQUATION_ALPHA=34877,clay_opengl_web_GL.FUNC_SUBTRACT=32778,clay_opengl_web_GL.FUNC_REVERSE_SUBTRACT=32779,clay_opengl_web_GL.BLEND_DST_RGB=32968,clay_opengl_web_GL.BLEND_SRC_RGB=32969,clay_opengl_web_GL.BLEND_DST_ALPHA=32970,clay_opengl_web_GL.BLEND_SRC_ALPHA=32971,clay_opengl_web_GL.CONSTANT_COLOR=32769,clay_opengl_web_GL.ONE_MINUS_CONSTANT_COLOR=32770,clay_opengl_web_GL.CONSTANT_ALPHA=32771,clay_opengl_web_GL.ONE_MINUS_CONSTANT_ALPHA=32772,clay_opengl_web_GL.BLEND_COLOR=32773,clay_opengl_web_GL.ARRAY_BUFFER=34962,clay_opengl_web_GL.ELEMENT_ARRAY_BUFFER=34963,clay_opengl_web_GL.ARRAY_BUFFER_BINDING=34964,clay_opengl_web_GL.ELEMENT_ARRAY_BUFFER_BINDING=34965,clay_opengl_web_GL.STREAM_DRAW=35040,clay_opengl_web_GL.STATIC_DRAW=35044,clay_opengl_web_GL.DYNAMIC_DRAW=35048,clay_opengl_web_GL.BUFFER_SIZE=34660,clay_opengl_web_GL.BUFFER_USAGE=34661,clay_opengl_web_GL.CURRENT_VERTEX_ATTRIB=34342,clay_opengl_web_GL.FRONT=1028,clay_opengl_web_GL.BACK=1029,clay_opengl_web_GL.FRONT_AND_BACK=1032,clay_opengl_web_GL.CULL_FACE=2884,clay_opengl_web_GL.BLEND=3042,clay_opengl_web_GL.DITHER=3024,clay_opengl_web_GL.STENCIL_TEST=2960,clay_opengl_web_GL.DEPTH_TEST=2929,clay_opengl_web_GL.SCISSOR_TEST=3089,clay_opengl_web_GL.POLYGON_OFFSET_FILL=32823,clay_opengl_web_GL.SAMPLE_ALPHA_TO_COVERAGE=32926,clay_opengl_web_GL.SAMPLE_COVERAGE=32928,clay_opengl_web_GL.NO_ERROR=0,clay_opengl_web_GL.INVALID_ENUM=1280,clay_opengl_web_GL.INVALID_VALUE=1281,clay_opengl_web_GL.INVALID_OPERATION=1282,clay_opengl_web_GL.OUT_OF_MEMORY=1285,clay_opengl_web_GL.CW=2304,clay_opengl_web_GL.CCW=2305,clay_opengl_web_GL.LINE_WIDTH=2849,clay_opengl_web_GL.ALIASED_POINT_SIZE_RANGE=33901,clay_opengl_web_GL.ALIASED_LINE_WIDTH_RANGE=33902,clay_opengl_web_GL.CULL_FACE_MODE=2885,clay_opengl_web_GL.FRONT_FACE=2886,clay_opengl_web_GL.DEPTH_RANGE=2928,clay_opengl_web_GL.DEPTH_WRITEMASK=2930,clay_opengl_web_GL.DEPTH_CLEAR_VALUE=2931,clay_opengl_web_GL.DEPTH_FUNC=2932,clay_opengl_web_GL.STENCIL_CLEAR_VALUE=2961,clay_opengl_web_GL.STENCIL_FUNC=2962,clay_opengl_web_GL.STENCIL_FAIL=2964,clay_opengl_web_GL.STENCIL_PASS_DEPTH_FAIL=2965,clay_opengl_web_GL.STENCIL_PASS_DEPTH_PASS=2966,clay_opengl_web_GL.STENCIL_REF=2967,clay_opengl_web_GL.STENCIL_VALUE_MASK=2963,clay_opengl_web_GL.STENCIL_WRITEMASK=2968,clay_opengl_web_GL.STENCIL_BACK_FUNC=34816,clay_opengl_web_GL.STENCIL_BACK_FAIL=34817,clay_opengl_web_GL.STENCIL_BACK_PASS_DEPTH_FAIL=34818,clay_opengl_web_GL.STENCIL_BACK_PASS_DEPTH_PASS=34819,clay_opengl_web_GL.STENCIL_BACK_REF=36003,clay_opengl_web_GL.STENCIL_BACK_VALUE_MASK=36004,clay_opengl_web_GL.STENCIL_BACK_WRITEMASK=36005,clay_opengl_web_GL.VIEWPORT=2978,clay_opengl_web_GL.SCISSOR_BOX=3088,clay_opengl_web_GL.COLOR_CLEAR_VALUE=3106,clay_opengl_web_GL.COLOR_WRITEMASK=3107,clay_opengl_web_GL.UNPACK_ALIGNMENT=3317,clay_opengl_web_GL.PACK_ALIGNMENT=3333,clay_opengl_web_GL.MAX_TEXTURE_SIZE=3379,clay_opengl_web_GL.MAX_VIEWPORT_DIMS=3386,clay_opengl_web_GL.SUBPIXEL_BITS=3408,clay_opengl_web_GL.RED_BITS=3410,clay_opengl_web_GL.GREEN_BITS=3411,clay_opengl_web_GL.BLUE_BITS=3412,clay_opengl_web_GL.ALPHA_BITS=3413,clay_opengl_web_GL.DEPTH_BITS=3414,clay_opengl_web_GL.STENCIL_BITS=3415,clay_opengl_web_GL.POLYGON_OFFSET_UNITS=10752,clay_opengl_web_GL.POLYGON_OFFSET_FACTOR=32824,clay_opengl_web_GL.TEXTURE_BINDING_2D=32873,clay_opengl_web_GL.SAMPLE_BUFFERS=32936,clay_opengl_web_GL.SAMPLES=32937,clay_opengl_web_GL.SAMPLE_COVERAGE_VALUE=32938,clay_opengl_web_GL.SAMPLE_COVERAGE_INVERT=32939,clay_opengl_web_GL.COMPRESSED_TEXTURE_FORMATS=34467,clay_opengl_web_GL.DONT_CARE=4352,clay_opengl_web_GL.FASTEST=4353,clay_opengl_web_GL.NICEST=4354,clay_opengl_web_GL.GENERATE_MIPMAP_HINT=33170,clay_opengl_web_GL.BYTE=5120,clay_opengl_web_GL.UNSIGNED_BYTE=5121,clay_opengl_web_GL.SHORT=5122,clay_opengl_web_GL.UNSIGNED_SHORT=5123,clay_opengl_web_GL.INT=5124,clay_opengl_web_GL.UNSIGNED_INT=5125,clay_opengl_web_GL.FLOAT=5126,clay_opengl_web_GL.DEPTH_COMPONENT=6402,clay_opengl_web_GL.ALPHA=6406,clay_opengl_web_GL.RGB=6407,clay_opengl_web_GL.RGBA=6408,clay_opengl_web_GL.LUMINANCE=6409,clay_opengl_web_GL.LUMINANCE_ALPHA=6410,clay_opengl_web_GL.UNSIGNED_SHORT_4_4_4_4=32819,clay_opengl_web_GL.UNSIGNED_SHORT_5_5_5_1=32820,clay_opengl_web_GL.UNSIGNED_SHORT_5_6_5=33635,clay_opengl_web_GL.FRAGMENT_SHADER=35632,clay_opengl_web_GL.VERTEX_SHADER=35633,clay_opengl_web_GL.MAX_VERTEX_ATTRIBS=34921,clay_opengl_web_GL.MAX_VERTEX_UNIFORM_VECTORS=36347,clay_opengl_web_GL.MAX_VARYING_VECTORS=36348,clay_opengl_web_GL.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,clay_opengl_web_GL.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,clay_opengl_web_GL.MAX_TEXTURE_IMAGE_UNITS=34930,clay_opengl_web_GL.MAX_FRAGMENT_UNIFORM_VECTORS=36349,clay_opengl_web_GL.SHADER_TYPE=35663,clay_opengl_web_GL.DELETE_STATUS=35712,clay_opengl_web_GL.LINK_STATUS=35714,clay_opengl_web_GL.VALIDATE_STATUS=35715,clay_opengl_web_GL.ATTACHED_SHADERS=35717,clay_opengl_web_GL.ACTIVE_UNIFORMS=35718,clay_opengl_web_GL.ACTIVE_ATTRIBUTES=35721,clay_opengl_web_GL.SHADING_LANGUAGE_VERSION=35724,clay_opengl_web_GL.CURRENT_PROGRAM=35725,clay_opengl_web_GL.NEVER=512,clay_opengl_web_GL.LESS=513,clay_opengl_web_GL.EQUAL=514,clay_opengl_web_GL.LEQUAL=515,clay_opengl_web_GL.GREATER=516,clay_opengl_web_GL.NOTEQUAL=517,clay_opengl_web_GL.GEQUAL=518,clay_opengl_web_GL.ALWAYS=519,clay_opengl_web_GL.KEEP=7680,clay_opengl_web_GL.REPLACE=7681,clay_opengl_web_GL.INCR=7682,clay_opengl_web_GL.DECR=7683,clay_opengl_web_GL.INVERT=5386,clay_opengl_web_GL.INCR_WRAP=34055,clay_opengl_web_GL.DECR_WRAP=34056,clay_opengl_web_GL.VENDOR=7936,clay_opengl_web_GL.RENDERER=7937,clay_opengl_web_GL.VERSION=7938,clay_opengl_web_GL.NEAREST=9728,clay_opengl_web_GL.LINEAR=9729,clay_opengl_web_GL.NEAREST_MIPMAP_NEAREST=9984,clay_opengl_web_GL.LINEAR_MIPMAP_NEAREST=9985,clay_opengl_web_GL.NEAREST_MIPMAP_LINEAR=9986,clay_opengl_web_GL.LINEAR_MIPMAP_LINEAR=9987,clay_opengl_web_GL.TEXTURE_MAG_FILTER=10240,clay_opengl_web_GL.TEXTURE_MIN_FILTER=10241,clay_opengl_web_GL.TEXTURE_WRAP_S=10242,clay_opengl_web_GL.TEXTURE_WRAP_T=10243,clay_opengl_web_GL.TEXTURE_2D=3553,clay_opengl_web_GL.TEXTURE=5890,clay_opengl_web_GL.TEXTURE_CUBE_MAP=34067,clay_opengl_web_GL.TEXTURE_BINDING_CUBE_MAP=34068,clay_opengl_web_GL.TEXTURE_CUBE_MAP_POSITIVE_X=34069,clay_opengl_web_GL.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,clay_opengl_web_GL.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,clay_opengl_web_GL.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,clay_opengl_web_GL.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,clay_opengl_web_GL.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,clay_opengl_web_GL.MAX_CUBE_MAP_TEXTURE_SIZE=34076,clay_opengl_web_GL.TEXTURE0=33984,clay_opengl_web_GL.TEXTURE1=33985,clay_opengl_web_GL.TEXTURE2=33986,clay_opengl_web_GL.TEXTURE3=33987,clay_opengl_web_GL.TEXTURE4=33988,clay_opengl_web_GL.TEXTURE5=33989,clay_opengl_web_GL.TEXTURE6=33990,clay_opengl_web_GL.TEXTURE7=33991,clay_opengl_web_GL.TEXTURE8=33992,clay_opengl_web_GL.TEXTURE9=33993,clay_opengl_web_GL.TEXTURE10=33994,clay_opengl_web_GL.TEXTURE11=33995,clay_opengl_web_GL.TEXTURE12=33996,clay_opengl_web_GL.TEXTURE13=33997,clay_opengl_web_GL.TEXTURE14=33998,clay_opengl_web_GL.TEXTURE15=33999,clay_opengl_web_GL.TEXTURE16=34e3,clay_opengl_web_GL.TEXTURE17=34001,clay_opengl_web_GL.TEXTURE18=34002,clay_opengl_web_GL.TEXTURE19=34003,clay_opengl_web_GL.TEXTURE20=34004,clay_opengl_web_GL.TEXTURE21=34005,clay_opengl_web_GL.TEXTURE22=34006,clay_opengl_web_GL.TEXTURE23=34007,clay_opengl_web_GL.TEXTURE24=34008,clay_opengl_web_GL.TEXTURE25=34009,clay_opengl_web_GL.TEXTURE26=34010,clay_opengl_web_GL.TEXTURE27=34011,clay_opengl_web_GL.TEXTURE28=34012,clay_opengl_web_GL.TEXTURE29=34013,clay_opengl_web_GL.TEXTURE30=34014,clay_opengl_web_GL.TEXTURE31=34015,clay_opengl_web_GL.ACTIVE_TEXTURE=34016,clay_opengl_web_GL.REPEAT=10497,clay_opengl_web_GL.CLAMP_TO_EDGE=33071,clay_opengl_web_GL.MIRRORED_REPEAT=33648,clay_opengl_web_GL.FLOAT_VEC2=35664,clay_opengl_web_GL.FLOAT_VEC3=35665,clay_opengl_web_GL.FLOAT_VEC4=35666,clay_opengl_web_GL.INT_VEC2=35667,clay_opengl_web_GL.INT_VEC3=35668,clay_opengl_web_GL.INT_VEC4=35669,clay_opengl_web_GL.BOOL=35670,clay_opengl_web_GL.BOOL_VEC2=35671,clay_opengl_web_GL.BOOL_VEC3=35672,clay_opengl_web_GL.BOOL_VEC4=35673,clay_opengl_web_GL.FLOAT_MAT2=35674,clay_opengl_web_GL.FLOAT_MAT3=35675,clay_opengl_web_GL.FLOAT_MAT4=35676,clay_opengl_web_GL.SAMPLER_2D=35678,clay_opengl_web_GL.SAMPLER_CUBE=35680,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_ENABLED=34338,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_SIZE=34339,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_STRIDE=34340,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_TYPE=34341,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_POINTER=34373,clay_opengl_web_GL.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,clay_opengl_web_GL.VERTEX_PROGRAM_POINT_SIZE=34370,clay_opengl_web_GL.POINT_SPRITE=34913,clay_opengl_web_GL.COMPILE_STATUS=35713,clay_opengl_web_GL.LOW_FLOAT=36336,clay_opengl_web_GL.MEDIUM_FLOAT=36337,clay_opengl_web_GL.HIGH_FLOAT=36338,clay_opengl_web_GL.LOW_INT=36339,clay_opengl_web_GL.MEDIUM_INT=36340,clay_opengl_web_GL.HIGH_INT=36341,clay_opengl_web_GL.FRAMEBUFFER=36160,clay_opengl_web_GL.RENDERBUFFER=36161,clay_opengl_web_GL.RGBA4=32854,clay_opengl_web_GL.RGB5_A1=32855,clay_opengl_web_GL.RGB565=36194,clay_opengl_web_GL.DEPTH_COMPONENT16=33189,clay_opengl_web_GL.STENCIL_INDEX=6401,clay_opengl_web_GL.STENCIL_INDEX8=36168,clay_opengl_web_GL.DEPTH_STENCIL=34041,clay_opengl_web_GL.RENDERBUFFER_WIDTH=36162,clay_opengl_web_GL.RENDERBUFFER_HEIGHT=36163,clay_opengl_web_GL.RENDERBUFFER_INTERNAL_FORMAT=36164,clay_opengl_web_GL.RENDERBUFFER_RED_SIZE=36176,clay_opengl_web_GL.RENDERBUFFER_GREEN_SIZE=36177,clay_opengl_web_GL.RENDERBUFFER_BLUE_SIZE=36178,clay_opengl_web_GL.RENDERBUFFER_ALPHA_SIZE=36179,clay_opengl_web_GL.RENDERBUFFER_DEPTH_SIZE=36180,clay_opengl_web_GL.RENDERBUFFER_STENCIL_SIZE=36181,clay_opengl_web_GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,clay_opengl_web_GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,clay_opengl_web_GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,clay_opengl_web_GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,clay_opengl_web_GL.COLOR_ATTACHMENT0=36064,clay_opengl_web_GL.DEPTH_ATTACHMENT=36096,clay_opengl_web_GL.STENCIL_ATTACHMENT=36128,clay_opengl_web_GL.DEPTH_STENCIL_ATTACHMENT=33306,clay_opengl_web_GL.NONE=0,clay_opengl_web_GL.FRAMEBUFFER_COMPLETE=36053,clay_opengl_web_GL.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,clay_opengl_web_GL.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,clay_opengl_web_GL.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,clay_opengl_web_GL.FRAMEBUFFER_UNSUPPORTED=36061,clay_opengl_web_GL.FRAMEBUFFER_BINDING=36006,clay_opengl_web_GL.RENDERBUFFER_BINDING=36007,clay_opengl_web_GL.MAX_RENDERBUFFER_SIZE=34024,clay_opengl_web_GL.INVALID_FRAMEBUFFER_OPERATION=1286,clay_opengl_web_GL.UNPACK_FLIP_Y_WEBGL=37440,clay_opengl_web_GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,clay_opengl_web_GL.CONTEXT_LOST_WEBGL=37442;clay_opengl_web_GL.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,clay_opengl_web_GL.BROWSER_DEFAULT_WEBGL=37444,clay_web_WebAssets.POT=!0,clay_web_WebAudio.HALF_PI=1.5707,clay_web_WebRuntime.timestampStart=0,clay_web_WebRuntime.webWindowId=1,clay_web__$WebRuntime_DOMKeys.dom_shift=16,clay_web__$WebRuntime_DOMKeys.dom_ctrl=17,clay_web__$WebRuntime_DOMKeys.dom_alt=18,clay_web__$WebRuntime_DOMKeys.dom_capslock=20,clay_web__$WebRuntime_DOMKeys.dom_pageup=33,clay_web__$WebRuntime_DOMKeys.dom_pagedown=34,clay_web__$WebRuntime_DOMKeys.dom_end=35,clay_web__$WebRuntime_DOMKeys.dom_home=36,clay_web__$WebRuntime_DOMKeys.dom_left=37,clay_web__$WebRuntime_DOMKeys.dom_up=38,clay_web__$WebRuntime_DOMKeys.dom_right=39,clay_web__$WebRuntime_DOMKeys.dom_down=40,clay_web__$WebRuntime_DOMKeys.dom_printscr=44,clay_web__$WebRuntime_DOMKeys.dom_insert=45,clay_web__$WebRuntime_DOMKeys.dom_delete=46,clay_web__$WebRuntime_DOMKeys.dom_lmeta=91,clay_web__$WebRuntime_DOMKeys.dom_rmeta=93,clay_web__$WebRuntime_DOMKeys.dom_kp_0=96,clay_web__$WebRuntime_DOMKeys.dom_kp_1=97,clay_web__$WebRuntime_DOMKeys.dom_kp_2=98,clay_web__$WebRuntime_DOMKeys.dom_kp_3=99,clay_web__$WebRuntime_DOMKeys.dom_kp_4=100,clay_web__$WebRuntime_DOMKeys.dom_kp_5=101,clay_web__$WebRuntime_DOMKeys.dom_kp_6=102,clay_web__$WebRuntime_DOMKeys.dom_kp_7=103,clay_web__$WebRuntime_DOMKeys.dom_kp_8=104,clay_web__$WebRuntime_DOMKeys.dom_kp_9=105,clay_web__$WebRuntime_DOMKeys.dom_kp_multiply=106,clay_web__$WebRuntime_DOMKeys.dom_kp_plus=107,clay_web__$WebRuntime_DOMKeys.dom_kp_minus=109,clay_web__$WebRuntime_DOMKeys.dom_kp_decimal=110,clay_web__$WebRuntime_DOMKeys.dom_kp_divide=111,clay_web__$WebRuntime_DOMKeys.dom_kp_numlock=144,clay_web__$WebRuntime_DOMKeys.dom_f1=112,clay_web__$WebRuntime_DOMKeys.dom_f2=113,clay_web__$WebRuntime_DOMKeys.dom_f3=114,clay_web__$WebRuntime_DOMKeys.dom_f4=115,clay_web__$WebRuntime_DOMKeys.dom_f5=116,clay_web__$WebRuntime_DOMKeys.dom_f6=117,clay_web__$WebRuntime_DOMKeys.dom_f7=118,clay_web__$WebRuntime_DOMKeys.dom_f8=119,clay_web__$WebRuntime_DOMKeys.dom_f9=120,clay_web__$WebRuntime_DOMKeys.dom_f10=121,clay_web__$WebRuntime_DOMKeys.dom_f11=122,clay_web__$WebRuntime_DOMKeys.dom_f12=123,clay_web__$WebRuntime_DOMKeys.dom_f13=124,clay_web__$WebRuntime_DOMKeys.dom_f14=125,clay_web__$WebRuntime_DOMKeys.dom_f15=126,clay_web__$WebRuntime_DOMKeys.dom_f16=127,clay_web__$WebRuntime_DOMKeys.dom_f17=128,clay_web__$WebRuntime_DOMKeys.dom_f18=129,clay_web__$WebRuntime_DOMKeys.dom_f19=130,clay_web__$WebRuntime_DOMKeys.dom_f20=131,clay_web__$WebRuntime_DOMKeys.dom_f21=132,clay_web__$WebRuntime_DOMKeys.dom_f22=133,clay_web__$WebRuntime_DOMKeys.dom_f23=134,clay_web__$WebRuntime_DOMKeys.dom_f24=135,clay_web__$WebRuntime_DOMKeys.dom_caret=160,clay_web__$WebRuntime_DOMKeys.dom_exclaim=161,clay_web__$WebRuntime_DOMKeys.dom_quotedbl=162,clay_web__$WebRuntime_DOMKeys.dom_hash=163,clay_web__$WebRuntime_DOMKeys.dom_dollar=164,clay_web__$WebRuntime_DOMKeys.dom_percent=165,clay_web__$WebRuntime_DOMKeys.dom_ampersand=166,clay_web__$WebRuntime_DOMKeys.dom_underscore=167,clay_web__$WebRuntime_DOMKeys.dom_leftparen=168,clay_web__$WebRuntime_DOMKeys.dom_rightparen=169,clay_web__$WebRuntime_DOMKeys.dom_asterisk=170,clay_web__$WebRuntime_DOMKeys.dom_plus=171,clay_web__$WebRuntime_DOMKeys.dom_pipe=172,clay_web__$WebRuntime_DOMKeys.dom_minus=173,clay_web__$WebRuntime_DOMKeys.dom_leftbrace=174,clay_web__$WebRuntime_DOMKeys.dom_rightbrace=175,clay_web__$WebRuntime_DOMKeys.dom_tilde=176,clay_web__$WebRuntime_DOMKeys.dom_audiomute=181,clay_web__$WebRuntime_DOMKeys.dom_volumedown=182,clay_web__$WebRuntime_DOMKeys.dom_volumeup=183,clay_web__$WebRuntime_DOMKeys.dom_comma=188,clay_web__$WebRuntime_DOMKeys.dom_period=190,clay_web__$WebRuntime_DOMKeys.dom_slash=191,clay_web__$WebRuntime_DOMKeys.dom_backquote=192,clay_web__$WebRuntime_DOMKeys.dom_leftbracket=219,clay_web__$WebRuntime_DOMKeys.dom_rightbracket=221,clay_web__$WebRuntime_DOMKeys.dom_backslash=220,clay_web__$WebRuntime_DOMKeys.dom_quote=222,clay_web__$WebRuntime_DOMKeys.dom_meta=224,earcut_Node.recyclingEnabled=!0,earcut_Node.nextPoolIndex=0,earcut_Node.pool=[],haxe_Serializer.USE_CACHE=!1,haxe_Serializer.USE_ENUM_INDEX=!1,haxe_Serializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver,haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",haxe_xml_Parser.escapes=((Q=new haxe_ds_StringMap).h.lt="<",Q.h.gt=">",Q.h.amp="&",Q.h.quot='"',Q.h.apos="'",Q),hsluv_Hsluv.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]],hsluv_Hsluv.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],[.019330818715591,.11919477979462,.95053215224966]],hsluv_Hsluv.refY=1,hsluv_Hsluv.refU=.19783000664283,hsluv_Hsluv.refV=.46831999493879,hsluv_Hsluv.kappa=903.2962962,hsluv_Hsluv.epsilon=.0088564516,hsluv_Hsluv.hexChars="0123456789abcdef",ld49_MainScene._point=new ceramic_Point,zpp_$nape_phys_ZPP_$Material.WAKE=1,zpp_$nape_phys_ZPP_$Material.PROPS=2,zpp_$nape_phys_ZPP_$Material.ANGDRAG=4,zpp_$nape_phys_ZPP_$Material.ARBITERS=8,ld49_TeethShape._material=new nape_phys_Material(0,.03,.1,4,1e-4),nape_Config.epsilon=1e-8,nape_Config.fluidAngularDragFriction=2.5,nape_Config.fluidAngularDrag=100,nape_Config.fluidVacuumDrag=.5,nape_Config.fluidLinearDrag=.5,nape_Config.collisionSlop=.2,nape_Config.collisionSlopCCD=.5,nape_Config.distanceThresholdCCD=.05,nape_Config.staticCCDLinearThreshold=.05,nape_Config.staticCCDAngularThreshold=.005,nape_Config.bulletCCDLinearThreshold=.125,nape_Config.bulletCCDAngularThreshold=.0125,nape_Config.dynamicSweepLinearThreshold=17,nape_Config.dynamicSweepAngularThreshold=.6,nape_Config.angularCCDSlipScale=.75,nape_Config.arbiterExpirationDelay=6,nape_Config.staticFrictionThreshold=2,nape_Config.elasticThreshold=20,nape_Config.sleepDelay=60,nape_Config.linearSleepThreshold=.2,nape_Config.angularSleepThreshold=.4,nape_Config.contactBiasCoef=.3,nape_Config.contactStaticBiasCoef=.6,nape_Config.contactContinuousBiasCoef=.4,nape_Config.contactContinuousStaticBiasCoef=.5,nape_Config.constraintLinearSlop=.1,nape_Config.constraintAngularSlop=.001,nape_Config.illConditionedThreshold=2e8,nape_constraint_Constraint.zpp_internalAlloc=!1,nape_phys_Interactor.zpp_internalAlloc=!1,nape_shape_Shape.zpp_internalAlloc=!1,poly2tri_Constants.kAlpha=.3,poly2tri_Constants.EPSILON=1e-12,poly2tri_Constants.PI_2=Math.PI/2,poly2tri_Constants.PI_3div4=3*Math.PI/4,poly2tri_Orientation.CW=1,poly2tri_Orientation.CCW=-1,poly2tri_Orientation.COLLINEAR=0,poly2tri_Point.C_ID=0,poly2tri_Pool.enabled=!0,poly2tri_Pool.pointArrayIndex=0,poly2tri_Pool.pointArrayPool=[],poly2tri_Pool.triangleArrayIndex=0,poly2tri_Pool.triangleArrayPool=[],poly2tri_Pool.edgeArrayIndex=0,poly2tri_Pool.edgeArrayPool=[],poly2tri_Pool.edgeIndex=0,poly2tri_Pool.edgePool=[],poly2tri_Pool.pointIndex=0,poly2tri_Pool.pointPool=[],poly2tri_Pool.triangleIndex=0,poly2tri_Pool.trianglePool=[],poly2tri_Pool.nodeIndex=0,poly2tri_Pool.nodePool=[],poly2tri_SweepContext._tmpArray=[],poly2tri_Triangle.CW_OFFSET=1,poly2tri_Triangle.CCW_OFFSET=-1,tracker_Autorun.prevCurrent=[],tracker_Autorun._autorunArrays=[],tracker_Autorun._autorunArraysLen=0,tracker_Autorun._arrayOfAutorunArrays=[],tracker_Autorun._arrayOfAutorunArraysLen=0,zpp_$nape_ZPP_$Const.FMAX=1e100,zpp_$nape_ZPP_$ID._Interactor=0,zpp_$nape_ZPP_$ID._Space=0,zpp_$nape_ZPP_$ID._ZPP_SimpleVert=0,zpp_$nape_ZPP_$ID._ZPP_SimpleSeg=0,zpp_$nape_ZPP_$ID._InteractionGroup=0,zpp_$nape_ZPP_$ID._Constraint=0,zpp_$nape_ZPP_$ID._CbType=0,zpp_$nape_ZPP_$ID._CbSet=0,zpp_$nape_ZPP_$ID._Listener=0,zpp_$nape_callbacks_ZPP_$Callback.internal=!1,zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE=new nape_callbacks_CbType,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY=new nape_callbacks_CbType,zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND=new nape_callbacks_CbType,zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT=new nape_callbacks_CbType,zpp_$nape_util_ZPP_$Flags.internal=!1,zpp_$nape_util_ZPP_$Flags.id_ImmState_ACCEPT=1,zpp_$nape_util_ZPP_$Flags.id_ImmState_IGNORE=2,zpp_$nape_util_ZPP_$Flags.id_ImmState_ALWAYS=4,zpp_$nape_util_ZPP_$Flags.id_Broadphase_DYNAMIC_AABB_TREE=0,zpp_$nape_util_ZPP_$Flags.id_Broadphase_SWEEP_AND_PRUNE=1,zpp_$nape_util_ZPP_$Flags.id_ShapeType_CIRCLE=0,zpp_$nape_util_ZPP_$Flags.id_ShapeType_POLYGON=1,zpp_$nape_util_ZPP_$Flags.id_ValidationResult_VALID=0,zpp_$nape_util_ZPP_$Flags.id_ValidationResult_DEGENERATE=1,zpp_$nape_util_ZPP_$Flags.id_ValidationResult_CONCAVE=2,zpp_$nape_util_ZPP_$Flags.id_ValidationResult_SELF_INTERSECTING=3,zpp_$nape_util_ZPP_$Flags.id_BodyType_STATIC=1,zpp_$nape_util_ZPP_$Flags.id_BodyType_DYNAMIC=2,zpp_$nape_util_ZPP_$Flags.id_BodyType_KINEMATIC=3,zpp_$nape_util_ZPP_$Flags.id_GravMassMode_DEFAULT=0,zpp_$nape_util_ZPP_$Flags.id_GravMassMode_FIXED=1,zpp_$nape_util_ZPP_$Flags.id_GravMassMode_SCALED=2,zpp_$nape_util_ZPP_$Flags.id_InertiaMode_DEFAULT=0,zpp_$nape_util_ZPP_$Flags.id_InertiaMode_FIXED=1,zpp_$nape_util_ZPP_$Flags.id_MassMode_DEFAULT=0,zpp_$nape_util_ZPP_$Flags.id_MassMode_FIXED=1,zpp_$nape_util_ZPP_$Flags.id_Winding_UNDEFINED=0,zpp_$nape_util_ZPP_$Flags.id_Winding_CLOCKWISE=1,zpp_$nape_util_ZPP_$Flags.id_Winding_ANTICLOCKWISE=2,zpp_$nape_util_ZPP_$Flags.id_ArbiterType_COLLISION=1,zpp_$nape_util_ZPP_$Flags.id_ArbiterType_SENSOR=2,zpp_$nape_util_ZPP_$Flags.id_ArbiterType_FLUID=4,zpp_$nape_util_ZPP_$Flags.id_CbEvent_BEGIN=0,zpp_$nape_util_ZPP_$Flags.id_CbEvent_ONGOING=6,zpp_$nape_util_ZPP_$Flags.id_CbEvent_END=1,zpp_$nape_util_ZPP_$Flags.id_CbEvent_WAKE=2,zpp_$nape_util_ZPP_$Flags.id_CbEvent_SLEEP=3,zpp_$nape_util_ZPP_$Flags.id_CbEvent_BREAK=4,zpp_$nape_util_ZPP_$Flags.id_CbEvent_PRE=5,zpp_$nape_util_ZPP_$Flags.id_InteractionType_COLLISION=1,zpp_$nape_util_ZPP_$Flags.id_InteractionType_SENSOR=2,zpp_$nape_util_ZPP_$Flags.id_InteractionType_FLUID=4,zpp_$nape_util_ZPP_$Flags.id_InteractionType_ANY=7,zpp_$nape_util_ZPP_$Flags.id_ListenerType_BODY=0,zpp_$nape_util_ZPP_$Flags.id_ListenerType_CONSTRAINT=1,zpp_$nape_util_ZPP_$Flags.id_ListenerType_INTERACTION=2,zpp_$nape_util_ZPP_$Flags.id_ListenerType_PRE=3,zpp_$nape_util_ZPP_$Flags.id_PreFlag_ACCEPT=1,zpp_$nape_util_ZPP_$Flags.id_PreFlag_IGNORE=2,zpp_$nape_util_ZPP_$Flags.id_PreFlag_ACCEPT_ONCE=3,zpp_$nape_util_ZPP_$Flags.id_PreFlag_IGNORE_ONCE=4,zpp_$nape_callbacks_ZPP_$Listener.internal=!1,zpp_$nape_callbacks_ZPP_$Listener.types=function(n){null==zpp_$nape_util_ZPP_$Flags.ListenerType_BODY&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_BODY=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.ListenerType_BODY;null==zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1);var t=zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT;null==zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1);var i=zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION;return null==zpp_$nape_util_ZPP_$Flags.ListenerType_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ListenerType_PRE=new nape_callbacks_ListenerType,zpp_$nape_util_ZPP_$Flags.internal=!1),[e,t,i,zpp_$nape_util_ZPP_$Flags.ListenerType_PRE]}(),zpp_$nape_callbacks_ZPP_$Listener.events=function(n){null==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN;null==zpp_$nape_util_ZPP_$Flags.CbEvent_END&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var t=zpp_$nape_util_ZPP_$Flags.CbEvent_END;null==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var i=zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE;null==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var r=zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP;null==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var l=zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK;null==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_PRE=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1);var s=zpp_$nape_util_ZPP_$Flags.CbEvent_PRE;return null==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent,zpp_$nape_util_ZPP_$Flags.internal=!1),[e,t,i,r,l,s,zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING]}(),zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet=new zpp_$nape_util_ZNPList_$ZPP_$CbSet,zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet=new zpp_$nape_util_ZNPList_$ZPP_$CbSet,zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet=new zpp_$nape_util_ZNPList_$ZPP_$CbSet,zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType=new zpp_$nape_util_ZNPList_$ZPP_$CbType,zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType=new zpp_$nape_util_ZNPList_$ZPP_$CbType,zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType=new zpp_$nape_util_ZNPList_$ZPP_$CbType,zpp_$nape_dynamics_ZPP_$Arbiter.internal=!1,zpp_$nape_dynamics_ZPP_$Arbiter.COL=1,zpp_$nape_dynamics_ZPP_$Arbiter.FLUID=4,zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR=2,zpp_$nape_dynamics_ZPP_$Arbiter.types=function(n){null==zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION;null==zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1);var t=zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR;return null==zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID=new nape_dynamics_ArbiterType,zpp_$nape_util_ZPP_$Flags.internal=!1),[null,e,t,null,zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID]}(),zpp_$nape_dynamics_ZPP_$ColArbiter.FACE1=0,zpp_$nape_dynamics_ZPP_$ColArbiter.FACE2=1,zpp_$nape_dynamics_ZPP_$ColArbiter.CIRCLE=2,zpp_$nape_dynamics_ZPP_$Contact.internal=!1,zpp_$nape_dynamics_ZPP_$InteractionGroup.SHAPE=1,zpp_$nape_dynamics_ZPP_$InteractionGroup.BODY=2,zpp_$nape_geom_ZPP_$Collide.flowpoly=new zpp_$nape_util_ZNPList_$ZPP_$Vec2,zpp_$nape_geom_ZPP_$Collide.flowsegs=new zpp_$nape_util_ZNPList_$ZPP_$Vec2,zpp_$nape_geom_ZPP_$ConvexRayResult.internal=!1,zpp_$nape_geom_ZPP_$GeomVertexIterator.internal=!1,zpp_$nape_geom_ZPP_$MarchingSquares.me=new zpp_$nape_geom_ZPP_$MarchingSquares,zpp_$nape_geom_ZPP_$MarchingSquares.look_march=[-1,224,56,216,14,-1,54,214,131,99,-1,91,141,109,181,85],zpp_$nape_geom_ZPP_$PartitionVertex.nextId=0,zpp_$nape_geom_ZPP_$Ray.internal=!1,zpp_$nape_phys_ZPP_$Body.types=function(n){null==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.BodyType_STATIC;null==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1);var t=zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC;return null==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType,zpp_$nape_util_ZPP_$Flags.internal=!1),[null,e,t,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC]}(),zpp_$nape_phys_ZPP_$Body.cur_graph_depth=0,zpp_$nape_shape_ZPP_$Shape.types=function(n){null==zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE=new nape_shape_ShapeType,zpp_$nape_util_ZPP_$Flags.internal=!1);var e=zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE;return null==zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON&&(zpp_$nape_util_ZPP_$Flags.internal=!0,zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON=new nape_shape_ShapeType,zpp_$nape_util_ZPP_$Flags.internal=!1),[e,zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON]}(),zpp_$nape_shape_ZPP_$Edge.internal=!1,zpp_$nape_space_ZPP_$AABBTree.tmpaabb=new zpp_$nape_geom_ZPP_$AABB,zpp_$nape_space_ZPP_$DynAABBPhase.FATTEN=3,zpp_$nape_space_ZPP_$DynAABBPhase.VEL_STEPS=2,zpp_$nape_util_ZPP_$EdgeList.internal=!1,zpp_$nape_util_ZPP_$ShapeList.internal=!1,zpp_$nape_util_ZPP_$BodyList.internal=!1,zpp_$nape_util_ZPP_$CompoundList.internal=!1,zpp_$nape_util_ZPP_$InteractorList.internal=!1,zpp_$nape_util_ZPP_$ConvexResultList.internal=!1,zpp_$nape_util_ZPP_$GeomPolyList.internal=!1,zpp_$nape_util_ZPP_$RayResultList.internal=!1,zpp_$nape_util_ZPP_$Vec2List.internal=!1,zpp_$nape_util_ZPP_$ArbiterList.internal=!1,zpp_$nape_util_ZPP_$ContactList.internal=!1,zpp_$nape_util_ZPP_$InteractionGroupList.internal=!1,zpp_$nape_util_ZPP_$ConstraintList.internal=!1,zpp_$nape_util_ZPP_$CbTypeList.internal=!1,zpp_$nape_util_ZPP_$ListenerList.internal=!1,Main.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);